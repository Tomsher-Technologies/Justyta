var uLe=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var Jze=uLe((nE,oE)=>{var dLe=(function(){function e(n,r){r===void 0&&(r=[]),this._eventType=n,this._eventFunctions=r}return e.prototype.init=function(){var n=this;this._eventFunctions.forEach(function(r){typeof window<"u"&&window.addEventListener(n._eventType,r)})},e})(),fLe=(function(){function e(){this._instances={Accordion:{},Carousel:{},Collapse:{},Dial:{},Dismiss:{},Drawer:{},Dropdown:{},Modal:{},Popover:{},Tabs:{},Tooltip:{},InputCounter:{},CopyClipboard:{},Datepicker:{}}}return e.prototype.addInstance=function(n,r,i,l){if(l===void 0&&(l=!1),!this._instances[n])return console.warn("Flowbite: Component ".concat(n," does not exist.")),!1;if(this._instances[n][i]&&!l){console.warn("Flowbite: Instance with ID ".concat(i," already exists."));return}l&&this._instances[n][i]&&this._instances[n][i].destroyAndRemoveInstance(),this._instances[n][i||this._generateRandomId()]=r},e.prototype.getAllInstances=function(){return this._instances},e.prototype.getInstances=function(n){return this._instances[n]?this._instances[n]:(console.warn("Flowbite: Component ".concat(n," does not exist.")),!1)},e.prototype.getInstance=function(n,r){if(this._componentAndInstanceCheck(n,r)){if(!this._instances[n][r]){console.warn("Flowbite: Instance with ID ".concat(r," does not exist."));return}return this._instances[n][r]}},e.prototype.destroyAndRemoveInstance=function(n,r){this._componentAndInstanceCheck(n,r)&&(this.destroyInstanceObject(n,r),this.removeInstance(n,r))},e.prototype.removeInstance=function(n,r){this._componentAndInstanceCheck(n,r)&&delete this._instances[n][r]},e.prototype.destroyInstanceObject=function(n,r){this._componentAndInstanceCheck(n,r)&&this._instances[n][r].destroy()},e.prototype.instanceExists=function(n,r){return!(!this._instances[n]||!this._instances[n][r])},e.prototype._generateRandomId=function(){return Math.random().toString(36).substr(2,9)},e.prototype._componentAndInstanceCheck=function(n,r){return this._instances[n]?this._instances[n][r]?!0:(console.warn("Flowbite: Instance with ID ".concat(r," does not exist.")),!1):(console.warn("Flowbite: Component ".concat(n," does not exist.")),!1)},e})(),ri=new fLe;typeof window<"u"&&(window.FlowbiteInstances=ri);var YY=function(){return YY=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},YY.apply(this,arguments)},JY={alwaysOpen:!1,activeClasses:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactiveClasses:"text-gray-500 dark:text-gray-400",onOpen:function(){},onClose:function(){},onToggle:function(){}},pLe={id:null,override:!0},fOe=(function(){function e(n,r,i,l){n===void 0&&(n=null),r===void 0&&(r=[]),i===void 0&&(i=JY),l===void 0&&(l=pLe),this._instanceId=l.id?l.id:n.id,this._accordionEl=n,this._items=r,this._options=YY(YY({},JY),i),this._initialized=!1,this.init(),ri.addInstance("Accordion",this,this._instanceId,l.override)}return e.prototype.init=function(){var n=this;this._items.length&&!this._initialized&&(this._items.forEach(function(r){r.active&&n.open(r.id);var i=function(){n.toggle(r.id)};r.triggerEl.addEventListener("click",i),r.clickHandler=i}),this._initialized=!0)},e.prototype.destroy=function(){this._items.length&&this._initialized&&(this._items.forEach(function(n){n.triggerEl.removeEventListener("click",n.clickHandler),delete n.clickHandler}),this._initialized=!1)},e.prototype.removeInstance=function(){ri.removeInstance("Accordion",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype.getItem=function(n){return this._items.filter(function(r){return r.id===n})[0]},e.prototype.open=function(n){var r,i,l=this,f=this.getItem(n);this._options.alwaysOpen||this._items.map(function(h){var v,y;h!==f&&((v=h.triggerEl.classList).remove.apply(v,l._options.activeClasses.split(" ")),(y=h.triggerEl.classList).add.apply(y,l._options.inactiveClasses.split(" ")),h.targetEl.classList.add("hidden"),h.triggerEl.setAttribute("aria-expanded","false"),h.active=!1,h.iconEl&&h.iconEl.classList.add("rotate-180"))}),(r=f.triggerEl.classList).add.apply(r,this._options.activeClasses.split(" ")),(i=f.triggerEl.classList).remove.apply(i,this._options.inactiveClasses.split(" ")),f.triggerEl.setAttribute("aria-expanded","true"),f.targetEl.classList.remove("hidden"),f.active=!0,f.iconEl&&f.iconEl.classList.remove("rotate-180"),this._options.onOpen(this,f)},e.prototype.toggle=function(n){var r=this.getItem(n);r.active?this.close(n):this.open(n),this._options.onToggle(this,r)},e.prototype.close=function(n){var r,i,l=this.getItem(n);(r=l.triggerEl.classList).remove.apply(r,this._options.activeClasses.split(" ")),(i=l.triggerEl.classList).add.apply(i,this._options.inactiveClasses.split(" ")),l.targetEl.classList.add("hidden"),l.triggerEl.setAttribute("aria-expanded","false"),l.active=!1,l.iconEl&&l.iconEl.classList.add("rotate-180"),this._options.onClose(this,l)},e.prototype.updateOnOpen=function(n){this._options.onOpen=n},e.prototype.updateOnClose=function(n){this._options.onClose=n},e.prototype.updateOnToggle=function(n){this._options.onToggle=n},e})();function Hge(){document.querySelectorAll("[data-accordion]").forEach(function(e){var n=e.getAttribute("data-accordion"),r=e.getAttribute("data-active-classes"),i=e.getAttribute("data-inactive-classes"),l=[];e.querySelectorAll("[data-accordion-target]").forEach(function(f){if(f.closest("[data-accordion]")===e){var h={id:f.getAttribute("data-accordion-target"),triggerEl:f,targetEl:document.querySelector(f.getAttribute("data-accordion-target")),iconEl:f.querySelector("[data-accordion-icon]"),active:f.getAttribute("aria-expanded")==="true"};l.push(h)}}),new fOe(e,l,{alwaysOpen:n==="open",activeClasses:r||JY.activeClasses,inactiveClasses:i||JY.inactiveClasses})})}typeof window<"u"&&(window.Accordion=fOe,window.initAccordions=Hge);var XY=function(){return XY=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},XY.apply(this,arguments)},Cye={onCollapse:function(){},onExpand:function(){},onToggle:function(){}},hLe={id:null,override:!0},jpe=(function(){function e(n,r,i,l){n===void 0&&(n=null),r===void 0&&(r=null),i===void 0&&(i=Cye),l===void 0&&(l=hLe),this._instanceId=l.id?l.id:n.id,this._targetEl=n,this._triggerEl=r,this._options=XY(XY({},Cye),i),this._visible=!1,this._initialized=!1,this.init(),ri.addInstance("Collapse",this,this._instanceId,l.override)}return e.prototype.init=function(){var n=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._triggerEl.hasAttribute("aria-expanded")?this._visible=this._triggerEl.getAttribute("aria-expanded")==="true":this._visible=!this._targetEl.classList.contains("hidden"),this._clickHandler=function(){n.toggle()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},e.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},e.prototype.removeInstance=function(){ri.removeInstance("Collapse",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype.collapse=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onCollapse(this)},e.prototype.expand=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onExpand(this)},e.prototype.toggle=function(){this._visible?this.collapse():this.expand(),this._options.onToggle(this)},e.prototype.updateOnCollapse=function(n){this._options.onCollapse=n},e.prototype.updateOnExpand=function(n){this._options.onExpand=n},e.prototype.updateOnToggle=function(n){this._options.onToggle=n},e})();function Fge(){document.querySelectorAll("[data-collapse-toggle]").forEach(function(e){var n=e.getAttribute("data-collapse-toggle"),r=document.getElementById(n);r?ri.instanceExists("Collapse",r.getAttribute("id"))?new jpe(r,e,{},{id:r.getAttribute("id")+"_"+ri._generateRandomId()}):new jpe(r,e):console.error('The target element with id "'.concat(n,'" does not exist. Please check the data-collapse-toggle attribute.'))})}typeof window<"u"&&(window.Collapse=jpe,window.initCollapses=Fge);var ZR=function(){return ZR=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},ZR.apply(this,arguments)},sY={defaultPosition:0,indicators:{items:[],activeClasses:"bg-white dark:bg-gray-800",inactiveClasses:"bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800"},interval:3e3,onNext:function(){},onPrev:function(){},onChange:function(){}},mLe={id:null,override:!0},pOe=(function(){function e(n,r,i,l){n===void 0&&(n=null),r===void 0&&(r=[]),i===void 0&&(i=sY),l===void 0&&(l=mLe),this._instanceId=l.id?l.id:n.id,this._carouselEl=n,this._items=r,this._options=ZR(ZR(ZR({},sY),i),{indicators:ZR(ZR({},sY.indicators),i.indicators)}),this._activeItem=this.getItem(this._options.defaultPosition),this._indicators=this._options.indicators.items,this._intervalDuration=this._options.interval,this._intervalInstance=null,this._initialized=!1,this.init(),ri.addInstance("Carousel",this,this._instanceId,l.override)}return e.prototype.init=function(){var n=this;this._items.length&&!this._initialized&&(this._items.map(function(r){r.el.classList.add("absolute","inset-0","transition-transform","transform")}),this.getActiveItem()?this.slideTo(this.getActiveItem().position):this.slideTo(0),this._indicators.map(function(r,i){r.el.addEventListener("click",function(){n.slideTo(i)})}),this._initialized=!0)},e.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},e.prototype.removeInstance=function(){ri.removeInstance("Carousel",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype.getItem=function(n){return this._items[n]},e.prototype.slideTo=function(n){var r=this._items[n],i={left:r.position===0?this._items[this._items.length-1]:this._items[r.position-1],middle:r,right:r.position===this._items.length-1?this._items[0]:this._items[r.position+1]};this._rotate(i),this._setActiveItem(r),this._intervalInstance&&(this.pause(),this.cycle()),this._options.onChange(this)},e.prototype.next=function(){var n=this.getActiveItem(),r=null;n.position===this._items.length-1?r=this._items[0]:r=this._items[n.position+1],this.slideTo(r.position),this._options.onNext(this)},e.prototype.prev=function(){var n=this.getActiveItem(),r=null;n.position===0?r=this._items[this._items.length-1]:r=this._items[n.position-1],this.slideTo(r.position),this._options.onPrev(this)},e.prototype._rotate=function(n){if(this._items.map(function(r){r.el.classList.add("hidden")}),this._items.length===1){n.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),n.middle.el.classList.add("translate-x-0","z-20");return}n.left.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),n.left.el.classList.add("-translate-x-full","z-10"),n.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),n.middle.el.classList.add("translate-x-0","z-30"),n.right.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-30"),n.right.el.classList.add("translate-x-full","z-20")},e.prototype.cycle=function(){var n=this;typeof window<"u"&&(this._intervalInstance=window.setInterval(function(){n.next()},this._intervalDuration))},e.prototype.pause=function(){clearInterval(this._intervalInstance)},e.prototype.getActiveItem=function(){return this._activeItem},e.prototype._setActiveItem=function(n){var r,i,l=this;this._activeItem=n;var f=n.position;this._indicators.length&&(this._indicators.map(function(h){var v,y;h.el.setAttribute("aria-current","false"),(v=h.el.classList).remove.apply(v,l._options.indicators.activeClasses.split(" ")),(y=h.el.classList).add.apply(y,l._options.indicators.inactiveClasses.split(" "))}),(r=this._indicators[f].el.classList).add.apply(r,this._options.indicators.activeClasses.split(" ")),(i=this._indicators[f].el.classList).remove.apply(i,this._options.indicators.inactiveClasses.split(" ")),this._indicators[f].el.setAttribute("aria-current","true"))},e.prototype.updateOnNext=function(n){this._options.onNext=n},e.prototype.updateOnPrev=function(n){this._options.onPrev=n},e.prototype.updateOnChange=function(n){this._options.onChange=n},e})();function $ge(){document.querySelectorAll("[data-carousel]").forEach(function(e){var n=e.getAttribute("data-carousel-interval"),r=e.getAttribute("data-carousel")==="slide",i=[],l=0;e.querySelectorAll("[data-carousel-item]").length&&Array.from(e.querySelectorAll("[data-carousel-item]")).map(function(_,A){i.push({position:A,el:_}),_.getAttribute("data-carousel-item")==="active"&&(l=A)});var f=[];e.querySelectorAll("[data-carousel-slide-to]").length&&Array.from(e.querySelectorAll("[data-carousel-slide-to]")).map(function(_){f.push({position:parseInt(_.getAttribute("data-carousel-slide-to")),el:_})});var h=new pOe(e,i,{defaultPosition:l,indicators:{items:f},interval:n||sY.interval});r&&h.cycle();var v=e.querySelector("[data-carousel-next]"),y=e.querySelector("[data-carousel-prev]");v&&v.addEventListener("click",function(){h.next()}),y&&y.addEventListener("click",function(){h.prev()})})}typeof window<"u"&&(window.Carousel=pOe,window.initCarousels=$ge);var QY=function(){return QY=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},QY.apply(this,arguments)},Eye={transition:"transition-opacity",duration:300,timing:"ease-out",onHide:function(){}},gLe={id:null,override:!0},hOe=(function(){function e(n,r,i,l){n===void 0&&(n=null),r===void 0&&(r=null),i===void 0&&(i=Eye),l===void 0&&(l=gLe),this._instanceId=l.id?l.id:n.id,this._targetEl=n,this._triggerEl=r,this._options=QY(QY({},Eye),i),this._initialized=!1,this.init(),ri.addInstance("Dismiss",this,this._instanceId,l.override)}return e.prototype.init=function(){var n=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._clickHandler=function(){n.hide()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},e.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},e.prototype.removeInstance=function(){ri.removeInstance("Dismiss",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype.hide=function(){var n=this;this._targetEl.classList.add(this._options.transition,"duration-".concat(this._options.duration),this._options.timing,"opacity-0"),setTimeout(function(){n._targetEl.classList.add("hidden")},this._options.duration),this._options.onHide(this,this._targetEl)},e.prototype.updateOnHide=function(n){this._options.onHide=n},e})();function Uge(){document.querySelectorAll("[data-dismiss-target]").forEach(function(e){var n=e.getAttribute("data-dismiss-target"),r=document.querySelector(n);r?new hOe(r,e):console.error('The dismiss element with id "'.concat(n,'" does not exist. Please check the data-dismiss-target attribute.'))})}typeof window<"u"&&(window.Dismiss=hOe,window.initDismisses=Uge);var ig="top",ub="bottom",db="right",ag="left",jge="auto",G5=[ig,ub,db,ag],lL="start",h5="end",vLe="clippingParents",mOe="viewport",oU="popper",bLe="reference",_ye=G5.reduce(function(e,n){return e.concat([n+"-"+lL,n+"-"+h5])},[]),gOe=[].concat(G5,[jge]).reduce(function(e,n){return e.concat([n,n+"-"+lL,n+"-"+h5])},[]),yLe="beforeRead",SLe="read",CLe="afterRead",ELe="beforeMain",_Le="main",wLe="afterMain",ALe="beforeWrite",TLe="write",OLe="afterWrite",ILe=[yLe,SLe,CLe,ELe,_Le,wLe,ALe,TLe,OLe];function H1(e){return e?(e.nodeName||"").toLowerCase():null}function cv(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var n=e.ownerDocument;return n&&n.defaultView||window}return e}function N2(e){var n=cv(e).Element;return e instanceof n||e instanceof Element}function ab(e){var n=cv(e).HTMLElement;return e instanceof n||e instanceof HTMLElement}function zge(e){if(typeof ShadowRoot>"u")return!1;var n=cv(e).ShadowRoot;return e instanceof n||e instanceof ShadowRoot}function RLe(e){var n=e.state;Object.keys(n.elements).forEach(function(r){var i=n.styles[r]||{},l=n.attributes[r]||{},f=n.elements[r];!ab(f)||!H1(f)||(Object.assign(f.style,i),Object.keys(l).forEach(function(h){var v=l[h];v===!1?f.removeAttribute(h):f.setAttribute(h,v===!0?"":v)}))})}function xLe(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow),function(){Object.keys(n.elements).forEach(function(i){var l=n.elements[i],f=n.attributes[i]||{},h=Object.keys(n.styles.hasOwnProperty(i)?n.styles[i]:r[i]),v=h.reduce(function(y,_){return y[_]="",y},{});!ab(l)||!H1(l)||(Object.assign(l.style,v),Object.keys(f).forEach(function(y){l.removeAttribute(y)}))})}}const DLe={name:"applyStyles",enabled:!0,phase:"write",fn:RLe,effect:xLe,requires:["computeStyles"]};function L1(e){return e.split("-")[0]}var m2=Math.max,eJ=Math.min,uL=Math.round;function zpe(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function vOe(){return!/^((?!chrome|android).)*safari/i.test(zpe())}function dL(e,n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);var i=e.getBoundingClientRect(),l=1,f=1;n&&ab(e)&&(l=e.offsetWidth>0&&uL(i.width)/e.offsetWidth||1,f=e.offsetHeight>0&&uL(i.height)/e.offsetHeight||1);var h=N2(e)?cv(e):window,v=h.visualViewport,y=!vOe()&&r,_=(i.left+(y&&v?v.offsetLeft:0))/l,A=(i.top+(y&&v?v.offsetTop:0))/f,R=i.width/l,k=i.height/f;return{width:R,height:k,top:A,right:_+R,bottom:A+k,left:_,x:_,y:A}}function Wge(e){var n=dL(e),r=e.offsetWidth,i=e.offsetHeight;return Math.abs(n.width-r)<=1&&(r=n.width),Math.abs(n.height-i)<=1&&(i=n.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:i}}function bOe(e,n){var r=n.getRootNode&&n.getRootNode();if(e.contains(n))return!0;if(r&&zge(r)){var i=n;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function dE(e){return cv(e).getComputedStyle(e)}function kLe(e){return["table","td","th"].indexOf(H1(e))>=0}function QA(e){return((N2(e)?e.ownerDocument:e.document)||window.document).documentElement}function YX(e){return H1(e)==="html"?e:e.assignedSlot||e.parentNode||(zge(e)?e.host:null)||QA(e)}function wye(e){return!ab(e)||dE(e).position==="fixed"?null:e.offsetParent}function MLe(e){var n=/firefox/i.test(zpe()),r=/Trident/i.test(zpe());if(r&&ab(e)){var i=dE(e);if(i.position==="fixed")return null}var l=YX(e);for(zge(l)&&(l=l.host);ab(l)&&["html","body"].indexOf(H1(l))<0;){var f=dE(l);if(f.transform!=="none"||f.perspective!=="none"||f.contain==="paint"||["transform","perspective"].indexOf(f.willChange)!==-1||n&&f.willChange==="filter"||n&&f.filter&&f.filter!=="none")return l;l=l.parentNode}return null}function q5(e){for(var n=cv(e),r=wye(e);r&&kLe(r)&&dE(r).position==="static";)r=wye(r);return r&&(H1(r)==="html"||H1(r)==="body"&&dE(r).position==="static")?n:r||MLe(e)||n}function Gge(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function $U(e,n,r){return m2(e,eJ(n,r))}function NLe(e,n,r){var i=$U(e,n,r);return i>r?r:i}function yOe(){return{top:0,right:0,bottom:0,left:0}}function SOe(e){return Object.assign({},yOe(),e)}function COe(e,n){return n.reduce(function(r,i){return r[i]=e,r},{})}var PLe=function(n,r){return n=typeof n=="function"?n(Object.assign({},r.rects,{placement:r.placement})):n,SOe(typeof n!="number"?n:COe(n,G5))};function LLe(e){var n,r=e.state,i=e.name,l=e.options,f=r.elements.arrow,h=r.modifiersData.popperOffsets,v=L1(r.placement),y=Gge(v),_=[ag,db].indexOf(v)>=0,A=_?"height":"width";if(!(!f||!h)){var R=PLe(l.padding,r),k=Wge(f),N=y==="y"?ig:ag,L=y==="y"?ub:db,B=r.rects.reference[A]+r.rects.reference[y]-h[y]-r.rects.popper[A],H=h[y]-r.rects.reference[y],q=q5(f),Y=q?y==="y"?q.clientHeight||0:q.clientWidth||0:0,K=B/2-H/2,se=R[N],ie=Y-k[A]-R[L],le=Y/2-k[A]/2+K,M=$U(se,le,ie),we=y;r.modifiersData[i]=(n={},n[we]=M,n.centerOffset=M-le,n)}}function BLe(e){var n=e.state,r=e.options,i=r.element,l=i===void 0?"[data-popper-arrow]":i;l!=null&&(typeof l=="string"&&(l=n.elements.popper.querySelector(l),!l)||bOe(n.elements.popper,l)&&(n.elements.arrow=l))}const VLe={name:"arrow",enabled:!0,phase:"main",fn:LLe,effect:BLe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function fL(e){return e.split("-")[1]}var HLe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function FLe(e,n){var r=e.x,i=e.y,l=n.devicePixelRatio||1;return{x:uL(r*l)/l||0,y:uL(i*l)/l||0}}function Aye(e){var n,r=e.popper,i=e.popperRect,l=e.placement,f=e.variation,h=e.offsets,v=e.position,y=e.gpuAcceleration,_=e.adaptive,A=e.roundOffsets,R=e.isFixed,k=h.x,N=k===void 0?0:k,L=h.y,B=L===void 0?0:L,H=typeof A=="function"?A({x:N,y:B}):{x:N,y:B};N=H.x,B=H.y;var q=h.hasOwnProperty("x"),Y=h.hasOwnProperty("y"),K=ag,se=ig,ie=window;if(_){var le=q5(r),M="clientHeight",we="clientWidth";if(le===cv(r)&&(le=QA(r),dE(le).position!=="static"&&v==="absolute"&&(M="scrollHeight",we="scrollWidth")),le=le,l===ig||(l===ag||l===db)&&f===h5){se=ub;var Ne=R&&le===ie&&ie.visualViewport?ie.visualViewport.height:le[M];B-=Ne-i.height,B*=y?1:-1}if(l===ag||(l===ig||l===ub)&&f===h5){K=db;var De=R&&le===ie&&ie.visualViewport?ie.visualViewport.width:le[we];N-=De-i.width,N*=y?1:-1}}var be=Object.assign({position:v},_&&HLe),me=A===!0?FLe({x:N,y:B},cv(r)):{x:N,y:B};if(N=me.x,B=me.y,y){var Ye;return Object.assign({},be,(Ye={},Ye[se]=Y?"0":"",Ye[K]=q?"0":"",Ye.transform=(ie.devicePixelRatio||1)<=1?"translate("+N+"px, "+B+"px)":"translate3d("+N+"px, "+B+"px, 0)",Ye))}return Object.assign({},be,(n={},n[se]=Y?B+"px":"",n[K]=q?N+"px":"",n.transform="",n))}function $Le(e){var n=e.state,r=e.options,i=r.gpuAcceleration,l=i===void 0?!0:i,f=r.adaptive,h=f===void 0?!0:f,v=r.roundOffsets,y=v===void 0?!0:v,_={placement:L1(n.placement),variation:fL(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:l,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,Aye(Object.assign({},_,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:h,roundOffsets:y})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,Aye(Object.assign({},_,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:y})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}const ULe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:$Le,data:{}};var dZ={passive:!0};function jLe(e){var n=e.state,r=e.instance,i=e.options,l=i.scroll,f=l===void 0?!0:l,h=i.resize,v=h===void 0?!0:h,y=cv(n.elements.popper),_=[].concat(n.scrollParents.reference,n.scrollParents.popper);return f&&_.forEach(function(A){A.addEventListener("scroll",r.update,dZ)}),v&&y.addEventListener("resize",r.update,dZ),function(){f&&_.forEach(function(A){A.removeEventListener("scroll",r.update,dZ)}),v&&y.removeEventListener("resize",r.update,dZ)}}const zLe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:jLe,data:{}};var WLe={left:"right",right:"left",bottom:"top",top:"bottom"};function rY(e){return e.replace(/left|right|bottom|top/g,function(n){return WLe[n]})}var GLe={start:"end",end:"start"};function Tye(e){return e.replace(/start|end/g,function(n){return GLe[n]})}function qge(e){var n=cv(e),r=n.pageXOffset,i=n.pageYOffset;return{scrollLeft:r,scrollTop:i}}function Kge(e){return dL(QA(e)).left+qge(e).scrollLeft}function qLe(e,n){var r=cv(e),i=QA(e),l=r.visualViewport,f=i.clientWidth,h=i.clientHeight,v=0,y=0;if(l){f=l.width,h=l.height;var _=vOe();(_||!_&&n==="fixed")&&(v=l.offsetLeft,y=l.offsetTop)}return{width:f,height:h,x:v+Kge(e),y}}function KLe(e){var n,r=QA(e),i=qge(e),l=(n=e.ownerDocument)==null?void 0:n.body,f=m2(r.scrollWidth,r.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),h=m2(r.scrollHeight,r.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0),v=-i.scrollLeft+Kge(e),y=-i.scrollTop;return dE(l||r).direction==="rtl"&&(v+=m2(r.clientWidth,l?l.clientWidth:0)-f),{width:f,height:h,x:v,y}}function Zge(e){var n=dE(e),r=n.overflow,i=n.overflowX,l=n.overflowY;return/auto|scroll|overlay|hidden/.test(r+l+i)}function EOe(e){return["html","body","#document"].indexOf(H1(e))>=0?e.ownerDocument.body:ab(e)&&Zge(e)?e:EOe(YX(e))}function UU(e,n){var r;n===void 0&&(n=[]);var i=EOe(e),l=i===((r=e.ownerDocument)==null?void 0:r.body),f=cv(i),h=l?[f].concat(f.visualViewport||[],Zge(i)?i:[]):i,v=n.concat(h);return l?v:v.concat(UU(YX(h)))}function Wpe(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ZLe(e,n){var r=dL(e,!1,n==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function Oye(e,n,r){return n===mOe?Wpe(qLe(e,r)):N2(n)?ZLe(n,r):Wpe(KLe(QA(e)))}function YLe(e){var n=UU(YX(e)),r=["absolute","fixed"].indexOf(dE(e).position)>=0,i=r&&ab(e)?q5(e):e;return N2(i)?n.filter(function(l){return N2(l)&&bOe(l,i)&&H1(l)!=="body"}):[]}function JLe(e,n,r,i){var l=n==="clippingParents"?YLe(e):[].concat(n),f=[].concat(l,[r]),h=f[0],v=f.reduce(function(y,_){var A=Oye(e,_,i);return y.top=m2(A.top,y.top),y.right=eJ(A.right,y.right),y.bottom=eJ(A.bottom,y.bottom),y.left=m2(A.left,y.left),y},Oye(e,h,i));return v.width=v.right-v.left,v.height=v.bottom-v.top,v.x=v.left,v.y=v.top,v}function _Oe(e){var n=e.reference,r=e.element,i=e.placement,l=i?L1(i):null,f=i?fL(i):null,h=n.x+n.width/2-r.width/2,v=n.y+n.height/2-r.height/2,y;switch(l){case ig:y={x:h,y:n.y-r.height};break;case ub:y={x:h,y:n.y+n.height};break;case db:y={x:n.x+n.width,y:v};break;case ag:y={x:n.x-r.width,y:v};break;default:y={x:n.x,y:n.y}}var _=l?Gge(l):null;if(_!=null){var A=_==="y"?"height":"width";switch(f){case lL:y[_]=y[_]-(n[A]/2-r[A]/2);break;case h5:y[_]=y[_]+(n[A]/2-r[A]/2);break}}return y}function m5(e,n){n===void 0&&(n={});var r=n,i=r.placement,l=i===void 0?e.placement:i,f=r.strategy,h=f===void 0?e.strategy:f,v=r.boundary,y=v===void 0?vLe:v,_=r.rootBoundary,A=_===void 0?mOe:_,R=r.elementContext,k=R===void 0?oU:R,N=r.altBoundary,L=N===void 0?!1:N,B=r.padding,H=B===void 0?0:B,q=SOe(typeof H!="number"?H:COe(H,G5)),Y=k===oU?bLe:oU,K=e.rects.popper,se=e.elements[L?Y:k],ie=JLe(N2(se)?se:se.contextElement||QA(e.elements.popper),y,A,h),le=dL(e.elements.reference),M=_Oe({reference:le,element:K,placement:l}),we=Wpe(Object.assign({},K,M)),Ne=k===oU?we:le,De={top:ie.top-Ne.top+q.top,bottom:Ne.bottom-ie.bottom+q.bottom,left:ie.left-Ne.left+q.left,right:Ne.right-ie.right+q.right},be=e.modifiersData.offset;if(k===oU&&be){var me=be[l];Object.keys(De).forEach(function(Ye){var Ke=[db,ub].indexOf(Ye)>=0?1:-1,Ze=[ig,ub].indexOf(Ye)>=0?"y":"x";De[Ye]+=me[Ze]*Ke})}return De}function XLe(e,n){n===void 0&&(n={});var r=n,i=r.placement,l=r.boundary,f=r.rootBoundary,h=r.padding,v=r.flipVariations,y=r.allowedAutoPlacements,_=y===void 0?gOe:y,A=fL(i),R=A?v?_ye:_ye.filter(function(L){return fL(L)===A}):G5,k=R.filter(function(L){return _.indexOf(L)>=0});k.length===0&&(k=R);var N=k.reduce(function(L,B){return L[B]=m5(e,{placement:B,boundary:l,rootBoundary:f,padding:h})[L1(B)],L},{});return Object.keys(N).sort(function(L,B){return N[L]-N[B]})}function QLe(e){if(L1(e)===jge)return[];var n=rY(e);return[Tye(e),n,Tye(n)]}function e4e(e){var n=e.state,r=e.options,i=e.name;if(!n.modifiersData[i]._skip){for(var l=r.mainAxis,f=l===void 0?!0:l,h=r.altAxis,v=h===void 0?!0:h,y=r.fallbackPlacements,_=r.padding,A=r.boundary,R=r.rootBoundary,k=r.altBoundary,N=r.flipVariations,L=N===void 0?!0:N,B=r.allowedAutoPlacements,H=n.options.placement,q=L1(H),Y=q===H,K=y||(Y||!L?[rY(H)]:QLe(H)),se=[H].concat(K).reduce(function(En,Zn){return En.concat(L1(Zn)===jge?XLe(n,{placement:Zn,boundary:A,rootBoundary:R,padding:_,flipVariations:L,allowedAutoPlacements:B}):Zn)},[]),ie=n.rects.reference,le=n.rects.popper,M=new Map,we=!0,Ne=se[0],De=0;De<se.length;De++){var be=se[De],me=L1(be),Ye=fL(be)===lL,Ke=[ig,ub].indexOf(me)>=0,Ze=Ke?"width":"height",z=m5(n,{placement:be,boundary:A,rootBoundary:R,altBoundary:k,padding:_}),$t=Ke?Ye?db:ag:Ye?ub:ig;ie[Ze]>le[Ze]&&($t=rY($t));var Be=rY($t),at=[];if(f&&at.push(z[me]<=0),v&&at.push(z[$t]<=0,z[Be]<=0),at.every(function(En){return En})){Ne=be,we=!1;break}M.set(be,at)}if(we)for(var lt=L?3:1,$e=function(Zn){var Et=se.find(function(Jt){var ce=M.get(Jt);if(ce)return ce.slice(0,Zn).every(function(Hs){return Hs})});if(Et)return Ne=Et,"break"},qt=lt;qt>0;qt--){var io=$e(qt);if(io==="break")break}n.placement!==Ne&&(n.modifiersData[i]._skip=!0,n.placement=Ne,n.reset=!0)}}const t4e={name:"flip",enabled:!0,phase:"main",fn:e4e,requiresIfExists:["offset"],data:{_skip:!1}};function Iye(e,n,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-n.height-r.y,right:e.right-n.width+r.x,bottom:e.bottom-n.height+r.y,left:e.left-n.width-r.x}}function Rye(e){return[ig,db,ub,ag].some(function(n){return e[n]>=0})}function n4e(e){var n=e.state,r=e.name,i=n.rects.reference,l=n.rects.popper,f=n.modifiersData.preventOverflow,h=m5(n,{elementContext:"reference"}),v=m5(n,{altBoundary:!0}),y=Iye(h,i),_=Iye(v,l,f),A=Rye(y),R=Rye(_);n.modifiersData[r]={referenceClippingOffsets:y,popperEscapeOffsets:_,isReferenceHidden:A,hasPopperEscaped:R},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":A,"data-popper-escaped":R})}const o4e={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:n4e};function s4e(e,n,r){var i=L1(e),l=[ag,ig].indexOf(i)>=0?-1:1,f=typeof r=="function"?r(Object.assign({},n,{placement:e})):r,h=f[0],v=f[1];return h=h||0,v=(v||0)*l,[ag,db].indexOf(i)>=0?{x:v,y:h}:{x:h,y:v}}function r4e(e){var n=e.state,r=e.options,i=e.name,l=r.offset,f=l===void 0?[0,0]:l,h=gOe.reduce(function(A,R){return A[R]=s4e(R,n.rects,f),A},{}),v=h[n.placement],y=v.x,_=v.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=y,n.modifiersData.popperOffsets.y+=_),n.modifiersData[i]=h}const i4e={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:r4e};function a4e(e){var n=e.state,r=e.name;n.modifiersData[r]=_Oe({reference:n.rects.reference,element:n.rects.popper,placement:n.placement})}const c4e={name:"popperOffsets",enabled:!0,phase:"read",fn:a4e,data:{}};function l4e(e){return e==="x"?"y":"x"}function u4e(e){var n=e.state,r=e.options,i=e.name,l=r.mainAxis,f=l===void 0?!0:l,h=r.altAxis,v=h===void 0?!1:h,y=r.boundary,_=r.rootBoundary,A=r.altBoundary,R=r.padding,k=r.tether,N=k===void 0?!0:k,L=r.tetherOffset,B=L===void 0?0:L,H=m5(n,{boundary:y,rootBoundary:_,padding:R,altBoundary:A}),q=L1(n.placement),Y=fL(n.placement),K=!Y,se=Gge(q),ie=l4e(se),le=n.modifiersData.popperOffsets,M=n.rects.reference,we=n.rects.popper,Ne=typeof B=="function"?B(Object.assign({},n.rects,{placement:n.placement})):B,De=typeof Ne=="number"?{mainAxis:Ne,altAxis:Ne}:Object.assign({mainAxis:0,altAxis:0},Ne),be=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,me={x:0,y:0};if(le){if(f){var Ye,Ke=se==="y"?ig:ag,Ze=se==="y"?ub:db,z=se==="y"?"height":"width",$t=le[se],Be=$t+H[Ke],at=$t-H[Ze],lt=N?-we[z]/2:0,$e=Y===lL?M[z]:we[z],qt=Y===lL?-we[z]:-M[z],io=n.elements.arrow,En=N&&io?Wge(io):{width:0,height:0},Zn=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:yOe(),Et=Zn[Ke],Jt=Zn[Ze],ce=$U(0,M[z],En[z]),Hs=K?M[z]/2-lt-ce-Et-De.mainAxis:$e-ce-Et-De.mainAxis,Fo=K?-M[z]/2+lt+ce+Jt+De.mainAxis:qt+ce+Jt+De.mainAxis,yt=n.elements.arrow&&q5(n.elements.arrow),Xt=yt?se==="y"?yt.clientTop||0:yt.clientLeft||0:0,Wn=(Ye=be==null?void 0:be[se])!=null?Ye:0,bt=$t+Hs-Wn-Xt,Kt=$t+Fo-Wn,Ut=$U(N?eJ(Be,bt):Be,$t,N?m2(at,Kt):at);le[se]=Ut,me[se]=Ut-$t}if(v){var Ue,dt=se==="x"?ig:ag,Ot=se==="x"?ub:db,Oe=le[ie],pt=ie==="y"?"height":"width",Bt=Oe+H[dt],tn=Oe-H[Ot],ht=[ig,ag].indexOf(q)!==-1,gt=(Ue=be==null?void 0:be[ie])!=null?Ue:0,No=ht?Bt:Oe-M[pt]-we[pt]-gt+De.altAxis,Ko=ht?Oe+M[pt]+we[pt]-gt-De.altAxis:tn,Wo=N&&ht?NLe(No,Oe,Ko):$U(N?No:Bt,Oe,N?Ko:tn);le[ie]=Wo,me[ie]=Wo-Oe}n.modifiersData[i]=me}}const d4e={name:"preventOverflow",enabled:!0,phase:"main",fn:u4e,requiresIfExists:["offset"]};function f4e(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function p4e(e){return e===cv(e)||!ab(e)?qge(e):f4e(e)}function h4e(e){var n=e.getBoundingClientRect(),r=uL(n.width)/e.offsetWidth||1,i=uL(n.height)/e.offsetHeight||1;return r!==1||i!==1}function m4e(e,n,r){r===void 0&&(r=!1);var i=ab(n),l=ab(n)&&h4e(n),f=QA(n),h=dL(e,l,r),v={scrollLeft:0,scrollTop:0},y={x:0,y:0};return(i||!i&&!r)&&((H1(n)!=="body"||Zge(f))&&(v=p4e(n)),ab(n)?(y=dL(n,!0),y.x+=n.clientLeft,y.y+=n.clientTop):f&&(y.x=Kge(f))),{x:h.left+v.scrollLeft-y.x,y:h.top+v.scrollTop-y.y,width:h.width,height:h.height}}function g4e(e){var n=new Map,r=new Set,i=[];e.forEach(function(f){n.set(f.name,f)});function l(f){r.add(f.name);var h=[].concat(f.requires||[],f.requiresIfExists||[]);h.forEach(function(v){if(!r.has(v)){var y=n.get(v);y&&l(y)}}),i.push(f)}return e.forEach(function(f){r.has(f.name)||l(f)}),i}function v4e(e){var n=g4e(e);return ILe.reduce(function(r,i){return r.concat(n.filter(function(l){return l.phase===i}))},[])}function b4e(e){var n;return function(){return n||(n=new Promise(function(r){Promise.resolve().then(function(){n=void 0,r(e())})})),n}}function y4e(e){var n=e.reduce(function(r,i){var l=r[i.name];return r[i.name]=l?Object.assign({},l,i,{options:Object.assign({},l.options,i.options),data:Object.assign({},l.data,i.data)}):i,r},{});return Object.keys(n).map(function(r){return n[r]})}var xye={placement:"bottom",modifiers:[],strategy:"absolute"};function Dye(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return!n.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function S4e(e){e===void 0&&(e={});var n=e,r=n.defaultModifiers,i=r===void 0?[]:r,l=n.defaultOptions,f=l===void 0?xye:l;return function(v,y,_){_===void 0&&(_=f);var A={placement:"bottom",orderedModifiers:[],options:Object.assign({},xye,f),modifiersData:{},elements:{reference:v,popper:y},attributes:{},styles:{}},R=[],k=!1,N={state:A,setOptions:function(q){var Y=typeof q=="function"?q(A.options):q;B(),A.options=Object.assign({},f,A.options,Y),A.scrollParents={reference:N2(v)?UU(v):v.contextElement?UU(v.contextElement):[],popper:UU(y)};var K=v4e(y4e([].concat(i,A.options.modifiers)));return A.orderedModifiers=K.filter(function(se){return se.enabled}),L(),N.update()},forceUpdate:function(){if(!k){var q=A.elements,Y=q.reference,K=q.popper;if(Dye(Y,K)){A.rects={reference:m4e(Y,q5(K),A.options.strategy==="fixed"),popper:Wge(K)},A.reset=!1,A.placement=A.options.placement,A.orderedModifiers.forEach(function(De){return A.modifiersData[De.name]=Object.assign({},De.data)});for(var se=0;se<A.orderedModifiers.length;se++){if(A.reset===!0){A.reset=!1,se=-1;continue}var ie=A.orderedModifiers[se],le=ie.fn,M=ie.options,we=M===void 0?{}:M,Ne=ie.name;typeof le=="function"&&(A=le({state:A,options:we,name:Ne,instance:N})||A)}}}},update:b4e(function(){return new Promise(function(H){N.forceUpdate(),H(A)})}),destroy:function(){B(),k=!0}};if(!Dye(v,y))return N;N.setOptions(_).then(function(H){!k&&_.onFirstUpdate&&_.onFirstUpdate(H)});function L(){A.orderedModifiers.forEach(function(H){var q=H.name,Y=H.options,K=Y===void 0?{}:Y,se=H.effect;if(typeof se=="function"){var ie=se({state:A,name:q,instance:N,options:K}),le=function(){};R.push(ie||le)}})}function B(){R.forEach(function(H){return H()}),R=[]}return N}}var C4e=[zLe,c4e,ULe,DLe,i4e,t4e,d4e,VLe,o4e],Yge=S4e({defaultModifiers:C4e}),uA=function(){return uA=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},uA.apply(this,arguments)},fZ=function(e,n,r){if(r||arguments.length===2)for(var i=0,l=n.length,f;i<l;i++)(f||!(i in n))&&(f||(f=Array.prototype.slice.call(n,0,i)),f[i]=n[i]);return e.concat(f||Array.prototype.slice.call(n))},dA={placement:"bottom",triggerType:"click",offsetSkidding:0,offsetDistance:10,delay:300,ignoreClickOutsideClass:!1,onShow:function(){},onHide:function(){},onToggle:function(){}},E4e={id:null,override:!0},wOe=(function(){function e(n,r,i,l){n===void 0&&(n=null),r===void 0&&(r=null),i===void 0&&(i=dA),l===void 0&&(l=E4e),this._instanceId=l.id?l.id:n.id,this._targetEl=n,this._triggerEl=r,this._options=uA(uA({},dA),i),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),ri.addInstance("Dropdown",this,this._instanceId,l.override)}return e.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._popperInstance=this._createPopperInstance(),this._setupEventListeners(),this._initialized=!0)},e.prototype.destroy=function(){var n=this,r=this._getTriggerEvents();this._options.triggerType==="click"&&r.showEvents.forEach(function(i){n._triggerEl.removeEventListener(i,n._clickHandler)}),this._options.triggerType==="hover"&&(r.showEvents.forEach(function(i){n._triggerEl.removeEventListener(i,n._hoverShowTriggerElHandler),n._targetEl.removeEventListener(i,n._hoverShowTargetElHandler)}),r.hideEvents.forEach(function(i){n._triggerEl.removeEventListener(i,n._hoverHideHandler),n._targetEl.removeEventListener(i,n._hoverHideHandler)})),this._popperInstance.destroy(),this._initialized=!1},e.prototype.removeInstance=function(){ri.removeInstance("Dropdown",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype._setupEventListeners=function(){var n=this,r=this._getTriggerEvents();this._clickHandler=function(){n.toggle()},this._options.triggerType==="click"&&r.showEvents.forEach(function(i){n._triggerEl.addEventListener(i,n._clickHandler)}),this._hoverShowTriggerElHandler=function(i){i.type==="click"?n.toggle():setTimeout(function(){n.show()},n._options.delay)},this._hoverShowTargetElHandler=function(){n.show()},this._hoverHideHandler=function(){setTimeout(function(){n._targetEl.matches(":hover")||n.hide()},n._options.delay)},this._options.triggerType==="hover"&&(r.showEvents.forEach(function(i){n._triggerEl.addEventListener(i,n._hoverShowTriggerElHandler),n._targetEl.addEventListener(i,n._hoverShowTargetElHandler)}),r.hideEvents.forEach(function(i){n._triggerEl.addEventListener(i,n._hoverHideHandler),n._targetEl.addEventListener(i,n._hoverHideHandler)}))},e.prototype._createPopperInstance=function(){return Yge(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[this._options.offsetSkidding,this._options.offsetDistance]}}]})},e.prototype._setupClickOutsideListener=function(){var n=this;this._clickOutsideEventListener=function(r){n._handleClickOutside(r,n._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},e.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},e.prototype._handleClickOutside=function(n,r){var i=n.target,l=this._options.ignoreClickOutsideClass,f=!1;if(l){var h=document.querySelectorAll(".".concat(l));h.forEach(function(v){if(v.contains(i)){f=!0;return}})}i!==r&&!r.contains(i)&&!this._triggerEl.contains(i)&&!f&&this.isVisible()&&this.hide()},e.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","click"],hideEvents:["mouseleave"]};case"click":return{showEvents:["click"],hideEvents:[]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["click"],hideEvents:[]}}},e.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},e.prototype.isVisible=function(){return this._visible},e.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._targetEl.classList.add("block"),this._targetEl.removeAttribute("aria-hidden"),this._popperInstance.setOptions(function(n){return uA(uA({},n),{modifiers:fZ(fZ([],n.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},e.prototype.hide=function(){this._targetEl.classList.remove("block"),this._targetEl.classList.add("hidden"),this._targetEl.setAttribute("aria-hidden","true"),this._popperInstance.setOptions(function(n){return uA(uA({},n),{modifiers:fZ(fZ([],n.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._visible=!1,this._removeClickOutsideListener(),this._options.onHide(this)},e.prototype.updateOnShow=function(n){this._options.onShow=n},e.prototype.updateOnHide=function(n){this._options.onHide=n},e.prototype.updateOnToggle=function(n){this._options.onToggle=n},e})();function Jge(){document.querySelectorAll("[data-dropdown-toggle]").forEach(function(e){var n=e.getAttribute("data-dropdown-toggle"),r=document.getElementById(n);if(r){var i=e.getAttribute("data-dropdown-placement"),l=e.getAttribute("data-dropdown-offset-skidding"),f=e.getAttribute("data-dropdown-offset-distance"),h=e.getAttribute("data-dropdown-trigger"),v=e.getAttribute("data-dropdown-delay"),y=e.getAttribute("data-dropdown-ignore-click-outside-class");new wOe(r,e,{placement:i||dA.placement,triggerType:h||dA.triggerType,offsetSkidding:l?parseInt(l):dA.offsetSkidding,offsetDistance:f?parseInt(f):dA.offsetDistance,delay:v?parseInt(v):dA.delay,ignoreClickOutsideClass:y||dA.ignoreClickOutsideClass})}else console.error('The dropdown element with id "'.concat(n,'" does not exist. Please check the data-dropdown-toggle attribute.'))})}typeof window<"u"&&(window.Dropdown=wOe,window.initDropdowns=Jge);var tJ=function(){return tJ=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},tJ.apply(this,arguments)},nJ={placement:"center",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-40",backdrop:"dynamic",closable:!0,onHide:function(){},onShow:function(){},onToggle:function(){}},_4e={id:null,override:!0},AOe=(function(){function e(n,r,i){n===void 0&&(n=null),r===void 0&&(r=nJ),i===void 0&&(i=_4e),this._eventListenerInstances=[],this._instanceId=i.id?i.id:n.id,this._targetEl=n,this._options=tJ(tJ({},nJ),r),this._isHidden=!0,this._backdropEl=null,this._initialized=!1,this.init(),ri.addInstance("Modal",this,this._instanceId,i.override)}return e.prototype.init=function(){var n=this;this._targetEl&&!this._initialized&&(this._getPlacementClasses().map(function(r){n._targetEl.classList.add(r)}),this._initialized=!0)},e.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),this._initialized=!1)},e.prototype.removeInstance=function(){ri.removeInstance("Modal",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype._createBackdrop=function(){var n;if(this._isHidden){var r=document.createElement("div");(n=r.classList).add.apply(n,this._options.backdropClasses.split(" ")),document.querySelector("body").append(r),this._backdropEl=r}},e.prototype._destroyBackdropEl=function(){!this._isHidden&&this._backdropEl&&(this._backdropEl.remove(),this._backdropEl=null)},e.prototype._setupModalCloseEventListeners=function(){var n=this;this._options.backdrop==="dynamic"&&(this._clickOutsideEventListener=function(r){n._handleOutsideClick(r.target)},this._targetEl.addEventListener("click",this._clickOutsideEventListener,!0)),this._keydownEventListener=function(r){r.key==="Escape"&&n.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},e.prototype._removeModalCloseEventListeners=function(){this._options.backdrop==="dynamic"&&this._targetEl.removeEventListener("click",this._clickOutsideEventListener,!0),document.body.removeEventListener("keydown",this._keydownEventListener,!0)},e.prototype._handleOutsideClick=function(n){(n===this._targetEl||n===this._backdropEl&&this.isVisible())&&this.hide()},e.prototype._getPlacementClasses=function(){switch(this._options.placement){case"top-left":return["justify-start","items-start"];case"top-center":return["justify-center","items-start"];case"top-right":return["justify-end","items-start"];case"center-left":return["justify-start","items-center"];case"center":return["justify-center","items-center"];case"center-right":return["justify-end","items-center"];case"bottom-left":return["justify-start","items-end"];case"bottom-center":return["justify-center","items-end"];case"bottom-right":return["justify-end","items-end"];default:return["justify-center","items-center"]}},e.prototype.toggle=function(){this._isHidden?this.show():this.hide(),this._options.onToggle(this)},e.prototype.show=function(){this.isHidden&&(this._targetEl.classList.add("flex"),this._targetEl.classList.remove("hidden"),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._createBackdrop(),this._isHidden=!1,this._options.closable&&this._setupModalCloseEventListeners(),document.body.classList.add("overflow-hidden"),this._options.onShow(this))},e.prototype.hide=function(){this.isVisible&&(this._targetEl.classList.add("hidden"),this._targetEl.classList.remove("flex"),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._destroyBackdropEl(),this._isHidden=!0,document.body.classList.remove("overflow-hidden"),this._options.closable&&this._removeModalCloseEventListeners(),this._options.onHide(this))},e.prototype.isVisible=function(){return!this._isHidden},e.prototype.isHidden=function(){return this._isHidden},e.prototype.addEventListenerInstance=function(n,r,i){this._eventListenerInstances.push({element:n,type:r,handler:i})},e.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(n){n.element.removeEventListener(n.type,n.handler)}),this._eventListenerInstances=[]},e.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},e.prototype.updateOnShow=function(n){this._options.onShow=n},e.prototype.updateOnHide=function(n){this._options.onHide=n},e.prototype.updateOnToggle=function(n){this._options.onToggle=n},e})();function Xge(){document.querySelectorAll("[data-modal-target]").forEach(function(e){var n=e.getAttribute("data-modal-target"),r=document.getElementById(n);if(r){var i=r.getAttribute("data-modal-placement"),l=r.getAttribute("data-modal-backdrop");new AOe(r,{placement:i||nJ.placement,backdrop:l||nJ.backdrop})}else console.error("Modal with id ".concat(n," does not exist. Are you sure that the data-modal-target attribute points to the correct modal id?."))}),document.querySelectorAll("[data-modal-toggle]").forEach(function(e){var n=e.getAttribute("data-modal-toggle"),r=document.getElementById(n);if(r){var i=ri.getInstance("Modal",n);if(i){var l=function(){i.toggle()};e.addEventListener("click",l),i.addEventListenerInstance(e,"click",l)}else console.error("Modal with id ".concat(n," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(n," does not exist. Are you sure that the data-modal-toggle attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-show]").forEach(function(e){var n=e.getAttribute("data-modal-show"),r=document.getElementById(n);if(r){var i=ri.getInstance("Modal",n);if(i){var l=function(){i.show()};e.addEventListener("click",l),i.addEventListenerInstance(e,"click",l)}else console.error("Modal with id ".concat(n," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(n," does not exist. Are you sure that the data-modal-show attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-hide]").forEach(function(e){var n=e.getAttribute("data-modal-hide"),r=document.getElementById(n);if(r){var i=ri.getInstance("Modal",n);if(i){var l=function(){i.hide()};e.addEventListener("click",l),i.addEventListenerInstance(e,"click",l)}else console.error("Modal with id ".concat(n," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(n," does not exist. Are you sure that the data-modal-hide attribute points to the correct modal id?"))})}typeof window<"u"&&(window.Modal=AOe,window.initModals=Xge);var oJ=function(){return oJ=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},oJ.apply(this,arguments)},YR={placement:"left",bodyScrolling:!1,backdrop:!0,edge:!1,edgeOffset:"bottom-[60px]",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-30",onShow:function(){},onHide:function(){},onToggle:function(){}},w4e={id:null,override:!0},TOe=(function(){function e(n,r,i){n===void 0&&(n=null),r===void 0&&(r=YR),i===void 0&&(i=w4e),this._eventListenerInstances=[],this._instanceId=i.id?i.id:n.id,this._targetEl=n,this._options=oJ(oJ({},YR),r),this._visible=!1,this._initialized=!1,this.init(),ri.addInstance("Drawer",this,this._instanceId,i.override)}return e.prototype.init=function(){var n=this;this._targetEl&&!this._initialized&&(this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.classList.add("transition-transform"),this._getPlacementClasses(this._options.placement).base.map(function(r){n._targetEl.classList.add(r)}),this._handleEscapeKey=function(r){r.key==="Escape"&&n.isVisible()&&n.hide()},document.addEventListener("keydown",this._handleEscapeKey),this._initialized=!0)},e.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),document.removeEventListener("keydown",this._handleEscapeKey),this._initialized=!1)},e.prototype.removeInstance=function(){ri.removeInstance("Drawer",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype.hide=function(){var n=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(r){n._targetEl.classList.remove(r)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(r){n._targetEl.classList.add(r)})):(this._getPlacementClasses(this._options.placement).active.map(function(r){n._targetEl.classList.remove(r)}),this._getPlacementClasses(this._options.placement).inactive.map(function(r){n._targetEl.classList.add(r)})),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._options.bodyScrolling||document.body.classList.remove("overflow-hidden"),this._options.backdrop&&this._destroyBackdropEl(),this._visible=!1,this._options.onHide(this)},e.prototype.show=function(){var n=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(r){n._targetEl.classList.add(r)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(r){n._targetEl.classList.remove(r)})):(this._getPlacementClasses(this._options.placement).active.map(function(r){n._targetEl.classList.add(r)}),this._getPlacementClasses(this._options.placement).inactive.map(function(r){n._targetEl.classList.remove(r)})),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._options.bodyScrolling||document.body.classList.add("overflow-hidden"),this._options.backdrop&&this._createBackdrop(),this._visible=!0,this._options.onShow(this)},e.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},e.prototype._createBackdrop=function(){var n,r=this;if(!this._visible){var i=document.createElement("div");i.setAttribute("drawer-backdrop",""),(n=i.classList).add.apply(n,this._options.backdropClasses.split(" ")),document.querySelector("body").append(i),i.addEventListener("click",function(){r.hide()})}},e.prototype._destroyBackdropEl=function(){this._visible&&document.querySelector("[drawer-backdrop]")!==null&&document.querySelector("[drawer-backdrop]").remove()},e.prototype._getPlacementClasses=function(n){switch(n){case"top":return{base:["top-0","left-0","right-0"],active:["transform-none"],inactive:["-translate-y-full"]};case"right":return{base:["right-0","top-0"],active:["transform-none"],inactive:["translate-x-full"]};case"bottom":return{base:["bottom-0","left-0","right-0"],active:["transform-none"],inactive:["translate-y-full"]};case"left":return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]};case"bottom-edge":return{base:["left-0","top-0"],active:["transform-none"],inactive:["translate-y-full",this._options.edgeOffset]};default:return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]}}},e.prototype.isHidden=function(){return!this._visible},e.prototype.isVisible=function(){return this._visible},e.prototype.addEventListenerInstance=function(n,r,i){this._eventListenerInstances.push({element:n,type:r,handler:i})},e.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(n){n.element.removeEventListener(n.type,n.handler)}),this._eventListenerInstances=[]},e.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},e.prototype.updateOnShow=function(n){this._options.onShow=n},e.prototype.updateOnHide=function(n){this._options.onHide=n},e.prototype.updateOnToggle=function(n){this._options.onToggle=n},e})();function Qge(){document.querySelectorAll("[data-drawer-target]").forEach(function(e){var n=e.getAttribute("data-drawer-target"),r=document.getElementById(n);if(r){var i=e.getAttribute("data-drawer-placement"),l=e.getAttribute("data-drawer-body-scrolling"),f=e.getAttribute("data-drawer-backdrop"),h=e.getAttribute("data-drawer-edge"),v=e.getAttribute("data-drawer-edge-offset");new TOe(r,{placement:i||YR.placement,bodyScrolling:l?l==="true":YR.bodyScrolling,backdrop:f?f==="true":YR.backdrop,edge:h?h==="true":YR.edge,edgeOffset:v||YR.edgeOffset})}else console.error("Drawer with id ".concat(n," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-toggle]").forEach(function(e){var n=e.getAttribute("data-drawer-toggle"),r=document.getElementById(n);if(r){var i=ri.getInstance("Drawer",n);if(i){var l=function(){i.toggle()};e.addEventListener("click",l),i.addEventListenerInstance(e,"click",l)}else console.error("Drawer with id ".concat(n," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(n," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-dismiss], [data-drawer-hide]").forEach(function(e){var n=e.getAttribute("data-drawer-dismiss")?e.getAttribute("data-drawer-dismiss"):e.getAttribute("data-drawer-hide"),r=document.getElementById(n);if(r){var i=ri.getInstance("Drawer",n);if(i){var l=function(){i.hide()};e.addEventListener("click",l),i.addEventListenerInstance(e,"click",l)}else console.error("Drawer with id ".concat(n," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(n," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id"))}),document.querySelectorAll("[data-drawer-show]").forEach(function(e){var n=e.getAttribute("data-drawer-show"),r=document.getElementById(n);if(r){var i=ri.getInstance("Drawer",n);if(i){var l=function(){i.show()};e.addEventListener("click",l),i.addEventListenerInstance(e,"click",l)}else console.error("Drawer with id ".concat(n," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(n," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))})}typeof window<"u"&&(window.Drawer=TOe,window.initDrawers=Qge);var sJ=function(){return sJ=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},sJ.apply(this,arguments)},rJ={defaultTabId:null,activeClasses:"text-blue-600 hover:text-blue-600 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500",inactiveClasses:"dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300",onShow:function(){}},A4e={id:null,override:!0},OOe=(function(){function e(n,r,i,l){n===void 0&&(n=null),r===void 0&&(r=[]),i===void 0&&(i=rJ),l===void 0&&(l=A4e),this._instanceId=l.id?l.id:n.id,this._tabsEl=n,this._items=r,this._activeTab=i?this.getTab(i.defaultTabId):null,this._options=sJ(sJ({},rJ),i),this._initialized=!1,this.init(),ri.addInstance("Tabs",this,this._instanceId,l.override)}return e.prototype.init=function(){var n=this;this._items.length&&!this._initialized&&(this._activeTab||this.setActiveTab(this._items[0]),this.show(this._activeTab.id,!0),this._items.map(function(r){r.triggerEl.addEventListener("click",function(i){i.preventDefault(),n.show(r.id)})}))},e.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},e.prototype.removeInstance=function(){this.destroy(),ri.removeInstance("Tabs",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype.getActiveTab=function(){return this._activeTab},e.prototype.setActiveTab=function(n){this._activeTab=n},e.prototype.getTab=function(n){return this._items.filter(function(r){return r.id===n})[0]},e.prototype.show=function(n,r){var i,l,f=this;r===void 0&&(r=!1);var h=this.getTab(n);h===this._activeTab&&!r||(this._items.map(function(v){var y,_;v!==h&&((y=v.triggerEl.classList).remove.apply(y,f._options.activeClasses.split(" ")),(_=v.triggerEl.classList).add.apply(_,f._options.inactiveClasses.split(" ")),v.targetEl.classList.add("hidden"),v.triggerEl.setAttribute("aria-selected","false"))}),(i=h.triggerEl.classList).add.apply(i,this._options.activeClasses.split(" ")),(l=h.triggerEl.classList).remove.apply(l,this._options.inactiveClasses.split(" ")),h.triggerEl.setAttribute("aria-selected","true"),h.targetEl.classList.remove("hidden"),this.setActiveTab(h),this._options.onShow(this,h))},e.prototype.updateOnShow=function(n){this._options.onShow=n},e})();function eve(){document.querySelectorAll("[data-tabs-toggle]").forEach(function(e){var n=[],r=e.getAttribute("data-tabs-active-classes"),i=e.getAttribute("data-tabs-inactive-classes"),l=null;e.querySelectorAll('[role="tab"]').forEach(function(f){var h=f.getAttribute("aria-selected")==="true",v={id:f.getAttribute("data-tabs-target"),triggerEl:f,targetEl:document.querySelector(f.getAttribute("data-tabs-target"))};n.push(v),h&&(l=v.id)}),new OOe(e,n,{defaultTabId:l,activeClasses:r||rJ.activeClasses,inactiveClasses:i||rJ.inactiveClasses})})}typeof window<"u"&&(window.Tabs=OOe,window.initTabs=eve);var fA=function(){return fA=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},fA.apply(this,arguments)},pZ=function(e,n,r){if(r||arguments.length===2)for(var i=0,l=n.length,f;i<l;i++)(f||!(i in n))&&(f||(f=Array.prototype.slice.call(n,0,i)),f[i]=n[i]);return e.concat(f||Array.prototype.slice.call(n))},iJ={placement:"top",triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},T4e={id:null,override:!0},IOe=(function(){function e(n,r,i,l){n===void 0&&(n=null),r===void 0&&(r=null),i===void 0&&(i=iJ),l===void 0&&(l=T4e),this._instanceId=l.id?l.id:n.id,this._targetEl=n,this._triggerEl=r,this._options=fA(fA({},iJ),i),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),ri.addInstance("Tooltip",this,this._instanceId,l.override)}return e.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},e.prototype.destroy=function(){var n=this;if(this._initialized){var r=this._getTriggerEvents();r.showEvents.forEach(function(i){n._triggerEl.removeEventListener(i,n._showHandler)}),r.hideEvents.forEach(function(i){n._triggerEl.removeEventListener(i,n._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},e.prototype.removeInstance=function(){ri.removeInstance("Tooltip",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype._setupEventListeners=function(){var n=this,r=this._getTriggerEvents();this._showHandler=function(){n.show()},this._hideHandler=function(){n.hide()},r.showEvents.forEach(function(i){n._triggerEl.addEventListener(i,n._showHandler)}),r.hideEvents.forEach(function(i){n._triggerEl.addEventListener(i,n._hideHandler)})},e.prototype._createPopperInstance=function(){return Yge(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]})},e.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},e.prototype._setupKeydownListener=function(){var n=this;this._keydownEventListener=function(r){r.key==="Escape"&&n.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},e.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},e.prototype._setupClickOutsideListener=function(){var n=this;this._clickOutsideEventListener=function(r){n._handleClickOutside(r,n._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},e.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},e.prototype._handleClickOutside=function(n,r){var i=n.target;i!==r&&!r.contains(i)&&!this._triggerEl.contains(i)&&this.isVisible()&&this.hide()},e.prototype.isVisible=function(){return this._visible},e.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},e.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(n){return fA(fA({},n),{modifiers:pZ(pZ([],n.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},e.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(n){return fA(fA({},n),{modifiers:pZ(pZ([],n.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},e.prototype.updateOnShow=function(n){this._options.onShow=n},e.prototype.updateOnHide=function(n){this._options.onHide=n},e.prototype.updateOnToggle=function(n){this._options.onToggle=n},e})();function tve(){document.querySelectorAll("[data-tooltip-target]").forEach(function(e){var n=e.getAttribute("data-tooltip-target"),r=document.getElementById(n);if(r){var i=e.getAttribute("data-tooltip-trigger"),l=e.getAttribute("data-tooltip-placement");new IOe(r,e,{placement:l||iJ.placement,triggerType:i||iJ.triggerType})}else console.error('The tooltip element with id "'.concat(n,'" does not exist. Please check the data-tooltip-target attribute.'))})}typeof window<"u"&&(window.Tooltip=IOe,window.initTooltips=tve);var pA=function(){return pA=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},pA.apply(this,arguments)},hZ=function(e,n,r){if(r||arguments.length===2)for(var i=0,l=n.length,f;i<l;i++)(f||!(i in n))&&(f||(f=Array.prototype.slice.call(n,0,i)),f[i]=n[i]);return e.concat(f||Array.prototype.slice.call(n))},jU={placement:"top",offset:10,triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},O4e={id:null,override:!0},ROe=(function(){function e(n,r,i,l){n===void 0&&(n=null),r===void 0&&(r=null),i===void 0&&(i=jU),l===void 0&&(l=O4e),this._instanceId=l.id?l.id:n.id,this._targetEl=n,this._triggerEl=r,this._options=pA(pA({},jU),i),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),ri.addInstance("Popover",this,l.id?l.id:this._targetEl.id,l.override)}return e.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},e.prototype.destroy=function(){var n=this;if(this._initialized){var r=this._getTriggerEvents();r.showEvents.forEach(function(i){n._triggerEl.removeEventListener(i,n._showHandler),n._targetEl.removeEventListener(i,n._showHandler)}),r.hideEvents.forEach(function(i){n._triggerEl.removeEventListener(i,n._hideHandler),n._targetEl.removeEventListener(i,n._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},e.prototype.removeInstance=function(){ri.removeInstance("Popover",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype._setupEventListeners=function(){var n=this,r=this._getTriggerEvents();this._showHandler=function(){n.show()},this._hideHandler=function(){setTimeout(function(){n._targetEl.matches(":hover")||n.hide()},100)},r.showEvents.forEach(function(i){n._triggerEl.addEventListener(i,n._showHandler),n._targetEl.addEventListener(i,n._showHandler)}),r.hideEvents.forEach(function(i){n._triggerEl.addEventListener(i,n._hideHandler),n._targetEl.addEventListener(i,n._hideHandler)})},e.prototype._createPopperInstance=function(){return Yge(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,this._options.offset]}}]})},e.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},e.prototype._setupKeydownListener=function(){var n=this;this._keydownEventListener=function(r){r.key==="Escape"&&n.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},e.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},e.prototype._setupClickOutsideListener=function(){var n=this;this._clickOutsideEventListener=function(r){n._handleClickOutside(r,n._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},e.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},e.prototype._handleClickOutside=function(n,r){var i=n.target;i!==r&&!r.contains(i)&&!this._triggerEl.contains(i)&&this.isVisible()&&this.hide()},e.prototype.isVisible=function(){return this._visible},e.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},e.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(n){return pA(pA({},n),{modifiers:hZ(hZ([],n.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},e.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(n){return pA(pA({},n),{modifiers:hZ(hZ([],n.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},e.prototype.updateOnShow=function(n){this._options.onShow=n},e.prototype.updateOnHide=function(n){this._options.onHide=n},e.prototype.updateOnToggle=function(n){this._options.onToggle=n},e})();function nve(){document.querySelectorAll("[data-popover-target]").forEach(function(e){var n=e.getAttribute("data-popover-target"),r=document.getElementById(n);if(r){var i=e.getAttribute("data-popover-trigger"),l=e.getAttribute("data-popover-placement"),f=e.getAttribute("data-popover-offset");new ROe(r,e,{placement:l||jU.placement,offset:f?parseInt(f):jU.offset,triggerType:i||jU.triggerType})}else console.error('The popover element with id "'.concat(n,'" does not exist. Please check the data-popover-target attribute.'))})}typeof window<"u"&&(window.Popover=ROe,window.initPopovers=nve);var aJ=function(){return aJ=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},aJ.apply(this,arguments)},Gpe={triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},I4e={id:null,override:!0},xOe=(function(){function e(n,r,i,l,f){n===void 0&&(n=null),r===void 0&&(r=null),i===void 0&&(i=null),l===void 0&&(l=Gpe),f===void 0&&(f=I4e),this._instanceId=f.id?f.id:i.id,this._parentEl=n,this._triggerEl=r,this._targetEl=i,this._options=aJ(aJ({},Gpe),l),this._visible=!1,this._initialized=!1,this.init(),ri.addInstance("Dial",this,this._instanceId,f.override)}return e.prototype.init=function(){var n=this;if(this._triggerEl&&this._targetEl&&!this._initialized){var r=this._getTriggerEventTypes(this._options.triggerType);this._showEventHandler=function(){n.show()},r.showEvents.forEach(function(i){n._triggerEl.addEventListener(i,n._showEventHandler),n._targetEl.addEventListener(i,n._showEventHandler)}),this._hideEventHandler=function(){n._parentEl.matches(":hover")||n.hide()},r.hideEvents.forEach(function(i){n._parentEl.addEventListener(i,n._hideEventHandler)}),this._initialized=!0}},e.prototype.destroy=function(){var n=this;if(this._initialized){var r=this._getTriggerEventTypes(this._options.triggerType);r.showEvents.forEach(function(i){n._triggerEl.removeEventListener(i,n._showEventHandler),n._targetEl.removeEventListener(i,n._showEventHandler)}),r.hideEvents.forEach(function(i){n._parentEl.removeEventListener(i,n._hideEventHandler)}),this._initialized=!1}},e.prototype.removeInstance=function(){ri.removeInstance("Dial",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype.hide=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onHide(this)},e.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onShow(this)},e.prototype.toggle=function(){this._visible?this.hide():this.show()},e.prototype.isHidden=function(){return!this._visible},e.prototype.isVisible=function(){return this._visible},e.prototype._getTriggerEventTypes=function(n){switch(n){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},e.prototype.updateOnShow=function(n){this._options.onShow=n},e.prototype.updateOnHide=function(n){this._options.onHide=n},e.prototype.updateOnToggle=function(n){this._options.onToggle=n},e})();function ove(){document.querySelectorAll("[data-dial-init]").forEach(function(e){var n=e.querySelector("[data-dial-toggle]");if(n){var r=n.getAttribute("data-dial-toggle"),i=document.getElementById(r);if(i){var l=n.getAttribute("data-dial-trigger");new xOe(e,n,i,{triggerType:l||Gpe.triggerType})}else console.error("Dial with id ".concat(r," does not exist. Are you sure that the data-dial-toggle attribute points to the correct modal id?"))}else console.error("Dial with id ".concat(e.id," does not have a trigger element. Are you sure that the data-dial-toggle attribute exists?"))})}typeof window<"u"&&(window.Dial=xOe,window.initDials=ove);var cJ=function(){return cJ=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},cJ.apply(this,arguments)},kye={minValue:null,maxValue:null,onIncrement:function(){},onDecrement:function(){}},R4e={id:null,override:!0},DOe=(function(){function e(n,r,i,l,f){n===void 0&&(n=null),r===void 0&&(r=null),i===void 0&&(i=null),l===void 0&&(l=kye),f===void 0&&(f=R4e),this._instanceId=f.id?f.id:n.id,this._targetEl=n,this._incrementEl=r,this._decrementEl=i,this._options=cJ(cJ({},kye),l),this._initialized=!1,this.init(),ri.addInstance("InputCounter",this,this._instanceId,f.override)}return e.prototype.init=function(){var n=this;this._targetEl&&!this._initialized&&(this._inputHandler=function(r){{var i=r.target;/^\d*$/.test(i.value)||(i.value=i.value.replace(/[^\d]/g,"")),n._options.maxValue!==null&&parseInt(i.value)>n._options.maxValue&&(i.value=n._options.maxValue.toString()),n._options.minValue!==null&&parseInt(i.value)<n._options.minValue&&(i.value=n._options.minValue.toString())}},this._incrementClickHandler=function(){n.increment()},this._decrementClickHandler=function(){n.decrement()},this._targetEl.addEventListener("input",this._inputHandler),this._incrementEl&&this._incrementEl.addEventListener("click",this._incrementClickHandler),this._decrementEl&&this._decrementEl.addEventListener("click",this._decrementClickHandler),this._initialized=!0)},e.prototype.destroy=function(){this._targetEl&&this._initialized&&(this._targetEl.removeEventListener("input",this._inputHandler),this._incrementEl&&this._incrementEl.removeEventListener("click",this._incrementClickHandler),this._decrementEl&&this._decrementEl.removeEventListener("click",this._decrementClickHandler),this._initialized=!1)},e.prototype.removeInstance=function(){ri.removeInstance("InputCounter",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype.getCurrentValue=function(){return parseInt(this._targetEl.value)||0},e.prototype.increment=function(){this._options.maxValue!==null&&this.getCurrentValue()>=this._options.maxValue||(this._targetEl.value=(this.getCurrentValue()+1).toString(),this._options.onIncrement(this))},e.prototype.decrement=function(){this._options.minValue!==null&&this.getCurrentValue()<=this._options.minValue||(this._targetEl.value=(this.getCurrentValue()-1).toString(),this._options.onDecrement(this))},e.prototype.updateOnIncrement=function(n){this._options.onIncrement=n},e.prototype.updateOnDecrement=function(n){this._options.onDecrement=n},e})();function sve(){document.querySelectorAll("[data-input-counter]").forEach(function(e){var n=e.id,r=document.querySelector('[data-input-counter-increment="'+n+'"]'),i=document.querySelector('[data-input-counter-decrement="'+n+'"]'),l=e.getAttribute("data-input-counter-min"),f=e.getAttribute("data-input-counter-max");e?ri.instanceExists("InputCounter",e.getAttribute("id"))||new DOe(e,r||null,i||null,{minValue:l?parseInt(l):null,maxValue:f?parseInt(f):null}):console.error('The target element with id "'.concat(n,'" does not exist. Please check the data-input-counter attribute.'))})}typeof window<"u"&&(window.InputCounter=DOe,window.initInputCounters=sve);var lJ=function(){return lJ=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},lJ.apply(this,arguments)},uJ={htmlEntities:!1,contentType:"input",onCopy:function(){}},x4e={id:null,override:!0},kOe=(function(){function e(n,r,i,l){n===void 0&&(n=null),r===void 0&&(r=null),i===void 0&&(i=uJ),l===void 0&&(l=x4e),this._instanceId=l.id?l.id:r.id,this._triggerEl=n,this._targetEl=r,this._options=lJ(lJ({},uJ),i),this._initialized=!1,this.init(),ri.addInstance("CopyClipboard",this,this._instanceId,l.override)}return e.prototype.init=function(){var n=this;this._targetEl&&this._triggerEl&&!this._initialized&&(this._triggerElClickHandler=function(){n.copy()},this._triggerEl&&this._triggerEl.addEventListener("click",this._triggerElClickHandler),this._initialized=!0)},e.prototype.destroy=function(){this._triggerEl&&this._targetEl&&this._initialized&&(this._triggerEl&&this._triggerEl.removeEventListener("click",this._triggerElClickHandler),this._initialized=!1)},e.prototype.removeInstance=function(){ri.removeInstance("CopyClipboard",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype.getTargetValue=function(){if(this._options.contentType==="input")return this._targetEl.value;if(this._options.contentType==="innerHTML")return this._targetEl.innerHTML;if(this._options.contentType==="textContent")return this._targetEl.textContent.replace(/\s+/g," ").trim()},e.prototype.copy=function(){var n=this.getTargetValue();this._options.htmlEntities&&(n=this.decodeHTML(n));var r=document.createElement("textarea");return r.value=n,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),this._options.onCopy(this),n},e.prototype.decodeHTML=function(n){var r=document.createElement("textarea");return r.innerHTML=n,r.textContent},e.prototype.updateOnCopyCallback=function(n){this._options.onCopy=n},e})();function rve(){document.querySelectorAll("[data-copy-to-clipboard-target]").forEach(function(e){var n=e.getAttribute("data-copy-to-clipboard-target"),r=document.getElementById(n),i=e.getAttribute("data-copy-to-clipboard-content-type"),l=e.getAttribute("data-copy-to-clipboard-html-entities");r?ri.instanceExists("CopyClipboard",r.getAttribute("id"))||new kOe(e,r,{htmlEntities:l&&l==="true"?!0:uJ.htmlEntities,contentType:i||uJ.contentType}):console.error('The target element with id "'.concat(n,'" does not exist. Please check the data-copy-to-clipboard-target attribute.'))})}typeof window<"u"&&(window.CopyClipboard=kOe,window.initClipboards=rve);function qpe(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function D4e(e){if(Array.isArray(e))return e}function k4e(e){if(Array.isArray(e))return qpe(e)}function M4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ive(e,n,r){return n=jA(n),V4e(e,MOe()?Reflect.construct(n,r||[],jA(e).constructor):n.apply(e,r))}function q2(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Mye(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,$4e(i.key),i)}}function K2(e,n,r){return n&&Mye(e.prototype,n),r&&Mye(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function g5(){return g5=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,n,r){var i=H4e(e,n);if(i){var l=Object.getOwnPropertyDescriptor(i,n);return l.get?l.get.call(arguments.length<3?e:r):l.value}},g5.apply(null,arguments)}function jA(e){return jA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jA(e)}function ave(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&Kpe(e,n)}function MOe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MOe=function(){return!!e})()}function N4e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function P4e(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,l,f,h,v=[],y=!0,_=!1;try{if(f=(r=r.call(e)).next,n===0){if(Object(r)!==r)return;y=!1}else for(;!(y=(i=f.call(r)).done)&&(v.push(i.value),v.length!==n);y=!0);}catch(A){_=!0,l=A}finally{try{if(!y&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(_)throw l}}return v}}function L4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V4e(e,n){if(n&&(typeof n=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M4e(e)}function Kpe(e,n){return Kpe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Kpe(e,n)}function rv(e,n){return D4e(e)||P4e(e,n)||NOe(e,n)||L4e()}function H4e(e,n){for(;!{}.hasOwnProperty.call(e,n)&&(e=jA(e))!==null;);return e}function K5(e){return k4e(e)||N4e(e)||NOe(e)||B4e()}function F4e(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function $4e(e){var n=F4e(e,"string");return typeof n=="symbol"?n:n+""}function dJ(e){"@babel/helpers - typeof";return dJ=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},dJ(e)}function NOe(e,n){if(e){if(typeof e=="string")return qpe(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qpe(e,n):void 0}}function fE(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function cve(e){return e[e.length-1]}function P2(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach(function(l){e.includes(l)||e.push(l)}),e}function Xde(e,n){return e?e.split(n):[]}function lve(e,n,r){var i=n===void 0||e>=n,l=r===void 0||e<=r;return i&&l}function POe(e,n,r){return e<n?n:e>r?r:e}function pL(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",f=Object.keys(r).reduce(function(v,y){var _=r[y];return typeof _=="function"&&(_=_(i)),"".concat(v," ").concat(y,'="').concat(_,'"')},e);l+="<".concat(f,"></").concat(e,">");var h=i+1;return h<n?pL(e,n,r,h,l):l}function uve(e){return e.replace(/>\s+/g,">").replace(/\s+</,"<")}function Zpe(e){return new Date(e).setHours(0,0,0,0)}function Z2(){return new Date().setHours(0,0,0,0)}function FA(){switch(arguments.length){case 0:return Z2();case 1:return Zpe(arguments.length<=0?void 0:arguments[0])}var e=new Date(0);return e.setFullYear.apply(e,arguments),e.setHours(0,0,0,0)}function FP(e,n){var r=new Date(e);return r.setDate(r.getDate()+n)}function U4e(e,n){return FP(e,n*7)}function fJ(e,n){var r=new Date(e),i=r.getMonth()+n,l=i%12;l<0&&(l+=12);var f=r.setMonth(i);return r.getMonth()!==l?r.setDate(0):f}function $P(e,n){var r=new Date(e),i=r.getMonth(),l=r.setFullYear(r.getFullYear()+n);return i===1&&r.getMonth()===2?r.setDate(0):l}function Nye(e,n){return(e-n+7)%7}function pJ(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=new Date(e).getDay();return FP(e,Nye(n,r)-Nye(i,r))}function j4e(e){var n=pJ(e,4,1),r=pJ(new Date(n).setMonth(0,4),4,1);return Math.round((n-r)/6048e5)+1}function $R(e,n){var r=new Date(e).getFullYear();return Math.floor(r/n)*n}var Ype=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,z4e=/[\s!-/:-@[-`{-~]+/,Qde={},Pye={y:function(n,r){return new Date(n).setFullYear(parseInt(r,10))},m:function(n,r,i){var l=new Date(n),f=parseInt(r,10)-1;if(isNaN(f)){if(!r)return NaN;var h=r.toLowerCase(),v=function(_){return _.toLowerCase().startsWith(h)};if(f=i.monthsShort.findIndex(v),f<0&&(f=i.months.findIndex(v)),f<0)return NaN}return l.setMonth(f),l.getMonth()!==LOe(f)?l.setDate(0):l.getTime()},d:function(n,r){return new Date(n).setDate(parseInt(r,10))}},W4e={d:function(n){return n.getDate()},dd:function(n){return mZ(n.getDate(),2)},D:function(n,r){return r.daysShort[n.getDay()]},DD:function(n,r){return r.days[n.getDay()]},m:function(n){return n.getMonth()+1},mm:function(n){return mZ(n.getMonth()+1,2)},M:function(n,r){return r.monthsShort[n.getMonth()]},MM:function(n,r){return r.months[n.getMonth()]},y:function(n){return n.getFullYear()},yy:function(n){return mZ(n.getFullYear(),2).slice(-2)},yyyy:function(n){return mZ(n.getFullYear(),4)}};function LOe(e){return e>-1?e%12:LOe(e+12)}function mZ(e,n){return e.toString().padStart(n,"0")}function BOe(e){if(typeof e!="string")throw new Error("Invalid date format.");if(e in Qde)return Qde[e];var n=e.split(Ype),r=e.match(new RegExp(Ype,"g"));if(n.length===0||!r)throw new Error("Invalid date format.");var i=r.map(function(f){return W4e[f]}),l=Object.keys(Pye).reduce(function(f,h){var v=r.find(function(y){return y[0]!=="D"&&y[0].toLowerCase()===h});return v&&f.push(h),f},[]);return Qde[e]={parser:function(h,v){var y=h.split(z4e).reduce(function(_,A,R){if(A.length>0&&r[R]){var k=r[R][0];k==="M"?_.m=A:k!=="D"&&(_[k]=A)}return _},{});return l.reduce(function(_,A){var R=Pye[A](_,y[A],v);return isNaN(R)?_:R},Z2())},formatter:function(h,v){var y=i.reduce(function(_,A,R){return _+="".concat(n[R]).concat(A(h,v))},"");return y+=cve(n)}}}function v5(e,n,r){if(e instanceof Date||typeof e=="number"){var i=Zpe(e);return isNaN(i)?void 0:i}if(e){if(e==="today")return Z2();if(n&&n.toValue){var l=n.toValue(e,n,r);return isNaN(l)?void 0:Zpe(l)}return BOe(n).parser(e,r)}}function b5(e,n,r){if(isNaN(e)||!e&&e!==0)return"";var i=typeof e=="number"?new Date(e):e;return n.toDisplay?n.toDisplay(i,n,r):BOe(n).formatter(i,r)}var hJ=new WeakMap,VOe=EventTarget.prototype,Lye=VOe.addEventListener,Bye=VOe.removeEventListener;function dve(e,n){var r=hJ.get(e);r||(r=[],hJ.set(e,r)),n.forEach(function(i){Lye.call.apply(Lye,K5(i)),r.push(i)})}function HOe(e){var n=hJ.get(e);n&&(n.forEach(function(r){Bye.call.apply(Bye,K5(r))}),hJ.delete(e))}if(!Event.prototype.composedPath){var G4e=function e(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];r.push(n);var i;return n.parentNode?i=n.parentNode:n.host?i=n.host:n.defaultView&&(i=n.defaultView),i?e(i,r):r};Event.prototype.composedPath=function(){return G4e(this.target)}}function FOe(e,n,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=e[i];return n(l)?l:l===r||!l.parentElement?void 0:FOe(e,n,r,i+1)}function $Oe(e,n){var r=typeof n=="function"?n:function(i){return i.matches(n)};return FOe(e.composedPath(),r,e.currentTarget)}var sU={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}},Z5={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,calendarWeeks:!1,clearBtn:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,format:"mm/dd/yyyy",language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:'<svg class="w-4 h-4 rtl:rotate-180 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 5h12m0 0L9 1m4 4L9 9"/></svg>',orientation:"auto",pickLevel:0,prevArrow:'<svg class="w-4 h-4 rtl:rotate-180 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5H1m0 0 4 4M1 5l4-4"/></svg>',showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayBtn:!1,todayBtnMode:0,todayHighlight:!1,updateOnBlur:!0,weekStart:0},efe=null;function pE(e){return efe==null&&(efe=document.createRange()),efe.createContextualFragment(e)}function zU(e){e.style.display!=="none"&&(e.style.display&&(e.dataset.styleDisplay=e.style.display),e.style.display="none")}function WU(e){e.style.display==="none"&&(e.dataset.styleDisplay?(e.style.display=e.dataset.styleDisplay,delete e.dataset.styleDisplay):e.style.display="")}function mJ(e){e.firstChild&&(e.removeChild(e.firstChild),mJ(e))}function q4e(e,n){mJ(e),n instanceof DocumentFragment?e.appendChild(n):typeof n=="string"?e.appendChild(pE(n)):typeof n.forEach=="function"&&n.forEach(function(r){e.appendChild(r)})}var tfe=Z5.language,K4e=Z5.format,Z4e=Z5.weekStart;function Vye(e,n){return e.length<6&&n>=0&&n<7?P2(e,n):e}function Hye(e){return(e+6)%7}function Fye(e,n,r,i){var l=v5(e,n,r);return l!==void 0?l:i}function nfe(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,i=parseInt(e,10);return i>=0&&i<=r?i:n}function ofe(e,n){var r=Object.assign({},e),i={},l=n.constructor.locales,f=n.config||{},h=f.format,v=f.language,y=f.locale,_=f.maxDate,A=f.maxView,R=f.minDate,k=f.pickLevel,N=f.startView,L=f.weekStart;if(r.language){var B;if(r.language!==v&&(l[r.language]?B=r.language:(B=r.language.split("-")[0],l[B]===void 0&&(B=!1))),delete r.language,B){v=i.language=B;var H=y||l[tfe];y=Object.assign({format:K4e,weekStart:Z4e},l[tfe]),v!==tfe&&Object.assign(y,l[v]),i.locale=y,h===H.format&&(h=i.format=y.format),L===H.weekStart&&(L=i.weekStart=y.weekStart,i.weekEnd=Hye(y.weekStart))}}if(r.format){var q=typeof r.format.toDisplay=="function",Y=typeof r.format.toValue=="function",K=Ype.test(r.format);(q&&Y||K)&&(h=i.format=r.format),delete r.format}var se=R,ie=_;if(r.minDate!==void 0&&(se=r.minDate===null?FA(0,0,1):Fye(r.minDate,h,y,se),delete r.minDate),r.maxDate!==void 0&&(ie=r.maxDate===null?void 0:Fye(r.maxDate,h,y,ie),delete r.maxDate),ie<se?(R=i.minDate=ie,_=i.maxDate=se):(R!==se&&(R=i.minDate=se),_!==ie&&(_=i.maxDate=ie)),r.datesDisabled&&(i.datesDisabled=r.datesDisabled.reduce(function(Ze,z){var $t=v5(z,h,y);return $t!==void 0?P2(Ze,$t):Ze},[]),delete r.datesDisabled),r.defaultViewDate!==void 0){var le=v5(r.defaultViewDate,h,y);le!==void 0&&(i.defaultViewDate=le),delete r.defaultViewDate}if(r.weekStart!==void 0){var M=Number(r.weekStart)%7;isNaN(M)||(L=i.weekStart=M,i.weekEnd=Hye(M)),delete r.weekStart}if(r.daysOfWeekDisabled&&(i.daysOfWeekDisabled=r.daysOfWeekDisabled.reduce(Vye,[]),delete r.daysOfWeekDisabled),r.daysOfWeekHighlighted&&(i.daysOfWeekHighlighted=r.daysOfWeekHighlighted.reduce(Vye,[]),delete r.daysOfWeekHighlighted),r.maxNumberOfDates!==void 0){var we=parseInt(r.maxNumberOfDates,10);we>=0&&(i.maxNumberOfDates=we,i.multidate=we!==1),delete r.maxNumberOfDates}r.dateDelimiter&&(i.dateDelimiter=String(r.dateDelimiter),delete r.dateDelimiter);var Ne=k;r.pickLevel!==void 0&&(Ne=nfe(r.pickLevel,2),delete r.pickLevel),Ne!==k&&(k=i.pickLevel=Ne);var De=A;r.maxView!==void 0&&(De=nfe(r.maxView,A),delete r.maxView),De=k>De?k:De,De!==A&&(A=i.maxView=De);var be=N;if(r.startView!==void 0&&(be=nfe(r.startView,be),delete r.startView),be<k?be=k:be>A&&(be=A),be!==N&&(i.startView=be),r.prevArrow){var me=pE(r.prevArrow);me.childNodes.length>0&&(i.prevArrow=me.childNodes),delete r.prevArrow}if(r.nextArrow){var Ye=pE(r.nextArrow);Ye.childNodes.length>0&&(i.nextArrow=Ye.childNodes),delete r.nextArrow}if(r.disableTouchKeyboard!==void 0&&(i.disableTouchKeyboard="ontouchstart"in document&&!!r.disableTouchKeyboard,delete r.disableTouchKeyboard),r.orientation){var Ke=r.orientation.toLowerCase().split(/\s+/g);i.orientation={x:Ke.find(function(Ze){return Ze==="left"||Ze==="right"})||"auto",y:Ke.find(function(Ze){return Ze==="top"||Ze==="bottom"})||"auto"},delete r.orientation}if(r.todayBtnMode!==void 0){switch(r.todayBtnMode){case 0:case 1:i.todayBtnMode=r.todayBtnMode}delete r.todayBtnMode}return Object.keys(r).forEach(function(Ze){r[Ze]!==void 0&&fE(Z5,Ze)&&(i[Ze]=r[Ze])}),i}var Y4e=uve(`<div class="datepicker hidden">
  <div class="datepicker-picker inline-block rounded-lg bg-white dark:bg-gray-700 shadow-lg p-4">
    <div class="datepicker-header">
      <div class="datepicker-title bg-white dark:bg-gray-700 dark:text-white px-2 py-3 text-center font-semibold"></div>
      <div class="datepicker-controls flex justify-between mb-2">
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 prev-btn"></button>
        <button type="button" class="text-sm rounded-lg text-gray-900 dark:text-white bg-white dark:bg-gray-700 font-semibold py-2.5 px-5 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-200 view-switch"></button>
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 next-btn"></button>
      </div>
    </div>
    <div class="datepicker-main p-1"></div>
    <div class="datepicker-footer">
      <div class="datepicker-controls flex space-x-2 rtl:space-x-reverse mt-2">
        <button type="button" class="%buttonClass% today-btn text-white bg-blue-700 !bg-primary-700 dark:bg-blue-600 dark:!bg-primary-600 hover:bg-blue-800 hover:!bg-primary-800 dark:hover:bg-blue-700 dark:hover:!bg-primary-700 focus:ring-4 focus:ring-blue-300 focus:!ring-primary-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
        <button type="button" class="%buttonClass% clear-btn text-gray-900 dark:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 focus:ring-4 focus:ring-blue-300 focus:!ring-primary-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
      </div>
    </div>
  </div>
</div>`),J4e=uve(`<div class="days">
  <div class="days-of-week grid grid-cols-7 mb-1">`.concat(pL("span",7,{class:"dow block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"}),`</div>
  <div class="datepicker-grid w-64 grid grid-cols-7">`).concat(pL("span",42,{class:"block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"}),`</div>
</div>`)),X4e=uve(`<div class="calendar-weeks">
  <div class="days-of-week flex"><span class="dow h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"></span></div>
  <div class="weeks">`.concat(pL("span",6,{class:"week block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"}),`</div>
</div>`)),fve=(function(){function e(n,r){q2(this,e),Object.assign(this,r,{picker:n,element:pE('<div class="datepicker-view flex"></div>').firstChild,selected:[]}),this.init(this.picker.datepicker.config)}return K2(e,[{key:"init",value:function(r){r.pickLevel!==void 0&&(this.isMinView=this.id===r.pickLevel),this.setOptions(r),this.updateFocus(),this.updateSelection()}},{key:"performBeforeHook",value:function(r,i,l){var f=this.beforeShow(new Date(l));switch(dJ(f)){case"boolean":f={enabled:f};break;case"string":f={classes:f}}if(f){if(f.enabled===!1&&(r.classList.add("disabled"),P2(this.disabled,i)),f.classes){var h,v=f.classes.split(/\s+/);(h=r.classList).add.apply(h,K5(v)),v.includes("disabled")&&P2(this.disabled,i)}f.content&&q4e(r,f.content)}}}])})(),Q4e=(function(e){function n(r){return q2(this,n),ive(this,n,[r,{id:0,name:"days",cellClass:"day"}])}return ave(n,e),K2(n,[{key:"init",value:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(l){var f=pE(J4e).firstChild;this.dow=f.firstChild,this.grid=f.lastChild,this.element.appendChild(f)}g5(jA(n.prototype),"init",this).call(this,i)}},{key:"setOptions",value:function(i){var l=this,f;if(fE(i,"minDate")&&(this.minDate=i.minDate),fE(i,"maxDate")&&(this.maxDate=i.maxDate),i.datesDisabled&&(this.datesDisabled=i.datesDisabled),i.daysOfWeekDisabled&&(this.daysOfWeekDisabled=i.daysOfWeekDisabled,f=!0),i.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=i.daysOfWeekHighlighted),i.todayHighlight!==void 0&&(this.todayHighlight=i.todayHighlight),i.weekStart!==void 0&&(this.weekStart=i.weekStart,this.weekEnd=i.weekEnd,f=!0),i.locale){var h=this.locale=i.locale;this.dayNames=h.daysMin,this.switchLabelFormat=h.titleFormat,f=!0}if(i.beforeShowDay!==void 0&&(this.beforeShow=typeof i.beforeShowDay=="function"?i.beforeShowDay:void 0),i.calendarWeeks!==void 0)if(i.calendarWeeks&&!this.calendarWeeks){var v=pE(X4e).firstChild;this.calendarWeeks={element:v,dow:v.firstChild,weeks:v.lastChild},this.element.insertBefore(v,this.element.firstChild)}else this.calendarWeeks&&!i.calendarWeeks&&(this.element.removeChild(this.calendarWeeks.element),this.calendarWeeks=null);i.showDaysOfWeek!==void 0&&(i.showDaysOfWeek?(WU(this.dow),this.calendarWeeks&&WU(this.calendarWeeks.dow)):(zU(this.dow),this.calendarWeeks&&zU(this.calendarWeeks.dow))),f&&Array.from(this.dow.children).forEach(function(y,_){var A=(l.weekStart+_)%7;y.textContent=l.dayNames[A],y.className=l.daysOfWeekDisabled.includes(A)?"dow disabled text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400 cursor-not-allowed":"dow text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"})}},{key:"updateFocus",value:function(){var i=new Date(this.picker.viewDate),l=i.getFullYear(),f=i.getMonth(),h=FA(l,f,1),v=pJ(h,this.weekStart,this.weekStart);this.first=h,this.last=FA(l,f+1,0),this.start=v,this.focused=this.picker.viewDate}},{key:"updateSelection",value:function(){var i=this.picker.datepicker,l=i.dates,f=i.rangepicker;this.selected=l,f&&(this.range=f.dates)}},{key:"render",value:function(){var i=this;this.today=this.todayHighlight?Z2():void 0,this.disabled=K5(this.datesDisabled);var l=b5(this.focused,this.switchLabelFormat,this.locale);if(this.picker.setViewSwitchLabel(l),this.picker.setPrevBtnDisabled(this.first<=this.minDate),this.picker.setNextBtnDisabled(this.last>=this.maxDate),this.calendarWeeks){var f=pJ(this.first,1,1);Array.from(this.calendarWeeks.weeks.children).forEach(function(h,v){h.textContent=j4e(U4e(f,v))})}Array.from(this.grid.children).forEach(function(h,v){var y=h.classList,_=FP(i.start,v),A=new Date(_),R=A.getDay();if(h.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(i.cellClass),h.dataset.date=_,h.textContent=A.getDate(),_<i.first?y.add("prev","text-gray-500","dark:text-white"):_>i.last&&y.add("next","text-gray-500","dark:text-white"),i.today===_&&y.add("today","bg-gray-100","dark:bg-gray-600"),(_<i.minDate||_>i.maxDate||i.disabled.includes(_))&&(y.add("disabled","cursor-not-allowed","text-gray-400","dark:text-gray-500"),y.remove("hover:bg-gray-100","dark:hover:bg-gray-600","text-gray-900","dark:text-white","cursor-pointer")),i.daysOfWeekDisabled.includes(R)&&(y.add("disabled","cursor-not-allowed","text-gray-400","dark:text-gray-500"),y.remove("hover:bg-gray-100","dark:hover:bg-gray-600","text-gray-900","dark:text-white","cursor-pointer"),P2(i.disabled,_)),i.daysOfWeekHighlighted.includes(R)&&y.add("highlighted"),i.range){var k=rv(i.range,2),N=k[0],L=k[1];_>N&&_<L&&(y.add("range","bg-gray-200","dark:bg-gray-600"),y.remove("rounded-lg","rounded-l-lg","rounded-r-lg")),_===N&&(y.add("range-start","bg-gray-100","dark:bg-gray-600","rounded-l-lg"),y.remove("rounded-lg","rounded-r-lg")),_===L&&(y.add("range-end","bg-gray-100","dark:bg-gray-600","rounded-r-lg"),y.remove("rounded-lg","rounded-l-lg"))}i.selected.includes(_)&&(y.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),y.remove("text-gray-900","text-gray-500","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600","dark:bg-gray-600","bg-gray-100","bg-gray-200")),_===i.focused&&y.add("focused"),i.beforeShow&&i.performBeforeHook(h,_,_)})}},{key:"refresh",value:function(){var i=this,l=this.range||[],f=rv(l,2),h=f[0],v=f[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(y){y.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white","focused"),y.classList.add("text-gray-900","rounded-lg","dark:text-white")}),Array.from(this.grid.children).forEach(function(y){var _=Number(y.dataset.date),A=y.classList;A.remove("bg-gray-200","dark:bg-gray-600","rounded-l-lg","rounded-r-lg"),_>h&&_<v&&(A.add("range","bg-gray-200","dark:bg-gray-600"),A.remove("rounded-lg")),_===h&&(A.add("range-start","bg-gray-200","dark:bg-gray-600","rounded-l-lg"),A.remove("rounded-lg")),_===v&&(A.add("range-end","bg-gray-200","dark:bg-gray-600","rounded-r-lg"),A.remove("rounded-lg")),i.selected.includes(_)&&(A.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),A.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600","bg-gray-100","bg-gray-200","dark:bg-gray-600")),_===i.focused&&A.add("focused")})}},{key:"refreshFocus",value:function(){var i=Math.round((this.focused-this.start)/864e5);this.grid.querySelectorAll(".focused").forEach(function(l){l.classList.remove("focused")}),this.grid.children[i].classList.add("focused")}}])})(fve);function $ye(e,n){if(!(!e||!e[0]||!e[1])){var r=rv(e,2),i=rv(r[0],2),l=i[0],f=i[1],h=rv(r[1],2),v=h[0],y=h[1];if(!(l>n||v<n))return[l===n?f:-1,v===n?y:12]}}var e3e=(function(e){function n(r){return q2(this,n),ive(this,n,[r,{id:1,name:"months",cellClass:"month"}])}return ave(n,e),K2(n,[{key:"init",value:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;l&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(pE(pL("span",12,{"data-month":function(h){return h}})))),g5(jA(n.prototype),"init",this).call(this,i)}},{key:"setOptions",value:function(i){if(i.locale&&(this.monthNames=i.locale.monthsShort),fE(i,"minDate"))if(i.minDate===void 0)this.minYear=this.minMonth=this.minDate=void 0;else{var l=new Date(i.minDate);this.minYear=l.getFullYear(),this.minMonth=l.getMonth(),this.minDate=l.setDate(1)}if(fE(i,"maxDate"))if(i.maxDate===void 0)this.maxYear=this.maxMonth=this.maxDate=void 0;else{var f=new Date(i.maxDate);this.maxYear=f.getFullYear(),this.maxMonth=f.getMonth(),this.maxDate=FA(this.maxYear,this.maxMonth+1,0)}i.beforeShowMonth!==void 0&&(this.beforeShow=typeof i.beforeShowMonth=="function"?i.beforeShowMonth:void 0)}},{key:"updateFocus",value:function(){var i=new Date(this.picker.viewDate);this.year=i.getFullYear(),this.focused=i.getMonth()}},{key:"updateSelection",value:function(){var i=this.picker.datepicker,l=i.dates,f=i.rangepicker;this.selected=l.reduce(function(h,v){var y=new Date(v),_=y.getFullYear(),A=y.getMonth();return h[_]===void 0?h[_]=[A]:P2(h[_],A),h},{}),f&&f.dates&&(this.range=f.dates.map(function(h){var v=new Date(h);return isNaN(v)?void 0:[v.getFullYear(),v.getMonth()]}))}},{key:"render",value:function(){var i=this;this.disabled=[],this.picker.setViewSwitchLabel(this.year),this.picker.setPrevBtnDisabled(this.year<=this.minYear),this.picker.setNextBtnDisabled(this.year>=this.maxYear);var l=this.selected[this.year]||[],f=this.year<this.minYear||this.year>this.maxYear,h=this.year===this.minYear,v=this.year===this.maxYear,y=$ye(this.range,this.year);Array.from(this.grid.children).forEach(function(_,A){var R=_.classList,k=FA(i.year,A,1);if(_.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(i.cellClass),i.isMinView&&(_.dataset.date=k),_.textContent=i.monthNames[A],(f||h&&A<i.minMonth||v&&A>i.maxMonth)&&R.add("disabled"),y){var N=rv(y,2),L=N[0],B=N[1];A>L&&A<B&&R.add("range"),A===L&&R.add("range-start"),A===B&&R.add("range-end")}l.includes(A)&&(R.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),R.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),A===i.focused&&R.add("focused"),i.beforeShow&&i.performBeforeHook(_,A,k)})}},{key:"refresh",value:function(){var i=this,l=this.selected[this.year]||[],f=$ye(this.range,this.year)||[],h=rv(f,2),v=h[0],y=h[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(_){_.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","dark:bg-blue-600","dark:!bg-primary-700","dark:text-white","text-white","focused"),_.classList.add("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")}),Array.from(this.grid.children).forEach(function(_,A){var R=_.classList;A>v&&A<y&&R.add("range"),A===v&&R.add("range-start"),A===y&&R.add("range-end"),l.includes(A)&&(R.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),R.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),A===i.focused&&R.add("focused")})}},{key:"refreshFocus",value:function(){this.grid.querySelectorAll(".focused").forEach(function(i){i.classList.remove("focused")}),this.grid.children[this.focused].classList.add("focused")}}])})(fve);function t3e(e){return K5(e).reduce(function(n,r,i){return n+=i?r:r.toUpperCase()},"")}var Uye=(function(e){function n(r,i){return q2(this,n),ive(this,n,[r,i])}return ave(n,e),K2(n,[{key:"init",value:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;l&&(this.navStep=this.step*10,this.beforeShowOption="beforeShow".concat(t3e(this.cellClass)),this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(pE(pL("span",12)))),g5(jA(n.prototype),"init",this).call(this,i)}},{key:"setOptions",value:function(i){if(fE(i,"minDate")&&(i.minDate===void 0?this.minYear=this.minDate=void 0:(this.minYear=$R(i.minDate,this.step),this.minDate=FA(this.minYear,0,1))),fE(i,"maxDate")&&(i.maxDate===void 0?this.maxYear=this.maxDate=void 0:(this.maxYear=$R(i.maxDate,this.step),this.maxDate=FA(this.maxYear,11,31))),i[this.beforeShowOption]!==void 0){var l=i[this.beforeShowOption];this.beforeShow=typeof l=="function"?l:void 0}}},{key:"updateFocus",value:function(){var i=new Date(this.picker.viewDate),l=$R(i,this.navStep),f=l+9*this.step;this.first=l,this.last=f,this.start=l-this.step,this.focused=$R(i,this.step)}},{key:"updateSelection",value:function(){var i=this,l=this.picker.datepicker,f=l.dates,h=l.rangepicker;this.selected=f.reduce(function(v,y){return P2(v,$R(y,i.step))},[]),h&&h.dates&&(this.range=h.dates.map(function(v){if(v!==void 0)return $R(v,i.step)}))}},{key:"render",value:function(){var i=this;this.disabled=[],this.picker.setViewSwitchLabel("".concat(this.first,"-").concat(this.last)),this.picker.setPrevBtnDisabled(this.first<=this.minYear),this.picker.setNextBtnDisabled(this.last>=this.maxYear),Array.from(this.grid.children).forEach(function(l,f){var h=l.classList,v=i.start+f*i.step,y=FA(v,0,1);if(l.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(i.cellClass),i.isMinView&&(l.dataset.date=y),l.textContent=l.dataset.year=v,f===0?h.add("prev"):f===11&&h.add("next"),(v<i.minYear||v>i.maxYear)&&h.add("disabled"),i.range){var _=rv(i.range,2),A=_[0],R=_[1];v>A&&v<R&&h.add("range"),v===A&&h.add("range-start"),v===R&&h.add("range-end")}i.selected.includes(v)&&(h.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),h.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),v===i.focused&&h.add("focused"),i.beforeShow&&i.performBeforeHook(l,v,y)})}},{key:"refresh",value:function(){var i=this,l=this.range||[],f=rv(l,2),h=f[0],v=f[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(y){y.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark!bg-primary-600","dark:text-white","focused")}),Array.from(this.grid.children).forEach(function(y){var _=Number(y.textContent),A=y.classList;_>h&&_<v&&A.add("range"),_===h&&A.add("range-start"),_===v&&A.add("range-end"),i.selected.includes(_)&&(A.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),A.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),_===i.focused&&A.add("focused")})}},{key:"refreshFocus",value:function(){var i=Math.round((this.focused-this.start)/this.step);this.grid.querySelectorAll(".focused").forEach(function(l){l.classList.remove("focused")}),this.grid.children[i].classList.add("focused")}}])})(fve);function UP(e,n){var r={date:e.getDate(),viewDate:new Date(e.picker.viewDate),viewId:e.picker.currentView.id,datepicker:e};e.element.dispatchEvent(new CustomEvent(n,{detail:r}))}function gJ(e,n){var r=e.config,i=r.minDate,l=r.maxDate,f=e.picker,h=f.currentView,v=f.viewDate,y;switch(h.id){case 0:y=fJ(v,n);break;case 1:y=$P(v,n);break;default:y=$P(v,n*h.navStep)}y=POe(y,i,l),e.picker.changeFocus(y).render()}function UOe(e){var n=e.picker.currentView.id;n!==e.config.maxView&&e.picker.changeView(n+1).render()}function jOe(e){e.config.updateOnBlur?e.update({autohide:!0}):(e.refresh("input"),e.hide())}function jye(e,n){var r=e.picker,i=new Date(r.viewDate),l=r.currentView.id,f=l===1?fJ(i,n-i.getMonth()):$P(i,n-i.getFullYear());r.changeFocus(f).changeView(l-1).render()}function n3e(e){var n=e.picker,r=Z2();if(e.config.todayBtnMode===1){if(e.config.autohide){e.setDate(r);return}e.setDate(r,{render:!1}),n.update()}n.viewDate!==r&&n.changeFocus(r),n.changeView(0).render()}function o3e(e){e.setDate({clear:!0})}function s3e(e){UOe(e)}function r3e(e){gJ(e,-1)}function i3e(e){gJ(e,1)}function a3e(e,n){var r=$Oe(n,".datepicker-cell");if(!(!r||r.classList.contains("disabled"))){var i=e.picker.currentView,l=i.id,f=i.isMinView;f?e.setDate(Number(r.dataset.date)):l===1?jye(e,Number(r.dataset.month)):jye(e,Number(r.dataset.year))}}function c3e(e){!e.inline&&!e.config.disableTouchKeyboard&&e.inputField.focus()}function zye(e,n){if(n.title!==void 0&&(n.title?(e.controls.title.textContent=n.title,WU(e.controls.title)):(e.controls.title.textContent="",zU(e.controls.title))),n.prevArrow){var r=e.controls.prevBtn;mJ(r),n.prevArrow.forEach(function(v){r.appendChild(v.cloneNode(!0))})}if(n.nextArrow){var i=e.controls.nextBtn;mJ(i),n.nextArrow.forEach(function(v){i.appendChild(v.cloneNode(!0))})}if(n.locale&&(e.controls.todayBtn.textContent=n.locale.today,e.controls.clearBtn.textContent=n.locale.clear),n.todayBtn!==void 0&&(n.todayBtn?WU(e.controls.todayBtn):zU(e.controls.todayBtn)),fE(n,"minDate")||fE(n,"maxDate")){var l=e.datepicker.config,f=l.minDate,h=l.maxDate;e.controls.todayBtn.disabled=!lve(Z2(),f,h)}n.clearBtn!==void 0&&(n.clearBtn?WU(e.controls.clearBtn):zU(e.controls.clearBtn))}function Wye(e){var n=e.dates,r=e.config,i=n.length>0?cve(n):r.defaultViewDate;return POe(i,r.minDate,r.maxDate)}function Gye(e,n){var r=new Date(e.viewDate),i=new Date(n),l=e.currentView,f=l.id,h=l.year,v=l.first,y=l.last,_=i.getFullYear();switch(e.viewDate=n,_!==r.getFullYear()&&UP(e.datepicker,"changeYear"),i.getMonth()!==r.getMonth()&&UP(e.datepicker,"changeMonth"),f){case 0:return n<v||n>y;case 1:return _!==h;default:return _<v||_>y}}function sfe(e){return window.getComputedStyle(e).direction}var l3e=(function(){function e(n){q2(this,e),this.datepicker=n;var r=Y4e.replace(/%buttonClass%/g,n.config.buttonClass),i=this.element=pE(r).firstChild,l=rv(i.firstChild.children,3),f=l[0],h=l[1],v=l[2],y=f.firstElementChild,_=rv(f.lastElementChild.children,3),A=_[0],R=_[1],k=_[2],N=rv(v.firstChild.children,2),L=N[0],B=N[1],H={title:y,prevBtn:A,viewSwitch:R,nextBtn:k,todayBtn:L,clearBtn:B};this.main=h,this.controls=H;var q=n.inline?"inline":"dropdown";i.classList.add("datepicker-".concat(q)),q==="dropdown"&&i.classList.add("dropdown","absolute","top-0","left-0","z-50","pt-2"),zye(this,n.config),this.viewDate=Wye(n),dve(n,[[i,"click",c3e.bind(null,n),{capture:!0}],[h,"click",a3e.bind(null,n)],[H.viewSwitch,"click",s3e.bind(null,n)],[H.prevBtn,"click",r3e.bind(null,n)],[H.nextBtn,"click",i3e.bind(null,n)],[H.todayBtn,"click",n3e.bind(null,n)],[H.clearBtn,"click",o3e.bind(null,n)]]),this.views=[new Q4e(this),new e3e(this),new Uye(this,{id:2,name:"years",cellClass:"year",step:1}),new Uye(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[n.config.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),n.config.container.appendChild(this.element)}return K2(e,[{key:"setOptions",value:function(r){zye(this,r),this.views.forEach(function(i){i.init(r,!1)}),this.currentView.render()}},{key:"detach",value:function(){this.datepicker.config.container.removeChild(this.element)}},{key:"show",value:function(){if(!this.active){this.element.classList.add("active","block"),this.element.classList.remove("hidden"),this.active=!0;var r=this.datepicker;if(!r.inline){var i=sfe(r.inputField);i!==sfe(r.config.container)?this.element.dir=i:this.element.dir&&this.element.removeAttribute("dir"),this.place(),r.config.disableTouchKeyboard&&r.inputField.blur()}UP(r,"show")}}},{key:"hide",value:function(){this.active&&(this.datepicker.exitEditMode(),this.element.classList.remove("active","block"),this.element.classList.add("active","block","hidden"),this.active=!1,UP(this.datepicker,"hide"))}},{key:"place",value:function(){var r=this.element,i=r.classList,l=r.style,f=this.datepicker,h=f.config,v=f.inputField,y=h.container,_=this.element.getBoundingClientRect(),A=_.width,R=_.height,k=y.getBoundingClientRect(),N=k.left,L=k.top,B=k.width,H=v.getBoundingClientRect(),q=H.left,Y=H.top,K=H.width,se=H.height,ie=h.orientation,le=ie.x,M=ie.y,we,Ne,De;y===document.body?(we=window.scrollY,Ne=q+window.scrollX,De=Y+we):(we=y.scrollTop,Ne=q-N,De=Y-L+we),le==="auto"&&(Ne<0?(le="left",Ne=10):Ne+A>B?le="right":le=sfe(v)==="rtl"?"right":"left"),le==="right"&&(Ne-=A-K),M==="auto"&&(M=De-R<we?"bottom":"top"),M==="top"?De-=R:De+=se,i.remove("datepicker-orient-top","datepicker-orient-bottom","datepicker-orient-right","datepicker-orient-left"),i.add("datepicker-orient-".concat(M),"datepicker-orient-".concat(le)),l.top=De&&"".concat(De,"px"),l.left=Ne&&"".concat(Ne,"px")}},{key:"setViewSwitchLabel",value:function(r){this.controls.viewSwitch.textContent=r}},{key:"setPrevBtnDisabled",value:function(r){this.controls.prevBtn.disabled=r}},{key:"setNextBtnDisabled",value:function(r){this.controls.nextBtn.disabled=r}},{key:"changeView",value:function(r){var i=this.currentView,l=this.views[r];return l.id!==i.id&&(this.currentView=l,this._renderMethod="render",UP(this.datepicker,"changeView"),this.main.replaceChild(l.element,i.element)),this}},{key:"changeFocus",value:function(r){return this._renderMethod=Gye(this,r)?"render":"refreshFocus",this.views.forEach(function(i){i.updateFocus()}),this}},{key:"update",value:function(){var r=Wye(this.datepicker);return this._renderMethod=Gye(this,r)?"render":"refresh",this.views.forEach(function(i){i.updateFocus(),i.updateSelection()}),this}},{key:"render",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i=r&&this._renderMethod||"render";delete this._renderMethod,this.currentView[i]()}}])})();function zOe(e,n,r,i,l,f){if(lve(e,l,f)){if(i(e)){var h=n(e,r);return zOe(h,n,r,i,l,f)}return e}}function gZ(e,n,r,i){var l=e.picker,f=l.currentView,h=f.step||1,v=l.viewDate,y,_;switch(f.id){case 0:i?v=FP(v,r*7):n.ctrlKey||n.metaKey?v=$P(v,r):v=FP(v,r),y=FP,_=function(R){return f.disabled.includes(R)};break;case 1:v=fJ(v,i?r*4:r),y=fJ,_=function(R){var k=new Date(R),N=f.year,L=f.disabled;return k.getFullYear()===N&&L.includes(k.getMonth())};break;default:v=$P(v,r*(i?4:1)*h),y=$P,_=function(R){return f.disabled.includes($R(R,h))}}v=zOe(v,y,r<0?-h:h,_,f.minDate,f.maxDate),v!==void 0&&l.changeFocus(v).render()}function u3e(e,n){if(n.key==="Tab"){jOe(e);return}var r=e.picker,i=r.currentView,l=i.id,f=i.isMinView;if(r.active)if(e.editMode)switch(n.key){case"Escape":r.hide();break;case"Enter":e.exitEditMode({update:!0,autohide:e.config.autohide});break;default:return}else switch(n.key){case"Escape":r.hide();break;case"ArrowLeft":if(n.ctrlKey||n.metaKey)gJ(e,-1);else if(n.shiftKey){e.enterEditMode();return}else gZ(e,n,-1,!1);break;case"ArrowRight":if(n.ctrlKey||n.metaKey)gJ(e,1);else if(n.shiftKey){e.enterEditMode();return}else gZ(e,n,1,!1);break;case"ArrowUp":if(n.ctrlKey||n.metaKey)UOe(e);else if(n.shiftKey){e.enterEditMode();return}else gZ(e,n,-1,!0);break;case"ArrowDown":if(n.shiftKey&&!n.ctrlKey&&!n.metaKey){e.enterEditMode();return}gZ(e,n,1,!0);break;case"Enter":f?e.setDate(r.viewDate):r.changeView(l-1).render();break;case"Backspace":case"Delete":e.enterEditMode();return;default:n.key.length===1&&!n.ctrlKey&&!n.metaKey&&e.enterEditMode();return}else switch(n.key){case"ArrowDown":case"Escape":r.show();break;case"Enter":e.update();break;default:return}n.preventDefault(),n.stopPropagation()}function d3e(e){e.config.showOnFocus&&!e._showing&&e.show()}function f3e(e,n){var r=n.target;(e.picker.active||e.config.showOnClick)&&(r._active=r===document.activeElement,r._clicking=setTimeout(function(){delete r._active,delete r._clicking},2e3))}function p3e(e,n){var r=n.target;r._clicking&&(clearTimeout(r._clicking),delete r._clicking,r._active&&e.enterEditMode(),delete r._active,e.config.showOnClick&&e.show())}function h3e(e,n){n.clipboardData.types.includes("text/plain")&&e.enterEditMode()}function m3e(e,n){var r=e.element;if(r===document.activeElement){var i=e.picker.element;$Oe(n,function(l){return l===r||l===i})||jOe(e)}}function WOe(e,n){return e.map(function(r){return b5(r,n.format,n.locale)}).join(n.dateDelimiter)}function GOe(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=e.config,l=e.dates,f=e.rangepicker;if(n.length===0)return r?[]:void 0;var h=f&&e===f.datepickers[1],v=n.reduce(function(y,_){var A=v5(_,i.format,i.locale);if(A===void 0)return y;if(i.pickLevel>0){var R=new Date(A);i.pickLevel===1?A=h?R.setMonth(R.getMonth()+1,0):R.setDate(1):A=h?R.setFullYear(R.getFullYear()+1,0,0):R.setMonth(0,1)}return lve(A,i.minDate,i.maxDate)&&!y.includes(A)&&!i.datesDisabled.includes(A)&&!i.daysOfWeekDisabled.includes(new Date(A).getDay())&&y.push(A),y},[]);if(v.length!==0)return i.multidate&&!r&&(v=v.reduce(function(y,_){return l.includes(_)||y.push(_),y},l.filter(function(y){return!v.includes(y)}))),i.maxNumberOfDates&&v.length>i.maxNumberOfDates?v.slice(i.maxNumberOfDates*-1):v}function vJ(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=e.config,l=e.picker,f=e.inputField;if(n&2){var h=l.active?i.pickLevel:i.startView;l.update().changeView(h).render(r)}n&1&&f&&(f.value=WOe(e.dates,i))}function qye(e,n,r){var i=r.clear,l=r.render,f=r.autohide;l===void 0&&(l=!0),l?f===void 0&&(f=e.config.autohide):f=!1;var h=GOe(e,n,i);h&&(h.toString()!==e.dates.toString()?(e.dates=h,vJ(e,l?3:1),UP(e,"changeDate")):vJ(e,1),f&&e.hide())}var iY=(function(){function e(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;q2(this,e),n.datepicker=this,this.element=n;var l=this.config=Object.assign({buttonClass:r.buttonClass&&String(r.buttonClass)||"button",container:document.body,defaultViewDate:Z2(),maxDate:void 0,minDate:void 0},ofe(Z5,this));this._options=r,Object.assign(l,ofe(r,this));var f=this.inline=n.tagName!=="INPUT",h,v;if(f)l.container=n,v=Xde(n.dataset.date,l.dateDelimiter),delete n.dataset.date;else{var y=r.container?document.querySelector(r.container):null;y&&(l.container=y),h=this.inputField=n,h.classList.add("datepicker-input"),v=Xde(h.value,l.dateDelimiter)}if(i){var _=i.inputs.indexOf(h),A=i.datepickers;if(_<0||_>1||!Array.isArray(A))throw Error("Invalid rangepicker object.");A[_]=this,Object.defineProperty(this,"rangepicker",{get:function(){return i}})}this.dates=[];var R=GOe(this,v);R&&R.length>0&&(this.dates=R),h&&(h.value=WOe(this.dates,l));var k=this.picker=new l3e(this);if(f)this.show();else{var N=m3e.bind(null,this),L=[[h,"keydown",u3e.bind(null,this)],[h,"focus",d3e.bind(null,this)],[h,"mousedown",f3e.bind(null,this)],[h,"click",p3e.bind(null,this)],[h,"paste",h3e.bind(null,this)],[document,"mousedown",N],[document,"touchstart",N],[window,"resize",k.place.bind(k)]];dve(this,L)}}return K2(e,[{key:"active",get:function(){return!!(this.picker&&this.picker.active)}},{key:"pickerElement",get:function(){return this.picker?this.picker.element:void 0}},{key:"setOptions",value:function(r){var i=this.picker,l=ofe(r,this);Object.assign(this._options,r),Object.assign(this.config,l),i.setOptions(l),vJ(this,3)}},{key:"show",value:function(){if(this.inputField){if(this.inputField.disabled)return;this.inputField!==document.activeElement&&(this._showing=!0,this.inputField.focus(),delete this._showing)}this.picker.show()}},{key:"hide",value:function(){this.inline||(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}},{key:"destroy",value:function(){return this.hide(),HOe(this),this.picker.detach(),this.inline||this.inputField.classList.remove("datepicker-input"),delete this.element.datepicker,this}},{key:"getDate",value:function(){var r=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,l=i?function(f){return b5(f,i,r.config.locale)}:function(f){return new Date(f)};if(this.config.multidate)return this.dates.map(l);if(this.dates.length>0)return l(this.dates[0])}},{key:"setDate",value:function(){for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];var f=[].concat(i),h={},v=cve(i);dJ(v)==="object"&&!Array.isArray(v)&&!(v instanceof Date)&&v&&Object.assign(h,f.pop());var y=Array.isArray(f[0])?f[0]:f;qye(this,y,h)}},{key:"update",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(!this.inline){var i={clear:!0,autohide:!!(r&&r.autohide)},l=Xde(this.inputField.value,this.config.dateDelimiter);qye(this,l,i)}}},{key:"refresh",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r&&typeof r!="string"&&(i=r,r=void 0);var l;r==="picker"?l=2:r==="input"?l=1:l=3,vJ(this,l,!i)}},{key:"enterEditMode",value:function(){this.inline||!this.picker.active||this.editMode||(this.editMode=!0,this.inputField.classList.add("in-edit","border-blue-700","!border-primary-700"))}},{key:"exitEditMode",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(!(this.inline||!this.editMode)){var i=Object.assign({update:!1},r);delete this.editMode,this.inputField.classList.remove("in-edit","border-blue-700","!border-primary-700"),i.update&&this.update(i)}}}],[{key:"formatDate",value:function(r,i,l){return b5(r,i,l&&sU[l]||sU.en)}},{key:"parseDate",value:function(r,i,l){return v5(r,i,l&&sU[l]||sU.en)}},{key:"locales",get:function(){return sU}}])})();function Kye(e){var n=Object.assign({},e);return delete n.inputs,delete n.allowOneSidedRange,delete n.maxNumberOfDates,n}function Zye(e,n,r,i){dve(e,[[r,"changeDate",n]]),new iY(r,i,e)}function rU(e,n){if(!e._updating){e._updating=!0;var r=n.target;if(r.datepicker!==void 0){var i=e.datepickers,l={render:!1},f=e.inputs.indexOf(r),h=f===0?1:0,v=i[f].dates[0],y=i[h].dates[0];v!==void 0&&y!==void 0?f===0&&v>y?(i[0].setDate(y,l),i[1].setDate(v,l)):f===1&&v<y&&(i[0].setDate(v,l),i[1].setDate(y,l)):e.allowOneSidedRange||(v!==void 0||y!==void 0)&&(l.clear=!0,i[h].setDate(i[f].dates,l)),i[0].picker.update().render(),i[1].picker.update().render(),delete e._updating}}}var rfe=(function(){function e(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};q2(this,e);var i=Array.isArray(r.inputs)?r.inputs:Array.from(n.querySelectorAll("input"));if(!(i.length<2)){n.rangepicker=this,this.element=n,this.inputs=i.slice(0,2),this.allowOneSidedRange=!!r.allowOneSidedRange;var l=rU.bind(null,this),f=Kye(r),h=[];Object.defineProperty(this,"datepickers",{get:function(){return h}}),Zye(this,l,this.inputs[0],f),Zye(this,l,this.inputs[1],f),Object.freeze(h),h[0].dates.length>0?rU(this,{target:this.inputs[0]}):h[1].dates.length>0&&rU(this,{target:this.inputs[1]})}}return K2(e,[{key:"dates",get:function(){return this.datepickers.length===2?[this.datepickers[0].dates[0],this.datepickers[1].dates[0]]:void 0}},{key:"setOptions",value:function(r){this.allowOneSidedRange=!!r.allowOneSidedRange;var i=Kye(r);this.datepickers[0].setOptions(i),this.datepickers[1].setOptions(i)}},{key:"destroy",value:function(){this.datepickers[0].destroy(),this.datepickers[1].destroy(),HOe(this),delete this.element.rangepicker}},{key:"getDates",value:function(){var r=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,l=i?function(f){return b5(f,i,r.datepickers[0].config.locale)}:function(f){return new Date(f)};return this.dates.map(function(f){return f===void 0?f:l(f)})}},{key:"setDates",value:function(r,i){var l=rv(this.datepickers,2),f=l[0],h=l[1],v=this.dates;this._updating=!0,f.setDate(r),h.setDate(i),delete this._updating,h.dates[0]!==v[1]?rU(this,{target:this.inputs[1]}):f.dates[0]!==v[0]&&rU(this,{target:this.inputs[0]})}}])})(),bJ=function(){return bJ=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},bJ.apply(this,arguments)},nb={defaultDatepickerId:null,autohide:!1,format:"mm/dd/yyyy",maxDate:null,minDate:null,orientation:"bottom",buttons:!1,autoSelectToday:0,title:null,language:"en",rangePicker:!1,onShow:function(){},onHide:function(){}},g3e={id:null,override:!0},qOe=(function(){function e(n,r,i){n===void 0&&(n=null),r===void 0&&(r=nb),i===void 0&&(i=g3e),this._instanceId=i.id?i.id:n.id,this._datepickerEl=n,this._datepickerInstance=null,this._options=bJ(bJ({},nb),r),this._initialized=!1,this.init(),ri.addInstance("Datepicker",this,this._instanceId,i.override)}return e.prototype.init=function(){this._datepickerEl&&!this._initialized&&(this._options.rangePicker?this._datepickerInstance=new rfe(this._datepickerEl,this._getDatepickerOptions(this._options)):this._datepickerInstance=new iY(this._datepickerEl,this._getDatepickerOptions(this._options)),this._initialized=!0)},e.prototype.destroy=function(){this._initialized&&(this._initialized=!1,this._datepickerInstance.destroy())},e.prototype.removeInstance=function(){this.destroy(),ri.removeInstance("Datepicker",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype.getDatepickerInstance=function(){return this._datepickerInstance},e.prototype.getDate=function(){if(this._options.rangePicker&&this._datepickerInstance instanceof rfe)return this._datepickerInstance.getDates();if(!this._options.rangePicker&&this._datepickerInstance instanceof iY)return this._datepickerInstance.getDate()},e.prototype.setDate=function(n){if(this._options.rangePicker&&this._datepickerInstance instanceof rfe)return this._datepickerInstance.setDates(n);if(!this._options.rangePicker&&this._datepickerInstance instanceof iY)return this._datepickerInstance.setDate(n)},e.prototype.show=function(){this._datepickerInstance.show(),this._options.onShow(this)},e.prototype.hide=function(){this._datepickerInstance.hide(),this._options.onHide(this)},e.prototype._getDatepickerOptions=function(n){var r={};return n.buttons&&(r.todayBtn=!0,r.clearBtn=!0,n.autoSelectToday&&(r.todayBtnMode=1)),n.autohide&&(r.autohide=!0),n.format&&(r.format=n.format),n.maxDate&&(r.maxDate=n.maxDate),n.minDate&&(r.minDate=n.minDate),n.orientation&&(r.orientation=n.orientation),n.title&&(r.title=n.title),n.language&&(r.language=n.language),r},e.prototype.updateOnShow=function(n){this._options.onShow=n},e.prototype.updateOnHide=function(n){this._options.onHide=n},e})();function pve(){document.querySelectorAll("[datepicker], [inline-datepicker], [date-rangepicker]").forEach(function(e){if(e){var n=e.hasAttribute("datepicker-buttons"),r=e.hasAttribute("datepicker-autoselect-today"),i=e.hasAttribute("datepicker-autohide"),l=e.getAttribute("datepicker-format"),f=e.getAttribute("datepicker-max-date"),h=e.getAttribute("datepicker-min-date"),v=e.getAttribute("datepicker-orientation"),y=e.getAttribute("datepicker-title"),_=e.getAttribute("datepicker-language"),A=e.hasAttribute("date-rangepicker");new qOe(e,{buttons:n||nb.buttons,autoSelectToday:r||nb.autoSelectToday,autohide:i||nb.autohide,format:l||nb.format,maxDate:f||nb.maxDate,minDate:h||nb.minDate,orientation:v||nb.orientation,title:y||nb.title,language:_||nb.language,rangePicker:A||nb.rangePicker})}else console.error("The datepicker element does not exist. Please check the datepicker attribute.")})}typeof window<"u"&&(window.Datepicker=qOe,window.initDatepickers=pve);function v3e(){Hge(),Fge(),$ge(),Uge(),Jge(),Xge(),Qge(),eve(),tve(),nve(),ove(),sve(),rve(),pve()}typeof window<"u"&&(window.initFlowbite=v3e);var b3e=new dLe("load",[Hge,Fge,$ge,Uge,Jge,Xge,Qge,eve,tve,nve,ove,sve,rve,pve]);b3e.init();/*! License details at fancyapps.com/license */const df=e=>typeof e=="string";/*! License details at fancyapps.com/license */const IP=e=>e&&e!==null&&e instanceof Element&&"nodeType"in e;/*! License details at fancyapps.com/license */const y3e=function(e){if(!(e&&e instanceof Element&&e.offsetParent))return!1;const n=e.scrollHeight>e.clientHeight,r=window.getComputedStyle(e).overflowY,i=r.indexOf("hidden")!==-1,l=r.indexOf("visible")!==-1;return n&&!i&&!l},g2=function(e,n=void 0){return!e||e===document.body||n&&e===n?null:y3e(e)?e:g2(e.parentElement,n)};/*! License details at fancyapps.com/license */const zA=function(e){var n=new DOMParser().parseFromString(e,"text/html").body;if(n.childElementCount>1){for(var r=document.createElement("div");n.firstChild;)r.appendChild(n.firstChild);return r}let i=n.firstChild;return!i||i instanceof HTMLElement?i:((r=document.createElement("div")).appendChild(i),r)};/*! License details at fancyapps.com/license */const $i=function(e=0,n=0,r=0){return Math.max(Math.min(n,r),e)};/*! License details at fancyapps.com/license */const th=e=>typeof e=="object"&&e!==null&&e.constructor===Object&&Object.prototype.toString.call(e)==="[object Object]";/*! License details at fancyapps.com/license */function Yye(e){return th(e)||Array.isArray(e)}function y5(e,n){const r=Object.keys(e),i=Object.keys(n);return r.length===i.length&&r.every((l=>{const f=e[l],h=n[l];return typeof f=="function"?`${f}`==`${h}`:Yye(f)&&Yye(h)?y5(f,h):f===h}))}/*! License details at fancyapps.com/license */const KOe=function(e){for(const n of yJ)n.getState()===Zh.Running&&n.tick(ife?e-ife:0);ife=e,jP=window.requestAnimationFrame(KOe)};var Zh,hA,RP;(function(e){e[e.Initializing=0]="Initializing",e[e.Running=1]="Running",e[e.Paused=2]="Paused",e[e.Completed=3]="Completed",e[e.Destroyed=4]="Destroyed"})(Zh||(Zh={})),(function(e){e[e.Spring=0]="Spring",e[e.Ease=1]="Ease"})(hA||(hA={})),(function(e){e[e.Loop=0]="Loop",e[e.Reverse=1]="Reverse"})(RP||(RP={}));const yJ=new Set;let jP=null,ife=0;function WA(){let e=Zh.Initializing,n=hA.Ease,r=0,i=0,l=WA.Easings.Linear,f=500,h=0,v=0,y=0,_=0,A=1/0,R=.01,k=.01,N=!1,L={},B=null,H={},q={},Y={},K=0,se=0,ie=RP.Loop,le=WA.Easings.Linear;const M=new Map;function we(Ye,...Ke){for(const Ze of M.get(Ye)||[])Ze(...Ke)}function Ne(Ye){return i=0,Ye?B=setTimeout((()=>{De()}),Ye):De(),me}function De(){e=Zh.Running,we("start",H,q)}function be(){if(e=Zh.Completed,Y={},we("end",H),e===Zh.Completed)if(r<K){if(r++,ie===RP.Reverse){const Ye=Object.assign({},L);L=Object.assign({},q),q=Ye}Ne(se)}else r=0;return me}const me={getState:function(){return e},easing:function(Ye){return l=Ye,n=hA.Ease,Y={},me},duration:function(Ye){return f=Ye,me},spring:function(Ye={}){n=hA.Spring;const Ke={velocity:0,mass:1,tension:170,friction:26,restDelta:.1,restSpeed:.1,maxSpeed:1/0,clamp:!0},{velocity:Ze,mass:z,tension:$t,friction:Be,restDelta:at,restSpeed:lt,maxSpeed:$e,clamp:qt}=Object.assign(Object.assign({},Ke),Ye);return h=Ze,v=z,y=$t,_=Be,k=at,R=lt,A=$e,N=qt,Y={},me},isRunning:function(){return e===Zh.Running},isSpring:function(){return n===hA.Spring},from:function(Ye){return H=Object.assign({},Ye),me},to:function(Ye){return q=Ye,me},repeat:function(Ye,Ke=0,Ze=RP.Loop,z){return K=Ye,se=Ke,ie=Ze,le=z||l,me},on:function(Ye,Ke){var Ze,z;return Ze=Ye,z=Ke,M.set(Ze,[...M.get(Ze)||[],z]),me},off:function(Ye,Ke){var Ze,z;return Ze=Ye,z=Ke,M.has(Ze)&&M.set(Ze,M.get(Ze).filter(($t=>$t!==z))),me},start:function(Ye){return e=Zh.Initializing,L=Object.assign({},H),y5(L,q)||(yJ.add(this),jP||(jP=window.requestAnimationFrame(KOe)),Ne(Ye)),me},pause:function(){return B&&(clearTimeout(B),B=null),e===Zh.Running&&(e=Zh.Paused,we("pause",H)),me},end:be,tick:function(Ye){Ye>50&&(Ye=50),i+=Ye;let Ke=0,Ze=!1;if(e!==Zh.Running)return me;if(n===hA.Ease){Ke=$i(0,i/f,1),Ze=Ke===1;const $t=ie===RP.Reverse?le:l;for(const Be in H)H[Be]=L[Be]+(q[Be]-L[Be])*$t(Ke)}if(n===hA.Spring){const $t=.001*Ye;let Be=0;for(const at in H){const lt=q[at];let $e=H[at];if(typeof lt!="number"||isNaN(lt)||typeof $e!="number"||isNaN($e))continue;if(Math.abs(lt-$e)<=k){H[at]=lt,Y[at]=0;continue}Y[at]||(typeof h=="object"&&typeof h[at]=="number"?Y[at]=h[at]:Y[at]=typeof h=="number"?h:0);let qt=Y[at];qt=$i(-1*Math.abs(A),qt,Math.abs(A));const io=qt*v*_;qt+=(($e>lt?-1:1)*(Math.abs(lt-$e)*y)-io)/v*$t,$e+=qt*$t;const En=H[at]>lt?$e<lt:$e>lt;let Zn=Math.abs(qt)<R&&Math.abs(lt-$e)<=k;N&&En&&(Zn=!0),Zn?($e=lt,qt=0):Be++,H[at]=$e,Y[at]=qt}Ze=!Be}const z=Object.assign({},q);return we("step",H,L,q,Ke),Ze&&e===Zh.Running&&y5(q,z)&&(e=Zh.Completed,be()),me},getStartValues:function(){return L},getCurrentValues:function(){return H},getCurrentVelocities:function(){return Y},getEndValues:function(){return q},destroy:function(){e=Zh.Destroyed,B&&(clearTimeout(B),B=null),L=H=q={},yJ.delete(this)}};return me}WA.destroy=()=>{for(const e of yJ)e.destroy();jP&&(cancelAnimationFrame(jP),jP=null)},WA.Easings={Linear:function(e){return e},EaseIn:function(e){return e===0?0:Math.pow(2,10*e-10)},EaseOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},EaseInOut:function(e){return e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}};/*! License details at fancyapps.com/license */function afe(e){const n=[],r=typeof TouchEvent<"u"&&e instanceof TouchEvent?e.touches:e instanceof MouseEvent&&e.type!=="mouseup"?[e]:[];for(const i of r)n.push({x:i.clientX,y:i.clientY,ts:Date.now()});return n}function ZOe(e){const n=[],r=typeof TouchEvent<"u"&&e instanceof TouchEvent?e.changedTouches:e instanceof MouseEvent?[e]:[];for(const i of r)n.push({x:i.clientX,y:i.clientY,ts:Date.now()});return n}function iA(e){const n=e[0],r=e[1]||n;return{x:(n.x+r.x)/2,y:(n.y+r.y)/2,ts:r.ts}}function vZ(e){const n=e[0],r=e[1]||e[0];return n&&r?-1*Math.sqrt((r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y)):0}const Jye=e=>{e.cancelable&&e.preventDefault()},qw={passive:!1},S3e={panThreshold:5,swipeThreshold:3,ignore:["textarea","input","select","[contenteditable]","[data-selectable]","[data-draggable]"]};let bZ=!1,IU=!0;const hL=(e,n)=>{let r,i,l,f=Object.assign(Object.assign({},S3e),n),h=[],v=[],y=[],_=!1,A=!1,R=!1,k=0,N=0,L=0,B=0,H=0,q=0,Y=0,K=0,se=0,ie=[],le=0,M=0;const we=new Map;function Ne(at){const lt=vZ(v),$e=vZ(y),qt=lt&&$e?lt/$e:0,io=Math.abs(Y)>Math.abs(K)?Y:K,En={srcEvent:r,isPanRecognized:_,isSwipeRecognized:A,firstTouch:h,previousTouch:y,currentTouch:v,deltaX:L,deltaY:B,offsetX:H,offsetY:q,velocityX:Y,velocityY:K,velocity:io,angle:se,axis:l,scale:qt,center:i};for(const Zn of we.get(at)||[])Zn(En)}function De(at){const lt=Date.now();ie=ie.filter(($e=>!$e.ts||$e.ts>lt-100)),at&&ie.push(at)}function be(){if(Y=0,K=0,ie.length>3){const at=ie[0],lt=ie[ie.length-1];if(at&&lt){const $e=lt.x-at.x,qt=lt.y-at.y,io=at.ts&&lt.ts?lt.ts-at.ts:0;io>0&&(Y=Math.abs($e)>3?$e/(io/30):0,K=Math.abs(qt)>3?qt/(io/30):0)}}}function me(at){if(at instanceof MouseEvent){if(bZ)return}else bZ=!0;const lt=at.composedPath()[0],$e=f.ignore.join(",");if(lt.matches($e)||lt.closest($e)||typeof MouseEvent<"u"&&at instanceof MouseEvent&&(!at.buttons||at.button!==0))return;at instanceof MouseEvent&&Jye(at);const qt=Date.now(),io=qt-(k||qt);R=io>0&&io<=250,k=qt,clearTimeout(le),r=at,at instanceof MouseEvent&&(window.addEventListener("mousemove",Ye),window.addEventListener("mouseup",Ke)),window.addEventListener("blur",Ze),v=afe(at),h=[...v],y=[],N=v.length,i=iA(v),N===1&&(_=!1,A=!1),N&&De(iA(v)),Ne("start")}function Ye(at){var lt;if(!h.length||at.defaultPrevented)return;r=at,y=[...v],v=afe(at),N=v.length,i=iA(v);const $e=i,qt=iA(y);if(L=$e.x-qt.x,B=$e.y-qt.y,De($e),be(),Ne("move"),v.length>1){const io=vZ(v),En=vZ(y);Math.abs(io-En)>=.1&&Ne("pinch")}if(!_&&h.length){const io=iA(h);H=$e.x-io.x,q=$e.y-io.y,_=Math.abs(H)>f.panThreshold||Math.abs(q)>f.panThreshold,_&&(IU=!1,clearTimeout(M),M=0,se=Math.abs(180*Math.atan2(q,H)/Math.PI),l=se>45&&se<135?"y":"x",h=[...v],y=[...v],(lt=window.getSelection())===null||lt===void 0||lt.removeAllRanges(),Ne("panstart"))}_&&(L||B)&&Ne("pan")}function Ke(at){if(r=at,!h.length)return;const lt=afe(at),$e=ZOe(at);if(N=lt.length,i=iA($e),$e.length&&De(iA($e)),be(),y=[...v],v=[...lt],h=[...lt],lt.length>0)Ne("end"),_=!1,A=!1,ie=[];else{const qt=f.swipeThreshold;(Math.abs(Y)>qt||Math.abs(K)>qt)&&(A=!0),_&&Ne("panend"),A&&Ne("swipe"),_||A||(Ne("tap"),R?Ne("doubleTap"):le=setTimeout((function(){Ne("singleTap")}),250)),Ne("end"),z()}}function Ze(){clearTimeout(le),z(),_&&Ne("panend"),Ne("end")}function z(){bZ=!1,_=!1,A=!1,R=!1,N=0,ie=[],v=[],y=[],h=[],L=0,B=0,H=0,q=0,Y=0,K=0,se=0,l=void 0,window.removeEventListener("mousemove",Ye),window.removeEventListener("mouseup",Ke),window.removeEventListener("blur",Ze),IU||M||(M=setTimeout((()=>{IU=!0,M=0}),100))}function $t(at){const lt=at.target;bZ=!1,lt&&!at.defaultPrevented&&(IU||(Jye(at),at.stopPropagation()))}const Be={init:function(){if(e)return e.addEventListener("click",$t,qw),e.addEventListener("mousedown",me,qw),e.addEventListener("touchstart",me,qw),e.addEventListener("touchmove",Ye,qw),e.addEventListener("touchend",Ke),e.addEventListener("touchcancel",Ke),Be},on:function(at,lt){return(function($e,qt){we.set($e,[...we.get($e)||[],qt])})(at,lt),Be},off:function(at,lt){return we.has(at)&&we.set(at,we.get(at).filter(($e=>$e!==lt))),Be},isPointerDown:()=>N>0,destroy:function(){clearTimeout(le),clearTimeout(M),M=0,e&&(e.removeEventListener("click",$t,qw),e.removeEventListener("mousedown",me,qw),e.removeEventListener("touchstart",me,qw),e.removeEventListener("touchmove",Ye,qw),e.removeEventListener("touchend",Ke),e.removeEventListener("touchcancel",Ke)),e=null,z()}};return Be};hL.isClickAllowed=()=>IU;/*! License details at fancyapps.com/license */const hve={IMAGE_ERROR:"This image couldn't be loaded. <br /> Please try again later.",MOVE_UP:"Move up",MOVE_DOWN:"Move down",MOVE_LEFT:"Move left",MOVE_RIGHT:"Move right",ZOOM_IN:"Zoom in",ZOOM_OUT:"Zoom out",TOGGLE_FULL:"Toggle zoom level",TOGGLE_1TO1:"Toggle zoom level",ITERATE_ZOOM:"Toggle zoom level",ROTATE_CCW:"Rotate counterclockwise",ROTATE_CW:"Rotate clockwise",FLIP_X:"Flip horizontally",FLIP_Y:"Flip vertically",RESET:"Reset",TOGGLE_FS:"Toggle fullscreen"};/*! License details at fancyapps.com/license */const oi=(e,n="")=>{e&&e.classList&&n.split(" ").forEach((r=>{r&&e.classList.add(r)}))};/*! License details at fancyapps.com/license */const T1=(e,n="")=>{e&&e.classList&&n.split(" ").forEach((r=>{r&&e.classList.remove(r)}))};/*! License details at fancyapps.com/license */const Kp=(e,n="",r)=>{e&&e.classList&&n.split(" ").forEach((i=>{i&&e.classList.toggle(i,r||!1)}))};/*! License details at fancyapps.com/license */const OR=e=>{e.cancelable&&e.preventDefault()},zh=(e,n=1e4)=>(e=parseFloat(e+"")||0,Math.round((e+Number.EPSILON)*n)/n),v1=e=>e instanceof HTMLImageElement;var Ss,Xye;(function(e){e.Reset="reset",e.Zoom="zoom",e.ZoomIn="zoomIn",e.ZoomOut="zoomOut",e.ZoomTo="zoomTo",e.ToggleCover="toggleCover",e.ToggleFull="toggleFull",e.ToggleMax="toggleMax",e.IterateZoom="iterateZoom",e.Pan="pan",e.Swipe="swipe",e.Move="move",e.MoveLeft="moveLeft",e.MoveRight="moveRight",e.MoveUp="moveUp",e.MoveDown="moveDown",e.RotateCCW="rotateCCW",e.RotateCW="rotateCW",e.FlipX="flipX",e.FlipY="flipY",e.ToggleFS="toggleFS"})(Ss||(Ss={})),(function(e){e.Cover="cover",e.Full="full",e.Max="max"})(Xye||(Xye={}));const H0={x:0,y:0,scale:1,angle:0,flipX:1,flipY:1},Jpe={bounds:!0,classes:{container:"f-panzoom",wrapper:"f-panzoom__wrapper",content:"f-panzoom__content",viewport:"f-panzoom__viewport"},clickAction:Ss.ToggleFull,dblClickAction:!1,gestures:{},height:"auto",l10n:hve,maxScale:4,minScale:1,mouseMoveFactor:1,panMode:"drag",protected:!1,singleClickAction:!1,spinnerTpl:'<div class="f-spinner"></div>',wheelAction:Ss.Zoom,width:"auto"};let yZ,Qye=0,e1e=0,SZ=0;const Xpe=(e,n={},r={})=>{let i,l,f,h,v,y,_,A,R=0,k=Object.assign(Object.assign({},Jpe),n),N={},L=Object.assign({},H0),B=Object.assign({},H0);const H=[];function q(Oe){let pt=k[Oe];return pt&&typeof pt=="function"?pt(Ot):pt}function Y(){return e&&e.parentElement&&i&&R===3}const K=new Map;function se(Oe,...pt){const Bt=[...K.get(Oe)||[]];k.on&&Bt.push(k.on[Oe]);for(const tn of Bt)tn&&tn instanceof Function&&tn(Ot,...pt);Oe!=="*"&&se("*",Oe,...pt)}function ie(Oe){if(!Y())return;const pt=Oe.target;if(g2(pt))return;const Bt=Date.now(),tn=[-Oe.deltaX||0,-Oe.deltaY||0,-Oe.detail||0].reduce((function(Wo,Jn){return Math.abs(Jn)>Math.abs(Wo)?Jn:Wo})),ht=$i(-1,tn,1);se("wheel",Oe,ht);const gt=q("wheelAction");if(!gt||Oe.defaultPrevented)return;const No=B.scale;let Ko=No*(ht>0?1.5:.5);if(gt===Ss.Zoom){const Wo=Math.abs(Oe.deltaY)<100&&Math.abs(Oe.deltaX)<100;if(Bt-e1e<(Wo?200:45))return void OR(Oe);e1e=Bt;const Jn=$t(),ys=$e();if(zh(Ko)<zh(Jn)&&zh(No)<=zh(Jn)?(SZ+=Math.abs(ht),Ko=Jn):zh(Ko)>zh(ys)&&zh(No)>=zh(ys)?(SZ+=Math.abs(ht),Ko=ys):(SZ=0,Ko=$i(Jn,Ko,ys)),SZ>7)return}switch(OR(Oe),gt){case Ss.Pan:Zn(gt,{srcEvent:Oe,deltaX:2*-Oe.deltaX,deltaY:2*-Oe.deltaY});break;case Ss.Zoom:Zn(Ss.ZoomTo,{srcEvent:Oe,scale:Ko,center:{x:Oe.clientX,y:Oe.clientY}});break;default:Zn(gt,{srcEvent:Oe})}}function le(Oe){var pt,Bt;const tn=Oe.composedPath()[0];if(!hL.isClickAllowed()||!IP(tn)||Oe.defaultPrevented||!(e!=null&&e.contains(tn))||tn.hasAttribute("disabled")||tn.hasAttribute("aria-disabled"))return;const ht=tn.closest("[data-panzoom-action]"),gt=(pt=ht==null?void 0:ht.dataset)===null||pt===void 0?void 0:pt.panzoomAction,No=((Bt=ht==null?void 0:ht.dataset)===null||Bt===void 0?void 0:Bt.panzoomValue)||"";if(gt){switch(OR(Oe),gt){case Ss.ZoomTo:case Ss.ZoomIn:case Ss.ZoomOut:Zn(gt,{scale:parseFloat(No||"")||void 0});break;case Ss.MoveLeft:case Ss.MoveRight:Zn(gt,{deltaX:parseFloat(No||"")||void 0});break;case Ss.MoveUp:case Ss.MoveDown:Zn(gt,{deltaY:parseFloat(No||"")||void 0});break;case Ss.ToggleFS:Ue();break;default:Zn(gt)}return}if(!(i!=null&&i.contains(tn)))return;const Ko={srcEvent:Oe};if(Zn(q("clickAction"),Ko),q("dblClickAction")){const Wo=Date.now(),Jn=Wo-(Qye||Wo);Qye=Wo,Jn>0&&Jn<=250?(yZ&&(clearTimeout(yZ),yZ=void 0),Zn(q("dblClickAction"),Ko)):yZ=setTimeout((()=>{Zn(q("singleClickAction"),Ko)}),250)}}function M(Oe){if(A=Oe,!Y()||!Ke()||L.scale<=1||B.scale<=1||((i==null?void 0:i.dataset.animationName)||"").indexOf("zoom")>-1)return;const pt=Ze(B.scale);if(!pt)return;const{x:Bt,y:tn}=pt;Zn(Ss.Pan,{deltaX:Bt-B.x,deltaY:tn-B.y})}function we(){var Oe;e&&(T1(e,"is-loading"),(Oe=e.querySelector(".f-spinner"))===null||Oe===void 0||Oe.remove())}function Ne(){if(!e||!l)return;if(we(),v1(l)&&(!l.complete||!l.naturalWidth))return R=2,i==null||i.classList.add("has-error"),void se("error");se("loaded");const{width:Oe,height:pt}=me();v1(l)&&(l.setAttribute("width",Oe+""),l.setAttribute("height",pt+"")),i&&(T1(i,"has-error"),v1(l)&&(i.setAttribute("width",Oe+""),i.setAttribute("height",pt+""),i.style.aspectRatio=`${Oe/pt||""}`)),y=WA().on("start",((tn,ht)=>{ht.angle!==void 0&&(ht.angle=90*Math.round(ht.angle/90)),ht.flipX!==void 0&&(ht.flipX=ht.flipX>0?1:-1),ht.flipY!==void 0&&(ht.flipY=ht.flipY>0?1:-1),B=Object.assign(Object.assign({},H0),ht),En(),se("animationStart")})).on("pause",(tn=>{B=Object.assign(Object.assign({},H0),tn)})).on("step",(tn=>{if(!Y())return void(y==null||y.end());if(L=Object.assign(Object.assign({},H0),tn),Ke()||!q("bounds")||bt()||B.scale>L.scale||B.scale<Be())return void Et();const ht=qt(B.scale);let gt=!1,No=!1,Ko=!1,Wo=!1;L.x<ht.x[0]&&(gt=!0),L.x>ht.x[1]&&(No=!0),L.y<ht.y[0]&&(Wo=!0),L.y>ht.y[1]&&(Ko=!0);let Jn=!1,ys=!1,ps=!1,es=!1;B.x<ht.x[0]&&(Jn=!0),B.x>ht.x[1]&&(ys=!0),B.y<ht.y[0]&&(es=!0),B.y>ht.y[1]&&(ps=!0);let is=!1;(No&&ys||gt&&Jn)&&(B.x=$i(ht.x[0],B.x,ht.x[1]),is=!0),(Ko&&ps||Wo&&es)&&(B.y=$i(ht.y[0],B.y,ht.y[1]),is=!0),is&&y&&y.spring({tension:94,friction:17,maxSpeed:555*B.scale,restDelta:.1,restSpeed:.1,velocity:y.getCurrentVelocities()}).from(L).to(B).start(),Et()})).on("end",(()=>{io(),y!=null&&y.isRunning()||(En(),se("animationEnd"))})),(function(){const tn=q("gestures");tn&&h&&l&&(v=hL(h,tn).on("start",(ht=>{if(!y)return;const gt=ht.srcEvent;Ke()||((L.scale>1||ht.currentTouch.length>1)&&(gt==null||gt.stopPropagation(),y.pause()),ht.currentTouch.length===1&&se("touchStart"))})).on("move",(ht=>{var gt;Ke()||(B.scale!==1||ht.currentTouch.length>1)&&(OR(ht.srcEvent),(gt=ht.srcEvent)===null||gt===void 0||gt.stopPropagation())})).on("pan",(ht=>{if(!Y()||Ke())return;const gt=ht.srcEvent;(B.scale!==1||ht.currentTouch.length>1)&&(OR(gt),Zn(Ss.Pan,ht))})).on("swipe",(ht=>{Y()&&!Ke()&&B.scale>1&&Zn(Ss.Swipe,ht)})).on("tap",(ht=>{se("click",ht)})).on("singleTap",(ht=>{se("singleClick",ht)})).on("doubleTap",(ht=>{se("dblClick",ht)})).on("pinch",(ht=>{Ke()||(ht.scale>Be()?Zn(Ss.ZoomIn,ht):ht.scale<Be()?Zn(Ss.ZoomOut,ht):Zn(Ss.Pan,ht))})).on("end",(ht=>{Ke()||(ht.currentTouch.length?(ht.srcEvent.stopPropagation(),OR(ht.srcEvent),y==null||y.end()):(En(),io(),se("touchEnd")))})).init())})(),h&&(h.addEventListener("wheel",ie,{passive:!1}),H.push((()=>{h==null||h.removeEventListener("wheel",ie,{passive:!1})}))),e==null||e.addEventListener("click",le),document==null||document.addEventListener("mousemove",M),H.push((()=>{e==null||e.removeEventListener("click",le),document==null||document.removeEventListener("mousemove",M)}));const Bt=De();L=Object.assign({},Bt),B=Object.assign({},Bt),R=3,Et(),En(),se("ready"),requestAnimationFrame((()=>{we(),h&&(h.style.visibility="")}))}function De(){const Oe=Object.assign({},q("startPos")||{});let pt=Oe.scale,Bt=1;Bt=typeof pt=="string"?z(pt):typeof pt=="number"?pt:Be();const tn=Object.assign(Object.assign(Object.assign({},H0),Oe),{scale:Bt}),ht=Ke()?Ze(Bt):void 0;if(ht){const{x:gt,y:No}=ht;tn.x=gt,tn.y=No}return tn}function be(){const Oe={top:0,left:0,width:0,height:0};if(i){const pt=i.getBoundingClientRect();B.angle%180==90?(Oe.top=pt.top+.5*pt.height-.5*pt.width,Oe.left=pt.left+.5*pt.width-.5*pt.height,Oe.width=pt.height,Oe.height=pt.width):(Oe.top=pt.top,Oe.left=pt.left,Oe.width=pt.width,Oe.height=pt.height)}return Oe}function me(){let Oe=q("width"),pt=q("height");if(l&&Oe==="auto"){const Bt=l.getAttribute("width");Oe=Bt?parseFloat(Bt+""):l.dataset.width!==void 0?parseFloat(l.dataset.width+""):v1(h)?h.naturalWidth:v1(l)?l.naturalWidth:l.getBoundingClientRect().width}else Oe=df(Oe)?parseFloat(Oe):Oe;if(l&&pt==="auto"){const Bt=l.getAttribute("height");pt=Bt?parseFloat(Bt+""):l.dataset.height!==void 0?parseFloat(l.dataset.height+""):v1(h)?h.naturalHeight:v1(l)?l.naturalHeight:l.getBoundingClientRect().height}else pt=df(pt)?parseFloat(pt):pt;return{width:Oe,height:pt}}function Ye(){const Oe=be();return{width:Oe.width,height:Oe.height}}function Ke(){return q("panMode")==="mousemove"&&matchMedia("(hover: hover)").matches}function Ze(Oe){const pt=A||q("event"),Bt=i==null?void 0:i.getBoundingClientRect();if(!pt||!Bt||Oe<=1)return{x:0,y:0};const tn=(pt.clientX||0)-Bt.left,ht=(pt.clientY||0)-Bt.top,{width:gt,height:No}=Ye(),Ko=qt(Oe);if(Oe>1){const es=q("mouseMoveFactor");es>1&&(Oe*=es)}let Wo=gt*Oe,Jn=No*Oe,ys=.5*(Wo-gt)-tn/gt*100/100*(Wo-gt),ps=.5*(Jn-No)-ht/No*100/100*(Jn-No);return ys=$i(Ko.x[0],ys,Ko.x[1]),ps=$i(Ko.y[0],ps,Ko.y[1]),{x:ys,y:ps}}function z(Oe="base"){if(!e)return 1;const pt=e.getBoundingClientRect(),Bt=be(),{width:tn,height:ht}=me(),gt=ys=>{if(typeof ys=="number")return ys;switch(ys){case"min":case"base":return 1;case"cover":return Math.max(pt.height/Bt.height,pt.width/Bt.width)||1;case"full":case"max":{const ps=B.angle%180==90?ht:tn;return ps&&Bt.width?ps/Bt.width:1}}},No=q("minScale"),Ko=q("maxScale"),Wo=Math.min(gt("full"),gt(No)),Jn=typeof Ko=="number"?gt("full")*Ko:Math.min(gt("full"),gt(Ko));switch(Oe){case"min":return Wo;case"base":return $i(Wo,1,Jn);case"cover":return gt("cover");case"full":return Math.min(Jn,gt("full"));case"max":return Jn}}function $t(){return z("min")}function Be(){return z("base")}function at(){return z("cover")}function lt(){return z("full")}function $e(){return z("max")}function qt(Oe){const pt={x:[0,0],y:[0,0]},Bt=e==null?void 0:e.getBoundingClientRect();if(!Bt)return pt;const tn=be(),ht=Bt.width,gt=Bt.height;let No=tn.width,Ko=tn.height,Wo=Oe=Oe===void 0?B.scale:Oe,Jn=Oe;if(Ke()&&Oe>1){const ys=q("mouseMoveFactor");ys>1&&(No*Oe>ht+.01&&(Wo*=ys),Ko*Oe>gt+.01&&(Jn*=ys))}return No*=Wo,Ko*=Jn,Oe>1&&(No>ht&&(pt.x[0]=.5*(ht-No),pt.x[1]=.5*(No-ht)),pt.x[0]-=.5*(tn.left-Bt.left),pt.x[1]-=.5*(tn.left-Bt.left),pt.x[0]-=.5*(tn.left+tn.width-Bt.right),pt.x[1]-=.5*(tn.left+tn.width-Bt.right),Ko>gt&&(pt.y[0]=.5*(gt-Ko),pt.y[1]=.5*(Ko-gt)),pt.y[0]-=.5*(tn.top-Bt.top),pt.y[1]-=.5*(tn.top-Bt.top),pt.y[0]-=.5*(tn.top+tn.height-Bt.bottom),pt.y[1]-=.5*(tn.top+tn.height-Bt.bottom)),pt}function io(){if(!Y()||!q("bounds")||!y)return;const Oe=$t(),pt=$e(),Bt=$i(Oe,B.scale,pt);if(B.scale<Oe-.01||B.scale>pt+.01)return void Zn(Ss.ZoomTo,{scale:Bt});if(y.isRunning()||bt())return;const tn=qt(Bt);B.x<tn.x[0]||B.x>tn.x[1]||B.y<tn.y[0]||B.y>tn.y[1]?(B.x=$i(tn.x[0],B.x,tn.x[1]),B.y=$i(tn.y[0],B.y,tn.y[1]),y.spring({tension:170,friction:17,restDelta:.001,restSpeed:.001,maxSpeed:1/0,velocity:y.getCurrentVelocities()}),y.from(L).to(B).start()):Et()}function En(Oe){var pt;if(!Y())return;const Bt=Wn(),tn=bt(),ht=Kt(),gt=Ut(),No=ce(),Ko=Hs();Kp(i,"is-fullsize",gt),Kp(i,"is-expanded",ht),Kp(i,"is-dragging",tn),Kp(i,"can-drag",Bt),Kp(i,"will-zoom-in",No),Kp(i,"will-zoom-out",Ko);const Wo=yt(),Jn=Xt(),ys=Fo(),ps=!Y();for(const es of((pt=Oe||e)===null||pt===void 0?void 0:pt.querySelectorAll("[data-panzoom-action]"))||[]){const is=es.dataset.panzoomAction;let st=!1;if(ps)st=!0;else switch(is){case Ss.ZoomIn:Wo||(st=!0);break;case Ss.ZoomOut:ys||(st=!0);break;case Ss.ToggleFull:{Jn||ys||(st=!0);const ft=es.querySelector("g");ft&&(ft.style.display=gt&&!st?"none":"");break}case Ss.IterateZoom:{Wo||ys||(st=!0);const ft=es.querySelector("g");ft&&(ft.style.display=Wo||st?"":"none");break}case Ss.ToggleCover:case Ss.ToggleMax:Wo||ys||(st=!0)}st?(es.setAttribute("aria-disabled",""),es.setAttribute("tabindex","-1")):(es.removeAttribute("aria-disabled"),es.removeAttribute("tabindex"))}}function Zn(Oe,pt){var Bt;if(!e||!l||!y||Oe===Ss.Swipe&&Math.abs(y.getCurrentVelocities().scale)>.01)return;const tn=Object.assign({},B);let ht=Object.assign({},B),gt=qt(Ke()?tn.scale:L.scale);const No=y.getCurrentVelocities(),Ko=be(),Wo=(((Bt=(pt=pt||{}).currentTouch)===null||Bt===void 0?void 0:Bt.length)||0)>1,Jn=pt.velocityX||0,ys=pt.velocityY||0;let ps=pt.center;!ps&&pt.srcEvent&&(ps=iA(ZOe(pt.srcEvent)));let es=pt.deltaX||0,is=pt.deltaY||0;switch(Oe){case Ss.MoveRight:es=pt.deltaX||100;break;case Ss.MoveLeft:es=pt.deltaX||-100;break;case Ss.MoveUp:is=pt.deltaY||-100;break;case Ss.MoveDown:is=pt.deltaY||100}let st=[];switch(Oe){case Ss.Reset:ht=Object.assign({},H0),ht.scale=Be();break;case Ss.Pan:case Ss.Move:case Ss.MoveLeft:case Ss.MoveRight:case Ss.MoveUp:case Ss.MoveDown:if(bt()){let Dt=1,Nn=1;ht.x<=gt.x[0]&&Jn<=0&&(Dt=Math.max(.01,1-Math.abs(1/Ko.width*Math.abs(ht.x-gt.x[0]))),Dt*=.2),ht.x>=gt.x[1]&&Jn>=0&&(Dt=Math.max(.01,1-Math.abs(1/Ko.width*Math.abs(ht.x-gt.x[1]))),Dt*=.2),ht.y<=gt.y[0]&&ys<=0&&(Nn=Math.max(.01,1-Math.abs(1/Ko.height*Math.abs(ht.y-gt.y[0]))),Nn*=.2),ht.y>=gt.y[1]&&ys>=0&&(Nn=Math.max(.01,1-Math.abs(1/Ko.height*Math.abs(ht.y-gt.y[1]))),Nn*=.2),ht.x+=es*Dt,ht.y+=is*Nn}else ht.x=$i(gt.x[0],ht.x+es,gt.x[1]),ht.y=$i(gt.y[0],ht.y+is,gt.y[1]);break;case Ss.Swipe:const ft=(Dt=0)=>Math.sign(Dt)*Math.pow(Math.abs(Dt),1.5);ht.x+=$i(-1e3,ft(Jn),1e3),ht.y+=$i(-1e3,ft(ys),1e3),ys&&!Jn&&(ht.x=$i(gt.x[0],ht.x,gt.x[1])),!ys&&Jn&&(ht.y=$i(gt.y[0],ht.y,gt.y[1])),No.x=Jn,No.y=ys;break;case Ss.ZoomTo:ht.scale=pt.scale||1;break;case Ss.ZoomIn:ht.scale=ht.scale*(pt.scale||2),Wo||(ht.scale=Math.min(ht.scale,$e()));break;case Ss.ZoomOut:ht.scale=ht.scale*(pt.scale||.5),Wo||(ht.scale=Math.max(ht.scale,$t()));break;case Ss.ToggleCover:st=[Be(),at()];break;case Ss.ToggleFull:st=[Be(),lt()];break;case Ss.ToggleMax:st=[Be(),$e()];break;case Ss.IterateZoom:st=[Be(),lt(),$e()];break;case Ss.Zoom:const It=lt();ht.scale>=It-.05?ht.scale=Be():ht.scale=Math.min(It,ht.scale*(pt.scale||2));break;case Ss.RotateCW:ht.angle+=90;break;case Ss.RotateCCW:ht.angle-=90;break;case Ss.FlipX:ht.flipX*=-1;break;case Ss.FlipY:ht.flipY*=-1}if(L.angle!==void 0&&Math.abs(L.angle)>=360&&(ht.angle-=360*Math.floor(L.angle/360),L.angle-=360*Math.floor(L.angle/360)),st.length){const ft=st.findIndex((It=>It>ht.scale+1e-4));ht.scale=st[ft]||st[0]}if(Wo&&(ht.scale=$i($t()*(Wo?.8:1),ht.scale,$e()*(Wo?1.6:1))),Ke()){const ft=Ze(ht.scale);if(ft){const{x:It,y:Dt}=ft;ht.x=It,ht.y=Dt}}else if(Math.abs(ht.scale-tn.scale)>1e-4){let ft=0,It=0;if(ps)ft=ps.x,It=ps.y;else{const Vt=e.getBoundingClientRect();ft=Vt.x+.5*Vt.width,It=Vt.y+.5*Vt.height}let Dt=ft-Ko.left,Nn=It-Ko.top;Dt-=.5*Ko.width,Nn-=.5*Ko.height;const $n=(Dt-tn.x)/tn.scale,lo=(Nn-tn.y)/tn.scale;ht.x=Dt-$n*ht.scale,ht.y=Nn-lo*ht.scale,!Wo&&q("bounds")&&(gt=qt(ht.scale),ht.x=$i(gt.x[0],ht.x,gt.x[1]),ht.y=$i(gt.y[0],ht.y,gt.y[1]))}if(Oe===Ss.Swipe){let ft=94,It=17,Dt=500*ht.scale,Nn=No;y.spring({tension:ft,friction:It,maxSpeed:Dt,restDelta:.1,restSpeed:.1,velocity:Nn})}else Oe===Ss.Pan||Wo?y.spring({tension:900,friction:17,restDelta:.01,restSpeed:.01,maxSpeed:1}):y.spring({tension:170,friction:17,restDelta:.001,restSpeed:.001,maxSpeed:1/0,velocity:No});if(pt.velocity===0||y5(L,ht))L=Object.assign({},ht),B=Object.assign({},ht),y.end(),Et(),En();else{if(y5(B,ht))return;y.from(L).to(ht).start()}se("action",Oe)}function Et(){if(!l||!i||!h)return;const{width:Oe,height:pt}=me();Object.assign(i.style,{maxWidth:`min(${Oe}px, 100%)`,maxHeight:`min(${pt}px, 100%)`});const Bt=(function(){const{width:es,height:is}=me(),{width:st,height:ft}=Ye();if(!e)return{x:0,y:0,width:0,height:0,scale:0,flipX:0,flipY:0,angle:0,fitWidth:st,fitHeight:ft,fullWidth:es,fullHeight:is};let{x:It,y:Dt,scale:Nn,angle:$n,flipX:lo,flipY:Vt}=L,Pn=1/lt(),wn=es,ko=is,ts=L.scale*Pn,mn=B.scale*Pn;const wr=Math.max(st,ft),As=Math.min(st,ft);es>is?(wn=wr,ko=As):(wn=As,ko=wr),ts=es>is?wr*Nn/es||1:wr*Nn/is||1;let Yi=wn?es*mn:0,Si=ko?is*mn:0,Yr=wn&&ko?es*ts/Yi:0;return It=It+.5*wn-.5*Yi,Dt=Dt+.5*ko-.5*Si,{x:It,y:Dt,width:Yi,height:Si,scale:Yr,flipX:lo,flipY:Vt,angle:$n,fitWidth:st,fitHeight:ft,fullWidth:es,fullHeight:is}})(),{x:tn,y:ht,width:gt,height:No,scale:Ko,angle:Wo,flipX:Jn,flipY:ys}=Bt;let ps=`translate(${zh(tn)}px, ${zh(ht)}px)`;ps+=Jn!==1||ys!==1?` scaleX(${zh(Ko*Jn)}) scaleY(${zh(Ko*ys)})`:` scale(${zh(Ko)})`,Wo!==0&&(ps+=` rotate(${Wo}deg)`),h.style.width=`${zh(gt)}px`,h.style.height=`${zh(No)}px`,h.style.transform=`${ps}`,se("render")}function Jt(){let Oe=B.scale;const pt=q("clickAction");let Bt=Be();if(pt){let tn=[];switch(pt){case Ss.ZoomIn:Bt=2*Oe;break;case Ss.ZoomOut:Bt=.5*Oe;break;case Ss.ToggleCover:tn=[Be(),at()];break;case Ss.ToggleFull:tn=[Be(),lt()];break;case Ss.ToggleMax:tn=[Be(),$e()];break;case Ss.IterateZoom:tn=[Be(),lt(),$e()];break;case Ss.Zoom:const ht=lt();Bt=Oe>=ht-.05?Be():Math.min(ht,2*Oe)}if(tn.length){const ht=tn.findIndex((gt=>gt>Oe+1e-4));Bt=tn[ht]||Be()}}return Bt=$i($t(),Bt,$e()),Bt}function ce(){return!!(Y()&&Jt()>B.scale)}function Hs(){return!!(Y()&&Jt()<B.scale)}function Fo(){return!!(Y()&&B.scale>$t())}function yt(){return!!(Y()&&B.scale<$e())}function Xt(){return!!(Y()&&B.scale<lt())}function Wn(){return!(!(Y()&&Kt()&&v)||Ke())}function bt(){return!(!Y()||!(v!=null&&v.isPointerDown())||Ke())}function Kt(){return!!(Y()&&B.scale>Be())}function Ut(){return!!(Y()&&B.scale>=lt())}function Ue(){const Oe="in-fullscreen",pt="with-panzoom-in-fullscreen";e==null||e.classList.toggle(Oe);const Bt=e==null?void 0:e.classList.contains(Oe);Bt?(document.documentElement.classList.add(pt),document.addEventListener("keydown",dt,!0)):(document.documentElement.classList.remove(pt),document.removeEventListener("keydown",dt,!0)),Et(),se(Bt?"enterFS":"exitFS")}function dt(Oe){Oe.key!=="Escape"||Oe.defaultPrevented||Ue()}const Ot={canDrag:Wn,canZoomIn:yt,canZoomOut:Fo,canZoomToFull:Xt,destroy:function(){se("destroy");for(const Oe of Object.values(N))Oe==null||Oe.destroy(Ot);for(const Oe of H)Oe();return i&&(i.style.aspectRatio="",i.style.maxWidth="",i.style.maxHeight=""),h&&(h.style.width="",h.style.height="",h.style.transform=""),i=void 0,l=void 0,h=void 0,L=Object.assign({},H0),B=Object.assign({},H0),y==null||y.destroy(),y=void 0,v==null||v.destroy(),v=void 0,R=4,Ot},emit:se,execute:Zn,getBoundaries:qt,getContainer:function(){return e},getContent:function(){return l},getFullDim:me,getGestures:function(){return v},getMousemovePos:Ze,getOptions:function(){return k},getPlugins:function(){return N},getScale:z,getStartPosition:De,getState:function(){return R},getTransform:function(Oe){return Oe===!0?B:L},getTween:function(){return y},getViewport:function(){return h},getWrapper:function(){return i},init:function(){return R=0,se("init"),(function(){for(const[Oe,pt]of Object.entries(Object.assign(Object.assign({},r),k.plugins||{})))if(Oe&&!N[Oe]&&pt instanceof Function){const Bt=pt();Bt.init(Ot),N[Oe]=Bt}se("initPlugins")})(),(function(){const Oe=Object.assign(Object.assign({},Jpe.classes),q("classes"));if(e&&(oi(e,Oe.container),l=e.querySelector("."+Oe.content),!!l)){if(l.setAttribute("draggable","false"),i=e.querySelector("."+Oe.wrapper),i||(i=document.createElement("div"),oi(i,Oe.wrapper),l.insertAdjacentElement("beforebegin",i),i.insertAdjacentElement("afterbegin",l)),h=e.querySelector("."+Oe.viewport),h||(h=document.createElement("div"),oi(h,Oe.viewport),h.insertAdjacentElement("afterbegin",l),i.insertAdjacentElement("beforeend",h)),f=l.cloneNode(!0),f.removeAttribute("id"),i.insertAdjacentElement("afterbegin",f),l instanceof HTMLPictureElement&&(l=l.querySelector("img")),f instanceof HTMLPictureElement&&(f=f.querySelector("img")),h instanceof HTMLPictureElement&&(h=h.querySelector("img")),h&&(h.style.visibility="hidden",q("protected"))){h.addEventListener("contextmenu",(Bt=>{OR(Bt)}));const pt=document.createElement("div");oi(pt,"f-panzoom__protected"),h.appendChild(pt)}se("initLayout")}})(),(function(){if(e&&i&&!_){let Oe=null;_=new ResizeObserver((()=>{Y()&&(Oe=Oe||requestAnimationFrame((()=>{Y()&&(En(),io(),se("refresh")),Oe=null})))})),_.observe(i),H.push((()=>{_==null||_.disconnect(),_=void 0,Oe&&(cancelAnimationFrame(Oe),Oe=null)}))}})(),(function(){if(!e||!l)return;if(!v1(l)||!v1(f))return void Ne();const Oe=()=>{l&&v1(l)&&l.decode().then((()=>{Ne()})).catch((()=>{Ne()}))};if(R=1,e.classList.add("is-loading"),se("loading"),f.src&&f.complete)return void Oe();(function(){if(!e||e!=null&&e.querySelector(".f-spinner"))return;const pt=q("spinnerTpl"),Bt=zA(pt);Bt&&(Bt.classList.add("f-spinner"),e.classList.add("is-loading"),i==null||i.insertAdjacentElement("afterbegin",Bt))})(),f.addEventListener("load",Oe,!1),f.addEventListener("error",Oe,!1),H.push((()=>{f==null||f.removeEventListener("load",Oe,!1),f==null||f.removeEventListener("error",Oe,!1)}))})(),Ot},isDragging:bt,isExpanded:Kt,isFullsize:Ut,localize:function(Oe,pt=[]){const Bt=q("l10n")||{};Oe=String(Oe).replace(/\{\{(\w+)\}\}/g,((tn,ht)=>Bt[ht]||tn));for(let tn=0;tn<pt.length;tn++)Oe=Oe.split(pt[tn][0]).join(pt[tn][1]);return Oe=Oe.replace(/\{\{(.*?)\}\}/g,((tn,ht)=>ht))},off:function(Oe,pt){for(const Bt of Oe instanceof Array?Oe:[Oe])K.has(Bt)&&K.set(Bt,K.get(Bt).filter((tn=>tn!==pt)));return Ot},on:function(Oe,pt){for(const Bt of Oe instanceof Array?Oe:[Oe])K.set(Bt,[...K.get(Bt)||[],pt]);return Ot},toggleFS:Ue,updateControls:En,version:"6.0.32",willZoomIn:ce,willZoomOut:Hs};return Ot};Xpe.l10n={en_EN:hve},Xpe.getDefaults=()=>Jpe;/*! License details at fancyapps.com/license */const cfe=(e,n)=>{let r=[];return e.childNodes.forEach((i=>{i.nodeType!==Node.ELEMENT_NODE||n&&!i.matches(n)||r.push(i)})),r};/*! License details at fancyapps.com/license */const ng=(e,...n)=>{const r=n.length;for(let i=0;i<r;i++){const l=n[i]||{};Object.entries(l).forEach((([f,h])=>{const v=Array.isArray(h)?[]:{};e[f]||Object.assign(e,{[f]:v}),th(h)?Object.assign(e[f],ng(e[f],h)):Array.isArray(h)?Object.assign(e,{[f]:[...h]}):Object.assign(e,{[f]:h})}))}return e};/*! License details at fancyapps.com/license */const Qpe=function(e=0,n=0,r=0,i=0,l=0,f=!1){const h=(e-n)/(r-n)*(l-i)+i;return f?i<l?$i(i,h,l):$i(l,h,i):h};/*! License details at fancyapps.com/license */const mve=Object.assign(Object.assign({},hve),{ERROR:"Something went wrong. <br /> Please try again later.",NEXT:"Next page",PREV:"Previous page",GOTO:"Go to page #%d",DOWNLOAD:"Download",TOGGLE_FULLSCREEN:"Toggle full-screen mode",TOGGLE_EXPAND:"Toggle full-size mode",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_AUTOPLAY:"Toggle slideshow"});/*! License details at fancyapps.com/license */const iU=e=>{e.cancelable&&e.preventDefault()},AP={adaptiveHeight:!1,center:!0,classes:{container:"f-carousel",isEnabled:"is-enabled",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",hasAdaptiveHeight:"has-adaptive-height",viewport:"f-carousel__viewport",slide:"f-carousel__slide",isSelected:"is-selected"},dragFree:!1,enabled:!0,errorTpl:'<div class="f-html">{{ERROR}}</div>',fill:!1,infinite:!0,initialPage:0,l10n:mve,rtl:!1,slides:[],slidesPerPage:"auto",spinnerTpl:'<div class="f-spinner"></div>',transition:"fade",tween:{clamp:!0,mass:1,tension:160,friction:25,restDelta:1,restSpeed:1,velocity:0},vertical:!1};let t1e,n1e=0;const SJ=(e,n={},r={})=>{n1e++;let i,l,f,h,v,y=0,_=Object.assign({},AP),A=Object.assign({},AP),R={},k=null,N=null,L=!1,B=!1,H=!1,q=!1,Y="height",K=0,se=!0,ie=0,le=0,M=0,we=0,Ne="*",De=[],be=[];const me=new Set;let Ye=[],Ke=[],Ze=0,z=0,$t=0;function Be(st,...ft){let It=A[st];return It&&It instanceof Function?It(is,...ft):It}function at(st,ft=[]){const It=Be("l10n")||{};st=String(st).replace(/\{\{(\w+)\}\}/g,((Dt,Nn)=>It[Nn]||Dt));for(let Dt=0;Dt<ft.length;Dt++)st=st.split(ft[Dt][0]).join(ft[Dt][1]);return st=st.replace(/\{\{(.*?)\}\}/g,((Dt,Nn)=>Nn))}const lt=new Map;function $e(st,...ft){const It=[...lt.get(st)||[]];A.on&&It.push(A.on[st]);for(const Dt of It)Dt&&Dt instanceof Function&&Dt(is,...ft);st!=="*"&&$e("*",st,...ft)}function qt(){var st,ft;const It=ng({},AP,_);ng(It,AP,_);let Dt="";const Nn=_.breakpoints||{};if(Nn)for(const[$n,lo]of Object.entries(Nn))window.matchMedia($n).matches&&(Dt+=$n,ng(It,lo));if(v===void 0||Dt!==v){if(v=Dt,y!==0){let $n=(ft=(st=Ke[ie])===null||st===void 0?void 0:st.slides[0])===null||ft===void 0?void 0:ft.index;$n===void 0&&($n=A.initialSlide),It.initialSlide=$n,It.slides=[];for(const lo of De)lo.isVirtual&&It.slides.push(lo)}ys(),A=It,A.enabled!==!1&&(y=0,$e("init"),(function(){for(const[$n,lo]of Object.entries(Object.assign(Object.assign({},r),A.plugins||{})))if($n&&!R[$n]&&lo instanceof Function){const Vt=lo();Vt.init(is,SJ),R[$n]=Vt}$e("initPlugins")})(),(function(){if(!k)return;const $n=Be("classes")||{};oi(k,$n.container);const lo=Be("style");if(lo&&th(lo))for(const[Vt,Pn]of Object.entries(lo))k.style.setProperty(Vt,Pn);N=k.querySelector(`.${$n.viewport}`),N||(N=document.createElement("div"),oi(N,$n.viewport),N.append(...cfe(k,`.${$n.slide}`)),k.insertAdjacentElement("afterbegin",N)),k.carousel=is,$e("initLayout")})(),(function(){if(!N)return;const $n=Be("classes")||{};De=[],[...cfe(N,`.${$n.slide}`)].forEach((lo=>{lo.parentElement&&De.push(Kt(Object.assign({el:lo,isVirtual:!1},lo.dataset||{})))})),bt(Be("slides"));for(const lo of De)$e("addSlide",lo);for(const lo of De){const Vt=lo.el;Vt!=null&&Vt.parentElement&&(oi(Vt,A.classes.slide),oi(Vt,lo.class),Ko(lo),$e("attachSlideEl",lo))}$e("initSlides")})(),Oe(),(function(){if(k&&(k.addEventListener("click",ht,{passive:!1}),document.addEventListener("mousemove",io),!f)){let $n=null;f=new ResizeObserver((lo=>{$n||($n=requestAnimationFrame((()=>{(function(Vt){var Pn;if(!k)return;if(y===0){const wr=(Pn=Vt[0])===null||Pn===void 0?void 0:Pn.contentBoxSize[0],As=(wr==null?void 0:wr.blockSize)||0,Yi=(wr==null?void 0:wr.inlineSize)||0;return Ze=As,z=Yi,y=1,oi(k,(Be("classes")||{}).isEnabled),Jn(),l=WA().on("start",(()=>{i&&i.isPointerDown()||(Et(),Jn())})).on("step",(Si=>{const Yr=K;K=Si.pos,K!==Yr&&(se=!1,Jn())})).on("end",(Si=>{i!=null&&i.isPointerDown()||(K=Si.pos,l&&!B&&(K<M||K>we)?l.spring({clamp:!0,mass:1,tension:200,friction:25,velocity:0,restDelta:1,restSpeed:1}).from({pos:K}).to({pos:$i(M,K,we)}).start():se||(se=!0,$e("settle")))})),En(),Jt(),void $e("ready")}if(y!==1)return;const wn=Ke.length;Oe(),En();const ko=k.getBoundingClientRect(),ts=ko.height,mn=ko.width;wn>1&&(q&&Math.abs(ts-Ze)<.5||!q&&Math.abs(mn-z)<.5)||(Ze=ts,z=mn,q&&!ts||!q&&!mn||k&&N&&(wn===Ke.length&&(i!=null&&i.isPointerDown())||(Be("dragFree")&&(B||K>M&&K<we)?(Et(),Jn()):Wo(ie,{transition:!1}))))})(lo),$n=null})))})),f.observe(k)}})())}}function io(st){t1e=st}function En(){if(!N)return;const st=Be("gestures");st!==!1?i||(i=hL(N,st).on("start",(ft=>{var It,Dt;if(!l)return;const{srcEvent:Nn}=ft;q&&g2(Nn.target),l.pause(),l.getCurrentVelocities().pos=0;const $n=(It=Ke[ie])===null||It===void 0?void 0:It.slides[0];$n&&me.has($n.index)&&$n.el&&(K=$n.offset||0,K+=((function(lo){const Vt=window.getComputedStyle(lo),Pn=new DOMMatrixReadOnly(Vt.transform);return{width:Pn.m41||0,height:Pn.m42||0}})($n.el)[Y]||0)*(H&&!q?1:-1)),Bt(),!B&&(K<M||K>we)&&l.spring({clamp:!0,mass:1,tension:500,friction:25,velocity:((Dt=l.getCurrentVelocities())===null||Dt===void 0?void 0:Dt.pos)||0,restDelta:1,restSpeed:1}).from({pos:K}).to({pos:$i(M,K,we)}).start()})).on("move",(ft=>{const{srcEvent:It,axis:Dt}=ft,Nn=ft.srcEvent.target;Nn&&g2(Nn)||(Dt||(It.stopPropagation(),It.stopImmediatePropagation()),(Dt==="y"&&q||Dt==="x"&&!q)&&(iU(It),It.stopPropagation()))})).on("panstart",(ft=>{(ft==null?void 0:ft.axis)===(q?"y":"x")&&oi(N,"is-dragging")})).on("panend",(()=>{T1(N,"is-dragging")})).on("pan",(ft=>{var It;const{deltaX:Dt,deltaY:Nn,currentTouch:$n,axis:lo}=ft;if(!l||$n.length>1||lo==="y"&&!q||lo==="x"&&q)return;const Vt=H&&!q?1:-1;let Pn=q?Nn:Dt,wn=l!=null&&l.isRunning()?l.getEndValues().pos:K,ko=1;B||(wn<=M&&Pn*Vt<0?(ko=Math.max(.01,1-Math.abs(1/yt()*Math.abs(wn-M))),ko*=.2):wn>=we&&Pn*Vt>0&&(ko=Math.max(.01,1-Math.abs(1/yt()*Math.abs(wn-we))),ko*=.2)),wn+=Pn*ko*Vt,l.spring({clamp:!0,mass:1,tension:700,friction:25,velocity:((It=l.getCurrentVelocities())===null||It===void 0?void 0:It.pos)||0,restDelta:1,restSpeed:1}).from({pos:K}).to({pos:wn}).start()})).on("end",(ft=>{var It,Dt;const{axis:Nn,velocityX:$n,velocityY:lo,currentTouch:Vt}=ft,Pn=Ke.length,wn=Be("dragFree");if(Vt.length>0||!l||!Pn)return;const ko=Be("vertical")?lo:$n;let ts=l!=null&&l.isRunning()?l.getEndValues().pos:K;const mn=H&&!q?1:-1;if(ts+=ko*(wn?5:1)*mn,!B&&(ko*mn<=0&&ts<M||ko*mn>=0&&ts>we)){let As=0;return Math.abs(ko)>0&&(As=2*Math.abs(ko),As=Math.min(.3*yt(),As)),ts=$i(M+-1*As,ts,we+As),void l.spring({clamp:!0,mass:1,tension:380,friction:25,velocity:-1*ko,restDelta:1,restSpeed:1}).from({pos:K}).to({pos:ts}).start()}if(wn||!((It=R.Autoscroll)===null||It===void 0)&&It.isEnabled())return void(Math.abs(ko)>10?l.spring({clamp:!0,mass:1,tension:150,friction:25,velocity:-1*ko,restDelta:1,restSpeed:1}).from({pos:K}).to({pos:ts}).start():l.isRunning()||se||(se=!0,$e("settle")));if(!wn&&!(!((Dt=R.Autoscroll)===null||Dt===void 0)&&Dt.isEnabled())&&(!ft.offsetX&&!ft.offsetY||Nn==="y"&&!q||Nn==="x"&&q))return void Wo(ie,{transition:"tween"});let wr=Hs(ts);Math.abs(ko)>10&&wr===ie&&(wr+=ko>0?H&&!q?1:-1:H&&!q?-1:1),Wo(wr,{transition:"tween",tween:{velocity:-1*ko}})})).init()):i&&(i.destroy(),i=void 0)}function Zn(st="*"){var ft;const It=[];for(const Dt of De)(st==="*"||Dt.class&&Dt.class.includes(st)||Dt.el&&(!((ft=Dt.el)===null||ft===void 0)&&ft.classList.contains(st)))&&It.push(Dt);h=void 0,Ne=st,be=[...It]}function Et(){if(!l)return;const st=Hs(l!=null&&l.isRunning()?l.getEndValues().pos:K);st!==ie&&(h=ie,ie=st,Ko(),Jt(),ce(),$e("change",ie,h))}function Jt(){var st;if(!k)return;Kp(N,"is-draggable",!!i&&Ke.length>0);for(const Dt of k.querySelectorAll("[data-carousel-index]"))Dt.innerHTML=ie+"";for(const Dt of k.querySelectorAll("[data-carousel-page]"))Dt.innerHTML=ie+1+"";for(const Dt of k.querySelectorAll("[data-carousel-pages]"))Dt.innerHTML=Ke.length+"";for(const Dt of k.querySelectorAll("[data-carousel-go-prev]"))Dt.toggleAttribute("aria-disabled",!ps()),ps()?Dt.removeAttribute("tabindex"):Dt.setAttribute("tabindex","-1");for(const Dt of k.querySelectorAll("[data-carousel-go-next]"))Dt.toggleAttribute("aria-disabled",!es()),es()?Dt.removeAttribute("tabindex"):Dt.setAttribute("tabindex","-1");let ft=!1;const It=(st=Ke[ie])===null||st===void 0?void 0:st.slides[0];It&&(It.downloadSrc||It.type==="image"&&It.src)&&(ft=!0);for(const Dt of k.querySelectorAll("[data-carousel-download]"))Dt.toggleAttribute("aria-disabled",!ft)}function ce(st){var ft;st||(st=(ft=Ke[ie])===null||ft===void 0?void 0:ft.slides[0]);const It=st.el;if(It)for(const Dt of It.querySelectorAll("[data-slide-index]"))Dt.innerHTML=st.index+1+""}function Hs(st){var ft,It,Dt;if(!Ke.length||!l)return 0;const Nn=Xt();let $n=st;B?$n-=Math.floor((st-((ft=Ke[0])===null||ft===void 0?void 0:ft.pos))/Nn)*Nn:$n=$i((It=Ke[0])===null||It===void 0?void 0:It.pos,st,(Dt=Ke[Ke.length-1])===null||Dt===void 0?void 0:Dt.pos);const lo=new Map;let Vt=0;for(const wn of Ke){const ko=Math.abs(wn.pos-$n),ts=Math.abs(wn.pos-$n-Nn),mn=Math.abs(wn.pos-$n+Nn),wr=Math.min(ko,ts,mn);lo.set(Vt,wr),Vt++}const Pn=lo.size>0?[...lo.entries()].reduce(((wn,ko)=>ko[1]<wn[1]?ko:wn)):[ie,0];return parseInt(Pn[0])}function Fo(){return $t}function yt(){return N&&N.getBoundingClientRect()[Y]||0}function Xt(st=!0){return be.reduce(((ft,It)=>ft+It.dim),0)+(be.length-(B&&st?0:1))*$t}function Wn(st){const ft=Xt();let It=yt();if(!N)return[];const Dt=[];if(!ft||!It)return[];st=st===void 0?K:st,B&&(st-=Math.floor(st/ft)*ft);let Nn=0,$n=0;if(L){const Vt=N.getBoundingClientRect();Nn=Math.abs(Vt.left),$n=Math.abs(window.innerWidth-Vt.right)}let lo=0;for(let Vt of be){const Pn=(wn=0)=>{Dt.indexOf(Vt)>-1||(Vt.pos=lo-st+wn||0,Vt.offset+wn>st-Vt.dim-Nn+.51&&Vt.offset+wn<st+It+$n-.51&&Dt.push(Vt))};Vt.offset=lo,B&&(Pn(ft),Pn(-1*ft)),Pn(),lo+=Vt.dim+$t}return Dt}function bt(st,ft){const It=[];for(const Dt of Array.isArray(st)?st:[st]){const Nn=Kt(Object.assign(Object.assign({},Dt),{isVirtual:!0}));It.push(Nn)}De.splice(ft===void 0?De.length:ft,0,...It),Ot();for(const Dt of It)Ut(Dt);return Zn(Ne),It}function Kt(st){return(df(st)||st instanceof HTMLElement)&&(st={html:st}),Object.assign({index:-1,el:void 0,class:"",isVirtual:!0,dim:0,pos:0,offset:0,html:"",src:""},st)}function Ut(st){if(!st)return;let ft=st.el;ft||(ft=document.createElement("div"),st.el=ft);const It=st.html?st.html instanceof HTMLElement?st.html:zA(st.html):void 0;It&&(oi(It,"f-html"),st.htmlEl=It,oi(ft,"has-html"),ft.append(It),$e("contentReady",st))}function Ue(st){if(!N||!st)return;let ft=st.el;if(ft){if(ft.setAttribute("index",st.index+""),ft.parentElement!==N){let It;oi(ft,A.classes.slide),oi(ft,st.class),Ko(st);for(const Dt of De)if(Dt.index>st.index){It=Dt.el;break}N.insertBefore(ft,It&&N.contains(It)?It:null),$e("attachSlideEl",st)}return ce(st),ft}}function dt(st){const ft=st==null?void 0:st.el;ft&&(ft.remove(),pt(ft),$e("detachSlideEl",st))}function Ot(){for(let st=0;st<De.length;st++){const ft=De[st],It=ft.el;It&&(ft.index!==st&&pt(It),It.setAttribute("index",`${st}`)),ft.index=st}}function Oe(){var st,ft,It,Dt,Nn;if(!k||!N)return;H=Be("rtl"),q=Be("vertical"),Y=q?"height":"width";const $n=Be("classes");Kp(k,$n.isLTR,!H),Kp(k,$n.isRTL,H),Kp(k,$n.isHorizontal,!q),Kp(k,$n.isVertical,q),Kp(k,$n.hasAdaptiveHeight,Be("adaptiveHeight")),L=window.getComputedStyle(N).getPropertyValue("overflow-"+(q?"y":"x"))==="visible";const lo=N.getBoundingClientRect();if(!lo.width&&!lo.height)return;$t=N&&parseFloat(getComputedStyle(N).getPropertyValue("--f-carousel-gap"))||0;const Vt=(function(){let Pn=0;if(N){let wn=document.createElement("div");oi(wn,A.classes.slide),N.appendChild(wn),Pn=wn.getBoundingClientRect()[Y],wn.remove(),wn=void 0}return Pn})();for(const Pn of be){const wn=Pn.el;let ko=0;if(!Pn.isVirtual&&wn&&IP(wn)){let ts=!1;wn.parentElement&&wn.parentElement===N||(N.appendChild(wn),ts=!0),ko=wn.getBoundingClientRect()[Y],ts&&((st=wn.parentElement)===null||st===void 0||st.removeChild(wn))}else ko=Vt;Pn.dim=ko}if(B=!1,Be("infinite")){B=!0;const Pn=Xt();let wn=yt();if(L){const ko=N.getBoundingClientRect();wn+=ko.left,wn+=ko.right-ko.width}for(let ko=0;ko<be.length;ko++){const ts=((ft=be[ko])===null||ft===void 0?void 0:ft.dim)+$t;if(Pn-ts<wn&&Pn-ts-wn<ts){B=!1;break}}}if((function(){var Pn;if(!k)return;Ot();const wn=yt(),ko=Xt(!1);let ts=Be("slidesPerPage");ts=ts==="auto"?1/0:parseFloat(ts+""),Ke=[];let mn=0,wr=0;for(const ho of be)(!Ke.length||mn+ho.dim-wn>.05||wr>=ts)&&(Ke.push({index:Ke.length,slides:[],dim:0,offset:0,pos:0}),mn=0,wr=0),(Pn=Ke[Ke.length-1])===null||Pn===void 0||Pn.slides.push(ho),mn+=ho.dim+$t,wr++;const As=Be("center"),Yi=Be("fill");let Si=0;for(const ho of Ke){ho.dim=(ho.slides.length-1)*$t;for(const Os of ho.slides)ho.dim+=Os.dim;ho.offset=Si,ho.pos=Si,As!==!1&&(ho.pos-=.5*(wn-ho.dim)),Yi&&!B&&ko>wn&&(ho.pos=$i(0,ho.pos,ko-wn)),Si+=ho.dim+$t}const Yr=[];let Ts;for(const ho of Ke){const Os=Object.assign({},ho);Ts&&Math.abs(Os.pos-Ts.pos)<.1?(Ts.dim+=Os.dim,Ts.slides=[...Ts.slides,...Os.slides]):(Ts=Os,Os.index=Yr.length,Yr.push(Os))}Ke=Yr,Jt()})(),M=((It=Ke[0])===null||It===void 0?void 0:It.pos)||0,we=((Dt=Ke[Ke.length-1])===null||Dt===void 0?void 0:Dt.pos)||0,y===0)(function(){var Pn;h=void 0,ie=Be("initialPage");const wn=Be("initialSlide")||void 0;wn!==void 0&&(ie=is.getPageIndex(wn)||0),ie=$i(0,ie,Ke.length-1),K=((Pn=Ke[ie])===null||Pn===void 0?void 0:Pn.pos)||0,le=K})();else{const Pn=l!=null&&l.isRunning()?l.getEndValues().pos:K;(Pn<M||Pn>we)&&(ie=$i(0,ie,Ke.length-1),le=((Nn=Ke[ie||0])===null||Nn===void 0?void 0:Nn.pos)||0)}$e("refresh")}function pt(st){if(!st||!IP(st))return;const ft=parseInt(st.getAttribute("index")||"-1");let It="";for(const Nn of Array.from(st.classList)){const $n=Nn.match(/^f-(\w+)(Out|In)$/);$n&&$n[1]&&(It=$n[1]+"")}if(!st||!It)return;const Dt=[`f-${It}Out`,`f-${It}In`,"to-prev","to-next","from-prev","from-next"];st.removeEventListener("animationend",tn),T1(st,Dt.join(" ")),me.delete(ft)}function Bt(){if(!N)return;const st=me.size;for(const ft of be)pt(ft.el);me.clear(),st&&Jn()}function tn(st){st.animationName.substring(0,2)==="f-"&&(pt(st.target),me.size||(T1(k,"in-transition"),!se&&Math.abs(is.getPosition(!0)-le)<.5&&(se=!0,$e("settle"))),Jn())}function ht(st){var ft;if(st.defaultPrevented)return;const It=st.composedPath()[0];if(It.closest("[data-carousel-go-prev]"))return iU(st),void is.prev();if(It.closest("[data-carousel-go-next]"))return iU(st),void is.next();const Dt=It.closest("[data-carousel-go-to]");if(Dt)return iU(st),void is.goTo(parseFloat(Dt.dataset.carouselGoTo||"")||0);if(It.closest("[data-carousel-download]")){iU(st);const Nn=(ft=Ke[ie])===null||ft===void 0?void 0:ft.slides[0];if(Nn&&(Nn.downloadSrc||Nn.type==="image"&&Nn.src)){const $n=Nn.downloadFilename,lo=document.createElement("a"),Vt=Nn.downloadSrc||Nn.src||"";lo.href=Vt,lo.target="_blank",lo.download=$n||Vt,lo.click()}}else $e("click",st)}function gt(st){var ft;const It=st.el;It&&((ft=It.querySelector(".f-spinner"))===null||ft===void 0||ft.remove())}function No(st){var ft;const It=st.el;It&&((ft=It.querySelector(".f-html.is-error"))===null||ft===void 0||ft.remove(),T1(It,"has-error"))}function Ko(st){var ft;st||(st=(ft=Ke[ie])===null||ft===void 0?void 0:ft.slides[0]);const It=st==null?void 0:st.el;if(!It)return;let Dt=Be("formatCaption",st);Dt===void 0&&(Dt=st.caption),Dt=Dt||"";const Nn=Be("captionEl");if(Nn&&Nn instanceof HTMLElement){if(st.index!==ie)return;if(df(Dt)&&(Nn.innerHTML=at(Dt+"")),Dt instanceof HTMLElement){if(Dt.parentElement===Nn)return;Nn.innerHTML="",Dt.parentElement&&(Dt=Dt.cloneNode(!0)),Nn.append(Dt)}return}if(!Dt)return;let $n=st.captionEl||It.querySelector(".f-caption");!$n&&Dt instanceof HTMLElement&&Dt.classList.contains("f-caption")&&($n=Dt),$n||($n=document.createElement("div"),oi($n,"f-caption"),df(Dt)?$n.innerHTML=at(Dt+""):Dt instanceof HTMLElement&&(Dt.parentElement&&(Dt=Dt.cloneNode(!0)),$n.append(Dt)));const lo=`f-caption-${n1e}_${st.index}`;$n.setAttribute("id",lo),$n.dataset.selectable="true",oi(It,"has-caption"),It.setAttribute("aria-labelledby",lo),st.captionEl=$n,It.insertAdjacentElement("beforeend",$n)}function Wo(st,ft={}){var It,Dt;let{transition:Nn,tween:$n}=Object.assign({transition:A.transition,tween:A.tween},ft||{});if(!k||!l)return;const lo=Ke.length;if(!lo||(function(Pn,wn){var ko,ts,mn,wr;if(!(k&&l&&wn&&df(wn)&&wn!=="tween")||((ko=Ke[ie])===null||ko===void 0?void 0:ko.slides.length)>1)return!1;const As=Ke.length;let Yi=Pn>ie?1:-1;Pn=B?(Pn%As+As)%As:$i(0,Pn,As-1),H&&(Yi*=-1);const Si=(ts=Ke[ie])===null||ts===void 0?void 0:ts.slides[0],Yr=Si==null?void 0:Si.index,Ts=(mn=Ke[Pn])===null||mn===void 0?void 0:mn.slides[0],ho=Ts==null?void 0:Ts.index,Os=(wr=Ke[Pn])===null||wr===void 0?void 0:wr.pos;if(ho===void 0||Yr===void 0||Yr===ho||K===Os||Math.abs(yt()-((Ts==null?void 0:Ts.dim)||0))>1)return!1;se=!1,l.pause(),Bt(),oi(k,"in-transition"),K=le=Os;const Xa=Ue(Si),jc=Ue(Ts);return Et(),Xa&&(me.add(Yr),Xa.style.transform="",Xa.addEventListener("animationend",tn),T1(Xa,A.classes.isSelected),Xa.inert=!1,oi(Xa,`f-${wn}Out to-${Yi>0?"next":"prev"}`)),jc&&(me.add(ho),jc.style.transform="",jc.addEventListener("animationend",tn),oi(jc,A.classes.isSelected),jc.inert=!1,oi(jc,`f-${wn}In from-${Yi>0?"prev":"next"}`)),Jn(),!0})(st,Nn))return;st=B?(st%lo+lo)%lo:$i(0,st,lo-1),le=((It=Ke[st||0])===null||It===void 0?void 0:It.pos)||0;const Vt=l.isRunning()?l.getEndValues().pos:K;if(Math.abs(le-Vt)<1)return K=le,ie!==st&&(Ko(),Jt(),ce(),h=ie,ie=st,$e("change",ie,h)),Jn(),void(se||(se=!0,$e("settle")));if(l.pause(),Bt(),B){const Pn=Xt(),wn=Math.floor((Vt-((Dt=Ke[0])===null||Dt===void 0?void 0:Dt.pos))/Pn),ko=le+wn*Pn;le=[ko+Pn,ko,ko-Pn].reduce((function(ts,mn){return Math.abs(mn-Vt)<Math.abs(ts-Vt)?mn:ts}))}Nn!==!1&&th($n)?l.spring(ng({},A.tween,$n)).from({pos:K}).to({pos:le}).start():(K=le,Et(),Jn(),se||(se=!0,$e("settle")))}function Jn(){var st;if(!k||!N)return;const ft=Ke[ie];Ye=Wn();const It=new Set;let Dt;const Nn=[];for(const $n of be){if($n.isVirtual&&!me.has($n.index)&&Ye.indexOf($n)<0)continue;let lo=Ue($n);if(!lo)continue;Nn.push($n);const Vt=((st=ft==null?void 0:ft.slides)===null||st===void 0?void 0:st.indexOf($n))>-1;if(Vt&&It.add(lo),Be("adaptiveHeight")&&Vt){const Pn=(lo.firstElementChild||lo).getBoundingClientRect().height;Dt=Dt==null?Pn:Math.max(Dt,Pn)}}N&&Dt&&(N.style.height=`${Dt}px`),[...cfe(N,`.${A.classes.slide}`)].forEach(($n=>{const lo=parseInt($n.getAttribute("index")||"-1"),Vt=De[lo];Vt||$n.remove();const Pn=It.has($n);if(Kp($n,A.classes.isSelected,Pn),$n.inert=Ye.indexOf(Vt)<0,Vt.isVirtual&&!me.has(Vt.index)&&Ye.indexOf(Vt)<0)return void dt(Vt);let wn=Vt.pos?Math.round(1e4*Vt.pos)/1e4:0,ko=0,ts=0,mn=0,wr=0,As=A.setTransform||void 0;me.has(Vt.index)||(ko=q?0:H?-1*wn:wn,ts=q?wn:0,mn=Qpe(ko,0,Vt.dim,0,100),wr=Qpe(ts,0,Vt.dim,0,100)),As instanceof Function&&!me.has(Vt.index)?As(is,Vt,{x:ko,y:ts,xPercent:mn,yPercent:wr}):$n.style.transform=ko||ts?`translate3d(${mn}%, ${wr}%,0)`:""})),$e("render",Nn)}function ys(){var st;k==null||k.removeEventListener("click",ht),Bt(),document.removeEventListener("mousemove",io),f==null||f.disconnect(),f=void 0;for(const ft of De)ft.el&&IP(ft.el)&&(ft.state=void 0,gt(ft),No(ft),dt(ft),ft.isVirtual?((st=ft.el)===null||st===void 0||st.remove(),ft.el=void 0):(ft.el.style.transform="",N==null||N.appendChild(ft.el)));for(const ft of Object.values(R))ft==null||ft.destroy();R={},i==null||i.destroy(),i=void 0,l==null||l.destroy(),l=void 0;for(const[ft,It]of Object.entries(A.classes||{}))ft!=="container"&&T1(k,It);T1(N,"is-draggable")}function ps(){return B||ie>0}function es(){return B||ie<Ke.length-1}const is={add:function(st,ft){var It,Dt;let Nn=K;const $n=ie,lo=Xt(),Vt=l!=null&&l.isRunning()?l.getEndValues().pos:K,Pn=Math.floor((Vt-((It=Ke[0])===null||It===void 0?void 0:It.pos))/lo),wn=bt(st,ft);for(const ko of wn)$e("addSlide",ko);return Zn(Ne),Oe(),l&&($n===ie&&(Nn-=Pn*lo),le=((Dt=Ke[ie||0])===null||Dt===void 0?void 0:Dt.pos)||0,Nn===le?K=le:l.spring({clamp:!0,mass:1,tension:300,friction:25,restDelta:1,restSpeed:1}).from({pos:Nn}).to({pos:le}).start()),Jn(),is},canGoPrev:ps,canGoNext:es,destroy:function(){return $e("destroy"),window.removeEventListener("resize",qt),ys(),lt.clear(),k=null,Ke=[],De=[],A=Object.assign({},AP),R={},be=[],v="",Ne="*",y=2,is},emit:$e,filter:function(st="*"){return Zn(st),Oe(),Jn(),$e("filter",st),is},getContainer:function(){return k},getGapDim:Fo,getGestures:function(){return i},getLastMouseMove:function(){return t1e},getOption:function(st){return Be(st)},getOptions:function(){return A},getPage:function(){return Ke[ie]},getPageIndex:function(st){if(st!==void 0){for(const ft of Ke||[])for(const It of ft.slides)if(It.index===st)return ft.index;return-1}return ie},getPageProgress:function(st,ft){var It;st===void 0&&(st=ie);const Dt=Ke[st];if(!Dt)return st>ie?-1:1;const Nn=Xt(),$n=Fo();let lo=Dt.pos,Vt=is.getPosition();if(B&&ft!==!0){const Pn=Math.floor((Vt-((It=Ke[0])===null||It===void 0?void 0:It.pos))/Nn);Vt-=Pn*Nn,lo=[lo+Nn,lo,lo-Nn].reduce((function(wn,ko){return Math.abs(ko-Vt)<Math.abs(wn-Vt)?ko:wn}))}return(Vt-lo)/(Dt.dim+$n)},getPageVisibility:function(st){var ft;st===void 0&&(st=ie);const It=Ke[st];if(!It)return st>ie?-1:1;const Dt=is.getPosition(),Nn=yt();let $n=It.pos;if(B){const lo=is.getPosition(),Vt=Xt(),Pn=$n+Math.floor((lo-((ft=Ke[0])===null||ft===void 0?void 0:ft.pos))/Vt)*Vt;$n=[Pn+Vt,Pn,Pn-Vt].reduce((function(wn,ko){return Math.abs(ko-lo)<Math.abs(wn-lo)?ko:wn}))}return $n>Dt&&$n+It.dim<Dt+Nn?1:$n<Dt?($n+It.dim-Dt)/It.dim:$n+It.dim>Dt+Nn?(Dt+Nn-$n)/It.dim:0},getPages:function(){return Ke},getPlugins:function(){return R},getPosition:function(st){var ft;let It=K;if(B&&st!==!0){const Dt=Xt();It-=Math.floor((K-((ft=Ke[0])===null||ft===void 0?void 0:ft.pos)||0)/Dt)*Dt}return It},getSlides:function(){return De},getState:function(){return y},getTotalSlideDim:Xt,getTween:function(){return l},getViewport:function(){return N},getViewportDim:yt,getVisibleSlides:function(st){return st===void 0?Ye:Wn(st)},goTo:Wo,hasNavigated:function(){return h!==void 0},hideError:No,hideLoading:gt,init:function(){if(!e||!IP(e))throw new Error("No Element found");return y!==0&&(ys(),y=0),k=e,_=n,window.removeEventListener("resize",qt),_.breakpoints&&window.addEventListener("resize",qt),qt(),is},isInfinite:function(){return B},isInTransition:function(){return me.size>0},isRTL:function(){return H},isSettled:function(){return se},isVertical:function(){return q},localize:function(st,ft=[]){return at(st,ft)},next:function(st={}){return Wo(ie+1,st),is},off:function(st,ft){for(const It of st instanceof Array?st:[st])lt.has(It)&&lt.set(It,lt.get(It).filter((Dt=>Dt!==ft)));return is},on:function(st,ft){for(const It of st instanceof Array?st:[st])lt.set(It,[...lt.get(It)||[],ft]);return is},prev:function(st={}){return Wo(ie-1,st),is},remove:function(st){st===void 0&&(st=De.length-1);const ft=De[st];return ft&&($e("removeSlide",ft),ft.el&&(pt(ft.el),ft.el.remove(),ft.el=void 0),De.splice(st,1),Zn(Ne),Oe(),Jn()),is},setPosition:function(st){K=st,Et(),Jn()},showError:function(st,ft){gt(st),No(st);const It=st.el;if(It){const Dt=document.createElement("div");oi(Dt,"f-html"),oi(Dt,"is-error"),Dt.innerHTML=at(ft||"<p>{{ERROR}}</p>"),st.htmlEl=Dt,oi(It,"has-html"),oi(It,"has-error"),It.insertAdjacentElement("afterbegin",Dt),$e("contentReady",st)}return is},showLoading:function(st){const ft=st.el,It=ft==null?void 0:ft.querySelector(".f-spinner");if(!ft||It)return is;const Dt=Be("spinnerTpl"),Nn=zA(Dt);return Nn&&(oi(Nn,"f-spinner"),ft.insertAdjacentElement("beforeend",Nn)),is},version:"6.0.32"};return is};SJ.l10n={en_EN:mve},SJ.getDefaults=()=>AP;/*! License details at fancyapps.com/license */const o1e=(e=!0,n="--f-scrollbar-compensate",r="--f-body-margin",i="hide-scrollbar")=>{const l=document,f=l.body,h=l.documentElement;if(e){if(f.classList.contains(i))return;let v=window.innerWidth-h.getBoundingClientRect().width;v<0&&(v=0),h.style.setProperty(n,`${v}px`);const y=parseFloat(window.getComputedStyle(f).marginRight);y&&f.style.setProperty(r,`${y}px`),f.classList.add(i)}else f.classList.remove(i),f.style.setProperty(r,""),l.documentElement.style.setProperty(n,"")};/*! License details at fancyapps.com/license */function YOe(){return!(typeof window>"u"||!window.document||!window.document.createElement)}/*! License details at fancyapps.com/license */const DA=function(e="",n="",r=""){return e.split(n).join(r)};/*! License details at fancyapps.com/license */const s1e={tpl:e=>`<img class="f-panzoom__content" 
    ${e.srcset?'data-lazy-srcset="{{srcset}}"':""} 
    ${e.sizes?'data-lazy-sizes="{{sizes}}"':""} 
    data-lazy-src="{{src}}" alt="{{alt}}" />`},C3e=()=>{let e;function n(A,R){const k=e==null?void 0:e.getOptions().Zoomable;let N=(th(k)?Object.assign(Object.assign({},s1e),k):s1e)[A];return N&&typeof N=="function"&&R?N(R):N}function r(){e&&(e.on("addSlide",f),e.on("removeSlide",h),e.on("attachSlideEl",v),e.on("click",l),e.on("change",i),e.on("ready",i))}function i(){y();const A=(e==null?void 0:e.getVisibleSlides())||[];if(A.length>1||(e==null?void 0:e.getOption("transition"))==="slide")for(const R of A){const k=R.panzoomRef;k&&((e==null?void 0:e.getPage().slides)||[]).indexOf(R)<0&&k.execute(Ss.ZoomTo,Object.assign({},k.getStartPosition()))}}function l(A,R){const k=R.target;k&&!R.defaultPrevented&&k.dataset.panzoomAction&&_(k.dataset.panzoomAction)}function f(A,R){if(!e)return;const k=R.el;if(!k)return;const N=R.src||R.lazySrc||"",L=R.alt||R.caption||`Image #${R.index}`,B=R.srcset||R.lazySrcset||"",H=R.sizes||R.lazySizes||"";if(N&&df(N)&&!R.html&&(!R.type||R.type==="image")){R.type="image",R.thumbSrc=R.thumbSrc||N;let se=n("tpl",R);se=DA(se,"{{src}}",N+""),se=DA(se,"{{alt}}",L+""),se=DA(se,"{{srcset}}",B+""),se=DA(se,"{{sizes}}",H+""),k.insertAdjacentHTML("afterbegin",se)}if(!k.querySelector(".f-panzoom__content"))return;const q=R.width&&R.width!=="auto"?parseFloat(R.width+""):"auto",Y=R.height&&R.height!=="auto"?parseFloat(R.height+""):"auto",K=Xpe(k,Object.assign({width:q,height:Y,classes:{container:"f-zoomable"},event:()=>e==null?void 0:e.getLastMouseMove(),spinnerTpl:()=>(e==null?void 0:e.getOption("spinnerTpl"))||""},n("Panzoom")));K.on("*",((se,ie,...le)=>{e&&(ie==="loading"&&(R.state=0),ie==="loaded"&&(R.state=1),ie==="error"&&(R.state=2,e==null||e.showError(R,"{{IMAGE_ERROR}}")),e.emit(`panzoom:${ie}`,R,...le),ie==="ready"&&e.emit("contentReady",R),R.index===(e==null?void 0:e.getPageIndex())&&y())})),R.panzoomRef=K}function h(A,R){R.panzoomRef&&(R.panzoomRef.destroy(),R.panzoomRef=void 0)}function v(A,R){const k=R.panzoomRef;if(k)switch(k.getState()){case 0:k.init();break;case 3:k.execute(Ss.ZoomTo,Object.assign(Object.assign({},k.getStartPosition()),{velocity:0}))}}function y(){var A,R;const k=(e==null?void 0:e.getContainer())||void 0,N=(R=(A=e==null?void 0:e.getPage())===null||A===void 0?void 0:A.slides[0])===null||R===void 0?void 0:R.panzoomRef;if(k)if(N)N.updateControls(k);else for(const L of k.querySelectorAll("[data-panzoom-action]")||[])L.setAttribute("aria-disabled",""),L.setAttribute("tabindex","-1")}function _(A,...R){var k;(k=e==null?void 0:e.getPage().slides[0].panzoomRef)===null||k===void 0||k.execute(A,...R)}return{init:function(A){e=A,e.getOptions().Zoomable!==!1&&e.on("initPlugins",r)},destroy:function(){if(e){e.off("addSlide",f),e.off("removeSlide",h),e.off("attachSlideEl",v),e.off("click",l),e.off("change",i),e.off("ready",i);for(const A of e.getSlides())h(0,A)}e=void 0},execute:_}};/*! License details at fancyapps.com/license */const r1e={syncOnChange:!1,syncOnClick:!0,syncOnHover:!1},JOe=()=>{let e,n;function r(){const N=e==null?void 0:e.getOptions().Sync;return th(N)?Object.assign(Object.assign({},r1e),N):r1e}function i(N){var L,B,H;e&&N&&(n=N,e.getOptions().classes=Object.assign(Object.assign({},e.getOptions().classes),{isSelected:""}),e.getOptions().initialSlide=((B=(L=n.getPage())===null||L===void 0?void 0:L.slides[0])===null||B===void 0?void 0:B.index)||0,r().syncOnChange&&e.on("change",h),r().syncOnClick&&e.on("click",y),r().syncOnHover&&((H=e.getViewport())===null||H===void 0||H.addEventListener("mouseover",_)),(function(){!e||!n||(e.on("ready",f),e.on("refresh",A),n.on("change",v),n.on("filter",R))})())}function l(){const N=r().target;e&&N&&i(N)}function f(){k()}function h(){var N;if(e&&n){const L=((N=e.getPage())===null||N===void 0?void 0:N.slides)||[],B=n.getPageIndex(L[0].index||0);B>-1&&n.goTo(B,e.hasNavigated()?void 0:{tween:!1,transition:!1}),k()}}function v(){var N;if(e&&n){const L=e.getPageIndex(((N=n.getPage())===null||N===void 0?void 0:N.slides[0].index)||0);L>-1&&e.goTo(L,n.hasNavigated()?void 0:{tween:!1,transition:!1}),k()}}function y(N,L){var B;if(!e||!n||!((B=e.getTween())===null||B===void 0)&&B.isRunning())return;const H=e==null?void 0:e.getOptions().classes.slide;if(!H)return;const q=H?L.target.closest(`.${H}`):null;if(q){const Y=parseInt(q.getAttribute("index")||"")||0,K=n.getPageIndex(Y);n.goTo(K)}}function _(N){e&&y(0,N)}function A(){var N;if(e&&n){const L=e.getPageIndex(((N=n.getPage())===null||N===void 0?void 0:N.slides[0].index)||0);L>-1&&e.goTo(L,{tween:!1,transition:!1}),k()}}function R(N,L){e&&n&&(e.filter(L),v())}function k(){var N,L,B;if(!n)return;const H=((L=(N=n.getPage())===null||N===void 0?void 0:N.slides[0])===null||L===void 0?void 0:L.index)||0;for(const q of(e==null?void 0:e.getSlides())||[])(B=q.el)===null||B===void 0||B.classList.toggle("is-selected",q.index===H)}return{init:function(N){e=N,e.on("initSlides",l)},destroy:function(){var N;e==null||e.off("ready",f),e==null||e.off("refresh",A),e==null||e.off("change",h),e==null||e.off("click",y),(N=e==null?void 0:e.getViewport())===null||N===void 0||N.removeEventListener("mouseover",_),n==null||n.off("change",v),n==null||n.off("filter",R),n=void 0,e==null||e.off("initSlides",l),e=void 0},getTarget:function(){return n}}};/*! License details at fancyapps.com/license */const i1e={showLoading:!0,preload:1},CZ="is-lazyloading",a1e="is-lazyloaded",XOe=()=>{let e;function n(){const l=e==null?void 0:e.getOptions().Lazyload;return th(l)?Object.assign(Object.assign({},i1e),l):i1e}function r(l){var f;const h=l.el;if(!h)return;const v="[data-lazy-src],[data-lazy-srcset],[data-lazy-bg]",y=Array.from(h.querySelectorAll(v));h.matches(v)&&y.push(h);for(const _ of y){const A=_.dataset.lazySrc,R=_.dataset.lazySrcset,k=_.dataset.lazySizes,N=_.dataset.lazyBg,L=(_ instanceof HTMLImageElement||_ instanceof HTMLSourceElement)&&(A||R),B=_ instanceof HTMLElement&&N;if(!L&&!B)continue;const H=A||R||N;if(H){if(L&&H){const q=(f=_.parentElement)===null||f===void 0?void 0:f.classList.contains("f-panzoom__wrapper");n().showLoading&&(e==null||e.showLoading(l)),_.addEventListener("load",(()=>{e==null||e.hideLoading(l),_ instanceof HTMLImageElement?_.decode().then((()=>{_.classList.remove(CZ),_.classList.add(a1e)})):(_.classList.remove(CZ),_.classList.add(a1e)),q||e==null||e.emit("lazyLoad:loaded",l,_,H)})),_.addEventListener("error",(()=>{e==null||e.hideLoading(l),_.classList.remove(CZ),_.classList.add("has-lazyerror"),q||e==null||e.emit("lazyLoad:error",l,_,H)})),_.classList.add("f-lazyload"),_.classList.add(CZ),q||e==null||e.emit("lazyLoad:load",l,_,H),A&&(_.src=A),R&&(_.srcset=R),k&&(_.sizes=k)}else B&&(document.body.contains(_)||(document.createElement("img").src=N),_.style.backgroundImage=`url('${N}')`);delete _.dataset.lazySrc,delete _.dataset.lazySrcset,delete _.dataset.lazySizes,delete _.dataset.lazyBg}}}function i(){if(!e)return;const l=[...e.getVisibleSlides()],f=n().preload;if(f>0){const h=e.getPosition(),v=e.getViewportDim();l.push(...e.getVisibleSlides(h+v*f),...e.getVisibleSlides(h-v*f))}for(const h of l)r(h)}return{init:function(l){e=l,e.on("render",i)},destroy:function(){e==null||e.off("render",i),e=void 0}}};/*! License details at fancyapps.com/license */const c1e={prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"></path></svg>',nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"></path></svg>'},E3e=()=>{let e,n,r;function i(){const v=e==null?void 0:e.getOptions().Arrows;return th(v)?Object.assign(Object.assign({},c1e),v):c1e}function l(v){if(!e)return;const y=`<button data-carousel-go-${v} tabindex="0" class="f-button is-arrow is-${v}" title="{{${v.toUpperCase()}}}">`+i()[`${v}Tpl`]+"</button",_=zA(e.localize(y))||void 0;return _&&oi(_,i()[`${v}Class`]),_}function f(){var v;n==null||n.remove(),n=void 0,r==null||r.remove(),r=void 0,(v=e==null?void 0:e.getContainer())===null||v===void 0||v.classList.remove("has-arrows")}function h(){e&&e.getOptions().Arrows!==!1&&e.getPages().length>1?((function(){if(!e)return;const v=e.getViewport();v&&(n||(n=l("prev"),n&&v.insertAdjacentElement("beforebegin",n)),r||(r=l("next"),r&&v.insertAdjacentElement("afterend",r)),Kp(e.getContainer(),"has-arrows",!(!n&&!r)))})(),e&&(n==null||n.toggleAttribute("aria-disabled",!e.canGoPrev()),r==null||r.toggleAttribute("aria-disabled",!e.canGoNext()))):f()}return{init:function(v){e=v.on(["change","refresh"],h)},destroy:function(){f(),e==null||e.off(["change","refresh"],h),e=void 0}}};/*! License details at fancyapps.com/license */const QOe='<circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/>',lfe='<g><line x1="11" y1="8" x2="11" y2="14"></line></g>'+QOe,_3e={moveLeft:["moveLeft","MOVE_LEFT",'<path d="M5 12h14M5 12l6 6M5 12l6-6"/>'],moveRight:["moveRight","MOVE_RIGHT",'<path d="M5 12h14M13 18l6-6M13 6l6 6"/>'],moveUp:["moveUp","MOVE_UP",'<path d="M12 5v14M18 11l-6-6M6 11l6-6"/>'],moveDown:["moveDown","MOVE_DOWN",'<path d="M12 5v14M18 13l-6 6M6 13l6 6"/>'],zoomOut:["zoomOut","ZOOM_OUT",QOe],zoomIn:["zoomIn","ZOOM_IN",lfe],toggleFull:["toggleFull","TOGGLE_FULL",lfe],iterateZoom:["iterateZoom","ITERATE_ZOOM",lfe],toggle1to1:["toggleFull","TOGGLE_FULL",'<path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/>'],rotateCCW:["rotateCCW","ROTATE_CCW",'<path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/>'],rotateCW:["rotateCW","ROTATE_CW",'<path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/>'],flipX:["flipX","FLIP_X",'<path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/>'],flipY:["flipY","FLIP_Y",'<path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/>'],reset:["reset","RESET",'<path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/>'],toggleFS:["toggleFS","TOGGLE_FS",'<g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g>']},gve={};for(const[e,n]of Object.entries(_3e))gve[e]={tpl:`<button data-panzoom-action="${n[0]}" class="f-button" title="{{${n[1]}}}"><svg>${n[2]}</svg></button>`};/*! License details at fancyapps.com/license */var l1e;(function(e){e.Left="left",e.middle="middle",e.right="right"})(l1e||(l1e={}));const u1e=Object.assign({counter:{tpl:'<div class="f-counter"><span data-carousel-page></span>/<span data-carousel-pages></span></div>'},download:{tpl:'<button data-carousel-download class="f-button" title="{{DOWNLOAD}}"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></button>'},autoplay:{tpl:'<button data-autoplay-action="toggle" class="f-button" title="{{TOGGLE_AUTOPLAY}}"><svg><g><path d="M5 3.5 19 12 5 20.5Z"/></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},thumbs:{tpl:'<button data-thumbs-action="toggle" class="f-button" title="{{TOGGLE_THUMBS}}"><svg><rect width="18" height="14" x="3" y="3" rx="2"/><path d="M4 21h1M9 21h1M14 21h1M19 21h1"/></svg></button>'}},gve),d1e={absolute:!1,display:{left:[],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY","reset"],right:[]},enabled:"auto",items:{}},eIe=()=>{let e,n;function r(l){const f=e==null?void 0:e.getOptions().Toolbar;let h=(th(f)?Object.assign(Object.assign({},d1e),f):d1e)[l];return h&&typeof h=="function"&&e?h(e):h}function i(){var l,f;if(!(e!=null&&e.getOptions().Toolbar)||!e||n)return;const h=e.getContainer();if(!h)return;let v=r("enabled");if(!v)return;const y=r("absolute"),_=e.getSlides().length>1;let A=!1,R=!1;for(const q of e.getSlides())q.panzoomRef&&(A=!0),(q.downloadSrc||q.type==="image"&&q.src)&&(R=!0);const k=((l=e.getPlugins().Thumbs)===null||l===void 0?void 0:l.isEnabled())||!1,N=_&&e.getPlugins().Autoplay||!1,L=e.getPlugins().Fullscreen&&(document.fullscreenEnabled||document.webkitFullscreenEnabled);if(v==="auto"&&(v=A),!v)return;n=h.querySelector(".f-carousel__toolbar")||void 0,n||(n=document.createElement("div"),n.classList.add("f-carousel__toolbar"));const B=r("display"),H=ng({},u1e,r("items"));for(const q of["left","middle","right"]){const Y=B[q]||[],K=document.createElement("div");K.classList.add("f-carousel__toolbar__column"),K.classList.add(`is-${q}`);for(const se of Y){let ie;if(df(se)){if(se==="counter"&&!_||se==="autoplay"&&!N||gve[se]&&!A||se==="fullscreen"&&!L||se==="thumbs"&&!k||se==="download"&&!R)continue;ie=H[se]}if(th(se)&&(ie=se),ie&&ie.tpl){let le=e.localize(ie.tpl);le=le.split("<svg>").join('<svg tabindex="-1" width="24" height="24" viewBox="0 0 24 24">');const M=zA(le);M&&(typeof ie.click=="function"&&e&&M.addEventListener("click",(we=>{we.preventDefault(),we.stopPropagation(),typeof ie.click=="function"&&e&&ie.click(e,we)})),K.append(M))}}n.append(K)}if(n.childElementCount){if(y===!0&&n.classList.add("is-absolute"),!n.parentElement){const q=r("parentEl");q?q.insertAdjacentElement("afterbegin",n):(f=e.getViewport())===null||f===void 0||f.insertAdjacentElement("beforebegin",n)}h.contains(n)&&h.classList.add("has-toolbar")}}return{init:function(l){e=l,e.on("initSlides",i)},destroy:function(){var l;e==null||e.off("initSlides",i),(l=e==null?void 0:e.getContainer())===null||l===void 0||l.classList.remove("has-toolbar"),n==null||n.remove(),n=void 0},add:function(l,f){u1e[l]=f},isEnabled:function(){return!!n}}};/*! License details at fancyapps.com/license */const f1e={autoStart:!0,pauseOnHover:!0,showProgressbar:!0,timeout:2e3},w3e=()=>{let e,n,r=!1,i=!1,l=!1,f=null;function h(ie){const le=e==null?void 0:e.getOptions().Autoplay;let M=(th(le)?Object.assign(Object.assign({},f1e),le):f1e)[ie];return M&&typeof M=="function"&&e?M(e):M}function v(){clearTimeout(n),n=void 0}function y(){if(!r||l||i||n||!(e!=null&&e.isSettled())||(function(){var le;const M=((le=e==null?void 0:e.getPage())===null||le===void 0?void 0:le.slides)||[];for(const we of M)if(we.state===0)return!0;return!1})())return;(function(){var le,M,we,Ne;if(!e||(R(),!h("showProgressbar")))return;let De=h("progressbarParentEl");if(!De&&(!((le=e.getPlugins().Toolbar)===null||le===void 0)&&le.isEnabled())&&(De=e.getContainer()),!De&&((M=e.getPlugins().Toolbar)===null||M===void 0?void 0:M.isEnabled())!==!0){const me=((we=e.getPages()[0])===null||we===void 0?void 0:we.slides)||[],Ye=((Ne=e.getPage())===null||Ne===void 0?void 0:Ne.slides)||[];me.length===1&&Ye.length===1&&(De=Ye[0].el)}if(De||(De=e.getViewport()),!De)return;f=document.createElement("div"),f.classList.add("f-progressbar"),De.prepend(f);const be=h("timeout")||1e3;f.style.animationDuration=`${be}ms`})();const ie=h("timeout");n=setTimeout((()=>{e&&r&&!i&&(e.isInfinite()||e.getPageIndex()!==e.getPages().length-1?e.next():e.goTo(0))}),ie)}function _(){var ie,le;if(!e||e.getPages().length<2||e.getOptions().Autoplay===!1||r)return;r=!0,e.emit("autoplay:start",h("timeout")),(ie=e.getContainer())===null||ie===void 0||ie.classList.add("has-autoplay"),(le=e.getTween())===null||le===void 0||le.on("start",q);const M=e==null?void 0:e.getContainer();M&&h("pauseOnHover")&&matchMedia("(hover: hover)").matches&&(M.addEventListener("mouseenter",Y,!1),M.addEventListener("mouseleave",K,!1)),e.on("change",B),e.on("settle",H),e.on("contentReady",N),e.on("panzoom:touchStart",A),e.on("panzoom:wheel",A),e.isSettled()&&y()}function A(){var ie,le;if(v(),R(),r&&e){e.emit("autoplay:end"),(ie=e.getContainer())===null||ie===void 0||ie.classList.remove("has-autoplay"),(le=e.getTween())===null||le===void 0||le.off("start",q);const M=e==null?void 0:e.getContainer();M&&(M.removeEventListener("mouseenter",Y,!1),M.removeEventListener("mouseleave",K,!1))}e&&(e.off("change",B),e.off("settle",H),e.off("contentReady",N),e.off("panzoom:touchStart",A),e.off("panzoom:wheel",A)),r=!1,i=!1}function R(){f&&(f.remove(),f=null)}function k(){e&&e.getPages().length>1&&h("autoStart")&&_()}function N(){e&&y()}function L(ie,le){const M=le.target;M&&!le.defaultPrevented&&M.dataset.autoplayAction==="toggle"&&se.toggle()}function B(){!e||!(e!=null&&e.isInfinite())&&e.getPageIndex()===e.getPages().length-1?A():(R(),v())}function H(){y()}function q(){v(),R()}function Y(){l=!0,r&&(R(),v())}function K(){l=!1,r&&!i&&(e!=null&&e.isSettled())&&y()}const se={init:function(ie){e=ie,e.on("ready",k),e.on("click",L)},destroy:function(){A(),e==null||e.off("ready",k),e==null||e.off("click",L),e=void 0},isEnabled:()=>r,pause:function(){i=!0,v()},resume:function(){i=!1,r&&!l&&y()},start(){_()},stop(){A()},toggle(){r?A():_()}};return se};/*! License details at fancyapps.com/license */const ufe={Carousel:{Lazyload:{showLoading:!1}},minCount:2,showOnStart:!0,thumbTpl:'<button aria-label="Slide to #{{page}}"><img draggable="false" alt="{{alt}}" data-lazy-src="{{src}}" /></button>',type:"modern"};let dfe;const A3e=()=>{let e,n,r,i=0,l=0,f=!0;function h(se){const ie=e==null?void 0:e.getOptions().Thumbs;let le=(th(ie)?Object.assign(Object.assign({},ufe),ie):ufe)[se];return le&&typeof le=="function"&&e?le(e):le}function v(){if(!e||(e==null?void 0:e.getOptions().Thumbs)===!1)return!1;let se=0;for(const ie of e.getSlides())ie.thumbSrc&&se++;return se>=h("minCount")}function y(){return h("type")==="modern"}function _(se=!1){var ie;const le=e==null?void 0:e.getContainer();if(!e||!le||r||!v())return;const M=((ie=h("Carousel"))===null||ie===void 0?void 0:ie.classes)||{};if(M.container=M.container||"f-thumbs",!r){const we=le.nextElementSibling;we!=null&&we.classList.contains(M.container)&&(r=we)}if(!r){r=document.createElement("div");const we=h("parentEl");we?we.insertAdjacentElement("beforeend",r):le.insertAdjacentElement("afterend",r)}oi(r,M.container),oi(r,"f-thumbs"),oi(r,`is-${h("type")}`),oi(r,"is-syncing"),se&&(r.style.maxHeight="0px")}function A(se){const ie=se.thumb?se.thumb instanceof HTMLImageElement?se.thumb.src:se.thumb:se.thumbSrc||void 0,le=se.thumbAlt===void 0?`Thumbnail #${se.index}`:se.thumbAlt+"";let M=h("thumbTpl");return M=DA(M,"{{alt}}",le),M=DA(M,"{{src}}",ie+""),M=DA(M,"{{index}}",`${se.index}`),M=DA(M,"{{page}}",`${se.index||1}`),{html:M,class:se.thumbClass}}function R(){var se;if(!dfe||!e||!r||n)return;const ie=[];for(const le of e.getSlides())ie.push(A(le));ie.length&&(n=dfe(r,ng({},{Sync:{target:e},Lazyload:{preload:1},slides:ie,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",slide:"f-thumbs__slide"},center:!0,fill:!y(),infinite:!1,dragFree:!0,rtl:e.getOptions().rtl||!1,slidesPerPage:le=>{let M=0;return y()&&((function(){if(!y()||!r)return;const we=Ne=>r&&parseFloat(getComputedStyle(r).getPropertyValue("--f-thumb-"+Ne))||0;i=we("width"),l=we("clip-width")})(),M=4*(i-l)),le&&le.getTotalSlideDim()<=le.getViewportDim()-M?1/0:1}},ufe.Carousel||{},h("Carousel")||{}),{Sync:JOe,Lazyload:XOe}),n.on("ready",(()=>{e==null||e.emit("thumbs:ready")})),n.on("destroy",(()=>{e==null||e.emit("thumbs:destroy")})),n.init(),(se=n.getGestures())===null||se===void 0||se.on("start",(()=>{f=!1})),n.on("click",((le,M)=>{const we=M.target;if(we){const Ne=we.matches("button")?we:we.firstElementChild;Ne&&Ne.matches("button")&&(M.preventDefault(),Ne.focus({preventScroll:!0}))}})),oi(e.getContainer(),"has-thumbs"),K())}function k(){v()&&h("showOnStart")&&(_(),R())}function N(){var se;v()&&(e==null||e.on("addSlide",q),e==null||e.on("click",Y),(se=e==null?void 0:e.getGestures())===null||se===void 0||se.on("start",L))}function L(){var se,ie;f=!0,!((se=document.activeElement)===null||se===void 0)&&se.closest(".f-thumbs")&&((ie=document.activeElement)===null||ie===void 0||ie.blur())}function B(){var se,ie;r==null||r.classList.toggle("is-syncing",(e==null?void 0:e.hasNavigated())===!1||((se=e==null?void 0:e.getTween())===null||se===void 0?void 0:se.isRunning())),K(),!((ie=e==null?void 0:e.getGestures())===null||ie===void 0)&&ie.isPointerDown()&&(function(){if(!y()||!e||!n||!f)return;const le=n.getTween(),M=n.getPages(),we=e.getPageIndex()||0,Ne=e.getPageProgress()||0;if(!(e&&M&&M[we]&&le))return;const De=le.isRunning()?le.getCurrentValues().pos:n.getPosition();if(De===void 0)return;let be=M[we].pos+Ne*(i-l);be=$i(M[0].pos,be,M[M.length-1].pos),le.from({pos:De}).to({pos:be}).start()})()}function H(){f=!0}function q(se,ie){n==null||n.add(A(ie),ie.index)}function Y(se,ie){const le=ie.target;le&&!ie.defaultPrevented&&le.dataset.thumbsAction==="toggle"&&(function(){if(r||(_(!0),R()),!r)return;const M=n!=null&&n.isVertical()?"maxWidth":"maxHeight",we=r.style[M];r.style[M]=we?"":"0px"})()}function K(){if(!y()||!e||!n)return;const se=(n==null?void 0:n.getSlides())||[];let ie=-.5*i;for(const le of se){const M=le.el;if(!M)continue;let we=e.getPageProgress(le.index)||0;we=Math.max(-1,Math.min(1,we)),we>-1&&we<1&&(ie+=.5*i*(1-Math.abs(we))),we=Math.round(1e4*we)/1e4,ie=Math.round(1e4*ie)/1e4,M.style.setProperty("--progress",`${Math.abs(we)}`),M.style.setProperty("--shift",`${e!=null&&e.isRTL()?-1*ie:ie}px`),we>-1&&we<1&&(ie+=.5*i*(1-Math.abs(we)))}}return{init:function(se,ie){dfe=ie,e=se,e.on("ready",N),e.on("initSlides",k),e.on("render",B),e.on("change",H)},destroy:function(){var se,ie;e==null||e.off("ready",N),e==null||e.off("initSlides",k),e==null||e.off("render",B),e==null||e.off("change",H),e==null||e.off("addSlide",q),e==null||e.off("click",Y),(se=e==null?void 0:e.getGestures())===null||se===void 0||se.off("start",L),(ie=e==null?void 0:e.getContainer())===null||ie===void 0||ie.classList.remove("has-thumbs"),e=void 0,n==null||n.destroy(),n=void 0,r==null||r.remove(),r=void 0},getCarousel:function(){return n},getContainer:function(){return r},isEnabled:function(){return v()}}};/*! License details at fancyapps.com/license */const p1e={iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"}},T3e=()=>{let e;function n(l,f){let h=f.src;if(!df(h))return;let v=f.type;if(!v){if(v||(h.charAt(0)==="#"?v="inline":h.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.((a)?png|avif|gif|jp(g|eg)|pjp(eg)?|jfif|svg|webp|bmp|ico|tif(f)?)((\?|#).*)?$)/i)?v="image":h.match(/\.(pdf)((\?|#).*)?$/i)?v="pdf":h.match(/\.(html|php)((\?|#).*)?$/i)&&(v="iframe")),!v){const y=h.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i);y&&(h=`https://maps.google.${y[1]}/?ll=${(y[2]?y[2]+"&z="+Math.floor(parseFloat(y[3]))+(y[4]?y[4].replace(/^\//,"&"):""):y[4]+"").replace(/\?/,"&")}&output=${y[4]&&y[4].indexOf("layer=c")>0?"svembed":"embed"}`,v="gmap")}if(!v){const y=h.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i);y&&(h=`https://maps.google.${y[1]}/maps?q=${y[2].replace("query=","q=").replace("api=1","")}&output=embed`,v="gmap")}f.src=h,f.type=v}}function r(l,f){f.type!=="iframe"&&f.type!=="pdf"&&f.type!=="gmap"||(function(h){if(!e||!h.el||!h.src)return;const v=document.createElement("iframe");v.classList.add("f-iframe");for(const[_,A]of Object.entries((function(){const R=e==null?void 0:e.getOptions().Html;return th(R)?Object.assign(Object.assign({},p1e),R):p1e})().iframeAttr||{}))v.setAttribute(_,A);v.onerror=()=>{e&&e.getState()===1&&e.showError(h,"{{IFRAME_ERROR}}")},v.src=h.src;const y=document.createElement("div");if(y.classList.add("f-html"),y.append(v),h.width){let _=`${h.width}`;_.match(/^\d+$/)&&(_+="px"),y.style.maxWidth=`${_}`}if(h.height){let _=`${h.height}`;_.match(/^\d+$/)&&(_+="px"),y.style.maxHeight=`${_}`}if(h.aspectRatio){const _=h.el.getBoundingClientRect();y.style.aspectRatio=`${h.aspectRatio}`,y.style[_.width>_.height?"width":"height"]="auto",y.style[_.width>_.height?"maxWidth":"maxHeight"]="none"}h.contentEl=v,h.htmlEl=y,h.el.classList.add("has-html"),h.el.classList.add("has-iframe"),h.el.classList.add(`has-${h.type}`),h.el.prepend(y),e.emit("contentReady",h)})(f)}function i(l,f){var h,v;f.type!=="iframe"&&f.type!=="pdf"&&f.type!=="gmap"||(e==null||e.hideError(f),(h=f.contentEl)===null||h===void 0||h.remove(),f.contentEl=void 0,(v=f.htmlEl)===null||v===void 0||v.remove(),f.htmlEl=void 0)}return{init:function(l){e=l,e.on("addSlide",n),e.on("attachSlideEl",r),e.on("detachSlideEl",i)},destroy:function(){e==null||e.off("addSlide",n),e==null||e.off("attachSlideEl",r),e==null||e.off("detachSlideEl",i),e=void 0}}};/*! License details at fancyapps.com/license */const h1e=(e,n={})=>{const r=new URL(e),i=new URLSearchParams(r.search),l=new URLSearchParams;for(const[v,y]of[...i,...Object.entries(n)]){let _=y+"";if(v==="t"){let A=_.match(/((\d*)m)?(\d*)s?/);A&&l.set("start",60*parseInt(A[2]||"0")+parseInt(A[3]||"0")+"")}else l.set(v,_)}let f=l+"",h=e.match(/#t=((.*)?\d+s)/);return h&&(f+=`#t=${h[1]}`),f},m1e={autoplay:!1,html5videoTpl:`<video class="f-html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">
    <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn't support embedded videos.</video>`,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto",credentialless:""},vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}},O3e=()=>{let e,n=!1;function r(){const k=e==null?void 0:e.getOptions().Video;return th(k)?Object.assign(Object.assign({},m1e),k):m1e}function i(){var k;return(k=e==null?void 0:e.getPage())===null||k===void 0?void 0:k.slides[0]}const l=k=>{var N;try{let L=JSON.parse(k.data);if(k.origin==="https://player.vimeo.com"){if(L.event==="ready")for(let B of Array.from(((N=e==null?void 0:e.getContainer())===null||N===void 0?void 0:N.getElementsByClassName("f-iframe"))||[]))B instanceof HTMLIFrameElement&&B.contentWindow===k.source&&(B.dataset.ready="true")}else if(k.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&L.event==="onReady"){const B=document.getElementById(L.id);B&&(B.dataset.ready="true")}}catch{}};function f(k,N){const L=N.src;if(!df(L))return;let B=N.type;if(!B||B==="html5video"){const H=L.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i);H&&(B="html5video",N.html5videoFormat=N.html5videoFormat||"video/"+(H[1]==="ogv"?"ogg":H[1]))}if(!B||B==="youtube"){const H=L.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i);if(H){const q=Object.assign(Object.assign({},r().youtube),N.youtube||{}),Y=`www.youtube${q.nocookie?"-nocookie":""}.com`,K=h1e(L,q),se=encodeURIComponent(H[2]);N.videoId=se,N.src=`https://${Y}/embed/${se}?${K}`,N.thumb=N.thumb||`https://i.ytimg.com/vi/${se}/mqdefault.jpg`,B="youtube"}}if(!B||B==="vimeo"){const H=L.match(/^.+vimeo.com\/(?:\/)?(video\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/);if(H){const q=Object.assign(Object.assign({},r().vimeo),N.vimeo||{}),Y=h1e(L,q),K=encodeURIComponent(H[2]),se=H[5]||"";N.videoId=K,N.src=`https://player.vimeo.com/video/${K}?${se?`h=${se}${Y?"&":""}`:""}${Y}`,B="vimeo"}}N.type=B}function h(k,N){N.type==="html5video"&&(function(L){if(!e||!L.el||!L.src)return;const{el:B,src:H}=L;if(!B||!H)return;const q=L.html5videoTpl||r().html5videoTpl,Y=L.html5videoFormat||r().html5videoFormat;if(!q)return;const K=L.poster||(L.thumb&&df(L.thumb)?L.thumb:""),se=zA(q.replace(/\{\{src\}\}/gi,H+"").replace(/\{\{format\}\}/gi,Y||"").replace(/\{\{poster\}\}/gi,K+""));if(!se)return;const ie=document.createElement("div");ie.classList.add("f-html"),ie.append(se),L.contentEl=se,L.htmlEl=ie,B.classList.add(`has-${L.type}`),B.prepend(ie),A(L),e.emit("contentReady",L)})(N),N.type!=="youtube"&&N.type!=="vimeo"||(function(L){if(!e||!L.el||!L.src)return;const B=document.createElement("iframe");B.classList.add("f-iframe"),B.setAttribute("id",`f-iframe_${L.videoId}`);for(const[q,Y]of Object.entries(r().iframeAttr||{}))B.setAttribute(q,Y);B.onload=()=>{var q;e&&e.getState()===1&&L.type==="youtube"&&((q=B.contentWindow)===null||q===void 0||q.postMessage(JSON.stringify({event:"listening",id:B.getAttribute("id")}),"*"))},B.onerror=()=>{e&&e.getState()===1&&(e==null||e.showError(L,"{{IFRAME_ERROR}}"))},B.src=L.src;const H=document.createElement("div");H.classList.add("f-html"),H.append(B),L.contentEl=B,L.htmlEl=H,L.el.classList.add("has-html"),L.el.classList.add("has-iframe"),L.el.classList.add(`has-${L.type}`),L.el.prepend(H),A(L),e.emit("contentReady",L)})(N)}function v(k,N){var L,B;N.type!=="html5video"&&N.type!=="youtube"&&N.type!=="vimeo"||((L=N.contentEl)===null||L===void 0||L.remove(),N.contentEl=void 0,(B=N.htmlEl)===null||B===void 0||B.remove(),N.htmlEl=void 0),N.poller&&clearTimeout(N.poller)}function y(){n=!1}function _(){if(n)return;n=!0;const k=i();(k&&k.autoplay!==void 0?k.autoplay:r().autoplay)&&((function(){var N;const L=i(),B=L==null?void 0:L.el;if(B&&(L==null?void 0:L.type)==="html5video")try{const q=B.querySelector("video");if(q){const Y=q.play();Y!==void 0&&Y.then((()=>{})).catch((K=>{q.muted=!0,q.play()}))}}catch{}const H=L==null?void 0:L.htmlEl;H instanceof HTMLIFrameElement&&((N=H.contentWindow)===null||N===void 0||N.postMessage('{"event":"command","func":"stopVideo","args":""}',"*"))})(),(function(){const N=i(),L=N==null?void 0:N.type;if(!(N!=null&&N.el)||L!=="youtube"&&L!=="vimeo")return;const B=()=>{if(N.contentEl&&N.contentEl instanceof HTMLIFrameElement&&N.contentEl.contentWindow){let H;if(N.contentEl.dataset.ready==="true")return H=N.type==="youtube"?{event:"command",func:"playVideo"}:{method:"play",value:"true"},H&&N.contentEl.contentWindow.postMessage(JSON.stringify(H),"*"),void(N.poller=void 0);N.type==="youtube"&&(H={event:"listening",id:N.contentEl.getAttribute("id")},N.contentEl.contentWindow.postMessage(JSON.stringify(H),"*"))}N.poller=setTimeout(B,250)};B()})())}function A(k){const N=k==null?void 0:k.htmlEl;if(k&&N&&(k.type==="html5video"||k.type==="youtube"||k.type==="vimeo")){if(N.style.aspectRatio="",N.style.width="",N.style.height="",N.style.maxWidth="",N.style.maxHeight="",k.width){let L=`${k.width}`;L.match(/^\d+$/)&&(L+="px"),N.style.maxWidth=`${L}`}if(k.height){let L=`${k.height}`;L.match(/^\d+$/)&&(L+="px"),N.style.maxHeight=`${L}`}if(k.aspectRatio){const L=k.aspectRatio.split("/"),B=parseFloat(L[0].trim()),H=L[1]?parseFloat(L[1].trim()):0,q=B&&H?B/H:B;N.offsetHeight;const Y=N.getBoundingClientRect(),K=q<(Y.width||1)/(Y.height||1);N.style.aspectRatio=`${k.aspectRatio}`,N.style.width=K?"auto":"",N.style.height=K?"":"auto"}}}function R(){A(i())}return{init:function(k){e=k,e.on("addSlide",f),e.on("attachSlideEl",h),e.on("detachSlideEl",v),e.on("ready",_),e.on("change",y),e.on("settle",_),e.on("refresh",R),window.addEventListener("message",l)},destroy:function(){e==null||e.off("addSlide",f),e==null||e.off("attachSlideEl",h),e==null||e.off("detachSlideEl",v),e==null||e.off("ready",_),e==null||e.off("change",y),e==null||e.off("settle",_),e==null||e.off("refresh",R),window.removeEventListener("message",l),e=void 0}}};/*! License details at fancyapps.com/license */const g1e={autoStart:!1,btnTpl:'<button data-fullscreen-action="toggle" class="f-button" title="{{TOGGLE_FULLSCREEN}}"><svg><g><path d="M8 3H5a2 2 0 0 0-2 2v3M21 8V5a2 2 0 0 0-2-2h-3M3 16v3a2 2 0 0 0 2 2h3M16 21h3a2 2 0 0 0 2-2v-3"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},v1e="in-fullscreen-mode",I3e=()=>{let e;function n(A){const R=e==null?void 0:e.getOptions().Fullscreen;let k=(th(R)?Object.assign(Object.assign({},g1e),R):g1e)[A];return k&&typeof k=="function"&&e?k(e):k}function r(){var A;(A=e==null?void 0:e.getPlugins().Toolbar)===null||A===void 0||A.add("fullscreen",{tpl:n("btnTpl")})}function i(){if(n("autoStart")){const A=f();A&&v(A)}}function l(A,R){const k=R.target;k&&!R.defaultPrevented&&k.dataset.fullscreenAction==="toggle"&&_()}function f(){return n("el")||(e==null?void 0:e.getContainer())||void 0}function h(){const A=document;return A.fullscreenEnabled?!!A.fullscreenElement:!!A.webkitFullscreenEnabled&&!!A.webkitFullscreenElement}function v(A){const R=document;let k;return A||(A=R.documentElement),R.fullscreenEnabled?k=A.requestFullscreen():R.webkitFullscreenEnabled&&(k=A.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)),k&&k.then((()=>{A.classList.add(v1e)})),k}function y(){const A=document;let R;return A.fullscreenEnabled?R=A.fullscreenElement&&A.exitFullscreen():A.webkitFullscreenEnabled&&(R=A.webkitFullscreenElement&&A.webkitExitFullscreen()),R&&R.then((()=>{var k;(k=f())===null||k===void 0||k.classList.remove(v1e)})),R}function _(){const A=f();A&&(h()?y():v(A))}return{init:function(A){e=A,e.on("initPlugins",r),e.on("ready",i),e.on("click",l)},destroy:function(){e==null||e.off("initPlugins",r),e==null||e.off("ready",i),e==null||e.off("click",l)},exit:y,inFullscreen:h,request:v,toggle:_}};/*! License details at fancyapps.com/license */let M1,CJ=!1,b1e=!1,RU=!1,ehe=!1;const EJ=()=>{const e=new URL(document.URL).hash,n=e.slice(1).split("-"),r=n[n.length-1],i=r&&/^\+?\d+$/.test(r)&&parseInt(n.pop()||"1",10)||1;return{hash:e,slug:n.join("-"),index:i}},vve=()=>{if(!M1||M1.getInstance())return;const{slug:e,index:n}=EJ();if(!e||!M1||M1.getInstance())return;const r=document.querySelectorAll(`[data-fancybox="${e}"]`);if(!r.length)return;const i=r[n-1];i&&i.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0}))},R3e=()=>{var e,n;if(!M1||RU)return;const r=M1==null?void 0:M1.getInstance();if((r==null?void 0:r.getOptions().Hash)===!1)return;const{slug:i,index:l}=EJ(),f=((e=r==null?void 0:r.getSlide())===null||e===void 0?void 0:e.fancybox)||void 0;r&&f&&(i===f?(n=r.getCarousel())===null||n===void 0||n.goTo(l-1):(ehe=!0,r.close(),ehe=!1)),vve()},y1e=()=>{M1&&setTimeout((()=>{CJ=!0,vve(),CJ=!1,window.addEventListener("hashchange",R3e,!1)}),300)},the=()=>{let e,n="auto",r="";function i(){var h,v;if(!e||!e.isTopMost()||e.getOptions().Hash===!1)return;const y=e.getCarousel();if(!y)return;const{hash:_,slug:A}=EJ(),R=e.getSlide();if(!R)return;let k=R.fancybox||"",N=parseInt(R.index+"",10)+1;if(!k)return;let L=`#${k}-${N}`;if((((v=(h=e.getCarousel())===null||h===void 0?void 0:h.getPages())===null||v===void 0?void 0:v.length)||0)<2&&(L=`#${k}`),_!==L&&(r=_),history.scrollRestoration&&(n=history.scrollRestoration,history.scrollRestoration="manual"),y.on("change",l),!CJ)if(k===A)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+L)}catch{}else try{window.history.pushState({},document.title,window.location.pathname+window.location.search+L),b1e=!0}catch{}}function l(){if(!e||!e.isTopMost()||e.getOptions().Hash===!1)return;const{slug:h}=EJ(),v=e.getSlide();if(!v)return;let y=v.fancybox||"",_=`#${y}-${v.index+1}`;if(y===h){RU=!0;try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+_)}catch{}RU=!1}}function f(){if(ehe||!e||!e.isTopMost()||e.getOptions().Hash===!1)return;const h=e.getSlide();if(h&&h.fancybox){RU=!0;try{!b1e||CJ||(function(){if(window.parent===window)return!1;try{var v=window.frameElement}catch{v=null}return v===null?location.protocol==="data:":v.hasAttribute("sandbox")})()?window.history.replaceState({},document.title,window.location.pathname+window.location.search+r):window.history.back()}catch{}RU=!1}}return{init:function(h){e=h,e.on("ready",i),e.on("close",f)},destroy:function(){e==null||e.off("ready",i),e==null||e.off("close",f);const h=e==null?void 0:e.getCarousel();h&&h.off("change",l),e=void 0,history.scrollRestoration&&n&&(history.scrollRestoration=n)}}};the.startFromUrl=vve,the.setup=function(e){M1||(M1=e,YOe()&&(/complete|interactive|loaded/.test(document.readyState)?y1e():document.addEventListener("DOMContentLoaded",y1e)))};/*! License details at fancyapps.com/license */const x3e=Object.assign(Object.assign({},mve),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ELEMENT_NOT_FOUND:"HTML Element Not Found",IFRAME_ERROR:"Error Loading Page"});/*! License details at fancyapps.com/license */const tIe='<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="M19.286 4.714 4.714 19.286M4.714 4.714l14.572 14.572" /></svg></button>';eIe().add("close",{tpl:tIe});const nIe=e=>{e&&e.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:e}))},S1e=(e=null,n="",r)=>{if(!e||!e.parentElement||!n)return void(r&&r());nIe(e);const i=l=>{l.target===e&&e.dataset.animationName&&(e.removeEventListener("animationend",i),delete e.dataset.animationName,r&&r(),e.classList.remove(n))};e.dataset.animationName=n,e.addEventListener("animationend",i),oi(e,n)};var zu;(function(e){e[e.Init=0]="Init",e[e.Ready=1]="Ready",e[e.Closing=2]="Closing",e[e.Destroyed=3]="Destroyed"})(zu||(zu={}));const GU={ajax:null,backdropClick:"close",Carousel:{},closeButton:"auto",closeExisting:!1,delegateEl:void 0,dragToClose:!0,fadeEffect:!0,groupAll:!1,groupAttr:"data-fancybox",hideClass:"f-fadeOut",hideScrollbar:!0,id:void 0,idle:!1,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},l10n:x3e,mainClass:"",mainStyle:{},mainTpl:`<dialog class="fancybox__dialog">
    <div class="fancybox__container" tabindex="0" aria-label="{{MODAL}}">
      <div class="fancybox__backdrop"></div>
      <div class="fancybox__carousel"></div>
    </div>
  </dialog>`,on:{},parentEl:void 0,placeFocusBack:!0,showClass:"f-zoomInUp",startIndex:0,sync:void 0,theme:"dark",triggerEl:void 0,triggerEvent:void 0,zoomEffect:!0},qC=new Map;let D3e=0;const C1e="with-fancybox",k3e=()=>{let e,n,r,i,l,f=zu.Init,h=Object.assign({},GU),v=-1,y={},_=[],A=!1,R=!0,k=0;function N(yt,...Xt){let Wn=h[yt];return Wn&&typeof Wn=="function"?Wn(Fo,...Xt):Wn}function L(yt,Xt=[]){const Wn=N("l10n")||{};yt=String(yt).replace(/\{\{(\w+)\}\}/g,((bt,Kt)=>Wn[Kt]||bt));for(let bt=0;bt<Xt.length;bt++)yt=yt.split(Xt[bt][0]).join(Xt[bt][1]);return yt=yt.replace(/\{\{(.*?)\}\}/g,((bt,Kt)=>Kt))}const B=new Map;function H(yt,...Xt){const Wn=[...B.get(yt)||[]];for(const[bt,Kt]of Object.entries(h.on||{}))(bt===yt||bt.split(" ").indexOf(yt)>-1)&&Wn.push(Kt);for(const bt of Wn)bt&&typeof bt=="function"&&bt(Fo,...Xt);yt!=="*"&&H("*",yt,...Xt)}function q(yt=[],Xt={}){f!==zu.Init&&(Fo.destroy(),f=zu.Init),h=ng({},GU,Xt),v=N("id")||"fancybox-"+ ++D3e;const Wn=qC.get(v);if(Wn&&Wn.destroy(),qC.set(v,Fo),H("init"),(function(){for(const[bt,Kt]of Object.entries(Object.assign(Object.assign({},ol.Plugins),h.plugins||{})))if(bt&&!y[bt]&&Kt instanceof Function){const Ut=Kt();Ut.init(Fo),y[bt]=Ut}H("initPlugins")})(),(function(bt=[]){H("initSlides",bt),_=[...bt]})(yt),(function(){const bt=N("parentEl")||document.body;if(!(bt&&bt instanceof HTMLElement))return;const Kt=L(N("mainTpl")||"");if(e=zA(Kt)||void 0,!e||(n=e.querySelector(".fancybox__container"),!(n&&n instanceof HTMLElement)))return;const Ut=N("mainClass");Ut&&oi(n,Ut);const Ue=N("mainStyle");if(Ue&&th(Ue))for(const[Oe,pt]of Object.entries(Ue))n.style.setProperty(Oe,pt);const dt=N("theme"),Ot=dt==="auto"?window.matchMedia("(prefers-color-scheme:light)").matches:dt==="light";n.setAttribute("theme",Ot?"light":"dark"),e.setAttribute("id",`${v}`),e.addEventListener("keydown",(Oe=>{Oe.key==="Escape"&&Oe.preventDefault()})),e.addEventListener("wheel",(Oe=>{const pt=Oe.target;let Bt=N("wheel",Oe);pt.closest(".f-thumbs")&&(Bt="slide");const tn=Bt==="slide",ht=[-Oe.deltaX||0,-Oe.deltaY||0,-Oe.detail||0].reduce((function(Ko,Wo){return Math.abs(Wo)>Math.abs(Ko)?Wo:Ko})),gt=Math.max(-1,Math.min(1,ht)),No=Date.now();k&&No-k<300?tn&&Oe.preventDefault():(k=No,H("wheel",Oe,gt),Oe.defaultPrevented||(Bt==="close"?Jt(Oe):Bt==="slide"&&i&&!g2(pt)&&(Oe.preventDefault(),i[gt>0?"prev":"next"]())))}),{capture:!0,passive:!1}),e.addEventListener("cancel",(Oe=>{Jt(Oe)})),bt.append(e),qC.size===1&&(N("hideScrollbar")&&o1e(!0),document.documentElement.classList.add(C1e)),e instanceof HTMLDialogElement&&e.showModal(),H("initLayout")})(),(function(){if(r=(e==null?void 0:e.querySelector(".fancybox__carousel"))||void 0,!r)return;r.fancybox=Fo;const bt=ng({},{Autoplay:{autoStart:!1,pauseOnHover:!1,progressbarParentEl:Kt=>{const Ut=Kt.getContainer();return(Ut==null?void 0:Ut.querySelector(".f-carousel__toolbar [data-autoplay-action]"))||Ut}},Fullscreen:{el:n},Toolbar:{absolute:!0,items:{counter:{tpl:'<div class="f-counter"><span data-fancybox-page></span>/<span data-fancybox-pages></span></div>'}},display:{left:["counter"],right:["toggleFull","autoplay","fullscreen","thumbs","close"]}},Video:{autoplay:!0},Thumbs:{minCount:2,Carousel:{classes:{container:"fancybox__thumbs"}}},classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",slide:"fancybox__slide"},spinnerTpl:'<div class="f-spinner" data-fancybox-close></div>',dragFree:!1,slidesPerPage:1,plugins:{Sync:JOe,Arrows:E3e,Lazyload:XOe,Zoomable:C3e,Html:T3e,Video:O3e,Autoplay:w3e,Fullscreen:I3e,Thumbs:A3e,Toolbar:eIe}},N("Carousel")||{},{slides:_,enabled:!0,initialPage:N("startIndex")||0,l10n:N("l10n")});i=SJ(r,bt),H("initCarousel",i),i.on("*",((Kt,Ut,...Ue)=>{H(`Carousel.${Ut}`,Kt,...Ue)})),i.on("attachSlideEl",K),i.on("detachSlideEl",se),i.on("contentReady",Ne),i.on("ready",M),i.on("change",le),i.on("settle",we),i.on("thumbs:ready",De),i.on("thumbs:destroy",De),i.init()})(),e&&n){if(N("closeExisting"))for(const[bt,Kt]of qC.entries())bt!==v&&Kt.close();N("fadeEffect")?(setTimeout((()=>{Y()}),500),oi(n,"is-revealing")):Y(),n.classList.add("is-ready"),f=zu.Ready,H("ready")}}function Y(){T1(n,"is-revealing");try{document.activeElement===e&&((n==null?void 0:n.querySelector("[autofocus]"))||n).focus()}catch{}}function K(yt,Xt){var Wn;z(Xt),be(),(Wn=Xt.el)===null||Wn===void 0||Wn.addEventListener("click",ie),Xt.type!=="inline"&&Xt.type!=="clone"||(function(bt){if(!i||!bt||!bt.el)return;let Kt=null;if(df(bt.src)){const Ut=bt.src.split("#",2).pop();Kt=Ut?document.getElementById(Ut):null}if(Kt){if(oi(Kt,"f-html"),bt.type==="clone"||Kt.closest(".fancybox__carousel")){Kt=Kt.cloneNode(!0);const Ut=Kt.dataset.animationName;Ut&&(Kt.classList.remove(Ut),delete Kt.dataset.animationName);let Ue=Kt.getAttribute("id");Ue=Ue?`${Ue}--clone`:`clone-${v}-${bt.index}`,Kt.setAttribute("id",Ue)}else if(Kt.parentNode){const Ut=document.createElement("div");Ut.inert=!0,Kt.parentNode.insertBefore(Ut,Kt),bt.placeholderEl=Ut}bt.htmlEl=Kt,oi(bt.el,"has-html"),bt.el.prepend(Kt),Kt.classList.remove("hidden"),Kt.style.display==="none"&&(Kt.style.display=""),getComputedStyle(Kt).getPropertyValue("display")==="none"&&(Kt.style.display=Kt.dataset.display||"flex"),i==null||i.emit("contentReady",bt)}else i==null||i.showError(bt,"{{ELEMENT_NOT_FOUND}}")})(Xt),Xt.type==="ajax"&&(function(bt){const Kt=bt.el;if(!Kt||bt.htmlEl||bt.xhr)return;i==null||i.showLoading(bt),bt.state=0;const Ut=new XMLHttpRequest;Ut.onreadystatechange=function(){if(Ut.readyState===XMLHttpRequest.DONE&&f===zu.Ready)if(i==null||i.hideLoading(bt),bt.state=1,Ut.status===200){let dt=Ut.responseText+"",Ot=null,Oe=null;if(bt.filter){const pt=document.createElement("div");pt.innerHTML=dt,Oe=pt.querySelector(bt.filter+"")}Oe&&Oe instanceof HTMLElement?Ot=Oe:(Ot=document.createElement("div"),Ot.innerHTML=dt),Ot.classList.add("f-html"),bt.htmlEl=Ot,Kt.classList.add("has-html"),Kt.classList.add("has-ajax"),Kt.prepend(Ot),i==null||i.emit("contentReady",bt)}else i==null||i.showError(bt)};const Ue=N("ajax")||null;Ut.open(Ue?"POST":"GET",bt.src+""),Ut.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),Ut.setRequestHeader("X-Requested-With","XMLHttpRequest"),Ut.send(Ue),bt.xhr=Ut})(Xt)}function se(yt,Xt){var Wn;(function(bt){bt.closeButtonEl&&(bt.closeButtonEl.remove(),bt.closeButtonEl=void 0)})(Xt),(Wn=Xt.el)===null||Wn===void 0||Wn.removeEventListener("click",ie),Xt.type!=="inline"&&Xt.type!=="clone"||(function(bt){const Kt=bt.htmlEl,Ut=bt.placeholderEl;Kt&&(getComputedStyle(Kt).getPropertyValue("display")!=="none"&&(Kt.style.display="none"),Kt.offsetHeight),Ut&&(Kt&&Ut.parentNode&&Ut.parentNode.insertBefore(Kt,Ut),Ut.remove()),bt.htmlEl=void 0,bt.placeholderEl=void 0})(Xt),Xt.xhr&&(Xt.xhr.abort(),Xt.xhr=void 0)}function ie(yt){if(!Be())return;if(f!==zu.Ready)return yt.preventDefault(),void yt.stopPropagation();if(yt.defaultPrevented||!hL.isClickAllowed())return;const Xt=yt.composedPath()[0];Xt.closest(".fancybox__carousel")&&Xt.classList.contains("fancybox__slide")&&me(yt)}function le(){R=!1,n&&i&&n.classList.remove("is-revealing"),be();const yt=N("sync");if(i&&yt){const Xt=yt.getPageIndex(i.getPageIndex())||0;yt.goTo(Xt,{transition:!1})}}function M(){var yt;if(f!==zu.Ready)return;$t(at()),(function(){if(!N("dragToClose")||!i)return;const Wn=i.getViewport();if(!Wn)return;const bt=hL(Wn).init();if(!bt)return;let Kt=0,Ut=0,Ue=WA().on("step",(dt=>{Kt=dt.y;const Ot=i==null?void 0:i.getViewport();if(n&&Ot){const Oe=Qpe(Math.abs(Kt),0,.5*Ot.getBoundingClientRect().height,1,.5);n.style.setProperty("--f-drag-opacity",Oe+""),n.style.setProperty("--f-drag-offset",Kt+"px")}}));bt.on("start",(function(){Ue.pause(),Ut=Kt})).on("panstart",(dt=>{var Ot;const Oe=dt.srcEvent.target;Oe&&!g2(Oe)&&((Ot=i==null?void 0:i.getViewport())===null||Ot===void 0||Ot.classList.add("is-dragging"))})).on("pan",(function(dt){const Ot=dt.srcEvent.target;Ot&&g2(Ot)||i!=null&&i.getViewport()&&dt.axis==="y"&&(Ut+=dt.deltaY,Ue.spring({clamp:!0,mass:1,tension:860,friction:17,restDelta:.01,restSpeed:.01}).from({y:Kt}).to({y:Ut}).start())})).on("end",(function(dt){Ue.pause(),dt.axis==="y"&&Math.abs(dt.velocityY)>5&&Math.abs(Ut)>0&&(Jt(dt.srcEvent,"f-throwOut"+(dt.velocityY>0?"Down":"Up")),f===zu.Closing)||Kt!==0&&(Ut=0,Ue.spring({clamp:!0,mass:1,tension:140,friction:25,restDelta:.1,restSpeed:.1,maxSpeed:1/0}).from({y:Kt}).to({y:0}).start())}))})(),document.body.addEventListener("click",Ze),document.body.addEventListener("keydown",Ke,{passive:!1,capture:!0}),be(),io();const Xt=N("sync");Xt&&((yt=Xt.getTween())===null||yt===void 0||yt.start())}function we(){i!=null&&i.canGoNext()?io():Et()}function Ne(yt,Xt){z(Xt),$t(Xt)}function De(){var yt;const Xt=i==null?void 0:i.getPlugins().Thumbs;Kp(n,"has-thumbs",(Xt==null?void 0:Xt.isEnabled())||!1),Kp(n,"has-vertical-thumbs",((yt=Xt==null?void 0:Xt.getCarousel())===null||yt===void 0?void 0:yt.isVertical())||!1)}function be(){if(n){const yt=(i==null?void 0:i.getPages())||[],Xt=(i==null?void 0:i.getPageIndex())||0;for(const Wn of n.querySelectorAll("[data-fancybox-index]"))Wn.innerHTML=Xt+"";for(const Wn of n.querySelectorAll("[data-fancybox-page]"))Wn.innerHTML=Xt+1+"";for(const Wn of n.querySelectorAll("[data-fancybox-pages]"))Wn.innerHTML=yt.length+""}}function me(yt){if(yt.composedPath()[0].closest("[data-fancybox-close]"))return void Jt(yt);H("backdropClick",yt),!yt.defaultPrevented&&N("backdropClick")&&Jt(yt)}function Ye(){Zn()}function Ke(yt){if(!Be()||f!==zu.Ready)return;const Xt=yt.key,Wn=N("keyboard");if(!Wn||yt.ctrlKey||yt.altKey||yt.shiftKey)return;const bt=yt.composedPath()[0];if(!IP(bt)||Xt!=="Escape"&&(Ut=>{const Ue=["input","textarea","select","option","video","iframe","[contenteditable]","[data-selectable]","[data-draggable]"].join(",");return Ut.matches(Ue)||Ut.closest(Ue)})(bt)||(H("keydown",yt),yt.defaultPrevented))return;const Kt=Wn[Xt];if(Kt)switch(Kt){case"close":Jt(yt);break;case"next":yt.preventDefault(),i==null||i.next();break;case"prev":yt.preventDefault(),i==null||i.prev()}}function Ze(yt){if(!Be()||f!==zu.Ready||(Zn(),yt.defaultPrevented))return;const Xt=yt.composedPath()[0],Wn=!!Xt.closest("[data-fancybox-close]"),bt=Xt.classList.contains("fancybox__backdrop");(Wn||bt)&&me(yt)}function z(yt){var Xt;const{el:Wn,htmlEl:bt,closeButtonEl:Kt}=yt;if(!Wn||!bt||Kt)return;let Ut=N("closeButton");if(Ut==="auto"&&(Ut=((Xt=i==null?void 0:i.getPlugins().Toolbar)===null||Xt===void 0?void 0:Xt.isEnabled())!==!0),Ut){const Ue=zA(L(tIe));Ue&&(oi(Ue,"is-close-button"),yt.closeButtonEl=bt.insertAdjacentElement("afterbegin",Ue),Wn.classList.add("has-close-btn"))}}function $t(yt){if(!(R&&i&&i.getState()===1&&yt&&yt.index===i.getOptions().initialPage&&yt.el&&yt.el.parentElement)||yt.state!==void 0&&yt.state!==1)return;R=!1;const Xt=yt.panzoomRef,Wn=Xt==null?void 0:Xt.getTween(),bt=N("zoomEffect")&&Wn?$e(yt):void 0;if(Xt&&Wn&&bt){const{x:Ut,y:Ue,scale:dt}=Xt.getStartPosition();return void Wn.spring({tension:215,friction:25,restDelta:.001,restSpeed:.001,maxSpeed:1/0}).from(bt).to({x:Ut,y:Ue,scale:dt}).start()}const Kt=(Xt==null?void 0:Xt.getContent())||yt.htmlEl;Kt&&S1e(Kt,N("showClass",yt))}function Be(){var yt;return((yt=ol.getInstance())===null||yt===void 0?void 0:yt.getId())===v}function at(){var yt;return(yt=i==null?void 0:i.getPage())===null||yt===void 0?void 0:yt.slides[0]}function lt(){const yt=at();return yt?yt.triggerEl||N("triggerEl"):void 0}function $e(yt){var Xt,Wn;const bt=yt.thumbEl;if(!bt||!(tn=>{const ht=tn.getBoundingClientRect(),gt=tn.closest("[style]"),No=gt==null?void 0:gt.parentElement;if(gt&&gt.style.transform&&No){const Jn=No.getBoundingClientRect();if(ht.left<Jn.left||ht.left>Jn.left+Jn.width-ht.width||ht.top<Jn.top||ht.top>Jn.top+Jn.height-ht.height)return!1}const Ko=Math.max(document.documentElement.clientHeight,window.innerHeight),Wo=Math.max(document.documentElement.clientWidth,window.innerWidth);return!(ht.bottom<0||ht.top-Ko>=0||ht.right<0||ht.left-Wo>=0)})(bt))return;const Kt=(Wn=(Xt=yt.panzoomRef)===null||Xt===void 0?void 0:Xt.getWrapper())===null||Wn===void 0?void 0:Wn.getBoundingClientRect(),Ut=Kt==null?void 0:Kt.width,Ue=Kt==null?void 0:Kt.height;if(!Ut||!Ue)return;const dt=bt.getBoundingClientRect();let Ot=dt.width,Oe=dt.height,pt=dt.left,Bt=dt.top;if(!(!dt||!Ot||!Oe)){if(bt instanceof HTMLImageElement){const tn=window.getComputedStyle(bt).getPropertyValue("object-fit");if(tn==="contain"||tn==="scale-down"){const{width:ht,height:gt}=((No,Ko,Wo,Jn,ys="contain")=>{if(ys==="contain"||No>Wo||Ko>Jn){const ps=Wo/No,es=Jn/Ko,is=Math.min(ps,es);No*=is,Ko*=is}return{width:No,height:Ko}})(bt.naturalWidth,bt.naturalHeight,Ot,Oe,tn);pt+=.5*(Ot-ht),Bt+=.5*(Oe-gt),Ot=ht,Oe=gt}}if(!(Math.abs(Ut/Ue-Ot/Oe)>.1))return{x:pt+.5*Ot-(Kt.left+.5*Ut),y:Bt+.5*Oe-(Kt.top+.5*Ue),scale:Ot/Ut}}}function qt(){l&&clearTimeout(l),l=void 0,document.removeEventListener("mousemove",Ye)}function io(){if(A||l)return;const yt=N("idle");yt&&(l=setTimeout(En,yt))}function En(){n&&(qt(),oi(n,"is-idle"),document.addEventListener("mousemove",Ye),A=!0)}function Zn(){A&&(Et(),io())}function Et(){qt(),n==null||n.classList.remove("is-idle"),A=!1}function Jt(yt,Xt){var Wn,bt,Kt,Ut,Ue,dt,Ot;if(f===zu.Closing||f===zu.Destroyed)return;const Oe=new Event("shouldClose",{bubbles:!0,cancelable:!0});if(H("shouldClose",Oe,yt),Oe.defaultPrevented)return;if(qt(),yt){if(yt.defaultPrevented)return;yt.cancelable&&yt.preventDefault(),yt.stopPropagation(),yt.stopImmediatePropagation()}if(f=zu.Closing,i){(Wn=i.getGestures())===null||Wn===void 0||Wn.destroy(),(bt=i.getTween())===null||bt===void 0||bt.pause();const tn=at(),ht=tn==null?void 0:tn.panzoomRef;tn&&ht&&ng(ht.getOptions(),{clickAction:!1,wheelAction:!1,bounds:!1,minScale:0,maxScale:1/0});for(const gt of i.getSlides())(Ut=(Kt=gt.panzoomRef)===null||Kt===void 0?void 0:Kt.getGestures())===null||Ut===void 0||Ut.destroy(),(dt=(Ue=gt.panzoomRef)===null||Ue===void 0?void 0:Ue.getTween())===null||dt===void 0||dt.pause()}const pt=i==null?void 0:i.getPlugins();(Ot=pt==null?void 0:pt.Autoplay)===null||Ot===void 0||Ot.stop();const Bt=pt==null?void 0:pt.Fullscreen;Bt&&Bt.inFullscreen()?Promise.resolve(Bt.exit()).then((()=>{setTimeout((()=>{ce(yt,Xt)}),150)})):ce(yt,Xt)}function ce(yt,Xt){var Wn,bt,Kt,Ut,Ue;if(f!==zu.Closing)return;if(H("close",yt),document.body.removeEventListener("click",Ze),document.body.removeEventListener("keydown",Ke,{passive:!1,capture:!0}),N("placeFocusBack")){const gt=lt();!gt||(Ue=gt.getBoundingClientRect()).bottom>0&&Ue.right>0&&Ue.left<(window.innerWidth||document.documentElement.clientWidth)&&Ue.top<(window.innerHeight||document.documentElement.clientHeight)||gt.scrollIntoView({behavior:"instant",block:"center",inline:"center"})}N("fadeEffect")&&(n==null||n.classList.remove("is-ready"),n==null||n.classList.add("is-hiding")),n==null||n.classList.add("is-closing");const dt=at(),Ot=dt==null?void 0:dt.panzoomRef,Oe=(Wn=dt==null?void 0:dt.panzoomRef)===null||Wn===void 0?void 0:Wn.getTween(),pt=Xt||N("hideClass");let Bt=!1,tn=!1;if(i&&dt&&Ot&&Oe){let gt;N("zoomEffect")&&(((Kt=(bt=i.getTween())===null||bt===void 0?void 0:bt.getCurrentVelocities())===null||Kt===void 0?void 0:Kt.pos)||0)<700&&dt.state===1&&(gt=$e(dt)),gt&&(Bt=!0,i.on("refresh",(()=>{const No=$e(dt);No&&Oe.to(Object.assign(Object.assign({},H0),No))})),Oe.easing(WA.Easings.EaseOut).duration(350).from(Object.assign({},Ot.getTransform())).to(Object.assign(Object.assign({},H0),gt)).start())}const ht=(dt==null?void 0:dt.htmlEl)||((Ut=dt==null?void 0:dt.panzoomRef)===null||Ut===void 0?void 0:Ut.getWrapper());ht&&nIe(ht),!Bt&&pt&&ht&&(tn=!0,S1e(ht,pt,(()=>{Hs()}))),Bt||tn?setTimeout((()=>{Hs()}),350):Hs()}function Hs(){var yt,Xt,Wn,bt,Kt;if(f===zu.Destroyed)return;f=zu.Destroyed;const Ut=lt();H("destroy"),(Xt=(yt=N("sync"))===null||yt===void 0?void 0:yt.getPlugins().Autoplay)===null||Xt===void 0||Xt.resume(),(bt=(Wn=N("sync"))===null||Wn===void 0?void 0:Wn.getPlugins().Autoscroll)===null||bt===void 0||bt.resume(),e instanceof HTMLDialogElement&&e.close(),(Kt=i==null?void 0:i.getContainer())===null||Kt===void 0||Kt.classList.remove("is-idle"),i==null||i.destroy();for(const Ue of Object.values(y))Ue==null||Ue.destroy();if(y={},e==null||e.remove(),e=void 0,n=void 0,i=void 0,qC.delete(v),!qC.size&&(o1e(!1),document.documentElement.classList.remove(C1e),N("placeFocusBack")))try{Ut==null||Ut.focus({preventScroll:!0})}catch{}}const Fo={close:Jt,destroy:Hs,getCarousel:function(){return i},getContainer:function(){return n},getId:function(){return v},getOptions:function(){return h},getPlugins:function(){return y},getSlide:function(){return at()},getState:function(){return f},init:function(yt=[],Xt={}){return q(yt,Xt),Fo},isCurrentSlide:function(yt){const Xt=at();return!(!yt||!Xt)&&Xt.index===yt.index},isTopMost:function(){return Be()},off:function(yt,Xt){return B.has(yt)&&B.set(yt,B.get(yt).filter((Wn=>Wn!==Xt))),Fo},on:function(yt,Xt){return B.set(yt,[...B.get(yt)||[],Xt]),Fo},toggleIdle(yt){(A||yt===!0)&&En(),A&&yt!==!1||Et()}};return Fo},ol={Plugins:{Hash:the},version:"6.0.32",openers:new Map,bind:function(e,n,r){if(!YOe())return;let i=document.body,l="[data-fancybox]",f={};if(df(e)?(i=document.body,l=e,typeof n=="object"&&(f=n||{})):e instanceof Element&&(i=e,df(n)&&(l=n),typeof r=="object"&&(f=r||{})),!(i&&i instanceof Element&&l))return!1;const h=ol.openers.get(i)||new Map;if(h.set(l,f),ol.openers.set(i,h),h.size===1){i.addEventListener("click",ol.fromEvent);for(const v of Object.values(ol.Plugins)){const y=v.setup;typeof y=="function"&&y(ol)}}return!0},close:function(e=!0,...n){if(e)for(const r of qC.values())r.close(...n);else{const r=ol.getInstance();r&&r.close(...n)}},destroy:function(){let e;for(;e=ol.getInstance();)e.destroy();for(const n of ol.openers.keys())n.removeEventListener("click",ol.fromEvent);ol.openers.clear()},fromEvent:function(e){var n,r,i;if(e.defaultPrevented||e.button&&e.button!==0||e.ctrlKey||e.metaKey||e.shiftKey)return;let l=e.composedPath()[0];if(l.closest(".fancybox__container.is-hiding"))return e.preventDefault(),void e.stopPropagation();const f=l.closest("[data-fancybox-delegate]")||void 0;if(f){const H=f.dataset.fancyboxDelegate||"",q=document.querySelectorAll(`[data-fancybox="${H}"]`);l=q[parseInt(f.dataset.fancyboxIndex||"",10)||0]||q[0]}if(!(l&&l instanceof Element))return;let h,v,y={};for(const[H,q]of ol.openers)if(q&&H.contains(l))for(const[Y,K]of q){let se=null;try{se=l.closest(Y)}catch{}se&&(l=se,h=H,v=Y,ng(y,K||{}))}if(!h||!v)return;e.preventDefault();const _=ng({},GU,{triggerEvent:e,triggerEl:l,delegateEl:f},y),A=_.groupAll,R=_.groupAttr,k=R&&l?l.getAttribute(`${R}`):"";let N=[];const L=(n=l.closest(".f-carousel"))===null||n===void 0?void 0:n.carousel;if(L){const H=[];for(const q of L==null?void 0:L.getSlides()){const Y=q.el;Y&&(Y.matches(v)?H.push(Y):H.push(...[].slice.call(Y.querySelectorAll(v))))}H.length&&(N=[...H],(r=L.getPlugins().Autoplay)===null||r===void 0||r.pause(),(i=L.getPlugins().Autoscroll)===null||i===void 0||i.pause(),_.sync=L)}else(!l||k||A)&&(N=[].slice.call(h.querySelectorAll(v)));if(l&&!A&&(N=R&&k?N.filter((H=>H.getAttribute(`${R}`)===k)):[l]),!N.length)return;const B=ol.getInstance();if(B){const H=B.getOptions().triggerEl;if(H&&N.indexOf(H)>-1)return}return Object.assign({},_.Carousel||{}).rtl&&(N=N.reverse()),l&&(_.startIndex=N.indexOf(l)),ol.fromNodes(N,_)},fromNodes:function(e,n){n=ng({},GU,n||{});const r=[],i=l=>l instanceof HTMLImageElement?l:l instanceof HTMLElement?l.querySelector("img:not([aria-hidden])"):void 0;for(const l of e){const f=l.dataset||{},h=n.delegateEl&&e.indexOf(l)===n.startIndex?n.delegateEl:void 0,v=i(h)||i(l)||void 0,y=f.src||l.getAttribute("href")||l.getAttribute("currentSrc")||l.getAttribute("src")||void 0,_=f.thumb||f.thumbSrc||(v==null?void 0:v.getAttribute("currentSrc"))||(v==null?void 0:v.getAttribute("src"))||(v==null?void 0:v.dataset.lazySrc)||void 0,A={src:y,alt:f.alt||(v==null?void 0:v.getAttribute("alt"))||void 0,thumbSrc:_,thumbEl:v,triggerEl:l,delegateEl:h};for(const R in f){let k=f[R]+"";k=k!=="false"&&(k==="true"||k),A[R]=k}r.push(A)}return ol.show(r,n)},fromSelector:function(e,n,r){let i=document.body,l="",f={};if(df(e)?l=e:e instanceof Element&&(i=e,df(n)&&(l=n),typeof r=="object"&&(f=r||{})),!(i&&i instanceof Element&&l))return;const h=ol.openers.get(i);return h?(f=ng({},h.get(l)||{},f),f?ol.fromNodes(Array.from(i.querySelectorAll(l)),f):void 0):void 0},getCarousel:function(){var e;return((e=ol.getInstance())===null||e===void 0?void 0:e.getCarousel())||void 0},getDefaults:function(){return GU},getInstance:function(e){if(e){const n=qC.get(e);return n&&n.getState()!==zu.Destroyed?n:void 0}return Array.from(qC.values()).reverse().find((n=>{if(n.getState()!==zu.Destroyed)return n}))||void 0},getSlide:function(){var e;return((e=ol.getInstance())===null||e===void 0?void 0:e.getSlide())||void 0},show:function(e=[],n={}){return k3e().init(e,n)},unbind:function(e,n){let r=document.body,i="";if(df(e)?i=e:e instanceof Element&&(r=e,df(n)&&(i=n)),r){const l=ol.openers.get(r);l&&i&&l.delete(i),l!=null&&l.size&&i||ol.openers.delete(r),r.removeEventListener("click",ol.fromEvent)}}};function oIe(e,n){return function(){return e.apply(n,arguments)}}const{toString:M3e}=Object.prototype,{getPrototypeOf:bve}=Object,{iterator:JX,toStringTag:sIe}=Symbol,XX=(e=>n=>{const r=M3e.call(n);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),J0=e=>(e=e.toLowerCase(),n=>XX(n)===e),QX=e=>n=>typeof n===e,{isArray:HL}=Array,mL=QX("undefined");function Y5(e){return e!==null&&!mL(e)&&e.constructor!==null&&!mL(e.constructor)&&cg(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const rIe=J0("ArrayBuffer");function N3e(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&rIe(e.buffer),n}const P3e=QX("string"),cg=QX("function"),iIe=QX("number"),J5=e=>e!==null&&typeof e=="object",L3e=e=>e===!0||e===!1,aY=e=>{if(XX(e)!=="object")return!1;const n=bve(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(sIe in e)&&!(JX in e)},B3e=e=>{if(!J5(e)||Y5(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},V3e=J0("Date"),H3e=J0("File"),F3e=J0("Blob"),$3e=J0("FileList"),U3e=e=>J5(e)&&cg(e.pipe),j3e=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||cg(e.append)&&((n=XX(e))==="formdata"||n==="object"&&cg(e.toString)&&e.toString()==="[object FormData]"))},z3e=J0("URLSearchParams"),[W3e,G3e,q3e,K3e]=["ReadableStream","Request","Response","Headers"].map(J0),Z3e=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function X5(e,n,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let i,l;if(typeof e!="object"&&(e=[e]),HL(e))for(i=0,l=e.length;i<l;i++)n.call(null,e[i],i,e);else{if(Y5(e))return;const f=r?Object.getOwnPropertyNames(e):Object.keys(e),h=f.length;let v;for(i=0;i<h;i++)v=f[i],n.call(null,e[v],v,e)}}function aIe(e,n){if(Y5(e))return null;n=n.toLowerCase();const r=Object.keys(e);let i=r.length,l;for(;i-- >0;)if(l=r[i],n===l.toLowerCase())return l;return null}const s2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,cIe=e=>!mL(e)&&e!==s2;function nhe(){const{caseless:e,skipUndefined:n}=cIe(this)&&this||{},r={},i=(l,f)=>{const h=e&&aIe(r,f)||f;aY(r[h])&&aY(l)?r[h]=nhe(r[h],l):aY(l)?r[h]=nhe({},l):HL(l)?r[h]=l.slice():(!n||!mL(l))&&(r[h]=l)};for(let l=0,f=arguments.length;l<f;l++)arguments[l]&&X5(arguments[l],i);return r}const Y3e=(e,n,r,{allOwnKeys:i}={})=>(X5(n,(l,f)=>{r&&cg(l)?e[f]=oIe(l,r):e[f]=l},{allOwnKeys:i}),e),J3e=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),X3e=(e,n,r,i)=>{e.prototype=Object.create(n.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),r&&Object.assign(e.prototype,r)},Q3e=(e,n,r,i)=>{let l,f,h;const v={};if(n=n||{},e==null)return n;do{for(l=Object.getOwnPropertyNames(e),f=l.length;f-- >0;)h=l[f],(!i||i(h,e,n))&&!v[h]&&(n[h]=e[h],v[h]=!0);e=r!==!1&&bve(e)}while(e&&(!r||r(e,n))&&e!==Object.prototype);return n},eBe=(e,n,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=n.length;const i=e.indexOf(n,r);return i!==-1&&i===r},tBe=e=>{if(!e)return null;if(HL(e))return e;let n=e.length;if(!iIe(n))return null;const r=new Array(n);for(;n-- >0;)r[n]=e[n];return r},nBe=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&bve(Uint8Array)),oBe=(e,n)=>{const i=(e&&e[JX]).call(e);let l;for(;(l=i.next())&&!l.done;){const f=l.value;n.call(e,f[0],f[1])}},sBe=(e,n)=>{let r;const i=[];for(;(r=e.exec(n))!==null;)i.push(r);return i},rBe=J0("HTMLFormElement"),iBe=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,i,l){return i.toUpperCase()+l}),E1e=(({hasOwnProperty:e})=>(n,r)=>e.call(n,r))(Object.prototype),aBe=J0("RegExp"),lIe=(e,n)=>{const r=Object.getOwnPropertyDescriptors(e),i={};X5(r,(l,f)=>{let h;(h=n(l,f,e))!==!1&&(i[f]=h||l)}),Object.defineProperties(e,i)},cBe=e=>{lIe(e,(n,r)=>{if(cg(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const i=e[r];if(cg(i)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},lBe=(e,n)=>{const r={},i=l=>{l.forEach(f=>{r[f]=!0})};return HL(e)?i(e):i(String(e).split(n)),r},uBe=()=>{},dBe=(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n;function fBe(e){return!!(e&&cg(e.append)&&e[sIe]==="FormData"&&e[JX])}const pBe=e=>{const n=new Array(10),r=(i,l)=>{if(J5(i)){if(n.indexOf(i)>=0)return;if(Y5(i))return i;if(!("toJSON"in i)){n[l]=i;const f=HL(i)?[]:{};return X5(i,(h,v)=>{const y=r(h,l+1);!mL(y)&&(f[v]=y)}),n[l]=void 0,f}}return i};return r(e,0)},hBe=J0("AsyncFunction"),mBe=e=>e&&(J5(e)||cg(e))&&cg(e.then)&&cg(e.catch),uIe=((e,n)=>e?setImmediate:n?((r,i)=>(s2.addEventListener("message",({source:l,data:f})=>{l===s2&&f===r&&i.length&&i.shift()()},!1),l=>{i.push(l),s2.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",cg(s2.postMessage)),gBe=typeof queueMicrotask<"u"?queueMicrotask.bind(s2):typeof process<"u"&&process.nextTick||uIe,vBe=e=>e!=null&&cg(e[JX]),_n={isArray:HL,isArrayBuffer:rIe,isBuffer:Y5,isFormData:j3e,isArrayBufferView:N3e,isString:P3e,isNumber:iIe,isBoolean:L3e,isObject:J5,isPlainObject:aY,isEmptyObject:B3e,isReadableStream:W3e,isRequest:G3e,isResponse:q3e,isHeaders:K3e,isUndefined:mL,isDate:V3e,isFile:H3e,isBlob:F3e,isRegExp:aBe,isFunction:cg,isStream:U3e,isURLSearchParams:z3e,isTypedArray:nBe,isFileList:$3e,forEach:X5,merge:nhe,extend:Y3e,trim:Z3e,stripBOM:J3e,inherits:X3e,toFlatObject:Q3e,kindOf:XX,kindOfTest:J0,endsWith:eBe,toArray:tBe,forEachEntry:oBe,matchAll:sBe,isHTMLForm:rBe,hasOwnProperty:E1e,hasOwnProp:E1e,reduceDescriptors:lIe,freezeMethods:cBe,toObjectSet:lBe,toCamelCase:iBe,noop:uBe,toFiniteNumber:dBe,findKey:aIe,global:s2,isContextDefined:cIe,isSpecCompliantForm:fBe,toJSONObject:pBe,isAsyncFn:hBe,isThenable:mBe,setImmediate:uIe,asap:gBe,isIterable:vBe};function jr(e,n,r,i,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),r&&(this.config=r),i&&(this.request=i),l&&(this.response=l,this.status=l.status?l.status:null)}_n.inherits(jr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_n.toJSONObject(this.config),code:this.code,status:this.status}}});const dIe=jr.prototype,fIe={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{fIe[e]={value:e}});Object.defineProperties(jr,fIe);Object.defineProperty(dIe,"isAxiosError",{value:!0});jr.from=(e,n,r,i,l,f)=>{const h=Object.create(dIe);_n.toFlatObject(e,h,function(A){return A!==Error.prototype},_=>_!=="isAxiosError");const v=e&&e.message?e.message:"Error",y=n==null&&e?e.code:n;return jr.call(h,v,y,r,i,l),e&&h.cause==null&&Object.defineProperty(h,"cause",{value:e,configurable:!0}),h.name=e&&e.name||"Error",f&&Object.assign(h,f),h};const bBe=null;function ohe(e){return _n.isPlainObject(e)||_n.isArray(e)}function pIe(e){return _n.endsWith(e,"[]")?e.slice(0,-2):e}function _1e(e,n,r){return e?e.concat(n).map(function(l,f){return l=pIe(l),!r&&f?"["+l+"]":l}).join(r?".":""):n}function yBe(e){return _n.isArray(e)&&!e.some(ohe)}const SBe=_n.toFlatObject(_n,{},null,function(n){return/^is[A-Z]/.test(n)});function eQ(e,n,r){if(!_n.isObject(e))throw new TypeError("target must be an object");n=n||new FormData,r=_n.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(B,H){return!_n.isUndefined(H[B])});const i=r.metaTokens,l=r.visitor||A,f=r.dots,h=r.indexes,y=(r.Blob||typeof Blob<"u"&&Blob)&&_n.isSpecCompliantForm(n);if(!_n.isFunction(l))throw new TypeError("visitor must be a function");function _(L){if(L===null)return"";if(_n.isDate(L))return L.toISOString();if(_n.isBoolean(L))return L.toString();if(!y&&_n.isBlob(L))throw new jr("Blob is not supported. Use a Buffer instead.");return _n.isArrayBuffer(L)||_n.isTypedArray(L)?y&&typeof Blob=="function"?new Blob([L]):Buffer.from(L):L}function A(L,B,H){let q=L;if(L&&!H&&typeof L=="object"){if(_n.endsWith(B,"{}"))B=i?B:B.slice(0,-2),L=JSON.stringify(L);else if(_n.isArray(L)&&yBe(L)||(_n.isFileList(L)||_n.endsWith(B,"[]"))&&(q=_n.toArray(L)))return B=pIe(B),q.forEach(function(K,se){!(_n.isUndefined(K)||K===null)&&n.append(h===!0?_1e([B],se,f):h===null?B:B+"[]",_(K))}),!1}return ohe(L)?!0:(n.append(_1e(H,B,f),_(L)),!1)}const R=[],k=Object.assign(SBe,{defaultVisitor:A,convertValue:_,isVisitable:ohe});function N(L,B){if(!_n.isUndefined(L)){if(R.indexOf(L)!==-1)throw Error("Circular reference detected in "+B.join("."));R.push(L),_n.forEach(L,function(q,Y){(!(_n.isUndefined(q)||q===null)&&l.call(n,q,_n.isString(Y)?Y.trim():Y,B,k))===!0&&N(q,B?B.concat(Y):[Y])}),R.pop()}}if(!_n.isObject(e))throw new TypeError("data must be an object");return N(e),n}function w1e(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return n[i]})}function yve(e,n){this._pairs=[],e&&eQ(e,this,n)}const hIe=yve.prototype;hIe.append=function(n,r){this._pairs.push([n,r])};hIe.toString=function(n){const r=n?function(i){return n.call(this,i,w1e)}:w1e;return this._pairs.map(function(l){return r(l[0])+"="+r(l[1])},"").join("&")};function CBe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function mIe(e,n,r){if(!n)return e;const i=r&&r.encode||CBe;_n.isFunction(r)&&(r={serialize:r});const l=r&&r.serialize;let f;if(l?f=l(n,r):f=_n.isURLSearchParams(n)?n.toString():new yve(n,r).toString(i),f){const h=e.indexOf("#");h!==-1&&(e=e.slice(0,h)),e+=(e.indexOf("?")===-1?"?":"&")+f}return e}class A1e{constructor(){this.handlers=[]}use(n,r,i){return this.handlers.push({fulfilled:n,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){_n.forEach(this.handlers,function(i){i!==null&&n(i)})}}const gIe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},EBe=typeof URLSearchParams<"u"?URLSearchParams:yve,_Be=typeof FormData<"u"?FormData:null,wBe=typeof Blob<"u"?Blob:null,ABe={isBrowser:!0,classes:{URLSearchParams:EBe,FormData:_Be,Blob:wBe},protocols:["http","https","file","blob","url","data"]},Sve=typeof window<"u"&&typeof document<"u",she=typeof navigator=="object"&&navigator||void 0,TBe=Sve&&(!she||["ReactNative","NativeScript","NS"].indexOf(she.product)<0),OBe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",IBe=Sve&&window.location.href||"http://localhost",RBe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Sve,hasStandardBrowserEnv:TBe,hasStandardBrowserWebWorkerEnv:OBe,navigator:she,origin:IBe},Symbol.toStringTag,{value:"Module"})),Jp={...RBe,...ABe};function xBe(e,n){return eQ(e,new Jp.classes.URLSearchParams,{visitor:function(r,i,l,f){return Jp.isNode&&_n.isBuffer(r)?(this.append(i,r.toString("base64")),!1):f.defaultVisitor.apply(this,arguments)},...n})}function DBe(e){return _n.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function kBe(e){const n={},r=Object.keys(e);let i;const l=r.length;let f;for(i=0;i<l;i++)f=r[i],n[f]=e[f];return n}function vIe(e){function n(r,i,l,f){let h=r[f++];if(h==="__proto__")return!0;const v=Number.isFinite(+h),y=f>=r.length;return h=!h&&_n.isArray(l)?l.length:h,y?(_n.hasOwnProp(l,h)?l[h]=[l[h],i]:l[h]=i,!v):((!l[h]||!_n.isObject(l[h]))&&(l[h]=[]),n(r,i,l[h],f)&&_n.isArray(l[h])&&(l[h]=kBe(l[h])),!v)}if(_n.isFormData(e)&&_n.isFunction(e.entries)){const r={};return _n.forEachEntry(e,(i,l)=>{n(DBe(i),l,r,0)}),r}return null}function MBe(e,n,r){if(_n.isString(e))try{return(n||JSON.parse)(e),_n.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(e)}const Q5={transitional:gIe,adapter:["xhr","http","fetch"],transformRequest:[function(n,r){const i=r.getContentType()||"",l=i.indexOf("application/json")>-1,f=_n.isObject(n);if(f&&_n.isHTMLForm(n)&&(n=new FormData(n)),_n.isFormData(n))return l?JSON.stringify(vIe(n)):n;if(_n.isArrayBuffer(n)||_n.isBuffer(n)||_n.isStream(n)||_n.isFile(n)||_n.isBlob(n)||_n.isReadableStream(n))return n;if(_n.isArrayBufferView(n))return n.buffer;if(_n.isURLSearchParams(n))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let v;if(f){if(i.indexOf("application/x-www-form-urlencoded")>-1)return xBe(n,this.formSerializer).toString();if((v=_n.isFileList(n))||i.indexOf("multipart/form-data")>-1){const y=this.env&&this.env.FormData;return eQ(v?{"files[]":n}:n,y&&new y,this.formSerializer)}}return f||l?(r.setContentType("application/json",!1),MBe(n)):n}],transformResponse:[function(n){const r=this.transitional||Q5.transitional,i=r&&r.forcedJSONParsing,l=this.responseType==="json";if(_n.isResponse(n)||_n.isReadableStream(n))return n;if(n&&_n.isString(n)&&(i&&!this.responseType||l)){const h=!(r&&r.silentJSONParsing)&&l;try{return JSON.parse(n,this.parseReviver)}catch(v){if(h)throw v.name==="SyntaxError"?jr.from(v,jr.ERR_BAD_RESPONSE,this,null,this.response):v}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Jp.classes.FormData,Blob:Jp.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_n.forEach(["delete","get","head","post","put","patch"],e=>{Q5.headers[e]={}});const NBe=_n.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),PBe=e=>{const n={};let r,i,l;return e&&e.split(`
`).forEach(function(h){l=h.indexOf(":"),r=h.substring(0,l).trim().toLowerCase(),i=h.substring(l+1).trim(),!(!r||n[r]&&NBe[r])&&(r==="set-cookie"?n[r]?n[r].push(i):n[r]=[i]:n[r]=n[r]?n[r]+", "+i:i)}),n},T1e=Symbol("internals");function aU(e){return e&&String(e).trim().toLowerCase()}function cY(e){return e===!1||e==null?e:_n.isArray(e)?e.map(cY):String(e)}function LBe(e){const n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=r.exec(e);)n[i[1]]=i[2];return n}const BBe=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ffe(e,n,r,i,l){if(_n.isFunction(i))return i.call(this,n,r);if(l&&(n=r),!!_n.isString(n)){if(_n.isString(i))return n.indexOf(i)!==-1;if(_n.isRegExp(i))return i.test(n)}}function VBe(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,r,i)=>r.toUpperCase()+i)}function HBe(e,n){const r=_n.toCamelCase(" "+n);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+r,{value:function(l,f,h){return this[i].call(this,n,l,f,h)},configurable:!0})})}let lg=class{constructor(n){n&&this.set(n)}set(n,r,i){const l=this;function f(v,y,_){const A=aU(y);if(!A)throw new Error("header name must be a non-empty string");const R=_n.findKey(l,A);(!R||l[R]===void 0||_===!0||_===void 0&&l[R]!==!1)&&(l[R||y]=cY(v))}const h=(v,y)=>_n.forEach(v,(_,A)=>f(_,A,y));if(_n.isPlainObject(n)||n instanceof this.constructor)h(n,r);else if(_n.isString(n)&&(n=n.trim())&&!BBe(n))h(PBe(n),r);else if(_n.isObject(n)&&_n.isIterable(n)){let v={},y,_;for(const A of n){if(!_n.isArray(A))throw TypeError("Object iterator must return a key-value pair");v[_=A[0]]=(y=v[_])?_n.isArray(y)?[...y,A[1]]:[y,A[1]]:A[1]}h(v,r)}else n!=null&&f(r,n,i);return this}get(n,r){if(n=aU(n),n){const i=_n.findKey(this,n);if(i){const l=this[i];if(!r)return l;if(r===!0)return LBe(l);if(_n.isFunction(r))return r.call(this,l,i);if(_n.isRegExp(r))return r.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,r){if(n=aU(n),n){const i=_n.findKey(this,n);return!!(i&&this[i]!==void 0&&(!r||ffe(this,this[i],i,r)))}return!1}delete(n,r){const i=this;let l=!1;function f(h){if(h=aU(h),h){const v=_n.findKey(i,h);v&&(!r||ffe(i,i[v],v,r))&&(delete i[v],l=!0)}}return _n.isArray(n)?n.forEach(f):f(n),l}clear(n){const r=Object.keys(this);let i=r.length,l=!1;for(;i--;){const f=r[i];(!n||ffe(this,this[f],f,n,!0))&&(delete this[f],l=!0)}return l}normalize(n){const r=this,i={};return _n.forEach(this,(l,f)=>{const h=_n.findKey(i,f);if(h){r[h]=cY(l),delete r[f];return}const v=n?VBe(f):String(f).trim();v!==f&&delete r[f],r[v]=cY(l),i[v]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const r=Object.create(null);return _n.forEach(this,(i,l)=>{i!=null&&i!==!1&&(r[l]=n&&_n.isArray(i)?i.join(", "):i)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,r])=>n+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...r){const i=new this(n);return r.forEach(l=>i.set(l)),i}static accessor(n){const i=(this[T1e]=this[T1e]={accessors:{}}).accessors,l=this.prototype;function f(h){const v=aU(h);i[v]||(HBe(l,h),i[v]=!0)}return _n.isArray(n)?n.forEach(f):f(n),this}};lg.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);_n.reduceDescriptors(lg.prototype,({value:e},n)=>{let r=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(i){this[r]=i}}});_n.freezeMethods(lg);function pfe(e,n){const r=this||Q5,i=n||r,l=lg.from(i.headers);let f=i.data;return _n.forEach(e,function(v){f=v.call(r,f,l.normalize(),n?n.status:void 0)}),l.normalize(),f}function bIe(e){return!!(e&&e.__CANCEL__)}function FL(e,n,r){jr.call(this,e??"canceled",jr.ERR_CANCELED,n,r),this.name="CanceledError"}_n.inherits(FL,jr,{__CANCEL__:!0});function yIe(e,n,r){const i=r.config.validateStatus;!r.status||!i||i(r.status)?e(r):n(new jr("Request failed with status code "+r.status,[jr.ERR_BAD_REQUEST,jr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function FBe(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function $Be(e,n){e=e||10;const r=new Array(e),i=new Array(e);let l=0,f=0,h;return n=n!==void 0?n:1e3,function(y){const _=Date.now(),A=i[f];h||(h=_),r[l]=y,i[l]=_;let R=f,k=0;for(;R!==l;)k+=r[R++],R=R%e;if(l=(l+1)%e,l===f&&(f=(f+1)%e),_-h<n)return;const N=A&&_-A;return N?Math.round(k*1e3/N):void 0}}function UBe(e,n){let r=0,i=1e3/n,l,f;const h=(_,A=Date.now())=>{r=A,l=null,f&&(clearTimeout(f),f=null),e(..._)};return[(..._)=>{const A=Date.now(),R=A-r;R>=i?h(_,A):(l=_,f||(f=setTimeout(()=>{f=null,h(l)},i-R)))},()=>l&&h(l)]}const _J=(e,n,r=3)=>{let i=0;const l=$Be(50,250);return UBe(f=>{const h=f.loaded,v=f.lengthComputable?f.total:void 0,y=h-i,_=l(y),A=h<=v;i=h;const R={loaded:h,total:v,progress:v?h/v:void 0,bytes:y,rate:_||void 0,estimated:_&&v&&A?(v-h)/_:void 0,event:f,lengthComputable:v!=null,[n?"download":"upload"]:!0};e(R)},r)},O1e=(e,n)=>{const r=e!=null;return[i=>n[0]({lengthComputable:r,total:e,loaded:i}),n[1]]},I1e=e=>(...n)=>_n.asap(()=>e(...n)),jBe=Jp.hasStandardBrowserEnv?((e,n)=>r=>(r=new URL(r,Jp.origin),e.protocol===r.protocol&&e.host===r.host&&(n||e.port===r.port)))(new URL(Jp.origin),Jp.navigator&&/(msie|trident)/i.test(Jp.navigator.userAgent)):()=>!0,zBe=Jp.hasStandardBrowserEnv?{write(e,n,r,i,l,f){const h=[e+"="+encodeURIComponent(n)];_n.isNumber(r)&&h.push("expires="+new Date(r).toGMTString()),_n.isString(i)&&h.push("path="+i),_n.isString(l)&&h.push("domain="+l),f===!0&&h.push("secure"),document.cookie=h.join("; ")},read(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function WBe(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function GBe(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function SIe(e,n,r){let i=!WBe(n);return e&&(i||r==!1)?GBe(e,n):n}const R1e=e=>e instanceof lg?{...e}:e;function L2(e,n){n=n||{};const r={};function i(_,A,R,k){return _n.isPlainObject(_)&&_n.isPlainObject(A)?_n.merge.call({caseless:k},_,A):_n.isPlainObject(A)?_n.merge({},A):_n.isArray(A)?A.slice():A}function l(_,A,R,k){if(_n.isUndefined(A)){if(!_n.isUndefined(_))return i(void 0,_,R,k)}else return i(_,A,R,k)}function f(_,A){if(!_n.isUndefined(A))return i(void 0,A)}function h(_,A){if(_n.isUndefined(A)){if(!_n.isUndefined(_))return i(void 0,_)}else return i(void 0,A)}function v(_,A,R){if(R in n)return i(_,A);if(R in e)return i(void 0,_)}const y={url:f,method:f,data:f,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:v,headers:(_,A,R)=>l(R1e(_),R1e(A),R,!0)};return _n.forEach(Object.keys({...e,...n}),function(A){const R=y[A]||l,k=R(e[A],n[A],A);_n.isUndefined(k)&&R!==v||(r[A]=k)}),r}const CIe=e=>{const n=L2({},e);let{data:r,withXSRFToken:i,xsrfHeaderName:l,xsrfCookieName:f,headers:h,auth:v}=n;if(n.headers=h=lg.from(h),n.url=mIe(SIe(n.baseURL,n.url,n.allowAbsoluteUrls),e.params,e.paramsSerializer),v&&h.set("Authorization","Basic "+btoa((v.username||"")+":"+(v.password?unescape(encodeURIComponent(v.password)):""))),_n.isFormData(r)){if(Jp.hasStandardBrowserEnv||Jp.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if(_n.isFunction(r.getHeaders)){const y=r.getHeaders(),_=["content-type","content-length"];Object.entries(y).forEach(([A,R])=>{_.includes(A.toLowerCase())&&h.set(A,R)})}}if(Jp.hasStandardBrowserEnv&&(i&&_n.isFunction(i)&&(i=i(n)),i||i!==!1&&jBe(n.url))){const y=l&&f&&zBe.read(f);y&&h.set(l,y)}return n},qBe=typeof XMLHttpRequest<"u",KBe=qBe&&function(e){return new Promise(function(r,i){const l=CIe(e);let f=l.data;const h=lg.from(l.headers).normalize();let{responseType:v,onUploadProgress:y,onDownloadProgress:_}=l,A,R,k,N,L;function B(){N&&N(),L&&L(),l.cancelToken&&l.cancelToken.unsubscribe(A),l.signal&&l.signal.removeEventListener("abort",A)}let H=new XMLHttpRequest;H.open(l.method.toUpperCase(),l.url,!0),H.timeout=l.timeout;function q(){if(!H)return;const K=lg.from("getAllResponseHeaders"in H&&H.getAllResponseHeaders()),ie={data:!v||v==="text"||v==="json"?H.responseText:H.response,status:H.status,statusText:H.statusText,headers:K,config:e,request:H};yIe(function(M){r(M),B()},function(M){i(M),B()},ie),H=null}"onloadend"in H?H.onloadend=q:H.onreadystatechange=function(){!H||H.readyState!==4||H.status===0&&!(H.responseURL&&H.responseURL.indexOf("file:")===0)||setTimeout(q)},H.onabort=function(){H&&(i(new jr("Request aborted",jr.ECONNABORTED,e,H)),H=null)},H.onerror=function(se){const ie=se&&se.message?se.message:"Network Error",le=new jr(ie,jr.ERR_NETWORK,e,H);le.event=se||null,i(le),H=null},H.ontimeout=function(){let se=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const ie=l.transitional||gIe;l.timeoutErrorMessage&&(se=l.timeoutErrorMessage),i(new jr(se,ie.clarifyTimeoutError?jr.ETIMEDOUT:jr.ECONNABORTED,e,H)),H=null},f===void 0&&h.setContentType(null),"setRequestHeader"in H&&_n.forEach(h.toJSON(),function(se,ie){H.setRequestHeader(ie,se)}),_n.isUndefined(l.withCredentials)||(H.withCredentials=!!l.withCredentials),v&&v!=="json"&&(H.responseType=l.responseType),_&&([k,L]=_J(_,!0),H.addEventListener("progress",k)),y&&H.upload&&([R,N]=_J(y),H.upload.addEventListener("progress",R),H.upload.addEventListener("loadend",N)),(l.cancelToken||l.signal)&&(A=K=>{H&&(i(!K||K.type?new FL(null,e,H):K),H.abort(),H=null)},l.cancelToken&&l.cancelToken.subscribe(A),l.signal&&(l.signal.aborted?A():l.signal.addEventListener("abort",A)));const Y=FBe(l.url);if(Y&&Jp.protocols.indexOf(Y)===-1){i(new jr("Unsupported protocol "+Y+":",jr.ERR_BAD_REQUEST,e));return}H.send(f||null)})},ZBe=(e,n)=>{const{length:r}=e=e?e.filter(Boolean):[];if(n||r){let i=new AbortController,l;const f=function(_){if(!l){l=!0,v();const A=_ instanceof Error?_:this.reason;i.abort(A instanceof jr?A:new FL(A instanceof Error?A.message:A))}};let h=n&&setTimeout(()=>{h=null,f(new jr(`timeout ${n} of ms exceeded`,jr.ETIMEDOUT))},n);const v=()=>{e&&(h&&clearTimeout(h),h=null,e.forEach(_=>{_.unsubscribe?_.unsubscribe(f):_.removeEventListener("abort",f)}),e=null)};e.forEach(_=>_.addEventListener("abort",f));const{signal:y}=i;return y.unsubscribe=()=>_n.asap(v),y}},YBe=function*(e,n){let r=e.byteLength;if(r<n){yield e;return}let i=0,l;for(;i<r;)l=i+n,yield e.slice(i,l),i=l},JBe=async function*(e,n){for await(const r of XBe(e))yield*YBe(r,n)},XBe=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const n=e.getReader();try{for(;;){const{done:r,value:i}=await n.read();if(r)break;yield i}}finally{await n.cancel()}},x1e=(e,n,r,i)=>{const l=JBe(e,n);let f=0,h,v=y=>{h||(h=!0,i&&i(y))};return new ReadableStream({async pull(y){try{const{done:_,value:A}=await l.next();if(_){v(),y.close();return}let R=A.byteLength;if(r){let k=f+=R;r(k)}y.enqueue(new Uint8Array(A))}catch(_){throw v(_),_}},cancel(y){return v(y),l.return()}},{highWaterMark:2})},D1e=64*1024,{isFunction:EZ}=_n,QBe=(({Request:e,Response:n})=>({Request:e,Response:n}))(_n.global),{ReadableStream:k1e,TextEncoder:M1e}=_n.global,N1e=(e,...n)=>{try{return!!e(...n)}catch{return!1}},eVe=e=>{e=_n.merge.call({skipUndefined:!0},QBe,e);const{fetch:n,Request:r,Response:i}=e,l=n?EZ(n):typeof fetch=="function",f=EZ(r),h=EZ(i);if(!l)return!1;const v=l&&EZ(k1e),y=l&&(typeof M1e=="function"?(L=>B=>L.encode(B))(new M1e):async L=>new Uint8Array(await new r(L).arrayBuffer())),_=f&&v&&N1e(()=>{let L=!1;const B=new r(Jp.origin,{body:new k1e,method:"POST",get duplex(){return L=!0,"half"}}).headers.has("Content-Type");return L&&!B}),A=h&&v&&N1e(()=>_n.isReadableStream(new i("").body)),R={stream:A&&(L=>L.body)};l&&["text","arrayBuffer","blob","formData","stream"].forEach(L=>{!R[L]&&(R[L]=(B,H)=>{let q=B&&B[L];if(q)return q.call(B);throw new jr(`Response type '${L}' is not supported`,jr.ERR_NOT_SUPPORT,H)})});const k=async L=>{if(L==null)return 0;if(_n.isBlob(L))return L.size;if(_n.isSpecCompliantForm(L))return(await new r(Jp.origin,{method:"POST",body:L}).arrayBuffer()).byteLength;if(_n.isArrayBufferView(L)||_n.isArrayBuffer(L))return L.byteLength;if(_n.isURLSearchParams(L)&&(L=L+""),_n.isString(L))return(await y(L)).byteLength},N=async(L,B)=>{const H=_n.toFiniteNumber(L.getContentLength());return H??k(B)};return async L=>{let{url:B,method:H,data:q,signal:Y,cancelToken:K,timeout:se,onDownloadProgress:ie,onUploadProgress:le,responseType:M,headers:we,withCredentials:Ne="same-origin",fetchOptions:De}=CIe(L),be=n||fetch;M=M?(M+"").toLowerCase():"text";let me=ZBe([Y,K&&K.toAbortSignal()],se),Ye=null;const Ke=me&&me.unsubscribe&&(()=>{me.unsubscribe()});let Ze;try{if(le&&_&&H!=="get"&&H!=="head"&&(Ze=await N(we,q))!==0){let $e=new r(B,{method:"POST",body:q,duplex:"half"}),qt;if(_n.isFormData(q)&&(qt=$e.headers.get("content-type"))&&we.setContentType(qt),$e.body){const[io,En]=O1e(Ze,_J(I1e(le)));q=x1e($e.body,D1e,io,En)}}_n.isString(Ne)||(Ne=Ne?"include":"omit");const z=f&&"credentials"in r.prototype,$t={...De,signal:me,method:H.toUpperCase(),headers:we.normalize().toJSON(),body:q,duplex:"half",credentials:z?Ne:void 0};Ye=f&&new r(B,$t);let Be=await(f?be(Ye,De):be(B,$t));const at=A&&(M==="stream"||M==="response");if(A&&(ie||at&&Ke)){const $e={};["status","statusText","headers"].forEach(Zn=>{$e[Zn]=Be[Zn]});const qt=_n.toFiniteNumber(Be.headers.get("content-length")),[io,En]=ie&&O1e(qt,_J(I1e(ie),!0))||[];Be=new i(x1e(Be.body,D1e,io,()=>{En&&En(),Ke&&Ke()}),$e)}M=M||"text";let lt=await R[_n.findKey(R,M)||"text"](Be,L);return!at&&Ke&&Ke(),await new Promise(($e,qt)=>{yIe($e,qt,{data:lt,headers:lg.from(Be.headers),status:Be.status,statusText:Be.statusText,config:L,request:Ye})})}catch(z){throw Ke&&Ke(),z&&z.name==="TypeError"&&/Load failed|fetch/i.test(z.message)?Object.assign(new jr("Network Error",jr.ERR_NETWORK,L,Ye),{cause:z.cause||z}):jr.from(z,z&&z.code,L,Ye)}}},tVe=new Map,EIe=e=>{let n=e?e.env:{};const{fetch:r,Request:i,Response:l}=n,f=[i,l,r];let h=f.length,v=h,y,_,A=tVe;for(;v--;)y=f[v],_=A.get(y),_===void 0&&A.set(y,_=v?new Map:eVe(n)),A=_;return _};EIe();const rhe={http:bBe,xhr:KBe,fetch:{get:EIe}};_n.forEach(rhe,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const P1e=e=>`- ${e}`,nVe=e=>_n.isFunction(e)||e===null||e===!1,_Ie={getAdapter:(e,n)=>{e=_n.isArray(e)?e:[e];const{length:r}=e;let i,l;const f={};for(let h=0;h<r;h++){i=e[h];let v;if(l=i,!nVe(i)&&(l=rhe[(v=String(i)).toLowerCase()],l===void 0))throw new jr(`Unknown adapter '${v}'`);if(l&&(_n.isFunction(l)||(l=l.get(n))))break;f[v||"#"+h]=l}if(!l){const h=Object.entries(f).map(([y,_])=>`adapter ${y} `+(_===!1?"is not supported by the environment":"is not available in the build"));let v=r?h.length>1?`since :
`+h.map(P1e).join(`
`):" "+P1e(h[0]):"as no adapter specified";throw new jr("There is no suitable adapter to dispatch the request "+v,"ERR_NOT_SUPPORT")}return l},adapters:rhe};function hfe(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new FL(null,e)}function L1e(e){return hfe(e),e.headers=lg.from(e.headers),e.data=pfe.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),_Ie.getAdapter(e.adapter||Q5.adapter,e)(e).then(function(i){return hfe(e),i.data=pfe.call(e,e.transformResponse,i),i.headers=lg.from(i.headers),i},function(i){return bIe(i)||(hfe(e),i&&i.response&&(i.response.data=pfe.call(e,e.transformResponse,i.response),i.response.headers=lg.from(i.response.headers))),Promise.reject(i)})}const wIe="1.12.2",tQ={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{tQ[e]=function(i){return typeof i===e||"a"+(n<1?"n ":" ")+e}});const B1e={};tQ.transitional=function(n,r,i){function l(f,h){return"[Axios v"+wIe+"] Transitional option '"+f+"'"+h+(i?". "+i:"")}return(f,h,v)=>{if(n===!1)throw new jr(l(h," has been removed"+(r?" in "+r:"")),jr.ERR_DEPRECATED);return r&&!B1e[h]&&(B1e[h]=!0,console.warn(l(h," has been deprecated since v"+r+" and will be removed in the near future"))),n?n(f,h,v):!0}};tQ.spelling=function(n){return(r,i)=>(console.warn(`${i} is likely a misspelling of ${n}`),!0)};function oVe(e,n,r){if(typeof e!="object")throw new jr("options must be an object",jr.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let l=i.length;for(;l-- >0;){const f=i[l],h=n[f];if(h){const v=e[f],y=v===void 0||h(v,f,e);if(y!==!0)throw new jr("option "+f+" must be "+y,jr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new jr("Unknown option "+f,jr.ERR_BAD_OPTION)}}const lY={assertOptions:oVe,validators:tQ},b1=lY.validators;let v2=class{constructor(n){this.defaults=n||{},this.interceptors={request:new A1e,response:new A1e}}async request(n,r){try{return await this._request(n,r)}catch(i){if(i instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const f=l.stack?l.stack.replace(/^.+\n/,""):"";try{i.stack?f&&!String(i.stack).endsWith(f.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+f):i.stack=f}catch{}}throw i}}_request(n,r){typeof n=="string"?(r=r||{},r.url=n):r=n||{},r=L2(this.defaults,r);const{transitional:i,paramsSerializer:l,headers:f}=r;i!==void 0&&lY.assertOptions(i,{silentJSONParsing:b1.transitional(b1.boolean),forcedJSONParsing:b1.transitional(b1.boolean),clarifyTimeoutError:b1.transitional(b1.boolean)},!1),l!=null&&(_n.isFunction(l)?r.paramsSerializer={serialize:l}:lY.assertOptions(l,{encode:b1.function,serialize:b1.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),lY.assertOptions(r,{baseUrl:b1.spelling("baseURL"),withXsrfToken:b1.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let h=f&&_n.merge(f.common,f[r.method]);f&&_n.forEach(["delete","get","head","post","put","patch","common"],L=>{delete f[L]}),r.headers=lg.concat(h,f);const v=[];let y=!0;this.interceptors.request.forEach(function(B){typeof B.runWhen=="function"&&B.runWhen(r)===!1||(y=y&&B.synchronous,v.unshift(B.fulfilled,B.rejected))});const _=[];this.interceptors.response.forEach(function(B){_.push(B.fulfilled,B.rejected)});let A,R=0,k;if(!y){const L=[L1e.bind(this),void 0];for(L.unshift(...v),L.push(..._),k=L.length,A=Promise.resolve(r);R<k;)A=A.then(L[R++],L[R++]);return A}k=v.length;let N=r;for(;R<k;){const L=v[R++],B=v[R++];try{N=L(N)}catch(H){B.call(this,H);break}}try{A=L1e.call(this,N)}catch(L){return Promise.reject(L)}for(R=0,k=_.length;R<k;)A=A.then(_[R++],_[R++]);return A}getUri(n){n=L2(this.defaults,n);const r=SIe(n.baseURL,n.url,n.allowAbsoluteUrls);return mIe(r,n.params,n.paramsSerializer)}};_n.forEach(["delete","get","head","options"],function(n){v2.prototype[n]=function(r,i){return this.request(L2(i||{},{method:n,url:r,data:(i||{}).data}))}});_n.forEach(["post","put","patch"],function(n){function r(i){return function(f,h,v){return this.request(L2(v||{},{method:n,headers:i?{"Content-Type":"multipart/form-data"}:{},url:f,data:h}))}}v2.prototype[n]=r(),v2.prototype[n+"Form"]=r(!0)});let sVe=class AIe{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(f){r=f});const i=this;this.promise.then(l=>{if(!i._listeners)return;let f=i._listeners.length;for(;f-- >0;)i._listeners[f](l);i._listeners=null}),this.promise.then=l=>{let f;const h=new Promise(v=>{i.subscribe(v),f=v}).then(l);return h.cancel=function(){i.unsubscribe(f)},h},n(function(f,h,v){i.reason||(i.reason=new FL(f,h,v),r(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const r=this._listeners.indexOf(n);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const n=new AbortController,r=i=>{n.abort(i)};return this.subscribe(r),n.signal.unsubscribe=()=>this.unsubscribe(r),n.signal}static source(){let n;return{token:new AIe(function(l){n=l}),cancel:n}}};function rVe(e){return function(r){return e.apply(null,r)}}function iVe(e){return _n.isObject(e)&&e.isAxiosError===!0}const ihe={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ihe).forEach(([e,n])=>{ihe[n]=e});function TIe(e){const n=new v2(e),r=oIe(v2.prototype.request,n);return _n.extend(r,v2.prototype,n,{allOwnKeys:!0}),_n.extend(r,n,null,{allOwnKeys:!0}),r.create=function(l){return TIe(L2(e,l))},r}const Ou=TIe(Q5);Ou.Axios=v2;Ou.CanceledError=FL;Ou.CancelToken=sVe;Ou.isCancel=bIe;Ou.VERSION=wIe;Ou.toFormData=eQ;Ou.AxiosError=jr;Ou.Cancel=Ou.CanceledError;Ou.all=function(n){return Promise.all(n)};Ou.spread=rVe;Ou.isAxiosError=iVe;Ou.mergeConfig=L2;Ou.AxiosHeaders=lg;Ou.formToJSON=e=>vIe(_n.isHTMLForm(e)?new FormData(e):e);Ou.getAdapter=_Ie.getAdapter;Ou.HttpStatusCode=ihe;Ou.default=Ou;const{Axios:tWe,AxiosError:nWe,CanceledError:oWe,isCancel:sWe,CancelToken:rWe,VERSION:iWe,all:aWe,Cancel:cWe,isAxiosError:lWe,spread:uWe,toFormData:dWe,AxiosHeaders:fWe,HttpStatusCode:pWe,formToJSON:hWe,getAdapter:mWe,mergeConfig:gWe}=Ou;window.axios=Ou;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var ahe=!1,che=!1,b2=[],lhe=-1;function aVe(e){cVe(e)}function cVe(e){b2.includes(e)||b2.push(e),uVe()}function lVe(e){let n=b2.indexOf(e);n!==-1&&n>lhe&&b2.splice(n,1)}function uVe(){!che&&!ahe&&(ahe=!0,queueMicrotask(dVe))}function dVe(){ahe=!1,che=!0;for(let e=0;e<b2.length;e++)b2[e](),lhe=e;b2.length=0,lhe=-1,che=!1}var $L,Y2,UL,OIe,uhe=!0;function fVe(e){uhe=!1,e(),uhe=!0}function pVe(e){$L=e.reactive,UL=e.release,Y2=n=>e.effect(n,{scheduler:r=>{uhe?aVe(r):r()}}),OIe=e.raw}function V1e(e){Y2=e}function hVe(e){let n=()=>{};return[i=>{let l=Y2(i);return e._x_effects||(e._x_effects=new Set,e._x_runEffects=()=>{e._x_effects.forEach(f=>f())}),e._x_effects.add(l),n=()=>{l!==void 0&&(e._x_effects.delete(l),UL(l))},l},()=>{n()}]}function IIe(e,n){let r=!0,i,l=Y2(()=>{let f=e();JSON.stringify(f),r?i=f:queueMicrotask(()=>{n(f,i),i=f}),r=!1});return()=>UL(l)}var RIe=[],xIe=[],DIe=[];function mVe(e){DIe.push(e)}function Cve(e,n){typeof n=="function"?(e._x_cleanups||(e._x_cleanups=[]),e._x_cleanups.push(n)):(n=e,xIe.push(n))}function kIe(e){RIe.push(e)}function MIe(e,n,r){e._x_attributeCleanups||(e._x_attributeCleanups={}),e._x_attributeCleanups[n]||(e._x_attributeCleanups[n]=[]),e._x_attributeCleanups[n].push(r)}function NIe(e,n){e._x_attributeCleanups&&Object.entries(e._x_attributeCleanups).forEach(([r,i])=>{(n===void 0||n.includes(r))&&(i.forEach(l=>l()),delete e._x_attributeCleanups[r])})}function gVe(e){var n,r;for((n=e._x_effects)==null||n.forEach(lVe);(r=e._x_cleanups)!=null&&r.length;)e._x_cleanups.pop()()}var Eve=new MutationObserver(Tve),_ve=!1;function wve(){Eve.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),_ve=!0}function PIe(){vVe(),Eve.disconnect(),_ve=!1}var cU=[];function vVe(){let e=Eve.takeRecords();cU.push(()=>e.length>0&&Tve(e));let n=cU.length;queueMicrotask(()=>{if(cU.length===n)for(;cU.length>0;)cU.shift()()})}function _l(e){if(!_ve)return e();PIe();let n=e();return wve(),n}var Ave=!1,wJ=[];function bVe(){Ave=!0}function yVe(){Ave=!1,Tve(wJ),wJ=[]}function Tve(e){if(Ave){wJ=wJ.concat(e);return}let n=[],r=new Set,i=new Map,l=new Map;for(let f=0;f<e.length;f++)if(!e[f].target._x_ignoreMutationObserver&&(e[f].type==="childList"&&(e[f].removedNodes.forEach(h=>{h.nodeType===1&&h._x_marker&&r.add(h)}),e[f].addedNodes.forEach(h=>{if(h.nodeType===1){if(r.has(h)){r.delete(h);return}h._x_marker||n.push(h)}})),e[f].type==="attributes")){let h=e[f].target,v=e[f].attributeName,y=e[f].oldValue,_=()=>{i.has(h)||i.set(h,[]),i.get(h).push({name:v,value:h.getAttribute(v)})},A=()=>{l.has(h)||l.set(h,[]),l.get(h).push(v)};h.hasAttribute(v)&&y===null?_():h.hasAttribute(v)?(A(),_()):A()}l.forEach((f,h)=>{NIe(h,f)}),i.forEach((f,h)=>{RIe.forEach(v=>v(h,f))});for(let f of r)n.some(h=>h.contains(f))||xIe.forEach(h=>h(f));for(let f of n)f.isConnected&&DIe.forEach(h=>h(f));n=null,r=null,i=null,l=null}function LIe(e){return t6(gL(e))}function e6(e,n,r){return e._x_dataStack=[n,...gL(r||e)],()=>{e._x_dataStack=e._x_dataStack.filter(i=>i!==n)}}function gL(e){return e._x_dataStack?e._x_dataStack:typeof ShadowRoot=="function"&&e instanceof ShadowRoot?gL(e.host):e.parentNode?gL(e.parentNode):[]}function t6(e){return new Proxy({objects:e},SVe)}var SVe={ownKeys({objects:e}){return Array.from(new Set(e.flatMap(n=>Object.keys(n))))},has({objects:e},n){return n==Symbol.unscopables?!1:e.some(r=>Object.prototype.hasOwnProperty.call(r,n)||Reflect.has(r,n))},get({objects:e},n,r){return n=="toJSON"?CVe:Reflect.get(e.find(i=>Reflect.has(i,n))||{},n,r)},set({objects:e},n,r,i){const l=e.find(h=>Object.prototype.hasOwnProperty.call(h,n))||e[e.length-1],f=Object.getOwnPropertyDescriptor(l,n);return f!=null&&f.set&&(f!=null&&f.get)?f.set.call(i,r)||!0:Reflect.set(l,n,r)}};function CVe(){return Reflect.ownKeys(this).reduce((n,r)=>(n[r]=Reflect.get(this,r),n),{})}function BIe(e){let n=i=>typeof i=="object"&&!Array.isArray(i)&&i!==null,r=(i,l="")=>{Object.entries(Object.getOwnPropertyDescriptors(i)).forEach(([f,{value:h,enumerable:v}])=>{if(v===!1||h===void 0||typeof h=="object"&&h!==null&&h.__v_skip)return;let y=l===""?f:`${l}.${f}`;typeof h=="object"&&h!==null&&h._x_interceptor?i[f]=h.initialize(e,y,f):n(h)&&h!==i&&!(h instanceof Element)&&r(h,y)})};return r(e)}function VIe(e,n=()=>{}){let r={initialValue:void 0,_x_interceptor:!0,initialize(i,l,f){return e(this.initialValue,()=>EVe(i,l),h=>dhe(i,l,h),l,f)}};return n(r),i=>{if(typeof i=="object"&&i!==null&&i._x_interceptor){let l=r.initialize.bind(r);r.initialize=(f,h,v)=>{let y=i.initialize(f,h,v);return r.initialValue=y,l(f,h,v)}}else r.initialValue=i;return r}}function EVe(e,n){return n.split(".").reduce((r,i)=>r[i],e)}function dhe(e,n,r){if(typeof n=="string"&&(n=n.split(".")),n.length===1)e[n[0]]=r;else{if(n.length===0)throw error;return e[n[0]]||(e[n[0]]={}),dhe(e[n[0]],n.slice(1),r)}}var HIe={};function X0(e,n){HIe[e]=n}function fhe(e,n){let r=_Ve(n);return Object.entries(HIe).forEach(([i,l])=>{Object.defineProperty(e,`$${i}`,{get(){return l(n,r)},enumerable:!1})}),e}function _Ve(e){let[n,r]=WIe(e),i={interceptor:VIe,...n};return Cve(e,r),i}function wVe(e,n,r,...i){try{return r(...i)}catch(l){S5(l,e,n)}}function S5(e,n,r=void 0){e=Object.assign(e??{message:"No error message given."},{el:n,expression:r}),console.warn(`Alpine Expression Error: ${e.message}

${r?'Expression: "'+r+`"

`:""}`,n),setTimeout(()=>{throw e},0)}var uY=!0;function FIe(e){let n=uY;uY=!1;let r=e();return uY=n,r}function y2(e,n,r={}){let i;return tm(e,n)(l=>i=l,r),i}function tm(...e){return $Ie(...e)}var $Ie=UIe;function AVe(e){$Ie=e}function UIe(e,n){let r={};fhe(r,e);let i=[r,...gL(e)],l=typeof n=="function"?TVe(i,n):IVe(i,n,e);return wVe.bind(null,e,n,l)}function TVe(e,n){return(r=()=>{},{scope:i={},params:l=[],context:f}={})=>{let h=n.apply(t6([i,...e]),l);AJ(r,h)}}var mfe={};function OVe(e,n){if(mfe[e])return mfe[e];let r=Object.getPrototypeOf(async function(){}).constructor,i=/^[\n\s]*if.*\(.*\)/.test(e.trim())||/^(let|const)\s/.test(e.trim())?`(async()=>{ ${e} })()`:e,f=(()=>{try{let h=new r(["__self","scope"],`with (scope) { __self.result = ${i} }; __self.finished = true; return __self.result;`);return Object.defineProperty(h,"name",{value:`[Alpine] ${e}`}),h}catch(h){return S5(h,n,e),Promise.resolve()}})();return mfe[e]=f,f}function IVe(e,n,r){let i=OVe(n,r);return(l=()=>{},{scope:f={},params:h=[],context:v}={})=>{i.result=void 0,i.finished=!1;let y=t6([f,...e]);if(typeof i=="function"){let _=i.call(v,i,y).catch(A=>S5(A,r,n));i.finished?(AJ(l,i.result,y,h,r),i.result=void 0):_.then(A=>{AJ(l,A,y,h,r)}).catch(A=>S5(A,r,n)).finally(()=>i.result=void 0)}}}function AJ(e,n,r,i,l){if(uY&&typeof n=="function"){let f=n.apply(r,i);f instanceof Promise?f.then(h=>AJ(e,h,r,i)).catch(h=>S5(h,l,n)):e(f)}else typeof n=="object"&&n instanceof Promise?n.then(f=>e(f)):e(n)}var Ove="x-";function jL(e=""){return Ove+e}function RVe(e){Ove=e}var TJ={};function Zu(e,n){return TJ[e]=n,{before(r){if(!TJ[r]){console.warn(String.raw`Cannot find directive \`${r}\`. \`${e}\` will use the default order of execution`);return}const i=r2.indexOf(r);r2.splice(i>=0?i:r2.indexOf("DEFAULT"),0,e)}}}function xVe(e){return Object.keys(TJ).includes(e)}function Ive(e,n,r){if(n=Array.from(n),e._x_virtualDirectives){let f=Object.entries(e._x_virtualDirectives).map(([v,y])=>({name:v,value:y})),h=jIe(f);f=f.map(v=>h.find(y=>y.name===v.name)?{name:`x-bind:${v.name}`,value:`"${v.value}"`}:v),n=n.concat(f)}let i={};return n.map(KIe((f,h)=>i[f]=h)).filter(YIe).map(MVe(i,r)).sort(NVe).map(f=>kVe(e,f))}function jIe(e){return Array.from(e).map(KIe()).filter(n=>!YIe(n))}var phe=!1,xU=new Map,zIe=Symbol();function DVe(e){phe=!0;let n=Symbol();zIe=n,xU.set(n,[]);let r=()=>{for(;xU.get(n).length;)xU.get(n).shift()();xU.delete(n)},i=()=>{phe=!1,r()};e(r),i()}function WIe(e){let n=[],r=v=>n.push(v),[i,l]=hVe(e);return n.push(l),[{Alpine:n6,effect:i,cleanup:r,evaluateLater:tm.bind(tm,e),evaluate:y2.bind(y2,e)},()=>n.forEach(v=>v())]}function kVe(e,n){let r=()=>{},i=TJ[n.type]||r,[l,f]=WIe(e);MIe(e,n.original,f);let h=()=>{e._x_ignore||e._x_ignoreSelf||(i.inline&&i.inline(e,n,l),i=i.bind(i,e,n,l),phe?xU.get(zIe).push(i):i())};return h.runCleanups=f,h}var GIe=(e,n)=>({name:r,value:i})=>(r.startsWith(e)&&(r=r.replace(e,n)),{name:r,value:i}),qIe=e=>e;function KIe(e=()=>{}){return({name:n,value:r})=>{let{name:i,value:l}=ZIe.reduce((f,h)=>h(f),{name:n,value:r});return i!==n&&e(i,n),{name:i,value:l}}}var ZIe=[];function Rve(e){ZIe.push(e)}function YIe({name:e}){return JIe().test(e)}var JIe=()=>new RegExp(`^${Ove}([^:^.]+)\\b`);function MVe(e,n){return({name:r,value:i})=>{let l=r.match(JIe()),f=r.match(/:([a-zA-Z0-9\-_:]+)/),h=r.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],v=n||e[r]||r;return{type:l?l[1]:null,value:f?f[1]:null,modifiers:h.map(y=>y.replace(".","")),expression:i,original:v}}}var hhe="DEFAULT",r2=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",hhe,"teleport"];function NVe(e,n){let r=r2.indexOf(e.type)===-1?hhe:e.type,i=r2.indexOf(n.type)===-1?hhe:n.type;return r2.indexOf(r)-r2.indexOf(i)}function qU(e,n,r={}){e.dispatchEvent(new CustomEvent(n,{detail:r,bubbles:!0,composed:!0,cancelable:!0}))}function B2(e,n){if(typeof ShadowRoot=="function"&&e instanceof ShadowRoot){Array.from(e.children).forEach(l=>B2(l,n));return}let r=!1;if(n(e,()=>r=!0),r)return;let i=e.firstElementChild;for(;i;)B2(i,n),i=i.nextElementSibling}function ib(e,...n){console.warn(`Alpine Warning: ${e}`,...n)}var H1e=!1;function PVe(){H1e&&ib("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),H1e=!0,document.body||ib("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),qU(document,"alpine:init"),qU(document,"alpine:initializing"),wve(),mVe(n=>hE(n,B2)),Cve(n=>WL(n)),kIe((n,r)=>{Ive(n,r).forEach(i=>i())});let e=n=>!nQ(n.parentElement,!0);Array.from(document.querySelectorAll(eRe().join(","))).filter(e).forEach(n=>{hE(n)}),qU(document,"alpine:initialized"),setTimeout(()=>{HVe()})}var xve=[],XIe=[];function QIe(){return xve.map(e=>e())}function eRe(){return xve.concat(XIe).map(e=>e())}function tRe(e){xve.push(e)}function nRe(e){XIe.push(e)}function nQ(e,n=!1){return zL(e,r=>{if((n?eRe():QIe()).some(l=>r.matches(l)))return!0})}function zL(e,n){if(e){if(n(e))return e;if(e._x_teleportBack&&(e=e._x_teleportBack),!!e.parentElement)return zL(e.parentElement,n)}}function LVe(e){return QIe().some(n=>e.matches(n))}var oRe=[];function BVe(e){oRe.push(e)}var VVe=1;function hE(e,n=B2,r=()=>{}){zL(e,i=>i._x_ignore)||DVe(()=>{n(e,(i,l)=>{i._x_marker||(r(i,l),oRe.forEach(f=>f(i,l)),Ive(i,i.attributes).forEach(f=>f()),i._x_ignore||(i._x_marker=VVe++),i._x_ignore&&l())})})}function WL(e,n=B2){n(e,r=>{gVe(r),NIe(r),delete r._x_marker})}function HVe(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([n,r,i])=>{xVe(r)||i.some(l=>{if(document.querySelector(l))return ib(`found "${l}", but missing ${n} plugin`),!0})})}var mhe=[],Dve=!1;function kve(e=()=>{}){return queueMicrotask(()=>{Dve||setTimeout(()=>{ghe()})}),new Promise(n=>{mhe.push(()=>{e(),n()})})}function ghe(){for(Dve=!1;mhe.length;)mhe.shift()()}function FVe(){Dve=!0}function Mve(e,n){return Array.isArray(n)?F1e(e,n.join(" ")):typeof n=="object"&&n!==null?$Ve(e,n):typeof n=="function"?Mve(e,n()):F1e(e,n)}function F1e(e,n){let r=l=>l.split(" ").filter(f=>!e.classList.contains(f)).filter(Boolean),i=l=>(e.classList.add(...l),()=>{e.classList.remove(...l)});return n=n===!0?n="":n||"",i(r(n))}function $Ve(e,n){let r=v=>v.split(" ").filter(Boolean),i=Object.entries(n).flatMap(([v,y])=>y?r(v):!1).filter(Boolean),l=Object.entries(n).flatMap(([v,y])=>y?!1:r(v)).filter(Boolean),f=[],h=[];return l.forEach(v=>{e.classList.contains(v)&&(e.classList.remove(v),h.push(v))}),i.forEach(v=>{e.classList.contains(v)||(e.classList.add(v),f.push(v))}),()=>{h.forEach(v=>e.classList.add(v)),f.forEach(v=>e.classList.remove(v))}}function oQ(e,n){return typeof n=="object"&&n!==null?UVe(e,n):jVe(e,n)}function UVe(e,n){let r={};return Object.entries(n).forEach(([i,l])=>{r[i]=e.style[i],i.startsWith("--")||(i=zVe(i)),e.style.setProperty(i,l)}),setTimeout(()=>{e.style.length===0&&e.removeAttribute("style")}),()=>{oQ(e,r)}}function jVe(e,n){let r=e.getAttribute("style",n);return e.setAttribute("style",n),()=>{e.setAttribute("style",r||"")}}function zVe(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function vhe(e,n=()=>{}){let r=!1;return function(){r?n.apply(this,arguments):(r=!0,e.apply(this,arguments))}}Zu("transition",(e,{value:n,modifiers:r,expression:i},{evaluate:l})=>{typeof i=="function"&&(i=l(i)),i!==!1&&(!i||typeof i=="boolean"?GVe(e,r,n):WVe(e,i,n))});function WVe(e,n,r){sRe(e,Mve,""),{enter:l=>{e._x_transition.enter.during=l},"enter-start":l=>{e._x_transition.enter.start=l},"enter-end":l=>{e._x_transition.enter.end=l},leave:l=>{e._x_transition.leave.during=l},"leave-start":l=>{e._x_transition.leave.start=l},"leave-end":l=>{e._x_transition.leave.end=l}}[r](n)}function GVe(e,n,r){sRe(e,oQ);let i=!n.includes("in")&&!n.includes("out")&&!r,l=i||n.includes("in")||["enter"].includes(r),f=i||n.includes("out")||["leave"].includes(r);n.includes("in")&&!i&&(n=n.filter((q,Y)=>Y<n.indexOf("out"))),n.includes("out")&&!i&&(n=n.filter((q,Y)=>Y>n.indexOf("out")));let h=!n.includes("opacity")&&!n.includes("scale"),v=h||n.includes("opacity"),y=h||n.includes("scale"),_=v?0:1,A=y?lU(n,"scale",95)/100:1,R=lU(n,"delay",0)/1e3,k=lU(n,"origin","center"),N="opacity, transform",L=lU(n,"duration",150)/1e3,B=lU(n,"duration",75)/1e3,H="cubic-bezier(0.4, 0.0, 0.2, 1)";l&&(e._x_transition.enter.during={transformOrigin:k,transitionDelay:`${R}s`,transitionProperty:N,transitionDuration:`${L}s`,transitionTimingFunction:H},e._x_transition.enter.start={opacity:_,transform:`scale(${A})`},e._x_transition.enter.end={opacity:1,transform:"scale(1)"}),f&&(e._x_transition.leave.during={transformOrigin:k,transitionDelay:`${R}s`,transitionProperty:N,transitionDuration:`${B}s`,transitionTimingFunction:H},e._x_transition.leave.start={opacity:1,transform:"scale(1)"},e._x_transition.leave.end={opacity:_,transform:`scale(${A})`})}function sRe(e,n,r={}){e._x_transition||(e._x_transition={enter:{during:r,start:r,end:r},leave:{during:r,start:r,end:r},in(i=()=>{},l=()=>{}){bhe(e,n,{during:this.enter.during,start:this.enter.start,end:this.enter.end},i,l)},out(i=()=>{},l=()=>{}){bhe(e,n,{during:this.leave.during,start:this.leave.start,end:this.leave.end},i,l)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(e,n,r,i){const l=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let f=()=>l(r);if(n){e._x_transition&&(e._x_transition.enter||e._x_transition.leave)?e._x_transition.enter&&(Object.entries(e._x_transition.enter.during).length||Object.entries(e._x_transition.enter.start).length||Object.entries(e._x_transition.enter.end).length)?e._x_transition.in(r):f():e._x_transition?e._x_transition.in(r):f();return}e._x_hidePromise=e._x_transition?new Promise((h,v)=>{e._x_transition.out(()=>{},()=>h(i)),e._x_transitioning&&e._x_transitioning.beforeCancel(()=>v({isFromCancelledTransition:!0}))}):Promise.resolve(i),queueMicrotask(()=>{let h=rRe(e);h?(h._x_hideChildren||(h._x_hideChildren=[]),h._x_hideChildren.push(e)):l(()=>{let v=y=>{let _=Promise.all([y._x_hidePromise,...(y._x_hideChildren||[]).map(v)]).then(([A])=>A==null?void 0:A());return delete y._x_hidePromise,delete y._x_hideChildren,_};v(e).catch(y=>{if(!y.isFromCancelledTransition)throw y})})})};function rRe(e){let n=e.parentNode;if(n)return n._x_hidePromise?n:rRe(n)}function bhe(e,n,{during:r,start:i,end:l}={},f=()=>{},h=()=>{}){if(e._x_transitioning&&e._x_transitioning.cancel(),Object.keys(r).length===0&&Object.keys(i).length===0&&Object.keys(l).length===0){f(),h();return}let v,y,_;qVe(e,{start(){v=n(e,i)},during(){y=n(e,r)},before:f,end(){v(),_=n(e,l)},after:h,cleanup(){y(),_()}})}function qVe(e,n){let r,i,l,f=vhe(()=>{_l(()=>{r=!0,i||n.before(),l||(n.end(),ghe()),n.after(),e.isConnected&&n.cleanup(),delete e._x_transitioning})});e._x_transitioning={beforeCancels:[],beforeCancel(h){this.beforeCancels.push(h)},cancel:vhe(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();f()}),finish:f},_l(()=>{n.start(),n.during()}),FVe(),requestAnimationFrame(()=>{if(r)return;let h=Number(getComputedStyle(e).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,v=Number(getComputedStyle(e).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;h===0&&(h=Number(getComputedStyle(e).animationDuration.replace("s",""))*1e3),_l(()=>{n.before()}),i=!0,requestAnimationFrame(()=>{r||(_l(()=>{n.end()}),ghe(),setTimeout(e._x_transitioning.finish,h+v),l=!0)})})}function lU(e,n,r){if(e.indexOf(n)===-1)return r;const i=e[e.indexOf(n)+1];if(!i||n==="scale"&&isNaN(i))return r;if(n==="duration"||n==="delay"){let l=i.match(/([0-9]+)ms/);if(l)return l[1]}return n==="origin"&&["top","right","left","center","bottom"].includes(e[e.indexOf(n)+2])?[i,e[e.indexOf(n)+2]].join(" "):i}var GA=!1;function eT(e,n=()=>{}){return(...r)=>GA?n(...r):e(...r)}function KVe(e){return(...n)=>GA&&e(...n)}var iRe=[];function sQ(e){iRe.push(e)}function ZVe(e,n){iRe.forEach(r=>r(e,n)),GA=!0,aRe(()=>{hE(n,(r,i)=>{i(r,()=>{})})}),GA=!1}var yhe=!1;function YVe(e,n){n._x_dataStack||(n._x_dataStack=e._x_dataStack),GA=!0,yhe=!0,aRe(()=>{JVe(n)}),GA=!1,yhe=!1}function JVe(e){let n=!1;hE(e,(i,l)=>{B2(i,(f,h)=>{if(n&&LVe(f))return h();n=!0,l(f,h)})})}function aRe(e){let n=Y2;V1e((r,i)=>{let l=n(r);return UL(l),()=>{}}),e(),V1e(n)}function cRe(e,n,r,i=[]){switch(e._x_bindings||(e._x_bindings=$L({})),e._x_bindings[n]=r,n=i.includes("camel")?rHe(n):n,n){case"value":XVe(e,r);break;case"style":eHe(e,r);break;case"class":QVe(e,r);break;case"selected":case"checked":tHe(e,n,r);break;default:lRe(e,n,r);break}}function XVe(e,n){if(fRe(e))e.attributes.value===void 0&&(e.value=n),window.fromModel&&(typeof n=="boolean"?e.checked=dY(e.value)===n:e.checked=$1e(e.value,n));else if(Nve(e))Number.isInteger(n)?e.value=n:!Array.isArray(n)&&typeof n!="boolean"&&![null,void 0].includes(n)?e.value=String(n):Array.isArray(n)?e.checked=n.some(r=>$1e(r,e.value)):e.checked=!!n;else if(e.tagName==="SELECT")sHe(e,n);else{if(e.value===n)return;e.value=n===void 0?"":n}}function QVe(e,n){e._x_undoAddedClasses&&e._x_undoAddedClasses(),e._x_undoAddedClasses=Mve(e,n)}function eHe(e,n){e._x_undoAddedStyles&&e._x_undoAddedStyles(),e._x_undoAddedStyles=oQ(e,n)}function tHe(e,n,r){lRe(e,n,r),oHe(e,n,r)}function lRe(e,n,r){[null,void 0,!1].includes(r)&&aHe(n)?e.removeAttribute(n):(uRe(n)&&(r=n),nHe(e,n,r))}function nHe(e,n,r){e.getAttribute(n)!=r&&e.setAttribute(n,r)}function oHe(e,n,r){e[n]!==r&&(e[n]=r)}function sHe(e,n){const r=[].concat(n).map(i=>i+"");Array.from(e.options).forEach(i=>{i.selected=r.includes(i.value)})}function rHe(e){return e.toLowerCase().replace(/-(\w)/g,(n,r)=>r.toUpperCase())}function $1e(e,n){return e==n}function dY(e){return[1,"1","true","on","yes",!0].includes(e)?!0:[0,"0","false","off","no",!1].includes(e)?!1:e?!!e:null}var iHe=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function uRe(e){return iHe.has(e)}function aHe(e){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(e)}function cHe(e,n,r){return e._x_bindings&&e._x_bindings[n]!==void 0?e._x_bindings[n]:dRe(e,n,r)}function lHe(e,n,r,i=!0){if(e._x_bindings&&e._x_bindings[n]!==void 0)return e._x_bindings[n];if(e._x_inlineBindings&&e._x_inlineBindings[n]!==void 0){let l=e._x_inlineBindings[n];return l.extract=i,FIe(()=>y2(e,l.expression))}return dRe(e,n,r)}function dRe(e,n,r){let i=e.getAttribute(n);return i===null?typeof r=="function"?r():r:i===""?!0:uRe(n)?!![n,"true"].includes(i):i}function Nve(e){return e.type==="checkbox"||e.localName==="ui-checkbox"||e.localName==="ui-switch"}function fRe(e){return e.type==="radio"||e.localName==="ui-radio"}function pRe(e,n){let r;return function(){const i=this,l=arguments,f=function(){r=null,e.apply(i,l)};clearTimeout(r),r=setTimeout(f,n)}}function hRe(e,n){let r;return function(){let i=this,l=arguments;r||(e.apply(i,l),r=!0,setTimeout(()=>r=!1,n))}}function mRe({get:e,set:n},{get:r,set:i}){let l=!0,f,h=Y2(()=>{let v=e(),y=r();if(l)i(gfe(v)),l=!1;else{let _=JSON.stringify(v),A=JSON.stringify(y);_!==f?i(gfe(v)):_!==A&&n(gfe(y))}f=JSON.stringify(e()),JSON.stringify(r())});return()=>{UL(h)}}function gfe(e){return typeof e=="object"?JSON.parse(JSON.stringify(e)):e}function uHe(e){(Array.isArray(e)?e:[e]).forEach(r=>r(n6))}var UR={},U1e=!1;function dHe(e,n){if(U1e||(UR=$L(UR),U1e=!0),n===void 0)return UR[e];UR[e]=n,BIe(UR[e]),typeof n=="object"&&n!==null&&n.hasOwnProperty("init")&&typeof n.init=="function"&&UR[e].init()}function fHe(){return UR}var gRe={};function pHe(e,n){let r=typeof n!="function"?()=>n:n;return e instanceof Element?vRe(e,r()):(gRe[e]=r,()=>{})}function hHe(e){return Object.entries(gRe).forEach(([n,r])=>{Object.defineProperty(e,n,{get(){return(...i)=>r(...i)}})}),e}function vRe(e,n,r){let i=[];for(;i.length;)i.pop()();let l=Object.entries(n).map(([h,v])=>({name:h,value:v})),f=jIe(l);return l=l.map(h=>f.find(v=>v.name===h.name)?{name:`x-bind:${h.name}`,value:`"${h.value}"`}:h),Ive(e,l,r).map(h=>{i.push(h.runCleanups),h()}),()=>{for(;i.length;)i.pop()()}}var bRe={};function mHe(e,n){bRe[e]=n}function gHe(e,n){return Object.entries(bRe).forEach(([r,i])=>{Object.defineProperty(e,r,{get(){return(...l)=>i.bind(n)(...l)},enumerable:!1})}),e}var vHe={get reactive(){return $L},get release(){return UL},get effect(){return Y2},get raw(){return OIe},version:"3.15.0",flushAndStopDeferringMutations:yVe,dontAutoEvaluateFunctions:FIe,disableEffectScheduling:fVe,startObservingMutations:wve,stopObservingMutations:PIe,setReactivityEngine:pVe,onAttributeRemoved:MIe,onAttributesAdded:kIe,closestDataStack:gL,skipDuringClone:eT,onlyDuringClone:KVe,addRootSelector:tRe,addInitSelector:nRe,interceptClone:sQ,addScopeToNode:e6,deferMutations:bVe,mapAttributes:Rve,evaluateLater:tm,interceptInit:BVe,setEvaluator:AVe,mergeProxies:t6,extractProp:lHe,findClosest:zL,onElRemoved:Cve,closestRoot:nQ,destroyTree:WL,interceptor:VIe,transition:bhe,setStyles:oQ,mutateDom:_l,directive:Zu,entangle:mRe,throttle:hRe,debounce:pRe,evaluate:y2,initTree:hE,nextTick:kve,prefixed:jL,prefix:RVe,plugin:uHe,magic:X0,store:dHe,start:PVe,clone:YVe,cloneNode:ZVe,bound:cHe,$data:LIe,watch:IIe,walk:B2,data:mHe,bind:pHe},n6=vHe;function bHe(e,n){const r=Object.create(null),i=e.split(",");for(let l=0;l<i.length;l++)r[i[l]]=!0;return l=>!!r[l]}var yHe=Object.freeze({}),SHe=Object.prototype.hasOwnProperty,rQ=(e,n)=>SHe.call(e,n),S2=Array.isArray,KU=e=>yRe(e)==="[object Map]",CHe=e=>typeof e=="string",Pve=e=>typeof e=="symbol",iQ=e=>e!==null&&typeof e=="object",EHe=Object.prototype.toString,yRe=e=>EHe.call(e),SRe=e=>yRe(e).slice(8,-1),Lve=e=>CHe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,_He=e=>{const n=Object.create(null);return r=>n[r]||(n[r]=e(r))},wHe=_He(e=>e.charAt(0).toUpperCase()+e.slice(1)),CRe=(e,n)=>e!==n&&(e===e||n===n),She=new WeakMap,uU=[],O1,C2=Symbol("iterate"),Che=Symbol("Map key iterate");function AHe(e){return e&&e._isEffect===!0}function THe(e,n=yHe){AHe(e)&&(e=e.raw);const r=RHe(e,n);return n.lazy||r(),r}function OHe(e){e.active&&(ERe(e),e.options.onStop&&e.options.onStop(),e.active=!1)}var IHe=0;function RHe(e,n){const r=function(){if(!r.active)return e();if(!uU.includes(r)){ERe(r);try{return DHe(),uU.push(r),O1=r,e()}finally{uU.pop(),_Re(),O1=uU[uU.length-1]}}};return r.id=IHe++,r.allowRecurse=!!n.allowRecurse,r._isEffect=!0,r.active=!0,r.raw=e,r.deps=[],r.options=n,r}function ERe(e){const{deps:n}=e;if(n.length){for(let r=0;r<n.length;r++)n[r].delete(e);n.length=0}}var vL=!0,Bve=[];function xHe(){Bve.push(vL),vL=!1}function DHe(){Bve.push(vL),vL=!0}function _Re(){const e=Bve.pop();vL=e===void 0?!0:e}function K0(e,n,r){if(!vL||O1===void 0)return;let i=She.get(e);i||She.set(e,i=new Map);let l=i.get(r);l||i.set(r,l=new Set),l.has(O1)||(l.add(O1),O1.deps.push(l),O1.options.onTrack&&O1.options.onTrack({effect:O1,target:e,type:n,key:r}))}function qA(e,n,r,i,l,f){const h=She.get(e);if(!h)return;const v=new Set,y=A=>{A&&A.forEach(R=>{(R!==O1||R.allowRecurse)&&v.add(R)})};if(n==="clear")h.forEach(y);else if(r==="length"&&S2(e))h.forEach((A,R)=>{(R==="length"||R>=i)&&y(A)});else switch(r!==void 0&&y(h.get(r)),n){case"add":S2(e)?Lve(r)&&y(h.get("length")):(y(h.get(C2)),KU(e)&&y(h.get(Che)));break;case"delete":S2(e)||(y(h.get(C2)),KU(e)&&y(h.get(Che)));break;case"set":KU(e)&&y(h.get(C2));break}const _=A=>{A.options.onTrigger&&A.options.onTrigger({effect:A,target:e,key:r,type:n,newValue:i,oldValue:l,oldTarget:f}),A.options.scheduler?A.options.scheduler(A):A()};v.forEach(_)}var kHe=bHe("__proto__,__v_isRef,__isVue"),wRe=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(Pve)),MHe=ARe(),NHe=ARe(!0),j1e=PHe();function PHe(){const e={};return["includes","indexOf","lastIndexOf"].forEach(n=>{e[n]=function(...r){const i=$c(this);for(let f=0,h=this.length;f<h;f++)K0(i,"get",f+"");const l=i[n](...r);return l===-1||l===!1?i[n](...r.map($c)):l}}),["push","pop","shift","unshift","splice"].forEach(n=>{e[n]=function(...r){xHe();const i=$c(this)[n].apply(this,r);return _Re(),i}}),e}function ARe(e=!1,n=!1){return function(i,l,f){if(l==="__v_isReactive")return!e;if(l==="__v_isReadonly")return e;if(l==="__v_raw"&&f===(e?n?ZHe:RRe:n?KHe:IRe).get(i))return i;const h=S2(i);if(!e&&h&&rQ(j1e,l))return Reflect.get(j1e,l,f);const v=Reflect.get(i,l,f);return(Pve(l)?wRe.has(l):kHe(l))||(e||K0(i,"get",l),n)?v:Ehe(v)?!h||!Lve(l)?v.value:v:iQ(v)?e?xRe(v):$ve(v):v}}var LHe=BHe();function BHe(e=!1){return function(r,i,l,f){let h=r[i];if(!e&&(l=$c(l),h=$c(h),!S2(r)&&Ehe(h)&&!Ehe(l)))return h.value=l,!0;const v=S2(r)&&Lve(i)?Number(i)<r.length:rQ(r,i),y=Reflect.set(r,i,l,f);return r===$c(f)&&(v?CRe(l,h)&&qA(r,"set",i,l,h):qA(r,"add",i,l)),y}}function VHe(e,n){const r=rQ(e,n),i=e[n],l=Reflect.deleteProperty(e,n);return l&&r&&qA(e,"delete",n,void 0,i),l}function HHe(e,n){const r=Reflect.has(e,n);return(!Pve(n)||!wRe.has(n))&&K0(e,"has",n),r}function FHe(e){return K0(e,"iterate",S2(e)?"length":C2),Reflect.ownKeys(e)}var $He={get:MHe,set:LHe,deleteProperty:VHe,has:HHe,ownKeys:FHe},UHe={get:NHe,set(e,n){return console.warn(`Set operation on key "${String(n)}" failed: target is readonly.`,e),!0},deleteProperty(e,n){return console.warn(`Delete operation on key "${String(n)}" failed: target is readonly.`,e),!0}},Vve=e=>iQ(e)?$ve(e):e,Hve=e=>iQ(e)?xRe(e):e,Fve=e=>e,aQ=e=>Reflect.getPrototypeOf(e);function _Z(e,n,r=!1,i=!1){e=e.__v_raw;const l=$c(e),f=$c(n);n!==f&&!r&&K0(l,"get",n),!r&&K0(l,"get",f);const{has:h}=aQ(l),v=i?Fve:r?Hve:Vve;if(h.call(l,n))return v(e.get(n));if(h.call(l,f))return v(e.get(f));e!==l&&e.get(n)}function wZ(e,n=!1){const r=this.__v_raw,i=$c(r),l=$c(e);return e!==l&&!n&&K0(i,"has",e),!n&&K0(i,"has",l),e===l?r.has(e):r.has(e)||r.has(l)}function AZ(e,n=!1){return e=e.__v_raw,!n&&K0($c(e),"iterate",C2),Reflect.get(e,"size",e)}function z1e(e){e=$c(e);const n=$c(this);return aQ(n).has.call(n,e)||(n.add(e),qA(n,"add",e,e)),this}function W1e(e,n){n=$c(n);const r=$c(this),{has:i,get:l}=aQ(r);let f=i.call(r,e);f?ORe(r,i,e):(e=$c(e),f=i.call(r,e));const h=l.call(r,e);return r.set(e,n),f?CRe(n,h)&&qA(r,"set",e,n,h):qA(r,"add",e,n),this}function G1e(e){const n=$c(this),{has:r,get:i}=aQ(n);let l=r.call(n,e);l?ORe(n,r,e):(e=$c(e),l=r.call(n,e));const f=i?i.call(n,e):void 0,h=n.delete(e);return l&&qA(n,"delete",e,void 0,f),h}function q1e(){const e=$c(this),n=e.size!==0,r=KU(e)?new Map(e):new Set(e),i=e.clear();return n&&qA(e,"clear",void 0,void 0,r),i}function TZ(e,n){return function(i,l){const f=this,h=f.__v_raw,v=$c(h),y=n?Fve:e?Hve:Vve;return!e&&K0(v,"iterate",C2),h.forEach((_,A)=>i.call(l,y(_),y(A),f))}}function OZ(e,n,r){return function(...i){const l=this.__v_raw,f=$c(l),h=KU(f),v=e==="entries"||e===Symbol.iterator&&h,y=e==="keys"&&h,_=l[e](...i),A=r?Fve:n?Hve:Vve;return!n&&K0(f,"iterate",y?Che:C2),{next(){const{value:R,done:k}=_.next();return k?{value:R,done:k}:{value:v?[A(R[0]),A(R[1])]:A(R),done:k}},[Symbol.iterator](){return this}}}}function Kw(e){return function(...n){{const r=n[0]?`on key "${n[0]}" `:"";console.warn(`${wHe(e)} operation ${r}failed: target is readonly.`,$c(this))}return e==="delete"?!1:this}}function jHe(){const e={get(f){return _Z(this,f)},get size(){return AZ(this)},has:wZ,add:z1e,set:W1e,delete:G1e,clear:q1e,forEach:TZ(!1,!1)},n={get(f){return _Z(this,f,!1,!0)},get size(){return AZ(this)},has:wZ,add:z1e,set:W1e,delete:G1e,clear:q1e,forEach:TZ(!1,!0)},r={get(f){return _Z(this,f,!0)},get size(){return AZ(this,!0)},has(f){return wZ.call(this,f,!0)},add:Kw("add"),set:Kw("set"),delete:Kw("delete"),clear:Kw("clear"),forEach:TZ(!0,!1)},i={get(f){return _Z(this,f,!0,!0)},get size(){return AZ(this,!0)},has(f){return wZ.call(this,f,!0)},add:Kw("add"),set:Kw("set"),delete:Kw("delete"),clear:Kw("clear"),forEach:TZ(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(f=>{e[f]=OZ(f,!1,!1),r[f]=OZ(f,!0,!1),n[f]=OZ(f,!1,!0),i[f]=OZ(f,!0,!0)}),[e,r,n,i]}var[zHe,WHe]=jHe();function TRe(e,n){const r=e?WHe:zHe;return(i,l,f)=>l==="__v_isReactive"?!e:l==="__v_isReadonly"?e:l==="__v_raw"?i:Reflect.get(rQ(r,l)&&l in i?r:i,l,f)}var GHe={get:TRe(!1)},qHe={get:TRe(!0)};function ORe(e,n,r){const i=$c(r);if(i!==r&&n.call(e,i)){const l=SRe(e);console.warn(`Reactive ${l} contains both the raw and reactive versions of the same object${l==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var IRe=new WeakMap,KHe=new WeakMap,RRe=new WeakMap,ZHe=new WeakMap;function YHe(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function JHe(e){return e.__v_skip||!Object.isExtensible(e)?0:YHe(SRe(e))}function $ve(e){return e&&e.__v_isReadonly?e:DRe(e,!1,$He,GHe,IRe)}function xRe(e){return DRe(e,!0,UHe,qHe,RRe)}function DRe(e,n,r,i,l){if(!iQ(e))return console.warn(`value cannot be made reactive: ${String(e)}`),e;if(e.__v_raw&&!(n&&e.__v_isReactive))return e;const f=l.get(e);if(f)return f;const h=JHe(e);if(h===0)return e;const v=new Proxy(e,h===2?i:r);return l.set(e,v),v}function $c(e){return e&&$c(e.__v_raw)||e}function Ehe(e){return!!(e&&e.__v_isRef===!0)}X0("nextTick",()=>kve);X0("dispatch",e=>qU.bind(qU,e));X0("watch",(e,{evaluateLater:n,cleanup:r})=>(i,l)=>{let f=n(i),v=IIe(()=>{let y;return f(_=>y=_),y},l);r(v)});X0("store",fHe);X0("data",e=>LIe(e));X0("root",e=>nQ(e));X0("refs",e=>(e._x_refs_proxy||(e._x_refs_proxy=t6(XHe(e))),e._x_refs_proxy));function XHe(e){let n=[];return zL(e,r=>{r._x_refs&&n.push(r._x_refs)}),n}var vfe={};function kRe(e){return vfe[e]||(vfe[e]=0),++vfe[e]}function QHe(e,n){return zL(e,r=>{if(r._x_ids&&r._x_ids[n])return!0})}function eFe(e,n){e._x_ids||(e._x_ids={}),e._x_ids[n]||(e._x_ids[n]=kRe(n))}X0("id",(e,{cleanup:n})=>(r,i=null)=>{let l=`${r}${i?`-${i}`:""}`;return tFe(e,l,n,()=>{let f=QHe(e,r),h=f?f._x_ids[r]:kRe(r);return i?`${r}-${h}-${i}`:`${r}-${h}`})});sQ((e,n)=>{e._x_id&&(n._x_id=e._x_id)});function tFe(e,n,r,i){if(e._x_id||(e._x_id={}),e._x_id[n])return e._x_id[n];let l=i();return e._x_id[n]=l,r(()=>{delete e._x_id[n]}),l}X0("el",e=>e);MRe("Focus","focus","focus");MRe("Persist","persist","persist");function MRe(e,n,r){X0(n,i=>ib(`You can't use [$${n}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${r}`,i))}Zu("modelable",(e,{expression:n},{effect:r,evaluateLater:i,cleanup:l})=>{let f=i(n),h=()=>{let A;return f(R=>A=R),A},v=i(`${n} = __placeholder`),y=A=>v(()=>{},{scope:{__placeholder:A}}),_=h();y(_),queueMicrotask(()=>{if(!e._x_model)return;e._x_removeModelListeners.default();let A=e._x_model.get,R=e._x_model.set,k=mRe({get(){return A()},set(N){R(N)}},{get(){return h()},set(N){y(N)}});l(k)})});Zu("teleport",(e,{modifiers:n,expression:r},{cleanup:i})=>{e.tagName.toLowerCase()!=="template"&&ib("x-teleport can only be used on a <template> tag",e);let l=K1e(r),f=e.content.cloneNode(!0).firstElementChild;e._x_teleport=f,f._x_teleportBack=e,e.setAttribute("data-teleport-template",!0),f.setAttribute("data-teleport-target",!0),e._x_forwardEvents&&e._x_forwardEvents.forEach(v=>{f.addEventListener(v,y=>{y.stopPropagation(),e.dispatchEvent(new y.constructor(y.type,y))})}),e6(f,{},e);let h=(v,y,_)=>{_.includes("prepend")?y.parentNode.insertBefore(v,y):_.includes("append")?y.parentNode.insertBefore(v,y.nextSibling):y.appendChild(v)};_l(()=>{h(f,l,n),eT(()=>{hE(f)})()}),e._x_teleportPutBack=()=>{let v=K1e(r);_l(()=>{h(e._x_teleport,v,n)})},i(()=>_l(()=>{f.remove(),WL(f)}))});var nFe=document.createElement("div");function K1e(e){let n=eT(()=>document.querySelector(e),()=>nFe)();return n||ib(`Cannot find x-teleport element for selector: "${e}"`),n}var NRe=()=>{};NRe.inline=(e,{modifiers:n},{cleanup:r})=>{n.includes("self")?e._x_ignoreSelf=!0:e._x_ignore=!0,r(()=>{n.includes("self")?delete e._x_ignoreSelf:delete e._x_ignore})};Zu("ignore",NRe);Zu("effect",eT((e,{expression:n},{effect:r})=>{r(tm(e,n))}));function _he(e,n,r,i){let l=e,f=y=>i(y),h={},v=(y,_)=>A=>_(y,A);if(r.includes("dot")&&(n=oFe(n)),r.includes("camel")&&(n=sFe(n)),r.includes("passive")&&(h.passive=!0),r.includes("capture")&&(h.capture=!0),r.includes("window")&&(l=window),r.includes("document")&&(l=document),r.includes("debounce")){let y=r[r.indexOf("debounce")+1]||"invalid-wait",_=OJ(y.split("ms")[0])?Number(y.split("ms")[0]):250;f=pRe(f,_)}if(r.includes("throttle")){let y=r[r.indexOf("throttle")+1]||"invalid-wait",_=OJ(y.split("ms")[0])?Number(y.split("ms")[0]):250;f=hRe(f,_)}return r.includes("prevent")&&(f=v(f,(y,_)=>{_.preventDefault(),y(_)})),r.includes("stop")&&(f=v(f,(y,_)=>{_.stopPropagation(),y(_)})),r.includes("once")&&(f=v(f,(y,_)=>{y(_),l.removeEventListener(n,f,h)})),(r.includes("away")||r.includes("outside"))&&(l=document,f=v(f,(y,_)=>{e.contains(_.target)||_.target.isConnected!==!1&&(e.offsetWidth<1&&e.offsetHeight<1||e._x_isShown!==!1&&y(_))})),r.includes("self")&&(f=v(f,(y,_)=>{_.target===e&&y(_)})),(iFe(n)||PRe(n))&&(f=v(f,(y,_)=>{aFe(_,r)||y(_)})),l.addEventListener(n,f,h),()=>{l.removeEventListener(n,f,h)}}function oFe(e){return e.replace(/-/g,".")}function sFe(e){return e.toLowerCase().replace(/-(\w)/g,(n,r)=>r.toUpperCase())}function OJ(e){return!Array.isArray(e)&&!isNaN(e)}function rFe(e){return[" ","_"].includes(e)?e:e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function iFe(e){return["keydown","keyup"].includes(e)}function PRe(e){return["contextmenu","click","mouse"].some(n=>e.includes(n))}function aFe(e,n){let r=n.filter(f=>!["window","document","prevent","stop","once","capture","self","away","outside","passive","preserve-scroll"].includes(f));if(r.includes("debounce")){let f=r.indexOf("debounce");r.splice(f,OJ((r[f+1]||"invalid-wait").split("ms")[0])?2:1)}if(r.includes("throttle")){let f=r.indexOf("throttle");r.splice(f,OJ((r[f+1]||"invalid-wait").split("ms")[0])?2:1)}if(r.length===0||r.length===1&&Z1e(e.key).includes(r[0]))return!1;const l=["ctrl","shift","alt","meta","cmd","super"].filter(f=>r.includes(f));return r=r.filter(f=>!l.includes(f)),!(l.length>0&&l.filter(h=>((h==="cmd"||h==="super")&&(h="meta"),e[`${h}Key`])).length===l.length&&(PRe(e.type)||Z1e(e.key).includes(r[0])))}function Z1e(e){if(!e)return[];e=rFe(e);let n={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return n[e]=e,Object.keys(n).map(r=>{if(n[r]===e)return r}).filter(r=>r)}Zu("model",(e,{modifiers:n,expression:r},{effect:i,cleanup:l})=>{let f=e;n.includes("parent")&&(f=e.parentNode);let h=tm(f,r),v;typeof r=="string"?v=tm(f,`${r} = __placeholder`):typeof r=="function"&&typeof r()=="string"?v=tm(f,`${r()} = __placeholder`):v=()=>{};let y=()=>{let k;return h(N=>k=N),Y1e(k)?k.get():k},_=k=>{let N;h(L=>N=L),Y1e(N)?N.set(k):v(()=>{},{scope:{__placeholder:k}})};typeof r=="string"&&e.type==="radio"&&_l(()=>{e.hasAttribute("name")||e.setAttribute("name",r)});let A=e.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(e.type)||n.includes("lazy")?"change":"input",R=GA?()=>{}:_he(e,A,n,k=>{_(bfe(e,n,k,y()))});if(n.includes("fill")&&([void 0,null,""].includes(y())||Nve(e)&&Array.isArray(y())||e.tagName.toLowerCase()==="select"&&e.multiple)&&_(bfe(e,n,{target:e},y())),e._x_removeModelListeners||(e._x_removeModelListeners={}),e._x_removeModelListeners.default=R,l(()=>e._x_removeModelListeners.default()),e.form){let k=_he(e.form,"reset",[],N=>{kve(()=>e._x_model&&e._x_model.set(bfe(e,n,{target:e},y())))});l(()=>k())}e._x_model={get(){return y()},set(k){_(k)}},e._x_forceModelUpdate=k=>{k===void 0&&typeof r=="string"&&r.match(/\./)&&(k=""),window.fromModel=!0,_l(()=>cRe(e,"value",k)),delete window.fromModel},i(()=>{let k=y();n.includes("unintrusive")&&document.activeElement.isSameNode(e)||e._x_forceModelUpdate(k)})});function bfe(e,n,r,i){return _l(()=>{if(r instanceof CustomEvent&&r.detail!==void 0)return r.detail!==null&&r.detail!==void 0?r.detail:r.target.value;if(Nve(e))if(Array.isArray(i)){let l=null;return n.includes("number")?l=yfe(r.target.value):n.includes("boolean")?l=dY(r.target.value):l=r.target.value,r.target.checked?i.includes(l)?i:i.concat([l]):i.filter(f=>!cFe(f,l))}else return r.target.checked;else{if(e.tagName.toLowerCase()==="select"&&e.multiple)return n.includes("number")?Array.from(r.target.selectedOptions).map(l=>{let f=l.value||l.text;return yfe(f)}):n.includes("boolean")?Array.from(r.target.selectedOptions).map(l=>{let f=l.value||l.text;return dY(f)}):Array.from(r.target.selectedOptions).map(l=>l.value||l.text);{let l;return fRe(e)?r.target.checked?l=r.target.value:l=i:l=r.target.value,n.includes("number")?yfe(l):n.includes("boolean")?dY(l):n.includes("trim")?l.trim():l}}})}function yfe(e){let n=e?parseFloat(e):null;return lFe(n)?n:e}function cFe(e,n){return e==n}function lFe(e){return!Array.isArray(e)&&!isNaN(e)}function Y1e(e){return e!==null&&typeof e=="object"&&typeof e.get=="function"&&typeof e.set=="function"}Zu("cloak",e=>queueMicrotask(()=>_l(()=>e.removeAttribute(jL("cloak")))));nRe(()=>`[${jL("init")}]`);Zu("init",eT((e,{expression:n},{evaluate:r})=>typeof n=="string"?!!n.trim()&&r(n,{},!1):r(n,{},!1)));Zu("text",(e,{expression:n},{effect:r,evaluateLater:i})=>{let l=i(n);r(()=>{l(f=>{_l(()=>{e.textContent=f})})})});Zu("html",(e,{expression:n},{effect:r,evaluateLater:i})=>{let l=i(n);r(()=>{l(f=>{_l(()=>{e.innerHTML=f,e._x_ignoreSelf=!0,hE(e),delete e._x_ignoreSelf})})})});Rve(GIe(":",qIe(jL("bind:"))));var LRe=(e,{value:n,modifiers:r,expression:i,original:l},{effect:f,cleanup:h})=>{if(!n){let y={};hHe(y),tm(e,i)(A=>{vRe(e,A,l)},{scope:y});return}if(n==="key")return uFe(e,i);if(e._x_inlineBindings&&e._x_inlineBindings[n]&&e._x_inlineBindings[n].extract)return;let v=tm(e,i);f(()=>v(y=>{y===void 0&&typeof i=="string"&&i.match(/\./)&&(y=""),_l(()=>cRe(e,n,y,r))})),h(()=>{e._x_undoAddedClasses&&e._x_undoAddedClasses(),e._x_undoAddedStyles&&e._x_undoAddedStyles()})};LRe.inline=(e,{value:n,modifiers:r,expression:i})=>{n&&(e._x_inlineBindings||(e._x_inlineBindings={}),e._x_inlineBindings[n]={expression:i,extract:!1})};Zu("bind",LRe);function uFe(e,n){e._x_keyExpression=n}tRe(()=>`[${jL("data")}]`);Zu("data",(e,{expression:n},{cleanup:r})=>{if(dFe(e))return;n=n===""?"{}":n;let i={};fhe(i,e);let l={};gHe(l,i);let f=y2(e,n,{scope:l});(f===void 0||f===!0)&&(f={}),fhe(f,e);let h=$L(f);BIe(h);let v=e6(e,h);h.init&&y2(e,h.init),r(()=>{h.destroy&&y2(e,h.destroy),v()})});sQ((e,n)=>{e._x_dataStack&&(n._x_dataStack=e._x_dataStack,n.setAttribute("data-has-alpine-state",!0))});function dFe(e){return GA?yhe?!0:e.hasAttribute("data-has-alpine-state"):!1}Zu("show",(e,{modifiers:n,expression:r},{effect:i})=>{let l=tm(e,r);e._x_doHide||(e._x_doHide=()=>{_l(()=>{e.style.setProperty("display","none",n.includes("important")?"important":void 0)})}),e._x_doShow||(e._x_doShow=()=>{_l(()=>{e.style.length===1&&e.style.display==="none"?e.removeAttribute("style"):e.style.removeProperty("display")})});let f=()=>{e._x_doHide(),e._x_isShown=!1},h=()=>{e._x_doShow(),e._x_isShown=!0},v=()=>setTimeout(h),y=vhe(R=>R?h():f(),R=>{typeof e._x_toggleAndCascadeWithTransitions=="function"?e._x_toggleAndCascadeWithTransitions(e,R,h,f):R?v():f()}),_,A=!0;i(()=>l(R=>{!A&&R===_||(n.includes("immediate")&&(R?v():f()),y(R),_=R,A=!1)}))});Zu("for",(e,{expression:n},{effect:r,cleanup:i})=>{let l=pFe(n),f=tm(e,l.items),h=tm(e,e._x_keyExpression||"index");e._x_prevKeys=[],e._x_lookup={},r(()=>fFe(e,l,f,h)),i(()=>{Object.values(e._x_lookup).forEach(v=>_l(()=>{WL(v),v.remove()})),delete e._x_prevKeys,delete e._x_lookup})});function fFe(e,n,r,i){let l=h=>typeof h=="object"&&!Array.isArray(h),f=e;r(h=>{hFe(h)&&h>=0&&(h=Array.from(Array(h).keys(),H=>H+1)),h===void 0&&(h=[]);let v=e._x_lookup,y=e._x_prevKeys,_=[],A=[];if(l(h))h=Object.entries(h).map(([H,q])=>{let Y=J1e(n,q,H,h);i(K=>{A.includes(K)&&ib("Duplicate key on x-for",e),A.push(K)},{scope:{index:H,...Y}}),_.push(Y)});else for(let H=0;H<h.length;H++){let q=J1e(n,h[H],H,h);i(Y=>{A.includes(Y)&&ib("Duplicate key on x-for",e),A.push(Y)},{scope:{index:H,...q}}),_.push(q)}let R=[],k=[],N=[],L=[];for(let H=0;H<y.length;H++){let q=y[H];A.indexOf(q)===-1&&N.push(q)}y=y.filter(H=>!N.includes(H));let B="template";for(let H=0;H<A.length;H++){let q=A[H],Y=y.indexOf(q);if(Y===-1)y.splice(H,0,q),R.push([B,H]);else if(Y!==H){let K=y.splice(H,1)[0],se=y.splice(Y-1,1)[0];y.splice(H,0,se),y.splice(Y,0,K),k.push([K,se])}else L.push(q);B=q}for(let H=0;H<N.length;H++){let q=N[H];q in v&&(_l(()=>{WL(v[q]),v[q].remove()}),delete v[q])}for(let H=0;H<k.length;H++){let[q,Y]=k[H],K=v[q],se=v[Y],ie=document.createElement("div");_l(()=>{se||ib('x-for ":key" is undefined or invalid',f,Y,v),se.after(ie),K.after(se),se._x_currentIfEl&&se.after(se._x_currentIfEl),ie.before(K),K._x_currentIfEl&&K.after(K._x_currentIfEl),ie.remove()}),se._x_refreshXForScope(_[A.indexOf(Y)])}for(let H=0;H<R.length;H++){let[q,Y]=R[H],K=q==="template"?f:v[q];K._x_currentIfEl&&(K=K._x_currentIfEl);let se=_[Y],ie=A[Y],le=document.importNode(f.content,!0).firstElementChild,M=$L(se);e6(le,M,f),le._x_refreshXForScope=we=>{Object.entries(we).forEach(([Ne,De])=>{M[Ne]=De})},_l(()=>{K.after(le),eT(()=>hE(le))()}),typeof ie=="object"&&ib("x-for key cannot be an object, it must be a string or an integer",f),v[ie]=le}for(let H=0;H<L.length;H++)v[L[H]]._x_refreshXForScope(_[A.indexOf(L[H])]);f._x_prevKeys=A})}function pFe(e){let n=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,r=/^\s*\(|\)\s*$/g,i=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,l=e.match(i);if(!l)return;let f={};f.items=l[2].trim();let h=l[1].replace(r,"").trim(),v=h.match(n);return v?(f.item=h.replace(n,"").trim(),f.index=v[1].trim(),v[2]&&(f.collection=v[2].trim())):f.item=h,f}function J1e(e,n,r,i){let l={};return/^\[.*\]$/.test(e.item)&&Array.isArray(n)?e.item.replace("[","").replace("]","").split(",").map(h=>h.trim()).forEach((h,v)=>{l[h]=n[v]}):/^\{.*\}$/.test(e.item)&&!Array.isArray(n)&&typeof n=="object"?e.item.replace("{","").replace("}","").split(",").map(h=>h.trim()).forEach(h=>{l[h]=n[h]}):l[e.item]=n,e.index&&(l[e.index]=r),e.collection&&(l[e.collection]=i),l}function hFe(e){return!Array.isArray(e)&&!isNaN(e)}function BRe(){}BRe.inline=(e,{expression:n},{cleanup:r})=>{let i=nQ(e);i._x_refs||(i._x_refs={}),i._x_refs[n]=e,r(()=>delete i._x_refs[n])};Zu("ref",BRe);Zu("if",(e,{expression:n},{effect:r,cleanup:i})=>{e.tagName.toLowerCase()!=="template"&&ib("x-if can only be used on a <template> tag",e);let l=tm(e,n),f=()=>{if(e._x_currentIfEl)return e._x_currentIfEl;let v=e.content.cloneNode(!0).firstElementChild;return e6(v,{},e),_l(()=>{e.after(v),eT(()=>hE(v))()}),e._x_currentIfEl=v,e._x_undoIf=()=>{_l(()=>{WL(v),v.remove()}),delete e._x_currentIfEl},v},h=()=>{e._x_undoIf&&(e._x_undoIf(),delete e._x_undoIf)};r(()=>l(v=>{v?f():h()})),i(()=>e._x_undoIf&&e._x_undoIf())});Zu("id",(e,{expression:n},{evaluate:r})=>{r(n).forEach(l=>eFe(e,l))});sQ((e,n)=>{e._x_ids&&(n._x_ids=e._x_ids)});Rve(GIe("@",qIe(jL("on:"))));Zu("on",eT((e,{value:n,modifiers:r,expression:i},{cleanup:l})=>{let f=i?tm(e,i):()=>{};e.tagName.toLowerCase()==="template"&&(e._x_forwardEvents||(e._x_forwardEvents=[]),e._x_forwardEvents.includes(n)||e._x_forwardEvents.push(n));let h=_he(e,n,r,v=>{f(()=>{},{scope:{$event:v},params:[v]})});l(()=>h())}));cQ("Collapse","collapse","collapse");cQ("Intersect","intersect","intersect");cQ("Focus","trap","focus");cQ("Mask","mask","mask");function cQ(e,n,r){Zu(n,i=>ib(`You can't use [x-${n}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${r}`,i))}n6.setEvaluator(UIe);n6.setReactivityEngine({reactive:$ve,effect:THe,release:OHe,raw:$c});var mFe=n6,VRe=mFe;function HRe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const Ia=Symbol("store"),go=Symbol("getState"),Ja=Symbol("dispatch"),IJ=Symbol("additionFeatures"),en=Symbol("mediaContext");function lQ(e,n,r){const i=document.createElement("script");i.type="text/javascript",i.readyState?i.onreadystatechange=()=>{i.readyState!=="loaded"&&i.readyState!=="complete"||(i.onreadystatechange=null,n())}:(i.onload=()=>{n()},i.onerror=()=>{r()}),i.src=e,window.crossOriginIsolated&&(i.crossOrigin="anonymous"),typeof document.body.append=="function"?document.getElementsByTagName("head")[0].append(i):document.getElementsByTagName("head")[0].appendChild(i)}function FRe(e,n){let r=e;/^https?:\/\//.test(r)||(r=`https://${e}`);try{const i=new URL(r);if(!n)return i.href;if(n.hostname)return i.hostname;if(n.path)return i.pathname}catch{return""}return""}function C5(e){if(e){var n;const r=document.getElementById(e);r==null||(n=r.parentNode)===null||n===void 0||n.removeChild(r)}}function uQ(e,n){if(!e||typeof e=="string")return!1;if(e.ownerDocument===window.document)return e instanceof n;{var r;const i=(r=e.ownerDocument)===null||r===void 0?void 0:r.defaultView;let l;return!!i&&(n.name==="HTMLVideoElement"?l=i.HTMLVideoElement:n.name==="HTMLCanvasElement"?l=i.HTMLCanvasElement:n.name==="HTMLElement"&&(l=i.HTMLElement),!!l&&e instanceof l||e instanceof n)}}function sE(e){return uQ(e,HTMLVideoElement)}function GL(e){return uQ(e,HTMLCanvasElement)}function X1e(e,n){return Array.from(document.getElementsByTagName(n)).some((r=>r.contains(e)))}function Q1e(e,n,r){const i=e.parentElement;if(!i)return null;const l=document.createElement("canvas");l.id=n,i==null||i.appendChild(l);let f=null;function h(){r&&r()}return typeof ResizeObserver<"u"?(f=new ResizeObserver(h),f.observe(e),i&&f.observe(i)):window.addEventListener("resize",h),h(),l._overlayCleanup=function(){f?(f.unobserve(e),i&&f.unobserve(i),f.disconnect(),f=null):window.removeEventListener("resize",h),typeof l.remove=="function"?l.remove():i&&i.removeChild(l)},l}function eSe(e){var n;const r=e.getBoundingClientRect(),i=(n=e.parentElement)===null||n===void 0?void 0:n.getBoundingClientRect(),l=getComputedStyle(e),f=parseFloat(l.borderTopWidth)||0,h=parseFloat(l.borderLeftWidth)||0,v=h+(parseFloat(l.borderRightWidth)||0),y=f+(parseFloat(l.borderBottomWidth)||0),_=Math.max(e.width/(r.width-v),e.height/(r.height-y)),A={width:e.width/_,height:e.height/_},R=r.top-((i==null?void 0:i.top)||0),k=r.left-((i==null?void 0:i.left)||0);return{size:A,position:{top:`${R+((r.height-y-A.height)/2+f)}px`,left:`${k+((r.width-v-A.width)/2+h)}px`}}}let dQ="zoom.us";const fQ="4.0.5",fY=`https://dmogdx0jrul3u.cloudfront.net/${fQ}/lib/av`,JR=`https://source.zoom.us/${fQ}/lib/av`,pY=`https://jssdk.zoomus.cn/${fQ}/lib/av`,E5=()=>dQ;function sl(e,n){const r=n.match(e);return r&&r.length>0&&r[1]||""}function $Re(e,n){const r=n.match(e);return r&&r.length>1&&r[2]||""}const Zw=/version\/(\d+(\.?_?\d+)+)/i,gFe=[{test:[/opera/i],describe:e=>["Opera(Legacy)",sl(Zw,e)||sl(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e)]},{test:[/opr\/|opios/i],describe:e=>["Opera",sl(/(?:opr|opios)[\s/](\S+)/i,e)||sl(Zw,e)]},{test:[/SamsungBrowser/i],describe:e=>["Samsung Internet for Android",sl(Zw,e)||sl(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e)]},{test:[/micromessenger/i],describe:e=>["WeChat",sl(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||sl(Zw,e)]},{test:[/qqbrowser/i],describe:e=>[/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser",sl(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||sl(Zw,e)]},{test:[/msie|trident/i],describe:e=>["Internet Explorer",sl(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e)]},{test:[/\sedg\//i],describe:e=>["Microsoft Edge",sl(/\sedg\/(\d+(\.?_?\d+)+)/i,e)]},{test:[/edg([ea]|ios)/i],describe:e=>["Microsoft Edge(Legacy)",$Re(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e)]},{test:[/firefox|iceweasel|fxios/i],describe:e=>["Firefox",sl(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e)]},{test:[/electron/i],describe:e=>["Electron",sl(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e)]},{test:[/chromium/i],describe:e=>["Chromium",sl(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||sl(Zw,e)]},{test:[/chrome|crios|crmo/i],describe:e=>["Chrome",sl(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e)]},{test:e=>!/like android/i.test(e)&&/android/i.test(e),describe:e=>["Android Browser",sl(Zw,e)]},{test:[/safari|applewebkit/i],describe:e=>["Safari",sl(Zw,e)]}],vFe=[{test:e=>{const n=e.match(/OpenHarmony (\d+\.?\d*)/);return(n==null?void 0:n.length)&&Number(n[1])>=5},describe:e=>["HarmonyOS",sl(/OpenHarmony (\d+\.?\d*)/i,e)]},{test:[/windows /i],describe:e=>["Windows",sl(/Windows ((NT|XP)( \d\d?.\d)?)/i,e)]},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:e=>["iOS",$Re(/(Version\/)(\d[\d.]+)/,e)]},{test:[/macintosh/i],describe:e=>["macOS",sl(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,".")]},{test:[/(ipod|iphone|ipad)/i],describe:e=>["iOS",sl(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".")]},{test:e=>!/like android/i.test(e)&&/android/i.test(e),describe:e=>["Android",sl(/android[\s/-](\d+(\.\d+)*)/i,e)]},{test:[/linux/i],describe:()=>["Linux"]},{test:[/CrOS/],describe:()=>["Chrome OS"]}],bo=new class{constructor(){this._browser=void 0,this._os=void 0,this._browserVersion=void 0,this._osVersion=void 0,this._clientHintsData=void 0,this._mediaFeatureOptions=void 0,"userAgentData"in navigator&&navigator.userAgentData.getHighEntropyValues(["architecture","bitness","formFactor","model","platformVersion","wow64"]).then((e=>{this._clientHintsData=e,this._os&&this._osVersion&&this._clientHintsData.platform&&this._clientHintsData.platformVersion&&(this._os=this._clientHintsData.platform,this._osVersion=this._clientHintsData.platformVersion)})).catch((e=>{console.warn(e)}))}_getBrowserVersion(){var e;if((e=this._clientHintsData)!==null&&e!==void 0&&(e=e.brands)!==null&&e!==void 0&&e.length){const n=this._clientHintsData.brands.filter((i=>!/(Chromium|Not.*Brand)/i.test(i.brand)))[0];n&&(this._browser=n.brand);const r=this._clientHintsData.brands.find((i=>{var l;return((l=i.brand)===null||l===void 0?void 0:l.toLowerCase())==="chromium"}));r?(this._browserVersion=r.version,this._browser||(this._browser=r.brand)):this._browserVersion=n.version}else{const n=navigator.userAgent,r=gFe.find((i=>typeof i.test=="function"?i.test(n):i.test.some((l=>l.test(n)))));if(r){const i=r.describe(n);this._browser=i[0],this._browserVersion=i[1],this.isIOSMobile&&(this._browser="ios-safari")}else this._browser="unknown",this._browserVersion="0"}}_getOSVersion(){var e,n;if((e=this._clientHintsData)!==null&&e!==void 0&&e.platform&&(n=this._clientHintsData)!==null&&n!==void 0&&n.platformVersion)this._os=this._clientHintsData.platform,this._osVersion=this._clientHintsData.platformVersion;else{const r=navigator.userAgent,i=vFe.find((l=>typeof l.test=="function"?l.test(r):l.test.some((f=>f.test(r)))));if(i){const l=i.describe(r);this._os=l[0],this._osVersion=l[1]}else this._os="unknown",this._osVersion="0"}}get browser(){return this._browser||this._getBrowserVersion(),this._browser}get browserVersion(){return this._browserVersion||this._getBrowserVersion(),this._browserVersion}get os(){return this._os||this._getOSVersion(),this._os}get osVersion(){return this._osVersion||this._getOSVersion(),this._osVersion}get isIE(){return this.browser==="Internet Explorer"}get isLegacyEdge(){return this.browser==="Microsoft Edge(Legacy)"}get isLegacyOpera(){return this.browser==="Opera(Legacy)"}get isFirefox(){return this.browser==="Firefox"}get isSafari(){return this.browser==="Safari"}get isChrome(){var e,n;if((e=this._clientHintsData)!==null&&e!==void 0&&(e=e.brands)!==null&&e!==void 0&&e.length)return(n=this._clientHintsData)===null||n===void 0?void 0:n.brands.some((i=>{var l;return((l=i.brand)===null||l===void 0?void 0:l.toLocaleLowerCase())==="chromium"}));const{userAgent:r}=navigator;return!this.isLegacyOpera&&!this.isLegacyEdge&&/chrome/i.test(r)&&/webkit/i.test(r)}get isLegacyChrome(){var e;return this.isChrome&&typeof((e=navigator.mediaDevices)===null||e===void 0?void 0:e.getDisplayMedia)!="function"}get isMacOS(){return this.os==="macOS"}get isIPad(){var e;return/iPad/i.test(navigator.userAgent)||this.isMacOS&&((e=navigator)===null||e===void 0?void 0:e.maxTouchPoints)>2}get isHarmonyOS(){return this.os==="HarmonyOS"}get isIOSMobile(){return this.os==="iOS"||this.isIPad}get architecture(){var e,n;return(e=(n=this._clientHintsData)===null||n===void 0?void 0:n.architecture)!==null&&e!==void 0?e:""}get isArm(){return this.architecture?this.architecture==="arm":/arm/i.test(navigator.userAgent)}get isChromeOS(){return this.os==="Chrome OS"}get isAndroidBrowser(){var e;return((e=this.os)===null||e===void 0?void 0:e.toLowerCase())==="android"}get isArmChromeOS(){return this.isArm&&this.isChromeOS}get isAndroidOrIOSBrowser(){return this.isAndroidBrowser||this.isIOSMobile}get isSupportEssentialAudioAndVideoAbility(){return typeof WebAssembly=="object"&&typeof Worker=="function"}get isSupportAudioWorklet(){return typeof AudioWorklet=="function"}get isSupportImageCapture(){return"ImageCapture"in window}get isSupportMediaStreamTrackProcessor(){var e;return this._mediaFeatureOptions?!((e=window.JsMediaSDK_Instance)===null||e===void 0||(e=e.util)===null||e===void 0||!e.isSupportMediaStreamTrackProcessor(this._mediaFeatureOptions)):"MediaStreamTrackProcessor"in window}get isSupportOffscreenCanvas(){var e;return(e=window.JsMediaSDK_Instance)===null||e===void 0||(e=e.util)===null||e===void 0?void 0:e.isSupportOffscreenCanvas()}get gpu(){var e;return this.isSupportOffscreenCanvas?(e=window.JsMediaSDK_Instance)===null||e===void 0||(e=e.util)===null||e===void 0||(e=e.getGpuInfo())===null||e===void 0?void 0:e.renderInfo:""}get bitness(){var e,n;return(e=(n=this._clientHintsData)===null||n===void 0?void 0:n.bitness)!==null&&e!==void 0?e:""}get model(){var e,n;return(e=(n=this._clientHintsData)===null||n===void 0?void 0:n.model)!==null&&e!==void 0?e:""}get wow64(){var e;if(this.os.toLowerCase()==="windows")return(e=this._clientHintsData)===null||e===void 0?void 0:e.wow64}get isSupportSendScreenSharing(){return"getDisplayMedia"in navigator.mediaDevices&&typeof navigator.mediaDevices.getDisplayMedia=="function"}get isSupportSharedArrayBuffer(){return typeof SharedArrayBuffer=="function"}get is32bitChrome(){var e;return!((e=window.JsMediaSDK_Instance)===null||e===void 0||(e=e.util)===null||e===void 0||!e.is32bitBrowser())}get isSwiftShader(){var e;return!((e=window.JsMediaSDK_Instance)===null||e===void 0||(e=e.util)===null||e===void 0||!e.isUsingSwiftShader())}set mediaFeatureOptions(e){this._mediaFeatureOptions=e}};function URe(){var e;return"webkit"in window&&!("chrome"in window)&&!((e=window.webkit.messageHandlers)===null||e===void 0||!e.jsOCHelper)}function IZ(){var e;const{isAndroidBrowser:n,isIOSMobile:r,osVersion:i,browserVersion:l,isChrome:f,isFirefox:h,isSafari:v}=bo;var y,_;if(r)return Number((y=i.match(/^\d+/))===null||y===void 0?void 0:y[0])>=15;if(n)return Number((_=i.match(/^\d+/))===null||_===void 0?void 0:_[0])>=10;const A=Number((e=l.match(/^\d+/))===null||e===void 0?void 0:e[0]);return!!(f&&A>=69)||!!(v&&A>14)||!!(h&&A>=76)}function jRe(){const{isSupportAudioWorklet:e,isSupportEssentialAudioAndVideoAbility:n,isAndroidOrIOSBrowser:r,isSupportSendScreenSharing:i}=bo,l=n&&e||r,f=n&&navigator.mediaDevices!==void 0&&navigator.mediaCapabilities!==void 0,h=typeof"".replaceAll=="function";return{audio:h&&l,video:h&&f,screen:h&&n&&i}}class bFe{constructor(n){this.instant=void 0,this.context=void 0,this.script=void 0,this.mic=void 0,this.instant=0,this.context=n,this.mic=null,this.script=n.createScriptProcessor(2048,1,1),this.script.onaudioprocess=r=>{const i=r.inputBuffer.getChannelData(0);let l,f=0;for(l=0;l<i.length;++l)f+=i[l]*i[l];this.instant=Math.sqrt(f/i.length)}}connectToSource(n){console.log("InputMicDetector is listening");try{var r;this.mic=this.context.createMediaStreamSource(n),this.mic.connect(this.script),(r=this.script)===null||r===void 0||r.connect(this.context.destination)}catch(i){console.error(i)}}stop(){var n,r;console.log("Audio Previewer stopped"),(n=this.mic)===null||n===void 0||n.disconnect(),this.mic=null,(r=this.script)===null||r===void 0||r.disconnect(),this.script=null}getMicVolume(){return this.instant}}const yFe="https://st1.zoom.us/web_client/4qu8baa/audio/ring.mp3";class SFe{constructor(){this.sampleAudio=void 0,this.audioCtx=void 0,this.destinationNode=void 0,this.audioPlayer=void 0,this.analyzserInterval=void 0,this.analyserNode=void 0,this.analyserNodeBufferDataArray=void 0,this.analyserCallback=void 0,this.sourceNode=void 0,this.mAudioStream=void 0,this.mSourceNode=void 0,this.mediaRecorder=void 0,this.isRecording=void 0,this.recorderChunks=[],this.recorderObjUrl=void 0,this.recorderPlayer=void 0,this.maximumRecordingTimer=void 0,this.shouldPlayAfterRecording=!0,this.isRunning=!1}testSpeaker(n){var r;if(typeof AudioContext!="function"||typeof MediaStreamAudioDestinationNode!="function"||!AudioContext.prototype.decodeAudioData)return void console.warn("Cannot test the speaker due to the browser capability");const{speakerId:i,sampleAudioUrl:l=yFe,onAnalyseFrequency:f}=n||{};if(this.isRunning)return void console.warn("A tester is running,please stop it first");this.isRunning=!0,this.initAudioContext(),(((r=this.sampleAudio)===null||r===void 0?void 0:r.url)===l&&this.sampleAudio.data?Promise.resolve(this.sampleAudio.data):window.fetch(l).then((v=>v.arrayBuffer())).then((v=>this.audioCtx.decodeAudioData(v))).then((v=>(this.sampleAudio={url:l,data:v},v)))).then((v=>{var y,_,A;this.sourceNode=this.audioCtx.createBufferSource(),this.sourceNode.buffer=v,this.sourceNode.loop=!0,i&&(y=this.audioPlayer)!==null&&y!==void 0&&y.setSinkId&&this.audioPlayer.setSinkId(i),f?typeof AudioContext.prototype.createAnalyser=="function"?(this.analyzserInterval&&window.clearInterval(this.analyzserInterval),this.analyserCallback=f,this.initAnalyserNode(),this.analyserNode&&this.sourceNode.connect(this.analyserNode)):(this.sourceNode.connect(this.destinationNode),console.warn("Cannot analyze the stream due to the browser capability")):(this.analyserCallback=void 0,this.sourceNode.connect(this.destinationNode)),this.sourceNode.start(0),((_=this.audioCtx)===null||_===void 0?void 0:_.state)!=="running"&&((A=this.audioCtx)===null||A===void 0||A.resume()),this.audioPlayer&&(this.audioPlayer.muted=!1,this.audioPlayer.currentTime=0,this.audioPlayer.play())}));const h=()=>{this.isRunning=!1,this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.pause()),this.analyserNode&&this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),this.sourceNode&&(this.sourceNode.stop(0),this.sourceNode.disconnect(),this.sourceNode.buffer=null,this.sourceNode=void 0)};return{stop:h,destroy:()=>{var v;h(),this.analyserNode&&this.destinationNode&&(this.analyserNode.disconnect(this.destinationNode),this.analyserNode=void 0),(v=this.audioCtx)===null||v===void 0||v.close(),this.audioCtx=void 0}}}testMicrophone(n){var r;if(typeof AudioContext!="function"||typeof MediaStreamAudioDestinationNode!="function"||typeof AudioContext.prototype.createMediaStreamSource!="function"||typeof((r=navigator.mediaDevices)===null||r===void 0?void 0:r.getUserMedia)!="function")return void console.warn("Cannot test the microphone due to the browser capability");const{microphoneId:i,speakerId:l,recordAndPlay:f,maxRecordDuration:h,onAnalyseFrequency:v,onStartRecording:y,onStopRecording:_,onStartPlayRecording:A,onStopPlayRecording:R}=n||{};if(this.isRunning)return void console.warn("A tester is running,please stop it first");this.isRunning=!0,this.initAudioContext();const k=()=>{f&&this.mediaRecorder&&this.isRecording&&(this.shouldPlayAfterRecording=!0,this.mediaRecorder.state!=="inactive"&&this.mediaRecorder.stop())};window.navigator.mediaDevices.getUserMedia({audio:!i||{deviceId:{exact:i}}}).then((L=>{var B,H,q,Y;this.mAudioStream=L,this.mSourceNode=(B=this.audioCtx)===null||B===void 0?void 0:B.createMediaStreamSource(L),this.audioPlayer.muted=!0,v?(this.analyzserInterval&&window.clearInterval(this.analyzserInterval),this.analyserCallback=v,this.initAnalyserNode(),this.analyserNode&&((q=this.mSourceNode)===null||q===void 0||q.connect(this.analyserNode))):this.analyserCallback=void 0,f&&(typeof MediaRecorder=="function"?(this.recorderObjUrl&&window.URL.revokeObjectURL(this.recorderObjUrl),this.mediaRecorder=new MediaRecorder(this.mAudioStream),this.mediaRecorder.ondataavailable=K=>{K.data&&this.recorderChunks.push(K.data)},this.mediaRecorder.onstop=()=>{if(this.isRecording=!1,this.maximumRecordingTimer&&(window.clearTimeout(this.maximumRecordingTimer),this.maximumRecordingTimer=void 0),_==null||_(),this.recorderChunks.length>0){var K;const se=new Blob(this.recorderChunks,{type:((K=this.recorderChunks[0])===null||K===void 0?void 0:K.type)||"audio/ogg; codecs=opus"});this.recorderObjUrl=window.URL.createObjectURL(se),this.shouldPlayAfterRecording&&this.playRecording(this.recorderObjUrl,l,A,R).catch((ie=>{this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),console.warn(ie)})),this.recorderChunks=[],this.mediaRecorder&&(this.mediaRecorder.ondataavailable=null,this.mediaRecorder.onstop=null,this.mediaRecorder=void 0)}},this.mediaRecorder.start(),this.isRecording=!0,y==null||y(),this.maximumRecordingTimer=window.setTimeout((()=>{k()}),h||1e4)):console.warn("Cannot record the sound due to the browser capability")),((H=this.audioCtx)===null||H===void 0?void 0:H.state)!=="running"&&((Y=this.audioCtx)===null||Y===void 0||Y.resume()),this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.play())}));const N=()=>{this.isRunning=!1,this.maximumRecordingTimer&&(window.clearTimeout(this.maximumRecordingTimer),this.maximumRecordingTimer=void 0),this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.pause()),this.analyserNode&&this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),this.mSourceNode&&(v&&this.analyserNode&&this.mSourceNode.disconnect(this.analyserNode),this.mSourceNode=void 0),this.mAudioStream&&(this.mAudioStream.getAudioTracks().forEach((L=>{L.stop()})),this.mAudioStream=void 0),this.mediaRecorder&&(this.shouldPlayAfterRecording=!1,this.mediaRecorder.ondataavailable=null,this.mediaRecorder.onstop=null,this.mediaRecorder.state!=="inactive"&&this.mediaRecorder.stop(),this.isRecording=!1,this.mediaRecorder=void 0,this.recorderChunks=[]),this.recorderPlayer&&(this.recorderPlayer.currentTime=0,this.recorderPlayer.pause())};return{stop:N,stopRecording:k,destroy:()=>{var L;N(),this.analyserNode&&this.destinationNode&&(this.analyserNode.disconnect(this.destinationNode),this.analyserNode=void 0),(L=this.audioCtx)===null||L===void 0||L.close(),this.audioCtx=void 0}}}initAudioContext(){this.audioCtx&&this.audioPlayer||(this.audioCtx=new AudioContext,this.destinationNode=new MediaStreamAudioDestinationNode(this.audioCtx),this.audioPlayer=new Audio,this.audioPlayer.loop=!0,this.audioPlayer.srcObject=this.destinationNode.stream)}initAnalyserNode(){if(!this.audioCtx)return;this.analyserNode||(this.analyserNode=this.audioCtx.createAnalyser(),this.analyserNode.connect(this.destinationNode),this.analyserNode.fftSize=1024);const n=this.analyserNode.frequencyBinCount;this.analyserNodeBufferDataArray=new Uint8Array(n),this.analyzserInterval=window.setInterval(this.audioAnalyserCallback.bind(this),20)}audioAnalyserCallback(){if(this.analyserNodeBufferDataArray&&this.analyserNode&&this.analyserCallback){this.analyserNode.getByteFrequencyData(this.analyserNodeBufferDataArray);let n=0;for(const i of this.analyserNodeBufferDataArray)n+=i;const r=n/this.analyserNodeBufferDataArray.length;this.analyserCallback(r)}}playRecording(n,r,i,l){this.recorderPlayer=new Audio,this.recorderPlayer.src=n,this.recorderPlayer.currentTime=0,this.recorderPlayer.setSinkId&&r&&this.recorderPlayer.setSinkId(r);const f=()=>{l==null||l(),this.recorderPlayer&&(this.recorderPlayer.onpause=null,this.recorderPlayer.onended=null,this.recorderPlayer=void 0,this.isRunning=!1)};return new Promise(((h,v)=>{this.recorderPlayer&&(this.recorderPlayer.onpause=()=>{h(!0)},this.recorderPlayer.onended=()=>{h(!0)},this.recorderPlayer.onerror=v,i==null||i(),this.recorderPlayer.play().catch(v))})).finally((()=>{window.URL.revokeObjectURL(n),f()}))}}const Sfe="AudioNotStartedError";class CFe{constructor(n=""){this.audioContext=void 0,this.inputMicDetector=void 0,this.isMicUnmuted=void 0,this.isAudioStarted=void 0,this.audioStream=void 0,this.deviceId=void 0,this.tester=void 0,this.audioContext=null,this.inputMicDetector=null,this.isMicUnmuted=!1,this.isAudioStarted=!1,this.audioStream=null,this.deviceId=n,this.tester=new SFe}async start(){if(this.audioStream||this.isAudioStarted)throw new Error("AudioAlreadyStartedError");try{const n=await navigator.mediaDevices.getUserMedia(this.getAudioConstraints());this.audioStream=n,this.isAudioStarted=!0}catch(n){throw n}}async unmute(){if(!this.audioStream||!this.isAudioStarted)throw new Error(Sfe);if(this.isMicUnmuted)throw new Error("AudioAlreadyUnmutedError");return this.toggleMicIsMuted(!0)}async mute(){if(!this.audioStream||!this.isAudioStarted)throw new Error(Sfe);if(!this.isMicUnmuted)throw new Error("AudioAlreadyMutedError");return this.toggleMicIsMuted(!1)}getCurrentVolume(){return this.inputMicDetector?this.inputMicDetector.getMicVolume():0}async stop(){if(!this.audioStream||!this.isAudioStarted)throw new Error(Sfe);this.audioStream.getAudioTracks().forEach((n=>n.stop())),this.audioStream=null,this.isAudioStarted=!1}async toggleMicIsMuted(n){if(n){if(!this.audioContext){const r=window.AudioContext||window.webkitAudioContext;this.audioContext=new r}this.inputMicDetector=new bFe(this.audioContext),this.inputMicDetector.connectToSource(this.audioStream)}else this.inputMicDetector&&this.inputMicDetector.stop(),this.inputMicDetector=null;this.isMicUnmuted=n}getAudioConstraints(){return{audio:this.deviceId===""||{deviceId:{exact:this.deviceId}},video:!1}}testSpeaker(n){return this.tester.testSpeaker(n)}testMicrophone(n){return this.tester.testMicrophone(n)}}let Cn=(function(e){return e[e.InitSuccess=1]="InitSuccess",e[e.InitSuccessVideo=1.1]="InitSuccessVideo",e[e.InitSuccessAudio=1.2]="InitSuccessAudio",e[e.InitSuccessSharing=1.3]="InitSuccessSharing",e[e.UserGrantCaptureAudio=2]="UserGrantCaptureAudio",e[e.CurrentVideoResolution=3]="CurrentVideoResolution",e[e.JpegDecThreadOk=4]="JpegDecThreadOk",e[e.JpegData=5]="JpegData",e[e.SharingPara=6]="SharingPara",e[e.VideoDecodeMaxSize=7]="VideoDecodeMaxSize",e[e.CurrentCaptureVideoWidthHeight=8]="CurrentCaptureVideoWidthHeight",e[e.StartVideoCaptureSuccess=9]="StartVideoCaptureSuccess",e[e.StopVideoCaptureSuccess=10]="StopVideoCaptureSuccess",e[e.StartRemoteControlSuccess=11]="StartRemoteControlSuccess",e[e.CancelRemoteControlSuccess=12]="CancelRemoteControlSuccess",e[e.RemoteControlCopiedTextNotify=13]="RemoteControlCopiedTextNotify",e[e.MonitorLog=14]="MonitorLog",e[e.CurrentDesktopSharingWidthHeight=15]="CurrentDesktopSharingWidthHeight",e[e.DesktopSharingCaptureSuccess=16]="DesktopSharingCaptureSuccess",e[e.CheckChromeSharingExtensionResponse=17]="CheckChromeSharingExtensionResponse",e[e.SharingDecodeMaxSize=18]="SharingDecodeMaxSize",e[e.DataChannelOffer=19]="DataChannelOffer",e[e.AesGcmIvResponse=21]="AesGcmIvResponse",e[e.SharingDesktopStreamHaveAudio=23]="SharingDesktopStreamHaveAudio",e[e.JoinComputerAudioComplete=24]="JoinComputerAudioComplete",e[e.JoinSharingAudioComplete=25]="JoinSharingAudioComplete",e[e.LeaveComputerAudioComplete=26]="LeaveComputerAudioComplete",e[e.LeaveSharingAudioComplete=27]="LeaveSharingAudioComplete",e[e.HidStatusMute=28]="HidStatusMute",e[e.AudioStreamFailed=31]="AudioStreamFailed",e[e.VideoStreamFailed=32]="VideoStreamFailed",e[e.AudioSpeakerSetSuccess=33]="AudioSpeakerSetSuccess",e[e.AudiobridgeSetCcLangSuccess=36]="AudiobridgeSetCcLangSuccess",e[e.AudioLevelIndicator=38]="AudioLevelIndicator",e[e.SyncRendererTypeResponse=39]="SyncRendererTypeResponse",e[e.SendRemoteControlQrCode=55]="SendRemoteControlQrCode",e[e.StartVideoStreamInMaskSettingSuccess=66]="StartVideoStreamInMaskSettingSuccess",e[e.CurrentDecodeVideoQuality=66.5]="CurrentDecodeVideoQuality",e[e.CurrentDecodeVideoFps=66.6]="CurrentDecodeVideoFps",e[e.SharingFirstDecodeFrameReceivedSsrc=70]="SharingFirstDecodeFrameReceivedSsrc",e[e.StartVideoStreamInVbSettingSuccess=94]="StartVideoStreamInVbSettingSuccess",e[e.VbModelPreloading_3S=96]="VbModelPreloading_3S",e[e.VbModelPreloading_10S=97]="VbModelPreloading_10S",e[e.VbModelPreloadingOk=98]="VbModelPreloadingOk",e[e.NewActiveSpeakerFirstFrameCallback=111]="NewActiveSpeakerFirstFrameCallback",e[e.AudioBridgeFirstRecvData=114]="AudioBridgeFirstRecvData",e[e.AudioBridgeCanSendData=115]="AudioBridgeCanSendData",e[e.StartAnnotationSuccess=158]="StartAnnotationSuccess",e[e.DeviceChangeEvent=159]="DeviceChangeEvent",e[e.RecaptureAudio=160]="RecaptureAudio",e[e.InitFailed=-1]="InitFailed",e[e.InitFailedVideo=-1.1]="InitFailedVideo",e[e.InitFailedAudio=-1.2]="InitFailedAudio",e[e.InitFailedSharing=-1.3]="InitFailedSharing",e[e.AudioCaptureFailed=-2]="AudioCaptureFailed",e[e.AudioWebsocketBroken=-3]="AudioWebsocketBroken",e[e.VideoWebsocketBroken=-4]="VideoWebsocketBroken",e[e.SharingDecThreadFailed=-5]="SharingDecThreadFailed",e[e.AudioZeroData=-6]="AudioZeroData",e[e.AudioCtxSamplerate=-7]="AudioCtxSamplerate",e[e.UserForbiddedCaptureVideo=-8]="UserForbiddedCaptureVideo",e[e.UserCameraIsTakenByOtherPrograms=-9]="UserCameraIsTakenByOtherPrograms",e[e.StopVideoCaptureFailed=-10]="StopVideoCaptureFailed",e[e.StartRemoteControlFailed=-11]="StartRemoteControlFailed",e[e.CancelRemoteControlFailed=-12]="CancelRemoteControlFailed",e[e.RemoteControlPasteTextLengthOverflow=-14]="RemoteControlPasteTextLengthOverflow",e[e.UserStopDesktopSharing=-15]="UserStopDesktopSharing",e[e.UserCancelPermissionRequest=-16]="UserCancelPermissionRequest",e[e.DesktopSharingChromeExtensionUninstalled=-17]="DesktopSharingChromeExtensionUninstalled",e[e.DesktopSharingPermissionDenied=-18]="DesktopSharingPermissionDenied",e[e.DesktopSharingTimeOut=-19]="DesktopSharingTimeOut",e[e.DesktopSharingError=-20]="DesktopSharingError",e[e.AudioSpeakerSetError=-21]="AudioSpeakerSetError",e[e.DesktopSharingSystemError=-22]="DesktopSharingSystemError",e[e.SharingDesktopStreamHaveNoAudio=-27]="SharingDesktopStreamHaveNoAudio",e[e.AudioBridgeSocketConnectionError=-28]="AudioBridgeSocketConnectionError",e[e.AudioBridgeReconnectStart=-29]="AudioBridgeReconnectStart",e[e.AudioBridgeReconnectEnd=-31]="AudioBridgeReconnectEnd",e[e.WebglLostInMultiView=-32]="WebglLostInMultiView",e[e.MaskSettingParaError=-33]="MaskSettingParaError",e[e.VbSettingParaError=-34]="VbSettingParaError",e[e.NotifyUIFailover=-35]="NotifyUIFailover",e[e.AudiobridgeSetCcLangFailure=-39]="AudiobridgeSetCcLangFailure",e[e.NotifyUIWMSCFailover=-42]="NotifyUIWMSCFailover",e[e.NotifyUIWMSCWSSDisconnected=-43]="NotifyUIWMSCWSSDisconnected",e[e.RecoverWebrtcAudio=-44]="RecoverWebrtcAudio",e[e.WebglContextInvalid=-51]="WebglContextInvalid",e[e.WasmMemoryFail=-52]="WasmMemoryFail",e[e.WorkletProcessExceptions=-53]="WorkletProcessExceptions",e[e.NotSupportExternalCanvasInVTagRenderer=-55]="NotSupportExternalCanvasInVTagRenderer",e[e.HealthCheckFailed=-129]="HealthCheckFailed",e[e.StartAnnotationFailed=-130]="StartAnnotationFailed",e.AudioQosData="AUDIO_QOS_DATA",e.VideoQosData="VIDEO_QOS_DATA",e.ShareQosData="VIDEOSHARE_QOS_DATA",e.NetworkQualityChange="NETWORK_QUALITY_CHANGE",e.NetworkQualityChangeAudio="NETWORK_QUALITY_CHANGE_AUDIO",e.AudioStreamMuted="AUDIO_STREAM_MUTED",e.AudioStreamUnmuted="AUDIO_STREAM_UNMUTED",e.AnnotationRedoStatus="ANNO_REDO_STATUS",e.AnnotationUndoStatus="ANNO_UNDO_STATUS",e.AnnoViewerRequestDraw="ANNO_VIEWER_REQUEST_DRAW",e.VideoStreamMuted="VIDEO_STREAM_MUTED",e.VideoStreamUnmuted="VIDEO_STREAM_UNMUTED",e})({}),zp=(function(e){return e[e.EncodeSuccess=1]="EncodeSuccess",e[e.DecodeSuccess=2]="DecodeSuccess",e[e.EncodeFailed=-1]="EncodeFailed",e[e.DecodeFailed=-2]="DecodeFailed",e})({}),Cfe=(function(e){return e.Spotlight="Spotlight",e.Unmute="Unmute",e.AllowToTalk="Allow to talk",e})({}),sb=(function(e){return e.Inherited="inherited",e.Active="active",e.PassiveByMuteOne="passive(mute one)",e.PassiveByMuteAll="passive(mute all)",e.SharingAudio="sharing audio",e})({}),zP=(function(e){return e.Inherited="inherited",e.Active="active",e.Passive="passive",e.SharingAudio="sharing audio",e})({}),E2=(function(e){return e.Active="active",e.Failover="failover",e.EndedBySystem="audio stream is ended by system",e.Pstn="pstn",e.MicrophoneError="microphone error",e})({}),dU=(function(e){return e.Join="join",e.Leave="leave",e.Muted="muted",e.Unmuted="unmuted",e})({}),Kh=(function(e){return e[e.Calling=1]="Calling",e[e.Ringing=2]="Ringing",e[e.Accepted=3]="Accepted",e[e.Busy=4]="Busy",e[e.NotAvailable=5]="NotAvailable",e[e.HangUp=6]="HangUp",e[e.Fail=7]="Fail",e[e.Success=8]="Success",e[e.Timeout=9]="Timeout",e[e.Canceling=10]="Canceling",e[e.Canceled=11]="Canceled",e[e.CancelFailed=12]="CancelFailed",e[e.NoAnswer=13]="NoAnswer",e[e.BlockNoHost=14]="BlockNoHost",e[e.BlockHighRate=15]="BlockHighRate",e[e.BlockTooFrequent=16]="BlockTooFrequent",e})({});const EFe=(()=>{const e=new ArrayBuffer(684),n=new Uint32Array(e);return n.set([1179011410,676,1163280727,544501094,16,65539,16e3,64e3,2097156,1635017060,640],0),new Blob([n],{type:"audio/wav"})})(),_Fe=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]),wFe=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);let sv=(function(e){return e[e.HostGrab=0]="HostGrab",e[e.OnlyHost=1]="OnlyHost",e[e.AnyoneGrab=2]="AnyoneGrab",e[e.MultipleShare=3]="MultipleShare",e})({}),qs=(function(e){return e.Sharing="sharing",e.Paused="paused",e.End="ended",e})({}),RJ=(function(e){return e[e.Video_90P=0]="Video_90P",e[e.Video_180P=1]="Video_180P",e[e.Video_360P=2]="Video_360P",e[e.Video_720P=3]="Video_720P",e[e.Video_1080P=4]="Video_1080P",e})({}),tSe=(function(e){return e.Active="Active",e.Inactive="Inactive",e})({}),RZ=(function(e){return e.Muted="Muted",e.Unmuted="Unmuted",e})({}),Efe=(function(e){return e.Started="Started",e.Stopped="Stopped",e.Failed="Failed",e})({}),nSe=(function(e){return e.Approved="Approved",e.Rejected="Rejected",e})({}),_fe=(function(e){return e.PrivilegeChange="PrivilegeChange",e.StopScreenCapture="StopScreenCapture",e.ShareFromMainSession="ShareFromMainSession",e})({}),zRe=(function(e){return e[e.ImageNotMatch=2]="ImageNotMatch",e[e.CanvasNotMatch=3]="CanvasNotMatch",e[e.VBModelNotMatch=4]="VBModelNotMatch",e})({});const bL="blur";let i2=(function(e){return e.User="user",e.Environment="environment",e.Left="left",e.Right="right",e})({});const o6=Object.values(i2),mA=1e3,oSe="__ZOOM_SDK_SHARING_VIDEO__",sSe="__ZOOM_SDK_ANNOTATION_CANVAS_@__",kA="__ZOOM_SDK_VIDEO_ZONE__",wfe="__ZOOM_SDK_MEDIA_PLAYBACK_SOURCE_VIDEO__",WP="__ZOOM_SDK_DYMMY_VIDEO_PLAYER_CANVAS_ID__",whe="__ZOOM_SDK_DUMMY_HIDDEN_SELF_VIEW_VIDEO_ID__",xJ={data:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,rate:0,bandwidth:0}},MA={data:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0,rate:0,bandwidth:0}};let Gp=(function(e){return e[e.Request=11]="Request",e[e.Decline=12]="Decline",e[e.Approve=13]="Approve",e[e.GiveUp=14]="GiveUp",e[e.StartControl=15]="StartControl",e[e.ContinueControl=16]="ContinueControl",e[e.StopControl=17]="StopControl",e[e.SwitchCamera=20]="SwitchCamera",e})({}),gA=(function(e){return e[e.Bk=0]="Bk",e[e.Center=1]="Center",e[e.ZoomIn=2]="ZoomIn",e[e.ZoomOut=3]="ZoomOut",e[e.Left=4]="Left",e[e.Right=5]="Right",e[e.Up=6]="Up",e[e.Down=7]="Down",e[e.SwitchCamera=8]="SwitchCamera",e})({}),uP=(function(e){return e[e.Pan=192]="Pan",e[e.Tilt=48]="Tilt",e[e.Zoom=12]="Zoom",e[e.Focus=3]="Focus",e})({});(function(e){return e[e.ZoomIn=2]="ZoomIn",e[e.ZoomOut=3]="ZoomOut",e[e.Left=4]="Left",e[e.Right=5]="Right",e[e.Up=6]="Up",e[e.Down=7]="Down",e[e.SwitchCamera=8]="SwitchCamera",e})({});(function(e){return e[e.None=0]="None",e[e.ApproveAnother=3]="ApproveAnother",e[e.Stop=5]="Stop",e})({});let ZU=(function(e){return e[e.Null=0]="Null",e[e.Normal=1]="Normal",e[e.VideoMode=2]="VideoMode",e})({}),_u=(function(e){return e[e.Null=0]="Null",e[e.VirtualBackground=1]="VirtualBackground",e[e.Mask=2]="Mask",e[e.VideoProcessor=3]="VideoProcessor",e})({}),Ur=(function(e){return e.Computer="computer",e.Phone="phone",e})({}),DJ=(function(e){return e[e.Decline=0]="Decline",e[e.Approve=1]="Approve",e[e.CacheClean=2]="CacheClean",e})({}),lf=(function(e){return e.Unknown="unknown",e.Uninstalled="uninstalled",e.Installed="installed",e})({}),kJ=(function(e){return e.Unlaunched="unlaunched",e.Launched="launched",e})({}),Afe=(function(e){return e.Started="started",e.Ended="ended",e})({}),Tfe=(function(e){return e[e.Max=30]="Max",e[e.Min=10]="Min",e[e.Default=24]="Default",e})({}),DU=(function(e){return e[e.Loading=1]="Loading",e[e.Done=2]="Done",e})({}),rSe=(function(e){return e.Browser="Browser",e.Zoom="Zoom",e})({}),iSe=(function(e){return e.Denoise="backgroundNoiseSuppression",e.OriginalSound="originalSound",e})({}),Ahe=(function(e){return e[e.Undefined=0]="Undefined",e[e.WebGL=1]="WebGL",e[e.WebGPU=2]="WebGPU",e[e.WebGL2=3]="WebGL2",e})({});(function(e){return e[e.H323=1]="H323",e[e.SIP=2]="SIP",e})({});let hY=(function(e){return e[e.Success=0]="Success",e[e.Ringing=1]="Ringing",e[e.Timeout=2]="Timeout",e[e.Busy=101]="Busy",e[e.Fail=104]="Fail",e})({}),kU=(function(e){return e[e.Exception=-1]="Exception",e[e.PermissionReset=-2]="PermissionReset",e[e.LostAccess=-3]="LostAccess",e})({}),Wh=(function(e){return e[e.AudioConnectionFailed=101]="AudioConnectionFailed",e[e.AudioStreamEnded=102]="AudioStreamEnded",e[e.MicrophonePermissionReset=103]="MicrophonePermissionReset",e[e.AudioStreamFailed=104]="AudioStreamFailed",e[e.MicrophoneMuted=105]="MicrophoneMuted",e[e.AudioStreamMuted=106]="AudioStreamMuted",e[e.AudioPlaybackInterrupted=107]="AudioPlaybackInterrupted",e[e.VideoConnectionFailed=201]="VideoConnectionFailed",e[e.VideoStreamEnded=202]="VideoStreamEnded",e[e.CameraPermissionReset=203]="CameraPermissionReset",e[e.WebGlContextInvalid=204]="WebGlContextInvalid",e[e.WasmOutOfMemory=205]="WasmOutOfMemory",e[e.VideoStreamFailed=206]="VideoStreamFailed",e[e.VideoStreamMuted=207]="VideoStreamMuted",e[e.SharingStreamFailed=301]="SharingStreamFailed",e})({}),aSe=(function(e){return e[e.NoFallback=0]="NoFallback",e[e.FallbackToWasm=1]="FallbackToWasm",e})({}),The=(function(e){return e[e.WebRTCAudio=1]="WebRTCAudio",e[e.WebRTCVideo=2]="WebRTCVideo",e})({}),AFe=(function(e){return e[e.WebRTCAudio=1]="WebRTCAudio",e[e.WebRTCAudio2=2]="WebRTCAudio2",e})({}),dP=(function(e){return e[e.BROWSER_NOT_SUPPORTED=-3]="BROWSER_NOT_SUPPORTED",e[e.DEVICE_UNSUPPORTED=-4]="DEVICE_UNSUPPORTED",e[e.OTHER_ERROR=-7]="OTHER_ERROR",e[e.DEVICE_UNVERIFIED=-8]="DEVICE_UNVERIFIED",e[e.FEATURE_DISABLED=-9]="FEATURE_DISABLED",e[e.FORCE_SAME_AV_STRATEGY=-10]="FORCE_SAME_AV_STRATEGY",e})({});const TFe={[dP.BROWSER_NOT_SUPPORTED]:"Your browser does not support WebRTC Video.",[dP.DEVICE_UNSUPPORTED]:"WebRTC video cannot currently run on this environment. We are evaluating support for it in the future.",[dP.OTHER_ERROR]:"An error occurred with WebRTC video.",[dP.DEVICE_UNVERIFIED]:"WebRTC video has not been verified in this environment. We are evaluating it for future support.",[dP.FEATURE_DISABLED]:"We disabled WebRTC video for this environment.",[dP.FORCE_SAME_AV_STRATEGY]:"The same AV strategy is forced."};let af=(function(e){return e[e.SELECT_MOUSE=0]="SELECT_MOUSE",e[e.SELECT_TOOL=1]="SELECT_TOOL",e[e.SELECT_ERASER=2]="SELECT_ERASER",e[e.UNDO=3]="UNDO",e[e.REDO=4]="REDO",e[e.CLEAR=5]="CLEAR",e[e.CLOSE_TOOL_BAR=6]="CLOSE_TOOL_BAR",e[e.UPDATE_PARAMS=7]="UPDATE_PARAMS",e[e.PAUSE_ANNOTATION=8]="PAUSE_ANNOTATION",e[e.SHOW_ANNOTATOR_NAME=9]="SHOW_ANNOTATOR_NAME",e[e.ANNOTATOR_ID_TO_NAME=10]="ANNOTATOR_ID_TO_NAME",e[e.ANNO_CANVAS_SIZE_UPDATE=11]="ANNO_CANVAS_SIZE_UPDATE",e[e.STAMP=12]="STAMP",e[e.SPOTLIGHT=13]="SPOTLIGHT",e[e.TEXTBOX=14]="TEXTBOX",e[e.SELECT_OBJ=15]="SELECT_OBJ",e[e.UPDATE_REMOTE_POSITION_INFO=16]="UPDATE_REMOTE_POSITION_INFO",e[e.UPDATE_VANISHING_TOOL_TIME=17]="UPDATE_VANISHING_TOOL_TIME",e})({}),Ofe=(function(e){return e[e.Mine=0]="Mine",e[e.Viewer=1]="Viewer",e[e.All=2]="All",e})({}),I1=(function(e){return e[e.None=0]="None",e[e.Pen=1]="Pen",e[e.Highlighter=2]="Highlighter",e[e.Spotlight=3]="Spotlight",e[e.Arrow=4]="Arrow",e[e.Eraser=7]="Eraser",e[e.Line=11]="Line",e[e.Arrow1=12]="Arrow1",e[e.Rectangle=14]="Rectangle",e[e.RectangleSemiFill=15]="RectangleSemiFill",e[e.Ellipse=18]="Ellipse",e[e.EllipseSemiFill=19]="EllipseSemiFill",e[e.DoubleArrow=20]="DoubleArrow",e[e.RectangleFill=21]="RectangleFill",e[e.EllipseFill=23]="EllipseFill",e[e.Diamond=24]="Diamond",e[e.StampArrow=25]="StampArrow",e[e.StampCheck=26]="StampCheck",e[e.StampX=27]="StampX",e[e.StampStar=31]="StampStar",e[e.StampHeart=32]="StampHeart",e[e.StampQuestionMark=33]="StampQuestionMark",e[e.VanishingPen=36]="VanishingPen",e[e.DiamondSemiFill=37]="DiamondSemiFill",e[e.DiamondFill=38]="DiamondFill",e[e.VanishingArrow=43]="VanishingArrow",e[e.VanishingDoubleArrow=44]="VanishingDoubleArrow",e[e.VanishingDiamond=45]="VanishingDiamond",e[e.VanishingEllipse=46]="VanishingEllipse",e[e.VanishingRectangle=47]="VanishingRectangle",e})({}),cSe=(function(e){return e[e.White=4294967295]="White",e[e.Red=4294908185]="Red",e[e.Yellow=4294958642]="Yellow",e[e.Green=4286760838]="Green",e[e.Blue=4281240831]="Blue",e[e.LightPurple=4290017791]="LightPurple",e[e.Pink=4294916295]="Pink",e[e.Orange=4294937088]="Orange",e[e.LimeTreeGreen=4283029022]="LimeTreeGreen",e[e.IceBlue=4283554027]="IceBlue",e[e.DarkGrey=4278190080]="DarkGrey",e[e.DarkRed=4286513152]="DarkRed",e[e.Brown=4286006280]="Brown",e[e.DarkGreen=4278940200]="DarkGreen",e[e.DarkBlue=4279521219]="DarkBlue",e})({});const fU=152,OFe=[{name:"audio_simd.min.js",category:"audio",type:"worker",tag:"simd",alias:"audioSIMDWorkletPath"},{name:"audio.simd.wasm",category:"audio",type:"wasm",tag:"simd",alias:"audioSIMDWasm"},{name:"js_audio_process.min.js",category:"audio",type:"worker",tag:"",alias:"audioWorkerPath"},{name:"audio.encode.wasm",category:"audio",type:"wasm",tag:"",alias:"audioWasm"},{name:"js_audio_worklet.min.js",category:"audio",type:"worklet",tag:"",alias:"audioWorkletPath"},{name:"js_audio_worklet_simd.min.js",category:"audio",type:"worklet",tag:"simd",alias:"audioWorkletSIMDPath"},{name:"js_audio_worklet_process.min.js",category:"audio",type:"worklet",tag:"",alias:"audioWorkletProcessPath"},{name:"js_sharing_audio_worklet.min.js",category:"audio",type:"worklet",tag:"",alias:"sharingAudioWorkletPath"},{name:"js_audio_level_worklet_process.min.js",category:"audio",type:"worklet",tag:"",alias:"audioLevelWorkletPath"},{name:"video_mtsimd.min.js",category:"video",type:"worker",tag:"simd,thread",alias:"videoMSIMDWorkerPath"},{name:"video.mtsimd.wasm",category:"video",type:"wasm",tag:"simd,thread,videoShare",alias:"videoMSIMDWasm"},{name:"video_m.min.js",category:"video",type:"worker",tag:"thread",alias:"videoMtWorkerPath"},{name:"video.mt.wasm",category:"video",type:"wasm",tag:"thread",alias:"videoMtWasm"},{name:"video_simd.min.js",category:"video",type:"worker",tag:"simd",alias:"videoSIMDWorkerPath"},{name:"video.simd.wasm",category:"video",type:"wasm",tag:"simd",alias:"videoSIMDWasm"},{name:"video_s.min.js",category:"video",type:"worker",tag:"",alias:"videoWorkerPath"},{name:"video.decode.wasm",category:"video",type:"wasm",tag:"",alias:"videoWasm"},{name:"video_share_mtsimd.min.js",category:"video",type:"worker",tag:"videoShare",alias:"vsmiworkerpath"},{name:"sharing_mtsimd.min.js",category:"sharing",type:"worker",tag:"simd,thread",alias:"sharingMSIMDWorkerPath"},{name:"sharing_m.min.js",category:"sharing",type:"worker",tag:"thread",alias:"sharingMtWorkerPath"},{name:"sharing_simd.min.js",category:"sharing",type:"worker",tag:"simd",alias:"sharingSIMDWorkerPath"},{name:"sharing_s.min.js",category:"sharing",type:"worker",tag:"",alias:"sharingWorkerPath"},{name:"net_thread.min.js",category:"common",type:"worker",tag:"thread",alias:"netThreadPath"}];class ov{constructor(){this.assetsPath=void 0,this.instance=void 0,this.callbackList=void 0,this.mediaWorkersPath=void 0,this.mediaOptions=void 0,this.inProgress=void 0,this.callbackList=[]}static getInstance(){return this.agentInstance===void 0&&(this.agentInstance=new ov),this.agentInstance}static isSupportMultipleView(){var n;return(n=window.JsMediaSDK_Instance)===null||n===void 0?void 0:n.util.isSupportMultiViewAPI()}static getMaxCountRender(n,r,i){var l;const f=i?{disableRenderLimits:!0}:r;return(l=window.JsMediaSDK_Instance)===null||l===void 0?void 0:l.util.getMaxCountRender(n,f)}init(n,r,i){var l,f,h;!this.instance&&window.JsMediaSDK_Instance&&(this.instance=new window.JsMediaSDK_Instance({...r??{},mediaSDKConfig:{mediaSDKCDNPath:n}})),this.onMediaSDKCallback=this.onMediaSDKCallback.bind(this),this.mediaOptions=r,(l=this.instance)===null||l===void 0||l.setProps({callback:this.onMediaSDKCallback,isPreviewMode:!0,meetingParams:{cid:"",userId:0,rwgHost:"",nginxHost:"",abToken:"",confId:"",e2eEncrypt:!0,enableWebtransport:!1,webtransportPort:0,rwgToMediaSDKConfig:{},webrtcMode:0},mediaParams:{videoDecodeThreadNum:ov.getMaxCountRender(!1,(f=this.mediaOptions)===null||f===void 0?void 0:f.enableMultiDecodeVideoWithoutSAB,i),rendererType:1,isEnableHD:!0,isEnableHW:!0}}),(h=this.instance)===null||h===void 0||h.initVideoEncode(),this.inProgress=!0}onMediaSDKCallback(n,r){this.callbackList.length>0&&this.callbackList.forEach((i=>i(n,r)))}registerCallback(n){this.callbackList.push(n)}unregisterCallback(n){this.callbackList=this.callbackList.filter((r=>r!==n))}async destroy(){var n;this.callbackList=[],await((n=this.instance)===null||n===void 0?void 0:n.destroy()),this.instance=null,this.inProgress=!1}disconnect(){var n,r;(n=this.instance)===null||n===void 0||n.Notify_MeidaSDK(17,{}),(r=this.instance)===null||r===void 0||r.JsMediaSDK_UnInit()}startVirtualBackgroundSetting(n,r,i,l,f,h,v=!1,y){var _;(_=this.instance)===null||_===void 0||_.Notify_MeidaSDK(91,{canvas:n,bgdom:r,width:f,height:h,ssid:0,VideoSelectValue:l==="default"?null:l,disableOriginalRatio:v,usingFacingMode:["user","environment"].includes(l),id:y})}updateVirtualBackgroundImage(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(92,{bgdom:n})}stopVirtualBackgroundSetting(n=!1){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(93,{isSwitch:n})}startMaskSetting(n,r,i,l,f,h,v,y,_){var A;(A=this.instance)===null||A===void 0||A.Notify_MeidaSDK(62,{canvas:n,maskdom:null,bgdom:null,dx:0,dy:0,dWidth:170,dHeight:170,width:1280,height:720,ssid:0,originWidth:379,originHeight:213,VideoSelectValue:f==="default"?null:f,usingFacingMode:["user","environment"].includes(f)})}stopMaskSetting(n=!1){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(65,{isSwitch:n})}}ov.agentInstance=void 0;const Lt="INVALID_OPERATION",Wu="INTERNAL_ERROR",pQ="OPERATION_TIMEOUT",hf="INSUFFICIENT_PRIVILEGES",mY="IMPROPER_MEETING_STATE",gs="INVALID_PARAMETERS",lSe="OPERATION_CANCELLED";var Ohe=function(e,n){return Ohe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(r[l]=i[l])},Ohe(e,n)};function dg(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}Ohe(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var YU=function(){return YU=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++)for(var l in n=arguments[r])Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l]);return e},YU.apply(this,arguments)};function WRe(e,n){var r,i,l,f,h={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return f={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function v(y){return function(_){return(function(A){if(r)throw new TypeError("Generator is already executing.");for(;h;)try{if(r=1,i&&(l=2&A[0]?i.return:A[0]?i.throw||((l=i.return)&&l.call(i),0):i.next)&&!(l=l.call(i,A[1])).done)return l;switch(i=0,l&&(A=[2&A[0],l.value]),A[0]){case 0:case 1:l=A;break;case 4:return h.label++,{value:A[1],done:!1};case 5:h.label++,i=A[1],A=[0];continue;case 7:A=h.ops.pop(),h.trys.pop();continue;default:if(!((l=(l=h.trys).length>0&&l[l.length-1])||A[0]!==6&&A[0]!==2)){h=0;continue}if(A[0]===3&&(!l||A[1]>l[0]&&A[1]<l[3])){h.label=A[1];break}if(A[0]===6&&h.label<l[1]){h.label=l[1],l=A;break}if(l&&h.label<l[2]){h.label=l[2],h.ops.push(A);break}l[2]&&h.ops.pop(),h.trys.pop();continue}A=n.call(e,h)}catch(R){A=[6,R],i=0}finally{r=l=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}})([y,_])}}}function _5(e){var n=typeof Symbol=="function"&&Symbol.iterator,r=n&&e[n],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function fb(e,n){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i,l,f=r.call(e),h=[];try{for(;(n===void 0||n-- >0)&&!(i=f.next()).done;)h.push(i.value)}catch(v){l={error:v}}finally{try{i&&!i.done&&(r=f.return)&&r.call(f)}finally{if(l)throw l.error}}return h}function Z0(e,n){for(var r=0,i=n.length,l=e.length;r<i;r++,l++)e[l]=n[r];return e}function xP(e){return this instanceof xP?(this.v=e,this):new xP(e)}function Zi(e){return typeof e=="function"}function s6(e){var n=e((function(r){Error.call(r),r.stack=new Error().stack}));return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ife=s6((function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map((function(r,i){return i+1+") "+r.toString()})).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}}));function MJ(e,n){if(e){var r=e.indexOf(n);0<=r&&e.splice(r,1)}}var r6=(function(){function e(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}var n;return e.prototype.unsubscribe=function(){var r,i,l,f,h;if(!this.closed){this.closed=!0;var v=this._parentage;if(v)if(this._parentage=null,Array.isArray(v))try{for(var y=_5(v),_=y.next();!_.done;_=y.next())_.value.remove(this)}catch(B){r={error:B}}finally{try{_&&!_.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}else v.remove(this);var A=this.initialTeardown;if(Zi(A))try{A()}catch(B){h=B instanceof Ife?B.errors:[B]}var R=this._finalizers;if(R){this._finalizers=null;try{for(var k=_5(R),N=k.next();!N.done;N=k.next()){var L=N.value;try{uSe(L)}catch(B){h=h??[],B instanceof Ife?h=Z0(Z0([],fb(h)),fb(B.errors)):h.push(B)}}}catch(B){l={error:B}}finally{try{N&&!N.done&&(f=k.return)&&f.call(k)}finally{if(l)throw l.error}}}if(h)throw new Ife(h)}},e.prototype.add=function(r){var i;if(r&&r!==this)if(this.closed)uSe(r);else{if(r instanceof e){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=(i=this._finalizers)!==null&&i!==void 0?i:[]).push(r)}},e.prototype._hasParent=function(r){var i=this._parentage;return i===r||Array.isArray(i)&&i.includes(r)},e.prototype._addParent=function(r){var i=this._parentage;this._parentage=Array.isArray(i)?(i.push(r),i):i?[i,r]:r},e.prototype._removeParent=function(r){var i=this._parentage;i===r?this._parentage=null:Array.isArray(i)&&MJ(i,r)},e.prototype.remove=function(r){var i=this._finalizers;i&&MJ(i,r),r instanceof e&&r._removeParent(this)},e.EMPTY=((n=new e).closed=!0,n),e})(),GRe=r6.EMPTY;function qRe(e){return e instanceof r6||e&&"closed"in e&&Zi(e.remove)&&Zi(e.add)&&Zi(e.unsubscribe)}function uSe(e){Zi(e)?e():e.unsubscribe()}var IFe=void 0;function KRe(e){(function(n,r){for(var i=[],l=2;l<arguments.length;l++)i[l-2]=arguments[l];setTimeout.apply(void 0,Z0([n,r],fb(i)))})((function(){throw e}))}function yL(){}function gY(e){e()}var Uve=(function(e){function n(r){var i=e.call(this)||this;return i.isStopped=!1,r?(i.destination=r,qRe(r)&&r.add(i)):i.destination=xFe,i}return dg(n,e),n.create=function(r,i,l){return new NJ(r,i,l)},n.prototype.next=function(r){this.isStopped||this._next(r)},n.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},n.prototype._next=function(r){this.destination.next(r)},n.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},n.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},n})(r6),RFe=(function(){function e(n){this.partialObserver=n}return e.prototype.next=function(n){var r=this.partialObserver;if(r.next)try{r.next(n)}catch(i){xZ(i)}},e.prototype.error=function(n){var r=this.partialObserver;if(r.error)try{r.error(n)}catch(i){xZ(i)}else xZ(n)},e.prototype.complete=function(){var n=this.partialObserver;if(n.complete)try{n.complete()}catch(r){xZ(r)}},e})(),NJ=(function(e){function n(r,i,l){var f,h=e.call(this)||this;return f=Zi(r)||!r?{next:r??void 0,error:i??void 0,complete:l??void 0}:r,h.destination=new RFe(f),h}return dg(n,e),n})(Uve);function xZ(e){KRe(e)}var xFe={closed:!0,next:yL,error:function(e){throw e},complete:yL},jve=typeof Symbol=="function"&&Symbol.observable||"@@observable";function hQ(e){return e}function KA(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return ZRe(e)}function ZRe(e){return e.length===0?hQ:e.length===1?e[0]:function(n){return e.reduce((function(r,i){return i(r)}),n)}}var Hc=(function(){function e(n){n&&(this._subscribe=n)}return e.prototype.lift=function(n){var r=new e;return r.source=this,r.operator=n,r},e.prototype.subscribe=function(n,r,i){var l,f=this,h=(l=n)&&l instanceof Uve||(function(v){return v&&Zi(v.next)&&Zi(v.error)&&Zi(v.complete)})(l)&&qRe(l)?n:new NJ(n,r,i);return gY((function(){var v=f,y=v.operator,_=v.source;h.add(y?y.call(h,_):_?f._subscribe(h):f._trySubscribe(h))})),h},e.prototype._trySubscribe=function(n){try{return this._subscribe(n)}catch(r){n.error(r)}},e.prototype.forEach=function(n,r){var i=this;return new(r=dSe(r))((function(l,f){var h=new NJ({next:function(v){try{n(v)}catch(y){f(y),h.unsubscribe()}},error:f,complete:l});i.subscribe(h)}))},e.prototype._subscribe=function(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)},e.prototype[jve]=function(){return this},e.prototype.pipe=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return ZRe(n)(this)},e.prototype.toPromise=function(n){var r=this;return new(n=dSe(n))((function(i,l){var f;r.subscribe((function(h){return f=h}),(function(h){return l(h)}),(function(){return i(f)}))}))},e.create=function(n){return new e(n)},e})();function dSe(e){var n;return(n=e??IFe)!==null&&n!==void 0?n:Promise}function Xl(e){return function(n){if((function(r){return Zi(r==null?void 0:r.lift)})(n))return n.lift((function(r){try{return e(r,this)}catch(i){this.error(i)}}));throw new TypeError("Unable to lift unknown Observable type")}}function Al(e,n,r,i,l){return new DFe(e,n,r,i,l)}var Rfe,DFe=(function(e){function n(r,i,l,f,h,v){var y=e.call(this,r)||this;return y.onFinalize=h,y.shouldUnsubscribe=v,y._next=i?function(_){try{i(_)}catch(A){r.error(A)}}:e.prototype._next,y._error=f?function(_){try{f(_)}catch(A){r.error(A)}finally{this.unsubscribe()}}:e.prototype._error,y._complete=l?function(){try{l()}catch(_){r.error(_)}finally{this.unsubscribe()}}:e.prototype._complete,y}return dg(n,e),n.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;e.prototype.unsubscribe.call(this),!i&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},n})(Uve),kFe=s6((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),cb=(function(e){function n(){var r=e.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return dg(n,e),n.prototype.lift=function(r){var i=new fSe(this,this);return i.operator=r,i},n.prototype._throwIfClosed=function(){if(this.closed)throw new kFe},n.prototype.next=function(r){var i=this;gY((function(){var l,f;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var h=_5(i.currentObservers),v=h.next();!v.done;v=h.next())v.value.next(r)}catch(y){l={error:y}}finally{try{v&&!v.done&&(f=h.return)&&f.call(h)}finally{if(l)throw l.error}}}}))},n.prototype.error=function(r){var i=this;gY((function(){if(i._throwIfClosed(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=r;for(var l=i.observers;l.length;)l.shift().error(r)}}))},n.prototype.complete=function(){var r=this;gY((function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var i=r.observers;i.length;)i.shift().complete()}}))},n.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(n.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),n.prototype._trySubscribe=function(r){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,r)},n.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},n.prototype._innerSubscribe=function(r){var i=this,l=this,f=l.hasError,h=l.isStopped,v=l.observers;return f||h?GRe:(this.currentObservers=null,v.push(r),new r6((function(){i.currentObservers=null,MJ(v,r)})))},n.prototype._checkFinalizedStatuses=function(r){var i=this,l=i.hasError,f=i.thrownError,h=i.isStopped;l?r.error(f):h&&r.complete()},n.prototype.asObservable=function(){var r=new Hc;return r.source=this,r},n.create=function(r,i){return new fSe(r,i)},n})(Hc),fSe=(function(e){function n(r,i){var l=e.call(this)||this;return l.destination=r,l.source=i,l}return dg(n,e),n.prototype.next=function(r){var i,l;(l=(i=this.destination)===null||i===void 0?void 0:i.next)===null||l===void 0||l.call(i,r)},n.prototype.error=function(r){var i,l;(l=(i=this.destination)===null||i===void 0?void 0:i.error)===null||l===void 0||l.call(i,r)},n.prototype.complete=function(){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||i===void 0||i.call(r)},n.prototype._subscribe=function(r){var i,l;return(l=(i=this.source)===null||i===void 0?void 0:i.subscribe(r))!==null&&l!==void 0?l:GRe},n})(cb),MFe=(function(e){function n(r){var i=e.call(this)||this;return i._value=r,i}return dg(n,e),Object.defineProperty(n.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),n.prototype._subscribe=function(r){var i=e.prototype._subscribe.call(this,r);return!i.closed&&r.next(this._value),i},n.prototype.getValue=function(){var r=this,i=r.hasError,l=r.thrownError,f=r._value;if(i)throw l;return this._throwIfClosed(),f},n.prototype.next=function(r){e.prototype.next.call(this,this._value=r)},n})(cb),NFe=function(){return Date.now()},PFe=(function(e){function n(r,i){return e.call(this)||this}return dg(n,e),n.prototype.schedule=function(r,i){return this},n})(r6),zve=(function(e){function n(r,i){var l=e.call(this,r,i)||this;return l.scheduler=r,l.work=i,l.pending=!1,l}return dg(n,e),n.prototype.schedule=function(r,i){var l;if(i===void 0&&(i=0),this.closed)return this;this.state=r;var f=this.id,h=this.scheduler;return f!=null&&(this.id=this.recycleAsyncId(h,f,i)),this.pending=!0,this.delay=i,this.id=(l=this.id)!==null&&l!==void 0?l:this.requestAsyncId(h,this.id,i),this},n.prototype.requestAsyncId=function(r,i,l){return l===void 0&&(l=0),(function(f,h){for(var v=[],y=2;y<arguments.length;y++)v[y-2]=arguments[y];return setInterval.apply(void 0,Z0([f,h],fb(v)))})(r.flush.bind(r,this),l)},n.prototype.recycleAsyncId=function(r,i,l){if(l===void 0&&(l=0),l!=null&&this.delay===l&&this.pending===!1)return i;i!=null&&(function(f){clearInterval(f)})(i)},n.prototype.execute=function(r,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var l=this._execute(r,i);if(l)return l;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},n.prototype._execute=function(r,i){var l,f=!1;try{this.work(r)}catch(h){f=!0,l=h||new Error("Scheduled action threw falsy error")}if(f)return this.unsubscribe(),l},n.prototype.unsubscribe=function(){if(!this.closed){var r=this.id,i=this.scheduler,l=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,MJ(l,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},n})(PFe),LFe=1,Ihe={};function YRe(e){return e in Ihe&&(delete Ihe[e],!0)}var BFe=function(e){var n=LFe++;return Ihe[n]=!0,Rfe||(Rfe=Promise.resolve()),Rfe.then((function(){return YRe(n)&&e()})),n},VFe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return BFe.apply(void 0,Z0([],fb(e)))},HFe=function(e){return(function(n){YRe(n)})(e)},FFe=(function(e){function n(r,i){var l=e.call(this,r,i)||this;return l.scheduler=r,l.work=i,l}return dg(n,e),n.prototype.requestAsyncId=function(r,i,l){return l===void 0&&(l=0),l!==null&&l>0?e.prototype.requestAsyncId.call(this,r,i,l):(r.actions.push(this),r._scheduled||(r._scheduled=VFe(r.flush.bind(r,void 0))))},n.prototype.recycleAsyncId=function(r,i,l){var f;if(l===void 0&&(l=0),l!=null?l>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,r,i,l);var h=r.actions;i!=null&&((f=h[h.length-1])===null||f===void 0?void 0:f.id)!==i&&(HFe(i),r._scheduled===i&&(r._scheduled=void 0))},n})(zve),pSe=(function(){function e(n,r){r===void 0&&(r=e.now),this.schedulerActionCtor=n,this.now=r}return e.prototype.schedule=function(n,r,i){return r===void 0&&(r=0),new this.schedulerActionCtor(this,n).schedule(i,r)},e.now=NFe,e})(),Wve=(function(e){function n(r,i){i===void 0&&(i=pSe.now);var l=e.call(this,r,i)||this;return l.actions=[],l._active=!1,l}return dg(n,e),n.prototype.flush=function(r){var i=this.actions;if(this._active)i.push(r);else{var l;this._active=!0;do if(l=r.execute(r.state,r.delay))break;while(r=i.shift());if(this._active=!1,l){for(;r=i.shift();)r.unsubscribe();throw l}}},n})(pSe),mE=new((function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return dg(n,e),n.prototype.flush=function(r){this._active=!0;var i=this._scheduled;this._scheduled=void 0;var l,f=this.actions;r=r||f.shift();do if(l=r.execute(r.state,r.delay))break;while((r=f[0])&&r.id===i&&f.shift());if(this._active=!1,l){for(;(r=f[0])&&r.id===i&&f.shift();)r.unsubscribe();throw l}},n})(Wve))(FFe),nm=new Wve(zve),$Fe=nm,UFe=(function(e){function n(r,i){var l=e.call(this,r,i)||this;return l.scheduler=r,l.work=i,l}return dg(n,e),n.prototype.schedule=function(r,i){return i===void 0&&(i=0),i>0?e.prototype.schedule.call(this,r,i):(this.delay=i,this.state=r,this.scheduler.flush(this),this)},n.prototype.execute=function(r,i){return i>0||this.closed?e.prototype.execute.call(this,r,i):this._execute(r,i)},n.prototype.requestAsyncId=function(r,i,l){return l===void 0&&(l=0),l!=null&&l>0||l==null&&this.delay>0?e.prototype.requestAsyncId.call(this,r,i,l):(r.flush(this),0)},n})(zve),hSe=new((function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return dg(n,e),n})(Wve))(UFe),Yn=new Hc((function(e){return e.complete()}));function JRe(e){return e&&Zi(e.schedule)}function Gve(e){return e[e.length-1]}function XRe(e){return Zi(Gve(e))?e.pop():void 0}function i6(e){return JRe(Gve(e))?e.pop():void 0}var qve=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function QRe(e){return Zi(e==null?void 0:e.then)}function e2e(e){return Zi(e[jve])}function t2e(e){return Symbol.asyncIterator&&Zi(e==null?void 0:e[Symbol.asyncIterator])}function n2e(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var mSe,o2e=typeof Symbol=="function"&&Symbol.iterator?Symbol.iterator:"@@iterator";function s2e(e){return Zi(e==null?void 0:e[o2e])}function r2e(e){return(function(n,r,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,f=i.apply(n,r||[]),h=[];return l={},v("next"),v("throw"),v("return"),l[Symbol.asyncIterator]=function(){return this},l;function v(k){f[k]&&(l[k]=function(N){return new Promise((function(L,B){h.push([k,N,L,B])>1||y(k,N)}))})}function y(k,N){try{(function(L){L.value instanceof xP?Promise.resolve(L.value.v).then(_,A):R(h[0][2],L)})(f[k](N))}catch(L){R(h[0][3],L)}}function _(k){y("next",k)}function A(k){y("throw",k)}function R(k,N){k(N),h.shift(),h.length&&y(h[0][0],h[0][1])}})(this,arguments,(function(){var n,r,i;return WRe(this,(function(l){switch(l.label){case 0:n=e.getReader(),l.label=1;case 1:l.trys.push([1,,9,10]),l.label=2;case 2:return[4,xP(n.read())];case 3:return r=l.sent(),i=r.value,r.done?[4,xP(void 0)]:[3,5];case 4:return[2,l.sent()];case 5:return[4,xP(i)];case 6:return[4,l.sent()];case 7:return l.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}}))}))}function i2e(e){return Zi(e==null?void 0:e.getReader)}function Id(e){if(e instanceof Hc)return e;if(e!=null){if(e2e(e))return l=e,new Hc((function(f){var h=l[jve]();if(Zi(h.subscribe))return h.subscribe(f);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(qve(e))return i=e,new Hc((function(f){for(var h=0;h<i.length&&!f.closed;h++)f.next(i[h]);f.complete()}));if(QRe(e))return r=e,new Hc((function(f){r.then((function(h){f.closed||(f.next(h),f.complete())}),(function(h){return f.error(h)})).then(null,KRe)}));if(t2e(e))return gSe(e);if(s2e(e))return n=e,new Hc((function(f){var h,v;try{for(var y=_5(n),_=y.next();!_.done;_=y.next()){var A=_.value;if(f.next(A),f.closed)return}}catch(R){h={error:R}}finally{try{_&&!_.done&&(v=y.return)&&v.call(y)}finally{if(h)throw h.error}}f.complete()}));if(i2e(e))return gSe(r2e(e))}var n,r,i,l;throw n2e(e)}function gSe(e){return new Hc((function(n){(function(r,i){var l,f,h,v;return(function(y,_,A,R){return new(A||(A=Promise))((function(k,N){function L(q){try{H(R.next(q))}catch(Y){N(Y)}}function B(q){try{H(R.throw(q))}catch(Y){N(Y)}}function H(q){var Y;q.done?k(q.value):(Y=q.value,Y instanceof A?Y:new A((function(K){K(Y)}))).then(L,B)}H((R=R.apply(y,[])).next())}))})(this,0,void 0,(function(){var y,_;return WRe(this,(function(A){switch(A.label){case 0:A.trys.push([0,5,6,11]),l=(function(R){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var k,N=R[Symbol.asyncIterator];return N?N.call(R):(R=_5(R),k={},L("next"),L("throw"),L("return"),k[Symbol.asyncIterator]=function(){return this},k);function L(B){k[B]=R[B]&&function(H){return new Promise((function(q,Y){(function(K,se,ie,le){Promise.resolve(le).then((function(M){K({value:M,done:ie})}),se)})(q,Y,(H=R[B](H)).done,H.value)}))}}})(r),A.label=1;case 1:return[4,l.next()];case 2:if((f=A.sent()).done)return[3,4];if(y=f.value,i.next(y),i.closed)return[2];A.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return _=A.sent(),h={error:_},[3,11];case 6:return A.trys.push([6,,9,10]),f&&!f.done&&(v=l.return)?[4,v.call(l)]:[3,8];case 7:A.sent(),A.label=8;case 8:return[3,10];case 9:if(h)throw h.error;return[7];case 10:return[7];case 11:return i.complete(),[2]}}))}))})(e,n).catch((function(r){return n.error(r)}))}))}function $A(e,n,r,i,l){i===void 0&&(i=0),l===void 0&&(l=!1);var f=n.schedule((function(){r(),l?e.add(this.schedule(null,i)):this.unsubscribe()}),i);if(e.add(f),!l)return f}function al(e,n){return n===void 0&&(n=0),Xl((function(r,i){r.subscribe(Al(i,(function(l){return $A(i,e,(function(){return i.next(l)}),n)}),(function(){return $A(i,e,(function(){return i.complete()}),n)}),(function(l){return $A(i,e,(function(){return i.error(l)}),n)})))}))}function Rhe(e,n){return n===void 0&&(n=0),Xl((function(r,i){i.add(e.schedule((function(){return r.subscribe(i)}),n))}))}function vSe(e,n){if(!e)throw new Error("Iterable cannot be null");return new Hc((function(r){$A(r,n,(function(){var i=e[Symbol.asyncIterator]();$A(r,n,(function(){i.next().then((function(l){l.done?r.complete():r.next(l.value)}))}),0,!0)}))}))}function An(e,n){return n?(function(r,i){if(r!=null){if(e2e(r))return(function(l,f){return Id(l).pipe(Rhe(f),al(f))})(r,i);if(qve(r))return(function(l,f){return new Hc((function(h){var v=0;return f.schedule((function(){v===l.length?h.complete():(h.next(l[v++]),h.closed||this.schedule())}))}))})(r,i);if(QRe(r))return(function(l,f){return Id(l).pipe(Rhe(f),al(f))})(r,i);if(t2e(r))return vSe(r,i);if(s2e(r))return(function(l,f){return new Hc((function(h){var v;return $A(h,f,(function(){v=l[o2e](),$A(h,f,(function(){var y,_,A;try{_=(y=v.next()).value,A=y.done}catch(R){return void h.error(R)}A?h.complete():h.next(_)}),0,!0)})),function(){return Zi(v==null?void 0:v.return)&&v.return()}}))})(r,i);if(i2e(r))return(function(l,f){return vSe(r2e(l),f)})(r,i)}throw n2e(r)})(e,n):Id(e)}function Di(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return An(e,i6(e))}function ZA(e,n){var r=Zi(e)?e:function(){return e};return new Hc((function(i){return i.error(r())}))}(function(e){e.NEXT="N",e.ERROR="E",e.COMPLETE="C"})(mSe||(mSe={}));var xfe=(function(){function e(n,r,i){this.kind=n,this.value=r,this.error=i,this.hasValue=n==="N"}return e.prototype.observe=function(n){return a2e(this,n)},e.prototype.do=function(n,r,i){var l=this,f=l.kind,h=l.value,v=l.error;return f==="N"?n==null?void 0:n(h):f==="E"?r==null?void 0:r(v):i==null?void 0:i()},e.prototype.accept=function(n,r,i){var l;return Zi((l=n)===null||l===void 0?void 0:l.next)?this.observe(n):this.do(n,r,i)},e.prototype.toObservable=function(){var n=this,r=n.kind,i=n.value,l=n.error,f=r==="N"?Di(i):r==="E"?ZA((function(){return l})):r==="C"?Yn:0;if(!f)throw new TypeError("Unexpected notification kind "+r);return f},e.createNext=function(n){return new e("N",n)},e.createError=function(n){return new e("E",void 0,n)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e})();function a2e(e,n){var r,i,l,f=e,h=f.kind,v=f.value,y=f.error;if(typeof h!="string")throw new TypeError('Invalid notification, missing "kind"');h==="N"?(r=n.next)===null||r===void 0||r.call(n,v):h==="E"?(i=n.error)===null||i===void 0||i.call(n,y):(l=n.complete)===null||l===void 0||l.call(n)}var c2e=s6((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}));function JU(e,n){return new Promise((function(r,i){var l,f=!1;e.subscribe({next:function(h){l=h,f=!0},error:i,complete:function(){f?r(l):i(new c2e)}})}))}function Ra(e,n){return new Promise((function(r,i){var l=new NJ({next:function(f){r(f),l.unsubscribe()},error:i,complete:function(){i(new c2e)}});e.subscribe(l)}))}function l2e(e){return e instanceof Date&&!isNaN(e)}var jFe=s6((function(e){return function(n){n===void 0&&(n=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=n}}));function Kve(e,n){var r=l2e(e)?{first:e}:typeof e=="number"?{each:e}:e,i=r.first,l=r.each,f=r.with,h=f===void 0?zFe:f,v=r.scheduler,y=v===void 0?nm:v,_=r.meta,A=_===void 0?null:_;if(i==null&&l==null)throw new TypeError("No timeout provided.");return Xl((function(R,k){var N,L,B=null,H=0,q=function(Y){L=$A(k,y,(function(){try{N.unsubscribe(),Id(h({meta:A,lastValue:B,seen:H})).subscribe(k)}catch(K){k.error(K)}}),Y)};N=R.subscribe(Al(k,(function(Y){L==null||L.unsubscribe(),H++,k.next(B=Y),l>0&&q(l)}),void 0,void 0,(function(){L!=null&&L.closed||L==null||L.unsubscribe(),B=null}))),!H&&q(i!=null?typeof i=="number"?i:+i-y.now():l)}))}function zFe(e){throw new jFe(e)}function Kn(e,n){return Xl((function(r,i){var l=0;r.subscribe(Al(i,(function(f){i.next(e.call(n,f,l++))})))}))}var WFe=Array.isArray;function Zve(e){return Kn((function(n){return(function(r,i){return WFe(i)?r.apply(void 0,Z0([],fb(i))):r(i)})(e,n)}))}var GFe=Array.isArray,qFe=Object.getPrototypeOf,KFe=Object.prototype,ZFe=Object.keys;function u2e(e,n,r,i,l,f,h,v){var y=[],_=0,A=0,R=!1,k=function(){!R||y.length||_||n.complete()},N=function(B){return _<i?L(B):y.push(B)},L=function(B){f&&n.next(B),_++;var H=!1;Id(r(B,A++)).subscribe(Al(n,(function(q){f?N(q):n.next(q)}),(function(){H=!0}),void 0,(function(){if(H)try{_--;for(var q=function(){var Y=y.shift();h||L(Y)};y.length&&_<i;)q();k()}catch(Y){n.error(Y)}})))};return e.subscribe(Al(n,N,(function(){R=!0,k()}))),function(){}}function Nt(e,n,r){return r===void 0&&(r=1/0),Zi(n)?Nt((function(i,l){return Kn((function(f,h){return n(i,f,l,h)}))(Id(e(i,l)))}),r):(typeof n=="number"&&(r=n),Xl((function(i,l){return u2e(i,l,e,r)})))}function d2e(e){return e===void 0&&(e=1/0),Nt(hQ,e)}function f2e(){return d2e(1)}function w5(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return f2e()(An(e,i6(e)))}function bSe(e){return new Hc((function(n){Id(e()).subscribe(n)}))}function Yve(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=XRe(e),i=(function(v){if(v.length===1){var y=v[0];if(GFe(y))return{args:y,keys:null};if((A=y)&&typeof A=="object"&&qFe(A)===KFe){var _=ZFe(y);return{args:_.map((function(R){return y[R]})),keys:_}}}var A;return{args:v,keys:null}})(e),l=i.args,f=i.keys,h=new Hc((function(v){var y=l.length;if(y)for(var _=new Array(y),A=y,R=y,k=function(L){var B=!1;Id(l[L]).subscribe(Al(v,(function(H){B||(B=!0,R--),_[L]=H}),(function(){return A--}),void 0,(function(){A&&B||(R||v.next(f?(function(H,q){return H.reduce((function(Y,K,se){return Y[K]=q[se],Y}),{})})(f,_):_),v.complete())})))},N=0;N<y;N++)k(N);else v.complete()}));return r?h.pipe(Zve(r)):h}var YFe=["addListener","removeListener"],JFe=["addEventListener","removeEventListener"],XFe=["on","off"];function Jl(e,n,r,i){if(Zi(r)&&(i=r,r=void 0),i)return Jl(e,n,r).pipe(Zve(i));var l=fb((function(v){return Zi(v.addEventListener)&&Zi(v.removeEventListener)})(e)?JFe.map((function(v){return function(y){return e[v](n,y,r)}})):(function(v){return Zi(v.addListener)&&Zi(v.removeListener)})(e)?YFe.map(ySe(e,n)):(function(v){return Zi(v.on)&&Zi(v.off)})(e)?XFe.map(ySe(e,n)):[],2),f=l[0],h=l[1];if(!f&&qve(e))return Nt((function(v){return Jl(v,n,r)}))(Id(e));if(!f)throw new TypeError("Invalid event target");return new Hc((function(v){var y=function(){for(var _=[],A=0;A<arguments.length;A++)_[A]=arguments[A];return v.next(1<_.length?_:_[0])};return f(y),function(){return h(y)}}))}function ySe(e,n){return function(r){return function(i){return e[r](n,i)}}}function gE(e,n,r){return r?gE(e,n).pipe(Zve(r)):new Hc((function(i){var l=function(){for(var h=[],v=0;v<arguments.length;v++)h[v]=arguments[v];return i.next(h.length===1?h[0]:h)},f=e(l);return Zi(n)?function(){return n(l,f)}:void 0}))}function Uc(e,n,r){e===void 0&&(e=0),r===void 0&&(r=$Fe);var i=-1;return n!=null&&(JRe(n)?r=n:i=n),new Hc((function(l){var f=l2e(e)?+e-r.now():e;f<0&&(f=0);var h=0;return r.schedule((function(){l.closed||(l.next(h++),0<=i?this.schedule(void 0,i):l.complete())}),f)}))}function A5(e,n){return e===void 0&&(e=0),n===void 0&&(n=nm),e<0&&(e=0),Uc(e,e,n)}function wl(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=i6(e),i=(function(f){return typeof Gve(f)=="number"?f.pop():1/0})(e),l=e;return l.length?l.length===1?Id(l[0]):d2e(i)(An(l,r)):Yn}var SSe=new Hc(yL),QFe=Array.isArray;function e$e(e,n){return function(r,i){return!e.call(n,r,i)}}function Gt(e,n){return Xl((function(r,i){var l=0;r.subscribe(Al(i,(function(f){return e.call(n,f,l++)&&i.next(f)})))}))}function mf(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return(n=(e=n).length===1&&QFe(e[0])?e[0]:e).length===1?Id(n[0]):new Hc((function(i){return function(l){for(var f=[],h=function(y){f.push(Id(i[y]).subscribe(Al(l,(function(_){if(f){for(var A=0;A<f.length;A++)A!==y&&f[A].unsubscribe();f=null}l.next(_)}))))},v=0;f&&!l.closed&&v<i.length;v++)h(v)}})(n))}function tp(e){return Xl((function(n,r){var i,l=null,f=!1;l=n.subscribe(Al(r,void 0,void 0,(function(h){i=Id(e(h,tp(e)(n))),l?(l.unsubscribe(),l=null,i.subscribe(r)):f=!0}))),f&&(l.unsubscribe(),l=null,i.subscribe(r))}))}function t$e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=i6(e);return Xl((function(i,l){f2e()(An(Z0([i],fb(e)),r)).subscribe(l)}))}function n$e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t$e.apply(void 0,Z0([],fb(e)))}function Ys(e){return e<=0?function(){return Yn}:Xl((function(n,r){var i=0;n.subscribe(Al(r,(function(l){++i<=e&&(r.next(l),e<=i&&r.complete())})))}))}function Xp(){return Xl((function(e,n){e.subscribe(Al(n,yL))}))}function V2(e){return Kn((function(){return e}))}function p2e(e,n){return Nt((function(r,i){return Id(e(r,i)).pipe(Ys(1),V2(r))}))}function SL(e,n){n===void 0&&(n=nm);var r=Uc(e,n);return p2e((function(){return r}))}function yi(e,n,r){return r===void 0&&(r=1/0),Zi(n)?Nt((function(){return e}),n,r):Nt((function(){return e}),r)}function o$e(e,n){return Xl((function(r,i,l){return function(f,h){var v=l,y=i,_=0;f.subscribe(Al(h,(function(A){var R=_++;y=v?r(y,A,R):(v=!0,A),h.next(y)}),void 0))}})(e,n,arguments.length>=2))}function h2e(e){return Xl((function(n,r){var i=!1,l=0;n.subscribe(Al(r,(function(f){return(i||(i=!e(f,l++)))&&r.next(f)})))}))}function pb(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=i6(e);return Xl((function(i,l){(r?w5(e,i,r):w5(e,i)).subscribe(l)}))}function mr(e,n){return Xl((function(r,i){var l=null,f=0,h=!1,v=function(){return h&&!l&&i.complete()};r.subscribe(Al(i,(function(y){l==null||l.unsubscribe();var _=0,A=f++;Id(e(y,A)).subscribe(l=Al(i,(function(R){return i.next(n?n(y,R,A,_++):R)}),(function(){l=null,v()})))}),(function(){h=!0,v()})))}))}function Au(e){return Xl((function(n,r){Id(e).subscribe(Al(r,(function(){return r.complete()}),yL)),!r.closed&&n.subscribe(r)}))}function a2(e,n){return n===void 0&&(n=!1),Xl((function(r,i){var l=0;r.subscribe(Al(i,(function(f){var h=e(f,l++);(h||n)&&i.next(f),!h&&i.complete()})))}))}function ao(e,n,r){var i=Zi(e)||n||r?{next:e,error:n,complete:r}:e;return i?Xl((function(l,f){var h;(h=i.subscribe)===null||h===void 0||h.call(i);var v=!0;l.subscribe(Al(f,(function(y){var _;(_=i.next)===null||_===void 0||_.call(i,y),f.next(y)}),(function(){var y;v=!1,(y=i.complete)===null||y===void 0||y.call(i),f.complete()}),(function(y){var _;v=!1,(_=i.error)===null||_===void 0||_.call(i,y),f.error(y)}),(function(){var y,_;v&&((y=i.unsubscribe)===null||y===void 0||y.call(i)),(_=i.finalize)===null||_===void 0||_.call(i)})))})):hQ}function _o(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=XRe(e);return Xl((function(i,l){for(var f=e.length,h=new Array(f),v=e.map((function(){return!1})),y=!1,_=function(R){Id(e[R]).subscribe(Al(l,(function(k){h[R]=k,y||v[R]||(v[R]=!0,(y=v.every(hQ))&&(v=null))}),yL))},A=0;A<f;A++)_(A);i.subscribe(Al(l,(function(R){if(y){var k=Z0([R],fb(h));l.next(r?r.apply(void 0,Z0([],fb(k))):k)}})))}))}const a6="ADD_CURRENT_USER_PARTICIPANT_ATTRIBUTE",uf="UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",mQ="ADD_USER_PARTICIPANT_ATTRIBUTE",Y0="UPDATE_USER_PARTICIPANT_ATTRIBUTE",Jve="REMOVE_USER_PARTICIPANT_ATTRIBUTE",yA="UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE",m2e="REMOVE_WEBINAR_ATTENDEE_ATTRIBUTE";let np=(function(e){return e.Failover="failover",e.OnHold="on hold",e.Promote="promote",e.Depromote="depromote",e.JoinBreakoutRoom="join breakout room",e.MoveToBreakoutRoom="move to breakout room",e.BackToMainSession="back to main session",e})({});const XR="js_media.min.js";let Dfe=(function(e){return e.CDN="CDN",e.Global="Global",e.CN="CN",e})({}),DP=(function(e){return e.Connected="Connected",e.Reconnecting="Reconnecting",e.Closed="Closed",e.Fail="Fail",e})({}),Tu=(function(e){return e.Initial="initial",e.Joined="joined",e.Closed="closed",e})({}),SA=(function(e){return e.AudioDecodeInWorklet="M:6;V:3",e.VideoWebRTCEnable="M:10;V:6",e.VideoHalfWebRTCEnable="M:11;V:7",e.WebGL2Render="M:20;V:8",e.WebGPURender="M:21;V:9",e.ZMKFromRWG="M:19;V:10",e})({}),qu=(function(e){return e[e.NormalCase=-1]="NormalCase",e[e.NoHeartbeat=0]="NoHeartbeat",e[e.NoHeartbeatMChannel=1]="NoHeartbeatMChannel",e[e.NetworkChange=2]="NetworkChange",e[e.NotifyUiFailover=3]="NotifyUiFailover",e[e.InvalidParameters=4]="InvalidParameters",e[e.OnError=5]="OnError",e[e.OnErrorMChannel=6]="OnErrorMChannel",e[e.Disconnect=7]="Disconnect",e[e.DisconnectMChannel=8]="DisconnectMChannel",e[e.DisconnectXmpp=9]="DisconnectXmpp",e[e.RefreshPage=10]="RefreshPage",e[e.NotifyUIWMSCFailover=11]="NotifyUIWMSCFailover",e[e.NotifyUIWMSCWSSDisconnected=12]="NotifyUIWMSCWSSDisconnected",e[e.OnErrorXmppChannel=15]="OnErrorXmppChannel",e})({});const g2e="JOIN_MEETING_SUCCESS",il="JOIN_MEETING_FAILED",em="RECONNECTING_MEETING",CA="LEAVING_MEETING",Xve="MEETING_IN_WAITING_ROOM",Qve="UPDATE_MEETING_ATTRIBUTE",v2e="SHARE_PRONOUN_TYPE_UPDATE",vY="MEETING_RLB_TP_READY_STATUS_CHANGE";var V0=(function(e){return e.ConnectionChange="connection-change",e.OnHoldChange="on-hold-change",e.UserAdd="user-added",e.UserUpdate="user-updated",e.UserRemove="user-removed",e.AttendeeUpdate="attendee-updated",e.MeetingAttributeUpdate="meeting-attribute-updated",e.PromoteAttendeeConsent="promote-attendee-consent",e.ActiveAppsUpdate="active-apps-updated",e.SharePronounTypeUpdate="share-pronoun-type-update",e})(V0||{});const s$e={JoinMeeting:{success:a6,fail:[il]}},r$e={[V0.ConnectionChange]:[{event:g2e,payload:()=>({state:DP.Connected})},{event:il,payload:e=>({state:DP.Fail,...e})},{event:em,payload:e=>({state:DP.Reconnecting,...e})},{event:CA,payload:e=>({state:DP.Closed,...e})}],[V0.OnHoldChange]:[{event:Xve,payload:e=>({isOnHold:e})}],[V0.UserAdd]:[{event:a6,payload:e=>[e]},{event:mQ,payload:e=>e}],[V0.UserUpdate]:[{event:uf,payload:e=>[e]},{event:Y0,payload:e=>e}],[V0.UserRemove]:[{event:Jve,payload:e=>e}],[V0.AttendeeUpdate]:[{event:yA,payload:e=>e},{event:m2e,payload:e=>e}],[V0.MeetingAttributeUpdate]:[{event:Qve,payload:e=>"bNoHostTimeOut"in e?{isHostLost:e.bNoHostTimeOut}:null}],[V0.PromoteAttendeeConsent]:[{event:"MEETING_WEBINAR_PROMOTE_CONSENT_REQ",payload:({req_id:e,sender_id:n})=>({reqId:e,senderId:n})}],[V0.ActiveAppsUpdate]:[{event:"ACTIVE_APPS_UPDATE",payload:()=>{}}],[V0.SharePronounTypeUpdate]:[{event:v2e,payload:e=>e}]},XU="LIVE_TRANSCRIPTION_RECEIVE_MESSAGE",nv="LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",b2e="LIVE_TRANSCRIPTION_STATUS_CHANGE",ebe="LIVE_TRANSCRIPTION_HOST_DISABLE_CHANGE",tbe="LIVE_TRANSCRIPTION_LANGUAGE_LOCK_CHANGE",i$e={"caption-message":[{event:XU,payload:e=>e}],"caption-status":[{event:nv,payload:e=>e}],"caption-enable":[{event:b2e,payload:e=>e}],"caption-host-disable":[{event:ebe,payload:e=>e}],"caption-language-lock":[{event:tbe,payload:e=>e}]},_2="CHAT_RECEIVE_MESSAGE_EVENTS",GP="CHAT_PRIVILEGE_CHANGE",y2e="CHAT_MESSAGE_RESPONSE",PJ="CHAT_DELETE_MESSAGE_REPONSE",H2="CHAT_FILE_CHAT_UPLOAD_PROGRESS",bY="CHAT_FILE_CHAT_DOWNLOAD_PROGRESS";let pU=(function(e){return e.ChatOnMessage="chat-on-message",e.ChatPrivilegeChange="chat-privilege-change",e.ChatDeleteMessage="chat-delete-message",e.ChatFileUploadProgress="chat-file-upload-progress",e.ChatFileDownloadProgress="chat-file-download-progress",e})({});const a$e={[pU.ChatOnMessage]:[{event:_2,payload:e=>e}],[pU.ChatPrivilegeChange]:[{event:GP,payload:e=>e}],[pU.ChatDeleteMessage]:[{event:PJ,payload:e=>e}],[pU.ChatFileUploadProgress]:[{event:H2,payload:e=>e}],[pU.ChatFileDownloadProgress]:[{event:bY,payload:e=>e}]},xhe="COMMAND_RECEIVE_MESSAGE_EVENTS",nbe="COMMAND_STATUS_EVENTS";let CSe=(function(e){return e.CommandChannelStatus="command-channel-status",e.CommandChannelMessage="command-channel-message",e})({});const c$e={[CSe.CommandChannelStatus]:[{event:nbe,payload:e=>e}],[CSe.CommandChannelMessage]:[{event:xhe,payload:e=>e}]};let j0=(function(e){return e.Recording="Recording",e.Paused="Paused",e.Stopped="Stopped",e.Ask="Ask",e.Accept="Accept",e.Decline="Decline",e})({}),Cl=(function(e){return e[e.None=0]="None",e[e.Init=1]="Init",e[e.Start=2]="Start",e[e.Pause=3]="Pause",e[e.Stop=4]="Stop",e})({}),T5=(function(e){return e[e.Stop=0]="Stop",e[e.Start=1]="Start",e[e.Pause=2]="Pause",e})({}),Yh=(function(e){return e[e.None=0]="None",e[e.Deny=1]="Deny",e[e.Allow=2]="Allow",e})({}),l$e=(function(e){return e[e.None=0]="None",e[e.DenyAllRequest=1]="DenyAllRequest",e[e.AllowAllRequest=2]="AllowAllRequest",e})({});const QU="CLOUD_RECORDING_STATUS_CHANGE",LJ="CLOUD_RECORDING_ISO_STATUS_CHANGE",BJ="LOCAL_RECORDING_CHANGE",R1="LOCAL_RECORDING_PERMISSION_CHANGE",S2e="RECORDING_FOR_IQ_STATUS_CHANGE",C2e="RECORDING_FOR_IQ_OPERATION_CHANGE";let IR=(function(e){return e.RecordingChange="recording-change",e.IndividualRecordingChange="individual-recording-change",e.LocalRecordingChange="local-recording-change",e.LocalRecordingPermissionChange="local-recording-permission-change",e.MediaCaptureStatusChange="media-capture-status-change",e.MediaCapturePermissionChange="media-capture-permission-change",e.RecordingIqChange="recording-iq-change",e})({});const u$e={[IR.RecordingChange]:[{event:QU,payload:e=>{const{cmrServerStatus:n}=e;return n===Cl.Start?j0.Recording:n===Cl.Pause?j0.Paused:j0.Stopped}}],[IR.IndividualRecordingChange]:[{event:LJ,payload:e=>e}],[IR.LocalRecordingChange]:[{event:BJ,payload:e=>e}],[IR.LocalRecordingPermissionChange]:[{event:R1,payload:e=>e}],[IR.MediaCaptureStatusChange]:[{event:BJ,payload:e=>e}],[IR.MediaCapturePermissionChange]:[{event:R1,payload:e=>e}],[IR.RecordingIqChange]:[{event:S2e,payload:e=>e}]},E2e="RECEIVE_VIDEO_ACTIVE_INDICATION",_2e="RECEIVE_VIDEO_MUTE_INDICATION",w2e="ASK_FOR_START_VIDEO_CONSENT",A2e="RECEIVE_VIDEO_DIMENSION_CHANGE",T2e="CAPTURED_VIDEO_DIMENSION_CHANGE",VJ="CAN_NOT_DETECT_CAMERA",HJ="CAN_NOT_FIND_CAMERA",FJ="VIDEO_USER_FORBIDDEN_CAPTURE",$J="VIDEO_CAMERA_IS_TAKEN",obe="VIDEO_BACKGROUND_FAILED",sbe="VIDEO_ESTABLISH_STREAM_ERROR",rbe="VIDEO_CAPTURE_START_SUCCESS",qP="VIDEO_CAPTURE_STOP_RESULT",KP="VIDEO_SPOTLIGHT_CHANGE",O2e="VIDEO_FOLLOW_HOST_ORDER_CHANGE",I2e="VIDEO_HOST_DRAG_LAYOUT_CHANGE",R2e="VIDEO_NEW_USER_START",yY="VIDEO_OLD_USER_STOP",UJ="VIDEO_VIRTUAL_BACKGROUND_PRELOAD_READY",Dhe="VIDEO_VIRTUAL_BACKGROUND_SETTING_SUCCESS",khe="VIDEO_STATISTIC_DATA",Mhe="VIDEO_CELL_DETAILED_DATA",Nhe="VIDEO_NETWORK_QUALITY_CHANGE",x2e="VIDEO_FAR_END_CAMERA_CONTROL_REQUEST",Phe="VIDEO_FAR_END_CAMERA_CONTROL_RESPONSE",jJ="VIDEO_FAR_END_CAMERA_IN_CONTROL_CHANGE",D2e="VIDEO_FAR_END_CAMERA_CAPABILITY_CHANGE",Lhe="VIDEO_MASK_SETTING_SUCCESS",k2e="VIDEO_CAPTURE_SDK_SUCCESS",M2e="VIDEO_PREFETCH_VIDEO_FRAME_CALLBACK",N2e="VIDEO_CURRENT_USER_SSRC",P2e="VIDEO_RENDER_ASPECT_RATIO_CHANGE",zJ="VIDEO_LEADERSHIP_USER_CHANGE",L2e="VIDEO_SCREENSHOT_TAKEN_NOTIFICATION",ESe={startCaptureVideo:{success:rbe,fail:[VJ,HJ,FJ,sbe,$J,obe]},switchCameraVideo:{success:k2e,fail:[VJ,HJ,FJ,$J]}};let Sd=(function(e){return e.VideoActiveChange="video-active-change",e.PeerVideoStateChange="peer-video-state-change",e.VideoSpotlightChange="video-spotlight-change",e.VideoMutedChange="video-muted-change",e.VideoCapturingChange="video-capturing-change",e.AskForStartVideoConsent="ask-for-start-video-consent",e.VideoDimensionChange="video-dimension-change",e.VideoFollowHostOrder="video-follow-host-order-change",e.VideoHostLayoutChange="video-host-layout-change",e.VideoVBPreloadChange="video-virtual-background-preload-change",e.VideoStatisticDataChange="video-statistic-data-change",e.VideoDetailedDataChange="video-detailed-data-change",e.VideoAspectRatioChange="video-aspect-ratio-change",e.NetworkQualityChange="network-quality-change",e.FarEndCameraRequestControl="far-end-camera-request-control",e.FarEndCameraResponseControl="far-end-camera-response-control",e.FarEndCameraInControlChange="far-end-camera-in-control-change",e.FarEndCameraCapabilityChange="far-end-camera-capability-change",e.VideoScreenshotTaken="video-screenshot-taken",e})({});const d$e={[Sd.VideoActiveChange]:[{event:E2e,payload:e=>({state:e.bVideoOn?tSe.Active:tSe.Inactive,userId:e.userId})}],[Sd.VideoCapturingChange]:[{event:rbe,payload:()=>({state:Efe.Started})},{event:qP,payload:e=>({state:e!=null&&e.failed?Efe.Failed:Efe.Stopped})}],[Sd.VideoMutedChange]:[{event:_2e,payload:e=>({state:e.isVideoMuted?RZ.Muted:RZ.Unmuted,userId:e.id})}],[Sd.AskForStartVideoConsent]:[{event:w2e,payload:e=>({state:e.isVideoMuted?RZ.Muted:RZ.Unmuted,userId:e.id})}],[Sd.VideoSpotlightChange]:[{event:KP,payload:e=>({spotlightList:e.spotlightList&&e.spotlightList.map((n=>({userId:n})))})},{event:zJ,payload:e=>{var n;return{spotlightList:(n=e.spotlightList)===null||n===void 0?void 0:n.map((r=>({userId:r})))}}}],[Sd.VideoDimensionChange]:[{event:A2e,payload:e=>({type:"received",width:e.width,height:e.height})},{event:T2e,payload:e=>({type:"captured",width:e.width,height:e.height})}],[Sd.VideoFollowHostOrder]:[{event:O2e,payload:e=>({isFollowHostOrder:e.bOn})}],[Sd.VideoHostLayoutChange]:[{event:I2e,payload:e=>Array.isArray(e.layout)?e.layout.map((n=>({userId:n}))):[]}],[Sd.PeerVideoStateChange]:[{event:R2e,payload:e=>({action:"Start",...e})},{event:yY,payload:e=>({action:"Stop",...e})}],[Sd.VideoVBPreloadChange]:[{event:UJ,payload:e=>({isReady:e})}],[Sd.VideoStatisticDataChange]:[{event:khe,payload:e=>{const{data:{rate:n,...r},...i}=e??{data:{}};return{data:{bitrate:n,...r},...i}}}],[Sd.VideoDetailedDataChange]:[{event:Mhe,payload:e=>e}],[Sd.VideoAspectRatioChange]:[{event:P2e,payload:e=>e}],[Sd.NetworkQualityChange]:[{event:Nhe,payload:e=>e}],[Sd.FarEndCameraRequestControl]:[{event:x2e,payload:e=>e}],[Sd.FarEndCameraResponseControl]:[{event:Phe,payload:e=>e}],[Sd.FarEndCameraInControlChange]:[{event:jJ,payload:e=>e}],[Sd.FarEndCameraCapabilityChange]:[{event:D2e,payload:e=>e}],[Sd.VideoScreenshotTaken]:[{event:L2e,payload:e=>e}]},B2e="AUDIO_ACTIVE_SPEAKER",SY="AUDIO_UNMUTE_CONSENT",kP="AUDIO_CURRENT_USER_JOIN_BY_VOIP",Bhe="AUDIO_CURRENT_USER_JOIN_BY_PHONE",gQ="AUDIO_CURRENT_USER_LEAVE_AUDIO",ibe="AUDIO_CURRENT_USER_MUTED",abe="AUDIO_CURRENT_USER_UNMUTED",V2e="AUDIO_PARTICIPANT_AUDIO_UPDATE",H2e="AUDIO_DIALOUT_RESULT_CODE",F2e="AUDIO_DIALOUT_RESULT_SUCCESS",$2e="AUDIO_DIALOUT_RESULT_FAIL",U2e="AUDIO_DIALOUT_CANCEL_SUCCESS",j2e="DIALOUT_CANCEL_FAIL",z2e="AUDIO_MERGE_AUDIO_INDICATION",W2e="AUDIO_CAPTURE_FAILED",G2e="ESTABLISH_AUDIO_STREAM_ERROR",q2e="AUDIO_AUTO_PLAY_FAILED",_Se="INVALID_DEVICE_ID",K2e="AUDIO_ALLOW_TALK_CHANGE",CL="SHARE_AUDIO_STATE_CHANGE",Vhe="AUDIO_STATISTIC_DATA",Z2e="AUDIO_CURRENT_USER_SSRC",Hhe="AUDIO_SET_SPEAKER_RESULT",Y2e="AUDIO_SHARE_SECONDARY_AUDIO_SUCCESS",J2e="AUDIO_CRC_CALL_OUT_RESULT_CODE",X2e="AUDIO_CRC_CALL_OUT_RESULT_SUCCESS",Q2e="AUDIO_CRC_CALL_OUT_RESULT_FAIL",exe="AUDIO_CURRENT_AUDIO_LEVEL_CHANGE";let D0=(function(e){return e.ActiveSpeaker="active-speaker",e.UnmuteAudioConsent="unmute-audio-consent",e.CurrentAudioChange="current-audio-change",e.CurrentAudioLevelChange="current-audio-level-change",e.DialoutStateChange="dialout-state-change",e.MergeAudio="merged-audio",e.AutoPlayFailed="auto-play-audio-failed",e.AllowTalkChange="allow-talk-change",e.ShareAudioChange="share-audio-change",e.AudioStatisticDataChange="audio-statistic-data-change",e.CrcCallOutStateChange="crc-call-out-state-change",e})({});const MP={JoinComputerAudio:{success:kP,fail:[W2e,G2e]},JoinAudioByCallMe:{success:F2e,fail:[$2e]},cancelDialOut:{success:U2e,fail:[j2e]},hangup:{success:gQ},crcCallOut:{success:X2e,fail:[Q2e]}},f$e={[D0.ActiveSpeaker]:[{event:B2e,payload:e=>e}],[D0.UnmuteAudioConsent]:[{event:SY,payload:e=>({reason:e})}],[D0.CurrentAudioChange]:[{event:Bhe,payload:()=>({action:dU.Join,type:Ur.Phone})},{event:kP,payload:()=>({action:dU.Join,type:Ur.Computer})},{event:gQ,payload:({source:e})=>({action:dU.Leave,source:e})},{event:ibe,payload:({source:e})=>({action:dU.Muted,source:e})},{event:abe,payload:({source:e})=>({action:dU.Unmuted,source:e})}],[D0.DialoutStateChange]:[{event:H2e,payload:e=>e}],[D0.MergeAudio]:[{event:z2e,payload:e=>e}],[D0.AutoPlayFailed]:[{event:q2e,payload:()=>{}}],[D0.AllowTalkChange]:[{event:K2e,payload:e=>({enabled:e})}],[D0.ShareAudioChange]:[{event:CL,payload:e=>e}],[D0.AudioStatisticDataChange]:[{event:Vhe,payload:e=>{const{data:{rate:n,...r},...i}=e??{data:{}};return{data:{bitrate:n,...r},...i}}}],[D0.CrcCallOutStateChange]:[{event:J2e,payload:e=>e}],[D0.CurrentAudioLevelChange]:[{event:exe,payload:e=>e}]},ZP="SHARE_ACTIVE_INDICATION",txe="SHARE_START_DESKTOP_SHARE_FAILED",nxe="SHARE_DIMENSION_CHANGE",WJ="SHARE_RECEIVED_DIMENSION_CHANGE",oxe="SHARE_VIDEO_STREAMS_END",sxe="SHARE_PASSIVE_STOP_SHARE",rxe="SHARE_PASSIVE_BO_STOP",cbe="SHARE_NEW_USER_ADD",lbe="SHARE_USER_REMOVE",ixe="SHARE_USER_PAUSED",axe="SHARE_USER_RESUMED",GJ="SHARE_AUTO_CHANGE_SOURCE",qJ="SHARE_REMOTE_CONTROL_APPROVE",w2="SHARE_GRAB_REMOTE_CONTROL_CHANGE",Fhe="SHARE_REMOTE_CONTROL_CLIPBOARD_CHANGE",cxe="SHARE_REMOTE_CONTROL_SUCCESS",lxe="SHARE_REMOTE_CONTROL_FAILED",uxe="SHARE_PRIVILEGE_CHANGE",dxe="SHARE_READ_RECEIPT",$he="SHARE_STATISTIC_DATA",fxe="SHARE_REMOTE_CONTROL_REQUEST",jR="SHARE_REMOTE_CONTROL_APP_STATUS",CY="SHARE_REMOTE_CONTROL_SESSION_STATUS",pxe="SHARE_REMOTE_CONTROL_APP_SCHEME",hxe="SHARE_SCREENSHOT_TAKEN_NOTIFICATION",Uhe="ANNOTATION_START_RESULT",ube="ANNOTATION_PRIVILEGE_CHANGE",mxe="ANNOTATION_UNDO_STATUS",gxe="ANNOTATION_REDO_STATUS",vxe="ANNOTATION_DRAW_REQUEST";let Cd=(function(e){return e.ShareActiveChange="active-share-change",e.ShareDimensionChange="share-content-dimension-change",e.SharePassiveStop="passively-stop-share",e.SharePeerStateChange="peer-share-state-change",e.ShareContentChange="share-content-change",e.SharePrivilegeChange="share-privilege-change",e.ShareReadReceipt="share-can-see-screen",e.ShareStatisticDataChange="share-statistic-data-change",e.RemoteControlApprovedChange="remote-control-approved-change",e.RemoteControlInControlChange="remote-control-in-control-change",e.RemoteControlClipboardChange="remote-control-clipboard-change",e.RemoteControlRequestChange="remote-control-request-change",e.RemoteControlAppStatusChange="remote-control-app-status-change",e.RemoteControlControlledStatusChange="remote-control-controlled-status-change",e.ShareScreenshotTaken="share-content-screenshot-taken",e.AnnotationPrivilegeChange="annotation-privilege-change",e.AnnotationRedoStatus="annotation-redo-status",e.AnnotationUndoStatus="annotation-undo-status",e.AnnotationDrawRequest="annotation-viewer-draw-request",e})({});const p$e={[Cd.ShareActiveChange]:[{event:ZP,payload:e=>{const{isActive:n,activeUserId:r,...i}=e;return{state:n?"Active":"Inactive",userId:r,...i}}}],[Cd.ShareDimensionChange]:[{event:nxe,payload:e=>({type:"sended",width:e.width,height:e.height,userId:e.userId})},{event:WJ,payload:e=>({type:"received",width:e.width,height:e.height,userId:e.nodeid})}],[Cd.SharePassiveStop]:[{event:oxe,payload:()=>({reason:_fe.StopScreenCapture})},{event:sxe,payload:()=>({reason:_fe.PrivilegeChange})},{event:rxe,payload:()=>({reason:_fe.ShareFromMainSession})}],[Cd.SharePeerStateChange]:[{event:cbe,payload:e=>{var n;return{userId:e.id,action:"Start",isFromMainSession:(n=e==null?void 0:e.isFromMainSession)!==null&&n!==void 0&&n}}},{event:lbe,payload:e=>{var n;return{userId:e.id,action:"Stop",isFromMainSession:(n=e==null?void 0:e.isFromMainSession)!==null&&n!==void 0&&n}}},{event:ixe,payload:e=>({userId:e.id,action:"Pause"})},{event:axe,payload:e=>({userId:e.id,action:"Resume"})}],[Cd.ShareContentChange]:[{event:GJ,payload:e=>e}],[Cd.SharePrivilegeChange]:[{event:uxe,payload:e=>({privilege:e})}],[Cd.ShareReadReceipt]:[{event:dxe,payload:()=>{}}],[Cd.ShareStatisticDataChange]:[{event:$he,payload:e=>{const{data:{rate:n,...r},...i}=e??{data:{}};return{data:{bitrate:n,...r},...i}}}],[Cd.RemoteControlApprovedChange]:[{event:qJ,payload:e=>({state:e?nSe.Approved:nSe.Rejected})}],[Cd.RemoteControlInControlChange]:[{event:w2,payload:e=>({isControlling:e})}],[Cd.RemoteControlClipboardChange]:[{event:Fhe,payload:e=>e}],[Cd.RemoteControlRequestChange]:[{event:fxe,payload:e=>e}],[Cd.RemoteControlAppStatusChange]:[{event:jR,payload:e=>e}],[Cd.RemoteControlControlledStatusChange]:[{event:CY,payload:e=>e}],[Cd.ShareScreenshotTaken]:[{event:hxe,payload:e=>e}],[Cd.AnnotationPrivilegeChange]:[{event:ube,payload:e=>e}],[Cd.AnnotationRedoStatus]:[{event:gxe,payload:e=>e}],[Cd.AnnotationUndoStatus]:[{event:mxe,payload:e=>e}],[Cd.AnnotationDrawRequest]:[{event:vxe,payload:e=>e}]};let HC=(function(e){return e.Question="question",e.UpdateQuestion="updateQuestion",e.Answer="answer",e.DeleteComment="deleteComment",e.DeleteQuestion="deleteQuestion",e.Dismiss="dismiss",e.Reopen="reopen",e.Upvote="upvote",e.AnswerLive="answerLive",e})({}),wSe=(function(e){return e.QaSettingChange="qa-setting-change",e.QaActionChange="qa-action-change",e})({});const h$e={[wSe.QaSettingChange]:[{event:"QA_SETTING_OPTION_CHANGE",payload:e=>e}],[wSe.QaActionChange]:[{event:"QA_NEW_ASK_QUESTION",payload:e=>({action:HC.Question,data:e})},{event:"QA_UPDATE_ANONYMOUS_QUESTION",payload:e=>({action:HC.UpdateQuestion,data:e})},{event:"QA_ANSWER_QUESTION",payload:e=>({action:HC.Answer,data:e})},{event:"QA_ANSWER_REMOVE_COMMENT",payload:e=>({action:HC.DeleteComment,data:e})},{event:"QA_ANSWER_REMOVE_QUESTION",payload:e=>({action:HC.DeleteQuestion,data:e})},{event:"QA_ANSWER_DISMISS_QUESTION",payload:e=>({action:HC.Dismiss,data:e})},{event:"QA_ANSWER_REOPEN_QUESTION",payload:e=>({action:HC.Reopen,data:e})},{event:"QA_ANSWER_VOTE_QUESTION",payload:e=>({action:HC.Upvote,data:e})},{event:"QA_ANSWER_QUESTION_LIVE",payload:e=>({action:HC.AnswerLive,data:e})}]},bxe="AUDIO_ENCODE_SUCCESS",yxe="AUDIO_DECODE_SUCCESS",Sxe="VIDEO_ENCODE_SUCCESS",Cxe="VIDEO_DECODE_SUCCESS",Exe="SHARING_ENCODE_SUCCESS",jhe="SHARING_DECODE_SUCCESS",_xe="AUDIO_ENCODE_FAIL",wxe="AUDIO_DECODE_FAIL",Axe="VIDEO_ENCODE_FAIL",Txe="VIDEO_DECODE_FAIL",Oxe="SHARING_ENCODE_FAIL",Ixe="SHARING_DECODE_FAIL",Rxe="MEDIA_DEVICE_CHANGE",EY="MEDIS_SDK_PATHCH_LOADED",zhe="DEVICE_PERMISSION_CHANGE",xxe="MEDIA_HEALTH_CHECK_FAILED";let DZ=(function(e){return e.DeviceChange="device-change",e.MediaSDKChange="media-sdk-change",e.DevicePermissionChange="device-permission-change",e.MediaInternalError="media-internal-error",e})({});const m$e={[DZ.DeviceChange]:[{event:Rxe,payload:()=>({})}],[DZ.MediaSDKChange]:[{event:bxe,payload:()=>({type:"audio",action:"encode",result:"success"})},{event:_xe,payload:()=>({type:"audio",action:"encode",result:"fail"})},{event:yxe,payload:()=>({type:"audio",action:"decode",result:"success"})},{event:wxe,payload:()=>({type:"audio",action:"decode",result:"fail"})},{event:Sxe,payload:()=>({type:"video",action:"encode",result:"success"})},{event:Axe,payload:()=>({type:"video",action:"encode",result:"fail"})},{event:Cxe,payload:()=>({type:"video",action:"decode",result:"success"})},{event:Txe,payload:()=>({type:"video",action:"decode",result:"fail"})},{event:Exe,payload:()=>({type:"share",action:"encode",result:"success"})},{event:Oxe,payload:()=>({type:"share",action:"encode",result:"fail"})},{event:jhe,payload:()=>({type:"share",action:"decode",result:"success"})},{event:Ixe,payload:()=>({type:"share",action:"decode",result:"fail"})}],[DZ.DevicePermissionChange]:[{event:zhe,payload:e=>e}],[DZ.MediaInternalError]:[{event:xxe,payload:e=>e}]},Dxe="BREAKOUT_ROOM_ADD_TOKEN",_Y="BREAKOUT_ROOM_INVITE_TO_JOIN_NOTIFICATION",Whe="BREAKOUT_ROOM_ROOM_CLOSING_COUNTDOWN",Ghe="BREAKOUT_ROOM_ROOM_COUNTDOWN",kxe="BREAKOUT_ROOM_BROADCAST_MESSAGE",Mxe="BREAKOUT_ROOM_ASK_HELP_REQUEST",dbe="BREAKOUT_ROOM_ASK_HELP_RESPONSE",QR="BREAKOUT_ROOM_ATTRIBUTE_INDICATION",wY="BREAKOUT_ROOM_JOIN_BO_RESPONSE",Nxe="BREAKOUT_ROOM_ROOM_COUNTDOWN_TIME_UP",qhe="BREAKOUT_ROOM_CURRENT_USER_PARTICIPANT_ROLE",Pxe="BREAKOUT_ROOM_LOAD_PRE_ASSIGNED_ROOMS",Lxe="BREAKOUT_ROOM_MAIN_SESSION_USER_UPDATE",Bxe="BREAKOUT_ROOM_INVITE_TO_BACK_NOTIFICATION",Vxe="BREAKOUT_ROOM_IN_ROOM_USER_STATUS_UPDATE",Hxe="BREAKOUT_ROOM_BROADCAST_VOICE";let eb=(function(e){return e.InviteToJoin="invite-to-join",e.RoomCountdown="room-countdown",e.RoomTimeUp="room-time-up",e.ClosingRoomCountdown="closing-room-countdown",e.BroadcastMessage="broadcast-message",e.AskForHelp="ask-for-help",e.AskForHelpResponse="ask-for-help-response",e.RoomStateChange="room-state-change",e.MainSessionUserUpdate="main-session-user-updated",e.InviteToBack="invite-back-to-main-session",e.RoomUserUpdate="room-user-update",e.BroadcastVoice="broadcast-voice",e})({});const g$e={[eb.InviteToJoin]:[{event:_Y,payload:e=>e}],[eb.RoomCountdown]:[{event:Ghe,payload:e=>e}],[eb.RoomTimeUp]:[{event:Nxe,payload:e=>e}],[eb.ClosingRoomCountdown]:[{event:Whe,payload:e=>e}],[eb.BroadcastMessage]:[{event:kxe,payload:e=>e}],[eb.AskForHelp]:[{event:Mxe,payload:e=>e}],[eb.AskForHelpResponse]:[{event:dbe,payload:e=>e}],[eb.RoomStateChange]:[{event:QR,payload:e=>({status:e.controlStatus})}],[eb.MainSessionUserUpdate]:[{event:Lxe,payload:()=>({})}],[eb.InviteToBack]:[{event:Bxe,payload:e=>e}],[eb.RoomUserUpdate]:[{event:Vxe,payload:e=>e}],[eb.BroadcastVoice]:[{event:Hxe,payload:e=>e}]};var Khe=(function(e){return e.StatusUpdate="archiving-status-update",e.OptionsUpdate="archiving-options-update",e})(Khe||{});const v$e={[Khe.StatusUpdate]:[{event:"ARCHIVING_STATUS_UPDATE",payload:e=>e}],[Khe.OptionsUpdate]:[{event:"ARCHIVING_OPTIONS_UPDATE",payload:e=>e}]};let kfe=(function(e){return e.PollDataChange="poll-data-change",e.PollSizeUpdate="poll-size-update",e.PollStatusUpdate="poll-status-update",e})({});const b$e={[kfe.PollDataChange]:[{event:"POLL_DATA_CHANGE",payload:e=>e}],[kfe.PollSizeUpdate]:[{event:"POLL_SIZE_UPDATE",payload:e=>e}],[kfe.PollStatusUpdate]:[{event:"POLL_STATUS_UPDATE",payload:e=>e}]};let ASe=(function(e){return e.ReactionReceived="reaction-received",e.ReactionRemoved="reaction-removed",e})({});const y$e={[ASe.ReactionReceived]:[{event:"REACTION_RECEIVED",payload:e=>e}],[ASe.ReactionRemoved]:[{event:"REACTION_REMOVED",payload:e=>e}]},EA="SMART_SUMMARY_STATUS_CHANGE",_A="MEETING_QUERY_STATUS_CHANGE";let TSe=(function(e){return e.SummaryChange="summary-status-change",e.MeetingQueryChang="meeting-query-status-change",e})({});const S$e={[TSe.SummaryChange]:[{event:EA,payload:e=>e}],[TSe.MeetingQueryChang]:[{event:_A,payload:e=>e}]},e5="LIVE_STREAM_STATUS_CHANGE",C$e={"live-stream-status":[{event:e5,payload:e=>e}]},Zhe="BROADCAST_STREAM_UTK_UPDATE",Yhe="BROADCAST_STREAM_STATUS_CHANGE",E$e={"broadcast-streaming-status":[{event:Yhe,payload:e=>e}]};let Fe=(function(e){return e[e.OPERATION_TIMEOUT=1]="OPERATION_TIMEOUT",e[e.INTERNAL_ERROR=2]="INTERNAL_ERROR",e[e.OPERATION_CANCELLED=3]="OPERATION_CANCELLED",e[e.SESSION_FETCH_INFO_ERROR=200]="SESSION_FETCH_INFO_ERROR",e[e.SESSION_IN_ANOTHER_SESSION=3e3]="SESSION_IN_ANOTHER_SESSION",e[e.SESSION_INCORRECT_PASSCODE=3004]="SESSION_INCORRECT_PASSCODE",e[e.SESSION_NOT_STARTED=3008]="SESSION_NOT_STARTED",e[e.SESSION_USER_REMOVED=3009]="SESSION_USER_REMOVED",e[e.SESSION_ROLE_TYPE_ERROR=3010]="SESSION_ROLE_TYPE_ERROR",e[e.SESSION_WEBINAR_USER_REMOVED=3620]="SESSION_WEBINAR_USER_REMOVED",e[e.SESSION_INVALID_PARAMETER=4003]="SESSION_INVALID_PARAMETER",e[e.SESSION_ENDED=4004]="SESSION_ENDED",e[e.SESSION_LOCKED=4006]="SESSION_LOCKED",e[e.SESSION_IB_BLOCKED=4007]="SESSION_IB_BLOCKED",e[e.SESSION_PARTICIPANT_EXIST=4008]="SESSION_PARTICIPANT_EXIST",e[e.CLIENT_PLATFORM_UNSUPPORTED=5e3]="CLIENT_PLATFORM_UNSUPPORTED",e[e.CLIENT_DEPENDENT_ASSETS_INACCESSIBLE=5001]="CLIENT_DEPENDENT_ASSETS_INACCESSIBLE",e[e.CLIENT_SESSION_STATE_CLOSED=5002]="CLIENT_SESSION_STATE_CLOSED",e[e.CLIENT_SESSION_STATE_RECONNECTING=5003]="CLIENT_SESSION_STATE_RECONNECTING",e[e.CLIENT_SESSION_STATE_ON_HOLD=5004]="CLIENT_SESSION_STATE_ON_HOLD",e[e.CLIENT_SESSION_NOT_WEBINAR=5005]="CLIENT_SESSION_NOT_WEBINAR",e[e.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED=5006]="CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED",e[e.CLIENT_HOST_PERMISSION_REQUIRED=5007]="CLIENT_HOST_PERMISSION_REQUIRED",e[e.CLIENT_ORIGIN_HOST_PERMISSION_REQUIRED=5008]="CLIENT_ORIGIN_HOST_PERMISSION_REQUIRED",e[e.CLIENT_ATTENDEE_APPLICABLE_ONLY=5009]="CLIENT_ATTENDEE_APPLICABLE_ONLY",e[e.CLIENT_PARTICIPANT_APPLICABLE_ONLY=5010]="CLIENT_PARTICIPANT_APPLICABLE_ONLY",e[e.CLIENT_MISMATCH_USER=5011]="CLIENT_MISMATCH_USER",e[e.CLIENT_DUPLICATED_JOIN=5012]="CLIENT_DUPLICATED_JOIN",e[e.CLIENT_INVALID_JOIN_PARAMETER=5013]="CLIENT_INVALID_JOIN_PARAMETER",e[e.CLIENT_HOST_DISALLOW_RENAME=5014]="CLIENT_HOST_DISALLOW_RENAME",e[e.STREAM_MISMATCH_DEVICE=6e3]="STREAM_MISMATCH_DEVICE",e[e.STREAM_MISMATCH_USER=6001]="STREAM_MISMATCH_USER",e[e.STREAM_SESSION_JOIN_REQUIRED=6002]="STREAM_SESSION_JOIN_REQUIRED",e[e.STREAM_MISMATCH_RENDER_ELEMENT=6003]="STREAM_MISMATCH_RENDER_ELEMENT",e[e.AUDIO_CAPTURE_FAILED=6010]="AUDIO_CAPTURE_FAILED",e[e.AUDIO_CAPTURE_LOADING=6011]="AUDIO_CAPTURE_LOADING",e[e.AUDIO_IN_PSTN=6012]="AUDIO_IN_PSTN",e[e.AUDIO_ENCODING_REQUIRED=6013]="AUDIO_ENCODING_REQUIRED",e[e.AUDIO_SHARE_AUDIO_CONFLICT=6014]="AUDIO_SHARE_AUDIO_CONFLICT",e[e.AUDIO_NOT_STARTED=6015]="AUDIO_NOT_STARTED",e[e.AUDIO_ATTENDEE_NOT_ALLOWED=6016]="AUDIO_ATTENDEE_NOT_ALLOWED",e[e.SECONDARY_AUDIO_UNSUPPORTED=6017]="SECONDARY_AUDIO_UNSUPPORTED",e[e.SECONDARY_AUDIO_DEVICE_CONFLICT=6018]="SECONDARY_AUDIO_DEVICE_CONFLICT",e[e.SECONDARY_AUDIO_SCREEN_SHARING_CONFLICT=6019]="SECONDARY_AUDIO_SCREEN_SHARING_CONFLICT",e[e.SECONDARY_AUDIO_NOT_STARTED=6020]="SECONDARY_AUDIO_NOT_STARTED",e[e.PSTN_MISMATCH_COUNTRY_CODE=6021]="PSTN_MISMATCH_COUNTRY_CODE",e[e.PSTN_NOT_CONNECTED=6022]="PSTN_NOT_CONNECTED",e[e.CRC_NOT_CONNECTED=6023]="CRC_NOT_CONNECTED",e[e.AUDIO_ALLOW_TALK_UNSUPPORTED=6024]="AUDIO_ALLOW_TALK_UNSUPPORTED",e[e.AUDIO_ALLOW_TALK_MISMATCH_USER=6025]="AUDIO_ALLOW_TALK_MISMATCH_USER",e[e.AUDIO_PROCESSOR_UNSUPPORTED=6026]="AUDIO_PROCESSOR_UNSUPPORTED",e[e.AUDIO_PROCESSOR_DUPLICATE_CREATE=6027]="AUDIO_PROCESSOR_DUPLICATE_CREATE",e[e.AUDIO_PROCESSOR_MISMATCH_PROCESSOR=6028]="AUDIO_PROCESSOR_MISMATCH_PROCESSOR",e[e.AUDIO_PROCESSOR_LIMIT_EXCEED=6029]="AUDIO_PROCESSOR_LIMIT_EXCEED",e[e.VIDEO_CAMERA_PERMISSION_DENIED=6100]="VIDEO_CAMERA_PERMISSION_DENIED",e[e.VIDEO_NO_CAMERA=6101]="VIDEO_NO_CAMERA",e[e.VIDEO_MISMATCH_CAMERA=6102]="VIDEO_MISMATCH_CAMERA",e[e.VIDEO_CAMERA_TAKEN=6103]="VIDEO_CAMERA_TAKEN",e[e.VIDEO_VB_INITIALIZE_ERROR=6104]="VIDEO_VB_INITIALIZE_ERROR",e[e.VIDEO_CAPTURE_LOADING=6105]="VIDEO_CAPTURE_LOADING",e[e.VIDEO_MUTED_BY_HOST=6106]="VIDEO_MUTED_BY_HOST",e[e.VIDEO_VB_UNSUPPORTED=6107]="VIDEO_VB_UNSUPPORTED",e[e.VIDEO_VB_PROCESSOR_CONFLICT=6108]="VIDEO_VB_PROCESSOR_CONFLICT",e[e.VIDEO_MISMATCH_STATE=6109]="VIDEO_MISMATCH_STATE",e[e.VIDEO_ESTABLISH_STREAM_ERROR=6110]="VIDEO_ESTABLISH_STREAM_ERROR",e[e.VIDEO_RENDER_LIMIT_EXCEED=6111]="VIDEO_RENDER_LIMIT_EXCEED",e[e.VIDEO_METHOD_DEPRECATED=6112]="VIDEO_METHOD_DEPRECATED",e[e.VIDEO_VB_IMAGE_INACCESSIBLE=6113]="VIDEO_VB_IMAGE_INACCESSIBLE",e[e.VIDEO_VB_MISMATCH_STATE=6114]="VIDEO_VB_MISMATCH_STATE",e[e.VIDEO_MASK_IMAGE_INACCESSIBLE=6115]="VIDEO_MASK_IMAGE_INACCESSIBLE",e[e.VIDEO_MASK_PROCESSOR_CONFLICT=6116]="VIDEO_MASK_PROCESSOR_CONFLICT",e[e.VIDEO_SPOTLIGHT_MISMATCH_STATE=6117]="VIDEO_SPOTLIGHT_MISMATCH_STATE",e[e.VIDEO_SPOTLIGHT_MULTI_CONFLICT=6118]="VIDEO_SPOTLIGHT_MULTI_CONFLICT",e[e.VIDEO_PROCESSOR_UNSUPPORTED=6119]="VIDEO_PROCESSOR_UNSUPPORTED",e[e.VIDEO_PROCESSOR_LIMIT_EXCEED=6120]="VIDEO_PROCESSOR_LIMIT_EXCEED",e[e.VIDEO_PROCESSOR_DUPLICATE_CREATE=6121]="VIDEO_PROCESSOR_DUPLICATE_CREATE",e[e.VIDEO_PROCESSOR_MISMATCH_PROCESSOR=6122]="VIDEO_PROCESSOR_MISMATCH_PROCESSOR",e[e.FAR_END_CAMERA_CONTROL_DEVICE_UNSUPPORTED=6150]="FAR_END_CAMERA_CONTROL_DEVICE_UNSUPPORTED",e[e.FAR_END_CAMERA_CONTROL_MISMATCH_STATE=6151]="FAR_END_CAMERA_CONTROL_MISMATCH_STATE",e[e.FAR_END_CAMERA_PERMISSION_REQUIRED=6152]="FAR_END_CAMERA_PERMISSION_REQUIRED",e[e.FAR_END_CAMERA_INVALID_RANGE=6153]="FAR_END_CAMERA_INVALID_RANGE",e[e.FAR_END_CAMERA_RATE_LIMIT=6154]="FAR_END_CAMERA_RATE_LIMIT",e[e.SCREEN_SHARE_USER_DENIED=6200]="SCREEN_SHARE_USER_DENIED",e[e.SCREEN_SHARE_SYSTEM_DENIED=6201]="SCREEN_SHARE_SYSTEM_DENIED",e[e.SCREEN_SHARE_UNSUPPORTED=6202]="SCREEN_SHARE_UNSUPPORTED",e[e.SCREEN_SHARE_SUBSESSION_CONFLICT=6203]="SCREEN_SHARE_SUBSESSION_CONFLICT",e[e.SCREEN_SHARE_HOST_PRIVILEGE_REQUIRED=6204]="SCREEN_SHARE_HOST_PRIVILEGE_REQUIRED",e[e.SCREEN_SHARE_MISMATCH_STATE=6205]="SCREEN_SHARE_MISMATCH_STATE",e[e.SCREEN_SHARE_OPTIMIZE_VIDEO_UNSUPPORTED=6206]="SCREEN_SHARE_OPTIMIZE_VIDEO_UNSUPPORTED",e[e.SCREEN_SHARE_OPTIMIZE_VIDEO_CONFLICT=6207]="SCREEN_SHARE_OPTIMIZE_VIDEO_CONFLICT",e[e.SCREEN_SHARE_INVALID_PRIVILEGE=6208]="SCREEN_SHARE_INVALID_PRIVILEGE",e[e.SCREEN_SHARE_IB_DENIED=6209]="SCREEN_SHARE_IB_DENIED",e[e.SCREEN_SHARE_LIMIT_EXCEED=6218]="SCREEN_SHARE_LIMIT_EXCEED",e[e.SCREEN_SHARE_ANNOTATION_ACCOUNT_DISABLE=6210]="SCREEN_SHARE_ANNOTATION_ACCOUNT_DISABLE",e[e.SCREEN_SHARE_ANNOTATION_NO_ACTIVE_SHARE=6211]="SCREEN_SHARE_ANNOTATION_NO_ACTIVE_SHARE",e[e.SCREEN_SHARE_ANNOTATION_PRESENTER_DISABLED=6212]="SCREEN_SHARE_ANNOTATION_PRESENTER_DISABLED",e[e.SCREEN_SHARE_ANNOTATION_DUPLICATE_START=6213]="SCREEN_SHARE_ANNOTATION_DUPLICATE_START",e[e.SCREEN_SHARE_ANNOTATION_START_ERROR=6214]="SCREEN_SHARE_ANNOTATION_START_ERROR",e[e.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER=6215]="SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER",e[e.SCREEN_SHARE_ANNOTATION_NOT_SUPPORT=6216]="SCREEN_SHARE_ANNOTATION_NOT_SUPPORT",e[e.SCREEN_SHARE_ANNOTATION_NOT_START=6217]="SCREEN_SHARE_ANNOTATION_NOT_START",e[e.SHARED_PROCESSOR_UNSUPPORTED=6223]="SHARED_PROCESSOR_UNSUPPORTED",e[e.SHARED_PROCESSOR_DUPLICATE_CREATE=6224]="SHARED_PROCESSOR_DUPLICATE_CREATE",e[e.SHARED_PROCESSOR_MISMATCH_PROCESSOR=6225]="SHARED_PROCESSOR_MISMATCH_PROCESSOR",e[e.SHARED_PROCESSOR_LIMIT_EXCEED=6226]="SHARED_PROCESSOR_LIMIT_EXCEED",e[e.REMOTE_CONTROL_ACCOUNT_DISABLE=6300]="REMOTE_CONTROL_ACCOUNT_DISABLE",e[e.REMOTE_CONTROL_MISMATCH_STATE=6301]="REMOTE_CONTROL_MISMATCH_STATE",e[e.REMOTE_CONTROL_PERMISSION_REQUIRED=6302]="REMOTE_CONTROL_PERMISSION_REQUIRED",e[e.REMOTE_CONTROL_MISMATCH_DISPLAY_SURFACE=6303]="REMOTE_CONTROL_MISMATCH_DISPLAY_SURFACE",e[e.REMOTE_CONTROL_INVALID_LAUNCH_SCHEME=6304]="REMOTE_CONTROL_INVALID_LAUNCH_SCHEME",e[e.CHAT_EMPTY_MESSAGE=7e3]="CHAT_EMPTY_MESSAGE",e[e.CHAT_MISMATCH_USER=7001]="CHAT_MISMATCH_USER",e[e.CHAT_INSUFFICIENT_PRIVILEGE=7002]="CHAT_INSUFFICIENT_PRIVILEGE",e[e.CHAT_INVALID_PRIVILEGE=7003]="CHAT_INVALID_PRIVILEGE",e[e.CHAT_SUBSESSION_CONFLICT=7004]="CHAT_SUBSESSION_CONFLICT",e[e.CHAT_EMPTY_FILE=7005]="CHAT_EMPTY_FILE",e[e.CHAT_INVALID_RETRY_TOKEN=7006]="CHAT_INVALID_RETRY_TOKEN",e[e.CHAT_MISMATCH_FILE_TYPE=7007]="CHAT_MISMATCH_FILE_TYPE",e[e.CHAT_EXCEED_FILE_SIZE=7008]="CHAT_EXCEED_FILE_SIZE",e[e.CHAT_INVALID_MSG_ID_OR_URL=7009]="CHAT_INVALID_MSG_ID_OR_URL",e[e.CHAT_FILE_ACCOUNT_DISABLE=7010]="CHAT_FILE_ACCOUNT_DISABLE",e[e.CHAT_DELETE_ACCOUNT_DISABLE=7011]="CHAT_DELETE_ACCOUNT_DISABLE",e[e.CMD_EMPTY_MESSAGE=7100]="CMD_EMPTY_MESSAGE",e[e.CMD_MISMATCH_USER=7101]="CMD_MISMATCH_USER",e[e.CMD_INVALID_MESSAGE_TYPE=7102]="CMD_INVALID_MESSAGE_TYPE",e[e.CMD_EXCEED_MESSAGE_LENGTH=7103]="CMD_EXCEED_MESSAGE_LENGTH",e[e.CMD_CHANNEL_NOT_READY=7104]="CMD_CHANNEL_NOT_READY",e[e.RECORDING_ACCOUNT_DISABLE=7200]="RECORDING_ACCOUNT_DISABLE",e[e.RECORDING_STOP_FORBIDDEN=7201]="RECORDING_STOP_FORBIDDEN",e[e.RECORDING_MISMATCH_STATE=7202]="RECORDING_MISMATCH_STATE",e[e.RECORDING_ISO_DISABLE=7203]="RECORDING_ISO_DISABLE",e[e.RECORDING_IQ_DISABLE=7204]="RECORDING_IQ_DISABLE",e[e.RECORDING_IQ_PERMISSION_REQUIRED=7205]="RECORDING_IQ_PERMISSION_REQUIRED",e[e.RECORDING_IQ_MISMATCH_STATE=7206]="RECORDING_IQ_MISMATCH_STATE",e[e.LOCAL_RECORDING_ACCOUNT_DISABLE=7207]="LOCAL_RECORDING_ACCOUNT_DISABLE",e[e.LOCAL_RECORDING_INVALID_VALUE=7208]="LOCAL_RECORDING_INVALID_VALUE",e[e.LOCAL_RECORDING_MISMATCH_STATE=7209]="LOCAL_RECORDING_MISMATCH_STATE",e[e.TRANSCRIPTION_ACCOUNT_DISABLE=7300]="TRANSCRIPTION_ACCOUNT_DISABLE",e[e.TRANSCRIPTION_FEATURE_DISABLE=7301]="TRANSCRIPTION_FEATURE_DISABLE",e[e.TRANSCRIPTION_LANGUAGE_UNSUPPORTED=7302]="TRANSCRIPTION_LANGUAGE_UNSUPPORTED",e[e.TRANSCRIPTION_MISMATCH_STATE=7303]="TRANSCRIPTION_MISMATCH_STATE",e[e.TRANSLATION_ACCOUNT_DISABLE=7304]="TRANSLATION_ACCOUNT_DISABLE",e[e.TRANSLATION_LANGUAGE_UNSUPPORTED=7305]="TRANSLATION_LANGUAGE_UNSUPPORTED",e[e.MANUAL_CAPTION_ACCOUNT_DISABLE=7306]="MANUAL_CAPTION_ACCOUNT_DISABLE",e[e.MANUAL_CAPTION_FEATURE_DISABLE=7307]="MANUAL_CAPTION_FEATURE_DISABLE",e[e.MANUAL_CAPTION_MISMATCH_USER=7308]="MANUAL_CAPTION_MISMATCH_USER",e[e.MANUAL_CAPTION_INSUFFICIENT_PRIVILEGE=7309]="MANUAL_CAPTION_INSUFFICIENT_PRIVILEGE",e[e.TRANSCRIPTION_LANGUAGE_LOCKED=7310]="TRANSCRIPTION_LANGUAGE_LOCKED",e[e.LIVE_STREAM_ACCOUNT_DISABLE=7400]="LIVE_STREAM_ACCOUNT_DISABLE",e[e.LIVE_STREAM_INVALID_PARAMETER=7401]="LIVE_STREAM_INVALID_PARAMETER",e[e.LIVE_STREAM_MISMATCH_STATE=7402]="LIVE_STREAM_MISMATCH_STATE",e[e.SUBSESSION_ACCOUNT_DISABLE=7500]="SUBSESSION_ACCOUNT_DISABLE",e[e.SUBSESSION_EXCEED_CAPACITY=7501]="SUBSESSION_EXCEED_CAPACITY",e[e.SUBSESSION_MISMATCH_ID=7502]="SUBSESSION_MISMATCH_ID",e[e.SUBSESSION_MISMATCH_USER=7503]="SUBSESSION_MISMATCH_USER",e[e.SUBSESSION_MISMATCH_STATE=7504]="SUBSESSION_MISMATCH_STATE",e[e.SUBSESSION_EXIT_RESTRICTED=7505]="SUBSESSION_EXIT_RESTRICTED",e[e.SUBSESSION_BROADCAST_DISABLE=7506]="SUBSESSION_BROADCAST_DISABLE",e[e.SUBSESSION_BROADCAST_INVALID_CONTENT=7507]="SUBSESSION_BROADCAST_INVALID_CONTENT",e[e.SUBSESSION_BROADCAST_VOICE_DISABLE=7508]="SUBSESSION_BROADCAST_VOICE_DISABLE",e[e.SUBSESSION_BROADCAST_VOICE_RESTRICTED=7509]="SUBSESSION_BROADCAST_VOICE_RESTRICTED",e[e.SUBSESSION_BROADCAST_VOICE_MISMATCH_STATE=7510]="SUBSESSION_BROADCAST_VOICE_MISMATCH_STATE",e[e.REACTION_ACCOUNT_DISABLE=7600]="REACTION_ACCOUNT_DISABLE",e[e.REACTION_INVALID_PARAMETER=7601]="REACTION_INVALID_PARAMETER",e[e.SUMMARY_ACCOUNT_DISABLE=7700]="SUMMARY_ACCOUNT_DISABLE",e[e.QA_INVALID_PARAMETER=7800]="QA_INVALID_PARAMETER",e[e.QA_INSUFFICIENT_PRIVILEGE=7801]="QA_INSUFFICIENT_PRIVILEGE",e[e.BROADCAST_STREAMING_ACCOUNT_DISABLE=7900]="BROADCAST_STREAMING_ACCOUNT_DISABLE",e[e.BROADCAST_STREAMING_MISMATCH_STATE=7901]="BROADCAST_STREAMING_MISMATCH_STATE",e[e.BROADCAST_STREAMING_INVALID_CHANNEL_ID=7902]="BROADCAST_STREAMING_INVALID_CHANNEL_ID",e})({});const OSe={...r$e,...i$e,...a$e,...c$e,...u$e,...f$e,...d$e,...h$e,...p$e,...m$e,...g$e,...v$e,"closed-caption-message":[{event:"CC_RECEIVE_MESSAGE",payload:e=>e}],"closed-caption-lt-status":[{event:"LT_STATUS_CHANGE",payload:e=>e}],"closed-caption-lt-message":[{event:"LT_RECEIVE_MESSAGE",payload:e=>e}],"closed-caption-status":[{event:"CC_ASSIGN_CC_EDITOR_SUCCESS",payload:e=>e},{event:"CC_STATUS_CHANGE",payload:e=>e}],...b$e,...y$e,...S$e,...C$e,...E$e},t5=(function(e){return{all:e=e||new Map,on:function(n,r){var i=e.get(n);i?i.push(r):e.set(n,[r])},off:function(n,r){var i=e.get(n);i&&(r?i.splice(i.indexOf(r)>>>0,1):e.set(n,[]))},emit:function(n,r){var i=e.get(n);i&&i.slice().map((function(l){l(r)})),(i=e.get("*"))&&i.slice().map((function(l){l(n,r)}))}}})(),zR=new Map,Jhe=new Array,O5=[CA,il,em];let c2,Xhe;function ISe(){return e=>e.pipe(Xl((function(n,r){n.subscribe(Al(r,(function(i){r.next(xfe.createNext(i))}),(function(){r.next(xfe.createComplete()),r.complete()}),(function(i){r.next(xfe.createError(i)),r.complete()})))})),Nt((n=>n.kind==="C"?Di(n).pipe(al(nm)):Di(n))),Xl((function(n,r){n.subscribe(Al(r,(function(i){return a2e(i,r)})))})))}const He=(e,n=void 0)=>{t5.emit(e,n)};function NA(e){return O5.includes(e)?Jl(t5,e):(c2&&Xhe||(c2=new cb,Xhe=wl(...O5.map((n=>Jl(t5,n)))).subscribe(c2)),Jl(t5,e).pipe(Au(c2)))}const aA=e=>new Promise(((n,r)=>{if(e.fail&&e.fail.length>0){var i;const l=O5.filter((h=>{var v;return!((v=e.fail)!==null&&v!==void 0&&v.includes(h))})),f=l.length>0?wl(...l.map((h=>NA(h).pipe(Ys(1),Kn((()=>({type:lSe,reason:h,errorCode:Fe.OPERATION_CANCELLED}))))))):SSe;mf(NA(e.success).pipe(Ys(1),ISe(),n$e((i=e.fail)!==null&&i!==void 0&&i.some((h=>O5.includes(h)))?SSe:Yn)),wl(...e.fail.map((h=>NA(h).pipe(Ys(1),ISe(),Nt((v=>ZA({type:h,payload:v}))))))),f).subscribe({next:h=>h&&h.type===lSe?r(h):n(h),error(h){if(typeof h.payload=="object"){const v={...h.payload};h.payload instanceof Error&&Object.assign(v,{name:h.payload.name,message:h.payload.message}),r({type:h.type,...v})}else h.payload===void 0?r({type:h.type}):r(h)}})}else NA(e.success).pipe(Ys(1)).subscribe((l=>n(l)))})),Cs=(e,n,r=1e4)=>new Promise(((i,l)=>{let f=Yn;typeof e=="string"?f=NA(e).pipe(Ys(1)):(f=NA(e.event),e.operations&&(f=e.operations.reduce(((h,v)=>h.pipe(v)),f))),mf(f,Uc(r).pipe(Nt((()=>ZA("timeout"))))).subscribe({next(h){if(n){const v=n(h);typeof v=="boolean"?v?i(""):l({type:Wu,errorCode:Fe.INTERNAL_ERROR}):v.ret===0?i(v.body):l({type:Wu,errorCode:Fe.INTERNAL_ERROR,reason:v.body})}else i(h)},error(){l({type:pQ,errorCode:Fe.OPERATION_TIMEOUT})}})})),si=(e,n)=>n!==void 0?NA(e).pipe(Ys(n)):NA(e);function vE(e){const n=O5.map((r=>si(r,1)));return e&&n.push(e),mf(...n)}const fbe=()=>{var e;Jhe.forEach((n=>{n.unsubscribe()})),Jhe.length=0,zR.clear(),c2&&(c2.complete(),(e=Xhe)===null||e===void 0||e.unsubscribe(),c2=void 0)};var kZ="NOT_FOUND",_$e=function(e,n){return e===n};function Fxe(e,n){var r,i,l=typeof n=="object"?n:{equalityCheck:n},f=l.equalityCheck,h=f===void 0?_$e:f,v=l.maxSize,y=v===void 0?1:v,_=l.resultEqualityCheck,A=(function(N){return function(L,B){if(L===null||B===null||L.length!==B.length)return!1;for(var H=L.length,q=0;q<H;q++)if(!N(L[q],B[q]))return!1;return!0}})(h),R=y===1?(r=A,{get:function(N){return i&&r(i.key,N)?i.value:kZ},put:function(N,L){i={key:N,value:L}},getEntries:function(){return i?[i]:[]},clear:function(){i=void 0}}):(function(N,L){var B=[];function H(q){var Y=B.findIndex((function(se){return L(q,se.key)}));if(Y>-1){var K=B[Y];return Y>0&&(B.splice(Y,1),B.unshift(K)),K.value}return kZ}return{get:H,put:function(q,Y){H(q)===kZ&&(B.unshift({key:q,value:Y}),B.length>N&&B.pop())},getEntries:function(){return B},clear:function(){B=[]}}})(y,A);function k(){var N=R.get(arguments);if(N===kZ){if(N=e.apply(null,arguments),_){var L=R.getEntries().find((function(B){return _(B.value,N)}));L&&(N=L.value)}R.put(arguments,N)}return N}return k.clearCache=function(){return R.clear()},k}function $xe(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return function(){for(var l=arguments.length,f=new Array(l),h=0;h<l;h++)f[h]=arguments[h];var v,y=0,_={memoizeOptions:void 0},A=f.pop();if(typeof A=="object"&&(_=A,A=f.pop()),typeof A!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof A+"]");var R=_.memoizeOptions,k=R===void 0?r:R,N=Array.isArray(k)?k:[k],L=(function(q){var Y=Array.isArray(q[0])?q[0]:q;if(!Y.every((function(se){return typeof se=="function"}))){var K=Y.map((function(se){return typeof se=="function"?"function "+(se.name||"unnamed")+"()":typeof se})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+K+"]")}return Y})(f),B=e.apply(void 0,[function(){return y++,A.apply(null,arguments)}].concat(N)),H=e((function(){for(var q=[],Y=L.length,K=0;K<Y;K++)q.push(L[K].apply(null,arguments));return v=B.apply(null,q)}));return Object.assign(H,{resultFunc:A,memoizedResultFunc:B,dependencies:L,lastResult:function(){return v},recomputations:function(){return y},resetRecomputations:function(){return y=0}}),H}}var va=$xe(Fxe);const yE=({participants:{attendeesList:e}})=>e,Uxe=({meeting:{userId:e}})=>e,Qhe=({participants:{xmppAttendeeList:e}})=>e;let F2=(function(e){return e[e.Attendee=0]="Attendee",e[e.Host=1]="Host",e[e.Owner=4]="Owner",e[e.ViewOnly=8]="ViewOnly",e[e.HostOwner=5]="HostOwner",e[e.ViewOnlyCanTalk=24]="ViewOnlyCanTalk",e})({}),w$e=(function(e){return e[e.Host=10]="Host",e[e.Panelist=20]="Panelist",e[e.Attendee=30]="Attendee",e})({}),eme=(function(e){return e[e.Client=9]="Client",e[e.Phone=5]="Phone",e[e.H323=15]="H323",e[e.Assitant=51]="Assitant",e})({});const I5=e=>(e&F2.Host)===F2.Host,$2=e=>(e&eme.Phone)===eme.Phone,KJ=e=>e===F2.ViewOnlyCanTalk,Ku=e=>(e&F2.ViewOnly)===F2.ViewOnly;let l2=(function(e){return e[e.Automatically=1]="Automatically",e[e.Manually=2]="Manually",e[e.SelfSelect=3]="SelfSelect",e})({}),cr=(function(e){return e[e.NotStarted=1]="NotStarted",e[e.InProgress=2]="InProgress",e[e.Closing=3]="Closing",e[e.Closed=4]="Closed",e})({}),jxe=(function(e){return e[e.NoToken=1]="NoToken",e[e.GotToken=2]="GotToken",e[e.Started=3]="Started",e[e.Closing=4]="Closing",e[e.Closed=5]="Closed",e})({}),vs=(function(e){return e.Initial="initial",e.Invited="invited",e.Joining="joining",e.InRoom="in room",e.Leaving="leaving",e.TimeUp="time up",e.MainSession="main session",e})({}),RR=(function(e){return e.Join="joinRequest",e.Switch="switchRequest",e.Leave="leaveRequest",e.Broadcast="messageText",e.HelpReq="helpRequest",e.HelpRes="helpResponse",e.CoHostWantJoinThisBo="wantJoinThisBO",e.BOActivity="BOActivity",e})({});const RSe="Subsession";let wA=(function(e){return e[e.Received=0]="Received",e[e.Busy=1]="Busy",e[e.Ignore=2]="Ignore",e[e.AlreadyInRoom=3]="AlreadyInRoom",e})({}),xSe=(function(e){return e[e.AskToLeave=0]="AskToLeave",e[e.ClosingRoom=1]="ClosingRoom",e})({}),A$e=(function(e){return e[e.Active=0]="Active",e[e.Ask=1]="Ask",e})({}),Mfe=(function(e){return e[e.Connect=1]="Connect",e[e.Muted=2]="Muted",e[e.Voip=4]="Voip",e})({}),DSe=(function(e){return e[e.Connect=8]="Connect",e[e.On=16]="On",e})({}),kSe=(function(e){return e[e.Share=32]="Share",e[e.ShareAudio=64]="ShareAudio",e})({});const zxe=({breakoutRoom:e})=>e&&e.controlStatus,Wxe=({breakoutRoom:e})=>e&&e.currentRoom.status,Do=va([Uxe,yE],((e,n)=>n.find((r=>r.userId===e)))),Qh=va([Do],(e=>(e==null?void 0:e.isHost)||(e==null?void 0:e.bCoHost))),Gxe=va([Do],(e=>e==null?void 0:e.isHost)),c6=va([Qhe],(e=>e.filter((n=>n.userRole===w$e.Attendee)))),T$e=va([yE],(e=>e.filter((n=>n.bHold&&!n.bid)))),Ai=va([yE,zxe,Wxe],((e,n,r)=>n!==cr.InProgress&&n!==cr.Closing||r!==vs.InRoom?e.filter((i=>!i.bHold&&!i.bid)):e.filter((i=>!i.bHold)))),O$e=va([({participants:{assistantList:e}})=>e],(e=>e)),tme=va([Ai],(e=>e.find((n=>n.isHost)))),MSe=va([Ai],(e=>e.filter((n=>n.bCoHost)))),pbe=va([Do,Ai],((e,n)=>n.filter((r=>r.userId!==(e==null?void 0:e.userId)))));va([Qhe],(e=>e.reduce(((n,r)=>{const{jid:i}=r;return Object.assign(n,{[i]:r}),n}),{}))),va([Qhe,({meeting:{jid:e}})=>e],((e,n)=>{var r;return(r=e.find((i=>i.jid===n)))===null||r===void 0?void 0:r.userId}));const I$e=va([yE],((e=[])=>e.some((n=>(n==null?void 0:n.bLocalRecord)===T5.Start)))),R$e=va([zxe,({meeting:e})=>e&&e.meetingOptions,yE,Gxe],((e,n,r,i)=>{const l=r.filter((v=>v.bCoHost)),{moveToWRIfHostLeave:f}=n,h=e===cr.InProgress;return i&&!!f&&l.length<=0&&!h&&r.length>1}));va([yE,Wxe,({breakoutRoom:e})=>e&&e.mainSessionAttendeeList],((e,n,r)=>(n===vs.InRoom?r:e).filter((i=>{return!(i.bHold||i.isHost||i.audio===Ur.Phone||$2(i==null?void 0:i.userType)||(l=i==null?void 0:i.caps,f=i==null?void 0:i.bMultiStreamVideoUser,((h,v)=>(y=>!!(128&y))(h)&&v!==void 0)(l,f)&&f));var l,f}))));class qxe{constructor(n){this._cancelError=new Error("request for lock canceled"),this._locked=void 0,this._queue=[],this._waiters=[],this._currentReleaser=void 0,n&&(this._cancelError=n),this._locked=!1}acquire(){const n=this.isLocked(),r=new Promise(((i,l)=>this._queue.push({resolve:i,reject:l})));return n||this._dispatch(),r}async runExclusive(n){const r=await this.acquire();try{return await n()}finally{r()}}async waitForUnlock(){return this.isLocked()?new Promise((n=>this._waiters.push({resolve:n}))):Promise.resolve()}isLocked(){return this._locked}release(){if(this._currentReleaser){const n=this._currentReleaser;this._currentReleaser=void 0,n()}}cancel(){this._queue.forEach((n=>n.reject(this._cancelError))),this._queue=[]}_dispatch(){const n=this._queue.shift();if(!n)return;let r=!1;this._currentReleaser=()=>{r||(r=!0,this._locked=!1,this._resolveWaiters(),this._dispatch())},this._locked=!0,n.resolve(this._currentReleaser)}_resolveWaiters(){this._waiters.forEach((n=>n.resolve())),this._waiters=[]}}let cf=(function(e){return e.VideoEncode="0",e.VideoDecode="1",e.AudioEncode="2",e.AudioDecode="3",e.SharingEncode="4",e.SharingDecode="5",e})({});class Yo{static getInstance(){return this.agentInstance===void 0&&(this.agentInstance=new Yo),this.agentInstance}constructor(){this.assetsPath=void 0,this.instance=void 0,this.callbackList=void 0,this.constraints=void 0,this.svcUrl=void 0,this.meetingNumber=void 0,this.confId=void 0,this.currentUserId=void 0,this.receivedSharingCanvas=void 0,this.sharingCanvas=void 0,this.annotationCanvas=void 0,this.annotationPresenterCanvas=void 0,this.mediaOptions=void 0,this.inProgress=void 0,this.callbackList=[]}init(n){!this.instance&&window.JsMediaSDK_Instance&&(this.instance=new window.JsMediaSDK_Instance(n))}setAssetsAndConstraint(n,r){this.assetsPath=n,this.constraints=r,this.onMediaSDKCallback=this.onMediaSDKCallback.bind(this)}onMediaSDKCallback(n,r){this.callbackList.length>0&&this.callbackList.forEach((i=>i(n,r)))}registerCallback(n){this.callbackList.push(n)}unregisterCallback(n){this.callbackList=this.callbackList.filter((r=>r!==n))}static isSupportVideoEncodeHardwareAcceleration(){return window.JsMediaSDK_Instance.util.IsSupportVideoEncodeHardwareAcceleration()}static isSupportVideoDecodeHardwareAcceleration(){return window.JsMediaSDK_Instance.util.IsSupportVideoDecodeHardwareAcceleration()}static isCompatibleHardwareForEncode(){var n;return bo.isSupportOffscreenCanvas&&((n=window.JsMediaSDK_Instance)===null||n===void 0?void 0:n.util.AdapterWhiteListCheckForEncoder())==0}static getPTZCapability(){var n,r,i,l,f,h;return{pan:!((n=window.JsMediaSDK_Instance)===null||n===void 0||(n=n.util)===null||n===void 0||(r=n.isSupportCameraPan)===null||r===void 0||!r.call(n)),tilt:!((i=window.JsMediaSDK_Instance)===null||i===void 0||(i=i.util)===null||i===void 0||(l=i.isSupportCameraTilt)===null||l===void 0||!l.call(i)),zoom:!((f=window.JsMediaSDK_Instance)===null||f===void 0||(f=f.util)===null||f===void 0||(h=f.isSupportCameraZoom)===null||h===void 0||!h.call(f))}}static isSupportVideoShare(){var n,r;return!((n=window.JsMediaSDK_Instance)===null||n===void 0||(n=n.util)===null||n===void 0||(r=n.isSupportVideoShareReceive)===null||r===void 0||!r.call(n))}static getVideoProcessorCapability(n){var r;return!((r=window.JsMediaSDK_Instance)===null||r===void 0||(r=r.util)===null||r===void 0||!r.isSupportVideoProcessor(n))}static getAudioProcessorCapability(n){var r;return!((r=window.JsMediaSDK_Instance)===null||r===void 0||(r=r.util)===null||r===void 0||!r.isSupportAudioProcessor(n))}static getShareProcessorCapability(n){var r;return!((r=window.JsMediaSDK_Instance)===null||r===void 0||(r=r.util)===null||r===void 0||!r.isSupportShareProcessor(n))}static isSupportVideoShareSend(){var n,r;return!((n=window.JsMediaSDK_Instance)===null||n===void 0||(n=n.util)===null||n===void 0||(r=n.isSupportVideoShareSend)===null||r===void 0||!r.call(n))}static isSupportSending720P(){var n;return!((n=window.JsMediaSDK_Instance)===null||n===void 0||(n=n.util)===null||n===void 0||!n.get720pcapacity())}static isSupportSubscribing1080P(){var n;return!((n=window.JsMediaSDK_Instance)===null||n===void 0||(n=n.util)===null||n===void 0||!n.getsub1080pcapacity())}static isSupportOpenMicWhenShareAudio(n){var r;return!((r=window.JsMediaSDK_Instance)===null||r===void 0||!r.util.isSupportOpenMicWhenShareAudio(n))}static isSupportMediaPlaybackAsVideoInput(){var n;return!((n=window.JsMediaSDK_Instance)===null||n===void 0||(n=n.util.videoToMediaStreamManager)===null||n===void 0||!n.isSupported())}static isSupportMediaPlaybackAsAudioInput(){var n;return!((n=window.JsMediaSDK_Instance)===null||n===void 0||(n=n.util.audioToMediaStreamMananger)===null||n===void 0||!n.isSupported())}static isSupportAudioDenoise(n,r){var i;return!((i=window.JsMediaSDK_Instance)===null||i===void 0||!i.util.isSupportAudioDenoise(n,r))}static isSupportAudioBridgeAVSync(){var n;return!((n=window.JsMediaSDK_Instance)===null||n===void 0||!n.util.isSupportAudioBridgeAvsync())}static getAudioFeatureFlag(n){var r;return(r=window.JsMediaSDK_Instance)===null||r===void 0?void 0:r.util.getAudioFeatureFlags(n)}static isSupportShareMultiStream(){var n;return(n=window.JsMediaSDK_Instance)===null||n===void 0?void 0:n.util.isSupportShareMultiStream()}static isSupportVideoLTR(){var n;return(n=window.JsMediaSDK_Instance)===null||n===void 0?void 0:n.util.isSupportVideoLTR()}static isSupportStereoAudio(){var n;return!((n=window.JsMediaSDK_Instance)===null||n===void 0||!n.util.isBrowserSupportStereo())}static isSupportFullHDVideo(n){var r;return!((r=window.JsMediaSDK_Instance)===null||r===void 0||!r.util.isSupportSendVideoFullHD(n))}static isSupportFullHDVideoShare(n){var r;return!((r=window.JsMediaSDK_Instance)===null||r===void 0||!r.util.isSupportSendVideoShareFullHD(n))}static isRenderSelfViewWithVideoElement(){var n;return!((n=window.JsMediaSDK_Instance)===null||n===void 0||!n.util.isSelfPreviewRenderWithVideo())}static getWebRTCCapability(n,r,i){var l;return(l=window.JsMediaSDK_Instance)===null||l===void 0?void 0:l.util.evaluateWebRTCStrategy(n,r,i)}static getMaxCountRender(n,r,i){var l;const f=i?{disableRenderLimits:!0}:r;return(l=window.JsMediaSDK_Instance)===null||l===void 0?void 0:l.util.getMaxCountRender(n,f)}static isSupportMultipleView(){var n;return(n=window.JsMediaSDK_Instance)===null||n===void 0?void 0:n.util.isSupportMultiViewAPI()}static isSupportShare2ndAudioDevice(n){var r;return!((r=window.JsMediaSDK_Instance)===null||r===void 0||!r.util.isSupportShare2ndAudioDevice(n))}static getWebRtcAudioMode(n,r,i,l){var f;return(f=window.JsMediaSDK_Instance)===null||f===void 0?void 0:f.util.evaluateAudioStrategy(n,r,i,l)}static getAnnotationCapability(n){var r;return(r=window.JsMediaSDK_Instance)===null||r===void 0?void 0:r.util.getAnnotationCapability(n)}connect({svcUrl:n,meetingNumber:r,conId:i,confId:l,e2eEncrypt:f,isViewOnly:h,currentUserId:v,isWebinar:y,enableWebtransport:_=!1,webtransportPort:A,isWebRtcVideoCapable:R,rendererType:k,isWebRtcAudioCapable:N,mediasdkConfig:L,enforceMultipleVideos:B,disableRenderLimits:H,reportDomain:q,abToken:Y,webrtcMode:K}){var se,ie,le,M;const{isSupportEssentialAudioAndVideoAbility:we,isSupportAudioWorklet:Ne,isSupportSendScreenSharing:De}=bo;this.svcUrl=n,this.meetingNumber=r,this.confId=i,this.currentUserId=v;const be=Yo.getMaxCountRender(R,B,H);if((se=this.instance)===null||se===void 0||se.setProps({callback:this.onMediaSDKCallback,isPreviewMode:!1,meetingParams:{cid:i,confId:l,userId:v,rwgHost:n,nginxHost:q,abToken:Y,e2eEncrypt:f,enableWebtransport:_,webtransportPort:A,rwgToMediaSDKConfig:L,webrtcMode:K},mediaParams:{videoDecodeThreadNum:be,rendererType:k,isEnableHD:!0,isEnableHW:!0}}),((ie=this.constraints)===null||ie===void 0?void 0:ie.audio)===!0&&we){const Be=Ne||N;var me,Ye;(y||Be)&&((me=this.instance)===null||me===void 0||me.initAudioDecode()),!Be||y&&h||(Ye=this.instance)===null||Ye===void 0||Ye.initAudioEncode()}var Ke,Ze,z,$t;((le=this.constraints)===null||le===void 0?void 0:le.video)===!0&&we&&((Ke=this.instance)===null||Ke===void 0||Ke.initVideoDecode(),y&&h||(Ze=this.instance)===null||Ze===void 0||Ze.initVideoEncode()),((M=this.constraints)===null||M===void 0?void 0:M.screen)===!0&&we&&((z=this.instance)===null||z===void 0||z.initSharingDecode(),!De||y&&h||($t=this.instance)===null||$t===void 0||$t.initSharingEncode()),this.inProgress=!0}async addProcessor(n){var r;return await((r=this.instance)===null||r===void 0?void 0:r.addProcessor(n))}async startProcessor(n){var r;await((r=this.instance)===null||r===void 0?void 0:r.startProcessor(n))}async stopProcessor(n){var r;await((r=this.instance)===null||r===void 0?void 0:r.stopProcessor(n))}async destroy(){var n;this.callbackList=[],[cf.AudioDecode,cf.AudioEncode,cf.VideoDecode,cf.VideoEncode].forEach((i=>{var l;(l=this.instance)===null||l===void 0||l.updateQosSubscription(!1,i)}));const r=(n=this.instance)===null||n===void 0?void 0:n.destroy.bind(this.instance);this.instance=null,this.inProgress=!1,await(r==null?void 0:r())}disconnect(){var n,r;(n=this.instance)===null||n===void 0||n.Notify_MeidaSDK(17,{}),(r=this.instance)===null||r===void 0||r.JsMediaSDK_UnInit()}muteAudio(){var n;(n=this.instance)===null||n===void 0||n.Notify_MeidaSDK(8,{ssrc:0})}unmuteAudio(){var n;(n=this.instance)===null||n===void 0||n.Notify_MeidaSDK(7,{ssrc:0,AudioSelectValue:0})}joinComputerAudio(n,r,i,l,f,h,v){var y;const _=v?{...v,enableHID:!0}:{enableHID:!1};return(y=this.instance)===null||y===void 0?void 0:y.Notify_MeidaSDK(22,{CaptureAudio:l,CaptureAudioInfo:{ssrc:n,AudioSelectValue:r==="default"?null:r,..._,audioProfile:f},speakerInfo:{defaultDeviceId:i},audioBridge:!!h})}leaveComputerAudio(){var n;return(n=this.instance)===null||n===void 0?void 0:n.Notify_MeidaSDK(21,null)}joinSharingAudio({ssrc:n,microphoneDeviceId:r,speakerDeviceId:i,isCaptureAudio:l,audioBridge:f}){var h;return(h=this.instance)===null||h===void 0?void 0:h.Notify_MeidaSDK(72,{CaptureAudio:l,CaptureAudioInfo:{ssrc:n,AudioSelectValue:r==="default"?null:r},speakerInfo:{defaultDeviceId:i},checkAutoplay:!1,audioBridge:!!f})}leaveSharingAudio(n){var r;return(r=this.instance)===null||r===void 0?void 0:r.Notify_MeidaSDK(73,{isPause:n?1:0})}changeSpeaker(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(11,{ssrc:0,AudioSelectValue:n})}changeMicrophone(n,r,i){var l;(l=this.instance)===null||l===void 0||l.Notify_MeidaSDK(18,{ssrc:0,AudioSelectValue:n==="default"?null:n,microphoneLabel:r??"default",defaultMuted:i})}restoreWebRTC(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(19,{ssrc:0,AudioSelectValue:n==="default"?null:n})}renderVideo(n,r,i,l,f,h,v,y,_,A,R){var k;const N={userId:r,width:l,height:f,x:h,y:v,quality:y,isMyself:_,canvas:n,enableWaterMark:R,waterMarkText:A,zone:i};sE(n)&&Object.assign(N,{videodom:n}),(k=this.instance)===null||k===void 0||k.Notify_MeidaSDK(1,N)}stopRenderVideo(n,r,i,l,f=!1){var h;(h=this.instance)===null||h===void 0||h.Notify_MeidaSDK(2,{canvas:n,userId:r,RGBA:l,doNotClean:f,zone:i})}subscribeVideo(n,r,i){var l;(l=this.instance)===null||l===void 0||l.Notify_MeidaSDK(132,[{id:n,size:r,bOn:i}])}unsubscribeVideo(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(133,[{id:n}])}startCaptureVideo(n,r,i,l,f,h,v=!1,y,_,A){var R;const k=y?Yo.getPTZCapability():void 0;(R=this.instance)===null||R===void 0||R.Notify_MeidaSDK(3,{ssid:n,width:i,height:l,fps:_,video:f,usingFacingMode:h,VideoSelectValue:r==="default"?null:r,disableOriginalRatio:v,customConstraints:A,...k})}stopCaptureVideo(){var n;(n=this.instance)===null||n===void 0||n.Notify_MeidaSDK(4,{ssrc:0})}changeCamera(n,r,i,l){var f;const h=l?{}:{customConstraints:void 0};(f=this.instance)===null||f===void 0||f.Notify_MeidaSDK(12,{VideoSelectValue:n==="default"?null:n,usingFacingMode:!!r,...i||{},...h})}switchCanvasForVideoCapture(n){var r;let i=n;typeof n=="string"&&(i=[n]),(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(25,i)}renderSharing(n,r,i=!1,l="",f=!1){var h;this.receivedSharingCanvas=r,(h=this.instance)===null||h===void 0||h.Notify_MeidaSDK(23,{width:0,height:0,ssrc:n,canvas:r,enableWaterMark:i,waterMarkText:l,isFromMainSession:f})}stopRenderSharing(){var n;(n=this.instance)===null||n===void 0||n.Notify_MeidaSDK(24,{})}switchSharingSource(n,r=!1){var i;this.receivedSharingCanvas&&(this.stopRenderSharing(),this.renderSharing(n,this.receivedSharingCanvas,!1,"",r)),(i=this.instance)===null||i===void 0||i.Notify_MeidaSDK(36,{ssrc:n,isFromMainSession:Number(r)})}ajustmentReceivedSharingCanvas(n,r){if(this.receivedSharingCanvas&&n&&r)try{if(bo.isAndroidOrIOSBrowser){const[i,l]=[1280,720],f=Math.max(n/i,r/l,1);this.receivedSharingCanvas.width=Math.floor(n/f),this.receivedSharingCanvas.height=Math.floor(r/f)}else this.receivedSharingCanvas.width=n,this.receivedSharingCanvas.height=r}catch{}}startRemoteControl(n,r,i){var l;(l=this.instance)===null||l===void 0||l.Notify_MeidaSDK(26,{socketURL:`wss://${this.svcUrl}`,meetingID:this.meetingNumber,condID:this.confId,os:r,dom:n,...i})}stopRemoteControl(){var n;(n=this.instance)===null||n===void 0||n.Notify_MeidaSDK(28)}resendRemoteControlPositionPDU(){var n;(n=this.instance)===null||n===void 0||n.Notify_MeidaSDK(41)}updateRemoteControlProperties(n){var r;const{dimension:i,...l}=n;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(27,{...i,...l})}startDesktopSharing(n,r,i,l,f=!0,h,v,y){var _;this.sharingCanvas=r;const A={};l&&Object.assign(A,{share2ndCamera:!0,share2ndCameraParams:{VideoSelectValue:l.cameraId==="default"?null:l.cameraId,width:l.width,height:l.height}}),h!==void 0&&Object.assign(A,{videoParams:{displaySurface:h}}),y!==void 0&&Object.assign(A,{otherParams:{...y}}),(_=this.instance)===null||_===void 0||_.Notify_MeidaSDK(30,{ssid:n,canvas:r,video:i,...A,showShareAudioOption:f,sourceId:v,noPreview:!0})}stopDesktopSharing(){var n;(n=this.instance)===null||n===void 0||n.Notify_MeidaSDK(31,{})}pauseDesktopSharing(){var n;(n=this.instance)===null||n===void 0||n.Notify_MeidaSDK(32,{})}updateSharingInfo(n,r){var i;(i=this.instance)===null||i===void 0||i.Notify_MeidaSDK(153,{shareSessionId:n,userName:r})}resumeDesktopSharing(){var n;(n=this.instance)===null||n===void 0||n.Notify_MeidaSDK(33,{})}selectLanguageChannelForNewLTT(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(57,{lang:n})}changeSharingSecondCamera(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(49,{VideoSelectValue:n})}ajustmentSharingCanvas(n,r){if(this.sharingCanvas)try{this.sharingCanvas.width=n,this.sharingCanvas.height=r}catch{}}startPresenterAnnotation(n,r,i){const l={shareSessionId:n,presenterId:r,userName:i};var f;this.sharingCanvas&&(this.annotationPresenterCanvas||(this.annotationPresenterCanvas=Q1e(this.sharingCanvas,sSe+"PRESENTER",(()=>{this.updatePresenterAnnotationCanvas()}))),this.annotationPresenterCanvas&&(Object.assign(l,{localShareCanvas:this.sharingCanvas,annoPresenterCanvas:this.annotationPresenterCanvas,isPresenter:!0}),(f=this.instance)===null||f===void 0||f.Notify_MeidaSDK(150,l),this.updatePresenterAnnotationCanvas()))}startViewerAnnotation(n,r,i){const l={shareSessionId:n,presenterId:r,userName:i};var f,h;this.receivedSharingCanvas?(this.annotationCanvas?(this.annotationCanvas.parentNode&&(this.annotationCanvas.parentNode.style.display="block"),this.annotationCanvas.style.display="block"):this.annotationCanvas=Q1e(this.receivedSharingCanvas,sSe+"VIEWER",(()=>{this.updateViewerAnnotationCanvas()})),this.annotationCanvas&&(Object.assign(l,{canvas:this.receivedSharingCanvas,annoCanvas:this.annotationCanvas,isPresenter:!1}),(f=this.instance)===null||f===void 0||f.Notify_MeidaSDK(150,l),this.updateViewerAnnotationCanvas())):(h=this.instance)===null||h===void 0||h.Notify_MeidaSDK(150,{...l,isPresenter:!1})}stopPresenterAnnotation(n){var r;this.annotationPresenterCanvas&&typeof this.annotationPresenterCanvas._overlayCleanup=="function"&&(this.annotationPresenterCanvas._overlayCleanup(),this.annotationPresenterCanvas=null),(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(156,{presenterId:n})}hideViewerAnnotationCanvas(){this.annotationCanvas&&(this.annotationCanvas.style.display="none",this.annotationCanvas.parentNode)&&(this.annotationCanvas.parentNode.style.display="none")}removeViewerAnnotationCanvas(){this.annotationCanvas&&typeof this.annotationCanvas._overlayCleanup=="function"&&(this.annotationCanvas._overlayCleanup(),this.annotationCanvas=null)}stopViewerAnnotation(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(156,{presenterId:n})}annotateAction(n,r={}){var i;(i=this.instance)===null||i===void 0||i.Notify_MeidaSDK(fU,{actionType:n,...r})}updatePresenterAnnotationCanvas(){if(this.sharingCanvas){var n,r;const{size:i,position:l}=eSe(this.sharingCanvas);(n=this.instance)===null||n===void 0||n.Notify_MeidaSDK(fU,{actionType:af.ANNO_CANVAS_SIZE_UPDATE,...i}),(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(fU,{actionType:af.UPDATE_REMOTE_POSITION_INFO,...l})}}updateViewerAnnotationCanvas(){if(this.receivedSharingCanvas){var n,r;const{size:i,position:l}=eSe(this.receivedSharingCanvas);(n=this.instance)===null||n===void 0||n.Notify_MeidaSDK(fU,{actionType:af.ANNO_CANVAS_SIZE_UPDATE,...i}),(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(fU,{actionType:af.UPDATE_REMOTE_POSITION_INFO,...l})}}enableAudioEncode(){var n;(n=this.instance)===null||n===void 0||n.initAudioEncode()}sendUserNodeList(n,r){var i;(i=this.instance)===null||i===void 0||i.Notify_MeidaSDK(43,{userList:n,encryptKey:r})}updateRenderedSharingDimension(n,r){var i;(i=this.instance)===null||i===void 0||i.Notify_MeidaSDK(44,{width:n,height:r})}pauseOrResumeAudio(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(45,{bPause:n})}updateRenderedVideoCanvasDimension(n,r,i){var l;(l=this.instance)===null||l===void 0||l.Notify_MeidaSDK(46,{canvas:n,width:r,height:i})}clearVideoCanvas(n,r){var i;(i=this.instance)===null||i===void 0||i.Notify_MeidaSDK(47,{id:n,RGBA:r})}adjustRenderedVideoPosition(n,r,i,l,f,h,v,y){var _;(_=this.instance)===null||_===void 0||_.Notify_MeidaSDK(48,{userId:r,x:l,y:f,width:h,height:v,canvas:n,zone:i,RGBA:y})}mirrorVideo(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(75,{isMirrorMyVideo:n})}updateUserMediaSN(n){var r,i,l;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(80,{isFromMainSession:Number(n.isFromMainSession),mediaActionType:n.iVType,body:{add:(i=n.added)!==null&&i!==void 0?i:[],remove:(l=n.removed)!==null&&l!==void 0?l:[]}})}updateMediaParams(n){var r;const{iVType:i,isFromMainSession:l,updateParams:f}=n;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(81,{mediaActionType:i,isFromMainSession:Number(l),updateParams:f})}createMainSessionChannel(n,r){var i,l;n==="sharing"?(i=this.instance)===null||i===void 0||i.Notify_MeidaSDK(84,r):(l=this.instance)===null||l===void 0||l.Notify_MeidaSDK(85,r)}addReceivedSharingChannelType(n){var r;const{isFromMainSession:i,...l}=n;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(82,{isFromMainSession:Number(i),...l})}removeReceivedSharingChannelType(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(83,{isFromMainSession:Number(n.isFromMainSession),ssrc:n.ssrc})}beforeReportToGlobalTracing(){var n,r;(n=this.instance)===null||n===void 0||(r=n.beforeReportToGlobalTracing)===null||r===void 0||r.call(n)}enableHardwareAccelerationForVideoDecode(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(70,{enable:n})}enableHardwareAccelerationForVideoEncode(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(71,{enable:n})}setSharingAudioVolume(n,r,i,l=!1){var f;(f=this.instance)===null||f===void 0||f.Notify_MeidaSDK(74,{userid:n>>10,shareVolume:r?0:100,isFromMainSession:i,isSecondAudio:l})}subscribeToQos(n,r){n.forEach((i=>{var l;(l=this.instance)===null||l===void 0||l.updateQosSubscription(!0,i,r)}))}unsubscribeFromQos(n){n.forEach((r=>{var i;(i=this.instance)===null||i===void 0||i.updateQosSubscription(!1,r)}))}passThroughRWGMessage(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(40,n)}startVirtualBackgroundSetting(n,r,i,l,f,h,v=!1,y){var _;(_=this.instance)===null||_===void 0||_.Notify_MeidaSDK(91,{canvas:n,bgdom:r,width:f,height:h,ssid:i,VideoSelectValue:l==="default"?null:l,disableOriginalRatio:v,id:y})}updateVirtualBackgroundImage(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(92,{bgdom:n})}stopVirtualBackgroundSetting(n=!1){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(93,{isSwitch:n})}startMaskSetting(n,r,i,l,f,h,v,y,_){var A;(A=this.instance)===null||A===void 0||A.Notify_MeidaSDK(62,{canvas:n,maskdom:i,bgdom:r,dx:0,dy:0,dWidth:h,dHeight:v,width:y,height:_,ssid:l,VideoSelectValue:f==="default"?null:f})}updateMaskBackgroundImage(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(63,{bgdom:n})}updateMaskClip(n,r,i){var l;(l=this.instance)===null||l===void 0||l.Notify_MeidaSDK(64,{maskdom:n,dx:0,dy:0,dWidth:r,dHeight:i})}stopMaskSetting(n=!1){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(65,{isSwitch:n})}enableVideoObserver(n,r=!1){var i;(i=this.instance)===null||i===void 0||i.Notify_MeidaSDK(99,{enable:n,fpsdisbale:r})}enableShareAudioToBreakoutRoom(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(86,{enable:n})}sendUserAudioStatus(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(51,n)}muteOrUnmuteOtherAudio(n,r){var i;(i=this.instance)===null||i===void 0||i.Notify_MeidaSDK(50,{userId:n,volume:r?0:100})}adjustOtherAudioVolume(n,r){var i;(i=this.instance)===null||i===void 0||i.Notify_MeidaSDK(50,{userId:n,volume:r})}notifySDKMeetingReady(){var n;(n=this.instance)===null||n===void 0||n.Notify_MeidaSDK(113)}movePTZCamera(n){var r;return(r=window.JsMediaSDK_Instance)===null||r===void 0||(r=r.util)===null||r===void 0?void 0:r.queryPTZPermisson().then((i=>{var l;return i?((l=this.instance)===null||l===void 0||l.Notify_MeidaSDK(53,n),Promise.resolve("")):Promise.reject("Cannot move camera without permission granted")}))}switchSharingMode(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(101,{mode:n})}updateVideoHDValue(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK("update_videohd_value",{videohd:n})}updateVideoFullhdValue(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK("update_videofullhd_value",{videofullhd:n})}changeAudioProfile(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(126,n)}enableSyncButtonsOnHeadset(n,r,i){var l;(l=this.instance)===null||l===void 0||l.Notify_MeidaSDK(100,{enable:n,microphoneLabel:r,defaultMuted:i})}stopAllIncomingAudio(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(123,n)}isSharingEntireScreen(){var n,r;const i=(n=this.instance)===null||n===void 0||(r=n.getShareStreamInfo)===null||r===void 0?void 0:r.call(n);if(i){const{displaySurface:l}=i;return!l||l==="monitor"}return!1}getShareStreamInfo(n=!1){var r,i;const l=(r=this.instance)===null||r===void 0||(i=r.getShareStreamInfo)===null||i===void 0?void 0:i.call(r);if(l){const{deviceId:f,width:h,height:v}=l,y={deviceId:f,width:h,height:v};return n&&Object.assign(y,{displaySurface:l.displaySurface}),y}return{}}prefetchVideoSsrc(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(110,{ssrc:n})}cancelPrefetchVideoSsrc(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(112,{ssrc:n,haddata:!1})}setMobileRotateMode(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(124,{isLandScape:n})}changeActiveVideoSsrc(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(13,{ssrc:n})}setAudioCodecMode(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(122,{mode:n})}startRemoteControlQRCheck(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(54,{enable:n})}broadcastVoiceToBreakoutRoom(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(87,{enable:n})}share2ndAudio(n,r){var i;const l={audioOnly:!0,deviceId:n==="default"?null:n};r&&Object.assign(l,r),(i=this.instance)===null||i===void 0||i.Notify_MeidaSDK(129,l)}enablePlayAudioFileLocally(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(138,n)}bypassMediaMessage(n){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(128,n)}screenshot(n,r){var i;return(i=this.instance)===null||i===void 0?void 0:i.ScreenShot(n,r)}}Yo.agentInstance=void 0;const qL=typeof Buffer=="function",NSe=typeof TextDecoder=="function"?new TextDecoder:void 0,PSe=typeof TextEncoder=="function"?new TextEncoder:void 0,MU=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),MZ=(()=>{let e={};return MU.forEach(((n,r)=>e[n]=r)),e})(),x$e=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,ep=String.fromCharCode.bind(String),LSe=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),Kxe=e=>e.replace(/=/g,"").replace(/[+\/]/g,(n=>n=="+"?"-":"_")),Zxe=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),Yxe=typeof btoa=="function"?e=>btoa(e):qL?e=>Buffer.from(e,"binary").toString("base64"):e=>{let n,r,i,l,f="";const h=e.length%3;for(let v=0;v<e.length;){if((r=e.charCodeAt(v++))>255||(i=e.charCodeAt(v++))>255||(l=e.charCodeAt(v++))>255)throw new TypeError("invalid character found");n=r<<16|i<<8|l,f+=MU[n>>18&63]+MU[n>>12&63]+MU[n>>6&63]+MU[63&n]}return h?f.slice(0,h-3)+"===".substring(h):f},nme=qL?e=>Buffer.from(e).toString("base64"):e=>{let n=[];for(let r=0,i=e.length;r<i;r+=4096)n.push(ep.apply(null,e.subarray(r,r+4096)));return Yxe(n.join(""))},D$e=e=>{if(e.length<2)return(n=e.charCodeAt(0))<128?e:n<2048?ep(192|n>>>6)+ep(128|63&n):ep(224|n>>>12&15)+ep(128|n>>>6&63)+ep(128|63&n);var n=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return ep(240|n>>>18&7)+ep(128|n>>>12&63)+ep(128|n>>>6&63)+ep(128|63&n)},k$e=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,BSe=qL?e=>Buffer.from(e,"utf8").toString("base64"):PSe?e=>nme(PSe.encode(e)):e=>Yxe((n=>n.replace(k$e,D$e))(e)),M$e=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,N$e=e=>{switch(e.length){case 4:var n=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return ep((n>>>10)+55296)+ep(56320+(1023&n));case 3:return ep((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return ep((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},Jxe=typeof atob=="function"?e=>atob(Zxe(e)):qL?e=>Buffer.from(e,"base64").toString("binary"):e=>{if(e=e.replace(/\s+/g,""),!x$e.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let n,r,i,l="";for(let f=0;f<e.length;)n=MZ[e.charAt(f++)]<<18|MZ[e.charAt(f++)]<<12|(r=MZ[e.charAt(f++)])<<6|(i=MZ[e.charAt(f++)]),l+=r===64?ep(n>>16&255):i===64?ep(n>>16&255,n>>8&255):ep(n>>16&255,n>>8&255,255&n);return l},P$e=qL?e=>LSe(Buffer.from(e,"base64")):e=>LSe(Jxe(e).split("").map((n=>n.charCodeAt(0)))),L$e=qL?e=>Buffer.from(e,"base64").toString("utf8"):NSe?e=>NSe.decode(P$e(e)):e=>(n=>n.replace(M$e,N$e))(Jxe(e)),Xxe=(e,n=!1)=>n?Kxe(BSe(e)):BSe(e),B$e=e=>L$e((n=>Zxe(n.replace(/[-_]/g,(r=>r=="-"?"+":"/"))))(e)),V$e=(e,n=!1)=>n?Kxe(nme(e)):nme(e);function Vc(e){return Xxe(e,!0)}function hb(e){return B$e(e)}function Qxe(e){return Xxe(e,!1)}const H$e={"-":"+",_:"/",".":"="};function iv(e){const n=e.replace(/[-_.]/g,(r=>H$e[r]));return Uint8Array.from(window.atob(n),(r=>r.charCodeAt(0)))}const eDe=e=>{const n=e.charCodeAt(0);return n<=parseInt("0x7F",16)?1:n<=parseInt("0x7FF",16)?2:n<=parseInt("0xFFFF",16)?3:n<=parseInt("0x1FFFFF",16)?4:n<=parseInt("0x3FFFFFF",16)?5:6},ZJ=(e,n)=>{const r=e.split(".").map((f=>Number(f))).slice(0,3),i=n.split(".").map((f=>Number(f))).slice(0,3);let l=0;for(let f=0;f<3;f++){const h=f<r.length?r[f]:0,v=f<i.length?i[f]:0;if(h<v){l=-1;break}if(h>v){l=1;break}}return l},YJ=e=>{var n;let r=new Date().getTime(),i=1e3*((n=performance)===null||n===void 0?void 0:n.now())||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(f=>{let h=16*Math.random();return r>0?(h=(r+h)%16|0,r=Math.floor(r/16)):(h=(i+h)%16|0,i=Math.floor(i/16)),(f==="x"?h:3&h|8).toString(16)}))+""};function l6(e,n){if(e===n)return!0;if(!e||!n)return!1;const r=Object.keys(e),i=Object.keys(n),l=r.length;if(i.length!==l)return!1;for(let f=0;f<l;f++){const h=r[f];if(e[h]!==n[h]||!Object.prototype.hasOwnProperty.call(n,h))return!1}return!0}const Td=(e,n)=>e>>10==n>>10,vQ=(e,n)=>new Promise((r=>{setTimeout((()=>{r(e())}),n)})),rE=e=>{const n=`${Math.floor(1e4*Math.random())}`;return e.indexOf("@")>-1?e.replace("@",n):`${e}${n}`},og=e=>{try{const n=new URL(e);return!(n.protocol==="data:"&&n.origin==="null")&&n.origin!==location.origin}catch{return!0}},bE=e=>{const n=e.split(".")[1];if(typeof n=="string"){let r=n.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw new Error("base64 string is not of the correct length")}try{const i=decodeURIComponent(window.atob(r).replace(/(.)/g,(function(l,f){let h=f.charCodeAt(0).toString(16).toUpperCase();return h.length<2&&(h="0"+h),"%"+h})));return JSON.parse(i)}catch{console.error("Invalid token specified: invalid base64")}}};function bQ(e){return e&&e.endsWith("/")?e.slice(0,e.length-1):e}function tDe(e){return[...new Uint8Array(e)].map((n=>n.toString(16).padStart(2,"0"))).join("")}function VSe(e){return`${e.tagName}${e.id?`#${e.id}`:""}${e.className?`${e.className.split(" ").map((n=>`.${n}`)).join("")}`:""}`}function nDe(e){const n=(function(r){const i=r&&r.getRootNode();if(i&&i.nodeName!=="#document"&&i.host)return VSe(i.host)})(e);return`${n?`${n}>`:""}${VSe(e)}`}function JJ(e){return typeof e=="object"&&e!==null?uQ(e,HTMLElement)?nDe(e):ArrayBuffer.isView(e)?tDe(e.buffer):Array.isArray(e)?e.map((n=>JJ(n))):Object.keys(e).reduce(((n,r)=>({...n,[`${r}`]:JJ(e[r])})),{}):e}const F$e=[fY,pY,JR].map((e=>FRe(e,{hostname:!0})));function oDe(e){return F$e.some((n=>new RegExp(`^https://${n}`).test(e??"")))}const Ad=(e,n,r)=>Yve([n,r].map(((i,l)=>{if(i!=="initial")return An([i==="success"]);{const f=l===0?"ENCODE":"DECODE";return mf(si(`${e.toUpperCase()}_${f}_SUCCESS`,1).pipe(Kn((()=>!0))),si(`${e.toUpperCase()}_${f}_FAIL`,1).pipe(Kn((()=>!1))))}}))),U2=e=>{const n=Do(e.value);return n?Di(n):si(a6,1).pipe(al(mE),_o(e),Kn((([,r])=>Do(r))))};function ome(e,n){var r,i,l;const f=e==="audio"?(r=n.audio)===null||r===void 0?void 0:r.audioSsrc:(i=n.video)===null||i===void 0?void 0:i.videoSsrc,h=e==="audio"?Z2e:N2e;return e==="audio"&&(l=n.audio)!==null&&l!==void 0&&l.isWebRtcAudioCapable||f?Promise.resolve():Cs(h)}const j2=()=>An(navigator.mediaDevices.enumerateDevices()).pipe(Kn((e=>{const n=[],r=[],i=[];return e.forEach((l=>{const{kind:f,deviceId:h,label:v}=l,y=v.replace(/\([\w,\d]+:[\w,\d]+\)/i,"").trim();switch(f){case"audioinput":h==="communications"||/ZoomAudioDevice/i.test(y)||/Zoom-\S*/.test(y)||/CubebAggregateDevice\S*/.test(y)||/Microsoft Teams Audio/i.test(y)||n.push({deviceId:h,label:y});break;case"audiooutput":h==="communications"||/ZoomAudioDevice/i.test(y)||/Microsoft Teams Audio/i.test(y)||r.push({deviceId:h,label:y});break;case"videoinput":i.push({deviceId:h,label:y})}})),{microphones:n,speakers:r,cameras:i}})));function XJ(e){const{x:n,y:r,width:i,height:l}=e.getBoundingClientRect();return{scaleWidth:i,scaleHeight:l,srcOffsetX:n,srcOffsetY:r}}function QJ(e){if(e){let r=e;try{const i=e.width;e.width=i}catch{var n;r=e.cloneNode(!0),(n=e.parentNode)===null||n===void 0||n.replaceChild(r,e)}return r}return e}function HSe(){try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(_Fe)}catch{return!1}}function NZ(){var e;return(e=WebAssembly)===null||e===void 0?void 0:e.validate(wFe)}const sDe=(()=>{const e=new qxe;return{withAudioAction:n=>(...r)=>new Promise((async(i,l)=>{let f=!1;const h=setTimeout((()=>{f=!0,e.release()}),3e4);try{await e.acquire(),f||clearTimeout(h),i(n(...r))}catch(v){f||(clearTimeout(h),l(v))}})),processAudioAction:n=>e.acquire().then((()=>n())),completeAudioAction:()=>{e.release()},cancelAllAudioAction:()=>{e.cancel()}}})();function yQ(e){const n=["joinComputerAudio","joinSharingAudio","leaveComputerAudio","leaveSharingAudio"];return new Proxy(e,{get:(r,i)=>typeof i=="string"&&n.includes(i)?function(...l){return sDe.withAudioAction(r[i].bind(r))(...l)}:Reflect.get(r,i)})}function sme(e,n){var r;const{browserVersion:i,isChrome:l,isFirefox:f,isSafari:h,isAndroidOrIOSBrowser:v,isSupportMediaStreamTrackProcessor:y,isSupportOffscreenCanvas:_,isSwiftShader:A}=bo,R=Number(i==null||(r=i.match(/^\d+/))===null||r===void 0?void 0:r[0]),k=l&&R>=91,N=f&&R>=89,L=h&&ZJ(i,"17.4")>=0,B=navigator.hardwareConcurrency>2;let H=Yo.isSupportMultipleView();return e&&!H&&(H=_&&y),!v&&!A&&(H||n)&&(k||N||L)&&B}const Nfe=(e,n)=>{const r=document.createElement("link");return r.rel="preload",r.href=e,r.as=n,r.crossOrigin="anonymous",r},Yw=(e,n,r)=>{const i=[],l=[],f=Array.isArray(e)?e:[e];return OFe.filter((h=>{var v;return f.includes(h.category)&&(h.tag===n||((v=h.tag)===null||v===void 0?void 0:v.split(",").includes(n)))})).forEach((h=>{h.type==="worker"?i.push(`${r}${h.name}`):h.type==="wasm"&&l.push(`${r}${h.name}`)})),{workers:i,wasms:l}};function rDe(e,n){const r={},{isSupportSharedArrayBuffer:i,isSupportOffscreenCanvas:l,isSupportMediaStreamTrackProcessor:f,isAndroidOrIOSBrowser:h,isHarmonyOS:v}=bo;return i||(Object.assign(r,{enableMultiDecodeVideoWithoutSAB:!!e}),l&&f&&Object.assign(r,{enableVirtualBackgroundWithoutSAB:!!n})),Object.assign(r,{platformMode:{isDesktopMode:!(h||v)}}),r}function Pfe(e,n,r){if(e.deviceId===n)return!0;if(n==="default"){const i=r.find((l=>l.deviceId===n));if(i)return i.label.indexOf(e.label)>-1}return!1}function hU(e){return e.find((n=>n.deviceId==="default"))}const rme=(()=>{let e,n=!1;return{watch:function(r){n=!0,e=Promise.race([r,vQ((()=>!0),1e4)]).then((()=>{e=void 0,n=!1})).finally((()=>{e=void 0,n=!1}))},acquire:function(){return n&&e?e:Promise.resolve()}}})(),NU=(e,n)=>Cs({event:Qve,operations:[Gt((r=>r[`${e}`]!==void 0)),Ys(1)]},(r=>r[`${e}`]===n));function FSe(e,n,r,i){const l={play:()=>e.play(),pause:()=>e.pause(),get paused(){return e.paused},get muted(){return e.muted},set muted(f){e.muted=f},get currentTime(){return e.currentTime},set currentTime(f){e.currentTime=f},get loop(){return e.loop},set loop(f){e.loop=f}};if(n==="audio"){const{audio:{mediaPlaybackFile:f}}=r;Object.defineProperty(l,"playback",{get(){const h=e.dataset.playback;return h!==void 0?h==="1":!(f==null||!f.playback)},set(h){i.enablePlayAudioFileLocally(h),e.dataset.playback=h?"1":"0"}})}return l}function ime(){return mf(Jl(document,"click").pipe(Ys(1)),Jl(document,"touchend").pipe(Ys(1))).pipe(Au(vE()))}function iDe(e,n){const{audio:{activeMicrophone:r,microphoneDevicesList:i}}=n,l=i.find((h=>h.deviceId===r)),f=Do(n);e.changeMicrophone(r,l==null?void 0:l.label,!(f==null||!f.muted))}function aDe(e,n,r,i){var l;const{audio:f,share:{isReceiveSharingFromMainSession:h}}=r;if((f==null||(l=f.localShareAudioUserMutedList)===null||l===void 0?void 0:l.length)>0){const{localShareAudioUserMutedList:v}=f,y=v.filter((_=>_.userId!==e));if(y.length){const _=Ai(r);y.forEach((A=>{const R=_.find((k=>k.userId===A.userId));R&&!R.audioShare&&i.setSharingAudioVolume(A.userId,!0,A.isFromMainSession)}))}}i.setSharingAudioVolume(e,n,!!h)}function $$e(e,n){let r=0;return e&&(r|=The.WebRTCAudio),n&&(r|=The.WebRTCVideo),r}function cDe(){var e,n;return"orientation"in window.screen?(e=screen.orientation.type)===null||e===void 0?void 0:e.startsWith("landscape"):"orientation"in window?Math.abs(window.orientation)===90:"matchMedia"in window?!((n=window.matchMedia("(orientation: landscape)"))===null||n===void 0||!n.matches):screen.availWidth>screen.availHeight}function lDe(){return"orientation"in window.screen?Jl(screen.orientation,"change").pipe(Au(vE()),Kn((()=>{var e;return(e=screen.orientation.type)===null||e===void 0?void 0:e.startsWith("landscape")}))):Jl(window,"orientationchange").pipe(Au(vE()),Kn((e=>{var n;const r=(n=e.target)===null||n===void 0||(n=n.screen)===null||n===void 0||(n=n.orientation)===null||n===void 0?void 0:n.angle;return Math.abs(r)===90})))}function PZ(e,n){var r;let i;if(typeof e=="string"){if(i=document.querySelector(e),!i)return[!1,{type:gs,reason:"Cannot find the element",errorCode:Fe.STREAM_MISMATCH_RENDER_ELEMENT}]}else i=e;return((r=i)===null||r===void 0||(r=r.tagName)===null||r===void 0?void 0:r.toUpperCase())!==n.toUpperCase()?[!1,{type:gs,reason:"Invalid element type",errorCode:Fe.STREAM_MISMATCH_RENDER_ELEMENT}]:[!0,i]}function $Se(e){const{share:{isRemoteSharingActive:n,isSimultaneousShareView:r}}=e;return n||r?Di(!0):si(ZP).pipe(Gt((i=>{const{isActive:l}=i;return l})),Ys(1),Kn((()=>!0)))}var USe,jSe,u2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function SQ(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var U$e=(jSe||(jSe=1,USe=function(e,n,r,i,l,f,h,v){if(!e){var y;if(n===void 0)y=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var _=[r,i,l,f,h,v],A=0;(y=new Error(n.replace(/%s/g,(function(){return _[A++]})))).name="Invariant Violation"}throw y.framesToPop=1,y}}),USe),YP=SQ(U$e),A2=function(e){return typeof e=="function"},zSe=function(e){return e.toString()},Lfe=function(e){return typeof e=="string"},AY="||",T2=function(e){return e},WSe=function(e){return e===null};function ga(e,n,r){n===void 0&&(n=T2),YP(A2(n)||WSe(n),"Expected payloadCreator to be a function, undefined or null");var i=WSe(n)||n===T2?T2:function(v){for(var y=arguments.length,_=new Array(y>1?y-1:0),A=1;A<y;A++)_[A-1]=arguments[A];return v instanceof Error?v:n.apply(void 0,[v].concat(_))},l=A2(r),f=e.toString(),h=function(){var v=i.apply(void 0,arguments),y={type:e};return v instanceof Error&&(y.error=!0),v!==void 0&&(y.payload=v),l&&(y.meta=r.apply(void 0,arguments)),y};return h.toString=function(){return f},h}var Bfe,GSe,qSe,KSe,ZSe,YSe,EL=function(e){if(typeof e!="object"||e===null)return!1;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n},JSe=function(e){return Array.isArray(e)},uDe=function(e){return e==null},XSe=SQ((function(){if(YSe)return ZSe;YSe=1;var e=(function(){if(KSe)return qSe;KSe=1;var n=(function(){if(GSe)return Bfe;GSe=1,Bfe=function(v){return r.test(v)?v.toLowerCase():i.test(v)?((function(y){return y.replace(f,(function(_,A){return A?" "+A:""}))})(v)||v).toLowerCase():l.test(v)?(function(y){return y.replace(h,(function(_,A,R){return A+" "+R.toLowerCase().split("").join(" ")}))})(v).toLowerCase():v.toLowerCase()};var r=/\s/,i=/(_|-|\.|:)/,l=/([a-z][A-Z]|[A-Z][a-z])/,f=/[\W_]+(.|$)/g,h=/(.)([A-Z]+)/g;return Bfe})();return qSe=function(r){return n(r).replace(/[\W_]+(.|$)/g,(function(i,l){return l?" "+l:""})).trim()}})();return ZSe=function(n){return e(n).replace(/\s(\w)/g,(function(r,i){return i.toUpperCase()}))}})()),dDe=function(e){return e.indexOf("/")===-1?XSe(e):e.split("/").map(XSe).join("/")},ame=function(e,n){return e.reduce((function(r,i){return n(r,i)}),{})},CQ=function(e){return typeof Map<"u"&&e instanceof Map};function hbe(e){if(CQ(e))return Array.from(e.keys());if(typeof Reflect<"u"&&typeof Reflect.ownKeys=="function")return Reflect.ownKeys(e);var n=Object.getOwnPropertyNames(e);return typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e))),n}function fDe(e,n){return CQ(n)?n.get(e):n[e]}var pDe=function(e){return function n(r,i,l,f){var h=i===void 0?{}:i,v=h.namespace,y=v===void 0?"/":v,_=h.prefix;return l===void 0&&(l={}),f===void 0&&(f=""),hbe(r).forEach((function(A){var R=(function(N){return f||!_||_&&new RegExp("^"+_+y).test(N)?N:""+_+y+N})((function(N){var L;if(!f)return N;var B=N.toString().split(AY),H=f.split(AY);return(L=[]).concat.apply(L,H.map((function(q){return B.map((function(Y){return""+q+y+Y}))}))).join(AY)})(A)),k=fDe(A,r);e(k)?n(k,{namespace:y,prefix:_},l,R):l[R]=k})),l}},j$e=pDe(EL);function eX(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter((function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})))),i.forEach((function(l){z$e(e,l,r[l])}))}return e}function z$e(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function Ql(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var l,f=EL((l=r)[l.length-1])?r.pop():{};return YP(r.every(Lfe)&&(Lfe(e)||EL(e)),"Expected optional object followed by string action types"),Lfe(e)?QSe([e].concat(r),f):eX({},(function(h,v){return(function(y,_){var A=_===void 0?{}:_,R=A.namespace,k=R===void 0?"/":R,N=A.prefix;function L(H,q,Y){var K=dDe(Y.shift());Y.length===0?q[K]=y[H]:(q[K]||(q[K]={}),L(H,q[K],Y))}var B={};return Object.getOwnPropertyNames(y).forEach((function(H){var q=N?H.replace(""+N+k,""):H;return L(H,B,q.split(k))})),B})(hDe(j$e(h,v)),v)})(e,f),QSe(r,f))}function hDe(e,n){var r=n===void 0?{}:n,i=r.prefix,l=r.namespace,f=l===void 0?"/":l;return ame(Object.keys(e),(function(h,v){var y,_=e[v];YP((function(k){if(A2(k)||uDe(k))return!0;if(JSe(k)){var N=k[0],L=N===void 0?T2:N,B=k[1];return A2(L)&&A2(B)}return!1})(_),"Expected function, undefined, null, or array with payload and meta functions for "+v);var A=i?""+i+f+v:v,R=JSe(_)?ga.apply(void 0,[A].concat(_)):ga(A,_);return eX({},h,((y={})[v]=R,y))}))}function QSe(e,n){var r=hDe(ame(e,(function(i,l){var f;return eX({},i,((f={})[l]=T2,f))})),n);return ame(Object.keys(r),(function(i,l){var f;return eX({},i,((f={})[dDe(l)]=r[l],f))}))}var W$e=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=typeof n[n.length-1]!="function"&&n.pop(),l=n;if(i===void 0)throw new TypeError("The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.");return function(f,h){for(var v=arguments.length,y=Array(v>2?v-2:0),_=2;_<v;_++)y[_-2]=arguments[_];var A=f===void 0,R=h===void 0;return A&&R&&i?i:l.reduce((function(k,N){return N.apply(void 0,[k,h].concat(y))}),A&&!R&&i?i:f)}},G$e=pDe((function(e){return(EL(e)||CQ(e))&&!(function(n){var r=hbe(n),i=r.every((function(l){return l==="next"||l==="throw"}));return r.length&&r.length<=2&&i})(e)}));function op(e,n,r){r===void 0&&(r={}),YP(EL(e)||CQ(e),"Expected handlers to be a plain object.");var i=G$e(e,r),l=hbe(i).map((function(h){return(function(v,y,_){y===void 0&&(y=T2);var A=zSe(v).split(AY);YP(_!==void 0,"defaultState for reducer handling "+A.join(", ")+" should be defined"),YP(A2(y)||EL(y),"Expected reducer to be a function or object with next and throw reducers");var R=A2(y)?[y,y]:[y.next,y.throw].map((function(L){return uDe(L)?T2:L})),k=R[0],N=R[1];return function(L,B){L===void 0&&(L=_);var H=B.type;return H&&A.indexOf(zSe(H))!==-1?(B.error===!0?N:k)(L,B):L}})(h,fDe(h,i),n)})),f=W$e.apply(void 0,l.concat([n]));return function(h,v){return h===void 0&&(h=n),f(h,v)}}const cme=ga("SCREENSHOT_VIDEO_NOTIFICATION"),{setVideoSsrc:mDe,setActiveVideoId:gDe,setCameraList:mbe,setActiveCamera:_L,setIsCurrentUserStartedVideo:vDe,setSpotlightVideo:lme,setIsCaptureForbidden:tX,setVideoMaxQuality:bDe,setIsVideoMuted:yDe,setIsCaptureCameraLoading:NP,setIsCameraTaken:nX,resetVideo:SDe,setReceivedVideoDimension:CDe,addSubscribedVideoId:oX,removeSubscribedVideoId:TY,setIsFollowHostVideoLayout:EDe,setHostDragLayout:_De,addRenderedVideoId:O2,removeRenderedVideoId:sX,setIsSupportHdVideo:wDe,setIsCanUnmuteVideo:ADe,setIsVbPreloadReady:ume,setIsVbConfiged:rX,setVbImageSrc:OY,setVideoDataEncoding:iX,setVideoDataDecoding:aX,setHardwareAccelerationState:TP,setVideoCaptureCustomizedOption:TDe,setNetworkQuality:dme,setVideoCameraPtzCapabilities:ODe,setIsCurrentUserRequestCameraControlled:cX,setIsCurrentUserCameraInControl:lX,addVideoFarEndCameraControlUser:IDe,removeVideoFarEndCameraControlUser:uX,setVideoPtzCameraMoving:fme,setVideoPtzCameraValue:gbe,setIsControllingFarEndCamera:pme,setNetworkQualityBroadcastTime:RDe,setIsMaskConfiged:dX,setVideoBackgroundMode:hme,setVideoMask:IY,setVideoCapturedDimension:xDe,addVideoRenderedEnsuredCanvas:DDe,setVideoMediaPlaybackFile:mme,setPrefetchedVideoUser:JP,setVideoQosSubscriptionStatus:gme,setMiniRwgOptionValue:kDe,addVideoPlayerAttachment:vbe,removeVideoPlayerAttachment:RY,setIsWebGl2RendererType:MDe,setIsWebGpuRendererType:NDe,setVideoRendererType:PDe,setIsVideoMirrored:LDe,addSelfPreviewVideoTag:BDe,removeSelfPreviewVideoTag:bbe,setVideoLeadershipUserId:VDe,setIsWebrtcVideoCapable:ybe,removeCustomVideoConstraints:HDe}=Ql("SET_VIDEO_SSRC","SET_ACTIVE_VIDEO_ID","SET_CAMERA_LIST","SET_ACTIVE_CAMERA","SET_IS_CURRENT_USER_STARTED_VIDEO","SET_SPOTLIGHT_VIDEO","SET_IS_CAPTURE_FORBIDDEN","SET_VIDEO_MAX_QUALITY","SET_IS_VIDEO_MUTED","SET_IS_CAPTURE_CAMERA_LOADING","SET_IS_CAMERA_TAKEN","RESET_VIDEO","SET_RECEIVED_VIDEO_DIMENSION","ADD_SUBSCRIBED_VIDEO_ID","REMOVE_SUBSCRIBED_VIDEO_ID","SET_IS_FOLLOW_HOST_VIDEO_LAYOUT","SET_HOST_DRAG_LAYOUT","ADD_RENDERED_VIDEO_ID","REMOVE_RENDERED_VIDEO_ID","SET_IS_SUPPORT_HD_VIDEO","SET_IS_CAN_UNMUTE_VIDEO","SET_IS_VB_PRELOAD_READY","SET_IS_VB_CONFIGED","SET_VB_IMAGE_SRC","SET_VIDEO_DATA_ENCODING","SET_VIDEO_DATA_DECODING","SET_HARDWARE_ACCELERATION_STATE","SET_VIDEO_CAPTURE_CUSTOMIZED_OPTION","SET_NETWORK_QUALITY","SET_VIDEO_CAMERA_PTZ_CAPABILITIES","SET_IS_CURRENT_USER_REQUEST_CAMERA_CONTROLLED","SET_IS_CURRENT_USER_CAMERA_IN_CONTROL","ADD_VIDEO_FAR_END_CAMERA_CONTROL_USER","REMOVE_VIDEO_FAR_END_CAMERA_CONTROL_USER","SET_VIDEO_PTZ_CAMERA_MOVING","SET_VIDEO_PTZ_CAMERA_VALUE","SET_IS_CONTROLLING_FAR_END_CAMERA","SET_NETWORK_QUALITY_BROADCAST_TIME","SET_IS_MASK_CONFIGED","SET_VIDEO_BACKGROUND_MODE","SET_VIDEO_MASK","SET_VIDEO_CAPTURED_DIMENSION","ADD_VIDEO_RENDERED_ENSURED_CANVAS","SET_VIDEO_MEDIA_PLAYBACK_FILE","SET_PREFETCHED_VIDEO_USER","SET_VIDEO_QOS_SUBSCRIPTION_STATUS","SET_MINI_RWG_OPTION_VALUE","ADD_VIDEO_PLAYER_ATTACHMENT","REMOVE_VIDEO_PLAYER_ATTACHMENT","SET_IS_WEB_GL2_RENDERER_TYPE","SET_IS_WEB_GPU_RENDERER_TYPE","SET_VIDEO_RENDERER_TYPE","SET_IS_VIDEO_MIRRORED","ADD_SELF_PREVIEW_VIDEO_TAG","REMOVE_SELF_PREVIEW_VIDEO_TAG","SET_VIDEO_LEADERSHIP_USER_ID","SET_IS_WEBRTC_VIDEO_CAPABLE","REMOVE_CUSTOM_VIDEO_CONSTRAINTS");var FDe=typeof global=="object"&&global&&global.Object===Object&&global,q$e=typeof self=="object"&&self&&self.Object===Object&&self,$1=FDe||q$e||Function("return this")(),YA=$1.Symbol,$De=Object.prototype,K$e=$De.hasOwnProperty,Z$e=$De.toString,mU=YA?YA.toStringTag:void 0,Y$e=Object.prototype.toString,eCe=YA?YA.toStringTag:void 0;function KL(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":eCe&&eCe in Object(e)?(function(n){var r=K$e.call(n,mU),i=n[mU];try{n[mU]=void 0;var l=!0}catch{}var f=Z$e.call(n);return l&&(r?n[mU]=i:delete n[mU]),f})(e):(function(n){return Y$e.call(n)})(e)}function wL(e){return e!=null&&typeof e=="object"}function UDe(e){return typeof e=="symbol"||wL(e)&&KL(e)=="[object Symbol]"}var AL=Array.isArray,tCe=YA?YA.prototype:void 0,nCe=tCe?tCe.toString:void 0;function jDe(e){if(typeof e=="string")return e;if(AL(e))return(function(r,i){for(var l=-1,f=r==null?0:r.length,h=Array(f);++l<f;)h[l]=i(r[l],l,r);return h})(e,jDe)+"";if(UDe(e))return nCe?nCe.call(e):"";var n=e+"";return n=="0"&&1/e==-1/0?"-0":n}var J$e=/\s/,X$e=/^\s+/;function R5(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var Q$e=/^[-+]0x[0-9a-f]+$/i,eUe=/^0b[01]+$/i,tUe=/^0o[0-7]+$/i,nUe=parseInt;function oCe(e){if(typeof e=="number")return e;if(UDe(e))return NaN;if(R5(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=R5(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=(function(i){return i&&i.slice(0,(function(l){for(var f=l.length;f--&&J$e.test(l.charAt(f)););return f})(i)+1).replace(X$e,"")})(e);var r=eUe.test(e);return r||tUe.test(e)?nUe(e.slice(2),r?2:8):Q$e.test(e)?NaN:+e}function zDe(e){if(!R5(e))return!1;var n=KL(e);return n=="[object Function]"||n=="[object GeneratorFunction]"||n=="[object AsyncFunction]"||n=="[object Proxy]"}var sCe,Vfe=$1["__core-js_shared__"],rCe=(sCe=/[^.]+$/.exec(Vfe&&Vfe.keys&&Vfe.keys.IE_PROTO||""))?"Symbol(src)_1."+sCe:"",oUe=Function.prototype.toString;function J2(e){if(e!=null){try{return oUe.call(e)}catch{}try{return e+""}catch{}}return""}var sUe=/^\[object .+?Constructor\]$/,rUe=Function.prototype,iUe=Object.prototype,aUe=rUe.toString,cUe=iUe.hasOwnProperty,lUe=RegExp("^"+aUe.call(cUe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ZL(e,n){var r=(function(i,l){return i==null?void 0:i[l]})(e,n);return(function(i){return!(!R5(i)||(l=i,rCe&&rCe in l))&&(zDe(i)?lUe:sUe).test(J2(i));var l})(r)?r:void 0}var vme=ZL($1,"WeakMap"),uUe=/^(?:0|[1-9]\d*)$/;function dUe(e,n){var r=typeof e;return!!(n=n??9007199254740991)&&(r=="number"||r!="symbol"&&uUe.test(e))&&e>-1&&e%1==0&&e<n}function WDe(e,n){return e===n||e!=e&&n!=n}function GDe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991}function qDe(e){return e!=null&&GDe(e.length)&&!zDe(e)}var fUe=Object.prototype;function KDe(e){var n=e&&e.constructor;return e===(typeof n=="function"&&n.prototype||fUe)}function iCe(e){return wL(e)&&KL(e)=="[object Arguments]"}var ZDe=Object.prototype,pUe=ZDe.hasOwnProperty,hUe=ZDe.propertyIsEnumerable,YDe=iCe((function(){return arguments})())?iCe:function(e){return wL(e)&&pUe.call(e,"callee")&&!hUe.call(e,"callee")},JDe=typeof nE=="object"&&nE&&!nE.nodeType&&nE,aCe=JDe&&typeof oE=="object"&&oE&&!oE.nodeType&&oE,cCe=aCe&&aCe.exports===JDe?$1.Buffer:void 0,fX=(cCe?cCe.isBuffer:void 0)||function(){return!1},Lc={};Lc["[object Float32Array]"]=Lc["[object Float64Array]"]=Lc["[object Int8Array]"]=Lc["[object Int16Array]"]=Lc["[object Int32Array]"]=Lc["[object Uint8Array]"]=Lc["[object Uint8ClampedArray]"]=Lc["[object Uint16Array]"]=Lc["[object Uint32Array]"]=!0,Lc["[object Arguments]"]=Lc["[object Array]"]=Lc["[object ArrayBuffer]"]=Lc["[object Boolean]"]=Lc["[object DataView]"]=Lc["[object Date]"]=Lc["[object Error]"]=Lc["[object Function]"]=Lc["[object Map]"]=Lc["[object Number]"]=Lc["[object Object]"]=Lc["[object RegExp]"]=Lc["[object Set]"]=Lc["[object String]"]=Lc["[object WeakMap]"]=!1;var lCe,XDe=typeof nE=="object"&&nE&&!nE.nodeType&&nE,n5=XDe&&typeof oE=="object"&&oE&&!oE.nodeType&&oE,Hfe=n5&&n5.exports===XDe&&FDe.process,uCe=(function(){try{return n5&&n5.require&&n5.require("util").types||Hfe&&Hfe.binding&&Hfe.binding("util")}catch{}})(),dCe=uCe&&uCe.isTypedArray,Sbe=dCe?(lCe=dCe,function(e){return lCe(e)}):function(e){return wL(e)&&GDe(e.length)&&!!Lc[KL(e)]},mUe=Object.prototype.hasOwnProperty,gUe=(function(e,n){return function(r){return e(n(r))}})(Object.keys,Object),vUe=Object.prototype.hasOwnProperty;function QDe(e){if(!KDe(e))return gUe(e);var n=[];for(var r in Object(e))vUe.call(e,r)&&r!="constructor"&&n.push(r);return n}function bUe(e){return qDe(e)?(function(n){var r=AL(n),i=!r&&YDe(n),l=!r&&!i&&fX(n),f=!r&&!i&&!l&&Sbe(n),h=r||i||l||f,v=h?(function(A,R){for(var k=-1,N=Array(A);++k<A;)N[k]=R(k);return N})(n.length,String):[],y=v.length;for(var _ in n)!mUe.call(n,_)||h&&(_=="length"||l&&(_=="offset"||_=="parent")||f&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||dUe(_,y))||v.push(_);return v})(e):QDe(e)}var gU=ZL(Object,"create"),yUe=Object.prototype.hasOwnProperty,SUe=Object.prototype.hasOwnProperty;function e2(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var i=e[n];this.set(i[0],i[1])}}function LZ(e,n){for(var r=e.length;r--;)if(WDe(e[r][0],n))return r;return-1}e2.prototype.clear=function(){this.__data__=gU?gU(null):{},this.size=0},e2.prototype.delete=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},e2.prototype.get=function(e){var n=this.__data__;if(gU){var r=n[e];return r==="__lodash_hash_undefined__"?void 0:r}return yUe.call(n,e)?n[e]:void 0},e2.prototype.has=function(e){var n=this.__data__;return gU?n[e]!==void 0:SUe.call(n,e)},e2.prototype.set=function(e,n){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=gU&&n===void 0?"__lodash_hash_undefined__":n,this};var CUe=Array.prototype.splice;function XC(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var i=e[n];this.set(i[0],i[1])}}XC.prototype.clear=function(){this.__data__=[],this.size=0},XC.prototype.delete=function(e){var n=this.__data__,r=LZ(n,e);return!(r<0||(r==n.length-1?n.pop():CUe.call(n,r,1),--this.size,0))},XC.prototype.get=function(e){var n=this.__data__,r=LZ(n,e);return r<0?void 0:n[r][1]},XC.prototype.has=function(e){return LZ(this.__data__,e)>-1},XC.prototype.set=function(e,n){var r=this.__data__,i=LZ(r,e);return i<0?(++this.size,r.push([e,n])):r[i][1]=n,this};var x5=ZL($1,"Map");function BZ(e,n){var r,i,l=e.__data__;return((i=typeof(r=n))=="string"||i=="number"||i=="symbol"||i=="boolean"?r!=="__proto__":r===null)?l[typeof n=="string"?"string":"hash"]:l.map}function t2(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var i=e[n];this.set(i[0],i[1])}}function eke(e){return e==null?"":jDe(e)}t2.prototype.clear=function(){this.size=0,this.__data__={hash:new e2,map:new(x5||XC),string:new e2}},t2.prototype.delete=function(e){var n=BZ(this,e).delete(e);return this.size-=n?1:0,n},t2.prototype.get=function(e){return BZ(this,e).get(e)},t2.prototype.has=function(e){return BZ(this,e).has(e)},t2.prototype.set=function(e,n){var r=BZ(this,e),i=r.size;return r.set(e,n),this.size+=r.size==i?0:1,this};var EUe=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function fCe(e){return EUe.test(e)}var tke="\\ud800-\\udfff",_Ue="["+tke+"]",bme="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",yme="\\ud83c[\\udffb-\\udfff]",nke="[^"+tke+"]",oke="(?:\\ud83c[\\udde6-\\uddff]){2}",ske="[\\ud800-\\udbff][\\udc00-\\udfff]",pCe="(?:"+bme+"|"+yme+")?",hCe="[\\ufe0e\\ufe0f]?",wUe=hCe+pCe+"(?:\\u200d(?:"+[nke,oke,ske].join("|")+")"+hCe+pCe+")*",AUe="(?:"+[nke+bme+"?",bme,oke,ske,_Ue].join("|")+")",TUe=RegExp(yme+"(?="+yme+")|"+AUe+wUe,"g"),OUe=function(e){var n=fCe(e=eke(e))?(function(l){return fCe(l)?(function(f){return f.match(TUe)||[]})(l):(function(f){return f.split("")})(l)})(e):void 0,r=n?n[0]:e.charAt(0),i=n?(function(l,f,h){var v=l.length;return h=h===void 0?v:h,!f&&h>=v?l:(function(y,_,A){var R=-1,k=y.length;_<0&&(_=-_>k?0:k+_),(A=A>k?k:A)<0&&(A+=k),k=_>A?0:A-_>>>0,_>>>=0;for(var N=Array(k);++R<k;)N[R]=y[R+_];return N})(l,f,h)})(n,1).join(""):e.slice(1);return r.toUpperCase()+i};function AA(e){var n=this.__data__=new XC(e);this.size=n.size}AA.prototype.clear=function(){this.__data__=new XC,this.size=0},AA.prototype.delete=function(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r},AA.prototype.get=function(e){return this.__data__.get(e)},AA.prototype.has=function(e){return this.__data__.has(e)},AA.prototype.set=function(e,n){var r=this.__data__;if(r instanceof XC){var i=r.__data__;if(!x5||i.length<199)return i.push([e,n]),this.size=++r.size,this;r=this.__data__=new t2(i)}return r.set(e,n),this.size=r.size,this};var IUe=Object.prototype.propertyIsEnumerable,mCe=Object.getOwnPropertySymbols,RUe=mCe?function(e){return e==null?[]:(e=Object(e),(function(n,r){for(var i=-1,l=n==null?0:n.length,f=0,h=[];++i<l;){var v=n[i];r(v)&&(h[f++]=v)}return h})(mCe(e),(function(n){return IUe.call(e,n)})))}:function(){return[]};function gCe(e){return(function(n,r,i){var l=bUe(n);return AL(n)?l:(function(f,h){for(var v=-1,y=h.length,_=f.length;++v<y;)f[_+v]=h[v];return f})(l,i(n))})(e,0,RUe)}var Sme=ZL($1,"DataView"),Cme=ZL($1,"Promise"),Eme=ZL($1,"Set"),vCe="[object Map]",bCe="[object Promise]",yCe="[object Set]",SCe="[object WeakMap]",CCe="[object DataView]",xUe=J2(Sme),DUe=J2(x5),kUe=J2(Cme),MUe=J2(Eme),NUe=J2(vme),KC=KL;(Sme&&KC(new Sme(new ArrayBuffer(1)))!=CCe||x5&&KC(new x5)!=vCe||Cme&&KC(Cme.resolve())!=bCe||Eme&&KC(new Eme)!=yCe||vme&&KC(new vme)!=SCe)&&(KC=function(e){var n=KL(e),r=n=="[object Object]"?e.constructor:void 0,i=r?J2(r):"";if(i)switch(i){case xUe:return CCe;case DUe:return vCe;case kUe:return bCe;case MUe:return yCe;case NUe:return SCe}return n});var ECe=$1.Uint8Array;function xY(e){var n=-1,r=e==null?0:e.length;for(this.__data__=new t2;++n<r;)this.add(e[n])}function PUe(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}function _Ce(e,n,r,i,l,f){var h=1&r,v=e.length,y=n.length;if(v!=y&&!(h&&y>v))return!1;var _=f.get(e),A=f.get(n);if(_&&A)return _==n&&A==e;var R=-1,k=!0,N=2&r?new xY:void 0;for(f.set(e,n),f.set(n,e);++R<v;){var L=e[R],B=n[R];if(i)var H=h?i(B,L,R,n,e,f):i(L,B,R,e,n,f);if(H!==void 0){if(H)continue;k=!1;break}if(N){if(!PUe(n,(function(q,Y){if(K=Y,!N.has(K)&&(L===q||l(L,q,r,i,f)))return N.push(Y);var K}))){k=!1;break}}else if(L!==B&&!l(L,B,r,i,f)){k=!1;break}}return f.delete(e),f.delete(n),k}function LUe(e){var n=-1,r=Array(e.size);return e.forEach((function(i,l){r[++n]=[l,i]})),r}function BUe(e){var n=-1,r=Array(e.size);return e.forEach((function(i){r[++n]=i})),r}xY.prototype.add=xY.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},xY.prototype.has=function(e){return this.__data__.has(e)};var wCe=YA?YA.prototype:void 0,Ffe=wCe?wCe.valueOf:void 0,VUe=Object.prototype.hasOwnProperty,ACe="[object Arguments]",TCe="[object Array]",VZ="[object Object]",OCe=Object.prototype.hasOwnProperty;function rke(e,n,r,i,l){return e===n||(e==null||n==null||!wL(e)&&!wL(n)?e!=e&&n!=n:(function(f,h,v,y,_,A){var R=AL(f),k=AL(h),N=R?TCe:KC(f),L=k?TCe:KC(h),B=(N=N==ACe?VZ:N)==VZ,H=(L=L==ACe?VZ:L)==VZ,q=N==L;if(q&&fX(f)){if(!fX(h))return!1;R=!0,B=!1}if(q&&!B)return A||(A=new AA),R||Sbe(f)?_Ce(f,h,v,y,_,A):(function(le,M,we,Ne,De,be,me){switch(we){case"[object DataView]":if(le.byteLength!=M.byteLength||le.byteOffset!=M.byteOffset)return!1;le=le.buffer,M=M.buffer;case"[object ArrayBuffer]":return!(le.byteLength!=M.byteLength||!be(new ECe(le),new ECe(M)));case"[object Boolean]":case"[object Date]":case"[object Number]":return WDe(+le,+M);case"[object Error]":return le.name==M.name&&le.message==M.message;case"[object RegExp]":case"[object String]":return le==M+"";case"[object Map]":var Ye=LUe;case"[object Set]":var Ke=1&Ne;if(Ye||(Ye=BUe),le.size!=M.size&&!Ke)return!1;var Ze=me.get(le);if(Ze)return Ze==M;Ne|=2,me.set(le,M);var z=_Ce(Ye(le),Ye(M),Ne,De,be,me);return me.delete(le),z;case"[object Symbol]":if(Ffe)return Ffe.call(le)==Ffe.call(M)}return!1})(f,h,N,v,y,_,A);if(!(1&v)){var Y=B&&OCe.call(f,"__wrapped__"),K=H&&OCe.call(h,"__wrapped__");if(Y||K){var se=Y?f.value():f,ie=K?h.value():h;return A||(A=new AA),_(se,ie,v,y,A)}}return!!q&&(A||(A=new AA),(function(le,M,we,Ne,De,be){var me=1&we,Ye=gCe(le),Ke=Ye.length;if(Ke!=gCe(M).length&&!me)return!1;for(var Ze=Ke;Ze--;){var z=Ye[Ze];if(!(me?z in M:VUe.call(M,z)))return!1}var $t=be.get(le),Be=be.get(M);if($t&&Be)return $t==M&&Be==le;var at=!0;be.set(le,M),be.set(M,le);for(var lt=me;++Ze<Ke;){var $e=le[z=Ye[Ze]],qt=M[z];if(Ne)var io=me?Ne(qt,$e,z,M,le,be):Ne($e,qt,z,le,M,be);if(!(io===void 0?$e===qt||De($e,qt,we,Ne,be):io)){at=!1;break}lt||(lt=z=="constructor")}if(at&&!lt){var En=le.constructor,Zn=M.constructor;En==Zn||!("constructor"in le)||!("constructor"in M)||typeof En=="function"&&En instanceof En&&typeof Zn=="function"&&Zn instanceof Zn||(at=!1)}return be.delete(le),be.delete(M),at})(f,h,v,y,_,A))})(e,n,r,i,rke,l))}var $fe=function(){return $1.Date.now()},HUe=Math.max,FUe=Math.min,$Ue=Object.prototype.hasOwnProperty;class qp{constructor(){this.audioPlaybackUrl=void 0,this.videoPlaybackUrl=void 0,this._audioElement=void 0,this._videoElement=void 0,this.videoSrc=void 0,this.isUsingSameFile=void 0}static getInstance(){return this.instance===void 0&&(this.instance=new qp),this.instance}static destroyInstance(){if(this.instance){this.instance.stopAudioElement(),this.instance.stopVideoElement();const r=document.getElementById(wfe);var n;r&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),this.instance=void 0}}setAudioElement(n){return this._audioElement===void 0&&(this._audioElement=new Audio),new Promise(((r,i)=>{if(this.videoSrc===n.url)this._audioElement.pause(),this.isUsingSameFile=!0,this._videoElement.muted=!1,(f=this._videoElement).currentTime>0&&!f.paused&&!f.ended&&f.readyState>2?r(""):this._videoElement.play().then((()=>{r("")})).catch((()=>{i()}));else{var l;this.isUsingSameFile=!1;const h=bo.isFirefox?"canplay":"canplaythrough",v=()=>{this._audioElement.play().then((()=>{this._audioElement.removeEventListener(h,v),r("")}))},y=()=>{this._audioElement.removeEventListener(h,v),this._audioElement.removeEventListener("error",y),i()};this._audioElement.addEventListener(h,v),this._audioElement.addEventListener("error",y),this._audioElement.src=n.url,this._audioElement.loop=!!n.loop,og(n.url)&&this._audioElement.setAttribute("crossorigin",""),this._audioElement.currentTime=Math.max((l=n.currentTime)!==null&&l!==void 0?l:0,1e-4),bo.isIOSMobile&&this._audioElement.load()}var f}))}setVideoElement(n){const{isFirefox:r,isSafari:i,isIOSMobile:l}=bo;return this._videoElement===void 0&&(this._videoElement=document.createElement("video")),new Promise(((f,h)=>{var v;this.videoSrc=n.url;const y=r?"canplay":"canplaythrough",_=()=>{this._videoElement.play().then((()=>{this._videoElement.removeEventListener(y,_),f("")}))},A=()=>{this._videoElement.removeEventListener(y,_),this._videoElement.removeEventListener("error",A),h()};this._videoElement.addEventListener(y,_),this._videoElement.addEventListener("error",A),this._videoElement.src=n.url,this.isUsingSameFile||(this._videoElement.muted=!0),this._videoElement.loop=!!n.loop,this._videoElement.currentTime=Math.max((v=n.currentTime)!==null&&v!==void 0?v:0,1e-4),this._videoElement.playsInline=!0,og(n.url)&&this._videoElement.setAttribute("crossorigin",""),i&&!document.getElementById(wfe)&&(this._videoElement.id=wfe,this._videoElement.setAttribute("style","position:fixed;top:-10000px;left:-10000px"),document.body.appendChild(this._videoElement)),(l||i)&&this._videoElement.load()}))}get audioElement(){return this.isUsingSameFile?this._videoElement:this._audioElement}get videoElement(){return this._videoElement}stopAudioElement(){this.isUsingSameFile?this.isUsingSameFile=!1:this._audioElement&&(this._audioElement.currentTime=0,this._audioElement.pause())}stopVideoElement(){this._videoElement&&this._videoElement.pause(),this.videoSrc=void 0}}qp.instance=void 0;const ICe=e=>4294966272&e,Ufe=e=>{let n={R:0,G:0,B:0,A:0};if(typeof e=="string"&&e.startsWith("#")){const v=e.slice(1);try{if(v.length===3){const y=Array.from(v).map((_=>_.repeat(2))).map((_=>parseInt(_,16)));n={R:y[0]/255,G:y[1]/255,B:y[2]/255,A:1}}else if(v.length===6||v.length===8){var r,i,l,f,h;const y=(r=v.match(/\S{2}/g))===null||r===void 0?void 0:r.map((_=>parseInt(_,16)));n={R:((i=y==null?void 0:y[0])!==null&&i!==void 0?i:0)/255,G:((l=y==null?void 0:y[1])!==null&&l!==void 0?l:0)/255,B:((f=y==null?void 0:y[2])!==null&&f!==void 0?f:0)/255,A:y!=null&&y[3]?((h=y==null?void 0:y[3])!==null&&h!==void 0?h:0)/255:1}}}catch{console.warn("error color representation:",e)}}else typeof e=="object"&&(n={R:e.R/255,G:e.G/255,B:e.B/255,A:e.A||1});return n};function EQ(e){let{captureWidth:n=0,captureHeight:r=0}=e||{};const{hd:i}=e||{};var l,f;return n!==0&&r!==0||(i&&Yo.isSupportSending720P()?(n=1280,r=720):(n=640,r=360)),{captureWidth:n,captureHeight:r,isCustomizedResolution:!(e==null||!e.captureWidth||!e.captureHeight||(l=n,f=r,Math.abs(Math.floor(l/f*10)-Math.floor(16/9*10))<=1))}}function ike(e,n){return e==="default"||n.some((r=>r.deviceId===e))||[i2.Environment,i2.User,i2.Left,i2.Right].includes(e)}function Cbe(e,n){if(typeof DOMMatrixReadOnly=="function"){if(e.dataset.mirrored==="1"===n)return;const r=new DOMMatrixReadOnly(getComputedStyle(e).transform).scale(-1,1).toString();e.style.transform=r,e.dataset.mirrored=n?"1":"0"}}function ake(e,n,r){const i=[],{video:{videoSsrc:l,activeCamera:f},meeting:{mediaFeatureOptions:h}}=n,{cameraId:v=f,videoElement:y,originalRatio:_,ptz:A,hd:R,fullHd:k,mediaFile:N,fps:L,mirrored:B,customVideoConstraints:H}=r||{};let q;if(y!==void 0){let M=sE(y)?y:null;if(typeof y=="string"){let[we,Ne]=[document.body,y];if(y.indexOf(">")>-1){const[De,be]=y.split(">");we=document.querySelector(De),Ne=be}we&&(M=we.querySelector(Ne))}if(!M)return[];q=M,M.id||(M.id=rE("__ZOOM_SDK_SELF_VIDEO_@__")),B!==void 0&&Cbe(M,B)}let Y=L??Tfe.Default;Y=Math.max(Tfe.Min,Y),Y=Math.min(Tfe.Max,Y);const{captureWidth:K,captureHeight:se,isCustomizedResolution:ie}=EQ(r);if(ie)e.updateVideoHDValue(!1);else{e.updateVideoHDValue(!!R||!!k);const M=!!k&&Yo.isSupportFullHDVideo(h||"");e.updateVideoFullhdValue(M)}let le=Promise.resolve(v);if(N&&N.url){const M=qp.getInstance();le=M.setVideoElement(N).then((()=>M.videoElement))}else qp.getInstance().stopVideoElement();return le.then((M=>{e.startCaptureVideo(l,M,K,se,q,bo.isAndroidOrIOSBrowser&&o6.includes(M),!_&&(function(){var we,Ne;const{isAndroidOrIOSBrowser:De,isFirefox:be,isSafari:me}=bo;return De||!((we=navigator.mediaDevices)!==null&&we!==void 0&&(Ne=we.getSupportedConstraints)!==null&&Ne!==void 0&&Ne.call(we).aspectRatio)||be||me||URe()})(),A,L!==void 0?Y:void 0,H)})),i.push(TDe({cameraId:v,captureWidth:K,captureHeight:se,videoElement:typeof y=="string"?y:sE(y)?nDe(y):void 0,originalRatio:_,ptz:A,hd:R,fullHd:k,mediaFile:N,fps:L!==void 0?Y:void 0,mirrored:B,customVideoConstraints:H})),i}function cke(e,n,r){const{max:i,min:l,step:f}=e;let h=r/100*(i-l);f&&(h=Math.min(Math.floor(h/f)*f,Math.floor(h)));let v=n+h;return v=Math.min(i,v),v=Math.max(l,v),v}function lke(e,n){let r="",i=n;switch(e){case gA.Down:i=-n,r="tilt";break;case gA.Up:r="tilt";break;case gA.Left:i=-n,r="pan";break;case gA.Right:r="pan";break;case gA.ZoomIn:r="zoom";break;case gA.ZoomOut:i=-n,r="zoom"}return{key:r,range:i}}function Ebe(e){const n=["pan","tilt","zoom"].reduce(((r,i)=>e[i]&&e[i].value!==0?{...r,[i]:e[i].value}:r),{});return(function(r){if(r==null)return!0;if(qDe(r)&&(AL(r)||typeof r=="string"||typeof r.splice=="function"||fX(r)||Sbe(r)||YDe(r)))return!r.length;var i=KC(r);if(i=="[object Map]"||i=="[object Set]")return!r.size;if(KDe(r))return!QDe(r).length;for(var l in r)if($Ue.call(r,l))return!1;return!0})(n)?null:n}function uke(e){return{pan:(e&uP.Pan)===uP.Pan,tilt:(e&uP.Tilt)===uP.Tilt,zoom:(e&uP.Zoom)===uP.Zoom}}function d2(e){return!!e||Yo.isRenderSelfViewWithVideoElement()}function RCe(e){const{errorCode:n,type:r,...i}=e??{},l={...i};let f;return n!==void 0&&Object.assign(l,{subCode:n}),r===VJ?f=Fe.VIDEO_NO_CAMERA:r===HJ?f=Fe.VIDEO_MISMATCH_CAMERA:r===FJ?f=Fe.VIDEO_CAMERA_PERMISSION_DENIED:r===sbe?f=Fe.VIDEO_ESTABLISH_STREAM_ERROR:r===$J?f=Fe.VIDEO_CAMERA_TAKEN:r===obe&&(f=Fe.VIDEO_VB_INITIALIZE_ERROR),Object.assign(l,{errorCode:f,type:r}),l}function xCe(e,n,r){const{video:{selfPreviewVideoList:i,customizedVideoOption:l,videoAttachments:f},meeting:{userId:h}}=r;if(d2()){const v=[];i.length>0&&i.forEach((y=>{v.push(document.getElementById(y))})),l!=null&&l.videoElement&&v.push(document.querySelector(l==null?void 0:l.videoElement)),f&&f[`${h}`]&&f[`${h}`].forEach((y=>{var _;v.push(y==null||(_=y.render)===null||_===void 0?void 0:_.el)})),v.filter((y=>!!y)).forEach((y=>{y&&Cbe(y,e)}))}else n.mirrorVideo(e)}let x1,XP;async function dke(e,n,r){const i=rE(e),l=document.createElement("img");return l.src=n,l.id=i,l.style.display="none",og(n)&&l.setAttribute("crossorigin",""),await new Promise(((f,h)=>{l.onload=()=>{r&&URL.revokeObjectURL(n),f("")},l.onerror=()=>{r&&URL.revokeObjectURL(n),h("Cannot load  image.")}})),{imageId:i,imgElement:l}}async function u6(e,n,r){if(e===bL)return bL;{let i=e;if(n){const l=await(function(f){return new Promise(((h,v)=>{try{x1&&XP||(x1=document.createElement("canvas"),XP=x1.getContext("2d"));const y=x1,_=XP;if(_){_.clearRect(0,0,x1.width,x1.height);const A=new Image;A.src=f,og(f)&&(A.crossOrigin="");const R=16/9,k=1280,N=Math.floor(k/R);y.width=k,y.height=N,A.onload=()=>{const{width:L,height:B}=A,H=B*R;if(H>L){const q=L,Y=Math.floor(L/R),K=0,se=(B-Y)/2;_==null||_.drawImage(A,K,se,q,Y,0,0,k,N)}else{const q=H,Y=B,K=(L-q)/2;_.drawImage(A,K,0,q,Y,0,0,k,N)}try{y.toBlob((q=>{h(q)}))}catch(q){q instanceof DOMException&&q.code===DOMException.SECURITY_ERR&&console.error("Image is not from the same origin, add CORS header to solve this issue"),v(q)}},A.onerror=L=>{v("Cannot load  image.")}}}catch(y){v(y)}}))})(e);i=URL.createObjectURL(l)}if(i){const{imageId:l,imgElement:f}=await dke("__ZOOM_SDK_VIRTUAL_BACKGROUND_IMAGE_@__",i,!!n);return(r??document.body).appendChild(f),l}}return null}async function fke(e,n,r){var i;const l=(i=r&&r.parentNode)!==null&&i!==void 0?i:document.body,{imageUrl:f,cropped:h,rootWidth:v,rootHeight:y}=e;let _=e;!n.video.customizedVideoOption||e.captureWidth&&e.captureHeight||(_=n.video.customizedVideoOption);const{captureWidth:A,captureHeight:R}=EQ(_),k=document.createElement("div");let N;k.style.display="none",N=f?await u6(f,h,k):null;let L,B=rE("__ZOOM_SDK_VIRTUAL_BACKGROUND_CANVAS_@__");if(r)if(GL(r)){const H=QJ(r);H.id?B=H.id:H.id=B,L=H;try{v&&r.width!==v&&(r.width=v),y&&r.height!==y&&(r.height=y)}catch{console.warn("Cannot set the canvas width/height, and pay attention the canvas dimension is different from the setting")}}else r.setAttribute("node-id",B),r.setAttribute("media-type","preview"),L=r;else{const H=document.createElement("canvas");H.width=v??380,H.height=y??214,H.id=B,L=H,k.appendChild(H)}return l==null||l.appendChild(k),{captureWidth:A,captureHeight:R,imageId:N,element:L,divElement:k,id:B}}async function DCe(e,n,r,i){const l=Array.isArray(e)?e:e&&[e];if((l==null?void 0:l.length)>0){x1&&XP||(x1=document.createElement("canvas"),XP=x1.getContext("2d"));const f=x1,h=XP;if(f.width=n,f.height=r,h)try{h.fillStyle="#fff",h.clearRect(0,0,n,r);for(let y=0;y<l.length;y++){const _=l[y],{type:A,x:R,y:k}=_;if(A==="rectangle"){const{width:N,height:L}=_;h.fillRect(R,k,N,L)}else if(A==="square"){const{length:N}=_;h.fillRect(R,k,N,N)}else if(A==="circle"){const{radius:N}=_;h.beginPath(),h.arc(R,k,N,0,2*Math.PI),h.fill()}else if(A==="svg"){const{svg:N,width:L,height:B}=_,H=new Image;H.src=N,og(N)&&(H.crossOrigin=""),await new Promise(((K,se)=>{H.onload=()=>{K("")},H.onerror=()=>{se()}}));const{width:q,height:Y}=H;h.drawImage(H,0,0,q,Y,R,k,L,B)}}const v=await new Promise((y=>{f==null||f.toBlob((_=>{y(_)}))}));if(v){const y=URL.createObjectURL(v),{imageId:_,imgElement:A}=await dke("__ZOOM_SDK_MASK_CLIP_@__",y,!0);return(i??document.body).appendChild(A),_}}catch(v){v instanceof DOMException&&v.code===DOMException.SECURITY_ERR&&console.error("Image is not from the same origin, add CORS header to solve this issue")}}return null}function kCe(e,n){if(e===n||e==null&&n==null)return!0;const r=Array.isArray(e)?[...e]:[e],i=Array.isArray(n)?[...n]:[n];if(r.length!==i.length)return!1;const l=(f,h)=>f.type<h.type?-1:f.type===h.type?0:1;r.sort(l),i.sort(l);for(let f=0;f<r.length;f++)if(!l6(r[f],i[f]))return!1;return!0}function DY(e,n,r,i){const{video:{isCurrentUserStartedVideo:l,virtualBackground:{isVBPreloadReady:f,isVBConfigured:h,imageSrc:v},backgroundMode:y},meeting:{isCurrentUserStartVideoBeforeReset:_,isUseWBVideo:A}}=r;return Ra((function(R){return R!==void 0?An([R]):si(UJ,1).pipe(Kn((k=>k)))})(f)).then((R=>{if(R){if(i||!h&&e.imageUrl!==bL&&e.imageUrl){if(GL(i)){if(A)return Promise.reject({reason:"When you are in a WebRTC Video meeting, please use VideoPlayer to preview the virtual background.",errorCode:Fe.STREAM_MISMATCH_RENDER_ELEMENT});console.warn("The canvas element will be deprecated. Please use the Videoplayer element to preview the virtual background.")}return(async function(k,N,L,B){const{element:H,imageId:q,captureHeight:Y,captureWidth:K,divElement:se,id:ie}=await fke(k,L,B),{cameraId:le}=k,{video:{videoSsrc:M,activeCamera:we}}=L;return N.startVirtualBackgroundSetting(H,q,M,le??we,K,Y,void 0,ie),se})(e,n,r,i).then((k=>l?rX(!0):Ra(si(Dhe,1)).then((N=>{var L;return i||n.stopVirtualBackgroundSetting(),N?(k==null||(L=k.parentNode)===null||L===void 0||L.removeChild(k),!0):Promise.reject({reason:"Cannot access the virtual background image.",errorCode:Fe.VIDEO_VB_IMAGE_INACCESSIBLE})}))))}return v===e.imageUrl&&y===_u.VirtualBackground&&!_||(async function(k,N,L){const{imageUrl:B,cropped:H}=k;if(B){const q=await u6(B,H);q&&(L.video.backgroundMode===_u.Mask&&(N.stopMaskSetting(!0),await vQ((()=>{N.stopVirtualBackgroundSetting()}),0)),N.updateVirtualBackgroundImage(q),q!==bL&&setTimeout((()=>{C5(q)}),0))}else N.updateVirtualBackgroundImage(null)})(e,n,r)}return Promise.reject({reason:"Cannot load virtual background model.",errorCode:Fe.VIDEO_VB_MISMATCH_STATE})}))}function kY(e,n,r,i){const{video:{mask:{isMaskConfigured:l,imageSrc:f,clip:h},backgroundMode:v,isCurrentUserStartedVideo:y},meeting:{isCurrentUserStartVideoBeforeReset:_}}=r;return i||!l&&e.imageUrl?(async function(A,R,k,N){const{element:L,imageId:B,captureHeight:H,captureWidth:q,divElement:Y}=await fke(A,k,N),{cameraId:K,clip:se,rootWidth:ie=1280,rootHeight:le=720}=A,M=se?await DCe(se,ie,le,Y):null,{video:{videoSsrc:we,activeCamera:Ne}}=k;return M?(R.startMaskSetting(L,B,M,we,K??Ne,ie,le,q,H),Y):Promise.reject({reason:"Clip is empty",errorCode:Fe.VIDEO_MASK_IMAGE_INACCESSIBLE})})(e,n,r,i).then((A=>y?dX(!0):Ra(si(Lhe,1)).then((R=>{var k;return i||n.stopMaskSetting(),R?(A==null||(k=A.parentNode)===null||k===void 0||k.removeChild(A),!0):Promise.reject({reason:"Cannot set video mask",errorCode:Fe.VIDEO_MISMATCH_STATE})})))):v===_u.Mask&&e.imageUrl===f&&kCe(e.clip,h)&&!_?Promise.resolve(!0):(async function(A,R,k){const{imageUrl:N,cropped:L,clip:B,rootWidth:H,rootHeight:q}=A,{video:{mask:{imageSrc:Y,cropped:K,clip:se},backgroundMode:ie}}=k;if(N){if(ie===_u.VirtualBackground&&(R.stopVirtualBackgroundSetting(!0),await vQ((()=>{R.stopMaskSetting()}),0)),N!==Y||L!==K){const le=await u6(N,L);le&&(R.updateMaskBackgroundImage(le),setTimeout((()=>{C5(le)}),0))}if((!kCe(B,se)||!Y)&&B&&H&&q){const le=await DCe(B,H,q);le&&(R.updateMaskClip(le,H,q),setTimeout((()=>{C5(le)}),0))}}else R.updateMaskBackgroundImage(null),R.updateMaskClip(null,H,q)})(e,n,r)}var Ui,D5;(function(e){e[e.ADD_RENDER_VIDEO=1]="ADD_RENDER_VIDEO",e[e.STOP_RENDER_VIDEO=2]="STOP_RENDER_VIDEO",e[e.START_SHARING=23]="START_SHARING",e[e.STOP_SHARING=24]="STOP_SHARING",e[e.ZOOM_SHARING=140]="ZOOM_SHARING",e[e.START_SHARE_PREVIEW=37]="START_SHARE_PREVIEW",e[e.STOP_SHARE_PREVIEW=38]="STOP_SHARE_PREVIEW",e[e.SWITCH_CANVAS_FOR_VIDEO_CAPTURE=25]="SWITCH_CANVAS_FOR_VIDEO_CAPTURE",e[e.UPDATE_SHARING_DECODE_PARAM=44]="UPDATE_SHARING_DECODE_PARAM",e[e.UPDATE_CANVAS_SIZE=46]="UPDATE_CANVAS_SIZE",e[e.ZOOM_RENDER=48]="ZOOM_RENDER",e[e.UPDATE_SETTING_CANVAS_SIZE=52]="UPDATE_SETTING_CANVAS_SIZE",e[e.REMOVE_EXPIRED_CANVAS=76]="REMOVE_EXPIRED_CANVAS",e[e.WEBGL_LOST_REPLACE_CANVAS=77]="WEBGL_LOST_REPLACE_CANVAS",e[e.UPDATE_VIDEO_QUALITY=78]="UPDATE_VIDEO_QUALITY",e[e.SEND_RENDER_LOG=79]="SEND_RENDER_LOG",e[e.ADD_VIDEO_VB_SETTING_DOM=102]="ADD_VIDEO_VB_SETTING_DOM",e[e.REMOVE_VIDEO_VB_SETTING_DOM=103]="REMOVE_VIDEO_VB_SETTING_DOM",e[e.UPDATE_BORDER_RADIUS=104]="UPDATE_BORDER_RADIUS"})(Ui||(Ui={})),(function(e){e[e.WEBGL_LOST_IN_MULTI_VIEW=-32]="WEBGL_LOST_IN_MULTI_VIEW",e[e.MOBILE_CAPTURE_DEVICE_CHANGE=135]="MOBILE_CAPTURE_DEVICE_CHANGE",e[e.SELF_PREVIEW_WATERMARK_CHANGE=139]="SELF_PREVIEW_WATERMARK_CHANGE"})(D5||(D5={}));const k5="default-sesssion-key";var QP,MCe,NCe,QC,N1;(function(e){e.Video="video",e.Share="share",e.Preview="preview"})(QP||(QP={})),(function(e){e.DEFAULT="",e.MAIN="main"})(MCe||(MCe={})),(function(e){e.Video_90P="0",e.Video_180P="1",e.Video_360P="2",e.Video_720P="3",e.Video_1080P="4"})(NCe||(NCe={})),(function(e){e[e.Unknown=0]="Unknown",e[e.VideoTag=1]="VideoTag",e[e.WebGL=2]="WebGL",e[e.WebGL2=3]="WebGL2",e[e.WebGPU=4]="WebGPU"})(QC||(QC={})),(function(e){e.Debounce="debounce",e.Throttle="throttle",e.None="none"})(N1||(N1={}));const Gu=new class{constructor(){this.state={mediaSDK:void 0,mediaSDKInstanceMap:new Map,tagName:"video-player",renderCountMap:new Map},this.onceMap=new WeakMap,this.subscribers=[]}get(e){return this.state[e]}dispatch(e,n,r){n&&Object.assign(this.state,n),e&&this.notifySubscribers(e,r)}subscribe(e){return this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);n!==-1&&this.subscribers.splice(n,1)}}once(e,n){this.onceMap.set(n,{event:e,unSubscribe:this.subscribe(n)})}notifySubscribers(e,n){const r=[];this.subscribers.forEach((i=>{i(e,this.state,n);const l=this.onceMap.get(i);if(l){const{event:f,unSubscribe:h}=l;f===e&&(r.push(h),this.onceMap.delete(i))}})),r.forEach((i=>i()))}};function fP(e,n,r,i,l,f=!1){const h=document.createElement("canvas");h.id=i;const v=gke(h,e,n);return l(`VPISC:${window.devicePixelRatio},${v}`),h.style.position="absolute",h.style.left="0px",h.style.top="0px",h.style.width=e+"px",h.width=e*PA(h),h.style.height=n+"px",h.height=n*PA(h),h.style.zIndex=r,f||(h.style.pointerEvents="none",h.ariaHidden="true"),h}function Jw(e,n,r=!0,i=window,l){l==null||l("VPACE:"+(e==null?void 0:e.id)+":"+(i!==window));const f=()=>{if(e){Gu.dispatch("resize",void 0,e.id),gke(e,n.clientWidth,n.clientHeight),r&&[Ui.UPDATE_CANVAS_SIZE,Ui.UPDATE_SHARING_DECODE_PARAM].forEach((R=>{var k,N;(N=z0((k=n==null?void 0:n.getSessionId)===null||k===void 0?void 0:k.call(n)))===null||N===void 0||N.Notify_MeidaSDK(R,{width:n.clientWidth*PA(e),height:n.clientHeight*PA(e),canvas:e})})),e.style.width=n.clientWidth+"px",e.style.height=n.clientHeight+"px";try{e.width=n.clientWidth*PA(e),e.height=n.clientHeight*PA(e)}catch{}}},h=_me(f,300),v=(function(R){let k,N=0;return function(...L){const B=Date.now(),H=B-N;!N||H>=300?(R(...L),N=B):k||(k=setTimeout((()=>{R(...L),N=Date.now(),k=null}),300-H))}})(f),y=()=>{var R;switch(((R=n==null?void 0:n.getResizeStrategy)===null||R===void 0?void 0:R.call(n))||N1.Debounce){case N1.Debounce:h();break;case N1.Throttle:v();break;case N1.None:f();break;default:h()}},_=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),A=new i.ResizeObserver(y);return _.addEventListener("change",y),A.observe(n),()=>{l==null||l("VPRCE:"+(e==null?void 0:e.id)+":"+(i!==window)),(function(R){pX.delete(R)})(e),A==null||A.disconnect(),_.removeEventListener("change",y)}}function pke(e,n){Object.defineProperties(e,n.reduce(((r,i)=>(r[i]={get:()=>e.getAttribute(i),set:l=>{l?e.setAttribute(i,l):e.removeAttribute(i)}},r)),{}))}function hke(e,n){Object.entries(n).forEach((([r,i])=>{e.getAttribute(r)||e.setAttribute(r,i)}))}function PCe(e,n){const r=e.getAttribute(n);return!(!r||r!=="true")}function z0(e=k5){var n;return(n=Gu.get("mediaSDKInstanceMap").get(e))===null||n===void 0?void 0:n()}function YL(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();let e=new Date().getTime(),n=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(r=>{let i=16*Math.random();return e>0?(i=(e+i)%16|0,e=Math.floor(e/16)):(i=(n+i)%16|0,n=Math.floor(n/16)),(r==="x"?i:3&i|8).toString(16)}))}function _me(e,n){let r;return function(...i){clearTimeout(r),r=setTimeout((()=>{e(...i)}),n)}}function mke(e,n){const r=Object.keys(e),i=Object.keys(n);if(r.length!==i.length)return!1;for(const l of r){const f=e[l],h=n[l];if(typeof f=="object"&&typeof h=="object"){if(!mke(f,h))return!1}else if(f!==h)return!1}return!0}function Xw(e){return!e||e==="0"}const pX=new Map;function gke(e,n,r){const i=n>=2*window.screen.width||r>=2*window.screen.height?1:window.devicePixelRatio,l=pX.get(e);return pX.set(e,i),l&&l!==i&&Gu.dispatch("scale",void 0,e.id),i}function PA(e){return e&&pX.get(e)||window.devicePixelRatio}function _d(e,n){n&&(e==null||e.Notify_MeidaSDK(Ui.SEND_RENDER_LOG,{message:n}))}function LCe(e,n){const r=Gu.get("renderCountMap"),i=r.get(e)||0;r.set(e,n?i+1:i-1)}function BCe(){return window.self!==window.top?window.top:window.self}function VCe(e){const n=L=>{const B=L.match(/^(\d+(?:\.\d+)?)(px|%)?$/);return B?{value:parseFloat(B[1]),unit:B[2]||"px"}:{value:0,unit:"px"}},r=e.split(/[\s\/]+/).filter((L=>L));let i=[],l=[];e.includes("/")?[i,l]=e.split("/").map((L=>L.trim().split(/\s+/))):(i=[...r],l=[...r]);const f=L=>{switch(L.length){case 1:return[L[0],L[0],L[0],L[0]];case 2:return[L[0],L[1],L[0],L[1]];case 3:return[L[0],L[1],L[2],L[1]];case 4:return L;default:return["0","0","0","0"]}},[h,v,y,_]=f(i).map(n),[A,R,k,N]=f(l).map(n);return{topLeft:{x:h,y:A},topRight:{x:v,y:R},bottomRight:{x:y,y:k},bottomLeft:{x:_,y:N}}}function jfe(e,n){const{left:r,top:i,bottom:l,right:f,width:h,height:v}=e.getBoundingClientRect(),y=n.getBoundingClientRect();return{left:r-y.left,top:i-y.top,bottom:y.bottom-l,right:y.right-f,width:h,height:v}}const vke=[];for(let e=0;e<=1;e+=.01)vke.push(e);let _Q=class{constructor(e,n){var r;if(this.getRenderParams=n,this.el=document.createElement("div"),this.position=null,this.id="",this.srcObject=null,this.removePositionObserve=null,this.viewId=`${Gu.get("tagName")}-${YL()}`,this.borderRadius=null,this.getSDK=()=>{var i,l;return z0((l=(i=this.container)===null||i===void 0?void 0:i.getSessionId)===null||l===void 0?void 0:l.call(i))},!e)throw new Error(`The ${Gu.get("tagName")} must have a ${Gu.get("tagName")}-container as its ancestor element.`);this.container=e,this.el.style.width="100%",this.el.style.height="100%",this.debounceUpdateVideoPosition=((r=e==null?void 0:e.getResizeStrategy)===null||r===void 0?void 0:r.call(e))!==N1.None?_me(this.updateVideoPosition.bind(this),300):this.updateVideoPosition.bind(this)}getElement(){return this.el}init(e){e!=null&&e.borderRadius&&(this.borderRadius=e==null?void 0:e.borderRadius),this.removeSubscribe=Gu.subscribe(((n,r,i)=>{i===this.getCanvas().id&&(n==="resize"?(this.updateVideoPosition(),setTimeout((()=>{this.updateVideoPosition()}),300)):n==="scale"&&_d(this.getSDK(),`VPSC:${PA(this.getCanvas())}`))}))}getCanvas(){return this.container.getCanvas()}initObservePosition(){var e,n;this.stopObservePosition(),this.removePositionObserve=(function(r,i,l={}){const{wrapper:f=document.documentElement}=l,h=l.strategy===N1.None?i:_me(i,300);let v,y;const _=(A=.9999999,R=!1)=>{v&&(v.disconnect(),v=null);const{top:k,left:N,width:L,height:B,right:H,bottom:q}=jfe(r,f);if(!L||!B)return void i({hide:!0,cross:!1,width:0,height:0,top:0,left:0,bottom:0,right:0});const Y=k<0||q<0||N<0||H<0,K=((M,we,Ne,De,be,me)=>M<=0&&M+me<=0||we<=0&&we+me<=0||Ne<=0&&Ne+be<=0||De<=0&&De+be<=0)(k,q,N,H,L,B),se={root:f,threshold:Y?vke:A};Y||(se.rootMargin=`${-k}px ${-H}px ${-q}px ${-N}px`);let ie=!0,le=!0;R&&(le=!1),i({hide:K,cross:Y,top:k,left:N,width:L,height:B,bottom:q,right:H}),h({hide:K,cross:Y,top:k,left:N,width:L,height:B,bottom:q,right:H},!0),v=new IntersectionObserver((([M])=>{if(M.intersectionRatio===0)return le?_(.9999999,!0):void 0;if(A!==M.intersectionRatio){if(!ie)return _();_(M.intersectionRatio===0?1e-7:M.intersectionRatio)}M.intersectionRatio===1&&Y&&_(),ie=!1}),se),v.observe(r)};return _(),y=new ResizeObserver((()=>_())),y.observe(r),()=>{v==null||v.disconnect(),v=null,y==null||y.disconnect(),y=null}})(this.el,((r,i)=>{i?setTimeout((()=>{this.updateVideoPosition()}),300):this.debounceUpdateVideoPosition(r)}),{wrapper:this.container,strategy:((n=(e=this.container)===null||e===void 0?void 0:e.getResizeStrategy)===null||n===void 0?void 0:n.call(e))||N1.Debounce})}stopObservePosition(){this.removePositionObserve&&(this.removePositionObserve(),this.removePositionObserve=null)}getCurrentPosition(e){return this.transformRectToPosition(jfe(e,this.container))}transformRectToPosition(e){const{left:n,width:r,height:i,bottom:l,top:f}=e,h=PA(this.getCanvas());return{x:n*h,y:l*h,width:r*h,height:i*h,left:n*h,bottom:l*h,top:f*h}}playVideo(e){this.initObservePosition(),typeof e=="string"?this.id=e:this.srcObject=e;const n=this.getCurrentPosition(this.el);this.addRender(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n),{canvas:this.getCanvas(),zone:this.viewId,userId:Number(this.id),ssrc:Number(this.id)}),this.getRenderParams()),this.srcObject?{srcObject:this.srcObject}:{}),this.borderRadius?{borderRadius:this.borderRadius}:{})),this.position=n}updateVideoPosition(e){if(!this.id&&!this.srcObject)return;const n=this.transformRectToPosition(e||jfe(this.el,this.container));this.position&&mke(n,this.position)||(this.zoomRender(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n),{userId:Number(this.id),canvas:this.getCanvas(),RGBA:this.container.getRGBA(),zone:this.viewId}),this.getRenderParams()),this.srcObject?{srcObject:this.srcObject}:{}),this.borderRadius?{borderRadius:this.borderRadius}:{})),this.position=n)}stopVideo(){this.stopObservePosition(),(this.id||this.srcObject)&&this.position&&((this.id||this.srcObject)&&this.stopRender(Object.assign(Object.assign(Object.assign(Object.assign({},this.position),{userId:Number(this.id),canvas:this.getCanvas(),RGBA:this.container.getRGBA(),zone:this.viewId}),this.getRenderParams()),this.srcObject?{srcObject:this.srcObject}:{})),this.position=null,this.id="",this.srcObject=null)}updateVideoQuality(e){var n;this.id&&((n=this.getSDK())===null||n===void 0||n.Notify_MeidaSDK(Ui.UPDATE_VIDEO_QUALITY,{userId:this.id,videoQuality:e}))}updateBorderRadius(e){var n;this.borderRadius=e,this.id&&((n=this.getSDK())===null||n===void 0||n.Notify_MeidaSDK(Ui.UPDATE_BORDER_RADIUS,{userId:Number(this.id),zone:this.viewId,data:e}))}refresh(){this.debounceUpdateVideoPosition()}destroy(){var e;this.borderRadius=null,this.stopVideo(),(e=this.removeSubscribe)===null||e===void 0||e.call(this)}},wQ=class{constructor(e){this.container=e,this.id="",this.srcObject=null,this.viewId=`${Gu.get("tagName")}-${YL()}`,this.getSDK=()=>{var n,r;return z0((r=(n=this.container)===null||n===void 0?void 0:n.getSessionId)===null||r===void 0?void 0:r.call(n))},this.el=this.createVideoElement()}createVideoElement(){const e=document.createElement("video");return e.style.width="100%",e.style.height="100%",e.style.borderRadius="inherit",e.setAttribute("autoplay","true"),e.setAttribute("muted","true"),e.muted=!0,e.setAttribute("playsinline","true"),e}replaceVideoElement(e){const n=this.createVideoElement();e.replaceWith(n),setTimeout((()=>{e.srcObject=null}),50),this.el=n}getElement(){return this.el}init(){}playVideo(e){typeof e=="string"?this.id=e:this.srcObject=e,this.addRender(Object.assign({id:this.id,zone:this.viewId,userId:Number(this.id),videodom:this.el},this.srcObject?{srcObject:this.srcObject}:{}))}stopVideo(){var e;(this.id||this.srcObject)&&(this.stopRender(Object.assign({id:this.id,zone:this.viewId,userId:Number(this.id),videodom:this.el},this.srcObject?{srcObject:this.srcObject}:{})),!((e=this.getSDK())===null||e===void 0)&&e.getWebRTCFlag()&&this.replaceVideoElement(this.el),this.id="",this.srcObject=null)}updateVideoQuality(e){}destroy(){this.stopVideo()}},UUe=class{constructor(e){this.container=e,this.id="",this.srcObject=null,this.getSDK=()=>{var n,r;return z0((r=(n=this.container)===null||n===void 0?void 0:n.getSessionId)===null||r===void 0?void 0:r.call(n))},this.resizeObserver=new ResizeObserver((([n])=>{var r;(r=this.getSDK())===null||r===void 0||r.Notify_MeidaSDK(Ui.UPDATE_SETTING_CANVAS_SIZE,{canvas:this.el,width:n.target.clientWidth,height:n.target.clientHeight});try{this.el.width=n.target.clientWidth,this.el.height=n.target.clientHeight}catch{}})),this.el=document.createElement("canvas"),this.el.id=YL(),this.el.style.borderRadius="inherit",this.el.style.width="100%",this.el.style.height="100%"}getElement(){return this.el}init(){this.el.parentElement&&(this.el.width=this.el.parentElement.clientWidth,this.el.height=this.el.parentElement.clientHeight,this.resizeObserver.observe(this.el.parentElement))}playVideo(e){typeof e=="string"?this.id=e:this.srcObject=e,this.addRender({id:this.id,canvas:this.el})}stopVideo(){(this.id||this.srcObject)&&(this.stopRender({id:this.id,canvas:this.el}),this.id="",this.srcObject=null)}updateVideoQuality(e){}destroy(){var e,n,r;this.stopVideo(),this.resizeObserver.disconnect(),(r=z0((n=(e=this.container)===null||e===void 0?void 0:e.getSessionId)===null||n===void 0?void 0:n.call(e)))===null||r===void 0||r.Notify_MeidaSDK(Ui.REMOVE_EXPIRED_CANVAS,{canvasId:this.el.id})}},_be=class{constructor(e,n,r){this.id="",this.srcObject=null,this.viewId=`${Gu.get("tagName")}-${YL()}`,this.ssrcStream=null,this.videoElement=null,this.cursorElement=null,this.hasCursorLayer=!1,this.cursorTransform={tx:0,ty:0,scale:1},this.mirrorState=!1,this.rotation="rot0",this.scale=1,this.containerCssWidth=void 0,this.containerCssHeight=void 0,this.videoWidth=void 0,this.videoHeight=void 0,this.getSDK=()=>{var i,l;return z0((l=(i=this.container)===null||i===void 0?void 0:i.getSessionId)===null||l===void 0?void 0:l.call(i))},this.container=e,this.getRenderParams=n,this.renderMode=r,this.containerElement=this.createDivElement(),this.resizeObserver=new ResizeObserver((([i])=>{this.containerCssWidth=i.target.clientWidth,this.containerCssHeight=i.target.clientHeight,this.ssrcStream&&this.ssrcStream.updateDesiredSize({width:this.containerCssWidth,height:this.containerCssHeight}),this.rotation!=="rot90"&&this.rotation!=="rot270"||this._doRotateVideoContent(this.rotation),this.hasCursorLayer&&this._updateCursorTransform()}))}init(){}destroy(){this.stopVideo()}createDivElement(){const e=document.createElement("div");return e.style.width="100%",e.style.height="100%",e.style.borderRadius="inherit",e}getElement(){return this.containerElement}getAnnoCanvas(){var e;return(e=this.container)===null||e===void 0?void 0:e.getAnnoCanvas()}getPreviewCanvas(){var e;return(e=this.container)===null||e===void 0?void 0:e.getPreviewCanvas()}getLocalShareCanvas(){var e;return(e=this.container)===null||e===void 0?void 0:e.getLocalShareCanvas()}playVideo(e){this.stopVideo(),typeof e=="string"?this.id=e:this.srcObject=e;let n=0;this.renderMode!=="vb"&&(n=Number(this.id));const r=getComputedStyle(this.getElement()),i=parseFloat(r.width),l=parseFloat(r.height);this.addVideoElement(),this.ssrcStream=this.createSsrcStream(n,this.videoElement,{width:i,height:l}),this.videoElement.srcObject=this.ssrcStream.mediaStream,this.resizeObserver.observe(this.containerElement),this.addRender(Object.assign(Object.assign({id:this.id,x:0,y:0,width:i,height:l,left:0,top:0,bottom:l,canvas:this.containerElement,zone:this.viewId,userId:Number(this.id),ssrc:Number(this.id)},this.getRenderParams()),this.srcObject?{srcObject:this.srcObject}:{}))}stopVideo(){var e;if(!this.id&&!this.srcObject)return;const n=getComputedStyle(this.getElement()),r=parseFloat(n.width),i=parseFloat(n.height);this.clear(),this.stopRender(Object.assign(Object.assign({id:this.id,x:0,y:0,width:r,height:i,left:0,top:0,bottom:i,userId:Number(this.id),canvas:this.containerElement,RGBA:(e=this.container)===null||e===void 0?void 0:e.getRGBA(),zone:this.viewId},this.getRenderParams()),this.srcObject?{srcObject:this.srcObject}:{})),this.id="",this.srcObject=null}updateVideoQuality(e){}clear(){this.removeVideoElement(),this.removeCursorElement(),this.resizeObserver.disconnect(),this.containerCssWidth=void 0,this.containerCssHeight=void 0,this.ssrcStream&&(this.ssrcStream.stop(),this.ssrcStream=null)}addVideoElement(){this.removeVideoElement();const e=document.createElement("video");e.style.width="100%",e.style.height="100%",e.style.borderRadius="inherit",e.setAttribute("autoplay","true"),e.setAttribute("muted","true"),e.muted=!0,e.setAttribute("playsinline","true"),this.containerElement.appendChild(e);const n=getComputedStyle(this.containerElement);this.containerCssWidth=parseFloat(n.width),this.containerCssHeight=parseFloat(n.height),this.videoElement=e}removeVideoElement(){if(this.videoElement===null)return;this.videoElement.remove();const e=this.videoElement;setTimeout((()=>{e.srcObject=null}),50),this.videoElement=null}addCursorElement(){this.removeCursorElement();const e=document.createElement("canvas");return e.style.borderRadius="inherit",e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.visibility="hidden",this.containerElement.appendChild(e),this.cursorElement=e,this.hasCursorLayer=!0,this._updateCursorTransform(),e}removeCursorElement(){const e=this.cursorElement;e!==null&&(e.remove(),this.cursorElement=null,this.hasCursorLayer=!1)}createSsrcStream(e,n,r){const i=this.getSDK().createSsrcStreamWithRender(e,n,this.renderMode,r);return i.on("addCursorTrack",(l=>{this.addCursorElement(),i.cursorTrack.renderTarget=this.cursorElement,l.on("cursorMove",(f=>{this.onCursorMove(f)}))})),i.metaTrack.on("videoRotationChange",(l=>{this.handleVideoRotated(l)})),i.metaTrack.on("videoMirrorChange",(l=>{this.handleMirrorStateChanged(l)})),i.metaTrack.on("videoSizeChange",((l,f)=>{this.handleVideoSizeChanged(l,f)})),i}_updateCursorTransform(){this.videoWidth&&this.containerCssWidth&&(this.cursorTransform.scale=this.containerCssWidth/this.videoWidth)}onCursorMove(e){if(!this.videoWidth||!this.containerCssWidth)return;this.getSDK().base.assertion.assert(this.cursorElement!==null);const n=this.cursorElement;n.style.visibility="visible";const r=this.cursorTransform.scale;n.style.top=e.y*r+"px",n.style.left=e.x*r+"px",n.style.width=e.width*r+"px",n.style.height=e.height*r+"px"}_doRotateVideoContent(e){const n={rot0:0,rot90:90,rot180:180,rot270:270}[e];this.getSDK().base.assertion.assert(this.videoElement!==null);const r=this.videoElement;let i=r.style.transform;const l=`rotate(${n}deg)`;i.includes("rotate")?i=i.replace(/rotate\([0-9]+(deg)?\)/,l):i+=` ${l}`,r.style.transform=i,r.style.transformOrigin="center";let f=1;if((e==="rot90"||e==="rot270")&&this.videoWidth&&this.videoHeight){const v=this.videoHeight/this.videoWidth,y=this.containerCssWidth,_=this.containerCssHeight;if(f=_/y,y>_){const A=v/(_/y);A>1&&(f*=A)}else{const A=v/(y/_);A>1&&(f/=A)}}const h=this.mirrorState?-1:1;this._scaleVideoContent(h*f,f),this.scale=f,this.rotation=e}handleVideoRotated(e){this.rotation!==e&&this._doRotateVideoContent(e)}handleMirrorStateChanged(e){const n=e?-1:1,r=this.scale;this._scaleVideoContent(n*r,r),this.mirrorState=e}_scaleVideoContent(e,n){this.getSDK().base.assertion.assert(this.videoElement!==null);const r=this.videoElement;let i=r.style.transform;const l=`scaleX(${e})`;i.includes("scaleX")?i=i.replace(/scaleX\(-?([0-9]+(\.[0-9]*)?)\)/,l):i+=l;const f=`scaleY(${n})`;i.includes("scaleY")?i=i.replace(/scaleY\(-?([0-9]+(\.[0-9]*)?)\)/,f):i+=f,r.style.transform=i,r.style.transformOrigin="center"}handleVideoSizeChanged(e,n){this.videoWidth===e&&this.videoHeight===n||(this.videoWidth=e,this.videoHeight=n,this.rotation!=="rot90"&&this.rotation!=="rot270"||this._doRotateVideoContent(this.rotation),this.hasCursorLayer&&this._updateCursorTransform())}};class jUe extends _be{constructor(n,r){super(n,r,"normal")}addRender({width:n,height:r,x:i,y:l,canvas:f,zone:h,userId:v,left:y,bottom:_,top:A,fillMode:R,videoQuality:k}){var N;(N=this.getSDK())===null||N===void 0||N.Notify_MeidaSDK(Ui.ADD_RENDER_VIDEO,{width:n,height:r,x:i,y:l,canvas:f,zone:h,userId:v,left:y,bottom:_,top:A,fillMode:R,videoQuality:k})}stopRender({width:n,height:r,x:i,y:l,userId:f,canvas:h,doNotClean:v,RGBA:y,zone:_,left:A,bottom:R,top:k,videoQuality:N}){var L;(L=this.getSDK())===null||L===void 0||L.Notify_MeidaSDK(Ui.STOP_RENDER_VIDEO,{width:n,height:r,x:i,y:l,userId:f,canvas:h,doNotClean:v,RGBA:y,zone:_,left:A,bottom:R,top:k,videoQuality:N})}}let zUe=class extends _be{constructor(e,n){super(e,n,"sharing")}addRender({width:e,height:n,canvas:r,ssrc:i}){var l,f;(l=this.getSDK())===null||l===void 0||l.Notify_MeidaSDK(Ui.START_SHARING,Object.assign({width:e,height:n,canvas:r,ssrc:i,annoCanvas:this.getAnnoCanvas(),annoPresenterCanvas:this.getPreviewCanvas(),localShareCanvas:this.getLocalShareCanvas()},(f=this.getRenderParams)===null||f===void 0?void 0:f.call(this)))}stopRender({canvas:e}){var n;(n=this.getSDK())===null||n===void 0||n.Notify_MeidaSDK(Ui.STOP_SHARING,{canvas:e})}},WUe=class extends _be{constructor(e,n){super(e,n,"vb")}addRender({id:e,canvas:n}){var r;(r=this.getSDK())===null||r===void 0||r.Notify_MeidaSDK(Ui.ADD_VIDEO_VB_SETTING_DOM,{id:e,canvas:n})}stopRender({id:e,canvas:n}){var r;(r=this.getSDK())===null||r===void 0||r.Notify_MeidaSDK(Ui.REMOVE_VIDEO_VB_SETTING_DOM,{id:e,canvas:n})}},GUe=class extends _Q{addRender({width:e,height:n,x:r,y:i,canvas:l,zone:f,userId:h,left:v,bottom:y,top:_,fillMode:A,videoQuality:R}){var k;this.getSDK()&&(LCe(this.container,!0),(function(N){var L,B;const H=Gu.get("renderCountMap").get(N)||0,q=((B=(L=JsMediaSDK_Instance==null?void 0:JsMediaSDK_Instance.util)===null||L===void 0?void 0:L.getMaxCountRender)===null||B===void 0?void 0:B.call(L))||25,Y=H>=0&&H<=q,K=Gu.get("tagName");Y||console.error(`In your environment, the maximum number of ${K} that can be accommodated in each ${K}-container is ${q}. The current number has exceeded this limit, which may cause video rendering issues.`)})(this.container)),(k=this.getSDK())===null||k===void 0||k.Notify_MeidaSDK(Ui.ADD_RENDER_VIDEO,{width:e,height:n,x:r,y:i,canvas:l,zone:f,userId:h,left:v,bottom:y,top:_,fillMode:A,videoQuality:R})}zoomRender({width:e,height:n,x:r,y:i,userId:l,canvas:f,RGBA:h,zone:v,left:y,bottom:_,top:A}){var R;(R=this.getSDK())===null||R===void 0||R.Notify_MeidaSDK(Ui.ZOOM_RENDER,{width:e,height:n,x:r,y:i,userId:l,canvas:f,RGBA:h,zone:v,left:y,bottom:_,top:A})}stopRender({width:e,height:n,x:r,y:i,userId:l,canvas:f,doNotClean:h,RGBA:v,zone:y,left:_,bottom:A,top:R,videoQuality:k}){var N;this.getSDK()&&LCe(this.container,!1),(N=this.getSDK())===null||N===void 0||N.Notify_MeidaSDK(Ui.STOP_RENDER_VIDEO,{width:e,height:n,x:r,y:i,userId:l,canvas:f,doNotClean:h,RGBA:v,zone:y,left:_,bottom:A,top:R,videoQuality:k})}};class qUe extends wQ{addRender({userId:n,videodom:r,zone:i}){var l;(l=this.getSDK())===null||l===void 0||l.Notify_MeidaSDK(Ui.ADD_RENDER_VIDEO,{userId:n,videodom:r,zone:i})}stopRender({userId:n,videodom:r,zone:i}){var l;(l=this.getSDK())===null||l===void 0||l.Notify_MeidaSDK(Ui.STOP_RENDER_VIDEO,{userId:n,videodom:r,zone:i})}}let KUe=class extends _Q{constructor(){super(...arguments),this.ismain=!1}getAnnoCanvas(){var e;return(e=this.container)===null||e===void 0?void 0:e.getAnnoCanvas()}getPreviewCanvas(){var e;return(e=this.container)===null||e===void 0?void 0:e.getPreviewCanvas()}getLocalShareCanvas(){return this.container.getLocalShareCanvas()}addRender({x:e,y:n,width:r,height:i,userId:l,canvas:f,isFromMainSession:h,zone:v}){var y;this.ismain=!!h,(y=this.getSDK())===null||y===void 0||y.Notify_MeidaSDK(Ui.START_SHARING,{width:r,height:i,x:e,y:n,ssrc:l,isFromMainSession:h,canvas:f,zone:v,annoCanvas:this.getAnnoCanvas()})}zoomRender({x:e,y:n,width:r,height:i,userId:l,canvas:f,zone:h,RGBA:v,isFromMainSession:y}){var _;(_=this.getSDK())===null||_===void 0||_.Notify_MeidaSDK(Ui.ZOOM_SHARING,{width:r,height:i,x:e,y:n,ssrc:l,zone:h,canvas:f,RGBA:v,isFromMainSession:y})}stopRender({canvas:e,userId:n,zone:r,isFromMainSession:i}){var l;(l=this.getSDK())===null||l===void 0||l.Notify_MeidaSDK(Ui.STOP_SHARING,{canvas:e,ssrc:n,zone:r,isFromMainSession:this.ismain})}},HCe=class extends _Q{getAnnoCanvas(){var e;return(e=this.container)===null||e===void 0?void 0:e.getAnnoCanvas()}getPreviewCanvas(){var e;return(e=this.container)===null||e===void 0?void 0:e.getPreviewCanvas()}getLocalShareCanvas(){return this.container.getLocalShareCanvas()}addRender({canvas:e}){var n;(n=this.getSDK())===null||n===void 0||n.Notify_MeidaSDK(Ui.START_SHARE_PREVIEW,{annoPresenterCanvas:this.getPreviewCanvas(),localShareCanvas:this.getLocalShareCanvas()})}zoomRender(){}stopRender({canvas:e}){var n;(n=this.getSDK())===null||n===void 0||n.Notify_MeidaSDK(Ui.STOP_SHARE_PREVIEW,{})}},FCe=class extends wQ{addRender({userId:e,videodom:n}){var r,i;(r=this.getSDK())===null||r===void 0||r.Notify_MeidaSDK(Ui.SWITCH_CANVAS_FOR_VIDEO_CAPTURE,[n]),(i=this.getSDK())===null||i===void 0||i.Notify_MeidaSDK(Ui.ADD_RENDER_VIDEO,{userId:e,videodom:n})}stopRender({userId:e,videodom:n}){var r;(r=this.getSDK())===null||r===void 0||r.Notify_MeidaSDK(Ui.STOP_RENDER_VIDEO,{userId:e,videodom:n})}},ZUe=class extends wQ{addRender({id:e,videodom:n}){var r;(r=this.getSDK())===null||r===void 0||r.Notify_MeidaSDK(Ui.ADD_VIDEO_VB_SETTING_DOM,{id:e,videodom:n})}stopRender({id:e,videodom:n}){var r;(r=this.getSDK())===null||r===void 0||r.Notify_MeidaSDK(Ui.REMOVE_VIDEO_VB_SETTING_DOM,{id:e,videodom:n})}},YUe=class extends UUe{addRender({id:e,canvas:n}){var r;(r=this.getSDK())===null||r===void 0||r.Notify_MeidaSDK(Ui.ADD_VIDEO_VB_SETTING_DOM,{id:e,canvas:n})}stopRender({id:e,canvas:n}){var r;(r=this.getSDK())===null||r===void 0||r.Notify_MeidaSDK(Ui.REMOVE_VIDEO_VB_SETTING_DOM,{id:e,canvas:n})}};function JA(e,n,r){if(typeof e=="function"?e===n:e.has(n))return arguments.length<3?n:r;throw new TypeError("Private element is not present on this object")}function $Ce(e,n,r,i,l,f,h){try{var v=e[f](h),y=v.value}catch(_){return void r(_)}v.done?n(y):Promise.resolve(y).then(i,l)}function bke(e,n){(function(r,i){if(i.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,n),n.add(e)}function TL(e,n,r){return(n=(function(i){var l=(function(f){if(typeof f!="object"||!f)return f;var h=f[Symbol.toPrimitive];if(h!==void 0){var v=h.call(f,"string");if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)})(i);return typeof l=="symbol"?l:l+""})(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var o5=new WeakSet;let wme=class Ame{constructor(){bke(this,o5)}preview(n,r,i){var l=r.getContext("webgl"),f=JA(o5,this,JUe).call(this,l,Ame.VERTEX_SHADER,Ame.FRAGMENT_SHADER),h=l.getAttribLocation(f,"position"),v=l.getUniformLocation(f,"videoTexture");l.useProgram(f);var y=JA(o5,this,XUe).call(this,l);l.bindBuffer(l.ARRAY_BUFFER,y),l.enableVertexAttribArray(h),l.vertexAttribPointer(h,2,l.FLOAT,!1,0,0),this.frame({glContext:l,program:f,positionAttributeLocation:h,textureLocation:v,positionBuffer:y,viewport:i,source:n})}frame(n){var r=n.glContext;n.glContext.clearColor(0,0,0,1),n.glContext.clear(n.glContext.COLOR_BUFFER_BIT),n.glContext.viewport(n.viewport.x,n.viewport.y,n.viewport.w,n.viewport.h),n.glContext.enable(n.glContext.DEPTH_TEST);var i=n.glContext.createTexture();r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,i),r.uniform1i(n.textureLocation,0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n.source),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),n.glContext.drawArrays(n.glContext.TRIANGLE_STRIP,0,4),requestAnimationFrame((()=>this.frame(n)))}};function JUe(e,n,r){var i=JA(o5,this,UCe).call(this,e,e.VERTEX_SHADER,n),l=JA(o5,this,UCe).call(this,e,e.FRAGMENT_SHADER,r),f=e.createProgram();return e.attachShader(f,i),e.attachShader(f,l),e.linkProgram(f),f}function UCe(e,n,r){var i=e.createShader(n);return e.shaderSource(i,r),e.compileShader(i),i}function XUe(e){var n=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),n}TL(wme,"VERTEX_SHADER",`
    attribute vec2 position;
    varying vec2 texCoord;

    void main() {
      texCoord = (position + 1.0) * 0.5;
      // gl_Position = vec4(position, 0.0, 1.0);
      gl_Position = vec4(position.x, -position.y, 0.0, 1.0);
    }
  `),TL(wme,"FRAGMENT_SHADER",`
    precision mediump float;
    varying vec2 texCoord;
    uniform sampler2D videoTexture;

    void main() {
      gl_FragColor = texture2D(videoTexture, texCoord);
    }
  `);var s5=new WeakSet;class OL{constructor(){bke(this,s5)}preview(n,r,i){var l=r.getContext("webgl2"),f=JA(s5,this,QUe).call(this,l,OL.VERTEX_SHADER,OL.FRAGMENT_SHADER),h=l.getAttribLocation(f,"position"),v=l.getUniformLocation(f,"videoTexture");l.useProgram(f);var y=JA(s5,this,e5e).call(this,l);l.bindBuffer(l.ARRAY_BUFFER,y),l.enableVertexAttribArray(h),l.vertexAttribPointer(h,2,l.FLOAT,!1,0,0),this.frame({glContext:l,program:f,positionAttributeLocation:h,textureLocation:v,positionBuffer:y,viewport:i,source:n})}frame(n){var r=n.glContext;n.glContext.clearColor(0,0,0,1),n.glContext.clear(n.glContext.COLOR_BUFFER_BIT),n.glContext.viewport(n.viewport.x,n.viewport.y,n.viewport.w,n.viewport.h),n.glContext.enable(n.glContext.DEPTH_TEST);var i=n.glContext.createTexture();r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,i),r.uniform1i(n.textureLocation,0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n.source),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),n.glContext.drawArrays(n.glContext.TRIANGLE_STRIP,0,4),requestAnimationFrame((()=>this.frame(n)))}}function QUe(e,n,r){var i=JA(s5,this,jCe).call(this,e,e.VERTEX_SHADER,n),l=JA(s5,this,jCe).call(this,e,e.FRAGMENT_SHADER,r),f=e.createProgram();return e.attachShader(f,i),e.attachShader(f,l),e.linkProgram(f),f}function jCe(e,n,r){var i=e.createShader(n);return e.shaderSource(i,r),e.compileShader(i),i}function e5e(e){var n=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),n}TL(OL,"VERTEX_SHADER",`#version 300 es
    in vec2 position;
    out vec2 texCoord;

    void main() {
      texCoord = (position + 1.0) * 0.5;
      gl_Position = vec4(position.x, -position.y, 0.0, 1.0);
    }
  `),TL(OL,"FRAGMENT_SHADER",`#version 300 es
    precision mediump float;
    in vec2 texCoord;
    uniform sampler2D videoTexture;
    out vec4 fragColor;

    void main() {
      fragColor = texture(videoTexture, texCoord);
    }
  `);class IL{constructor(){}preview(n,r,i){var l,f=this;return(l=function*(){if(!n||!r||!i)throw new Error("Invalid arguments: source, target, or viewport is missing");var h=yield navigator.gpu.requestAdapter(),v=yield h.requestDevice(),y=navigator.gpu.getPreferredCanvasFormat(),_=r.getContext("webgpu");_.configure({device:v,format:y,alphaMode:"opaque"});var A=v.createSampler({}),R=v.createRenderPipeline({layout:"auto",vertex:{module:v.createShaderModule({code:IL.VERTEX_SHADER}),entryPoint:"vert_main"},fragment:{module:v.createShaderModule({code:IL.FRAG_SHADER_VF}),entryPoint:"frag_main",targets:[{format:y}]},primitive:{topology:"triangle-list"}}),k={device:v,context:_,pipeline:R,sampler:A,source:n,viewport:i};f.frame(k)},function(){var h=this,v=arguments;return new Promise((function(y,_){var A=l.apply(h,v);function R(N){$Ce(A,y,_,R,k,"next",N)}function k(N){$Ce(A,y,_,R,k,"throw",N)}R(void 0)}))})()}frame(n){var r=n.device.createCommandEncoder(),i={colorAttachments:[{view:n.context.getCurrentTexture().createView(),loadOp:"clear",storeOp:"store"}]},l=r.beginRenderPass(i);l.setPipeline(n.pipeline);var f=n.device.createBindGroup({layout:n.pipeline.getBindGroupLayout(0),entries:[{binding:0,resource:n.sampler},{binding:1,resource:n.device.importExternalTexture({source:n.source})}]});l.setBindGroup(0,f),l.setViewport(n.viewport.x,n.viewport.y,n.viewport.w,n.viewport.h,0,1),l.draw(6),l.end(),n.device.queue.submit([r.finish()]),requestAnimationFrame((()=>this.frame(n)))}}TL(IL,"VERTEX_SHADER",`
    struct VertexOutput {
      @builtin(position) Position: vec4<f32>,
      @location(0) uv: vec2<f32>,
    }

    @vertex
    fn vert_main(@builtin(vertex_index) VertexIndex: u32) -> VertexOutput {
      var pos = array<vec2<f32>, 6>(
        vec2<f32>( 1.0,  1.0),
        vec2<f32>( 1.0, -1.0),
        vec2<f32>(-1.0, -1.0),
        vec2<f32>( 1.0,  1.0),
        vec2<f32>(-1.0, -1.0),
        vec2<f32>(-1.0,  1.0)
      );

      var uv = array<vec2<f32>, 6>(
        vec2<f32>(1.0, 0.0),
        vec2<f32>(1.0, 1.0),
        vec2<f32>(0.0, 1.0),
        vec2<f32>(1.0, 0.0),
        vec2<f32>(0.0, 1.0),
        vec2<f32>(0.0, 0.0)
      );

      var output : VertexOutput;
      output.Position = vec4<f32>(pos[VertexIndex], 0.0, 1.0);
      output.uv = uv[VertexIndex];
      return output;
    }
  `),TL(IL,"FRAG_SHADER_VF",`
    @group(0) @binding(0) var mySampler: sampler;
    @group(0) @binding(1) var vfTexture: texture_external;

    @fragment
    fn frag_main(@location(0) uv : vec2<f32>) -> @location(0) vec4<f32> {
      var color0: vec4<f32> = textureSampleBaseClampToEdge(vfTexture, mySampler, uv);
      return color0;
    }
  `);class f2{constructor(){}preview(n,r,i,l){n==1?i.srcObject=r:n==2?new wme().preview(r,i,l):n==3?new OL().preview(r,i,l):n==4&&new IL().preview(r,i,l)}static getInstance(){return f2.instance||(f2.instance=new f2),f2.instance}}class t5e extends _Q{constructor(){super(...arguments),this.rendersProxy=f2.getInstance(),this.videoSource=null}createSource(n,r,i){return(function(l,f,h,v){return new(h||(h=Promise))((function(y,_){function A(N){try{k(v.next(N))}catch(L){_(L)}}function R(N){try{k(v.throw(N))}catch(L){_(L)}}function k(N){var L;N.done?y(N.value):(L=N.value,L instanceof h?L:new h((function(B){B(L)}))).then(A,R)}k((v=v.apply(l,[])).next())}))})(this,0,void 0,(function*(){const l=document.createElement("video");return l.width=r,l.height=i,l.loop=!0,l.autoplay=!0,l.muted=!0,l.srcObject=n,yield l.play(),l}))}addRender(n){n.renderType&&n.srcObject&&!this.videoSource&&(this.videoSource&&(this.videoSource=null),this.createSource(n.srcObject,n.width,n.height).then((r=>{this.videoSource=r,this.rendersProxy.preview(n.renderType,this.videoSource,n.canvas,{x:n.x,y:n.renderType===QC.WebGPU?n.top:n.y,w:n.width,h:n.height})})))}zoomRender(n){n.renderType&&this.videoSource&&(this.videoSource.width!==n.width&&(this.videoSource.width=n.width),this.videoSource.height!==n.height&&(this.videoSource.height=n.height))}stopRender(n){n.renderType&&this.videoSource&&(this.videoSource.srcObject=null,this.videoSource=null)}}class n5e extends wQ{constructor(){super(...arguments),this.rendersProxy=f2.getInstance()}addRender(n){n.srcObject&&n.videodom&&this.rendersProxy.preview(QC.VideoTag,n.srcObject,n.videodom)}stopRender(n){n.videodom.srcObject=null}}const ob="node-id",r5="media-type",MY="video-quality",PU="share-source",yke="fill-mode",Ske="stop-no-clean",Tme="refresh-key";class RL extends HTMLElement{static get observedAttributes(){return[ob,r5,MY,Tme,PU]}constructor(){super(),this.container=null,this.borderRadius=null,this._srcObject=null,pke(this,RL.customAttributes),this.getRenderParams=this.getParsedParams.bind(this),this.callback=(n,r)=>{var i;n===D5.MOBILE_CAPTURE_DEVICE_CHANGE&&r===this.getAttribute(ob)&&this.initRender(),n===D5.SELF_PREVIEW_WATERMARK_CHANGE&&this.getAttribute(ob)&&(!((i=this.getCurrentMediaSDK())===null||i===void 0)&&i.isSelfUser(this.getAttribute(ob)))&&this.initRender()}}initRender(){var n,r,i,l,f,h,v,y,_,A;if(this.render&&this.render.destroy(),(n=this.getContainer())===null||n===void 0?void 0:n.useInsideRender()){const q=(r=this.getContainer())===null||r===void 0?void 0:r.getInsideRenderType();if(q===QC.VideoTag)this.render=new n5e(this.getContainer());else{if(![QC.WebGL,QC.WebGL2,QC.WebGPU].includes(q))return void console.error("Inside render type error.");this.render=new t5e(this.getContainer(),this.getRenderParams)}return this.shadowRoot&&(this.shadowRoot.innerHTML="",this.shadowRoot.appendChild(this.render.getElement())),this.render.init({borderRadius:this.borderRadius}),void(this.srcObject&&this.render.playVideo(this.srcObject))}const R=(l=(i=this.getCurrentMediaSDK())===null||i===void 0?void 0:i.getWasmRenderingMethod)===null||l===void 0?void 0:l.bind(this.getCurrentMediaSDK()),k=this.getAttribute(ob),N=k&&((f=this.getCurrentMediaSDK())===null||f===void 0?void 0:f.isPreviewVideotag(k)),L=this.getAttribute(r5);let B=0;L===QP.Preview?!((h=this.getCurrentMediaSDK())===null||h===void 0)&&h.getWebRTCFlag()?(this.render=new ZUe(null),B=6):R&&R()==="video-tag"?(this.render=new WUe(this.getContainer(),this.getRenderParams),B=10):(this.render=new YUe(null),B=5):L===QP.Share?k&&this.getAttribute(PU)!=="main"&&(!((y=(v=this.getCurrentMediaSDK())===null||v===void 0?void 0:v.isSharePreviewVideotag)===null||y===void 0)&&y.call(v,k))?(this.render=new HCe(this.getContainer(),this.getRenderParams),B=7):R&&R()==="video-tag"?(this.render=new zUe(this.getContainer(),this.getRenderParams),B=9):(this.render=new KUe(this.getContainer(),this.getRenderParams),B=2):!((_=this.getCurrentMediaSDK())===null||_===void 0)&&_.getWebRTCFlag()?(this.render=new qUe(this.getContainer()),B=4):N?(this.render=new FCe(this.getContainer()),B=1):R&&R()==="video-tag"?(this.render=new jUe(this.getContainer(),this.getRenderParams),B=8):(this.render=new GUe(this.getContainer(),this.getRenderParams),B=3),this.getCurrentMediaSDK()&&_d(this.getCurrentMediaSDK(),`VPREN:${B}`),this.innerHTML="",this.appendChild(this.render.getElement()),this.render.init({borderRadius:this.borderRadius});const H=this.getAttribute(ob);Xw(H)||(A=this.render)===null||A===void 0||A.playVideo(H)}get srcObject(){return this._srcObject}set srcObject(n){var r,i,l,f;!this._srcObject&&n?(r=this.render)===null||r===void 0||r.playVideo(n):this._srcObject&&n?((i=this.render)===null||i===void 0||i.stopVideo(),(l=this.render)===null||l===void 0||l.playVideo(n)):this._srcObject&&((f=this.render)===null||f===void 0||f.stopVideo()),this._srcObject=n}getContainer(){return this.container||(this.container=this.closest(`${Gu.get("tagName")}-container`)),this.container}getCurrentMediaSDK(){var n,r;return z0((r=(n=this.getContainer())===null||n===void 0?void 0:n.getSessionId)===null||r===void 0?void 0:r.call(n))}getParsedParams(){var n,r;return{fillMode:PCe(this,yke),doNotClean:PCe(this,Ske),isFromMainSession:this.getAttribute(PU)==="main",videoQuality:this.getAttribute(MY),renderType:(r=(n=this.getContainer())===null||n===void 0?void 0:n.getInsideRenderType())!==null&&r!==void 0?r:QC.Unknown}}connectedCallback(){var n;this.style.display||(this.style.display="block"),hke(this,RL.defaultValues),this.initRender(),(n=this.getCurrentMediaSDK())===null||n===void 0||n.addCallback(this.callback),this.removeSubscribe=Gu.subscribe(((r,i,l)=>{var f,h,v,y;r==="failover"&&l===(((h=(f=this.getContainer())===null||f===void 0?void 0:f.getSessionId)===null||h===void 0?void 0:h.call(f))||k5)&&(this.initRender(),Xw(this.getAttribute(ob))||(v=this.render)===null||v===void 0||v.playVideo(this.getAttribute(ob)),this.srcObject&&((y=this.render)===null||y===void 0||y.playVideo(this.srcObject)))})),this.removeStyleListener=(function(r,i){let l=null;const f=()=>{let v=getComputedStyle(r).borderRadius;v&&v!=="0px"&&v!=="0%"?(l=v,i(VCe(v))):l&&(i(VCe("0%")),l=null)};f();const h=new MutationObserver((()=>f()));return h.observe(r,{attributes:!0,attributeFilter:["style"]}),()=>{h.disconnect()}})(this,(r=>{var i,l;this.borderRadius=r,r&&((l=(i=this.render)===null||i===void 0?void 0:i.updateBorderRadius)===null||l===void 0||l.call(i,r))}))}disconnectedCallback(){var n,r,i,l;(n=this.removeSubscribe)===null||n===void 0||n.call(this),(r=this.removeStyleListener)===null||r===void 0||r.call(this),(i=this.render)===null||i===void 0||i.destroy(),this.callback&&((l=this.getCurrentMediaSDK())===null||l===void 0||l.removeCallback(this.callback))}attributeChangedCallback(n,r,i){var l,f,h,v,y,_,A;if(this.render)switch(n){case ob:!((l=this.getCurrentMediaSDK())===null||l===void 0)&&l.getWebRTCFlag()&&this.getAttribute(ob)===QP.Video||(!!(!((f=this.getCurrentMediaSDK())===null||f===void 0)&&f.isPreviewVideotag(i))!=this.render instanceof FCe&&this.initRender(),!!(!((v=(h=this.getCurrentMediaSDK())===null||h===void 0?void 0:h.isSharePreviewVideotag)===null||v===void 0)&&v.call(h,i))!=this.render instanceof HCe&&this.initRender()),Xw(r)&&!Xw(i)?this.render.playVideo(i):Xw(r)||Xw(i)?Xw(r)||this.render.stopVideo():(this.render.stopVideo(),this.render.playVideo(i));break;case PU:case r5:this.initRender();break;case MY:(y=this.render)===null||y===void 0||y.updateVideoQuality(i);break;case Tme:Xw(i)||(A=(_=this.render)===null||_===void 0?void 0:_.refresh)===null||A===void 0||A.call(_)}}}RL.customAttributes=[ob,r5,MY,PU,yke,Ske,Tme],RL.defaultValues={[ob]:"",[r5]:QP.Video};const zCe="session-id",Qw="z-index",vU="inside-render",WCe="label";class xL extends HTMLElement{static get observedAttributes(){return[zCe,Qw,vU]}get pipWindow(){var n,r;return"documentPictureInPicture"in window&&(function(){const i=BCe();try{return!!(i!=null&&i.location.origin)}catch{return!1}})()&&((r=(n=BCe())===null||n===void 0?void 0:n.documentPictureInPicture)===null||r===void 0?void 0:r.window)||void 0}constructor(){super(),this.canvasId="video-player-canvas-"+(this.getAttribute(WCe)?`${this.getAttribute(WCe)}-`:"")+YL(),this.needInitCanvas=!1,this.canvasKeys=["annoCanvas","previewCanvas","localShareCanvas"],this.needInitCanvasMap={annoCanvas:!1,previewCanvas:!1,localShareCanvas:!1},this.listenerList=[],this.pipListenerList=[],this.callback=null,pke(this,xL.customAttributes);const n=this.attachShadow({mode:"open"}),r=document.createElement("slot");this.appendCanvas=(i,l=r)=>{n.insertBefore(i,l)},n.appendChild(r)}connectedCallback(){this.style.display||(this.style.display="block"),this.style.position||(this.style.position="relative"),hke(this,xL.defaultValues),this.needInitCanvas&&this.initCanvasEvents(),this.canvasKeys.forEach((n=>{if(this.needInitCanvasMap[n]){const r=this[n];r&&this.initCanvasListenerList(r)}})),this.removeSubscribe=Gu.subscribe(((n,r,i)=>{n==="failover"&&i===(this.getSessionId()||k5)&&(this.replaceCanvas(),this.initCanvasEvents(),this.canvasKeys.forEach((l=>{const f=this[l];f&&this.initCanvasListenerList(f)})))}))}removeFromShadowRoot(n){if(!this.shadowRoot)return;let r=n;for(;r;){if(r.parentNode===null)return;if(r.parentNode===this.shadowRoot)break;r=r.parentNode}r.remove()}disconnectedCallback(){var n,r,i,l;(n=this.removeListener)===null||n===void 0||n.call(this),this.resetPIPListener(),this.listenerList.length&&this.listenerList.forEach((f=>f())),(r=this.removeSubscribe)===null||r===void 0||r.call(this),this.canvas&&((i=z0(this.getSessionId()))===null||i===void 0||i.Notify_MeidaSDK(Ui.REMOVE_EXPIRED_CANVAS,{canvasId:this.canvasId}),this.canvas.remove(),this.canvas=void 0),this.canvasKeys.forEach((f=>{const h=this[f];h&&(this.removeFromShadowRoot(h),this[f]=void 0)})),this.callback&&((l=z0(this.getSessionId()))===null||l===void 0||l.removeCallback(this.callback))}attributeChangedCallback(n,r,i){n===Qw&&this.canvas&&i&&(this.canvas.style.zIndex=i)}adoptedCallback(){_d(this.getCurrentMediaSDK(),"VPADOP:"+!!this.pipWindow),this.pipWindow?this.canvas&&(this.resetPIPListener(),this.removePIPListener=Jw(this.canvas,this,!0,this.pipWindow,(n=>_d(this.getCurrentMediaSDK(),n))),this.canvasKeys.forEach((n=>{const r=this[n];r&&this.pipListenerList.push(Jw(r,this,!1,this.pipWindow))}))):this.resetPIPListener()}resetPIPListener(){var n;(n=this.removePIPListener)===null||n===void 0||n.call(this),this.removePIPListener=void 0,this.pipListenerList.length&&this.pipListenerList.forEach((r=>r())),this.pipListenerList=[]}initCanvasListenerList(n){this.listenerList.push(Jw(n,this,!1)),this.pipWindow&&this.pipListenerList.push(Jw(n,this,!1,this.pipWindow))}createCanvas(){this.getCurrentMediaSDK()&&_d(this.getCurrentMediaSDK(),"VPCC"),this.canvas=fP(this.clientWidth,this.clientHeight,this.getAttribute(Qw)||"",this.canvasId,(n=>_d(this.getCurrentMediaSDK(),n))),this.appendCanvas(this.canvas),this.isConnected?this.initCanvasEvents():this.needInitCanvas=!0}createPreviewCanvas(){this.getCurrentMediaSDK()&&_d(this.getCurrentMediaSDK(),"VPCC"),this.previewCanvas=fP(this.clientWidth,this.clientHeight,this.getAttribute(Qw)||"",this.canvasId+"-anno-presenter",(n=>_d(this.getCurrentMediaSDK(),n))),this.appendCanvas(this.previewCanvas)}createLocalShareCanvas(){this.getCurrentMediaSDK()&&_d(this.getCurrentMediaSDK(),"VPCC"),this.localShareCanvas=fP(this.clientWidth,this.clientHeight,this.getAttribute(Qw)||"",this.canvasId+"-local-share",(n=>_d(this.getCurrentMediaSDK(),n))),this.appendCanvas(this.localShareCanvas),this.isConnected?this.initCanvasListenerList(this.localShareCanvas):this.needInitCanvasMap.localShareCanvas=!0}createAnnoCanvas(){this.annoCanvas=fP(this.clientWidth,this.clientHeight,this.getAttribute(Qw)||"",this.canvasId+"-anno",(n=>_d(this.getCurrentMediaSDK(),n))),this.appendCanvas(this.annoCanvas),this.isConnected?this.initCanvasListenerList(this.annoCanvas):this.needInitCanvasMap.annoCanvas=!0}initCanvasEvents(){var n;this.removeListener=Jw(this.canvas,this,!0,window,(r=>_d(this.getCurrentMediaSDK(),r))),this.pipWindow&&(this.removePIPListener=Jw(this.canvas,this,!0,this.pipWindow,(r=>_d(this.getCurrentMediaSDK(),r)))),this.callback=(r,i)=>{var l,f;r===D5.WEBGL_LOST_IN_MULTI_VIEW&&i.replaceCanvas&&i.canvasId===((l=this.canvas)===null||l===void 0?void 0:l.id)&&(this.replaceCanvas(),(f=z0(this.getSessionId()))===null||f===void 0||f.Notify_MeidaSDK(Ui.WEBGL_LOST_REPLACE_CANVAS,{canvasId:this.canvasId,canvas:this.canvas}))},(n=this.getCurrentMediaSDK())===null||n===void 0||n.addCallback(this.callback)}replaceCanvas(){var n;if(this.getCurrentMediaSDK()&&_d(this.getCurrentMediaSDK(),"VPRC"),this.canvas){(n=this.removeListener)===null||n===void 0||n.call(this);const r=fP(this.clientWidth,this.clientHeight,this.getAttribute(Qw)||"",this.canvasId,(i=>_d(this.getCurrentMediaSDK(),i)));this.removeListener=Jw(r,this,!0,window,(i=>_d(this.getCurrentMediaSDK(),i))),this.pipWindow&&(this.removePIPListener=Jw(this.canvas,this,!0,this.pipWindow,(i=>_d(this.getCurrentMediaSDK(),i)))),this.shadowRoot&&this.shadowRoot.replaceChild(r,this.canvas),this.canvas=r}if(this.annoCanvas){const r=fP(this.clientWidth,this.clientHeight,this.getAttribute(Qw)||"",this.canvasId+"anno",(i=>_d(this.getCurrentMediaSDK(),i)));this.shadowRoot&&this.shadowRoot.replaceChild(r,this.annoCanvas),this.annoCanvas=r}}getResizeStrategy(){return this.getAttribute("resize-strategy")||N1.Debounce}getCanvas(){return this.canvas||this.createCanvas(),this.canvas}getPreviewCanvas(){return this.previewCanvas||this.createPreviewCanvas(),this.previewCanvas}getLocalShareCanvas(){return this.localShareCanvas||this.createLocalShareCanvas(),this.localShareCanvas}getAnnoCanvas(){return this.annoCanvas||this.createAnnoCanvas(),this.annoCanvas}useInsideRender(){return this.getAttribute(vU)!==null&&this.getAttribute(vU)!==void 0&&this.getAttribute(vU)!=="false"&&this.getAttribute(vU)!=="0"}getInsideRenderType(){return Number(this.getAttribute("inside-render-type"))}getSessionId(){return this.getAttribute(zCe)||void 0}getCurrentMediaSDK(){return z0(this.getSessionId())}getRGBA(){return(function(n){let r=0,i=0,l=0,f=0;if(n[0]==="r")if(n[3]==="a"){const h=n.slice(5,-1).split(",").map((v=>parseInt(v.trim(),10)));r=h[0],i=h[1],l=h[2],f=h[3]}else{const h=n.slice(4,-1).split(",").map((v=>parseInt(v.trim(),10)));r=h[0],i=h[1],l=h[2]}else if(n[0]==="#"){let h=n.slice(1);h.length===3&&(h=h.split("").map((y=>y.repeat(2))).join(""));const v=parseInt(h,16);r=v>>16&255,i=v>>8&255,l=255&v}return{R:r/255,G:i/255,B:l/255,A:f}})(getComputedStyle(this).getPropertyValue("background-color"))}}function Cke(e){var n;let r="video-player";e.tagName&&(r=e.tagName,Gu.dispatch("",{tagName:e.tagName}),_d((n=e.mediaSDK)===null||n===void 0?void 0:n.call(e),`VPTN:${r}`));const i=`${r}-container`,l=e.sessionId||YL();return Gu.get("renderCountMap").clear(),e.mediaSDK&&(Gu.get("mediaSDKInstanceMap").set(k5,e.mediaSDK),Gu.get("mediaSDKInstanceMap").set(l,e.mediaSDK)),e.failover&&Gu.dispatch("failover",void 0,e.sessionId||k5),customElements.get(i)||customElements.define(i,xL),customElements.get(r)||customElements.define(r,RL),l}xL.customAttributes=[],xL.defaultValues={};const GCe="PREVIEW_VIDEO_ENCODE_SUCCESS",zfe="PREVIEW_VIDEO_VB_MODEL_READY",qCe="PREVIEW_VIDEO_USER_FORBIDDEN_CAPTURE",KCe="PREVIEW_VIDEO_CAMERA_IS_TAKEN",ZCe="PREVIEW_VB_SETTING_SUCCESS";async function YCe(e,n,r,i){const{imageUrl:l,cropped:f,deviceId:h}=r;let v=rE("__ZOOM_SDK_PREVIEW_VIRTUAL_BACKGROUND_CANVAS_@__"),y=null;GL(n)?n.id?v=n.id:n.id=v:(n.setAttribute("node-id",v),n.setAttribute("media-type","preview"));let[_,A]=[640,360];Yo.isSupportSending720P()&&(_=1280,A=720),l&&sme(i)&&(y=await u6(l,f)),e.startVirtualBackgroundSetting(n,y,0,h??"default",_,A,void 0,v),y&&y!==bL&&setTimeout((()=>{C5(y)}),0)}class Yl{constructor(){this.previewMediaAgent=ov.getInstance(),this.state=void 0,this.eventHandler=(n,r)=>{switch(n){case Cn.InitSuccessVideo:r===zp.EncodeSuccess&&(Yl.isVideoEncoded=!0,He(GCe,!0));break;case Cn.VbModelPreloadingOk:case Cn.VbModelPreloading_3S:case Cn.VbModelPreloading_10S:Yl.isVBModelReady=!0,He(zfe,!0);break;case Cn.VbSettingParaError:r===zRe.VBModelNotMatch&&(Yl.isVBModelReady=!1,He(zfe,!1));break;case Cn.UserForbiddedCaptureVideo:He(qCe,r);break;case Cn.UserCameraIsTakenByOtherPrograms:He(KCe,{reason:"User camera is taken by other programs.",...r??{}});break;case Cn.StartVideoStreamInVbSettingSuccess:He(ZCe,!0)}}}static setMediaOption(n){Yl.mediaOption=n}setup(){if(Yl.mediaOption){if(Yo.getInstance().inProgress)return Promise.resolve("");if(!ov.getInstance().inProgress){var n,r;let i;Yl.isVideoEncoded=void 0,Yl.isVBModelReady=void 0,this.previewMediaAgent.unregisterCallback(this.eventHandler),(n=Yl.mediaOption)!==null&&n!==void 0&&n.enforceMultipleVideos&&typeof((r=Yl.mediaOption)===null||r===void 0?void 0:r.enforceMultipleVideos)=="object"&&(i=!!Yl.mediaOption.enforceMultipleVideos.disableRenderLimits);const{assetsPath:l,enforceMultipleVideos:f,enforceVirtualBackground:h,alternativeNameForVideoPlayer:v}=Yl.mediaOption,y={...rDe(!!f,h)};this.previewMediaAgent.init(l,y,i),this.previewMediaAgent.registerCallback(this.eventHandler),Cke({mediaSDK:()=>this.previewMediaAgent.instance,tagName:v,failover:"1"})}return Promise.resolve("")}return Promise.reject({type:Lt,reason:"Cannot preview video with virtual background before `client.init` method."})}async startPreview(n,r){if(Yo.getInstance().inProgress){var i;YCe(Yo.getInstance(),n,r,(i=Yl.mediaOption)===null||i===void 0?void 0:i.enforceVirtualBackground)}else{if(!await(r.imageUrl?Ra(Yl.isVBModelReady!==void 0?An([Yl.isVBModelReady]):si(zfe,1).pipe(Kn((h=>h)))):Promise.resolve(!0)))return Promise.reject({type:Lt,reason:"Cannot start video with virtual background"});var l;await Ra(Yl.isVideoEncoded?An([!0]):si(GCe,1))&&(await YCe(ov.getInstance(),n,r,(l=Yl.mediaOption)===null||l===void 0?void 0:l.enforceVirtualBackground),await Ra(mf(si(ZCe,1).pipe(Kn((()=>!0))),wl(...[qCe,KCe].map((h=>si(h,1).pipe(Nt((v=>(ov.getInstance().stopVirtualBackgroundSetting(),ZA({type:h.replace("PREVIEW_",""),reason:v})))))))))),this.state={element:n,vb:r})}}async stopPreview(){Yo.getInstance().inProgress?Yo.getInstance().stopVirtualBackgroundSetting():ov.getInstance().stopVirtualBackgroundSetting()}async updatePreview(n,r){const i=Yo.getInstance().inProgress?Yo.getInstance():ov.getInstance();if(n){const l=await u6(n,r);l&&(i.updateVirtualBackgroundImage(l),l!==bL&&setTimeout((()=>{C5(l)}),0))}else i.updateVirtualBackgroundImage(null)}}Yl.mediaOption=void 0,Yl.isVideoEncoded=void 0,Yl.isVBModelReady=void 0;const o5e={width:{min:1024,ideal:1280,max:1920},height:{min:576,ideal:720,max:1080},aspectRatio:{ideal:1.777777778}};class s5e{constructor(n=""){this.isVideoStarted=void 0,this.videoStream=void 0,this.deviceId=void 0,this.localPreview=void 0,this.vbPreviewInProgress=void 0,this.videoParams=void 0,this.isVideoStarted=!1,this.videoStream=null,this.vbPreviewInProgress=!1,this.deviceId=n,this.localPreview=new Yl}async start(n,r){if(!n)throw new Error("VideoPlayer DOM element is falsy");if(this.isVideoStarted||this.videoStream)throw new Error("VideoAlreadyStartedError");this.videoParams={element:n,virtualBackground:r};const i=async l=>{if(!l||l.name!=="OverconstrainedError"&&l.name!=="ConstraintNotSatisfiedError")throw l;console.log(`Warning: detected ${l.name} -- trying to fall back to lower aspect ratio`);try{const f=await navigator.mediaDevices.getUserMedia(this.getVideoConstraints(!0));return this.tryPlayVideo(n,f)}catch(f){throw f}};if(sE(n)){if(r!==void 0)throw new Error("Cannot start video with virtual background");try{const l=await navigator.mediaDevices.getUserMedia(this.getVideoConstraints());return this.tryPlayVideo(n,l)}catch(l){return i(l)}}else GL(n)&&r!==void 0&&console.warn("The canvas element will be deprecated. Please use the Videoplayer element to preview the virtual background."),await this.localPreview.setup().then((()=>this.localPreview.startPreview(n,{...r,deviceId:this.deviceId}))).then((()=>{this.vbPreviewInProgress=!0,this.isVideoStarted=!0}))}async stop(){if(this.vbPreviewInProgress)await this.localPreview.stopPreview(),this.vbPreviewInProgress=!1,this.isVideoStarted=!1;else{if(!this.videoStream||!this.isVideoStarted)throw new Error("VideoNotStartedError");this.videoStream.getVideoTracks().forEach((n=>n.stop())),this.videoStream=null,this.isVideoStarted=!1}}async switchCamera(n){n!==this.deviceId&&(this.deviceId=n,(this.videoStream||this.isVideoStarted)&&(await this.stop(),this.videoParams&&await this.start(this.videoParams.element,this.videoParams.virtualBackground)))}async updateVirtualBackground(n,r){this.vbPreviewInProgress&&(await this.localPreview.updatePreview(n,r),this.videoParams.virtualBackground={imageUrl:n,cropped:r})}getVideoConstraints(n=!1){let r=o5e;return o6.includes(this.deviceId)?{audio:!1,video:{facingMode:this.deviceId}}:(n?r=this.deviceId===""||{deviceId:{exact:this.deviceId}}:this.deviceId!==""&&(r.deviceId={exact:this.deviceId}),{audio:!1,video:r})}async tryPlayVideo(n,r){if(!n)throw new Error("Video DOM element is falsy");try{this.videoStream=r,n.muted=!0,n.playsInline=!0,n.srcObject=this.videoStream,await n.play(),this.isVideoStarted=!0}catch(i){throw i}}}const r5e="SET_MEETING_INFO",i5e="SET_MEETING_JOIN_INFO",a5e="SET_WINDOWN_OPEN",c5e="SET_APPID_SIGNATURE",l5e="SET_ZTK",u5e="SET_ZSK",d5e="SET_TK_MTKGUID",f5e="SET_PING_RWC_TIMESTAMP",p5e="SET_IN_MEETING_INFO",h5e="SET_MEETING_ATTRIBUTE",m5e="RESET_MEETING",g5e="SET_IS_HOST",v5e="SET_IS_COHOST",b5e="SET_MEETING_IS_ON_HOLD",y5e="SET_IS_MEETING_RESET",S5e="SET_AUDIO_VIDEO_BEFORE_ON_HOLD",C5e="SET_CURRENT_USER_AUDIO_BEFORE_RESET",E5e="SET_IS_CURRENT_USER_MUTED_BEFORE_RESET",_5e="SET_IS_CURRENT_USER_START_VIDEO_BEFORE_RESET",w5e="SET_MEETING_STATUS",A5e="SET_MEETING_REGION",T5e="SET_JOIN_MEETING_TIME_STAMP",O5e="SET_ACTIVE_APP_INFO",I5e="SET_MEETING_IDLE_START_TIME",R5e="SET_SESSION_IDLE_TIMEOUT_MINUTES",x5e="ADD_DISCARDED_RWC_HOST",D5e="SET_SHARE_PRONOUN_TYPE",k5e="SET_IS_STAY_AWAKE_DURING_THE_SESSION",M5e="SET_MEETING_JOIN_SUCCESS_TIMESTAMP",N5e="RESET_FAILOVER_RECORD",P5e="SET_FAILOVER_REASON",L5e="SET_IS_QUICKLY_LEAVE_MEETING_AFTER_REFRESH",B5e="SET_MEETING_INFO_TIMESTAMP",V5e="SET_IS_ENABLE_ZMK_FROM_RWG",H5e="SET_IS_RLB_TP",F5e="SET_IS_RLB_TP_READY",$5e=["bLock","bHoldUponEntry","viewOnly","listenOnlyPhone","bAllowRaiseHand","bAllowAttendeeRename","bBroadcast","bAllowPlayChimeForEnterOrExit","bIbDisableShare","bIbDisableChat","encryptKey","bNoHostTimeOut","bAllowShowCount","bHasAST","bHasRMC","gatewayKey","encryptKey"],JCe={bChime:"bAllowPlayChimeForEnterOrExit",bHasAST:"hasAst",bHasRMC:"hasRmc",topic:e=>({meetingTopic:hb(e)}),gatewayKey:e=>{const[,n,r]=e.split(".");return n&&r?{gatewayUser:{userId:Number(n),sn:r}}:{}},encryptKey:e=>({gcmSessinKey:iv(e)})},hX=ga("GET_MEETING_INFO"),DL=ga("GET_INSTANT_MEETING_INFO");ga("LOGON_ZOOM_DOMAIN"),ga("VERIFY_ZOOM_RECAPTCHA"),ga("LOGON_THIRD_PARTY_DOMAIN");const wbe=ga("PING_RWC_SERVER"),Qp=ga("MEETING_FAILOVER"),z2=ga("LEAVE_MEETING"),Ome=ga("LEAVE_WAITING_ROOM"),kL=ga("END_MEETING");ga("REGISTER_WEBINAR");const XCe=ga("TRIGGER_IDLE_CHECK"),Eke=ga("END_OF_ZE_WORLD"),_ke=ga("SET_IS_UITOOLKIT"),{setMeetingInfo:om,setMeetingJoinInfo:U5e,setWindownOpen:j5e,setAppidSignature:wke,setZtk:z5e,setZsk:W5e,setTkMtkguid:G5e,setPingRwcTimestamp:Ake,setInMeetingInfo:F1,setMeetingAttribute:mX,resetMeeting:Ime,setIsHost:Tke,setIsCohost:Oke,setMeetingIsOnHold:PP,setIsMeetingReset:Ike,setAudioVideoBeforeOnHold:Rke,setCurrentUserAudioBeforeReset:Rme,setIsCurrentUserMutedBeforeReset:xme,setMeetingStatus:Abe,setMeetingRegion:xke,setIsCurrentUserStartVideoBeforeReset:Dke,setJoinMeetingTimeStamp:kke,setActiveAppInfo:q5e,setMeetingIdleStartTime:LU,setSessionIdleTimeoutMinutes:Mke,addDiscardedRwcHost:K5e,setSharePronounType:Nke,setIsStayAwakeDuringTheSession:Pke,setMeetingJoinSuccessTimestamp:Lke,resetFailoverRecord:Bke,setFailoverReason:gX,setIsQuicklyLeaveMeetingAfterRefresh:Vke,setMeetingInfoTimestamp:Hke,setIsEnableZmkFromRwg:Fke,setIsRlbTp:NY,setIsRlbTpReady:$ke}=Ql({[r5e]:e=>e,[i5e]:e=>e,[a5e]:e=>e,[c5e]:e=>e,[l5e]:e=>e,[u5e]:e=>e,[d5e]:e=>e,[f5e]:e=>e,[p5e]:e=>e,[h5e]:e=>{if($5e.some((n=>e&&e[n]!==void 0))){let n=e;return Object.keys(JCe).some((r=>e[r]!==void 0))&&(n=Object.keys(e).reduce(((r,i)=>{const l=JCe[i];return typeof l=="function"?Object.assign(r,l(e[i])):typeof l=="string"&&(r[l]=e[i]),r}),{})),n}return{}},[g5e]:e=>e&&e.bHost,[v5e]:e=>e&&e.bCoHost,[m5e]:e=>e,[b5e]:e=>e,[y5e]:e=>e,[S5e]:e=>e,[C5e]:e=>e,[E5e]:e=>e,[w5e]:e=>e,[A5e]:e=>e,[_5e]:e=>e,[T5e]:e=>e,[O5e]:e=>e,[I5e]:e=>e,[R5e]:e=>e,[x5e]:e=>e,[D5e]:e=>e,[k5e]:e=>e,[M5e]:e=>e,[N5e]:e=>e,[P5e]:e=>e,[L5e]:e=>e,[B5e]:e=>e,[V5e]:e=>e,[H5e]:e=>e,[F5e]:e=>e});class Dme{static destroyClient(){if(this.meetingClient){const n=this.meetingClient[Ja],r=this.meetingClient.leave().then((()=>Ra(Uc(500)).then((()=>{n==null||n(Eke()),fbe()}))));return this.meetingClient=null,r}return Promise.resolve(void 0)}static checkFeatureRequirements(){return(function(){const n=[],r=[],{isAndroidOrIOSBrowser:i,browser:l,browserVersion:f,os:h,osVersion:v,isChrome:y,isFirefox:_,isSafari:A}=bo;!i&&(y||_||A)&&IZ()?n.push("Virtual Background"):r.push("Virtual Background"),(i||y)&&IZ()?n.push("Share Chrome Tab Audio"):r.push("Share Chrome Tab Audio"),!i&&IZ()?(n.push("Screen Share (send)"),n.push("720p Video (receive)"),n.push("Share 2nd Camera")):(r.push("Screen Share (send)"),r.push("720p Video (receive)"),r.push("Share 2nd Camera")),IZ()?(n.push("Audio"),n.push("Video"),n.push("Screen Share (receive)"),n.push("Chat"),n.push("Closed Captioning"),n.push("Live Transcription"),n.push("Live Translation"),n.push("Cloud Recording"),n.push("Call Out (PSTN)"),n.push("Command Channel"),n.push("RTMP Live Streaming"),n.push("Encryption"),n.push("720p Video (send)"),n.push("Render Multiple Videos")):(r.push("Audio"),r.push("Video"),r.push("Screen Share (receive)"),r.push("Chat"),r.push("Closed Captioning"),r.push("Live Transcription"),r.push("Live Translation"),r.push("Cloud Recording"),r.push("Call Out (PSTN)"),r.push("Command Channel"),r.push("RTMP Live Streaming"),r.push("Encryption"),n.push("720p Video (send)"),n.push("Render Multiple Videos"));const R=i?`${h}${v}`:`${l}${f}`;return r.length>0&&console.log("Some features are not supported on your platform, please refer to https://developers.zoom.us/docs/video-sdk/web/browser-support/"),{platform:R,supportFeatures:n,unSupportFeatures:r}})()}static checkSystemRequirements(){return jRe()}static getDevices(n){return n?navigator.mediaDevices.enumerateDevices():navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((r=>(r.getTracks().forEach((i=>i.stop())),navigator.mediaDevices.enumerateDevices()))).catch((r=>(console.warn(r),navigator.mediaDevices.enumerateDevices())))}static createLocalAudioTrack(n=""){return new CFe(n)}static createLocalVideoTrack(n=""){return new s5e(n)}static preloadDependentAssets(n){(async r=>{const i=r||JR,l=`${i}/${XR}`,f=[],h=[],v=`${i}/`;if(NZ()){const{workers:R,wasms:k}=Yw("audio","simd",v);f.push(...R),h.push(...k)}else{const{workers:R,wasms:k}=Yw("audio","",v);f.push(...R),h.push(...k)}if(NZ()&&(function(){const{browser:R,browserVersion:k,isAndroidBrowser:N,isSupportSharedArrayBuffer:L}=bo;return!N&&R.toLowerCase()==="chrome"&&ZJ(k,"100")>0&&L})()){const{workers:R,wasms:k}=Yw(["video","sharing"],"videoShare",v);f.push(...R),h.push(...k)}else if(NZ()&&HSe()){const{workers:R,wasms:k}=Yw(["video","sharing"],"simd,thread",v);f.push(...R),h.push(...k)}else if(HSe()){const{workers:R,wasms:k}=Yw(["video","sharing"],"thread",v);f.push(...R),h.push(...k)}else if(NZ()){const{workers:R,wasms:k}=Yw(["video","sharing"],"simd",v);f.push(...R),h.push(...k)}else{const{workers:R,wasms:k}=Yw(["video","sharing"],"",v);f.push(...R),h.push(...k)}const{workers:y,wasms:_}=Yw("common","thread",v);f.push(...y),h.push(..._);const A=[Nfe(l,"script")];f.forEach((R=>{A.push(Nfe(R,"fetch"))})),h.forEach((R=>{A.push(Nfe(R,"fetch"))}));try{document.head.append(...A)}catch{}})(n)}}function fn(e,n,r,i,l){var f={};return Object.keys(i).forEach((function(h){f[h]=i[h]})),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=r.slice().reverse().reduce((function(h,v){return v(e,n,h)||h}),f),l&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(l):void 0,f.initializer=void 0),f.initializer===void 0?(Object.defineProperty(e,n,f),null):f}function hn(e,n,r){const i=r.value;r.value=function(...l){const f=this[Ia];if(f){const{meeting:{isOnHold:h,isMeetingReset:v,meetingStatus:y}}=f.getState();if(y!==Tu.Joined)return Promise.reject({type:mY,reason:"closed",errorCode:Fe.CLIENT_SESSION_STATE_CLOSED});if(v)return Promise.reject({type:mY,reason:"reconnecting",errorCode:Fe.CLIENT_SESSION_STATE_RECONNECTING});if(h)return Promise.reject({type:mY,reason:"on hold",errorCode:Fe.CLIENT_SESSION_STATE_ON_HOLD})}return i.apply(this,l)}}function Bc(e,n,r){const i=r.value;r.value=function(...l){const f=this[Ia];if(f){const h=f.getState();if(!Qh(h))return Promise.reject({type:hf,reason:"only host or co-host can do the operation",errorCode:Fe.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED})}return i.apply(this,l)}}function El(e,n,r){const i=r.value;r.value=function(...l){const f=this[Ia];if(f){const h=f.getState();if(!Gxe(h))return Promise.reject({type:hf,reason:"only host can do the operation",errorCode:Fe.CLIENT_HOST_PERMISSION_REQUIRED})}return i.apply(this,l)}}function ro(e){return function(n,r,i){const l=i.value;i.value=function(...f){const h=this[Ia];return h&&h.getState()[e]===void 0?Promise.reject({type:Lt,reason:`Module:${e} is not enabled`}):l.apply(this,f)}}}Dme.meetingClient=void 0,Dme.VERSION=fQ;var Z5e=(function(e){function n(r,i){var l=e.call(this,(function(f){var h=l.__notifier.subscribe(f);return h&&!h.closed&&f.next(l.value),h}))||this;return l.__notifier=new cb,l.value=i,r.subscribe((function(f){f!==l.value&&(l.value=f,l.__notifier.next(f))})),l}return dg(n,e),n})(Hc),QCe=function(e,n){return e===n||typeof n=="function"&&e===n.toString()};function co(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length;return Gt(r===1?function(i){return QCe(i.type,e[0])}:function(i){for(var l=0;l<r;l++)if(QCe(i.type,e[l]))return!0;return!1})}const kme=ga("CONNECT_ZOOM_SOCKET"),HZ=ga("CONNECT_XMPP_SOCKET"),lv=ga("CLOSE_ZOOM_SOCKET"),Mme=ga("CLOSE_XMPP_SOCKET"),X2=ga("RECEIVE_MESSAGE_FROM_ZOOM_SOCKET"),Y5e=ga("RECEIVE_SHARING_PAYLOAD_FROM_ZOOM_SOCKET"),Uke=ga("RECEIVE_MESSAGE_FROM_XMPP_SOCKET"),Nme=ga("CONNECT_MAIN_SESSION_SOCKET"),jke=ga("CLOSE_MAIN_SESSION_SOCKET"),iE=ga("RECEIVE_MESSAGE_FROM_MAIN_SESSION_SOCKET"),{setZoomSocketStatus:i5,setRwgServersList:zke,setRwgRetryCount:Tbe,setXmppSocketStatus:PY,setMainSessionSocketStatus:LY,setXmppSocketRetryCount:vX,resetSocket:Wke}=Ql("SET_ZOOM_SOCKET_STATUS","SET_RWG_SERVERS_LIST","SET_RWG_RETRY_COUNT","SET_XMPP_SOCKET_STATUS","SET_MAIN_SESSION_SOCKET_STATUS","SET_XMPP_SOCKET_RETRY_COUNT","RESET_SOCKET"),Pme=ga("CONNECT_TO_MEDIA_STREAM"),Gke=ga("RECEIVE_PAYLOAD_FROM_MEDIA_SDK"),{setAudioEncodeStatus:Lme,setAudioDecodeStatus:Bme,setVideoEncodeStatus:Vme,setVideoDecodeStatus:Hme,setSharingEncodeStatus:Fme,setSharingDecodeStatus:BY,setMediaConstraints:Obe,setMediaEncryptKey:qke,setIsEnableDecoderInWorklet:Kke,setPatchedMediaSdkStatus:VY,setMediaAssetsPath:Zke,setIsMediaAgentInitialized:$me,resetMedia:Yke}=Ql("SET_AUDIO_ENCODE_STATUS","SET_AUDIO_DECODE_STATUS","SET_VIDEO_ENCODE_STATUS","SET_VIDEO_DECODE_STATUS","SET_SHARING_ENCODE_STATUS","SET_SHARING_DECODE_STATUS","SET_MEDIA_CONSTRAINTS","SET_MEDIA_ENCRYPT_KEY","SET_IS_ENABLE_DECODER_IN_WORKLET","SET_PATCHED_MEDIA_SDK_STATUS","SET_MEDIA_ASSETS_PATH","SET_IS_MEDIA_AGENT_INITIALIZED","RESET_MEDIA");function J5e(e,n,...r){return e(Di(...r||[]),n,null)}function Jke(...e){const n=(...r)=>wl(...e.map((i=>{const l=i(...r);if(!l)throw new TypeError(`combineEpics: one of the provided Epics "${i.name||"<anonymous>"}" does not return a stream. Double check you're not missing a return statement!`);return l.pipe(tp(((f,h)=>(setTimeout((()=>{throw f}),0),h))))})));try{Object.defineProperty(n,"name",{value:`combineEpics(${e.map((r=>r.name||"<anonymous>")).join(", ")})`})}catch{}return n}function nh(...e){return Jke(...e.flatMap((n=>Object.values(n))))}function oo(e,n){return e.pipe(co(`${X2}`),Gt((r=>r.payload.evt===n)))}function TA(e,n){return e.pipe(co(`${iE}`),Gt((r=>r.payload.evt===n)))}function eL(e,n){return e.pipe(co(`${Uke}`),Gt((r=>r.payload.evt===n)))}function q0(e,n){return e.pipe(co(`${X2}`,`${iE}`),Gt((r=>r.payload.evt===n)))}function bs(e,n){return e.pipe(co(`${Gke}`),Gt((r=>Array.isArray(n)?n.indexOf(r.payload.type)>-1:r.payload.type===n)))}const Ume=20225,Ibe=20234,la=7937,av=7938,jme=12039,eEe=16138,AQ=4098,pP=4305,FZ=4343,zme=16428,X5e="SET_ATTENDEES_LIST",Q5e="SET_ASSISTANT_LIST",e6e="RESET_PARTICIPANTS",t6e="SET_IS_ADMIT_ALL_SILENT_USERS",n6e="SET_CLEAR_RAISE_HAND",o6e="SET_CLEAR_ATTENDEE_FEEDBACK",s6e="ADD_FAILOVER_ATTENDEES",r6e="REMOVE_FAILOVER_ATTENDEES",i6e="UPDATE_ATTENDEE_DISPLAY_NAME",a6e="REMOVE_XMPP_ATTENDEE_USER",c6e="UPDATE_XMPP_ATTENDEE_LIST",l6e="SET_ATTENDEE_EXTRA_KEY",{setAttendeesList:ML,setAssistantList:vWe,setIsAdmitAllSilentUsers:Xke,resetParticipants:Qke,addFailoverAttendees:Wme,removeFailoverAttendees:eMe,setClearRaiseHand:tMe,setClearAttendeeFeedback:nMe,updateAttendeeDisplayName:oMe,removeXmppAttendeeUser:sMe,updateXmppAttendeeList:rMe,setAttendeeExtraKey:M5}=Ql({[X5e]:e=>e,[Q5e]:e=>e,[c6e]:e=>e,[e6e]:()=>({}),[t6e]:e=>e,[r6e]:e=>e,[s6e]:e=>e,[n6e]:()=>({}),[o6e]:()=>({}),[i6e]:e=>e,[a6e]:e=>e,[l6e]:e=>e}),u6e={id:"userId",type:e=>$2(e)?{userType:e,avatarBackgroundType:Math.floor(8*Math.random())+1}:{userType:e},role:e=>({userRole:e,isHost:I5(e)}),dn2:e=>({displayName:hb(e)}),bShareOn:"sharerOn",bSharePause:"sharerPause",bLocalRecordStatus:e=>({bLocalRecord:e}),bGuest:"isGuest",bCapsRequestLT:"isRequestLT",customerKey:"userIdentity"},aE=e=>{const n={};return["add","remove","update"].forEach((r=>{const i=r,l=e[i];l!=null&&(n[i]=l.reduce(((f,h)=>{const v=Object.keys(h).reduce(((_,A)=>{const R=u6e[A];return typeof R=="function"?Object.assign(_,R(h[A])):typeof R=="string"?Object.assign(_,{[`${R}`]:h[A]}):Object.assign(_,{[`${A}`]:h[A]}),_}),{}),y=f.find((_=>_.userId===v.userId));return y!==void 0?Object.assign(y,v):f.push(v),f}),[]))})),n},d6e={name:"displayName",node:e=>({userId:Number(e)}),role:e=>({userRole:Number(e)})},Wfe=e=>Object.keys(e).reduce(((n,r)=>{const i=d6e[r];return typeof i=="function"?Object.assign(n,i(e[r])):typeof i=="string"?Object.assign(n,{[`${i}`]:e[r]}):Object.assign(n,{[`${r}`]:e[r]}),n}),{});let D1=(function(e){return e.Add="add",e.List="list",e.Remove="memberremove",e.rename="rename",e.update="UPDATE",e})({});function rb(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(l){return"'"+l+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function I2(e){return!!e&&!!e[ug]}function R2(e){var n;return!!e&&((function(r){if(!r||typeof r!="object")return!1;var i=Object.getPrototypeOf(r);if(i===null)return!0;var l=Object.hasOwnProperty.call(i,"constructor")&&i.constructor;return l===Object||typeof l=="function"&&Function.toString.call(l)===g6e})(e)||Array.isArray(e)||!!e[cEe]||!!(!((n=e.constructor)===null||n===void 0)&&n[cEe])||Rbe(e)||xbe(e))}function bX(e){return I2(e)||rb(23,e),e[ug].t}function N5(e,n,r){r===void 0&&(r=!1),NL(e)===0?(r?Object.keys:Pbe)(e).forEach((function(i){r&&typeof i=="symbol"||n(i,e[i],e)})):e.forEach((function(i,l){return n(l,i,e)}))}function NL(e){var n=e[ug];return n?n.i>3?n.i-4:n.i:Array.isArray(e)?1:Rbe(e)?2:xbe(e)?3:0}function Gme(e,n){return NL(e)===2?e.has(n):Object.prototype.hasOwnProperty.call(e,n)}function iMe(e,n,r){var i=NL(e);i===2?e.set(n,r):i===3?e.add(r):e[n]=r}function Rbe(e){return h6e&&e instanceof Map}function xbe(e){return m6e&&e instanceof Set}function WR(e){return e.o||e.t}function Dbe(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var n=v6e(e);delete n[ug];for(var r=Pbe(n),i=0;i<r.length;i++){var l=r[i],f=n[l];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(n[l]={configurable:!0,writable:!0,enumerable:f.enumerable,value:e[l]})}return Object.create(Object.getPrototypeOf(e),n)}function kbe(e,n){return n===void 0&&(n=!1),Mbe(e)||I2(e)||!R2(e)||(NL(e)>1&&(e.set=e.add=e.clear=e.delete=f6e),Object.freeze(e),n&&N5(e,(function(r,i){return kbe(i,!0)}),!0)),e}function f6e(){rb(2)}function Mbe(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function B1(e){var n=b6e[e];return n||rb(18,e),n}function tEe(){return P5}function Gfe(e,n){n&&(B1("Patches"),e.u=[],e.s=[],e.v=n)}function yX(e){qme(e),e.p.forEach(p6e),e.p=null}function qme(e){e===P5&&(P5=e.l)}function nEe(e){return P5={p:[],l:P5,h:e,m:!0,_:0}}function p6e(e){var n=e[ug];n.i===0||n.i===1?n.j():n.g=!0}function qfe(e,n){n._=n.p.length;var r=n.p[0],i=e!==void 0&&e!==r;return n.h.O||B1("ES5").S(n,e,i),i?(r[ug].P&&(yX(n),rb(4)),R2(e)&&(e=SX(n,e),n.l||CX(n,e)),n.u&&B1("Patches").M(r[ug].t,e,n.u,n.s)):e=SX(n,r,[]),yX(n),n.u&&n.v(n.u,n.s),e!==aMe?e:void 0}function SX(e,n,r){if(Mbe(n))return n;var i=n[ug];if(!i)return N5(n,(function(v,y){return oEe(e,i,n,v,y,r)}),!0),n;if(i.A!==e)return n;if(!i.P)return CX(e,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var l=i.i===4||i.i===5?i.o=Dbe(i.k):i.o,f=l,h=!1;i.i===3&&(f=new Set(l),l.clear(),h=!0),N5(f,(function(v,y){return oEe(e,i,l,v,y,r,h)})),CX(e,l,!1),r&&e.u&&B1("Patches").N(i,r,e.u,e.s)}return i.o}function oEe(e,n,r,i,l,f,h){if(I2(l)){var v=SX(e,l,f&&n&&n.i!==3&&!Gme(n.R,i)?f.concat(i):void 0);if(iMe(r,i,v),!I2(v))return;e.m=!1}else h&&r.add(l);if(R2(l)&&!Mbe(l)){if(!e.h.D&&e._<1)return;SX(e,l),n&&n.A.l||CX(e,l)}}function CX(e,n,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&kbe(n,r)}function Kfe(e,n){var r=e[ug];return(r?WR(r):e)[n]}function sEe(e,n){if(n in e)for(var r=Object.getPrototypeOf(e);r;){var i=Object.getOwnPropertyDescriptor(r,n);if(i)return i;r=Object.getPrototypeOf(r)}}function Kme(e){e.P||(e.P=!0,e.l&&Kme(e.l))}function Zfe(e){e.o||(e.o=Dbe(e.t))}function Zme(e,n,r){var i=Rbe(n)?B1("MapSet").F(n,r):xbe(n)?B1("MapSet").T(n,r):e.O?(function(l,f){var h=Array.isArray(l),v={i:h?1:0,A:f?f.A:tEe(),P:!1,I:!1,R:{},l:f,t:l,k:null,o:null,j:null,C:!1},y=v,_=Yme;h&&(y=[v],_=BU);var A=Proxy.revocable(y,_),R=A.revoke,k=A.proxy;return v.k=k,v.j=R,k})(n,r):B1("ES5").J(n,r);return(r?r.A:tEe()).p.push(i),i}function rEe(e,n){switch(n){case 2:return new Map(e);case 3:return Array.from(e)}return Dbe(e)}var iEe,P5,Nbe=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",h6e=typeof Map<"u",m6e=typeof Set<"u",aEe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",aMe=Nbe?Symbol.for("immer-nothing"):((iEe={})["immer-nothing"]=!0,iEe),cEe=Nbe?Symbol.for("immer-draftable"):"__$immer_draftable",ug=Nbe?Symbol.for("immer-state"):"__$immer_state",g6e=""+Object.prototype.constructor,Pbe=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,v6e=Object.getOwnPropertyDescriptors||function(e){var n={};return Pbe(e).forEach((function(r){n[r]=Object.getOwnPropertyDescriptor(e,r)})),n},b6e={},Yme={get:function(e,n){if(n===ug)return e;var r=WR(e);if(!Gme(r,n))return(function(l,f,h){var v,y=sEe(f,h);return y?"value"in y?y.value:(v=y.get)===null||v===void 0?void 0:v.call(l.k):void 0})(e,r,n);var i=r[n];return e.I||!R2(i)?i:i===Kfe(e.t,n)?(Zfe(e),e.o[n]=Zme(e.A.h,i,e)):i},has:function(e,n){return n in WR(e)},ownKeys:function(e){return Reflect.ownKeys(WR(e))},set:function(e,n,r){var i=sEe(WR(e),n);if(i!=null&&i.set)return i.set.call(e.k,r),!0;if(!e.P){var l=Kfe(WR(e),n),f=l==null?void 0:l[ug];if(f&&f.t===r)return e.o[n]=r,e.R[n]=!1,!0;if((function(h,v){return h===v?h!==0||1/h==1/v:h!=h&&v!=v})(r,l)&&(r!==void 0||Gme(e.t,n)))return!0;Zfe(e),Kme(e)}return e.o[n]===r&&(r!==void 0||n in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[n])||(e.o[n]=r,e.R[n]=!0),!0},deleteProperty:function(e,n){return Kfe(e.t,n)!==void 0||n in e.t?(e.R[n]=!1,Zfe(e),Kme(e)):delete e.R[n],e.o&&delete e.o[n],!0},getOwnPropertyDescriptor:function(e,n){var r=WR(e),i=Reflect.getOwnPropertyDescriptor(r,n);return i&&{writable:!0,configurable:e.i!==1||n!=="length",enumerable:i.enumerable,value:r[n]}},defineProperty:function(){rb(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){rb(12)}},BU={};N5(Yme,(function(e,n){BU[e]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}})),BU.deleteProperty=function(e,n){return BU.set.call(this,e,n,void 0)},BU.set=function(e,n,r){return Yme.set.call(this,e[0],n,r,e[0])};var y6e=(function(){function e(r){var i=this;this.O=aEe,this.D=!0,this.produce=function(l,f,h){if(typeof l=="function"&&typeof f!="function"){var v=f;f=l;var y=i;return function(B){var H=this;B===void 0&&(B=v);for(var q=arguments.length,Y=Array(q>1?q-1:0),K=1;K<q;K++)Y[K-1]=arguments[K];return y.produce(B,(function(se){var ie;return(ie=f).call.apply(ie,[H,se].concat(Y))}))}}var _;if(typeof f!="function"&&rb(6),h!==void 0&&typeof h!="function"&&rb(7),R2(l)){var A=nEe(i),R=Zme(i,l,void 0),k=!0;try{_=f(R),k=!1}finally{k?yX(A):qme(A)}return typeof Promise<"u"&&_ instanceof Promise?_.then((function(B){return Gfe(A,h),qfe(B,A)}),(function(B){throw yX(A),B})):(Gfe(A,h),qfe(_,A))}if(!l||typeof l!="object"){if((_=f(l))===void 0&&(_=l),_===aMe&&(_=void 0),i.D&&kbe(_,!0),h){var N=[],L=[];B1("Patches").M(l,_,N,L),h(N,L)}return _}rb(21,l)},this.produceWithPatches=function(l,f){if(typeof l=="function")return function(_){for(var A=arguments.length,R=Array(A>1?A-1:0),k=1;k<A;k++)R[k-1]=arguments[k];return i.produceWithPatches(_,(function(N){return l.apply(void 0,[N].concat(R))}))};var h,v,y=i.produce(l,f,(function(_,A){h=_,v=A}));return typeof Promise<"u"&&y instanceof Promise?y.then((function(_){return[_,h,v]})):[y,h,v]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var n=e.prototype;return n.createDraft=function(r){R2(r)||rb(8),I2(r)&&(r=(function(f){return I2(f)||rb(22,f),(function h(v){if(!R2(v))return v;var y,_=v[ug],A=NL(v);if(_){if(!_.P&&(_.i<4||!B1("ES5").K(_)))return _.t;_.I=!0,y=rEe(v,A),_.I=!1}else y=rEe(v,A);return N5(y,(function(R,k){_&&(function(N,L){return NL(N)===2?N.get(L):N[L]})(_.t,R)===k||iMe(y,R,h(k))})),A===3?new Set(y):y})(f)})(r));var i=nEe(this),l=Zme(this,r,void 0);return l[ug].C=!0,qme(i),l},n.finishDraft=function(r,i){var l=(r&&r[ug]).A;return Gfe(l,i),qfe(void 0,l)},n.setAutoFreeze=function(r){this.D=r},n.setUseProxies=function(r){r&&!aEe&&rb(20),this.O=r},n.applyPatches=function(r,i){var l;for(l=i.length-1;l>=0;l--){var f=i[l];if(f.path.length===0&&f.op==="replace"){r=f.value;break}}l>-1&&(i=i.slice(l+1));var h=B1("Patches").$;return I2(r)?h(r,i):this.produce(r,(function(v){return h(v,i)}))},e})(),tv=new y6e,We=tv.produce;tv.produceWithPatches.bind(tv),tv.setAutoFreeze.bind(tv),tv.setUseProxies.bind(tv),tv.applyPatches.bind(tv),tv.createDraft.bind(tv),tv.finishDraft.bind(tv);const lEe={attendeesList:[],assistantList:[],xmppAttendeeList:[],allowTalkAttendeesList:[],failoverAttendeesList:[],isAdmitAllSilentUsers:!1},S6e=op({[`${ML}`]:We(((e,{payload:n})=>{n.add!==void 0&&n.add.length>0&&n.add.forEach((r=>{if(r.userType===eme.Assitant){const i=e.assistantList.find((l=>l.userId===r.userId));i!==void 0?Object.assign(i,r):e.assistantList.push(r)}else if(KJ(r.userRole)){const i=e.allowTalkAttendeesList.find((l=>l.userId===r.userId));i!==void 0?Object.assign(i,r):e.allowTalkAttendeesList.push(r)}else{const i=e.attendeesList.find((l=>l.userId===r.userId));i!==void 0?Object.assign(i,r):e.attendeesList.push(r)}})),n.update!==void 0&&n.update.length>0&&n.update.forEach((r=>{const i=e.attendeesList.find((l=>l.userId===r.userId));if(i!==void 0)Object.assign(i,r);else{const l=e.allowTalkAttendeesList.find((f=>f.userId===r.userId));if(l!==void 0)Object.assign(l,r);else{const f=e.assistantList.find((h=>h.userId===r.userId));f!==void 0&&Object.assign(f,r)}}})),n.remove!==void 0&&n.remove.length>0&&n.remove.forEach((r=>{const i=e.attendeesList.findIndex((l=>l.userId===r.userId));if(i!==-1)e.attendeesList.splice(i,1);else{const l=e.allowTalkAttendeesList.findIndex((f=>f.userId===r.userId));if(l!==-1)e.allowTalkAttendeesList.splice(l,1);else{const f=e.assistantList.findIndex((h=>h.userId===r.userId));f!==-1&&e.assistantList.splice(f,1)}}}))})),[`${rMe}`]:We(((e,{payload:n})=>{const{xmppAttendeeList:r}=e,i=r.map((l=>l.jid));n.forEach((l=>{const{jid:f}=l,h=i.indexOf(f);h!==-1?Object.assign(r[h],l):r.push(l)}))})),[`${Xke}`]:We(((e,{payload:n})=>{e.isAdmitAllSilentUsers=n})),[`${tMe}`]:We((e=>{e.attendeesList.forEach((n=>{n.bRaiseHand&&(n.bRaiseHand=!1)}))})),[`${nMe}`]:We((e=>{e.attendeesList.forEach((n=>{n.feedback>0&&(n.feedback=0)}))})),[`${Wme}`]:We(((e,{payload:n})=>{e.failoverAttendeesList.push(n)})),[`${eMe}`]:We(((e,{payload:n})=>{n.forEach((r=>{const i=e.failoverAttendeesList.findIndex((l=>l.zoomID===r.zoomID));i!==-1&&e.failoverAttendeesList.splice(i,1)}))})),[`${oMe}`]:We(((e,{payload:n})=>{const{jid:r,name:i}=n,l=e.xmppAttendeeList.find((f=>f.jid===r));l&&(l.displayName=i)})),[`${sMe}`]:We(((e,{payload:n})=>{const{jid:r}=n,i=e.xmppAttendeeList.findIndex((l=>l.jid===r));r!==-1&&e.xmppAttendeeList.splice(i,1)})),[`${M5}`]:We(((e,{payload:n})=>{const{userId:r,key:i,value:l}=n,f=e.attendeesList.find((h=>h.userId===r));f&&(f[`${i}`]=l)})),[`${Qke}`]:()=>lEe},lEe),C6e={epics0:(e,n)=>oo(e,la).pipe(Kn((r=>aE(r.payload.body))),_o(n),Nt((([r,i])=>{let l=[ML(r)];const{meeting:{userId:f,isWebinar:h,isOnHold:v},participants:{attendeesList:y,failoverAttendeesList:_,allowTalkAttendeesList:A}}=i,R=A.map((N=>N.userId));if(r.add){const N=r.add.filter((B=>B.userId===f));N.length>0&&N.forEach((B=>{B.bHold!==void 0&&l.push(PP(B.bHold)),y.some((H=>H.userId===B.userId))?He(uf,B):He(a6,B)}));const L=r.add.filter((B=>B.userId!==f));if(L.length>0){const B=L.filter((q=>!KJ(q.userRole))).map((q=>{const Y={...q};if($2(q.userType)){var K;const ie=(K=i.audio)===null||K===void 0?void 0:K.dialout.find((le=>le.phoneNodeId===q.userId));ie&&Object.assign(Y,{phoneNumber:ie.phoneNumber})}const se=_.find((ie=>ie.zoomID===q.zoomID));return se&&Object.assign(Y,{source:se.isOnHold?"on hold":"failover"}),Y})),H=B.filter((q=>!!q.source)).map((q=>({zoomID:q.zoomID})));if(l.push(eMe(H)),He(mQ,B),h){const q=L.filter((Y=>KJ(Y.userRole)));q.length>0&&He(yA,q.map((Y=>({userId:Y.userId,isAllowToTalk:!0}))))}}}if(r.update){const N=r.update.filter((B=>B.userId===f));N.length>0&&N.forEach((B=>{He(uf,B),B.bHold!==void 0&&l.push(PP(B.bHold))}));const L=r.update.filter((B=>!(B.userId===f||R.includes(B.userId))));if(L.length>0&&He(Y0,L),h){const B=r.update.filter((H=>H.userId!==f&&R.includes(H.userId)));B.length>0&&He(yA,B)}}if(r.remove){const N=r.remove.map((L=>{const B=y.find((H=>H.userId===L.userId));return B?L.action===2&&L.nUserStatus===1?B.bHold?(l.push(Wme({zoomID:B.zoomID,isOnHold:!0})),{...L,...B,reason:"on hold"}):(l.push(Wme({zoomID:B.zoomID,isOnHold:!1})),{...L,...B,reason:"failover"}):{...L,...B}:null})).filter((L=>!!L));if(He(Jve,N),h){const L=r.remove.filter((B=>R.includes(B.userId)));L.length>0&&He(yA,L.map((B=>({userId:B.userId,isAllowToTalk:!1}))))}}const k=l.filter((N=>N.type===`${PP}`));if(k.length>0){const N=k[k.length-1];l=l.filter((L=>L.type!==`${PP}`)),N.payload!==v&&(l.push(N),He(Xve,!v))}return An(l)}))),epics1:(e,n)=>eL(e,24595).pipe(Nt((r=>{const{payload:{body:{action:i,data:l}}}=r,{meeting:{jid:f},participants:{xmppAttendeeList:h}}=n.value,v=[];if(i===D1.rename){l.forEach((_=>{v.push(oMe(_))}));const y=l.map((_=>Wfe(_)));He(yA,y)}if(i===D1.Remove){l.forEach((_=>{v.push(sMe(_))}));const y=l.map((_=>({...Wfe(_),removed:!0})));He(m2e,y)}if([D1.Add,D1.List,D1.update].includes(i)){const y=l.map((_=>{const A=Wfe(_);return Object.keys(A).reduce(((R,k)=>(A[k]!==""&&Object.assign(R,{[k]:A[k]}),R)),{})}));if(He(yA,y),v.push(rMe(y)),i===D1.update){const _=l.find((A=>A.jid===f));if(_&&_.bRaiseHand!==void 0){const A=h.find((R=>R.jid===f));(A==null?void 0:A.bRaiseHand)!==_.bRaiseHand&&He("MEETING_WEBINAR_ATTENDEE_RAISE_HAND",{bRaiseHand:_.bRaiseHand})}}}return An(v)}))),epics2:e=>oo(e,7951).pipe(ao((n=>{n.payload.body.bStarted===!1&&He("ADMIT_ALL_SILENT_USERS_END",n.payload.body.bStarted)})),Kn((n=>Xke(n.payload.body.bStarted)))),epics3:e=>oo(e,7946).pipe(Gt((n=>{var r;return["bRaiseHand","feedback"].includes((r=n.payload.body)===null||r===void 0?void 0:r.key)&&n.payload.body.value===0})),Kn((n=>(He(Y0,{}),n.payload.body.key==="bRaiseHand"?tMe():nMe()))))},E6e=nh(C6e);function uEe(e){return function(n,r,i){const l=i.value;i.value=function(...f){const h=this[Ia];if(h){const{meeting:{meetingOptions:v}}=h.getState();if(v[e]===!0)return Promise.reject({type:"OPERATION_LOCKED",reason:`${e} is locked`})}return l.apply(this,f)}}}let OA=(function(e){return e.Self="Self",e.Other="Other",e.Client="Client",e.Phone="Phone",e.Attendee="Attendee",e})({});function Yfe(e){return function(n,r,i){const l=i.value;i.value=function(f,...h){const v=this[Ia];if(v){const _=v.getState(),A=Array.isArray(e)?e:[e];let R=Ai(_).find((k=>k.userId===f));if(A.findIndex((k=>k===OA.Attendee))>-1&&(R=c6(_).find((k=>k.userId===f))),!R)return Promise.reject({type:gs,reason:"no matching user"});{const{meeting:{userId:k}}=v.getState();for(let N=0;N<A.length;N++){const L=A[N];if(L===OA.Other&&f===k)return Promise.reject({type:Lt,reason:"operation is not applicable to self"});if(L===OA.Self&&f!==k)return Promise.reject({type:Lt,reason:"operation is only applicable to self "});if(L===OA.Client&&$2(R.userType)||L===OA.Phone&&!$2(R.userType))return Promise.reject({types:Lt,reason:"improper target client"})}}}const y=[f,...h];return l.apply(this,y)}}}var Jfe,_6e=new Uint8Array(16);function w6e(){if(!Jfe&&!(Jfe=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Jfe(_6e)}for(var A6e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Xf=[],Xfe=0;Xfe<256;++Xfe)Xf.push((Xfe+256).toString(16).substr(1));function EX(e,n,r){var i=(e=e||{}).random||(e.rng||w6e)();return i[6]=15&i[6]|64,i[8]=63&i[8]|128,(function(l){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,h=(Xf[l[f+0]]+Xf[l[f+1]]+Xf[l[f+2]]+Xf[l[f+3]]+"-"+Xf[l[f+4]]+Xf[l[f+5]]+"-"+Xf[l[f+6]]+Xf[l[f+7]]+"-"+Xf[l[f+8]]+Xf[l[f+9]]+"-"+Xf[l[f+10]]+Xf[l[f+11]]+Xf[l[f+12]]+Xf[l[f+13]]+Xf[l[f+14]]+Xf[l[f+15]]).toLowerCase();if(!(function(v){return typeof v=="string"&&A6e.test(v)})(h))throw TypeError("Stringified UUID is invalid");return h})(i)}let Zr=(function(e){return e.LocalStorage="LocalStorage",e.SessionStorage="SessionStorage",e.Memory="Memory",e})({});const dEe=Vc("{}");class rr{constructor(n){this.sessionStorageKey=void 0,this.localStorageKey=void 0,this.sessionCache=void 0,this.localCache=void 0,this.memoryCache=void 0,this.sessionStorageKey=Vc(`zoom-storage-${n}`),this.localStorageKey=Vc("zoom-local-storage"),this.memoryCache={};try{this.sessionCache=JSON.parse(hb(sessionStorage.getItem(this.sessionStorageKey)||dEe)),this.localCache=JSON.parse(hb(localStorage.getItem(this.localStorageKey)||dEe))}catch(r){console.error(r),this.sessionCache={},this.localCache={}}}static init(n){this.instance=new rr(n)}static get(n){if(this.instance===void 0)throw new Error("read before initial");return this.instance.getValue(n).value}static set(n,r,i){if(this.instance===void 0)throw new Error("set before initial");return this.instance.setValue(n,r,i)}static remove(n){if(this.instance===void 0)throw new Error("remove before initial");return this.instance.removeValue(n)}static clearSession(){if(this.instance!==void 0)return this.instance.memoryCache={},this.instance.sessionCache={},this.instance.localCache={},sessionStorage.removeItem(this.instance.sessionStorageKey);console.warn("clear before initial")}getValue(n){return this.sessionCache.hasOwnProperty(n)?{value:this.sessionCache[n],type:Zr.SessionStorage}:this.localCache.hasOwnProperty(n)?{value:this.localCache[n],type:Zr.LocalStorage}:{value:this.memoryCache[n],type:Zr.Memory}}setValue(n,r,i){if(!n)throw new Error("key is null");switch(i){case Zr.SessionStorage:{const l=this.sessionCache[n];let f=r;return typeof r=="function"&&(f=r(l)),l!==f&&(this.sessionCache[n]=f,this.flushValue(Zr.SessionStorage)),f}case Zr.LocalStorage:{const l=this.localCache[n];let f=r;return typeof r=="function"&&(f=r(l)),l!==f&&(this.localCache[n]=f,this.flushValue(Zr.LocalStorage)),f}case Zr.Memory:{const l=this.memoryCache[n];let f=r;return typeof r=="function"&&(f=r(l)),this.memoryCache[n]=f,f}default:return null}}removeValue(n){const{type:r}=this.getValue(n);switch(r){case Zr.SessionStorage:delete this.sessionCache[n],this.flushValue(Zr.SessionStorage);break;case Zr.LocalStorage:delete this.localCache[n],this.flushValue(Zr.LocalStorage);break;case Zr.Memory:delete this.memoryCache[n]}}flushValue(n){n===Zr.SessionStorage?sessionStorage.setItem(this.sessionStorageKey,Vc(JSON.stringify(this.sessionCache))):n===Zr.LocalStorage&&localStorage.setItem(this.localStorageKey,Vc(JSON.stringify(this.localCache)))}}rr.instance=void 0;let Bi=(function(e){return e.WebclientOpt="WEB_CLIENT_OPT",e.WebclientWebinarToken="WEB_CLIENT_WEBINAR_TOKEN",e.WebclientMeetingToken="WEB_CLIENT_MEETING_TOKEN",e.WebclientZtk="WEB_CLIENT_ZTK",e.WebclientZsk="WEB_CLIENT_ZSK",e.WebclientTk="WEB_CLIENT_TK",e.WebclientIVState="WEB_CLIENT_IV_STATE",e.WebclientIsOnHold="WEB_CLIENT_IS_ON_HOLD",e.WebclientParticipantId="WEB_CLIENT_PARTICIPANT_ID",e.WebclientZoomId="WEB_CLIENT_ZOOM_ID",e.WebclientUserName="WEB_CLIENT_USER_NAME",e.WebclientUserEmail="WEB_CLIENT_USER_EMAIL",e.WebclientBreakoutRoomAttendeeStatus="WEB_CLIENT_BO_ATTENDEE_STATUS",e.WebclientBreakoutRoomCommand="WEB_CLIENT_BO_COMMAND",e.WebclientAudioEncryptKey="WEB_CLIENT_AUDIO_ENCRYPT_KEY",e.WebclientVideoEncryptKey="WEB_CLIENT_VIDEO_ENCRYPT_KEY",e.WebclientSharingEncryptKey="WEB_CLIENT_SHARING_ENCRYPT_KEY",e.WebclientFailoverCount="WEB_CLIENT_FAILOVER_COUNT",e.WebclientRecordingToken="WEB_CLIENT_RECORDING_TOKEN",e.VideoSDKWebRTCAudioFallbackWasm="VIDEO_SDK_WEB_RTC_AUDIO_FALLBACK_WASM",e.VideoSDKWebRTCVideoFallbackWasm="VIDEO_SDK_WEB_RTC_VIDEO_FALLBACK_WASM",e.VIDEO_SDK_BROADCAST_STREAMING_CHANNEL_ID="VIDEO_SDK_BROADCAST_STREAMING_CHANNEL_ID",e})({}),Jme=(function(e){return e.WebclientDeviceId="WEBCLIENT_DEVICE_ID",e.VSDKLogTrackingId="ZM_VSDK_LOG_TRACKING_IDS",e})({}),cMe=(function(e){return e.DisableAutoReportLogs="DISABLE_AUTO_REPORT_LOGS",e})({});var sf,rl,_X,P1;(function(e){e[e.PLAIN=0]="PLAIN",e[e.RSA=1]="RSA",e[e.AESGCM256=2]="AESGCM256"})(sf||(sf={})),(function(e){e[e.info=0]="info",e[e.debug=1]="debug",e[e.log=2]="log",e[e.warn=3]="warn",e[e.error=4]="error"})(rl||(rl={})),(function(e){e[e.PROTECT_LOCAL_KEY=0]="PROTECT_LOCAL_KEY"})(_X||(_X={})),(function(e){e.beforeInit="beforeInit",e.afterInit="afterInit",e.beforeLog="beforeLog",e.hitSizeLimit="hitSizeLimit",e.afterLog="afterLog",e.beforeReport="beforeReport",e.afterReport="afterReport"})(P1||(P1={}));class Lbe{constructor(){}}var fEe,pEe,hEe={exports:{}},mEe={exports:{}},T6e=(function(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var n=e.default;if(typeof n=="function"){var r=function i(){var l=!1;try{l=this instanceof i}catch{}return l?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(i){var l=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,l.get?l:{enumerable:!0,get:function(){return e[i]}})})),r})(Object.freeze({__proto__:null,default:{}}));function lMe(){return fEe||(fEe=1,mEe.exports=(e=e||(function(n){var r;if(typeof window<"u"&&window.crypto&&(r=window.crypto),typeof self<"u"&&self.crypto&&(r=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(r=globalThis.crypto),!r&&typeof window<"u"&&window.msCrypto&&(r=window.msCrypto),!r&&u2!==void 0&&u2.crypto&&(r=u2.crypto),!r)try{r=T6e}catch{}var i=function(){if(r){if(typeof r.getRandomValues=="function")try{return r.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof r.randomBytes=="function")try{return r.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},l=Object.create||(function(){function B(){}return function(H){var q;return B.prototype=H,q=new B,B.prototype=null,q}})(),f={},h=f.lib={},v=h.Base={extend:function(B){var H=l(this);return B&&H.mixIn(B),H.hasOwnProperty("init")&&this.init!==H.init||(H.init=function(){H.$super.init.apply(this,arguments)}),H.init.prototype=H,H.$super=this,H},create:function(){var B=this.extend();return B.init.apply(B,arguments),B},init:function(){},mixIn:function(B){for(var H in B)B.hasOwnProperty(H)&&(this[H]=B[H]);B.hasOwnProperty("toString")&&(this.toString=B.toString)},clone:function(){return this.init.prototype.extend(this)}},y=h.WordArray=v.extend({init:function(B,H){B=this.words=B||[],this.sigBytes=H??4*B.length},toString:function(B){return(B||A).stringify(this)},concat:function(B){var H=this.words,q=B.words,Y=this.sigBytes,K=B.sigBytes;if(this.clamp(),Y%4)for(var se=0;se<K;se++){var ie=q[se>>>2]>>>24-se%4*8&255;H[Y+se>>>2]|=ie<<24-(Y+se)%4*8}else for(var le=0;le<K;le+=4)H[Y+le>>>2]=q[le>>>2];return this.sigBytes+=K,this},clamp:function(){var B=this.words,H=this.sigBytes;B[H>>>2]&=4294967295<<32-H%4*8,B.length=n.ceil(H/4)},clone:function(){var B=v.clone.call(this);return B.words=this.words.slice(0),B},random:function(B){for(var H=[],q=0;q<B;q+=4)H.push(i());return new y.init(H,B)}}),_=f.enc={},A=_.Hex={stringify:function(B){for(var H=B.words,q=B.sigBytes,Y=[],K=0;K<q;K++){var se=H[K>>>2]>>>24-K%4*8&255;Y.push((se>>>4).toString(16)),Y.push((15&se).toString(16))}return Y.join("")},parse:function(B){for(var H=B.length,q=[],Y=0;Y<H;Y+=2)q[Y>>>3]|=parseInt(B.substr(Y,2),16)<<24-Y%8*4;return new y.init(q,H/2)}},R=_.Latin1={stringify:function(B){for(var H=B.words,q=B.sigBytes,Y=[],K=0;K<q;K++){var se=H[K>>>2]>>>24-K%4*8&255;Y.push(String.fromCharCode(se))}return Y.join("")},parse:function(B){for(var H=B.length,q=[],Y=0;Y<H;Y++)q[Y>>>2]|=(255&B.charCodeAt(Y))<<24-Y%4*8;return new y.init(q,H)}},k=_.Utf8={stringify:function(B){try{return decodeURIComponent(escape(R.stringify(B)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(B){return R.parse(unescape(encodeURIComponent(B)))}},N=h.BufferedBlockAlgorithm=v.extend({reset:function(){this._data=new y.init,this._nDataBytes=0},_append:function(B){typeof B=="string"&&(B=k.parse(B)),this._data.concat(B),this._nDataBytes+=B.sigBytes},_process:function(B){var H,q=this._data,Y=q.words,K=q.sigBytes,se=this.blockSize,ie=K/(4*se),le=(ie=B?n.ceil(ie):n.max((0|ie)-this._minBufferSize,0))*se,M=n.min(4*le,K);if(le){for(var we=0;we<le;we+=se)this._doProcessBlock(Y,we);H=Y.splice(0,le),q.sigBytes-=M}return new y.init(H,M)},clone:function(){var B=v.clone.call(this);return B._data=this._data.clone(),B},_minBufferSize:0});h.Hasher=N.extend({cfg:v.extend(),init:function(B){this.cfg=this.cfg.extend(B),this.reset()},reset:function(){N.reset.call(this),this._doReset()},update:function(B){return this._append(B),this._process(),this},finalize:function(B){return B&&this._append(B),this._doFinalize()},blockSize:16,_createHelper:function(B){return function(H,q){return new B.init(q).finalize(H)}},_createHmacHelper:function(B){return function(H,q){return new L.HMAC.init(B,q).finalize(H)}}});var L=f.algo={};return f})(Math),e)),mEe.exports;var e}var gEe,Qfe,uMe=pEe?hEe.exports:(pEe=1,hEe.exports=lMe().enc.Utf8),vEe={exports:{}},dMe=(gEe||(gEe=1,vEe.exports=(Qfe=lMe(),(function(){var e=Qfe,n=e.lib.WordArray;function r(i,l,f){for(var h=[],v=0,y=0;y<l;y++)if(y%4){var _=f[i.charCodeAt(y-1)]<<y%4*2|f[i.charCodeAt(y)]>>>6-y%4*2;h[v>>>2]|=_<<24-v%4*8,v++}return n.create(h,v)}e.enc.Base64={stringify:function(i){var l=i.words,f=i.sigBytes,h=this._map;i.clamp();for(var v=[],y=0;y<f;y+=3)for(var _=(l[y>>>2]>>>24-y%4*8&255)<<16|(l[y+1>>>2]>>>24-(y+1)%4*8&255)<<8|l[y+2>>>2]>>>24-(y+2)%4*8&255,A=0;A<4&&y+.75*A<f;A++)v.push(h.charAt(_>>>6*(3-A)&63));var R=h.charAt(64);if(R)for(;v.length%4;)v.push(R);return v.join("")},parse:function(i){var l=i.length,f=this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var v=0;v<f.length;v++)h[f.charCodeAt(v)]=v}var y=f.charAt(64);if(y){var _=i.indexOf(y);_!==-1&&(l=_)}return r(i,l,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})(),Qfe.enc.Base64)),vEe.exports),wX=function(e,n,r,i){return new(r||(r=Promise))((function(l,f){function h(_){try{y(i.next(_))}catch(A){f(A)}}function v(_){try{y(i.throw(_))}catch(A){f(A)}}function y(_){var A;_.done?l(_.value):(A=_.value,A instanceof r?A:new r((function(R){R(A)}))).then(h,v)}y((i=i.apply(e,[])).next())}))};const O6e=e=>{try{const n=dMe.parse(e);return uMe.stringify(n)}catch{return e}},AX=e=>{for(var n=e.length,r=e.length-1;r>=0;r--){var i=e.charCodeAt(r);i>127&&i<=2047?n++:i>2047&&i<=65535&&(n+=2),i>=56320&&i<=57343&&r--}return n},fMe=()=>wX(void 0,void 0,void 0,(function*(){return yield self.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"])})),I6e=(e,n,r)=>wX(void 0,void 0,void 0,(function*(){try{return yield self.crypto.subtle.encrypt({name:"AES-GCM",iv:r},n,e)}catch(i){throw i}})),R6e=(e,n)=>{const r=typeof e=="string"?(function(i){const l=new ArrayBuffer(i.length),f=new Uint8Array(l);for(let h=0,v=i.length;h<v;h++)f[h]=i.charCodeAt(h);return l})(e):e;return self.crypto.subtle.encrypt({name:"RSA-OAEP"},n,r)},pMe={},TX=(e,n)=>{pMe[n]=e},x6e=pMe,Bbe=e=>{try{return JSON.stringify(e)}catch{return"json stringify failed"}},D6e=e=>{try{return JSON.parse(e)}catch{return e}},bEe=e=>{let n=0;return n+=AX(e.message),e.tags.forEach((r=>{n+=AX(r)})),n};class k6e{constructor(n){this.uuid="randomUUID"in self.crypto?self.crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(k=>(k^crypto.getRandomValues(new Uint8Array(1))[0]&15>>k/4).toString(16)));const{databaseName:r,maxSize:i,publicKey:l,reportUrl:f,plugins:h,idbManager:v,logManager:y,currentSize:_,externalKeys:A,codecWorkerFilePath:R}=n;this.databaseName=r,this.maxSize=i,this.publicKey=l??"",this.reportUrl=f??"",this.plugins=h??[],this.idbManager=v,this.logManager=y,this.currentSize=_??0,this.externalKeys=A,this.commonMethods=Object.assign({},x6e)}getLocalAESGCM256Key(){var n;return(function(r,i,l,f){return new(l||(l=Promise))((function(h,v){function y(R){try{A(f.next(R))}catch(k){v(k)}}function _(R){try{A(f.throw(R))}catch(k){v(k)}}function A(R){var k;R.done?h(R.value):(k=R.value,k instanceof l?k:new l((function(N){N(k)}))).then(y,_)}A((f=f.apply(r,[])).next())}))})(this,void 0,void 0,(function*(){if(this.localAESGCM256Key)return this.localAESGCM256Key;this.localAESGCM256Key=yield fMe();const r=this.externalKeys?(n=this.externalKeys.filter((i=>i.usage===_X.PROTECT_LOCAL_KEY))[0])===null||n===void 0?void 0:n.key:void 0;return yield this.idbManager.saveAESGCM256Key(this.uuid,this.localAESGCM256Key,r),this.localAESGCM256Key}))}updateCurrentSize(n){var r;let i=(r=this.currentSize)!==null&&r!==void 0?r:0;if(n instanceof Map)for(const[l,f]of n)i+=bEe(f);else i+=bEe(n);return this.currentSize=i,i>=this.maxSize}}const epe=(...e)=>{const n={},r=[];for(const l of e)l.forEach((f=>{n[f.id]||(n[f.id]=!0,r.push(f))}));const i=new Map;return r.sort(((l,f)=>(l==null?void 0:l.id)-(f==null?void 0:f.id))).forEach((l=>{i.set(l.id,l)})),i},$Z=(e,n)=>{const r=new Map;return n.forEach((i=>{e(i)&&r.set(i.id,i)})),r};class M6e{constructor(){this.getStore=()=>({byTag:Object.assign({},this.store.byTag),byTime:new Map(this.store.byTime)}),this.pushByTime=n=>{for(const r of n)this.store.byTime.set(r.id,r)},this.pushByTag=n=>{n.forEach((r=>{const i=r.tags;Array.isArray(i)&&i.forEach((l=>{this.store.byTag[l]||(this.store.byTag[l]=new Map),this.store.byTag[l].set(r.id,r)}))}))},this.addLog=n=>{let r=n;Array.isArray(n)||(r=[n]),this.pushByTime(r),this.pushByTag(r)},this.syncFromIDB=n=>(function(r,i,l,f){return new(l||(l=Promise))((function(h,v){function y(R){try{A(f.next(R))}catch(k){v(k)}}function _(R){try{A(f.throw(R))}catch(k){v(k)}}function A(R){var k;R.done?h(R.value):(k=R.value,k instanceof l?k:new l((function(N){N(k)}))).then(y,_)}A((f=f.apply(r,[])).next())}))})(this,void 0,void 0,(function*(){const r=yield n.getAllLogs();this.addLog(r)})),this.reset=()=>{this.store={byTag:{},byTime:new Map}},this.deleteLogs=n=>{for(const r of n){const i=this.store.byTime.get(r);if(!i)continue;const{tags:l}=i;for(const f of l)this.store.byTag[f].delete(r);this.store.byTime.delete(r)}},this.filterStore=n=>{const r=((l,f)=>{if(!f)return l.byTime;if(typeof f=="string")return l.byTag[f]||new Map;if(Array.isArray(f)){if(f.every((h=>typeof h=="string")))return epe(...f.map((h=>l.byTag[h])).filter((h=>!!h)))}else{if(typeof f=="function")return $Z(f,l.byTime);if(typeof f=="object")if(f.tags&&f.filter){if(typeof f.tags=="string")return $Z(f.filter,l.byTag[f.tags]);if(Array.isArray(f.tags)&&f.tags.every((h=>typeof h=="string")))return epe(...f.tags.map((h=>{const v=l.byTag[h];return v?$Z(f.filter,v):new Map})))}else{if(f.filter)return $Z(f.filter,l.byTime);if(f.tags){if(typeof f=="string")return l.byTag[f]||new Map;if(Array.isArray(f)&&f.every((h=>typeof h=="string")))return epe(...f.map((h=>l.byTag[h])))}}else console.error("Wrong filter type")}return new Map})(this.store,n),i=new Map;for(const[l,f]of r){const h=Object.assign(Object.assign({},f),{message:D6e(O6e(f.message))});i.set(l,h)}return i},this.store={byTag:{},byTime:new Map}}}function LA(e,n,r){const i=e.plugins;if(!Array.isArray(i))return r;let l=r;return i.forEach((f=>{const h=f[n];if(typeof h=="function"){const v=h(e,l);v&&(l=v)}})),l}const hMe=(e,n,r,i,l,f={})=>(function(h,v,y,_){return new(y||(y=Promise))((function(A,R){function k(B){try{L(_.next(B))}catch(H){R(H)}}function N(B){try{L(_.throw(B))}catch(H){R(H)}}function L(B){var H;B.done?A(B.value):(H=B.value,H instanceof y?H:new y((function(q){q(H)}))).then(k,N)}L((_=_.apply(h,[])).next())}))})(void 0,void 0,void 0,(function*(){const{noCache:h,extraProperties:v={}}=f,y=((A,R,k,N,L,B)=>{const H=Array.isArray(R)?R:[R],q=Date.now();return Object.assign({message:A,logLevel:k,tags:H,encryptMode:N,timestamp:q,laplaceSessionId:L},B)})(`${n}`,r,i,l,e.uuid,v),_=LA(e,P1.beforeLog,y);if(h)LA(e,P1.afterLog,y);else{const{idbManager:A,logManager:R}=e,k=yield A.makeNextId();_.message=(L=>{try{const B=uMe.parse(L);return dMe.stringify(B)}catch{return L}})(_.message);const N=Object.assign(Object.assign({},_),{id:k});e.updateCurrentSize(N)&&LA(e,P1.hitSizeLimit,N),R.addLog(N),yield A.addLog(N),LA(e,P1.afterLog,N)}}));TX(hMe,"commonLog");const N6e=e=>new Promise((n=>{if(e.isSendByBeacon)navigator.sendBeacon?(navigator.sendBeacon(e.url,e.data),n({report:e.reportItem})):n({error:"sendBeacon is not supported",report:e.reportItem});else{const r=new XMLHttpRequest;r.open(e.type||"GET",e.url,!0),r.withCredentials=e.withCredentials,r.onerror=i=>{n({error:i,report:e.reportItem})},r.onreadystatechange=function(){if(r.readyState===4){const i=r.status;n(i>=200&&i<300?{report:e.reportItem}:{error:`Request failed, status: ${i}, responseText: ${r.responseText}`,report:e.reportItem})}},Object.entries(e.headers).forEach((([i,l])=>{l&&i&&r.setRequestHeader(i,l)})),r.send(e.data)}})),hP=(e,n=2)=>{let r=`${e}`;for(;r.length<n;)r=`0${r}`;return r},mMe=e=>{const n=new Date(e);return`${n.getUTCFullYear()}-${hP(n.getUTCMonth()+1)}-${hP(n.getUTCDate())} ${hP(n.getUTCHours())}:${hP(n.getUTCMinutes())}:${hP(n.getUTCSeconds())}.${hP(n.getUTCMilliseconds(),3)}`},gMe={version:"000001",flag:"0"},P6e=(e,n)=>Array.from(e.values()).reduce(((r,i)=>{const l=((v,y)=>{const{message:_,logLevel:A,tags:R,timestamp:k,encryptMode:N,id:L}=v,B=(function(q,Y){var K={};for(var se in q)Object.prototype.hasOwnProperty.call(q,se)&&Y.indexOf(se)<0&&(K[se]=q[se]);if(q!=null&&typeof Object.getOwnPropertySymbols=="function"){var ie=0;for(se=Object.getOwnPropertySymbols(q);ie<se.length;ie++)Y.indexOf(se[ie])<0&&Object.prototype.propertyIsEnumerable.call(q,se[ie])&&(K[se[ie]]=q[se[ie]])}return K})(v,["message","logLevel","tags","timestamp","encryptMode","id"]),H=Object.assign(Object.assign({time:mMe(k),logLevel:rl[A],message:_,tags:R},y),B);return Bbe(H)})(i,n),f=AX(l),h=r[r.length-1];return h.currentSize+f>30720?r.push({messages:[l],ids:[i.id],currentSize:f}):(h.messages.push(l),h.ids.push(i.id),h.currentSize+=f),r}),[{messages:[],ids:[],currentSize:0}]).filter((r=>r.currentSize>0)).map((r=>({messages:r.messages.join(`
`),ids:r.ids,meta:gMe}))),vMe=(e,n,r)=>((i,l,f)=>Promise.all(i.map((h=>Object.assign({url:l||"",type:"POST",withCredentials:!1,headers:{},data:Bbe({messages:h.messages,meta:h.meta}),reportItem:h},f))).map(N6e)))(e,n.reportUrl,r).then((i=>{i.forEach((l=>{var f;LA(n,P1.afterReport,{report:l.report,error:(f=l.error)!==null&&f!==void 0?f:null})}))})),bMe=(e,n,r)=>(function(i,l,f,h){return new(f||(f=Promise))((function(v,y){function _(k){try{R(h.next(k))}catch(N){y(N)}}function A(k){try{R(h.throw(k))}catch(N){y(N)}}function R(k){var N;k.done?v(k.value):(N=k.value,N instanceof f?N:new f((function(L){L(N)}))).then(_,A)}R((h=h.apply(i,[])).next())}))})(void 0,void 0,void 0,(function*(){const i=e.logManager.filterStore(n);if(!i||(i==null?void 0:i.size)===0||!r)return;const{xhrOptions:l={},additionalContext:f}=r,h=LA(e,P1.beforeReport,i),v=P6e(h,f);vMe(v,e,l)}));TX(bMe,"commonReport");var yMe=function(e,n,r,i){return new(r||(r=Promise))((function(l,f){function h(_){try{y(i.next(_))}catch(A){f(A)}}function v(_){try{y(i.throw(_))}catch(A){f(A)}}function y(_){var A;_.done?l(_.value):(A=_.value,A instanceof r?A:new r((function(R){R(A)}))).then(h,v)}y((i=i.apply(e,[])).next())}))};const SMe=(e,n,r)=>yMe(void 0,void 0,void 0,(function*(){const{idbManager:i,logManager:l}=e;if(Array.isArray(r)&&(yield i.deleteLogs(r),l.deleteLogs(r),!n))return;const f=e.logManager.filterStore(n),h=[];for(const[y,_]of f)h.push(_.id);let v=h;Array.isArray(h)||(v=[h]),yield i.deleteLogs(v),l.deleteLogs(v)})),CMe=e=>yMe(void 0,void 0,void 0,(function*(){const{idbManager:n,logManager:r}=e;yield n.reset(),r.reset()}));function UA(e){return new Promise(((n,r)=>{e.oncomplete=e.onsuccess=()=>n(e.result),e.onabort=e.onerror=()=>r(e.error)}))}function EMe(e,n){let r;return(i,l)=>(()=>{if(r)return r;const f=indexedDB.open(e);return f.onupgradeneeded=()=>f.result.createObjectStore(n),r=UA(f),r.then((h=>{h.onclose=()=>r=void 0}),(()=>{})),r})().then((f=>l(f.transaction(n,i).objectStore(n))))}let tpe;function a5(){return tpe||(tpe=EMe("keyval-store","keyval")),tpe}function yEe(e,n=a5()){return n("readwrite",(r=>(e.forEach((i=>r.delete(i))),UA(r.transaction))))}function L6e(e=a5()){return e("readonly",(n=>{if(n.getAll&&n.getAllKeys)return Promise.all([UA(n.getAllKeys()),UA(n.getAll())]).then((([i,l])=>i.map(((f,h)=>[f,l[h]]))));const r=[];return e("readonly",(i=>(function(l){return l.openCursor().onsuccess=function(){this.result&&((f=>{r.push([f.key,f.value])})(this.result),this.result.continue())},UA(l.transaction)})(i).then((()=>r))))}))}TX(SMe,"commonDelete"),TX(CMe,"commonReset");const SEe={default:{queue:[],isRunning:!1,listeners:[]}},Vbe=e=>{let n=SEe[e];return n||(n={queue:[],isRunning:!1,listeners:[]},SEe[e]=n),n};function _Me(e){return(function(n,r,i,l){return new(i||(i=Promise))((function(f,h){function v(A){try{_(l.next(A))}catch(R){h(R)}}function y(A){try{_(l.throw(A))}catch(R){h(R)}}function _(A){var R;A.done?f(A.value):(R=A.value,R instanceof i?R:new i((function(k){k(R)}))).then(v,y)}_((l=l.apply(n,[])).next())}))})(this,void 0,void 0,(function*(){const n=Vbe(e),{queue:r,listeners:i}=n;for(;r.length>0&&!n.isRunning;){const l=r.shift();n.isRunning=!0;try{const f=yield l.task();l.resolution(f)}catch(f){l.rejection(f)}n.isRunning=!1,_Me(e)}i.length&&i.forEach((l=>{l()}))}))}function UZ(e,n="default"){const r=Vbe(n);try{return new Promise(((i,l)=>{r.queue.push({task:e,resolution:i,rejection:l}),_Me(n)}))}catch(i){return Promise.reject(i)}}const CEe=(e,n)=>{Vbe(e).listeners.push(n)};var Jg=function(e,n,r,i){return new(r||(r=Promise))((function(l,f){function h(_){try{y(i.next(_))}catch(A){f(A)}}function v(_){try{y(i.throw(_))}catch(A){f(A)}}function y(_){var A;_.done?l(_.value):(A=_.value,A instanceof r?A:new r((function(R){R(A)}))).then(h,v)}y((i=i.apply(e,[])).next())}))};const npe="change_meta",ope="change_log",mP=()=>Promise.resolve();class B6e{constructor(n){this.waitingForReset=!1,this.resetting=!1,this.isChangingMeta=!1,this.isChangingLog=!1,this.dbFailCount={read:0,write:0},this.get=r=>(function(i,l=a5()){return l("readonly",(f=>UA(f.get(i))))})(r,this.store),this.set=(r,i)=>Jg(this,void 0,void 0,(function*(){try{return!(this.dbFailCount.write>3)&&(yield(function(l,f,h=a5()){return h("readwrite",(v=>(v.put(f,l),UA(v.transaction))))})(r,i,this.store))}catch(l){l instanceof DOMException&&(l&&l.name==="QuotaExceededError"?(yield this.deleteOldLogsForSetNewOne(),yield this.set(r,i)):this.dbFailCount.write+=1),console.error(l)}})),this.deleteOldLogsForSetNewOne=()=>Jg(this,void 0,void 0,(function*(){var r;const i=yield this.getAllLogs(),l=[];for(let f=0;f<13;f++){const h=(r=i[f])===null||r===void 0?void 0:r.id;(h||h===0)&&l.push(`${h}`)}return yEe(l,this.store)})),this.adjustMaxId=()=>Jg(this,void 0,void 0,(function*(){return this.resetting?mP():(this.isChangingMeta=!0,yield UZ((()=>Jg(this,void 0,void 0,(function*(){var r;const i=yield this.getAllLogs(),l=i[i.length-1],f=(r=l==null?void 0:l.id)!==null&&r!==void 0?r:0;return yield this.set("maxId",f),f}))),npe))})),this.makeNextId=()=>Jg(this,void 0,void 0,(function*(){return this.resetting?mP():(this.isChangingMeta=!0,yield UZ((()=>Jg(this,void 0,void 0,(function*(){const r=yield this.get("maxId");if(!r&&r!==0)return yield this.set("maxId",0),0;const i=r+1;return yield this.set("maxId",i),i}))),npe))})),this.addLog=r=>Jg(this,void 0,void 0,(function*(){if(this.resetting)return mP();this.isChangingLog=!0,yield UZ((()=>Jg(this,void 0,void 0,(function*(){const{id:i}=r;return this.set(`${i}`,r)}))),ope)})),this.getAllLogs=()=>Jg(this,void 0,void 0,(function*(){return(yield L6e(this.store)).filter((([r])=>r!=="maxId")).sort(((r,i)=>{var l,f;return((l=r[1])===null||l===void 0?void 0:l.id)-((f=i[1])===null||f===void 0?void 0:f.id)})).map((([,r])=>r))})),this.deleteLogs=r=>Jg(this,void 0,void 0,(function*(){if(this.resetting)return mP();this.isChangingLog=!0,yield UZ((()=>Jg(this,void 0,void 0,(function*(){return yEe(r.map((i=>`${i}`)),this.store)}))),ope),yield this.adjustMaxId()})),this.saveAESGCM256Key=(r,i,l)=>Jg(this,void 0,void 0,(function*(){if(l){const f=yield self.crypto.subtle.exportKey("raw",i),h=yield((v,y,_)=>wX(void 0,void 0,void 0,(function*(){return new Promise(((A,R)=>{requestAnimationFrame((()=>wX(void 0,void 0,void 0,(function*(){var k;const N=(k=y==null?void 0:y.algorithm)===null||k===void 0?void 0:k.name;let L;if(N==="RSA-OAEP"?L=R6e:N==="AES-GCM"&&(L=I6e),!L)throw new Error("Unsupported encrypt key type");if(typeof v=="string"){const B=new TextEncoder,H=yield L(B.encode(v),y,_);A(H)}else{const B=yield L(v,y,_);A(B)}}))))}))})))(f,l,new Uint8Array(16));yield this.set(`aes-gcm-256-${r}`,h)}else yield this.set(`aes-gcm-256-${r}`,i)})),this.reset=()=>Jg(this,void 0,void 0,(function*(){return this.resetting?mP():(this.waitingForReset=!0,this.isChangingLog||this.isChangingMeta?mP():(this.resetting=!0,yield(function(r=a5()){return r("readwrite",(i=>(i.clear(),UA(i.transaction))))})(this.store),this.resetting=!1,void(this.waitingForReset=!1)))})),this.store=EMe(n,n+"-store"),CEe(npe,(()=>{if(this.isChangingMeta=!1,this.waitingForReset)return this.reset()})),CEe(ope,(()=>{if(this.isChangingLog=!1,this.waitingForReset)return this.reset()}))}}var nl=function(e,n,r,i){return new(r||(r=Promise))((function(l,f){function h(_){try{y(i.next(_))}catch(A){f(A)}}function v(_){try{y(i.throw(_))}catch(A){f(A)}}function y(_){var A;_.done?l(_.value):(A=_.value,A instanceof r?A:new r((function(R){R(A)}))).then(h,v)}y((i=i.apply(e,[])).next())}))};const V6e={databaseName:"laplace-default-db",maxSize:49283072};class Xme{constructor(n){this.commonLogWithContext=(i,l,f,h,v)=>nl(this,void 0,void 0,(function*(){yield hMe(this.runtimeMetaManager,i,l,f,h,v)})),this.commonReportWithContext=(i,l)=>nl(this,void 0,void 0,(function*(){yield bMe(this.runtimeMetaManager,i,l)})),this.commonDeleteWithContext=i=>nl(this,void 0,void 0,(function*(){yield SMe(this.runtimeMetaManager,i)})),this.resetWithContext=()=>nl(this,void 0,void 0,(function*(){yield CMe(this.runtimeMetaManager)})),this.initLocalAESGCM256Key=()=>nl(this,void 0,void 0,(function*(){return yield fMe()})),this.doNotUseDirtyGetStore=()=>this.runtimeMetaManager.logManager.getStore(),this.log=(i,l,f)=>nl(this,void 0,void 0,(function*(){yield this.commonLogWithContext(i,l,rl.log,sf.PLAIN,{extraProperties:f})})),this.info=(i,l,f)=>nl(this,void 0,void 0,(function*(){yield this.commonLogWithContext(i,l,rl.info,sf.PLAIN,{extraProperties:f})})),this.warn=(i,l,f)=>nl(this,void 0,void 0,(function*(){yield this.commonLogWithContext(i,l,rl.warn,sf.PLAIN,{extraProperties:f})})),this.debug=(i,l,f)=>nl(this,void 0,void 0,(function*(){yield this.commonLogWithContext(i,l,rl.debug,sf.PLAIN,{extraProperties:f})})),this.error=(i,l,f)=>nl(this,void 0,void 0,(function*(){yield this.commonLogWithContext(i,l,rl.error,sf.PLAIN,{extraProperties:f})})),this.logWithEncryption=(i,l,f)=>nl(this,void 0,void 0,(function*(){yield this.commonLogWithContext(i,l,rl.log,sf.AESGCM256,{extraProperties:f})})),this.infoWithEncryption=(i,l,f)=>nl(this,void 0,void 0,(function*(){yield this.commonLogWithContext(i,l,rl.info,sf.AESGCM256,{extraProperties:f})})),this.debugWithEncryption=(i,l,f)=>nl(this,void 0,void 0,(function*(){yield this.commonLogWithContext(i,l,rl.debug,sf.AESGCM256,{extraProperties:f})})),this.warnWithEncryption=(i,l,f)=>nl(this,void 0,void 0,(function*(){yield this.commonLogWithContext(i,l,rl.warn,sf.AESGCM256,{extraProperties:f})})),this.errorWithEncryption=(i,l,f)=>nl(this,void 0,void 0,(function*(){yield this.commonLogWithContext(i,l,rl.error,sf.AESGCM256,{extraProperties:f})})),this.logWithoutCache=(i,l,f)=>nl(this,void 0,void 0,(function*(){yield this.commonLogWithContext(i,l,rl.log,sf.PLAIN,{extraProperties:f,noCache:!0})})),this.infoWithoutCache=(i,l,f)=>nl(this,void 0,void 0,(function*(){yield this.commonLogWithContext(i,l,rl.info,sf.PLAIN,{extraProperties:f,noCache:!0})})),this.warnWithoutCache=(i,l,f)=>nl(this,void 0,void 0,(function*(){yield this.commonLogWithContext(i,l,rl.warn,sf.PLAIN,{extraProperties:f,noCache:!0})})),this.debugWithoutCache=(i,l,f)=>nl(this,void 0,void 0,(function*(){yield this.commonLogWithContext(i,l,rl.debug,sf.PLAIN,{extraProperties:f,noCache:!0})})),this.errorWithoutCache=(i,l,f)=>nl(this,void 0,void 0,(function*(){yield this.commonLogWithContext(i,l,rl.error,sf.PLAIN,{extraProperties:f,noCache:!0})})),this.getLogs=i=>{const l=this.runtimeMetaManager.logManager;return l?l.filterStore(i):new Map},this.report=(...i)=>((l,f,h={})=>(function(v,y,_,A){return new(_||(_=Promise))((function(R,k){function N(H){try{B(A.next(H))}catch(q){k(q)}}function L(H){try{B(A.throw(H))}catch(q){k(q)}}function B(H){var q;H.done?R(H.value):(q=H.value,q instanceof _?q:new _((function(Y){Y(q)}))).then(N,L)}B((A=A.apply(v,[])).next())}))})(void 0,void 0,void 0,(function*(){var v,y;const _=(v=h.sampleRate)!==null&&v!==void 0?v:1;if(Math.random()>_)return;if(AX(f)>30720)throw new Error("ERROR: Laplace .report(strMsg) size bigger than 30KB is NOT allowed.");const A=Object.assign({message:Object.assign({strMsg:f},h.extraMsg),time:mMe(Date.now())},h.extraData);return!((y=h==null?void 0:h.tags)===null||y===void 0)&&y.length&&(A.tags=h==null?void 0:h.tags),vMe([{messages:JSON.stringify(A),meta:gMe}],l,h.xhrOptions)})))(this.runtimeMetaManager,...i),this.reportByHttps=(i,l)=>nl(this,void 0,void 0,(function*(){yield this.commonReportWithContext(i,l)})),this.deleteLog=i=>nl(this,void 0,void 0,(function*(){yield this.commonDeleteWithContext(i)})),this.deleteAll=()=>nl(this,void 0,void 0,(function*(){yield this.resetWithContext()}));const{runtimeMetaManager:r}=n;this.runtimeMetaManager=r}}Xme.init=e=>nl(void 0,void 0,void 0,(function*(){const{databaseName:n="laplace-default-db"}=e,r=new B6e(n),i=new M6e,l=new k6e(Object.assign(Object.assign(Object.assign({},V6e),e),{idbManager:r,logManager:i}));LA(l,P1.beforeInit),yield i.syncFromIDB(l.idbManager);const f=new Xme({runtimeMetaManager:l});return LA(l,P1.afterInit),f}));class H6e extends Lbe{constructor(n){super(),this.config={verbose:!1},this.beforeLog=(r,i)=>{const{verbose:l}=this.config;switch(l&&console.log("beforeLog, ","state: ",i,"meta: ",r),i.logLevel){case rl.error:console.error(i.message);break;case rl.warn:console.warn(i.message);break;case rl.log:console.log(i.message);break;case rl.debug:console.debug(i.message);break;case rl.info:console.info(i.message)}},this.afterLog=(r,i)=>{const{verbose:l}=this.config;l&&console.log("afterLog, ","state: ",i,"meta: ",r)},this.beforeReport=(r,i)=>{const{verbose:l}=this.config;l&&console.log("beforeReport, ","pluginParams: ",i,"meta: ",r)},this.afterReport=(r,i)=>{const{verbose:l}=this.config;l&&console.log("afterReport, ","pluginParams: ",i,"runtimeMetaManager: ",r)},n&&(this.config=n)}}const EEe=e=>{const n=[];for(const[r,i]of e)n.push(i);return n};class F6e extends Lbe{constructor(n){super(),this.config={debug:!1},this.debugLog=r=>{const{debug:i}=this.config;i&&console.log(`[AutoCleanLogPlugin]: ${r}`)},this.afterInit=r=>{const{expireBefore:i}=this.config;if(!i)return void this.debugLog("early return on beforeInit because expireBefore is falsy");const{logManager:l,commonMethods:{commonDelete:f}}=r,h=l.getStore().byTime,v=(typeof i=="function"?EEe(h).filter(i):EEe(h).filter((y=>y.timestamp<i))).map((y=>y.id));f(r,void 0,v),this.debugLog(`afterInit, clean log id: ${v}`)},this.afterReport=(r,{report:i,error:l})=>{if(l)return this.debugLog("error"),void console.error(l);const{cleanAfterReport:f}=this.config;if(!f)return void this.debugLog("early return on afterReport because cleanAfterReport is falsy");const{commonMethods:{commonDelete:h}}=r;h(r,void 0,i.ids),this.debugLog(`afterReport, clean log id: ${i.ids}`)},n&&(this.config=n)}}var spe,_Ee,$6e=(function(){if(_Ee)return spe;_Ee=1;var e="Expected a function",n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,l=/^0o[0-7]+$/i,f=parseInt,h=typeof u2=="object"&&u2&&u2.Object===Object&&u2,v=typeof self=="object"&&self&&self.Object===Object&&self,y=h||v||Function("return this")(),_=Object.prototype.toString,A=Math.max,R=Math.min,k=function(){return y.Date.now()};function N(B){var H=typeof B;return!!B&&(H=="object"||H=="function")}function L(B){if(typeof B=="number")return B;if((function(Y){return typeof Y=="symbol"||(function(K){return!!K&&typeof K=="object"})(Y)&&_.call(Y)=="[object Symbol]"})(B))return NaN;if(N(B)){var H=typeof B.valueOf=="function"?B.valueOf():B;B=N(H)?H+"":H}if(typeof B!="string")return B===0?B:+B;B=B.replace(n,"");var q=i.test(B);return q||l.test(B)?f(B.slice(2),q?2:8):r.test(B)?NaN:+B}return spe=function(B,H,q){var Y=!0,K=!0;if(typeof B!="function")throw new TypeError(e);return N(q)&&(Y="leading"in q?!!q.leading:Y,K="trailing"in q?!!q.trailing:K),(function(se,ie,le){var M,we,Ne,De,be,me,Ye=0,Ke=!1,Ze=!1,z=!0;if(typeof se!="function")throw new TypeError(e);function $t(qt){var io=M,En=we;return M=we=void 0,Ye=qt,De=se.apply(En,io)}function Be(qt){var io=qt-me;return me===void 0||io>=ie||io<0||Ze&&qt-Ye>=Ne}function at(){var qt=k();if(Be(qt))return lt(qt);be=setTimeout(at,(function(io){var En=ie-(io-me);return Ze?R(En,Ne-(io-Ye)):En})(qt))}function lt(qt){return be=void 0,z&&M?$t(qt):(M=we=void 0,De)}function $e(){var qt=k(),io=Be(qt);if(M=arguments,we=this,me=qt,io){if(be===void 0)return(function(En){return Ye=En,be=setTimeout(at,ie),Ke?$t(En):De})(me);if(Ze)return be=setTimeout(at,ie),$t(me)}return be===void 0&&(be=setTimeout(at,ie)),De}return ie=L(ie)||0,N(le)&&(Ke=!!le.leading,Ne=(Ze="maxWait"in le)?A(L(le.maxWait)||0,ie):Ne,z="trailing"in le?!!le.trailing:z),$e.cancel=function(){be!==void 0&&clearTimeout(be),Ye=0,M=me=we=be=void 0},$e.flush=function(){return be===void 0?De:lt(k())},$e})(B,H,{leading:Y,maxWait:H,trailing:K})},spe})(),U6e=SQ($6e);const j6e=["RESOURCE_ERROR","JS_ERROR","UNHANDLED_PROMISE_REJECTION"];class z6e extends Lbe{constructor(n){super(),this.config={debug:!1,publicTags:[]},this.errorCount=0,this.hashErrors={},this.runtimeMetaManager=null,this.addPublicTags=r=>{var i;return(i=this.config.publicTags)===null||i===void 0?void 0:i.concat(r).filter((l=>l))},this.debugLog=r=>{const{debug:i}=this.config;i&&console.log("[AutoLogErrorPlugin]:",r)},this.ignore=r=>{var i,l,f,h,v;return((i=this.config)===null||i===void 0?void 0:i.maxErrorCount)!==void 0&&this.errorCount>=((l=this.config)===null||l===void 0?void 0:l.maxErrorCount)||!!(!((f=this.config)===null||f===void 0)&&f.ignoredErrorMsgKeywords)&&r&&((v=(h=this.config)===null||h===void 0?void 0:h.ignoredErrorMsgKeywords)===null||v===void 0?void 0:v.some((y=>r==null?void 0:r.includes(y))))},this.report=U6e((()=>{if(this.runtimeMetaManager===null)return;const{autoReport:r}=this.config,{commonMethods:{commonReport:i}}=this.runtimeMetaManager;return i(this.runtimeMetaManager,j6e,r)}),600,{trailing:!0,leading:!1}),this.afterInit=r=>{if(this.runtimeMetaManager=r,!self.addEventListener)return;const{commonMethods:{commonLog:i}}=r,l=(f,h,v)=>{this.debugLog(v),this.errorCount+=1;try{return(function(y){const _=new TextEncoder().encode(y);return crypto.subtle.digest("SHA-1",_).then((A=>Array.from(new Uint8Array(A)).map((R=>R.toString(16).padStart(2,"0"))).join("")))})(f).then((y=>this.hashErrors[y]?"dismissed":(this.hashErrors[y]=!0,i(r,f,this.addPublicTags([].concat(h)),rl.error,sf.PLAIN,{extraProperties:{messageHash:y}}).then(this.report)))).catch(console.error)}catch(y){return console.error(y),Promise.resolve(y)}};try{self.addEventListener("error",(f=>{var h,v,y,_,A,R,k;if(!this.ignore(f==null?void 0:f.message)){if(f!=null&&f.target&&(!((h=f==null?void 0:f.target)===null||h===void 0)&&h.src||!((v=f==null?void 0:f.target)===null||v===void 0)&&v.href)){const N=`Load Resource Error in ${(y=f==null?void 0:f.target)===null||y===void 0?void 0:y.tagName} element: ${((_=f==null?void 0:f.target)===null||_===void 0?void 0:_.src)||((A=f==null?void 0:f.target)===null||A===void 0?void 0:A.href)}`;return l(N,"RESOURCE_ERROR",f)}{const N=`Javascript Runtime Error in ${f==null?void 0:f.filename} (${f==null?void 0:f.lineno}:${f==null?void 0:f.colno}): ${f==null?void 0:f.message}
Stack: ${(k=(R=f==null?void 0:f.error)===null||R===void 0?void 0:R.stack)!==null&&k!==void 0?k:f==null?void 0:f.stack}`;return l(N,"JS_ERROR",f)}}})),self.addEventListener("unhandledrejection",(f=>{var h;if(this.ignore((h=f==null?void 0:f.reason)===null||h===void 0?void 0:h.message))return;let v;const y=f==null?void 0:f.reason;return v=typeof y=="string"?`Promise Error: ${y}`:y instanceof Error?`Promise Error: ${y.message} ${y.name} ${y.stack}`:typeof y=="object"?`Promise Error with reason: ${Bbe(y)}`:`Promise Error with unrecognized reason: ${y}`,l(v,"UNHANDLED_PROMISE_REJECTION",f)}))}catch(f){console.error(f)}this.debugLog("afterInit, add listener")},n&&(this.config=n),this.config.publicTags=[].concat(n==null?void 0:n.publicTags)}}let xR=(function(e){return e.DeviceAudioStreamCaptured="device audio stream captured",e.AudioJoinComplete="audio join complete",e.AudioLeaveComplete="audio leave complete",e.SharingAudioStartComplete="sharing audio start complete",e.SharingAudioStopComplete="sharing audio stop complete",e.AudioBridgeReconnectStart="audio bridge reconnect start",e.AudioBridgeReconnectEnd="audio bridge reconnect end",e})({}),DR=(function(e){return e.VBSettingSuccess="video VB setting success",e.VBSettingFailed="init video VB failed",e.VBPreloadSuccess="preload video VB success",e.VBPreloading3S="preload video VB 3s",e.VBPreloading10S="preload video VB 10s",e.StartCaptureVideoSuccess="start capture video success",e.StopCaptureVideoSuccess="stop capture video success",e})({});function Od(e){return`{E}${e}{/E}`}const W6e=["exception flow","MEDIA SDK"],G6e={enable:!1,enableReport:!1,gatewayEndPoint:"",newGatewayEndPoint:"",logLevel:{debug:!1,log:!1,info:!1,print:!1,warn:!1,error:!1},performanceReportRatio:.25,trackingCount:7},wEe=["debug","log","info","print","warn","error"],gP=(e,n)=>[...e,...n].filter((r=>!!r)),AEe=["JOIN_MEETING_FAILED","Join Meeting Flow","UNAVAILABLE_RWG","connection_info_map","exception flow"];class Dd{static getInstance(){return this.agentInstance||(this.agentInstance=new Dd),this.agentInstance}constructor(){this.laplace=void 0,this.trackingId=void 0,this.logConfig=void 0,this.reportUrl=void 0,this.publicTags=void 0,this.accountId=void 0,this.disableAutoReport=void 0,this.debouncedReport=void 0,this.initConfig=async n=>{let r,i=G6e;try{n.logConfig&&(i=JSON.parse(n.logConfig),i.gatewayEndPoint&&(this.reportUrl=i.gatewayEndPoint),i.newGatewayEndPoint&&(this.reportUrl=i.newGatewayEndPoint));const{enable:v,enableReport:y,reportUrl:_,logLevel:A,encryptKeys:R,trackingId:k,accountId:N}=n;if(v!==void 0&&(i={...i,enable:!!v}),y!==void 0&&(i={...i,enableReport:!!y}),_&&(this.reportUrl=_),typeof A=="string"){const L=wEe.indexOf(A),B=wEe.reduce(((H,q,Y)=>Y<L?{...H,[`${q}`]:!1}:{...H,[`${q}`]:!0}),{});i={...i,logLevel:B}}else A!==void 0&&(i={...i,logLevel:A});if(k&&(this.trackingId=k,i={...i,enable:!0,enableReport:!0}),R!==void 0){const L=Array.isArray(R)?R:[R];r=await Promise.all(L.map((B=>(function(H){return window.crypto.subtle.importKey("raw",new TextEncoder().encode(H.slice(0,32)),"AES-GCM",!1,["encrypt","decrypt"])})(B).then((H=>({usage:_X.PROTECT_LOCAL_KEY,key:H}))))))}N!==void 0&&(this.accountId=N)}catch(v){console.error("parse log config error",v)}const l=new Date().getTime()-6048e5,f=i.enableReport&&this.reportUrl?{gzip:!1,encrypt:!1,additionalContext:{trackingId:this.trackingId}}:void 0;this.publicTags=["VideoSDK",this.trackingId],n.isUIToolkit&&this.publicTags.push("UI-Toolkit");const h=[n.debugMode&&new H6e({verbose:!1}),new F6e({debug:!1,cleanAfterReport:!0,expireBefore:l}),new z6e({debug:!1,autoReport:f,ignoredErrorMsgKeywords:["table index is out of bounds"],maxErrorCount:223,publicTags:this.accountId?[...this.publicTags,Od(this.accountId)]:this.publicTags})].filter(Boolean);return{laplaceConfig:{databaseName:"ZM-VSDK-LOG-DATABASE",maxSize:49283072,publicKey:n.logEncryptionPubKey,reportUrl:this.reportUrl,externalKeys:r,plugins:h},logConfig:i}},this.handleInitLaplaceSuccess=(n,r)=>{var i;this.laplace=n;const l=rr.get(Jme.VSDKLogTrackingId);let f=[];try{f=JSON.parse(l?window.atob(l):"[]")}catch{}f.length>=((i=r==null?void 0:r.trackingCount)!==null&&i!==void 0?i:7)&&f.shift();const h=f.reduce(((y,_)=>({...y,[`${_}`]:!0})),{});n.deleteLog((y=>{var _;return!((_=y.tags)!==null&&_!==void 0&&_.some((A=>h[A])))})),f.push(this.trackingId),rr.set(Jme.VSDKLogTrackingId,window.btoa(JSON.stringify(f)),Zr.LocalStorage);const v=navigator.hardwareConcurrency>=4?5e3:1e4;this.debouncedReport=(function(y,_=5e3){const A=[];let R;const k=(function(N,L,B){var H,q,Y,K,se,ie,le=0,M=!1,we=!1,Ne=!0;if(typeof N!="function")throw new TypeError("Expected a function");function De(Ze){var z=H,$t=q;return H=q=void 0,le=Ze,K=N.apply($t,z)}function be(Ze){var z=Ze-ie;return ie===void 0||z>=L||z<0||we&&Ze-le>=Y}function me(){var Ze=$fe();if(be(Ze))return Ye(Ze);se=setTimeout(me,(function(z){var $t=L-(z-ie);return we?FUe($t,Y-(z-le)):$t})(Ze))}function Ye(Ze){return se=void 0,Ne&&H?De(Ze):(H=q=void 0,K)}function Ke(){var Ze=$fe(),z=be(Ze);if(H=arguments,q=this,ie=Ze,z){if(se===void 0)return(function($t){return le=$t,se=setTimeout(me,L),M?De($t):K})(ie);if(we)return clearTimeout(se),se=setTimeout(me,L),De(ie)}return se===void 0&&(se=setTimeout(me,L)),K}return L=oCe(L)||0,R5(B)&&(M=!0,Y=(we="maxWait"in B)?HUe(oCe(B.maxWait)||0,L):Y,Ne="trailing"in B||Ne),Ke.cancel=function(){se!==void 0&&clearTimeout(se),le=0,H=ie=q=se=void 0},Ke.flush=function(){return se===void 0?K:Ye($fe())},Ke})(((N,L)=>{const B=y(N,L);return A.length=0,B}),_,{leading:!0,trailing:!0,maxWait:1e4});return window.addEventListener("beforeunload",(()=>{var N;k.cancel&&k.cancel(),A.length>0&&((N=R)!==null&&N!==void 0&&N.xhrOptions&&Object.assign(R.xhrOptions,{isSendByBeacon:!0}),y(A,R))})),(N,L)=>(Array.isArray(N)?A.push(...N):typeof N=="string"&&A.push(N),R=L,k(A,L))})(this.laplace.reportByHttps.bind(this.laplace),v)},this.init=async n=>{const{laplaceConfig:r,logConfig:i}=await this.initConfig(n);return i.enable?(this.logConfig=i,Xme.init(r).then((l=>{this.handleInitLaplaceSuccess(l,i)})).catch((l=>{throw{type:Wu,reason:"Logger init failed.",error:l,errorCode:Fe.INTERNAL_ERROR}}))):Promise.reject({type:Lt,reason:"Logger feature is not enabled."})},this.check=n=>{var r;return!(!this.checkLaplace()||((r=this.logConfig)===null||r===void 0||(r=r.logLevel)===null||r===void 0||!r[n])&&(console.warn(`Logger ${n} is not enabled.`),1))},this.log=(n,r,i)=>{if(this.check("log"))try{var l;return(l=this.laplace.logWithEncryption(n,gP(r,i)))===null||l===void 0?void 0:l.catch((()=>{}))}catch{return}},this.logWithExtraProperties=(n,r,i)=>{if(this.check("log"))try{var l;return(l=this.laplace.log(n,r,i))===null||l===void 0?void 0:l.catch((()=>{}))}catch{return}},this.warn=(n,r,i)=>{if(this.check("warn"))try{var l;return(l=this.laplace.warnWithEncryption(n,gP(r,i)))===null||l===void 0?void 0:l.catch((()=>{}))}catch{return}},this.info=(n,r,i)=>{if(this.check("info"))try{var l;return(l=this.laplace.infoWithEncryption(n,gP(r,i)))===null||l===void 0?void 0:l.catch((()=>{}))}catch{return}},this.debug=(n,r,i)=>{if(this.check("debug"))try{var l;return(l=this.laplace.debugWithEncryption(n,gP(r,i)))===null||l===void 0?void 0:l.catch((()=>{}))}catch{return}},this.error=(n,r,i)=>{if(this.check("error"))try{var l;return(l=this.laplace.errorWithEncryption(n,gP(r,i)))===null||l===void 0?void 0:l.catch((()=>{}))}catch{return}},this.checkLaplace=()=>{var n;return!((n=this.laplace)===null||n===void 0||!n.log)},this.makeLogger=n=>{var r;const i=gP((r=this.publicTags)!==null&&r!==void 0?r:[],n);return{log:(l,f)=>this.log(l,i,f??[]),logWithExtraProperties:(l,f)=>this.logWithExtraProperties(l,i,f),warn:(l,f)=>this.warn(l,i,f??[]),info:(l,f)=>this.info(l,i,f??[]),debug:(l,f)=>this.debug(l,i,f??[]),error:(l,f)=>this.error(l,i,f??[]),directReport:(l,f)=>{const h=typeof l!="string"?JSON.stringify(l):l,v=(Array.isArray(f)?f:[f]).filter(Boolean);v.push("MEDIA SDK Direct"),this.report(h,v,"info")}}},this.reportToGlobalTracing=(n,r=!1,i=!1)=>{var l;if(!this.checkLaplace())return Promise.reject({type:Lt,reason:"Logger has not been enabled or initialized."});if((l=this.logConfig)===null||l===void 0||!l.enableReport||!this.reportUrl)return Promise.reject({type:Lt,reason:"Please use getLogs to obtain log data and report by yourself."});if((function(){try{return!!rr.get(cMe.DisableAutoReportLogs)}catch{return!1}})()&&!r&&!(Array.isArray(n)?n.some((v=>AEe.some((y=>v.includes(y))))):AEe.some((v=>`${n}`.includes(v)))))return Promise.resolve();const f=(function(h){let v=!0;return h&&(v=!(Array.isArray(h)?h:[h]).some((y=>W6e.some((_=>`${y}`.indexOf(_)>-1))))),v})(n);return(r||f?this.laplace.reportByHttps.bind(this.laplace):this.debouncedReport)(n,{gzip:!1,encrypt:!1,xhrOptions:{url:this.reportUrl,isSendByBeacon:i},additionalContext:{trackingId:this.trackingId}})},this.report=(n,r,i="warn")=>{if(this.checkLaplace()&&this.logConfig.enableReport&&this.reportUrl){var l,f;const h=Array.isArray(r)?r:[r],v=this.accountId?[...h,Od(this.accountId)]:h;(l=(f=this.makeLogger(v))[`${i}`])===null||l===void 0||(l=l.call(f,n))===null||l===void 0||l.then((()=>{this.reportToGlobalTracing(h)}))}},this.getLogs=(n,r)=>{if(!this.checkLaplace())return console.warn("Logger has not been enabled or initialized."),[];const i=n.getState(),{meeting:{meetingNumber:l,userId:f,userEmail:h,userName:v}}=i,y={meetingNumber:l,userId:f,userEmail:h,userName:v},_=this.laplace.getLogs(r),A=[];for(const[,R]of _)A.push({...R,...y});return A},this.doNotUseDirtyGetStore=()=>this.checkLaplace()?this.laplace.doNotUseDirtyGetStore():(console.warn("Logger has not been enabled or initialized."),{byTag:{},byTime:new Map}),this.trackingId=EX()}}Dd.agentInstance=void 0;const wMe=Dd.getInstance(),AMe=[{type:"MediaMeta",methods:["sendUserNodeList","updateUserMediaSN","updateMediaParams","subscribeToQos","unsubscribeFromQos","sendUserAudioStatus","destroy","createMainSessionChannel","notifySDKMeetingReady"]},{type:"Audio",methods:["joinComputerAudio","leaveComputerAudio","joinSharingAudio","leaveSharingAudio","changeSpeaker","changeMicrophone","enableAudioEncode","pauseOrResumeAudio","setSharingAudioVolume","enableShareAudioToBreakoutRoom","enableAudioDenoise","enableSyncButtonsOnHeadset","stopAllIncomingAudio","setAudioCodecMode","muteOrUnmuteOtherAudio","adjustOtherAudioVolume","changeAudioProfile","unmuteAudio","muteAudio"]},{type:"Video",methods:["startCaptureVideo","stopCaptureVideo","renderVideo","stopRenderVideo","changeCamera","updateRenderedVideoCanvasDimension","adjustRenderedVideoPosition","mirrorVideo","enableHardwareAccelerationForVideoDecode","enableHardwareAccelerationForVideoEncode","startVirtualBackgroundSetting","updateVirtualBackgroundImage","stopVirtualBackgroundSetting","startMaskSetting","updateMaskBackgroundImage","updateMaskClip","stopMaskSetting","enableVideoObserver","prefetchVideoSsrc","cancelPrefetchVideoSsrc","setMobileRotateMode","changeActiveVideoSsrc","updateVideoHDValue","updateVideoFullhdValue","clearVideoCanvas"]},{type:"Sharing",methods:["stopDesktopSharing","startDesktopSharing","pauseDesktopSharing","resumeDesktopSharing","renderSharing","stopRenderSharing","switchSharingSource","ajustmentReceivedSharingCanvas","changeSharingSecondCamera","updateRenderedSharingDimension","addReceivedSharingChannelType","removeReceivedSharingChannelType","switchSharingMode","ajustmentSharingCanvas"]},{type:"RemoteControl",methods:["startRemoteControl","stopRemoteControl","resendRemoteControlPositionPDU","updateRemoteControlProperties","ajustmentReceivedSharingCanvas","startRemoteControlQRCheck"]},{type:"LiveTranscription",methods:["selectLanguageChannelForNewLTT"]},{type:"RemoteCamera",methods:["movePTZCamera"]}].reduce(((e,n)=>{const{type:r,methods:i}=n;return[...e,...i.map((l=>({name:l,type:r})))]}),[]),q6e=AMe.map((e=>e.name)),K6e=(e,...n)=>{const r=AMe.find((i=>i.name===e));if(r){const{type:i}=r,l=n==null?void 0:n.map((f=>JJ(f)));wMe.makeLogger([i,`${i} Media SDK`]).info(`${e},params:${JSON.stringify(l)}`)}};function sp(e){return new Proxy(e,{get:(n,r)=>typeof r=="string"&&q6e.includes(r)?function(...i){try{Reflect.apply(K6e,void 0,[r,...i])}catch{}return Reflect.apply(Reflect.get(n,r),n,i)}:Reflect.get(n,r)})}function Z6e(e){return e&&new Proxy(e,{get:(n,r)=>typeof r=="string"&&r==="error"?function(...i){try{var l;wMe.report(i[0],["MEDIA SDK",...(l=i[1])!==null&&l!==void 0?l:[]],"error")}catch{}}:Reflect.get(n,r)})}const rpe=Dd.getInstance();function TEe(e,n){return e.toLowerCase().includes("url")&&n.startsWith("http")||e==="displayName"?`[${e.toUpperCase()}]`:n}function ff(e,n){return function(r,i,l){const f=l.value;l.value=function(...h){let v="";if(e==="Video"){var y;const A=this[Ia];v=`${A==null||(y=A.getState())===null||y===void 0||(y=y.meeting)===null||y===void 0?void 0:y.isUseWBVideo}`}if(rpe.checkLaplace())try{var _;const A=rpe.makeLogger([e]),R=(_=n?h.map(((k,N)=>n.includes(N+1)?Od(k):k)):h)===null||_===void 0?void 0:_.map((k=>JJ(k)));return A.info(`${i},params:${JSON.stringify(R,TEe)}`),f.apply(this,h).then((k=>(A.info(`${i} success`),k))).catch((k=>{const N=`${i},params:${JSON.stringify(R,TEe)},return failed,${v?`isUseWBVideo:${v},`:""}${(function(L){if(!L)return"";if(typeof L=="object"){let B="";return L.type&&(B+=`type:${L.type},`),L.errorCode&&(B+=`errorCode:${L.errorCode},`),L.reason&&(B+=`reason:${L.reason},`),L.subCode&&(B+=`subCode:${L.subCode},`),L.name&&(B+=`name:${L.name},`),L.message&&(B+=`message:${L.message},`),B}return`${L}`})(k)}`;return rpe.report(N,`${e} exception flow`,"error"),Promise.reject(k)}))}catch{}return f.apply(this,h)}}}function TQ(e,n,r){return function(i,l,f){const h=f.value;f.value=function(...v){var y,_;const A=v[n];let R=e;return Array.isArray(R)||(R=[R]),!R.some((k=>uQ(A,k)))||r&&!r.every((k=>!!A[k]))?Promise.reject({type:gs,reason:`Expected to accept ${(y=R)===null||y===void 0?void 0:y.map((k=>k.name)).join(" or ")}, but actual it is ${typeof A=="object"&&A!==null?(_=Object.getPrototypeOf(A))===null||_===void 0?void 0:_.constructor.name:A}`,errorCode:Fe.STREAM_MISMATCH_RENDER_ELEMENT}):h.apply(this,v)}}}let OEe=(function(e){return e[e.Unknown=0]="Unknown",e[e.Windows=1]="Windows",e[e.Mac=2]="Mac",e[e.Pad=3]="Pad",e[e.Mobile=4]="Mobile",e[e.CallIn=5]="CallIn",e[e.Linux=6]="Linux",e[e.WebClient=7]="WebClient",e[e.ChromeOs=8]="ChromeOs",e})({});const IEe=262144,REe=1048576,xEe=16777216,TMe=e=>!(4&~e),jZ=e=>(e&REe)===REe,Hbe=({share:{isReceiveSharing:e}})=>e,OMe=({share:{activeNodeId:e}})=>e,IMe=({share:{shareViewAttachments:e}})=>e,Y6e=va([Ai,Hbe,OMe],((e=[],n,r)=>{if(n){const i=e.find((l=>l.userId===r&&l.sharerOn===!0));if(i){let{os:l}=i;const{pwaOS:f}=i;return f==="mac"?l=OEe.Mac:f==="win"&&(l=OEe.Windows),{...i,os:l}}}return null})),eE=va([Ai],(e=>e.filter((n=>n.sharerOn)))),RMe=va([eE],(e=>e.some((n=>!!n.bVideoShare)))),GR=va([({share:{remoteControlledUserList:e}})=>e,Hbe,OMe],((e,n,r)=>!!n&&e.some((i=>Td(i,r))))),Fbe=va([Hbe,IMe],((e,n)=>e?Object.entries(n).reduce(((r,i)=>{const[,l]=i;return l&&l.length>0&&(r+=l.length),r}),0):0)),xMe=va([Fbe],(e=>e>1)),n2=va([Fbe,IMe],((e,n)=>e===1&&Object.entries(n).every((([,r])=>r.every((i=>i.isDummy))))));function DMe(e){return function(n,r,i){const l=i.value;i.value=async function(...f){const h=this[Ia],v=h==null?void 0:h.getState();if(v!=null&&v.share){const{share:{isSimultaneousShareView:y,isReceiveSharing:_}}=v;if(_){if(y)return Promise.reject({type:Lt,reason:`Cannot start ${e} due to multiple sharing views are currently in progress.`,errorCode:Fe.SCREEN_SHARE_MISMATCH_STATE});if(xMe(v))return Promise.reject({type:Lt,reason:`Cannot start ${e} due to multiple sharing views are currently in progress.`,errorCode:Fe.SCREEN_SHARE_MISMATCH_STATE})}}return l.apply(this,f)}}}let gc=(function(e){return e[e.NoAttendee=0]="NoAttendee",e[e.All=1]="All",e[e.AllPanelist=2]="AllPanelist",e[e.Host=3]="Host",e[e.NoOne=4]="NoOne",e[e.EveryonePublicly=5]="EveryonePublicly",e})({}),W2=(function(e){return e[e.AllPanelist=1]="AllPanelist",e[e.Everyone=2]="Everyone",e[e.Invalid=0]="Invalid",e})({}),ma=(function(e){return e[e.All=0]="All",e[e.Panelist=1]="Panelist",e[e.IndividualCcPanelist=2]="IndividualCcPanelist",e[e.Individual=3]="Individual",e[e.SilentModeUsers=4]="SilentModeUsers",e})({}),OX=(function(e){return e[e.None=0]="None",e[e.Delete=1]="Delete",e[e.Modify=2]="Modify",e})({}),ipe=(function(e){return e[e.Success=0]="Success",e[e.Delete=1]="Delete",e[e.Block=3]="Block",e})({});const J6e=[gc.All,gc.Host,gc.NoOne,gc.EveryonePublicly],X6e=[gc.NoOne,gc.All,gc.AllPanelist],IX={AllPanelist:11,Everyone:12},Q6e={[IX.AllPanelist]:W2.AllPanelist,[IX.Everyone]:W2.Everyone},VU={userId:ma.All,displayName:"Everyone",isHost:!1,isCoHost:!1},LP={userId:ma.Panelist,displayName:"All panelists"},e8e={userId:ma.SilentModeUsers,displayName:"Everyone (in Waiting Room)",isHost:!1,isCoHost:!1};let t8e=(function(e){return e[e.Local=0]="Local",e[e.ThirdParty=1]="ThirdParty",e})({}),rf=(function(e){return e[e.ChunkSize=20971520]="ChunkSize",e[e.EncodeBlockSize=32768]="EncodeBlockSize",e[e.DecodeBlockSize=32803]="DecodeBlockSize",e[e.MaxSize=2147483648]="MaxSize",e[e.ReaderChunkSize=1073741824]="ReaderChunkSize",e})({}),wu=(function(e){return e[e.Init=0]="Init",e[e.InProgress=1]="InProgress",e[e.Success=2]="Success",e[e.Fail=3]="Fail",e[e.Cancel=4]="Cancel",e[e.Complete=5]="Complete",e})({}),ZC=(function(e){return e[e.InProgress=1]="InProgress",e[e.Success=2]="Success",e[e.Fail=3]="Fail",e[e.Cancel=4]="Cancel",e})({});const n8e={"7z":"application/x-7z-compressed",avi:"video/x-msvideo",bin:"application/octet-stream",bmp:"image/bmp",css:"text/css",csv:"text/csv",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",gif:"image/gif",gz:"application/gzip",html:"text/html",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",mid:"audio/midi",mov:"video/*",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/*",mpg:"video/*",pdf:"application/pdf",png:"image/png",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rar:"application/vnd.rar",rtf:"application/rtf",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",txt:"text/plain",wav:"audio/wav",webp:"image/webp",wma:"audio/*",wmv:"video/*",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",zip:"application/zip"};let Zp=(function(e){return e.Open="open",e.Message="message",e.Error="error",e.Close="close",e.Inactive="inactive",e})({});var qR=(function(e){return e[e.SelectTranslationLanguage=1]="SelectTranslationLanguage",e[e.ShowTranscription=2]="ShowTranscription",e[e.OffTranslation=3]="OffTranslation",e[e.DisableCaption=4]="DisableCaption",e[e.LockTranscriptionLanguage=5]="LockTranscriptionLanguage",e[e.SelectTranscriptionLanguage=6]="SelectTranscriptionLanguage",e[e.SelectSimuliveLanguage=7]="SelectSimuliveLanguage",e})(qR||{});class kMe{constructor(){this.eventHandlers=void 0,this.websocket=void 0,this.seq=void 0,this.intervalsToBeCleardWhenSocketClose=[],this.isAlive=!1,this.isRlbTP=void 0,this.eventHandlers=new Map,this.websocket=null,this.seq=1,this.isRlbTP=!1}on(n,r){let i=this.eventHandlers.get(n);i||(i=[]),i.push(r),this.eventHandlers.set(n,i)}off(n,r){const i=this.eventHandlers.get(n);if(i){const l=i.filter((f=>f!==r));this.eventHandlers.set(n,l)}}emit(n,r){const i=this.eventHandlers.get(n);i&&i instanceof Array&&i.slice(0).forEach((l=>{try{l(r)}catch(f){console.error(f)}}))}sendMessageToRwg(n){this.seq+=1;const r=this.seq;return this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify(Object.assign(n,{seq:r}))),r}connect(n,r){this.websocket=r?new window.ZoomTPModule.ZoomTPWebSocket(n):new WebSocket(n),this.websocket.binaryType="arraybuffer",this.isRlbTP=r,this.addWebSocketEventListeners()}close(){var n;(n=this.websocket)===null||n===void 0||n.close()}addHeartBeat(){const n=bo.isAndroidOrIOSBrowser?15e3:2e4,r=setInterval((()=>{this.isAlive||this.emit(Zp.Inactive,{}),this.sendMessageToRwg({evt:0}),this.isAlive=!1}),n);this.intervalsToBeCleardWhenSocketClose.push(r)}clearIntervals(){this.intervalsToBeCleardWhenSocketClose.forEach((n=>clearInterval(n))),this.isAlive=!1}addWebSocketEventListeners(){this.websocket&&(this.websocket.addEventListener("open",(n=>{this.isRlbTP||this.addHeartBeat(),this.emit(Zp.Open,n)})),this.websocket.addEventListener("message",(n=>{this.isAlive=!0,this.emit(Zp.Message,n)})),this.websocket.addEventListener("close",(n=>{this.clearIntervals(),this.emit(Zp.Close,n)})),this.websocket.addEventListener("error",(n=>{this.clearIntervals(),this.emit(Zp.Error,n)})))}sendLaunchParams(n){return{seq:this.sendMessageToRwg({evt:4301,body:n})}}joinMeeting(n){return{seq:this.sendMessageToRwg({evt:4097,body:{meetingtoken:n}})}}lockMeeting(n){return{seq:this.sendMessageToRwg({evt:4099,body:{bLock:n}})}}endMeeting(){return{seq:this.sendMessageToRwg({evt:4101,body:{}})}}leaveMeeting(n=!1){const r=n?4364:4103;return{seq:this.sendMessageToRwg({evt:r,body:{}})}}recordMeeting(n,r){return{seq:this.sendMessageToRwg({evt:4105,body:{bRecord:n,bPause:r}})}}localRecordingGrantPermission(n,r,i){return{seq:this.sendMessageToRwg({evt:FZ,body:{cmdType:"permission_request_answer",userId:n,agreed:r,saveAgreed:i}})}}hostGrantPermission(n,r){return{seq:this.sendMessageToRwg({evt:FZ,body:{cmdType:"grant_permission",userId:n,grant:r}})}}localRecordingRequestPermission(){return{seq:this.sendMessageToRwg({evt:FZ,body:{cmdType:"request_permission"}})}}localRecordingMeeting(n){return{seq:this.sendMessageToRwg({evt:FZ,body:{cmdType:"change_recording_status",status:n}})}}summaryMeeting(n){return{seq:this.sendMessageToRwg({evt:8009,body:{type:n?"start":"stop"}})}}startMeetingQuery(n){return{seq:this.sendMessageToRwg({evt:8017,body:{type:n?"start":"stop"}})}}allowSelfRecord(n){return{seq:this.sendMessageToRwg({evt:4325,body:{bAllowISORecord:n}})}}enableZoomIQRecord(n){return{seq:this.sendMessageToRwg({evt:4318,body:{check:n}})}}expel(n){return{seq:this.sendMessageToRwg({evt:4107,body:{id:n}})}}expelAttendee(n,r){return{seq:this.sendMessageToRwg({evt:4205,body:{jid:n,nodeID:r}})}}rename(n,r,i){return{seq:this.sendMessageToRwg({evt:4109,body:{id:n,dn2:r,olddn2:i}})}}assignHost(n,r){return{seq:this.sendMessageToRwg({evt:4111,body:{id:n,bCoHost:r}})}}reclaimHost(n,r=!1){return{seq:this.sendMessageToRwg({evt:4133,body:{id:n,bCoHost:r}})}}revokeCoHost(n){return{seq:this.sendMessageToRwg({evt:4195,body:{id:n}})}}putOnHold(n,r){return{seq:this.sendMessageToRwg({evt:4113,body:{id:n,bHold:r}})}}setMuteOnEntry(n){return{seq:this.sendMessageToRwg({evt:4115,body:{bOn:n}})}}setHoldOnEntry(n){return{seq:this.sendMessageToRwg({evt:4117,body:{bOn:n}})}}inviteCRCDevice(n,r,i=2){return{seq:this.sendMessageToRwg({evt:4119,body:{ip:n,type:r,encrypt:i}})}}cancelInviteCRCDevice(n){return{seq:this.sendMessageToRwg({evt:4121,body:{transID:n}})}}sendCloseCaption(n){return{seq:this.sendMessageToRwg({evt:4125,body:{...n}})}}allowViewParticipantNumber(n){return{seq:this.sendMessageToRwg({evt:4127,body:{bOn:n}})}}lowerAllHands(){return{seq:this.sendMessageToRwg({evt:4129,body:{}})}}raiseLowerHand(n,r){return{seq:this.sendMessageToRwg({evt:4131,body:{id:n,bOn:r}})}}chat(n,r,i,l,f,h){const v={text:n,destNodeID:r};return i&&Object.assign(v,{sn:i}),l&&Object.assign(v,{attendeeNodeID:l}),f&&Object.assign(v,{xmppMsgData:f}),h&&Object.assign(v,{msgID:h}),{seq:this.sendMessageToRwg({evt:4135,body:v})}}assignCC(n,r){return{seq:this.sendMessageToRwg({evt:4137,body:{id:n,bCCEditor:r}})}}enableLT(n){return{seq:this.sendMessageToRwg({evt:4227,body:{op:n?2:4}})}}enableNewLLT(){return{seq:this.sendMessageToRwg({evt:4285})}}disableCaptions(n){return{seq:this.sendMessageToRwg({evt:pP,body:{type:qR.DisableCaption,disableNewLtt:n}})}}enableManualCaption(n){return{seq:this.sendMessageToRwg({evt:4291,body:{op:n?1:0}})}}setTranslationLanguage(n){return n!==void 0?{seq:this.sendMessageToRwg({evt:pP,body:{type:qR.SelectTranslationLanguage,lang:n}})}:{seq:this.sendMessageToRwg({evt:pP,body:{type:qR.OffTranslation}})}}setTranscriptionLanguage(n,r){return{seq:this.sendMessageToRwg({evt:pP,body:{type:qR.SelectTranscriptionLanguage,lang:n,nodeid:r??0}})}}lockTranscriptionLanguage(n){return{seq:this.sendMessageToRwg({evt:pP,body:{type:qR.LockTranscriptionLanguage,lock:n}})}}setSimuliveLanguage(n){return{seq:this.sendMessageToRwg({evt:pP,body:{type:qR.SelectSimuliveLanguage,lang:n}})}}setSpokenLanguage(n){return{seq:this.sendMessageToRwg({evt:4287,body:{lang:n}})}}allowAskLT(n){return{seq:this.sendMessageToRwg({evt:4263,body:{bAnonymous:n}})}}approveLT(){return{seq:this.sendMessageToRwg({evt:4262,body:{bApproved:!0}})}}askLT(n){return{seq:this.sendMessageToRwg({evt:4261,body:{bAnonymous:n}})}}setChatPriviledge(n){return{seq:this.sendMessageToRwg({evt:4141,body:{chatPriviledge:n}})}}setPanelistChatPrivilege(n){if(!Object.values(IX).includes(n))throw Error("Invalid panelist chat privilege req value");return{seq:this.sendMessageToRwg({evt:4141,body:{chatPriviledge:n}})}}sendFeedback(n){return{seq:this.sendMessageToRwg({evt:4143,body:{feedback:n}})}}clearFeedback(){return{seq:this.sendMessageToRwg({evt:4145,body:{}})}}allowUnmuteVideo(n){return{seq:this.sendMessageToRwg({evt:4147,body:{bOn:n}})}}allowUnmuteAudio(n){return{seq:this.sendMessageToRwg({evt:4149,body:{bOn:n}})}}allowRaiseHand(n){return{seq:this.sendMessageToRwg({evt:4151,body:{bOn:n}})}}boToken(n){return{seq:this.sendMessageToRwg({evt:4173,body:{topic:n}})}}startBO(n){return{seq:this.sendMessageToRwg({evt:4175,body:{proto:n}})}}stopBO(n){return{seq:this.sendMessageToRwg({evt:4177,body:{status:n}})}}assignToBO(n,r){return{seq:this.sendMessageToRwg({evt:4179,body:{targetID:n,targetBID:r}})}}switchBO(n,r){return{seq:this.sendMessageToRwg({evt:4181,body:{targetID:n,targetBID:r}})}}wantJoinBO(n,r){return{seq:this.sendMessageToRwg({evt:4183,body:{targetID:n,targetBID:r}})}}joinBO(n){return{seq:this.sendMessageToRwg({evt:4193,body:{targetBID:n}})}}leaveBO(n=1){return{seq:this.sendMessageToRwg({evt:4185,body:{reason:n}})}}broadcastBO(n){return{seq:this.sendMessageToRwg({evt:4187,body:{textContent:n}})}}askForHelpBO(n){return{seq:this.sendMessageToRwg({evt:4189,body:{targetID:n}})}}askForHelpResultBO(n,r){return{seq:this.sendMessageToRwg({evt:4191,body:{targetID:n,helpResult:r}})}}coHostStartBO(n,r){return{seq:this.sendMessageToRwg({evt:4241,body:{proto:n,targetID:r}})}}coHostStopBO(n,r){return{seq:this.sendMessageToRwg({evt:4243,body:{status:n,targetID:r}})}}coHostAssignToBO(n,r,i){return{seq:this.sendMessageToRwg({evt:4245,body:{userGUID:n,targetID:i,targetBID:r}})}}moveToMainSession(n){return{seq:this.sendMessageToRwg({evt:4247,body:{userGUID:n}})}}coHostMoveToMainSession(n,r){return{seq:this.sendMessageToRwg({evt:4249,body:{userGUID:n,targetID:r}})}}allowParticipantRename(n){return{seq:this.sendMessageToRwg({evt:4163,body:{bOn:n}})}}allowMessageFeedbackNotify(n,r){return{seq:this.sendMessageToRwg({evt:4171,body:{bOn:n,id:r}})}}setPlayChime(n,r){return{seq:this.sendMessageToRwg({evt:4197,body:{bOn:n,id:r}})}}admitAllSilentUsers(){return{seq:this.sendMessageToRwg({evt:4199,body:{}})}}bindTeleUser(n,r,i){return{seq:this.sendMessageToRwg({evt:4201,body:{teleUserID:n,targetUserID:r,bBind:i}})}}practiceSession(){return{seq:this.sendMessageToRwg({evt:4207,body:null})}}roleChangeWebinar(n,r,i,l){return{seq:this.sendMessageToRwg({evt:4209,body:{jid:r,userID:i,clientCap:l,bPromote:n}})}}sendPromoteConsent(n,r){return{seq:this.sendMessageToRwg({evt:4254,body:{agreed:n,req_id:r}})}}batchCreateBOToken(n){const r=n.map(((i,l)=>({topic:i,index:l})));return{seq:this.sendMessageToRwg({evt:4211,body:r})}}mute(n,r){return{seq:this.sendMessageToRwg({evt:8193,body:{bMute:r,id:n}})}}audioDrop(n){return{seq:this.sendMessageToRwg({evt:8195,body:{id:n}})}}audioDialout(n,r,i,l,f){return{seq:this.sendMessageToRwg({evt:8197,body:{pn:n,dn2:Vc(r),bCallme:i,bPressOne:l,bGreeting:f}})}}audioCancelDialout(n,r){return{seq:this.sendMessageToRwg({evt:8199,body:{pn:n,bCallme:r}})}}audioMuteAll(n){return{seq:this.sendMessageToRwg({evt:8201,body:{bMute:n}})}}allowToTalk(n,r){return{seq:this.sendMessageToRwg({evt:8204,body:{id:n,bAllowTalk:r}})}}muteAttendeeVideo(n,r){return{seq:this.sendMessageToRwg({evt:12297,body:{id:n,bOn:r}})}}notifyRwgIsMuteVideo(n,r){return this.muteAttendeeVideo(n,r)}pauseSharing(){return{seq:this.sendMessageToRwg({evt:16385,body:{}})}}resumeSharing(){return{seq:this.sendMessageToRwg({evt:16387,body:{}})}}allowAnonymousQuestion(n,r){return{seq:this.sendMessageToRwg({evt:4155,body:{userId:n,bOn:r}})}}allowViewAll(n,r){return{seq:this.sendMessageToRwg({evt:4157,body:{userId:n,bOn:r}})}}allowVote(n,r){return{seq:this.sendMessageToRwg({evt:4159,body:{userId:n,bOn:r}})}}allowComment(n,r){return{seq:this.sendMessageToRwg({evt:4161,body:{userId:n,bOn:r}})}}sharingRequestRemoteControl(n,r){return{seq:this.sendMessageToRwg({evt:16389,body:{id:n,bOn:r}})}}subscribeGrabRemoteControl(n,r){return{seq:this.sendMessageToRwg({evt:16393,body:{id:n,bOn:r}})}}subscribeSharing(n,r,i,l,f){const h={id:n,size:r};return i&&Object.assign(h,{bShareToBO:!0}),l!==void 0&&Object.assign(h,{bVideoShare:l}),f!==void 0&&Object.assign(h,{bEnableViewMultiShareMode:f}),{seq:this.sendMessageToRwg({evt:16415,body:h})}}unsubscribeSharing(n,r,i){const l={id:n};return r&&Object.assign(l,{bShareToBO:!0}),i!==void 0&&Object.assign(l,{bEnableViewMultiShareMode:i}),{seq:this.sendMessageToRwg({evt:16417,body:l})}}sendRWGConnectionPerformance(n){return{seq:this.sendMessageToRwg({evt:4167,body:{data:n}})}}sendSdkKeyToMonitor(n,r,i){return{seq:this.sendMessageToRwg({evt:4167,body:{data:`ZoomConferenceClient,videoapp_HTML5_sdk_web_join,${i},2,${r},${n}`}})}}sendDatachannelOffer(n){return{seq:this.sendMessageToRwg({evt:24321,offer:n})}}joinOrLeaveVoip(n,r){return{seq:this.sendMessageToRwg({evt:8203,body:{bOn:n,mute:r}})}}startSharing(n,r){return{seq:this.sendMessageToRwg({evt:16409,body:{id:n,boOn:!1,...r??{}}})}}stopSharing(n){return{seq:this.sendMessageToRwg({evt:16409,body:{id:n,bOn:!0}})}}lockSharing(n){return{seq:this.sendMessageToRwg({evt:4169,body:{lockShare:n}})}}startShareToBreakoutRoom(n){return{seq:this.sendMessageToRwg({evt:16425,body:{id:n,bShareToBO:!0}})}}stopShareToBreakoutRoom(n){return{seq:this.sendMessageToRwg({evt:16425,body:{id:n,bShareToBO:!1}})}}preAssignBreakoutRoom(){return{seq:this.sendMessageToRwg({evt:4213,body:{}})}}claimHost(n){return{seq:this.sendMessageToRwg({evt:4215,body:{hostKey:n}})}}allowMultiplePin(n,r){return{seq:this.sendMessageToRwg({evt:4217,body:{userID:n,bOn:r}})}}spotlightVideo(n,r){return{seq:this.sendMessageToRwg({evt:4219,body:{id:n,...r}})}}connectCamera(n,r){const i={evt:12307,body:{id:n,bOn:r}};return{seq:this.sendMessageToRwg(i)}}followHostLayout(n){return{seq:this.sendMessageToRwg({evt:4223,body:{bFollowHostVideo:n}})}}setVideoDragLayout(n){return{seq:this.sendMessageToRwg({evt:4218,body:{drag_list:n}})}}chatCmdReq(n,r){return{seq:this.sendMessageToRwg({evt:4237,body:{msgID:n,cmd:r}})}}activeAppLinkReq(n){return{seq:this.sendMessageToRwg({evt:4257,body:{appId:n}})}}activeAppInfoReq(){return{seq:this.sendMessageToRwg({evt:4255,body:{}})}}muteShareAudio(n,r){const i={bOn:!0,bShareAudio:!n};return r&&Object.assign(i,{bShareAudioOnly:!0}),{seq:this.sendMessageToRwg({evt:16423,body:i})}}localMuteAudio(n,r){return{seq:this.sendMessageToRwg({evt:8209,body:{id:n,bMute:r}})}}changeSharePronoun(n,r){return{seq:this.sendMessageToRwg({evt:4264,body:{bPronoun:n,strPronoun:r}})}}sendReceivingSharingReady(n){return{seq:this.sendMessageToRwg({evt:16421,body:{ssrc:n}})}}sendManualCaption(n){return{seq:this.sendMessageToRwg({evt:4289,body:{...n}})}}sendPollingAction(n,r,i){return{seq:this.sendMessageToRwg({evt:4224,body:{action:n,PollingId:r,...i}})}}broadcastUserNetworkQuality(n){const r={type:n.isUplink,level:n.level,bwLevel:n.bwLevel};return{seq:this.sendMessageToRwg({evt:4331,body:r})}}sendFarEndCameraControl(n,r,i){return{seq:this.sendMessageToRwg({evt:4329,body:{cmd:n,userID:r,buttonID:i}})}}sendCameraAblity(n){return{seq:this.sendMessageToRwg({evt:4330,body:{...n,focus:!1}})}}sendReaction(n){return{seq:this.sendMessageToRwg({evt:4259,body:{...n}})}}remoteControlConsent(n,r,i,l,f=!1,h){const{deviceId:v,...y}=l,_=h!==void 0?{runAsAdmin:h}:{};return{seq:this.sendMessageToRwg({evt:16427,body:{DeviceID:v,op:n,SendUserID:i,AssignUserID:r,...y,bAutoDelete:f,..._}})}}takeBackRemoteControlPermission(n,r){return{seq:this.sendMessageToRwg({evt:16431,body:{SendUserID:n,ReceiverUserID:r}})}}syncSharedContentMetaWithRcApp(n){const{deviceId:r,...i}=n;return{seq:this.sendMessageToRwg({evt:16429,body:{DeviceID:r,...i}})}}startLiveStream(n,r,i){return{seq:this.sendMessageToRwg({evt:7977,body:{action:1,streamingURL:n,streamingKey:r,broadcastURL:i}})}}stopLiveStream(){return{seq:this.sendMessageToRwg({evt:7977,body:{action:0}})}}sendRemoteControlAuth(n){return{seq:this.sendMessageToRwg({evt:16433,body:{auth:n}})}}chatFileTransfer(n){return{seq:this.sendMessageToRwg({evt:4307,body:{...n,fileType:0,receiverType:0}})}}broadcastVoiceReq(n){return{seq:this.sendMessageToRwg({evt:4314,body:{broadcastVoice:n}})}}requestUserInfoToken(n,r){return{seq:this.sendMessageToRwg({evt:4309,body:{type:n,reqId:r}})}}toggleShareAnnotation(n,r){return{seq:this.sendMessageToRwg({evt:20241,body:{annotationOff:n?0:1,activeNodeId:r}})}}sendCommandMessage(n,r){return{seq:this.sendMessageToRwg({evt:4383,body:{recieverID:r,commandContent:n}})}}}class zr extends kMe{static createAgent(){return this.rwgInstance||(this.rwgInstance=new zr),this.rwgInstance}}zr.rwgInstance=null;class OQ extends kMe{static getInstance(){return this.instance||(this.instance=new OQ),this.instance}}OQ.instance=null;class Q0{constructor(n){this[Ia]=void 0,this[Ja]=void 0,this[go]=void 0,this[IJ]=void 0,this[Ia]=n,this[Ja]=n.dispatch,this[go]=n.getState}}let tE=(function(e){return e.Open="open",e.Message="message",e.Error="error",e.Close="close",e})({});class Q2{constructor(){this.eventHandlers=void 0,this.websocket=void 0,this.seq=void 0,this.eventHandlers=new Map,this.websocket=null,this.seq=1}static getInstance(){return this.xmppInstance||(this.xmppInstance=new Q2),this.xmppInstance}on(n,r){let i=this.eventHandlers.get(n);i||(i=[]),i.push(r),this.eventHandlers.set(n,i)}off(n,r){const i=this.eventHandlers.get(n);if(i){const l=i.filter((f=>f!==r));this.eventHandlers.set(n,l)}}emit(n,r){const i=this.eventHandlers.get(n);i&&i instanceof Array&&i.slice(0).forEach((l=>{try{l(r)}catch(f){console.error(f)}}))}sendMessageToRwg(n){this.seq+=1;const r=this.seq;return this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify(Object.assign(n,{seq:r}))),r}connect(n,r){this.websocket=r?new window.ZoomTPModule.ZoomTPWebSocket(n):new WebSocket(n),this.websocket.binaryType="arraybuffer",this.addWebSocketEventListeners()}close(){var n;(n=this.websocket)===null||n===void 0||n.close()}addWebSocketEventListeners(){this.websocket&&(this.websocket.addEventListener("open",(n=>{this.emit(tE.Open,n)})),this.websocket.addEventListener("message",(n=>{const{data:r}=n;var i;if(r instanceof ArrayBuffer)new Uint8Array(r)[0]===0&&((i=this.websocket)===null||i===void 0||i.send(r));else try{this.emit(tE.Message,JSON.parse(r))}catch{console.warn("Unsupported format",r)}})),this.websocket.addEventListener("close",(n=>{this.emit(tE.Close,n)})),this.websocket.addEventListener("error",(n=>{this.emit(tE.Error,n)})))}join(n){return{seq:this.sendMessageToRwg({evt:24576,body:{clientCap:n}})}}raiseHand(){return{seq:this.sendMessageToRwg({evt:24580,body:null})}}lowerHand(n){return{seq:this.sendMessageToRwg({evt:24578,jids:n||[]})}}sendWebinarMseeage(n,r,i,l=!1){const f={msg:n,jid:r?[r]:[],type:i,bcm:l};return{seq:this.sendMessageToRwg({evt:24582,body:f})}}sendAnswer(n,r,i){return{seq:this.sendMessageToRwg({evt:24584,body:{question_attendeejid:r.jid,question_attendeename:r.displayName,question_text:r.questionText,question_id:r.questionId,question_anonymous:r.isAnonymous,question_time:r.questionTime,text:n,isPrivate:i}})}}answerOnline(n,r){return{seq:this.sendMessageToRwg({evt:24586,body:{question_attendeejid:n.jid,question_attendeename:n.displayName,question_text:n.questionText,question_id:n.questionId,question_anonymous:n.isAnonymous,question_time:n.questionTime,isLiveStart:r}})}}dismissQuestion(n){return{seq:this.sendMessageToRwg({evt:24590,body:{question_attendeejid:n.jid,question_attendeename:n.displayName,question_text:n.questionText,question_id:n.questionId,question_anonymous:n.isAnonymous,question_time:n.questionTime,bOpen:!1}})}}deleteQuestion(n){return{seq:this.sendMessageToRwg({evt:24614,body:{question_id:n,bDelete:!0}})}}deleteComment(n){return{seq:this.sendMessageToRwg({body:{comment_id:n,bDelete:!0},evt:24616})}}reopenQuestion(n){return{seq:this.sendMessageToRwg({body:{question_attendeejid:n.jid,question_attendeename:n.displayName,question_text:n.questionText,question_id:n.questionId,question_anonymous:n.isAnonymous,question_time:n.questionTime,bOpen:!0},evt:24590})}}askQuestion(n,r,i=!1,l){const f=YJ();return{seq:this.sendMessageToRwg({body:{id:f,text:n,isAnonymous:i,bAllowAttendeeViewAllQuestion:l,name:r},evt:24592}),questionId:f}}upOrDownVote(n,r){return{seq:this.sendMessageToRwg({body:{question_attendeejid:n.jid,question_attendeename:n.displayName,question_text:n.questionText,question_id:n.questionId,question_anonymous:n.isAnonymous,question_time:n.questionTime,bUpVote:r},evt:24598})}}rename(n,r){return{seq:this.sendMessageToRwg({body:{jid:n,displayName:r},evt:24600})}}setSkinTome(n){return{seq:this.sendMessageToRwg({body:{skinTone:n},evt:24618})}}}function d6(e){return KA(Kn(((n,r)=>e(n,r))),Gt((n=>n!=null)))}function MMe(e){return KA(Nt(((n,r)=>e(n,r)||Yn)))}function cE(e){return KA(Nt(((n,r)=>e(n,r))),Nt((n=>Array.isArray(n)?An(n):Di(n))))}Q2.xmppInstance=null;const o8e={period:500,rules:[{peak:50,throttle:300},{peak:60,throttle:400}]},ape={[`${la}`]:()=>({payloads:{add:[],update:[],remove:[]},onThrottle(e){e.add&&this.payloads.add.push(...e.add),e.update&&this.payloads.update.push(...e.update),e.remove&&this.payloads.remove.push(...e.remove)}})};function NMe(e=o8e){return n=>new Hc((r=>{const i=new Map;let l=0,f=null;const{period:h,rules:v}=e;let y=null;f||(f=((R,k)=>{const N=performance.now();let L=0,B=!1;return setTimeout((function H(){L+=k,R();const q=performance.now()-N-L,Y=setTimeout(H,Math.max(k-q,0));B&&clearTimeout(Y)}),k),()=>{B=!0}})((()=>{l=0}),h));const _=Object.keys(ape),A=n.subscribe({next(R){if(R&&R.evt&&f!==null){l+=1;const{evt:k,body:N}=R,L=String(k);if(_.indexOf(L)>=0)if(y){const B=i.get(L);if(B)B.onThrottle(N);else{const H=ape[L]();H.onThrottle(N),i.set(L,H)}}else{let B=0;if(v.forEach((H=>{l>H.peak&&(B=H.throttle)})),B>0){const H=ape[L]();H.onThrottle(N),i.set(L,H),y=setTimeout((()=>{i.forEach(((q,Y)=>{const K={evt:Number(Y),body:q.payloads};r.next(K)})),i.clear(),y=null}),B)}else r.next(R)}else r.next(R)}else r.next(R)},error(R){r.error(R)},complete(){r.complete()}});return()=>{A.unsubscribe(),f&&(f(),f=null),l=0}}))}let wi=(function(e){return e.Closed="closed",e.Connecting="connecting",e.Connected="connected",e})({});function Eu(e){return 1<<e-1}let Jm=(function(e){return e[e.SupportASL=Eu(1)]="SupportASL",e[e.SidecarPhase2=Eu(2)]="SidecarPhase2",e[e.SupportBroadcastVoice=Eu(4)]="SupportBroadcastVoice",e[e.SendMeetingTokenSeparately=Eu(5)]="SendMeetingTokenSeparately",e[e.SupportPreview=Eu(6)]="SupportPreview",e[e.WebCameraIndication=Eu(7)]="WebCameraIndication",e[e.SupportFarEndCameraControl=Eu(9)]="SupportFarEndCameraControl",e[e.SupportVideoShare=Eu(10)]="SupportVideoShare",e[e.UnifyErrorType=Eu(11)]="UnifyErrorType",e[e.WhiteBoard=Eu(12)]="WhiteBoard",e[e.RequestRemoteControl=Eu(14)]="RequestRemoteControl",e[e.SmartSummary=Eu(15)]="SmartSummary",e[e.LocalRecording=Eu(16)]="LocalRecording",e[e.LocalRecordingGrantPermission=Eu(17)]="LocalRecordingGrantPermission",e[e.ShareMultiStream=Eu(18)]="ShareMultiStream",e[e.VideoLTR=Eu(19)]="VideoLTR",e[e.WebrtcAudioRtcpTime=Eu(20)]="WebrtcAudioRtcpTime",e[e.SupportSend1080PVideo=Eu(29)]="SupportSend1080PVideo",e[e.SupportSend1080PVideoShare=Eu(30)]="SupportSend1080PVideoShare",e})({}),DEe=(function(e){return e[e.SupportPresenterAnnotation=Eu(5)]="SupportPresenterAnnotation",e[e.SupportMMRCommandChannel=Eu(11)]="SupportMMRCommandChannel",e})({});const{setAsnIds:PMe,setIsCanUnmute:LMe,setDialoutSequence:BMe,setDialoutResultCode:VMe,setIsAllowToTalk:Qme,setAudioSsrc:HMe,setIsMutedUponEntry:FMe,setIsUserGrantCaptureAudio:$Me,setIsMicrophoneForbidden:$be,setWebrtcRestartCount:G2,setMicrophoneList:UMe,setSpeakerList:jMe,setActiveMicrophone:L5,setActiveSpeaker:IQ,setCanPlayAudio:PL,resetAudio:zMe,setIsComputerAudioLoading:KR,setIsAllowToTalkAttendeeConnected:ege,setIsMuteBeforeSharingAudio:lE,addLocalShareAudioUser:WMe,updateLocalShareAudioUser:GMe,setIsJoinComputerAudioBeforeSharingAudio:LL,setIsShareAudioEnabled:RQ,setIsShareAudioMuted:RX,setIsSharingAudio:BL,setAudioDataEncoding:xX,setAudioDataDecoding:DX,addLocallyMutedAudio:qMe,removeLocallyMutedAudio:kX,updateUserAudioVolumeLocally:KMe,removeLocalUserAudioVolume:ZMe,setCustomizedAudioOption:Ube,setIsBackgroundNoiseSuppression:tge,setIsHidEnabled:YMe,setAudioMediaPlaybackFile:nge,setIsStopAllIncomingAudio:oge,setIsVerifiedAudioPermissionOnIosMobile:JMe,setIsAudioBridgeSignalReconnecting:jbe,setAudioMutedSource:U0,setAudioUnmutedSource:B5,setAudioOriginalSound:sge,setLeaveAudioSource:uE,setSecondaryAudioMicrophoneId:MX,setCrcCallOutSequence:XMe,setCrcCallOutReturnCode:QMe,setWebRtcAudioCapable:eNe}=Ql("SET_ASN_IDS","SET_IS_CAN_UNMUTE","SET_DIALOUT_SEQUENCE","SET_DIALOUT_RESULT_CODE","SET_IS_ALLOW_TO_TALK","SET_AUDIO_SSRC","SET_IS_MUTED_UPON_ENTRY","SET_IS_USER_GRANT_CAPTURE_AUDIO","SET_IS_MICROPHONE_FORBIDDEN","SET_WEBRTC_RESTART_COUNT","SET_MICROPHONE_LIST","SET_SPEAKER_LIST","SET_ACTIVE_MICROPHONE","SET_ACTIVE_SPEAKER","SET_CAN_PLAY_AUDIO","RESET_AUDIO","SET_IS_COMPUTER_AUDIO_LOADING","SET_IS_ALLOW_TO_TALK_ATTENDEE_CONNECTED","SET_IS_MUTE_BEFORE_SHARING_AUDIO","SET_IS_SHARING_AUDIO","ADD_LOCAL_SHARE_AUDIO_USER","UPDATE_LOCAL_SHARE_AUDIO_USER","SET_IS_JOIN_COMPUTER_AUDIO_BEFORE_SHARING_AUDIO","SET_IS_SHARE_AUDIO_ENABLED","SET_IS_SHARE_AUDIO_MUTED","SET_AUDIO_DATA_ENCODING","SET_AUDIO_DATA_DECODING","ADD_LOCALLY_MUTED_AUDIO","REMOVE_LOCALLY_MUTED_AUDIO","UPDATE_USER_AUDIO_VOLUME_LOCALLY","REMOVE_LOCAL_USER_AUDIO_VOLUME","SET_CUSTOMIZED_AUDIO_OPTION","SET_IS_BACKGROUND_NOISE_SUPPRESSION","SET_IS_HID_ENABLED","SET_AUDIO_MEDIA_PLAYBACK_FILE","SET_IS_STOP_ALL_INCOMING_AUDIO","SET_IS_VERIFIED_AUDIO_PERMISSION_ON_IOS_MOBILE","SET_IS_AUDIO_BRIDGE_SIGNAL_RECONNECTING","SET_AUDIO_MUTED_SOURCE","SET_AUDIO_UNMUTED_SOURCE","SET_AUDIO_ORIGINAL_SOUND","SET_LEAVE_AUDIO_SOURCE","SET_SECONDARY_AUDIO_MICROPHONE_ID","SET_CRC_CALL_OUT_SEQUENCE","SET_CRC_CALL_OUT_RETURN_CODE","SET_WEB_RTC_AUDIO_CAPABLE");function rge(e){const{audio:{isBackgroundNoiseSuppression:n,originalSound:r,highBitrate:i}}=e,l={currentSelect:iSe.Denoise},f={highfidelity:!1,stereo:!1};if(r){Object.assign(l,{currentSelect:iSe.OriginalSound});const h={};typeof r=="boolean"?Object.assign(h,f):Object.assign(h,{highfidelity:!!r.hifi,stereo:!!r.stereo}),Object.assign(l,{originalSound:h})}return Object.assign(l,{backgroundNoiseSuppression:n?rSe.Zoom:rSe.Browser,highBitrate:i}),l}function V5(e,n,r,i){const{meeting:{userId:l}}=i;return aDe(n,r,i,e),n===l?RX(r):GMe({userId:n,muted:r})}async function tL(e,n,r){var i,l;const{audio:{audioSsrc:f,activeMicrophone:h,activeSpeaker:v,isAllowToTalk:y,customizeAudioOption:{speakerOnly:_,mute:A,microphoneId:R,speakerId:k},isUsingMediaPlayback:N,mediaPlaybackFile:L,isHIDEnabled:B,microphoneDevicesList:H,isVerifiedAudioPermissionOnIOSMobile:q,speakerDevicesList:Y,isWebRtcAudioCapable:K},meeting:{userId:se}}=n,ie=Do(n),le=!!_||Ku(ie.userRole)&&!y,M=r??!le;let we=h,Ne=v;if(R!==void 0||k!==void 0){let De=H,be=Y;if(H.length===0){const{microphones:me,speakers:Ye}=await Ra(j2());De=me,be=Ye}R&&De.findIndex((me=>me.deviceId===R))>-1&&(we=R),k&&be.findIndex((me=>me.deviceId===k))>-1&&(Ne=k)}if(N&&L!=null&&L.url){const De=qp.getInstance();await De.setAudioElement(L),we=De.audioElement,L.playback!==void 0&&(e.enablePlayAudioFileLocally(!!L.playback),we.dataset.playback=L.playback?"1":"0")}else qp.getInstance().stopAudioElement();return le&&!q&&bo.isIOSMobile&&await(async function(){await navigator.mediaDevices.getUserMedia({audio:!0})})(),(i=e.joinComputerAudio(f,we,Ne,M,rge(n),K,B?{microphoneLabel:(l=H.find((De=>De.deviceId===h)))===null||l===void 0?void 0:l.label,defaultMuted:!(ie==null||!ie.muted)}:void 0))===null||i===void 0?void 0:i.then((()=>{A&&zr.createAgent().mute(se,!0)}))}async function zbe(e,n){const r=[],{audio:{isJoinComputerAudioBeforeSharingAudio:i,mutedBeforeSharingAudio:l}}=n,f=Do(n);return i===!0&&(r.push(LL(void 0)),l===!1&&(r.push(B5(zP.SharingAudio)),e.mute(f.userId,!1)),r.push(lE(void 0))),r}async function kEe(e,n,r){const{audio:{isSharingAudio:i},meeting:{userId:l}}=r,f=[];if(f.push(V5(e,l,!0,r)),i){await e.leaveSharingAudio(!1),f.push(BL(!1));const h=await zbe(n,r);f.push(...h),setTimeout((()=>{He(CL,{state:"off"})}),0)}return f.push(RQ(!1)),f}async function ige(e,n,r){const{audio:{audioSsrc:i,activeMicrophone:l,activeSpeaker:f,isWebRtcAudioCapable:h},meeting:{mediaFeatureOptions:v}}=r,y=Do(r),_=[];if(!Yo.isSupportOpenMicWhenShareAudio(v||"")){const A=await(async function(R,k){const N=[],L=Do(k),{audio:{isMicrophoneForbidden:B}}=k;return(L==null?void 0:L.audio)===Ur.Computer&&(N.push(LL(!0)),N.push(lE(L.muted)),L.muted||R.muteAudio(),N.push(G2(0)),B&&N.push($be(!1))),N})(e,r);_.push(...A)}return await e.leaveSharingAudio(!0),await e.joinSharingAudio({ssrc:i,microphoneDeviceId:l,speakerDeviceId:f,isCaptureAudio:Ku(y.userRole),audioBridge:h}),_.push(RQ(!0)),_.push(BL(!0)),_.push(V5(e,y.userId,!1,r)),_.findIndex((A=>A.type===`${LL}`&&A.payload===!0))>-1&&(_.push(U0(sb.SharingAudio)),n.mute(r.meeting.userId,!0)),setTimeout((()=>{He(CL,{state:"on"})}),0),_}const H5=()=>{if(URe())return!0;{var e;let{browser:r}=bo;if(r=(e=r)===null||e===void 0?void 0:e.toLocaleLowerCase(),r.indexOf("safari")>-1&&r.indexOf("ios-safari")===-1){var n;const i=(n=navigator.userAgent.match(/version\/(\d+\.?\d+)/i))===null||n===void 0?void 0:n[1];return ZJ(i||"","15.2")>=0&&ZJ(i||"","17.1")<0}return!1}};function MEe(e,n,r){for(let i=0;i<r.length&&n.length!==0;i++){const{userId:l,displayName:f}=r[i];if(n.includes(l)){const h=e.find((v=>v.userId===l));h&&(h.displayName=f,n.splice(n.indexOf(l),1))}}}function NEe(e,n){return Yo.isSupportAudioDenoise(e,n)}function PEe(){return Yo.isSupportStereoAudio()}function LEe(){var e;return typeof((e=window.navigator.hid)===null||e===void 0?void 0:e.requestDevice)=="function"}function age(e,n,r){const{audio:{isAllowToTalk:i,customizeAudioOption:l},media:{audioDecodeStatus:f,audioEncodeStatus:h}}=e;return{encodeInitStatus:Ku(n.userRole)&&!i||r||l!=null&&l.speakerOnly?"success":h,decodeInitStatus:f}}function tNe(e){const{audio:{bMutedUponEntry:n,isUserGrantCaptureAudio:r,isAllowToTalk:i}}=e,l=Do(e);return!(r||l!=null&&l.isHost||i)&&n}function cge(e,n){const{audio:{customizeAudioOption:r}}=n,i=!(r==null||!r.mute)||tNe(n);e.joinOrLeaveVoip(!0,i)}function BEe(){return mf(si(MP.JoinComputerAudio.success,1),wl(...MP.JoinComputerAudio.fail.map((e=>si(e,1).pipe(Nt((n=>{const{errorCode:r,...i}=n??{},l={...i};return r!==void 0&&Object.assign(l,{subCode:r}),ZA({type:hf,reason:e,errorCode:Fe.AUDIO_CAPTURE_FAILED,...l})})))))),Uc(45e3).pipe(Nt((()=>ZA({type:pQ,errorCode:Fe.OPERATION_TIMEOUT})))))}const k0=zr.createAgent(),Ed=yQ(sp(Yo.getInstance())),VEe=e=>!e.muted,nNe=ga("SCREENSHOT_SHARING_NOTIFICATION"),{setSharePrivilege:Wbe,setShareActiveNode:nL,setIsReceiveSharing:BA,setIsScreenShareForbidden:HEe,setShareDimension:Gbe,setShareStatus:Yp,setShareSsrc:oNe,setShareQuality:qbe,setReceivedShareDimension:NX,setIsGrabRemoteControl:HY,setIsSdkGrabControl:lge,setIsReceiveSharingFromMainSession:sNe,setIsSharingToBreakoutRoom:HU,setIsSharingWithSecondCamera:rNe,setShringSecondCameraId:iNe,setIsRequireReadReceipt:aNe,setIsOptimizedForSharedVideo:PX,setShareDataEncoding:uge,setShareDataDecoding:F5,addShareCapturedEnsuredCanvas:cNe,addShareRenderedEnsuredCanvas:lNe,setRemoteControlCurrentSsrc:bWe,setRemoteControllingSsrc:c5,setApprovedRemoteControlSsrc:oL,setRemoteControlAppDownloadUrl:uNe,setRemoteControlAppInstallStatus:o2,remoteControlAppStatusFallbackCheck:FEe,remoteControlAppLaunchedCheck:cpe,setIsEnableAutoDeleteRcApp:yWe,setRemoteControlAppLaunchSheme:k1,addRemoteControlledUser:dNe,removeRemoteControlledUser:dge,setRemoteControlSetting:Kbe,setRemoteControlViewportDomSelector:Zbe,setAnnotationCapability:fNe,setIsAnnotationInitialized:s8e,setIsAnnotationStarted:r8e,setAnnotationUser:W0,setAnnotationToolColor:pNe,setAnnotationSpotlightColor:hNe,setAnnotationToolWidth:mNe,setAnnotationToolType:sL,setIsSimultaneousShareView:fge,addShareViewAttachment:LX,removeShareViewAttachment:l5,setAnnotationVanishingToolTimer:gNe,resetShare:vNe}=Ql("SET_SHARE_PRIVILEGE","SET_SHARE_ACTIVE_NODE","SET_IS_RECEIVE_SHARING","SET_IS_SCREEN_SHARE_FORBIDDEN","SET_SHARE_DIMENSION","SET_SHARE_STATUS","SET_SHARE_SSRC","SET_SHARE_QUALITY","SET_RECEIVED_SHARE_DIMENSION","SET_IS_GRAB_REMOTE_CONTROL","SET_IS_SDK_GRAB_CONTROL","SET_IS_RECEIVE_SHARING_FROM_MAIN_SESSION","SET_IS_SHARING_TO_BREAKOUT_ROOM","SET_IS_SHARING_WITH_SECOND_CAMERA","SET_SHRING_SECOND_CAMERA_ID","SET_IS_REQUIRE_READ_RECEIPT","SET_IS_OPTIMIZED_FOR_SHARED_VIDEO","SET_SHARE_DATA_ENCODING","SET_SHARE_DATA_DECODING","ADD_SHARE_CAPTURED_ENSURED_CANVAS","ADD_SHARE_RENDERED_ENSURED_CANVAS","SET_REMOTE_CONTROL_CURRENT_SSRC","SET_REMOTE_CONTROLLING_SSRC","SET_APPROVED_REMOTE_CONTROL_SSRC","SET_REMOTE_CONTROL_APP_DOWNLOAD_URL","SET_REMOTE_CONTROL_APP_INSTALL_STATUS","REMOTE_CONTROL_APP_STATUS_FALLBACK_CHECK","REMOTE_CONTROL_APP_LAUNCHED_CHECK","SET_IS_ENABLE_AUTO_DELETE_RC_APP","SET_REMOTE_CONTROL_APP_LAUNCH_SHEME","ADD_REMOTE_CONTROLLED_USER","REMOVE_REMOTE_CONTROLLED_USER","SET_REMOTE_CONTROL_SETTING","SET_REMOTE_CONTROL_VIEWPORT_DOM_SELECTOR","SET_ANNOTATION_CAPABILITY","SET_IS_ANNOTATION_INITIALIZED","SET_IS_ANNOTATION_STARTED","SET_ANNOTATION_USER","SET_ANNOTATION_TOOL_COLOR","SET_ANNOTATION_SPOTLIGHT_COLOR","SET_ANNOTATION_TOOL_WIDTH","SET_ANNOTATION_TOOL_TYPE","SET_IS_SIMULTANEOUS_SHARE_VIEW","ADD_SHARE_VIEW_ATTACHMENT","REMOVE_SHARE_VIEW_ATTACHMENT","SET_ANNOTATION_VANISHING_TOOL_TIMER","RESET_SHARE"),vP=zr.createAgent(),kR=yQ(sp(Yo.getInstance())),lpe=zr.createAgent(),bP=yQ(sp(Yo.getInstance())),$Ee=[Kh.Canceled,Kh.CancelFailed],zZ={asnIds:{asn1:{userId:0,displayName:null},asn2:{userId:0,displayName:null},asn3:{userId:0,displayName:null}},microphoneDevicesList:[],speakerDevicesList:[],activeMicrophone:"default",activeSpeaker:"default",isMicrophoneForbidden:!1,audioSsrc:0,bCanUnmute:!1,bMutedUponEntry:!1,isAllowToTalk:void 0,dialout:[],crcDevice:[],canPlayAudio:!1,mutedSource:void 0,unmutedSource:void 0,isUserGrantCaptureAudio:!1,webrtcRestartCount:0,isComputerAudioLoading:!1,isUsingMediaPlayback:!1,customizeAudioOption:{},localShareAudioUserMutedList:[],locallyMutedAudioList:[],localUserAudioVolumeList:[],isStopAllImcomingAudio:!1,isWebRtcAudioCapable:!1,webRtcAudioMode:0,statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,bandwidth:0,bitrate:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,bandwidth:0,bitrate:0}}},i8e=op({[`${PMe}`]:We(((e,{payload:n})=>{e.asnIds={...n}})),[`${LMe}`]:We(((e,{payload:n})=>{e.bCanUnmute=n})),[`${BMe}`]:We(((e,{payload:n})=>{const{sequence:r,phoneNumber:i}=n;e.dialout.findIndex((l=>l.sequence===r))===-1&&e.dialout.push({sequence:r,phoneNumber:i,returnCode:-1,uuid:EX()})})),[`${VMe}`]:We(((e,{payload:n})=>{const{sequence:r,code:i,nodeId:l}=n,f=e.dialout.find((h=>h.sequence===r));f&&(f.returnCode=i,l&&(f.phoneNodeId=l))})),[`${Qme}`]:We(((e,{payload:n})=>{e.isAllowToTalk=n,e.isAllowToTalkAttendeeConnected=!1})),[`${U0}`]:We(((e,{payload:n})=>{e.mutedSource=n})),[`${B5}`]:We(((e,{payload:n})=>{e.unmutedSource=n})),[`${HMe}`]:We(((e,{payload:n})=>{e.audioSsrc=n})),[`${FMe}`]:We(((e,{payload:n})=>{e.bMutedUponEntry=n})),[`${$Me}`]:We(((e,{payload:n})=>{e.isUserGrantCaptureAudio=n})),[`${$be}`]:We(((e,{payload:n})=>{e.isMicrophoneForbidden=n})),[`${G2}`]:We(((e,{payload:n})=>{e.webrtcRestartCount=n})),[`${UMe}`]:We(((e,{payload:n})=>{e.microphoneDevicesList=n})),[`${jMe}`]:We(((e,{payload:n})=>{e.speakerDevicesList=n})),[`${L5}`]:We(((e,{payload:n})=>{e.activeMicrophone=n})),[`${IQ}`]:We(((e,{payload:n})=>{e.activeSpeaker=n})),[`${PL}`]:We(((e,{payload:n})=>{e.canPlayAudio=n})),[`${KR}`]:We(((e,{payload:n})=>{e.isComputerAudioLoading=n})),[`${Ube}`]:We(((e,{payload:n})=>{if(n){const{speakerOnly:r,mute:i,backgroundNoiseSuppression:l,originalSound:f,syncButtonsOnHeadset:h,mediaFile:v,microphoneId:y,speakerId:_,highBitrate:A}=n;e.customizeAudioOption.speakerOnly=r,e.customizeAudioOption.mute=i,e.customizeAudioOption.microphoneId=y,e.customizeAudioOption.speakerId=_,e.isBackgroundNoiseSuppression=!!l,e.isHIDEnabled=!!h,e.originalSound=f,e.highBitrate=!!A,l6(e.mediaPlaybackFile,v)||(e.mediaPlaybackFile=v,e.isUsingMediaPlayback=!(v==null||!v.url)),i&&(e.mutedSource=sb.Inherited)}})),[`${ege}`]:We(((e,{payload:n})=>{e.isAllowToTalkAttendeeConnected=n})),[`${lE}`]:We(((e,{payload:n})=>{e.mutedBeforeSharingAudio=n})),[`${BL}`]:We(((e,{payload:n})=>{e.isSharingAudio=n})),[`${RX}`]:We(((e,{payload:n})=>{e.isShareAudioMuted=n})),[`${WMe}`]:We(((e,{payload:n})=>{const{userId:r,isFromMainSession:i}=n;e.localShareAudioUserMutedList.findIndex((l=>l.userId===r))===-1&&e.localShareAudioUserMutedList.push({userId:r,isFromMainSession:i,muted:!1})})),[`${GMe}`]:We(((e,{payload:n})=>{const r=e.localShareAudioUserMutedList.find((i=>i.userId===n.userId));r&&(r.muted=n.muted)})),[`${LL}`]:We(((e,{payload:n})=>{e.isJoinComputerAudioBeforeSharingAudio=n})),[`${RQ}`]:We(((e,{payload:n})=>{e.isShareAudioEnabled=n})),[`${xX}`]:We(((e,{payload:n})=>{const{data:{encoding:r,rate:i,...l}}=n;e.statistic.encode={bitrate:i,...l}})),[`${DX}`]:We(((e,{payload:n})=>{const{data:{encoding:r,rate:i,...l}}=n;e.statistic.decode={bitrate:i,...l}})),[`${qMe}`]:We(((e,{payload:n})=>{e.locallyMutedAudioList.findIndex((r=>r===n))===-1&&e.locallyMutedAudioList.push(n)})),[`${kX}`]:We(((e,{payload:n})=>{const r=e.locallyMutedAudioList.findIndex((i=>i===n));r!==-1&&e.locallyMutedAudioList.splice(r,1)})),[`${KMe}`]:We(((e,{payload:n})=>{const r=e.localUserAudioVolumeList.find((i=>i.userId===n.userId));if(r?r.volume=n.volume:e.localUserAudioVolumeList.push(n),n.volume>0){const i=e.locallyMutedAudioList.findIndex((l=>l===n.userId));i!==-1&&e.locallyMutedAudioList.splice(i,1)}})),[`${ZMe}`]:We(((e,{payload:n})=>{const r=e.localUserAudioVolumeList.findIndex((i=>i.userId===n.userId));r!==-1&&e.localUserAudioVolumeList.splice(r,1)})),[`${tge}`]:We(((e,{payload:n})=>{e.isBackgroundNoiseSuppression=n})),[`${YMe}`]:We(((e,{payload:n})=>{e.isHIDEnabled=n})),[`${nge}`]:We(((e,{payload:n})=>{e.mediaPlaybackFile=n,e.isUsingMediaPlayback=!(n==null||!n.url)})),[`${oge}`]:We(((e,{payload:n})=>{e.isStopAllImcomingAudio=n})),[`${JMe}`]:We(((e,{payload:n})=>{e.isVerifiedAudioPermissionOnIOSMobile=n})),[`${jbe}`]:We(((e,{payload:n})=>{e.isAudioBridgeSignalReconnecting=n})),[`${sge}`]:We(((e,{payload:n})=>{e.originalSound=n})),[`${uE}`]:We(((e,{payload:n})=>{e.leaveAudioSource=n,e.unmutedSource=zP.Inherited})),[`${MX}`]:We(((e,{payload:n})=>{e.secondaryAudioMicrophoneId=n})),[`${XMe}`]:We(((e,{payload:n})=>{const{sequence:r,ip:i,protocol:l}=n;e.crcDevice.findIndex((f=>f.sequence===r))===-1&&e.crcDevice.push({sequence:r,ip:i,protocol:l,transId:0,uuid:EX()})})),[`${QMe}`]:We(((e,{payload:n})=>{const{sequence:r,transID:i,result:l}=n,f=e.crcDevice.find((h=>h.sequence===r));f&&Object.assign(f,{transId:i,returnCode:l})})),[`${eNe}`]:We(((e,{payload:n})=>{const{isWebRtcAudioCapable:r,webRtcAudioMode:i}=n;e.isWebRtcAudioCapable=r,e.webRtcAudioMode=i})),[`${zMe}`]:({dialout:e,crcDevice:n,locallyMutedAudioList:r,localUserAudioVolumeList:i,customizeAudioOption:l,originalSound:f,highBitrate:h,isHIDEnabled:v,isBackgroundNoiseSuppression:y,isStopAllImcomingAudio:_,mediaPlaybackFile:A,isUsingMediaPlayback:R,isVerifiedAudioPermissionOnIOSMobile:k,activeSpeaker:N,activeMicrophone:L},{payload:B})=>B?{...zZ,dialout:e,crcDevice:n,locallyMutedAudioList:r,localUserAudioVolumeList:i,customizeAudioOption:{...zZ.customizeAudioOption,speakerOnly:l.speakerOnly},originalSound:f,highBitrate:h,isHIDEnabled:v,isBackgroundNoiseSuppression:y,isStopAllImcomingAudio:_,mediaPlaybackFile:A,isUsingMediaPlayback:R,isVerifiedAudioPermissionOnIOSMobile:k,activeSpeaker:N,activeMicrophone:L}:{...zZ}},zZ),a8e={dialEpics0:(e,n)=>oo(e,8198).pipe(_o(n),Gt((([r,i])=>{const{audio:{dialout:l}}=i,{payload:{seq:f,body:h}}=r;return l.map((v=>v.sequence)).includes(f)||$Ee.includes(h==null?void 0:h.result)})),Nt((([r,i])=>{const{payload:{seq:l,body:{phoneNodeID:f,result:h}}}=r,v=[VMe({code:h,sequence:l,nodeId:f})],{audio:{dialout:y}}=i;let _=y.find((k=>k.sequence===l));!_&&$Ee.includes(h)&&(_=y.find((k=>[Kh.Calling,Kh.Ringing,Kh.Accepted].includes(k.returnCode))));const A={code:h};if(_&&(Object.assign(A,{phoneNumber:_.phoneNumber,uuid:_.uuid}),f&&Object.assign(A,{userId:f})),He(H2e,A),h===Kh.Success){if(He(F2e),f&&Ai(i).findIndex((k=>k.userId===f))>-1){var R;const k=(R=i.audio.dialout.find((N=>N.sequence===l)))===null||R===void 0?void 0:R.phoneNumber;k&&(v.push(M5({userId:f,key:"phoneNumber",value:k})),He(Y0,[{userId:f,phoneNumber:k}]))}}else[Kh.Canceling,Kh.Canceled,Kh.CancelFailed].includes(h)?h===Kh.Canceled?He(U2e):h===Kh.CancelFailed&&He(j2e):[Kh.Calling,Kh.Ringing,Kh.Accepted,Kh.Success].indexOf(h)===-1&&He($2e);return An(v)}))),dialEpics1:(e,n)=>oo(e,4120).pipe(_o(n),Gt((([r,i])=>i.audio.crcDevice.map((l=>l.sequence)).includes(r.payload.seq))),Nt((([r,i])=>{const{payload:{seq:l,body:{result:f,transID:h}}}=r,{audio:{crcDevice:v}}=i,y=[],_=v.find((A=>A.sequence===l));return _&&(He(J2e,{code:f,ip:_.ip,protocol:_.protocol,uuid:_.uuid}),y.push(QMe({sequence:l,transID:h,result:f}))),f===hY.Success?He(X2e):[hY.Success,hY.Ringing].includes(f)||He(Q2e),An(y)})))},c8e={epics0:(e,n)=>oo(e,12033).pipe(_o(n),Kn((([r,i])=>{const{participants:{allowTalkAttendeesList:l}}=i,f=r.payload.body;let h={};if(f){const v=Ai(i),y=Object.keys(f).map((A=>({key:A,userId:f[A]}))),_=y.map((A=>A.userId));MEe(y,_,v),l.length>0&&_.length>0&&MEe(y,_,l),h=y.reduce(((A,R)=>({...A,[`${R.key}`]:{userId:R.userId,displayName:R.displayName}})),{}),He(B2e,Object.values(h))}return PMe(h)}))),epics1:(e,n)=>oo(e,16135).pipe(_o(n),ao((([r,i])=>{const{payload:{body:{id:l,bLeadershipOn:f}}}=r,{audio:{bCanUnmute:h}}=i,v=Do(i);if(v){const{isHost:y,bCoHost:_,userId:A,audio:R,muted:k}=v,N=y||_;f&&Td(A,l)&&(R!==null&&R!==""&&k!==!0||!N&&!h||He(SY,Cfe.Spotlight))}})),Nt((()=>Yn))),epics2:(e,n)=>oo(e,12037).pipe(_o(n),ao((([,r])=>{const i=Do(r);(i==null?void 0:i.audio)!==null&&(i==null?void 0:i.audio)!==""&&(i==null?void 0:i.muted)==1&&He(SY,Cfe.Unmute)})),Nt((()=>Yn))),epics3:(e,n)=>oo(e,av).pipe(Gt((r=>r.payload.body&&["bCanUnmute","bMutedAll","bMutedUponEntry"].some((i=>r.payload.body[i]!==void 0)))),Nt((r=>{const{payload:{body:{bCanUnmute:i,bMutedAll:l,bMutedUponEntry:f}}}=r,h=[];if(i!==void 0&&h.push(LMe(r.payload.body.bCanUnmute)),l!==void 0){const v=Do(n.value);(v==null?void 0:v.audio)!==Ur.Computer&&(v==null?void 0:v.audio)!==Ur.Phone||v.muted!=0||r.payload.body.bMutedAll&&h.push(U0(sb.PassiveByMuteAll))}return f!==void 0&&h.push(FMe(r.payload.body.bMutedUponEntry)),An(h)}))),epics4:(e,n)=>oo(e,la).pipe(_o(n),Gt((([,r])=>r.socket.zoomSocketStatus===wi.Connected)),Nt((([r,i])=>{const{payload:{body:{update:l}}}=r;if(l!=null&&l.some((f=>f.audio!==void 0||f.muted!==void 0))){const{meeting:{userId:f}}=i,h=l.filter((y=>y.id!==f)),v=l.filter((y=>y.id===f));if(h&&h.forEach((y=>{He(V2e,y)})),v.length>0)return U2(n).pipe(Nt((y=>{const{audio:{mutedSource:_,unmutedSource:A,isAllowToTalk:R,isSharingAudio:k,isAudioBridgeSignalReconnecting:N,leaveAudioSource:L,customizeAudioOption:{speakerOnly:B}}}=n.value,H=y;return An(v).pipe(cE((async q=>{const Y=[];if(q.audio!==H.audio)if(q.audio==="")He(gQ,{source:L}),Y.push(uE(void 0));else if(q.audio===Ur.Computer){const K=Ku(H.userRole)&&!R||!!B;k&&He(kP),K&&(He(kP),bo.isIOSMobile&&Y.push(JMe(!0))),N&&(He(kP),Y.push(jbe(!1)))}else q.audio===Ur.Phone&&(H.audio===Ur.Computer&&(await Ed.leaveComputerAudio(),Y.push(uE(E2.Pstn)),k0.joinOrLeaveVoip(!1)),He(Bhe));if(H.audio!==""&&q.muted!==H.muted){if(q.muted!==H.muted){if(q.muted===!0){if(_!==sb.Inherited){const K=_??sb.PassiveByMuteOne;He(ibe,{source:K})}H.audio===Ur.Computer&&Ed.muteAudio()}else if(q.muted===!1){if(A!==zP.Inherited){const K=A??zP.Passive;He(abe,{source:K})}H.audio===Ur.Computer&&Ed.unmuteAudio()}}q.muted!==void 0&&Y.push(U0(void 0),B5(void 0))}return Y})))})))}return Yn}))),epics5:(e,n)=>oo(e,12036).pipe(_o(n),Nt((([r,i])=>{const l=Do(i),{media:{audioEncodeStatus:f}}=i,{promoterID:h,bAllowTalk:v}=r.payload.body;if((l==null?void 0:l.userId)===h){if(He(K2e,v),v)return f!=="success"&&Ed.enableAudioEncode(),Ad("audio",f,"success").pipe(Nt((y=>(y&&He(SY,Cfe.AllowToTalk),Yn))),pb(Qme(!0)));if(k0.mute(h,!0),(l==null?void 0:l.audio)===Ur.Computer)return Ed.leaveComputerAudio(),Uc(300).pipe(ao((async()=>{(H5()?Ra(mf(Jl(document,"click").pipe(Ys(1)),Jl(document,"touchend").pipe(Ys(1)))):Promise.resolve(!0)).then((()=>{tL(Ed,i,!1)}))})),Nt((()=>Yn)),pb(Qme(!1),U0(sb.Inherited)))}return Yn}))),epics6:e=>oo(e,8205).pipe(ao((n=>{He("AUDIO_ALLOW_TO_TALK_RESPONSE",n.payload.body)})),Nt((()=>Yn))),epics7:(e,n)=>eL(e,24597).pipe(_o(n),ao((([r,i])=>{const l=Do(i);(l==null?void 0:l.audio)===Ur.Phone?k0.audioDrop(l.userId):(l==null?void 0:l.audio)===Ur.Computer&&r.payload.body.bPromote})),Nt((()=>Yn))),epics8:(e,n)=>oo(e,12035).pipe(_o(n),mr((([r,i])=>{const{meeting:{currentUserAudioBeforeReset:l,isCurrentUserMutedBeforeReset:f,userId:h}}=i,{payload:{body:{ssrc:v}}}=r,y=U2(n).pipe(Nt((_=>{if(!(l!==Ur.Computer||_!=null&&_.audio)){const{encodeInitStatus:A,decodeInitStatus:R}=age(n.value,_);return Ad("audio",A,R).pipe(Gt((([k,N])=>k&&N)),ao((()=>{(H5()?Ra(mf(Jl(document,"click").pipe(Ys(1)),Jl(document,"touchend").pipe(Ys(1)))):Promise.resolve(!0)).then((()=>{cge(k0,n.value),tL(Ed,n.value)}));const{audio:{locallyMutedAudioList:k,localUserAudioVolumeList:N,isStopAllImcomingAudio:L}}=n.value;k.length>0&&k.forEach((B=>{Ed.muteOrUnmuteOtherAudio(B,!0)})),N.length>0&&N.forEach((B=>{Ed.adjustOtherAudioVolume(B.userId,B.volume)})),L&&Ed.stopAllIncomingAudio(!0)})),Kn((()=>Rme(void 0))))}return l===Ur.Phone?(f&&k0.mute(h,!0),An([Rme(void 0),xme(void 0)])):Yn})));return He(Z2e,v),wl(Di(HMe(v)),y)}))),epics9:(e,n)=>oo(e,7952).pipe(mr((r=>si(Bhe,1).pipe(_o(n),ao((([,i])=>{const{BindStatus:l,nOperatorUserId:f}=r.payload.body,h=i.participants.attendeesList.find((v=>v.userId===f));l===!0&&He(z2e,{operatorName:h==null?void 0:h.displayName,operatorUserId:f,operatorRole:h==null?void 0:h.userRole})})),Nt((()=>Yn)))))),epics10:(e,n)=>bs(e,Cn.UserGrantCaptureAudio).pipe(_o(n),Nt((([r,i])=>{const l=Do(i);var f;(f=l,(f==null?void 0:f.audio)===Ur.Computer?Promise.resolve():Cs({event:uf,operations:[Gt((k=>k.audio!==void 0&&k.audio!=="")),Ys(1)]},(({audio:k})=>k===Ur.Phone||k===Ur.Computer))).then((()=>{He(kP)}));const{meeting:{isCurrentUserMutedBeforeReset:h},audio:{isAllowToTalk:v,activeMicrophone:y,isUsingMediaPlayback:_}}=i,{payload:{data:A}}=r,R=[$Me(!0)];return l&&(l.muted===!0&&v===!1&&(R.push(U0(sb.Inherited)),k0.mute(l.userId,!0)),(h===!0||tNe(i))&&(R.push(U0(sb.Inherited)),k0.mute(l.userId,!0)),h!==void 0&&R.push(xme(void 0)),!_&&A&&y!==A&&R.push(L5(A))),An(R)}))),epics11:e=>bs(e,Cn.AudioCaptureFailed).pipe(ao((n=>{const{payload:{data:r}}=n;He(W2e,r)})),Kn((()=>$be(!0)))),epics12:e=>bs(e,Cn.AudioWebsocketBroken).pipe(ao((()=>{He(G2e)})),Nt((()=>Yn))),epics13:(e,n)=>bs(e,Cn.AudioZeroData).pipe(_o(n),d6((([,r])=>{const{audio:{webrtcRestartCount:i,activeMicrophone:l}}=r;if(i<3)return Ed.restoreWebRTC(l),G2(i+1)}))),epics14:(e,n)=>e.pipe(co(`${PL}`),Gt((r=>r.payload===!1)),Nt((()=>(He(q2e),ime().pipe(ao((()=>{cge(k0,n.value),tL(Ed,n.value)})),Kn((()=>PL(!0)))))))),epics15:(e,n)=>bs(e,[Cn.JoinComputerAudioComplete,Cn.JoinSharingAudioComplete,Cn.LeaveComputerAudioComplete,Cn.LeaveSharingAudioComplete]).pipe(ao((r=>{sDe.completeAudioAction();const{payload:{type:i}}=r;if(i===Cn.JoinComputerAudioComplete){const l=Do(n.value);(l==null?void 0:l.audio)===Ur.Computer&&(l.muted?Ed.muteAudio():Ed.unmuteAudio());const f=Ai(n.value).filter((h=>!!h.audioShare&&h.userId!==(l==null?void 0:l.userId)));f.length&&f.forEach((h=>{Ed.setSharingAudioVolume(h.userId,!1,!1,!0)}))}})),Nt((()=>Yn))),epics16:(e,n)=>bs(e,Cn.AudioQosData).pipe(_o(n),Kn((([r,i])=>{var l,f;const{meeting:{isWebinar:h},media:{audioEncodeStatus:v,audioDecodeStatus:y},participants:{xmppAttendeeList:_,allowTalkAttendeesList:A}}=i,R=Do(i),k=pbe(i);let N=k.length>0,L=k.some(VEe);h&&(N=N||!!_.length,L=L||A.some(VEe));const B=(R==null?void 0:R.audio)===Ur.Computer&&v==="success"&&!(R!=null&&R.muted)&&(N||((l=i.recording)===null||l===void 0?void 0:l.cmrStatus)===Cl.Start),H=(R==null?void 0:R.audio)===Ur.Computer&&y==="success"&&N&&L;return(f=r.payload.data)!==null&&f!==void 0&&f.encoding?B?(He(Vhe,r.payload),xX(r.payload)):xX(xJ):H?(He(Vhe,r.payload),DX(r.payload)):DX(xJ)}))),epics17:(e,n)=>oo(e,la).pipe(_o(n),Gt((([r,i])=>{const{payload:{body:l}}=r,{audio:{locallyMutedAudioList:f,localUserAudioVolumeList:h}}=i;return(f.length>0||h.length>0)&&(l==null?void 0:l.remove)&&l.remove.length>0})),Nt((([r,i])=>{const{payload:{body:{remove:l}}}=r,{audio:{locallyMutedAudioList:f,localUserAudioVolumeList:h}}=i,v=f.concat(h.map((y=>y.userId))).filter((y=>l.indexOf((_=>_.id===y))!==-1));return v.length>0?(v.forEach((y=>{Ed.muteOrUnmuteOtherAudio(y,!1)})),An(v.map((y=>[kX(y),ZMe({userId:y})])).flat())):Yn}))),epics18:(e,n)=>bs(e,Cn.HidStatusMute).pipe(Nt((r=>{const{payload:{data:i}}=r,l=n.value,{meeting:{userId:f,mediaFeatureOptions:h},audio:{isShareAudioEnabled:v,bCanUnmute:y}}=l,_=[];if(i)v&&!Yo.isSupportOpenMicWhenShareAudio(h||"")&&_.push(lE(!0)),_.push(U0(sb.Active)),k0.mute(f,!0);else if(!v||Yo.isSupportOpenMicWhenShareAudio(h||"")){v&&_.push(lE(!1));const A=Do(l);(y||A!=null&&A.isHost||A!=null&&A.bCoHost)&&(_.push(B5(zP.Active)),k0.mute(f,!1))}return An(_)}))),epics19:e=>oo(e,12040).pipe(ao((n=>{const{payload:{body:{mode:r}}}=n;Ed.setAudioCodecMode(r)})),Nt((()=>Yn))),epics20:(e,n)=>bs(e,[Cn.AudioSpeakerSetSuccess,Cn.JoinComputerAudioComplete,Cn.AudioSpeakerSetError]).pipe(Nt((r=>{const{payload:{data:i,type:l}}=r,{audio:{activeSpeaker:f,activeMicrophone:h,isUsingMediaPlayback:v}}=n.value,y=[];return l===Cn.AudioSpeakerSetSuccess&&f!==i?y.push(IQ(i)):!v&&l===Cn.JoinComputerAudioComplete&&i!=null&&i.microphoneDeviceId&&h!==i.microphoneDeviceId&&y.push(L5(i.microphoneDeviceId)),l===Cn.AudioSpeakerSetSuccess?He(Hhe,!0):l===Cn.AudioSpeakerSetError&&He(Hhe,!1),An(y)}))),epics21:(e,n)=>bs(e,Cn.AudioLevelIndicator).pipe(Gt((()=>{const r=Do(n.value);return!!r&&r.audio===Ur.Computer&&!r.muted})),ao((r=>{const{payload:{data:i}}=r;He(exe,{level:i.value})})),Nt((()=>Yn))),epics22:(e,n)=>bs(e,Cn.WorkletProcessExceptions).pipe(Gt((r=>!!r.payload.data)),Nt((()=>{const r=Do(n.value),i=[];return(r==null?void 0:r.audio)===Ur.Computer&&(Ed.leaveComputerAudio(),k0.joinOrLeaveVoip(!1),i.push(uE(E2.EndedBySystem)),i.push(G2(0))),An(i)}))),epics23:(e,n)=>bs(e,Cn.RecaptureAudio).pipe(Gt((()=>{const r=Do(n.value);return(r==null?void 0:r.audio)===Ur.Computer&&!n.value.audio.isUsingMediaPlayback})),Nt((()=>(iDe(Ed,n.value),Yn))))},l8e=nh(c8e,{shareAudioEpics0:(e,n)=>q0(e,la).pipe(Gt((r=>{const i=r.payload.body.update;return i&&i.length>0&&i.findIndex((l=>l.bShareOn!==void 0))>-1})),_o(n),Nt((([r,i])=>{const{payload:{body:{update:l}}}=r,{audio:{localShareAudioUserMutedList:f}}=i,h=l.filter((y=>y.bShareOn===!0&&y.bShareAudioOn===!0)),v=[];return h.length>0&&h.forEach((y=>{f.findIndex((_=>_.userId===y.id))===-1&&v.push(WMe({userId:y.id,isFromMainSession:!!y.bShareToBORooms}))})),An(v)}))),shareAudioEpics1:(e,n)=>bs(e,Cn.SharingDesktopStreamHaveAudio).pipe(Gt((()=>!n.value.audio.secondaryAudioMicrophoneId)),mr((()=>oo(e,la).pipe(Gt((r=>{var i;const{payload:{body:l}}=r,{meeting:{userId:f}}=n.value;return(l==null||(i=l.update)===null||i===void 0?void 0:i.findIndex((h=>h.id===f&&h.bShareOn===!0)))>-1})),Ys(1),cE((async()=>{const r=n.value;return await ige(kR,vP,r)})),pb(RQ(!0)))))),shareAudioEpics2:(e,n)=>bs(e,Cn.SharingDesktopStreamHaveNoAudio).pipe(_o(n),Gt((([,r])=>{var i;return((i=r.audio)===null||i===void 0?void 0:i.isShareAudioEnabled)===!0})),cE((async([,r])=>await kEe(kR,vP,r)))),shareAudioEpics3:(e,n)=>oo(e,la).pipe(_o(n),Gt((([,r])=>r.socket.zoomSocketStatus===wi.Connected&&r.audio.isSharingAudio===!0&&!Yo.isSupportOpenMicWhenShareAudio(r.meeting.mediaFeatureOptions||""))),Nt((([r,i])=>{var l;if((l=r.payload.body.update)!==null&&l!==void 0&&l.some((f=>f.audio!==void 0||f.muted!==void 0))){const{meeting:{userId:f}}=i,h=r.payload.body.update.filter((v=>v.id===f));return U2(n).pipe(Nt((v=>{const y=[];return h.findIndex((_=>_.audio===Ur.Computer))>-1&&(v==null?void 0:v.audio)!==Ur.Computer&&(vP.mute(f,!0),y.push(LL(!0)),y.push(lE(!0)),y.push(U0(sb.SharingAudio))),An(y)})))}return Yn}))),shareAudioEpics4:(e,n)=>e.pipe(co(`${Yp}`),al(nm),_o(n),Gt((([,r])=>{var i;return((i=r.audio)===null||i===void 0?void 0:i.isShareAudioEnabled)===!0})),cE((async([r,i])=>{const{payload:l}=r,{audio:{isShareAudioMuted:f,isSharingAudio:h}}=i,v=[];if(l===qs.End){const y=await kEe(kR,vP,i);v.push(...y)}else if(l===qs.Paused){if(f===!1&&h===!0){await kR.leaveSharingAudio(!0),v.push(BL(!1));const y=await zbe(vP,i);v.push(...y),setTimeout((()=>{He(CL,{state:"off"})}),0)}}else if(l===qs.Sharing&&f===!1&&h===!1){const y=await ige(kR,vP,i);v.push(...y)}return v}))),shareAudioEpics5:(e,n)=>bs(e,Cn.SharingDesktopStreamHaveAudio).pipe(Gt((()=>!!n.value.audio.secondaryAudioMicrophoneId)),ao((()=>{const{audio:{audioSsrc:r,secondaryAudioMicrophoneId:i,isWebRtcAudioCapable:l}}=n.value;kR.joinSharingAudio({ssrc:r,microphoneDeviceId:i,speakerDeviceId:null,isCaptureAudio:!0,audioBridge:l}),He(Y2e)})),Nt((()=>Yn))),shareAudioEpics6:(e,n)=>oo(e,la).pipe(Gt((r=>{const{payload:{body:i}}=r;return!!i.update&&i.update.some((l=>l.audioShare!==void 0))})),Nt((r=>{const{meeting:{userId:i}}=n.value;return r.payload.body.update.filter((l=>l.audioShare!==void 0&&l.id!==i)).forEach((l=>{kR.setSharingAudioVolume(l.id,!l.audioShare,!1,!0)})),Yn})))},{audioBridgEpics0:e=>oo(e,4299).pipe(ao((n=>{const{payload:r}=n;bP.passThroughRWGMessage(r)})),Xp()),audioBridgEpics1:e=>bs(e,Cn.AudioBridgeReconnectStart).pipe(Nt((()=>(lpe.joinOrLeaveVoip(!1),An([jbe(!0),uE(E2.Failover)]))))),audioBridgEpics2:(e,n)=>oo(e,la).pipe(Gt((r=>{var i,l;return n.value.audio.isWebRtcAudioCapable&&(((i=r.payload.body.update)===null||i===void 0?void 0:i.some((f=>f.muted!==void 0)))||((l=r.payload.body.remove)===null||l===void 0?void 0:l.length)>0)})),ao((r=>{const{payload:{body:{update:i,remove:l}}}=r;bP.sendUserAudioStatus({update:(i||[]).filter((f=>f.muted!==void 0)).map((f=>({userId:f.id,muted:f.muted}))),remove:(l||[]).map((f=>({userId:f.id})))})})),Xp()),audioBridgEpics3:(e,n)=>oo(e,16129).pipe(Gt((r=>{const{payload:{body:{bVideoOn:i}}}=r,{audio:{isWebRtcAudioCapable:l}}=n.value;return l&&!!i})),ao((r=>{const{payload:{body:{id:i}}}=r;bP.changeActiveVideoSsrc(i)})),Nt((()=>Yn))),audioBridgEpics4:(e,n)=>bs(e,Cn.AudioStreamFailed).pipe(Nt((r=>{const{payload:{data:i}}=r,l=Do(n.value),f=[];return(l==null?void 0:l.audio)===Ur.Computer&&(bP.leaveComputerAudio(),H5()||bo.isIOSMobile||i===kU.PermissionReset?(lpe.joinOrLeaveVoip(!1),f.push(uE(E2.EndedBySystem)),f.push(G2(0))):tL(bP,n.value)),An(f)}))),audioBridgEpics5:(e,n)=>bs(e,Cn.AudioBridgeSocketConnectionError).pipe(Nt((()=>{const r=Do(n.value),i=[];return(r==null?void 0:r.audio)===Ur.Computer&&(bP.leaveComputerAudio(),lpe.joinOrLeaveVoip(!1),i.push(uE(E2.EndedBySystem)),i.push(G2(0))),An(i)}))),audioBridgEpics6:(e,n)=>e.pipe(co(`${ybe}`),Gt((()=>!!n.value.meeting.zlkJwtToken)),Kn((r=>{const i=r.payload,{meeting:{zlkJwtToken:l,mediaFeatureOptions:f,meetingId:h}}=n.value;let v;if(l){const{enforce_web_rtc_audio:A,audio_compatible_mode:R,audio_webrtc_mode:k}=bE(l);A===void 0&&R===void 0&&k===void 0||(v=Number(k!==void 0?k:R!==void 0?R:A))}const y=rr.get(Bi.VideoSDKWebRTCAudioFallbackWasm)===1,_=Yo.getWebRtcAudioMode(f??"",h,v,i);return eNe({isWebRtcAudioCapable:!y&&!!(_&The.WebRTCAudio),webRtcAudioMode:_})})))},a8e),u8e=zr.createAgent(),Gh=sp(Yo.getInstance()),WZ=zr.createAgent(),M0=sp(Yo.getInstance()),d8e=zr.createAgent(),UEe=sp(Yo.getInstance()),jEe={isWebrtcVideoCapable:!1,videoSsrc:0,cameraDevicesList:[],activeCamera:bo.isAndroidOrIOSBrowser?i2.User:"default",activeVideoId:0,isCurrentUserStartedVideo:!1,spotlightUserList:[],isCaptureForbidden:!1,isMirrored:!1,receivedVideoMaxQuality:navigator.hardwareConcurrency>=8?RJ.Video_1080P:RJ.Video_360P,subscribedVideoList:[],renderedVideoList:[],ensuredCanvas:[],isVideoMuted:!1,isCaptureCameraLoading:!1,isCameraTaken:!1,isUsingMediaPlayback:!1,receivedVideoDimension:{width:0,height:0},capturedVideoDimension:{width:0,height:0},isFollowHostVideoLayout:!1,hostDragLayout:[],isSupportHDVideo:!1,miniRwgOptionValue:0,bCanUnmuteVideo:!1,virtualBackground:{isVBConfigured:!1,isVBPreloadReady:void 0,imageSrc:void 0,cropped:void 0},mask:{imageSrc:void 0,cropped:void 0,clip:void 0},backgroundMode:_u.Null,statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0,bandwidth:0,bitrate:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0,bandwidth:0,bitrate:0}},hardwareAcceleration:{encode:!1,decode:!1},networkQuality:{},ptz:{},currentCameraControlStatus:{isRequested:!1,isInControl:!1,isCameraMoving:!1},farEndCameraControlStatus:{controlledUserList:[],isControlling:!1},subscriptionStatus:{encode:!1,decode:!1,detailed:!1},videoAttachments:{},rendererType:Ahe.WebGL,selfPreviewVideoList:[]},f8e=op({[`${mDe}`]:We(((e,{payload:n})=>{e.videoSsrc=n})),[`${mbe}`]:We(((e,{payload:n})=>{e.cameraDevicesList=n})),[`${_L}`]:We(((e,{payload:n})=>{const r=e.activeCamera;if(r in e.ptz){const i=e.ptz[r];["pan","tilt","zoom"].forEach((l=>{i[l]&&(i[l].value=0)}))}e.activeCamera=n})),[`${gDe}`]:We(((e,{payload:n})=>{e.activeVideoId=n.userId})),[`${vDe}`]:We(((e,{payload:n})=>{e.isCurrentUserStartedVideo=n})),[`${lme}`]:We(((e,{payload:n})=>{e.spotlightUserList=n})),[`${tX}`]:We(((e,{payload:n})=>{e.isCaptureForbidden=n})),[`${bDe}`]:We(((e,{payload:n})=>{e.receivedVideoMaxQuality=n})),[`${yDe}`]:We(((e,{payload:n})=>{e.isVideoMuted=n})),[`${NP}`]:We(((e,{payload:n})=>{e.isCaptureCameraLoading=n})),[`${nX}`]:We(((e,{payload:n})=>{e.isCameraTaken=n})),[`${CDe}`]:We(((e,{payload:n})=>{e.receivedVideoDimension=n})),[`${oX}`]:We(((e,{payload:n})=>{e.subscribedVideoList.includes(n)||e.subscribedVideoList.push(n)})),[`${TY}`]:We(((e,{payload:n})=>{const r=e.subscribedVideoList.indexOf(n);r>=0&&e.subscribedVideoList.splice(r,1)})),[`${O2}`]:We(((e,{payload:n})=>{const r=e.renderedVideoList.find((i=>i.userId===n.userId&&i.key===n.key&&i.canvasId===n.canvasId));r?(n.videoQuality!==void 0&&(r.videoQuality=n.videoQuality),n.aspectRatio!==void 0&&(r.aspectRatio=n.aspectRatio)):e.renderedVideoList.push({...n})})),[`${sX}`]:We(((e,{payload:n})=>{const r=e.renderedVideoList.findIndex((i=>i.userId===n.userId&&i.key===n.key&&i.canvasId===n.canvasId));r>=0&&e.renderedVideoList.splice(r,1)})),[`${EDe}`]:We(((e,{payload:n})=>{e.isFollowHostVideoLayout=n})),[`${_De}`]:We(((e,{payload:n})=>{e.hostDragLayout=n})),[`${wDe}`]:We(((e,{payload:n})=>{e.isSupportHDVideo=n})),[`${ADe}`]:We(((e,{payload:n})=>{e.bCanUnmuteVideo=n})),[`${ume}`]:We(((e,{payload:n})=>{e.virtualBackground.isVBPreloadReady=n})),[`${rX}`]:We(((e,{payload:n})=>{e.virtualBackground.isVBConfigured=n})),[`${OY}`]:We(((e,{payload:n})=>{e.virtualBackground.imageSrc=n.imageUrl,e.virtualBackground.cropped=n.cropped,n.imageUrl===void 0?e.backgroundMode=_u.Null:e.backgroundMode=_u.VirtualBackground})),[`${TP}`]:We(((e,{payload:n})=>{const{encode:r,decode:i}=n;r!==void 0&&(e.hardwareAcceleration.encode=r),i!==void 0&&(e.hardwareAcceleration.decode=i)})),[`${iX}`]:We(((e,{payload:n})=>{const{data:{encoding:r,rate:i,...l}}=n;e.statistic.encode={bitrate:i,...l}})),[`${aX}`]:We(((e,{payload:n})=>{const{data:{encoding:r,rate:i,...l}}=n;e.statistic.decode={bitrate:i,...l}})),[`${TDe}`]:We(((e,{payload:n})=>{const{cameraId:r,captureWidth:i,captureHeight:l,videoElement:f,originalRatio:h,ptz:v,hd:y,fullHd:_,mediaFile:A,fps:R,mirrored:k,customVideoConstraints:N}=n;e.activeCamera=r,e.customizedVideoOption={captureWidth:i,captureHeight:l,videoElement:f,originalRatio:h,ptz:v,hd:y,fullHd:_,fps:R,customVideoConstraints:N},l6(e.mediaPlaybackFile,A)||(e.mediaPlaybackFile=A,e.isUsingMediaPlayback=!(A==null||!A.url)),k!==void 0&&(e.isMirrored=!!k)})),[`${dme}`]:We(((e,{payload:n})=>{const{userId:r,level:i,bwLevel:l,type:f}=n;if(Object.prototype.hasOwnProperty.call(e.networkQuality,`${r}`))e.networkQuality[`${r}`][`${f}`]={level:i,bwLevel:l};else{const h={[f]:{level:i,bwLevel:l}};Object.assign(e.networkQuality,{[`${r}`]:h})}})),[`${ODe}`]:We(((e,{payload:n})=>{const{deviceId:r,ptzRange:i}=n;if(Object.prototype.hasOwnProperty.call(e.ptz,r)){const l=e.ptz[r];l&&["pan","tilt","zoom"].forEach((f=>{const h=i[f];if(h){var v;const y=(v=l[f])===null||v===void 0?void 0:v.capability;y?Object.assign(y,{...h}):l[f]={capability:{...h},value:0}}}))}else Object.assign(e.ptz,{[r]:{pan:i.pan?{capability:{...i.pan},value:0}:null,tilt:i.tilt?{capability:{...i.tilt},value:0}:null,zoom:i.zoom?{capability:{...i.zoom},value:0}:null}})})),[`${cX}`]:We(((e,{payload:n})=>{e.currentCameraControlStatus.isRequested=n})),[`${lX}`]:We(((e,{payload:n})=>{const{isInControl:r,userId:i}=n;e.currentCameraControlStatus.isInControl=r,e.currentCameraControlStatus.controllingUserId=i})),[`${IDe}`]:We(((e,{payload:n})=>{e.farEndCameraControlStatus.controlledUserList.includes(n)||e.farEndCameraControlStatus.controlledUserList.push(n)})),[`${uX}`]:We(((e,{payload:n})=>{const r=e.farEndCameraControlStatus.controlledUserList.indexOf(n);r!==-1&&e.farEndCameraControlStatus.controlledUserList.splice(r,1)})),[`${fme}`]:We(((e,{payload:n})=>{e.currentCameraControlStatus.isCameraMoving=n.cmd==="start"})),[`${gbe}`]:We(((e,{payload:n})=>{const{constraints:r,deviceId:i}=n,l=e.ptz[i];["pan","tilt","zoom"].forEach((f=>{r[f]!==void 0&&(l[f].value=r[f])}))})),[`${pme}`]:We(((e,{payload:n})=>{e.farEndCameraControlStatus.isControlling=n})),[`${RDe}`]:We(((e,{payload:n})=>{e.networkQualityBroadcastTime=n})),[`${dX}`]:We(((e,{payload:n})=>{e.mask.isMaskConfigured=n})),[`${IY}`]:We(((e,{payload:n})=>{const{imageUrl:r,cropped:i,rootHeight:l,rootWidth:f,clip:h}=n;e.mask.imageSrc=r,e.mask.cropped=i,e.mask.clip=h,e.mask.rootWidth=f,e.mask.rootHeight=l,e.backgroundMode=_u.Mask})),[`${hme}`]:We(((e,{payload:n})=>{e.backgroundMode=n})),[`${xDe}`]:We(((e,{payload:n})=>{e.capturedVideoDimension=n})),[`${DDe}`]:We(((e,{payload:n})=>{e.ensuredCanvas.includes(n)||e.ensuredCanvas.push(n)})),[`${mme}`]:We(((e,{payload:n})=>{e.mediaPlaybackFile=n,e.isUsingMediaPlayback=!(n==null||!n.url)})),[`${JP}`]:We(((e,{payload:n})=>{if(n){const{lastCopy:r,...i}=n;e.prefetchedVideo=i}else e.prefetchedVideo=n})),[`${gme}`]:We(((e,{payload:n})=>{Object.assign(e.subscriptionStatus,n)})),[`${kDe}`]:We(((e,{payload:n})=>{e.miniRwgOptionValue=n})),[`${vbe}`]:We(((e,{payload:n})=>{const{userId:r,element:i}=n,l=e.videoAttachments[`${r}`];if(l){var f;((f=bX(l))===null||f===void 0?void 0:f.indexOf(i))===-1&&l.push(i)}else{const h=[];h.push(i),Object.assign(e.videoAttachments,{[`${r}`]:h})}})),[`${RY}`]:We(((e,{payload:n})=>{const{userId:r,element:i}=n,l=e.videoAttachments[`${r}`];let f=i;Array.isArray(i)||(f=[i]),f.forEach((h=>{if(l){var v;const y=(v=bX(l))===null||v===void 0?void 0:v.indexOf(h);y!==void 0&&y!==-1&&l.splice(y,1)}}))})),[`${MDe}`]:We(((e,{payload:n})=>{n&&(e.rendererType=Ahe.WebGL2)})),[`${NDe}`]:We(((e,{payload:n})=>{n&&(e.rendererType=Ahe.WebGPU)})),[`${PDe}`]:We(((e,{payload:n})=>{e.rendererType=n})),[`${LDe}`]:We(((e,{payload:n})=>{e.isMirrored=n})),[`${BDe}`]:We(((e,{payload:n})=>{e.selfPreviewVideoList.includes(n)||e.selfPreviewVideoList.push(n)})),[`${bbe}`]:We(((e,{payload:n})=>{if(n){const r=e.selfPreviewVideoList.indexOf(n);r>=0&&e.selfPreviewVideoList.splice(r,1)}else e.selfPreviewVideoList=[]})),[`${VDe}`]:We(((e,{payload:n})=>{e.leadershipUserId=n})),[`${ybe}`]:We(((e,{payload:n})=>{e.isWebrtcVideoCapable=n})),[`${HDe}`]:We((e=>{var n;(n=e.customizedVideoOption)!==null&&n!==void 0&&n.customVideoConstraints&&(e.customizedVideoOption.customVideoConstraints=void 0)})),[`${SDe}`]:(e,{payload:n})=>{const r={cameraDevicesList:e.cameraDevicesList};return n&&Object.assign(r,{activeCamera:e.activeCamera,customizedVideoOption:e.customizedVideoOption,virtualBackground:{imageSrc:e.virtualBackground.imageSrc,cropped:e.virtualBackground.cropped},mask:{imageSrc:e.mask.imageSrc,cropped:e.mask.cropped,rootWidth:e.mask.rootWidth,rootHeight:e.mask.rootHeight,clip:e.mask.clip},backgroundMode:e.backgroundMode,ptz:e.ptz,subscriptionStatus:e.subscriptionStatus}),{...jEe,...r}}},jEe),p8e={cameraPtzEpics0:(e,n)=>oo(e,8004).pipe(Nt((r=>{const{payload:{body:{nCmd:i,nUserID:l,nReason:f,nButtonID:h}}}=r,v=n.value,y=Ai(v),{video:{currentCameraControlStatus:{isInControl:_,controllingUserId:A},cameraDevicesList:R,activeCamera:k}}=v,N=y.find((B=>Td(B.userId,l))),L=[];if(L.push(cX(!0)),i===Gp.Request){const B={userId:N==null?void 0:N.userId,displayName:N==null?void 0:N.displayName};if(_){const H=y.find((q=>q.userId===A));Object.assign(B,{currentControllingUserId:H==null?void 0:H.userId,currentControllingDisplayName:H==null?void 0:H.displayName})}He(x2e,B)}else if(i===Gp.Approve)L.push(IDe(N==null?void 0:N.userId)),He(Phe,{isApproved:!0,userId:N==null?void 0:N.userId,displayName:N==null?void 0:N.displayName});else if(i===Gp.Decline)L.push(uX(N==null?void 0:N.userId)),He(Phe,{isApproved:!1,userId:N==null?void 0:N.userId,displayName:N==null?void 0:N.displayName,reason:f});else if(i===Gp.GiveUp)L.push(lX({isInControl:!1,userId:0})),He(jJ,{isControlled:!1});else if(i===Gp.StartControl||i===Gp.StopControl)L.push(fme({cmd:i===Gp.StartControl?"start":"stop",type:h}));else if(i===Gp.SwitchCamera){const B=R.findIndex((q=>q.deviceId===k)),H=B+1===R.length?0:B+1;if(H!==B){const q=R[H].deviceId;UEe.changeCamera(q,o6.includes(q))}}return An(L)}))),cameraPtzEpics1:(e,n)=>oo(e,la).pipe(Gt((r=>{var i;const{payload:{body:l}}=r;return l==null||(i=l.update)===null||i===void 0?void 0:i.some((f=>f.nFECC!==void 0||f.nFECCExecutive!==void 0))})),Kn((r=>aE(r.payload.body))),ao((r=>{const{update:i}=r,l=i==null?void 0:i.find((f=>f.nFECC!==void 0||f.nFECCExecutive!==void 0));if(l){const{meeting:{userId:f}}=n.value;Td(l.nFECCExecutive,f)&&He(D2e,{userId:l.userId,ptz:uke(l.nFECC)})}})),Nt((()=>Yn))),cameraPtzEpics2:(e,n)=>oo(e,la).pipe(Gt((r=>{var i;const{payload:{body:l}}=r,{video:{farEndCameraControlStatus:{controlledUserList:f}}}=n.value;return l==null||(i=l.remove)===null||i===void 0?void 0:i.some((h=>f.includes(h.id)))})),Kn((r=>aE(r.payload.body))),Nt((r=>{const{remove:i}=r,l=[],{video:{farEndCameraControlStatus:{controlledUserList:f}}}=n.value,h=i==null?void 0:i.find((v=>f.includes(v.userId)));return h&&l.push(uX(h.userId)),An(l)}))),cameraPtzEpics3:(e,n)=>e.pipe(co(`${fme}`),mr((r=>{const{payload:{cmd:i,type:l}}=r;return i==="start"?Uc(0,200).pipe(a2((()=>!!n.value.video.currentCameraControlStatus.isCameraMoving)),Nt((()=>{const{video:{ptz:f,activeCamera:h}}=n.value,v=f[h],y=Ebe(v)||{},{key:_,range:A}=lke(l,2);return v[_]?(Object.assign(y,{[_]:cke(v[_].capability,v[_].value,A)}),UEe.movePTZCamera(y).then((()=>gbe({deviceId:h,constraints:y})))):Promise.resolve(void 0)})),Nt((f=>typeof f=="object"&&f.type!==void 0?Di(f):Yn))):Yn}))),cameraPtzEpics4:(e,n)=>e.pipe(co(`${_L}`),Nt((r=>{const{payload:i}=r,{video:{customizedVideoOption:l,ptz:f}}=n.value;if(l!=null&&l.ptz){const h=f==null?void 0:f[i];h!==void 0&&d8e.sendCameraAblity({pan:!!h.pan,tilt:!!h.tilt,zoom:!!h.zoom})}return Yn})))},h8e={videoCaptureEpics0:(e,n)=>bs(e,Cn.StartVideoCaptureSuccess).pipe(cE((async r=>{const{video:{activeCamera:i,ptz:l,isCurrentUserStartedVideo:f,isUsingMediaPlayback:h},meeting:{userId:v}}=n.value,{payload:{data:{currentDeviceID:y,PTZRange:_,VideoSelectValue:A,usingFacingMode:R}}}=r,k=[],{cameras:N}=await Ra(j2());if(N.length<1&&!h&&(He(VJ,{reason:"Cannot detect camera devices"}),M0.stopCaptureVideo()),h||[i,y].some((L=>ike(L,N)))){let L="";if(L=R?Array.isArray(A)&&A[0]?A[0]:A:y,f||WZ.muteAttendeeVideo(v,!1),He(k2e),h)k.push(_L("default"));else if(L&&_&&k.push(ODe({deviceId:L,ptzRange:_})),i!==L&&k.push(_L(L)),Object.prototype.hasOwnProperty.call(l,L)){const B=l[L];if(B){const H=Ebe(B);H&&M0.movePTZCamera(H)}}}else He(HJ,{reason:"cannot find target camera"}),M0.stopCaptureVideo();return k}))),videoCaptureEpics1:(e,n)=>oo(e,la).pipe(Gt((r=>{const{payload:{body:{update:i}}}=r,{meeting:{userId:l}}=n.value;return i==null?void 0:i.some((f=>f.id===l&&f.bVideoOn!==void 0))})),Kn((r=>aE(r.payload.body))),Nt((r=>{const{update:i}=r,{meeting:{userId:l}}=n.value,f=i==null?void 0:i.find((h=>h.userId===l));return f?(f.bVideoOn===!0?He(rbe):He(qP),An([vDe(!!f.bVideoOn)])):Yn}))),videoCaptureEpics2:e=>bs(e,[Cn.UserForbiddedCaptureVideo,Cn.UserCameraIsTakenByOtherPrograms,Cn.VideoWebsocketBroken,Cn.StopVideoCaptureFailed]).pipe(Nt((n=>{const{payload:{type:r,data:i}}=n,l=[];switch(r){case Cn.UserForbiddedCaptureVideo:He(FJ,i),l.push(tX(!0));break;case Cn.UserCameraIsTakenByOtherPrograms:He($J,{reason:"User camera is taken by other programs.",...i??{}}),l.push(nX(!0));break;case Cn.VideoWebsocketBroken:He(sbe,{reason:"Video websocket broken."});break;case Cn.StopVideoCaptureFailed:He(qP,{failed:!0,reason:"Unknown."})}return An(l)}))),videoCaptureEpics3:(e,n)=>bs(e,Cn.StopVideoCaptureSuccess).pipe(_o(n),Kn((([,r])=>{const{meeting:{userId:i},video:{isCurrentUserStartedVideo:l}}=r;return l||He(qP),WZ.muteAttendeeVideo(i,!0),NP(!1)}))),videoCaptureEpics4:(e,n)=>oo(e,16133).pipe(_o(n),Gt((([r,i])=>{var l;return(r==null||(l=r.payload)===null||l===void 0||(l=l.body)===null||l===void 0?void 0:l.id)===i.meeting.userId})),d6((([r])=>{const{id:i,bVideoMute:l}=r.payload.body;return He(_2e,{id:i,isVideoMuted:l}),l===!0&&M0.stopCaptureVideo(),l===!1&&He(w2e,{id:i,isVideoMuted:l}),yDe(l)}))),videoCaptureEpics5:(e,n)=>oo(e,16131).pipe(Gt((r=>r.payload.body.ssrc!==void 0)),mr((r=>{const{payload:{body:{ssrc:i}}}=r;return He(N2e,i),wl(Di(mDe(i)),U2(n).pipe(Nt((l=>{const{meeting:{isCurrentUserStartVideoBeforeReset:f},media:{videoEncodeStatus:h}}=n.value;return(l==null?void 0:l.bVideoOn)!==!0&&f===!0?Ad("video",h,"success").pipe(Gt((([v,y])=>v&&y)),Kn((()=>{const v=n.value,{video:{backgroundMode:y,mask:_,virtualBackground:A,activeCamera:R,customizedVideoOption:k}}=v;let N=Promise.resolve(!0);return y===_u.VirtualBackground&&A.imageSrc?N=DY({imageUrl:A.imageSrc,cropped:A.cropped},M0,v):y===_u.Mask&&_.imageSrc&&_.clip&&(N=kY({imageUrl:_.imageSrc,cropped:_.cropped,clip:_.clip,rootHeight:_.rootHeight,rootWidth:_.rootWidth},M0,v)),N.then((()=>{ake(M0,v,{cameraId:R,...k})})),Dke(void 0)}))):Yn}))))}))),videoCaptureEpics6:(e,n)=>e.pipe(co(`${mbe}`),Nt((async r=>{const{payload:i}=r,l=n.value,{meeting:{userId:f}}=l;await ome("video",l);const h=Do(l);i.length===0?h&&!h.bVideoConnect||WZ.connectCamera(f,!1):h!=null&&h.bVideoConnect||WZ.connectCamera(f,!0)})),Xp()),videoCaptureEpics7:e=>bs(e,Cn.InitSuccessVideo).pipe(Gt((n=>!bo.isIPad&&bo.isAndroidOrIOSBrowser&&n.payload.data===zp.EncodeSuccess)),mr((()=>lDe().pipe(ao((n=>{M0.setMobileRotateMode(n)})),Xp())))),videoCaptureEpics8:e=>bs(e,Cn.StartVideoCaptureSuccess).pipe(Gt((()=>!bo.isIPad&&bo.isAndroidOrIOSBrowser)),ao((()=>{M0.setMobileRotateMode(cDe())})),yi(Yn)),videoCaptureEpics9:(e,n)=>bs(e,Cn.VideoStreamFailed).pipe(Gt((()=>!!n.value.video.isCurrentUserStartedVideo&&bo.isIOSMobile)),ao((()=>{M0.stopCaptureVideo()})),Nt((()=>Yn))),videoCaptureEpics10:e=>oo(e,24322).pipe(ao((n=>{const{payload:r}=n;M0.passThroughRWGMessage(r)})),Nt((()=>Yn)))},m8e={videoRenderEpics0:(e,n)=>oo(e,16129).pipe(Kn((r=>{const{payload:{body:{id:i,bVideoOn:l}}}=r,{meeting:{isUseWBVideo:f}}=n.value,h=ICe(i);return He(E2e,{bVideoOn:l,userId:h}),f&&Gh.prefetchVideoSsrc(i),gDe({bVideoOn:l,userId:h})}))),videoRenderEpics1:e=>bs(e,Cn.VideoDecodeMaxSize).pipe(Gt((n=>{var r;return n==null||(r=n.payload)===null||r===void 0?void 0:r.data})),Kn((({payload:{data:{size:n}}})=>bDe(n)))),videoRenderEpics2:e=>oo(e,16135).pipe(Nt((n=>{const{payload:{body:{bLeadershipOn:r,id:i}}}=n,l=[],f=[],h=r?ICe(i):0;return r&&f.push(h),l.push(lme(f),VDe(h)),mf(si(KP,1),Uc(2e3).pipe(Kn((()=>({leadershipEventOnly:!0}))))).pipe(Nt((v=>{const{spotlightList:y,leadershipEventOnly:_}=v||{};return r?!y||y.length===1&&f[0]===y[0]||He(zJ,{spotlightList:y}):(_||(y==null?void 0:y.length)===0)&&He(zJ,{spotlightList:[]}),Yn})),pb(...l))}))),videoRenderEpics3:(e,n)=>oo(e,7958).pipe(_o(n),Kn((([r,i])=>{const{payload:{body:l}}=r;let f=[];l&&l.group_list&&l.group_list[0]&&(f=l.group_list[0].map((v=>v.id)));const h=Ai(i);return h.length>0&&(f=f.filter((v=>h.findIndex((y=>y.userId===v))>=0))),He(KP,{spotlightList:f}),lme(f)}))),videoRenderEpics4:e=>bs(e,[Cn.CurrentVideoResolution,Cn.CurrentCaptureVideoWidthHeight]).pipe(Gt((n=>!!n.payload.data)),Kn((n=>{const{payload:{data:r,type:i}}=n;return i===Cn.CurrentVideoResolution?(He(A2e,r),CDe(r)):(He(T2e,r),xDe(r))}))),videoRenderEpics5:e=>oo(e,av).pipe(Gt((n=>{const{payload:{body:r}}=n;return["bFollowHostVideo","VideoHd","bCanUnmuteVideo"].some((i=>r[i]!==void 0))})),Kn((n=>{const{payload:{body:{bFollowHostVideo:r,VideoHd:i,bCanUnmuteVideo:l}}}=n;if(r!==void 0)return He(O2e,{bOn:r}),EDe(r);if(l!==void 0)return ADe(l);{const f=i===1;return Gh.updateVideoHDValue(f),Gh.enableHardwareAccelerationForVideoEncode(!1),wDe(f)}}))),videoRenderEpics6:(e,n)=>oo(e,7957).pipe(_o(n),Kn((([r,i])=>{const{video:{isFollowHostVideoLayout:l}}=i,{payload:{body:f}}=r,h=f&&f.drag_list&&f.drag_list.map((v=>v.id));return l&&He(I2e,{layout:h}),_De(h)}))),videoRenderEpics7:(e,n)=>oo(e,la).pipe(_o(n),Gt((([r,i])=>{const{meeting:{userId:l},video:{subscribedVideoList:f}}=i,h=r.payload.body.update,v=r.payload.body.remove;return h&&h.length>0&&h.findIndex((y=>y.id!==l&&(y.bVideoOn!==void 0||y.bHold)))>-1||v&&v.some((y=>f.includes(y.id)))})),ao((([r,i])=>{const{payload:{body:{remove:l,update:f}}}=r,{video:{subscribedVideoList:h}}=i,v=T$e(i);if(l&&l.length>0&&l.filter((y=>h.includes(y.id))).forEach((y=>{He(yY,{userId:y.id})})),f&&f.length>0){const y=f.filter((A=>A.bVideoOn!==void 0)).filter((A=>v.findIndex((R=>R.userId===A.id))===-1)),_=f.filter((A=>A.bHold===!0));_.length>0&&_.filter((A=>h.includes(A.id))).forEach((A=>{He(yY,{userId:A.id})})),y.forEach((A=>{A.bVideoOn?He(R2e,{userId:A.id}):h.includes(A.id)&&He(yY,{userId:A.id})}))}})),yi(Yn)),videoRenderEpics8:(e,n)=>bs(e,Cn.VideoQosData).pipe(_o(n),Kn((([r,i])=>{var l,f;const{video:{isCaptureForbidden:h,isCameraTaken:v},media:{videoEncodeStatus:y,videoDecodeStatus:_}}=i,A=Do(i),R=pbe(i),k=R.length>0,N=(A==null?void 0:A.bVideoOn)&&!h&&!v,L=R.some((q=>q.bVideoOn)),B=y==="success"&&N&&(k||((l=i.recording)===null||l===void 0?void 0:l.cmrStatus)===Cl.Start),H=_==="success"&&k&&L;return(f=r.payload.data)!==null&&f!==void 0&&f.encoding?B?(He(khe,r.payload),iX(r.payload)):iX(MA):H?(He(khe,r.payload),aX(r.payload)):aX(MA)}))),videoRenderEpics9:(e,n)=>bs(e,[Cn.CurrentDecodeVideoQuality,Cn.CurrentDecodeVideoFps]).pipe(ao((r=>{const{payload:{type:i,data:l}}=r,{video:{subscriptionStatus:f}}=n.value;if(f.detailed){if(i===Cn.CurrentDecodeVideoQuality){const{ssrc:h,width:v,height:y,quality:_}=l;He(Mhe,{userId:h,width:v,height:y,quality:_})}else if(i===Cn.CurrentDecodeVideoFps){const{ssrc:h,fps:v}=l;He(Mhe,{userId:h,fps:v})}}})),Xp()),videoRenderEpics10:e=>bs(e,[Cn.NotSupportExternalCanvasInVTagRenderer]).pipe(ao((()=>{console.error("Hardware acceleration disabled: Use attachVideo method to render the video.")})),Xp()),videoRenderEpics11:(e,n)=>bs(e,[Cn.NetworkQualityChange,Cn.NetworkQualityChangeAudio]).pipe(Gt((r=>!!r.payload.data)),Nt((r=>{var i;const{payload:{data:{bwLevel:l,isUplink:f,networkLevel:h}}}=r,v=[],{meeting:{userId:y},video:{networkQuality:_,subscribedVideoList:A,networkQualityBroadcastTime:R}}=n.value,k=f?"uplink":"downlink";v.push(dme({userId:y,level:h,bwLevel:l,type:k}));const N=l6((i=_[`${y}`])===null||i===void 0?void 0:i[k],{level:h,bwLevel:l});if(!N&&h!==-1&&(!f&&A.filter((L=>L!==y)).length>0||f)&&He(Nhe,{userId:y,type:k,level:h}),f){const L=performance.now();(!N||L-(R??0)>3e4)&&(u8e.broadcastUserNetworkQuality({isUplink:f,level:h,bwLevel:l}),v.push(RDe(L)))}return An(v)}))),videoRenderEpics12:(e,n)=>q0(e,8005).pipe(Gt((r=>{var i;return!((i=r.payload.body)===null||i===void 0||!i.nUserID)})),Nt((r=>{const{payload:{body:{nLevel:i,nUserID:l}}}=r,{video:{networkQuality:f}}=n.value,h=f[`${l}`],v=[];return h&&h.uplink.level===i||(He(Nhe,{userId:l,level:i,type:"uplink"}),v.push(dme({userId:l,level:i,type:"uplink"}))),An(v)}))),videoRenderEpics13:(e,n)=>oo(e,la).pipe(Gt((r=>{const{payload:{body:i}}=r,{video:{prefetchedVideo:l}}=n.value;return(l==null?void 0:l.userId)&&(i.update||i.remove)})),Nt((r=>{const{payload:{body:i}}=r,l=[],{video:{prefetchedVideo:f}}=n.value;let h=!1;return i.remove&&(h=i.remove.findIndex((v=>v.id===(f==null?void 0:f.userId)))!==-1),i.update&&(h=i.update.findIndex((v=>v.id===(f==null?void 0:f.userId)&&v.bVideoOn===!1))!==-1),h&&f&&(f.loaded||Gh.cancelPrefetchVideoSsrc(f.userId),Gh.unsubscribeVideo(f.userId),l.push(JP(void 0))),An(l)}))),videoRenderEpics14:(e,n)=>e.pipe(co(`${JP}`),Gt((r=>!!r.payload)),ao((r=>{const{payload:{lastCopy:i}}=r,{video:{prefetchedVideo:l}}=n.value;!l||i&&i.userId===l.userId||(i!=null&&i.userId&&(i.loaded&&Gh.cancelPrefetchVideoSsrc(i.userId),Gh.unsubscribeVideo(i.userId)),Gh.subscribeVideo(l.userId,RJ.Video_360P,!1),Gh.prefetchVideoSsrc(l.userId))})),yi(Yn)),videoRenderEpics15:(e,n)=>bs(e,Cn.NewActiveSpeakerFirstFrameCallback).pipe(Gt((()=>!!n.value.video.prefetchedVideo)),Nt((r=>{const{payload:{data:{ssrc:i}}}=r,{video:{prefetchedVideo:l}}=n.value,f=[];return l&&(Td(l.userId,i)?(f.push(JP({userId:l.userId,loaded:!0,lastCopy:l})),He(M2e,{userId:l.userId})):Gh.unsubscribeVideo(l.userId)),An(f)}))),videoRenderEpics16:(e,n)=>oo(e,16131).pipe(Gt((r=>r.payload.body.ssrc!==void 0)),ao((()=>{const{media:{videoDecodeStatus:r,videoEncodeStatus:i}}=n.value;Ad("video",i,r).subscribe((([l,f])=>{const{video:{subscriptionStatus:h}}=n.value;l&&h.encode&&Gh.subscribeToQos([cf.VideoEncode],mA),f&&(h.decode&&Gh.subscribeToQos([cf.VideoDecode],mA),h.detailed&&Gh.enableVideoObserver(!0))}))})),yi(Yn)),videoRenderEpics17:(e,n)=>e.pipe(co(`${O2}`,`${sX}`),Gt((()=>{const r=n.value.video.renderedVideoList.length;return[0,1].includes(r)})),ao((()=>{const{video:{renderedVideoList:r,subscriptionStatus:i}}=n.value,l=r.length;l===1?Gh.enableVideoObserver(!0,i==null||!i.detailed):l===0&&Gh.enableVideoObserver(!1)})),yi(Yn)),videoRenderEpics18:(e,n)=>bs(e,Cn.CurrentDecodeVideoQuality).pipe(Nt((r=>{const{payload:{data:i}}=r,{video:{renderedVideoList:l,videoAttachments:f}}=n.value,h=[],{ssrc:v,width:y,height:_}=i,A=_?y/_:0,R=l.filter((k=>Td(k.userId,v)));if(R.some((k=>k.aspectRatio&&Math.abs(k.aspectRatio-A)>.2))){const k=R.filter((N=>N.canvasId===WP));if(k.length>0){const N=f[`${v}`];if(N){const L=N.map((H=>{if(H){const{clientWidth:q,clientHeight:Y}=H;return Y?q/Y:0}return 0})).filter((H=>H!==0));if(L.every((H=>Math.abs(H-A)<=.2)))h.push(O2({userId:v,key:kA,canvasId:WP,aspectRatio:A}));else{const H=L.length>0?L.reduce(((q,Y)=>Math.abs(Y-A)>Math.abs(q-A)?Y:q),L[0]):L[0];h.push(O2({userId:v,key:kA,canvasId:WP,aspectRatio:H}))}}}(k.length!==R.length||h.filter((N=>{var L;return((L=N.payload)===null||L===void 0?void 0:L.aspectRatio)!==A})).length>0)&&He(P2e,{userId:v,aspectRatio:A})}return An(h)}))),videoRenderEpics19:(e,n)=>bs(e,Cn.SyncRendererTypeResponse).pipe(Nt((r=>{const{payload:{data:{rendererType:i}}}=r,{video:{rendererType:l}}=n.value,f=[];return l!==i&&f.push(PDe(i)),An(f)}))),videoRenderEpics20:(e,n)=>e.pipe(co(`${om}`),Gt((()=>!!n.value.meeting.zlkJwtToken||!!n.value.meeting.sign)),Kn((r=>{var i;const{payload:{mediaFeatureOptions:l,webMediaBlockConfig:f}}=r,{meeting:{zlkJwtToken:h,sign:v}}=n.value;let y=2;const _=h||v;if(_){const{video_webrtc_mode:N}=bE(_);N!==void 0&&(y=Number(N))}const{shouldUseWebRTC:A,errNo:R}=Yo.getWebRTCCapability(y,l??"",(i=JSON.parse(f||"{}"))===null||i===void 0?void 0:i.WebRTCConfig);A||y!==1||console.warn(TFe[R]||"An error occurred with WebRTC Video.");const k=rr.get(Bi.VideoSDKWebRTCVideoFallbackWasm)===1;return ybe(A&&!k)}))),videoRenderEpics21:(e,n)=>e.pipe(co(`${vbe}`),Gt((r=>{const{payload:{userId:i}}=r,{meeting:{userId:l}}=n.value;return d2()&&i===l})),Nt((r=>{const{payload:{element:i}}=r,{media:{alternativeNameForVideoPlayer:l},video:{isMirrored:f}}=n.value,h=`${l??"video-player"}-container`;return X1e(i,h)?Promise.resolve({element:i,ret:!0}):f?Ra(gE((v=>{const y=new MutationObserver(v);y.observe(document.body,{childList:!0,subtree:!0}),v.__observer=y}),(v=>{const y=v.__observer;y==null||y.disconnect()})).pipe(Gt((()=>X1e(i,h))),Au(vE(Uc(5e3))),Kn((()=>({element:i,ret:!0}))))).catch((()=>({element:i,ret:!1}))):Promise.resolve({element:i,ret:!1})})),al(mE),ao((r=>{const{element:i,ret:l}=r;var f;l&&Cbe(i==null||(f=i.render)===null||f===void 0?void 0:f.el,n.value.video.isMirrored)})),Xp())},g8e=nh(m8e,h8e,{vbEpics0:e=>bs(e,[Cn.VbModelPreloadingOk,Cn.VbModelPreloading_3S,Cn.VbModelPreloading_10S,Cn.VbSettingParaError]).pipe(Nt((n=>{const{payload:{type:r,data:i}}=n,l=[];return[Cn.VbModelPreloadingOk,Cn.VbModelPreloading_3S,Cn.VbModelPreloading_10S].includes(r)?(l.push(ume(!0)),He(UJ,!0),r===Cn.VbModelPreloading_10S&&console.warn("Virtual Background is taking longer than expected to load.")):r===Cn.VbSettingParaError&&(i===zRe.VBModelNotMatch?(He(UJ,!1),l.push(ume(!1))):(He(Dhe,!1),l.push(rX(!1)))),An(l)}))),vbEpics1:e=>bs(e,Cn.StartVideoStreamInVbSettingSuccess).pipe(Kn((()=>(He(Dhe,!0),rX(!0))))),vbEpics2:e=>bs(e,Cn.StartVideoStreamInMaskSettingSuccess).pipe(Kn((()=>(He(Lhe,!0),dX(!0))))),vbEpics3:e=>bs(e,Cn.MaskSettingParaError).pipe(Kn((()=>(He(Lhe,!1),dX(!1)))))},p8e);let G0=(function(e){return e.VIDEO_ENCODE="0",e.VIDEO_DECODE="1",e.AUDIO_ENCODE="2",e.AUDIO_DECODE="3",e.SHARING_ENCODE="4",e.SHARING_DECODE="5",e})({}),f6=(function(e){return e[e.NONE=0]="NONE",e[e.AES_256=1]="AES_256",e[e.AES_GCM=2]="AES_GCM",e})({});const Rd=Object.freeze({RWG_CHAT:{gcmType:1,sessionType:"RWG_CHAT"},XMPP_CHAT:{gcmType:1,sessionType:"XMPP_CHAT"},CC_MESSAGE:{gcmType:3,sessionType:"CC_MESSAGE"},BO_BROADCAST:{gcmType:1,sessionType:"BO_BROADCAST"},CHAT_FILE:{gcmType:2,sessionType:"CHAT_FILE"},CHAT_FILE_INFO:{gcmType:1,sessionType:"CHAT_FILE_INFO"}}),bU=(window.crypto||window.msCrypto).subtle,yP=Bi.WebclientIVState,v8e=Object.keys(Rd).map((e=>Rd[e].sessionType));class xd{constructor(n,r,i){this.isGCMEnabled=void 0,this.gcmSessionKey=void 0,this.gcmMainSessionKey=void 0,this.zoomId=void 0,this.resetParameters(n,r,i),rr.set(yP,{},Zr.SessionStorage)}static init(n,r,i){this.instance?this.instance.resetParameters(n,r,i):this.instance=new xd(n,r,i)}static destroy(){this.instance&&(this.instance=void 0)}resetParameters(n,r,i){this.isGCMEnabled=!(bo.isIE||!bo.isSupportEssentialAudioAndVideoAbility)&&i===f6.AES_GCM,this.gcmSessionKey=iv(r),this.gcmMainSessionKey||(this.gcmMainSessionKey=this.gcmSessionKey),this.zoomId=String(n)}beginCrypto(n,r,i){const l=new Uint32Array(1);l[0]=9,l[0]+=Number(i);const f=new Uint8Array(l.buffer);let h=new Uint8Array(132);const v=iv(r);return h.set(v,0),h.set(f,v.length),h=h.subarray(0,v.length+4),bU.importKey("raw",n,{name:"HMAC",hash:"SHA-256"},!0,["sign"]).then((y=>bU.sign({name:"HMAC"},y,h))).then((y=>bU.importKey("raw",y,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])))}getNextIV(n){const r=rr.get(yP);return r[n]===void 0?(r[n]=0,rr.set(yP,r,Zr.SessionStorage)):rr.set(yP,(i=>({...i,[n]:i[n]+1})),Zr.SessionStorage)}resetIVState(){const n=rr.get(yP);if(n!==void 0){const r=Object.keys(n).filter((i=>v8e.indexOf(i)>-1));r.length>0&&(r.forEach((i=>{n[i]+=1e6})),rr.set(yP,n,Zr.SessionStorage))}}static resetIV(){if(this.instance===void 0)throw new Error("reset before intialize");this.instance.resetIVState()}static beginEncrypt({text:n,type:r}){const i=new Uint8Array(0);if(this.instance&&this.instance.isGCMEnabled){const h=this.instance.getNextIV(r.sessionType),v=new ArrayBuffer(12),y=new Uint8Array(v);new DataView(v).setUint32(0,h,!0);let _=null;return _=r.sessionType==="BO_BROADCAST"||r.sessionType==="XMPP_CHAT"?this.instance.gcmMainSessionKey:this.instance.gcmSessionKey,this.instance.beginCrypto(_,this.instance.zoomId,r.gcmType).then((A=>{const R=ArrayBuffer.isView(n)?n:new TextEncoder().encode(n);return bU.encrypt({name:"AES-GCM",iv:y,additionalData:i,tagLength:128},A,R)})).then((A=>{const R=1+y.byteLength+2+i.byteLength+4+A.byteLength,k=new ArrayBuffer(R);if(new Uint8Array(k)[0]=y.length,new Uint8Array(k,1,y.byteLength).set(y),new DataView(k).setUint16(1+y.byteLength,i.length,!0),new Uint8Array(k,3+y.byteLength).set(i),new DataView(k).setUint32(1+y.byteLength+2+i.byteLength,A.byteLength-16,!0),new Uint8Array(k,1+y.byteLength+2+i.byteLength+4).set(new Uint8Array(A)),r.sessionType===Rd.CHAT_FILE.sessionType)return k;const N=new Uint8Array(k).reduce(((L,B)=>L+String.fromCharCode(B)),"");return window.btoa(N).replace(/_/g,"/").replace(/-/g,"+").replace(/\=/g,"")}))}return Promise.resolve(ArrayBuffer.isView(n)?n:Vc(n))}static beginDecrypt({decryptedText:n,type:r,zoomId:i}){if(this.instance&&this.instance.isGCMEnabled){const l=ArrayBuffer.isView(n)||n instanceof ArrayBuffer?new Uint8Array(n):(function(B){let H;const q=B.length,Y=new Array(q);for(H=0;H<q;++H)Y[H]=255&B.charCodeAt(H);return new Uint8Array(Y)})(atob(n.replace(/_/g,"/").replace(/-/g,"+"))),f=l[0],h=l.slice(1,f+1),v=l.slice(1+f,3+f),y=new DataView(v.buffer).getUint16(0,!0),_=l.slice(1+f+2,1+f+2+y),A=l.slice(1+f+2+y,1+f+2+y+4),R=new DataView(A.buffer).getUint32(0,!0),k=l.slice(1+f+2+y+4,1+f+2+y+4+R),N=l.slice(1+f+2+y+4+R);let L=null;return L=r.sessionType==="BO_BROADCAST"||r.sessionType==="XMPP_CHAT"?this.instance.gcmMainSessionKey:this.instance.gcmSessionKey,this.instance.beginCrypto(L,i,r.gcmType).then((B=>{const H=(function(q,Y){q=new Uint8Array(q),Y=new Uint8Array(Y);const K=new Uint8Array(q.length+Y.length);return K.set(q),K.set(Y,q.length),K})(k,N);return bU.decrypt({name:"AES-GCM",iv:h,additionalData:_,tagLength:8*N.length},B,H.buffer)})).then((B=>({message:r.sessionType===Rd.CHAT_FILE.sessionType?B:new TextDecoder().decode(B),iv:h,aad:_}))).catch((B=>({message:"[This is an encrypted message]",iv:h,aad:_})))}{const l=new TextDecoder("utf-8");return Promise.resolve({message:ArrayBuffer.isView(n)||n instanceof ArrayBuffer?n:l.decode(iv(n))})}}}xd.instance=void 0;const FY=Dd.getInstance().makeLogger(["Remote Control"]),b8e=sp(Yo.getInstance()),bNe=(e,n,r)=>{const i={setAttribute:(l,f)=>{i[l]=f},getAttribute:l=>i[l]||null,removeAttribute:l=>{delete i[l]},tagName:r.toUpperCase(),id:`dummy-render-${e}-${n}`,isDummy:!0,canvasId:n,toString:()=>`DummyVideoPlayer(${e}, ${n})`};return i.setAttribute("node-id",`${e}`),i.setAttribute("media-type","share"),i.setAttribute("render-type","canvas"),i};function rL(e,n,r,i,l){let{share:{activeNodeId:f,shareQuality:h}}=n;const{share:{isReceiveSharingFromMainSession:v}}=n;r&&(f=r),i!==void 0&&(h=i);const y=RMe(n);e.subscribeSharing(f,h,v,y,l)}class yNe{constructor(){this.checkerSubject=void 0,this.checkerSubscription=void 0}startCheck(n){return this.checkerSubject&&this.stopCheck(),this.checkerSubject=new cb,this.checkerSubscription=Uc(n).subscribe(this.checkerSubject),this.checkerSubject}stopCheck(){var n;this.checkerSubject&&(this.checkerSubject.complete(),(n=this.checkerSubscription)===null||n===void 0||n.unsubscribe(),this.checkerSubject=void 0)}}const SNe=new yNe,CNe=new yNe;function FU(){return SNe.stopCheck()}function pge(){return CNe.stopCheck()}function BX(e,n){FU(),pge();const{share:{remoteControllingSsrc:r},meeting:{userId:i}}=e;r&&(_Ne(),n.takeBackRemoteControlPermission(i,r))}async function ENe(e,n,r,i,l){const{share:{isSDKGrabControl:f,isGrabRemoteControl:h}}=r;if(!h){i.subscribeGrabRemoteControl(e,!0);try{await Ra(si(w2,1).pipe(Gt((y=>!!y))))}catch{}}const v=Y6e(r);v&&(f?(l.resendRemoteControlPositionPDU(),l.updateRemoteControlProperties({os:v.os,isControllerNow:!0,dimension:n&&XJ(n)})):n&&l.startRemoteControl(n,v.os,XJ(n)))}function _Ne(){FY.log("qr scanning stop"),b8e.startRemoteControlQRCheck(!1)}function wNe(e,n,r){var i;const{audio:l}=n;if((l==null||(i=l.localShareAudioUserMutedList)===null||i===void 0?void 0:i.length)>0){const{localShareAudioUserMutedList:f}=l,h=f.find((v=>v.userId===e));aDe(e,!(h==null||!h.muted),n,r)}}function zEe(e,n,r){const i=e.find((l=>l.ssrc===n));return i!=null&&i.isInitialized?Promise.reject({type:Lt,reason:"Cannot start share view due to annotation is in progress.",errorCode:Fe.SCREEN_SHARE_MISMATCH_STATE}):(r.stopPresenterAnnotation(n),null)}function WEe(e,n){return e.findIndex((r=>r.userId===n))===-1?Promise.reject({type:gs,reason:"Target user is not sharing",errorCode:Fe.STREAM_MISMATCH_USER}):null}function GEe(){return bo.isAndroidOrIOSBrowser||bo.isHarmonyOS||bo.is32bitChrome?1:4}async function y8e(e,n,r){var i;const{meeting:{bIbDisableShare:l},share:{isReceiveSharingFromMainSession:f,annotationUsers:h,ssrc:v},audio:y}=n;if(l)return Promise.reject({type:Lt,reason:"information barrier",errorCode:Fe.SCREEN_SHARE_IB_DENIED});if(typeof((i=navigator.mediaDevices)===null||i===void 0?void 0:i.getDisplayMedia)!="function")return Promise.reject({type:Lt,reason:"Unable to share your screen due to the technical limitation",errorCode:Fe.SCREEN_SHARE_UNSUPPORTED});if(f)return Promise.reject({type:Lt,reason:"Unable to share your screen while someone is sharing from the main session",errorCode:Fe.SCREEN_SHARE_SUBSESSION_CONFLICT});if((y==null?void 0:y.secondaryAudioMicrophoneId)!==void 0)return Promise.reject({type:Lt,reason:"Cannot start screen share while secondary audio is in progress.",errorCode:Fe.SECONDARY_AUDIO_SCREEN_SHARING_CONFLICT});var _;if(bo.isSupportMediaStreamTrackProcessor){if(!sE(e))return Promise.reject({type:gs,reason:"Use Video element instead of Canvas element when WebCodecs enabled",errorCode:Fe.STREAM_MISMATCH_RENDER_ELEMENT})}else if(!GL(e))return Promise.reject({type:gs,reason:`Expected to accept HTMLCanvasElement, but actual it is ${typeof e=="object"&&e!==null?(_=Object.getPrototypeOf(e))===null||_===void 0?void 0:_.constructor.name:e}`,errorCode:Fe.STREAM_MISMATCH_RENDER_ELEMENT});if(r!=null&&r.simultaneousShareView&&h.some((A=>A.isInitialized&&A.ssrc!==v)))return Promise.reject({type:Lt,reason:"Cannot start share screen due to annotation is in progress.",errorCode:Fe.SCREEN_SHARE_MISMATCH_STATE});await(async function(A){const{share:{sharePrivilege:R}}=A,k=eE(A),N=Qh(A);if(R===sv.OnlyHost&&!N)return Promise.reject({type:hf,reason:"only host can start screen share",errorCode:Fe.SCREEN_SHARE_HOST_PRIVILEGE_REQUIRED});if(R===sv.HostGrab&&!N&&k.length>0)return Promise.reject({type:hf,reason:"only host can grab screen share",errorCode:Fe.SCREEN_SHARE_HOST_PRIVILEGE_REQUIRED});const L=Do(A);return(L==null?void 0:L.sharerOn)===!0?Promise.reject({type:Lt,reason:"you have already started screen share.",errorCode:Fe.SCREEN_SHARE_MISMATCH_STATE}):void 0})(n)}function YC(e,n){const{share:{isReceiveSharingFromMainSession:r},breakoutRoom:i}=n;var l,f;return r?i==null||(l=i.mainSessionAttendeeList.find((h=>h.userId===e)))===null||l===void 0?void 0:l.shareSsrc:(f=Ai(n).find((h=>h.userId===e)))===null||f===void 0?void 0:f.shareSsrc}function ANe(e,n){const{state:r,rwgAgent:i,mediaAgent:l}=n,{share:{remoteControlledUserList:f}}=r;wNe(e,r,l),f.includes(e)&&ENe(e,void 0,r,i,l)}function TNe(e,n){const{state:r,rwgAgent:i,mediaAgent:l}=n,{share:{remoteControlledUserList:f,isGrabRemoteControl:h}}=r,v=(function(y,_){const{state:A,mediaAgent:R}=_,k=[];if(y){const{share:{annotationUsers:B}}=A,H=YC(y,A);var N,L;H&&(n2(A)?(N=B.find((q=>q.ssrc===H)))!==null&&N!==void 0&&N.isInitialized&&(R.hideViewerAnnotationCanvas(),R.stopViewerAnnotation(H),k.push(W0({ssrc:H,isInitialized:!1,isStarted:!1}))):(L=B.find((q=>q.ssrc===H)))!==null&&L!==void 0&&L.isStarted&&(R.annotateAction(af.CLOSE_TOOL_BAR),k.push(W0({ssrc:H,isStarted:!1}))))}return k})(e,n);return f.includes(e)&&(h&&i.subscribeGrabRemoteControl(e,!1),l.updateRemoteControlProperties({isControllerNow:!1})),v}function hge(e,n,r,i){var l;const{state:f,rwgAgent:h,mediaAgent:v}=i,{share:{isReceiveSharingFromMainSession:y,shareViewAttachments:_}}=f,A=TNe(e,i);h.unsubscribeSharing(e,y),rL(h,f,n),v.switchSharingSource(r,y);const R=(l=_[`${e}`])===null||l===void 0?void 0:l.find((k=>k.isDummy));if(R){A.push(l5({userId:e,element:R}));const k=bNe(n,R.canvasId,R.tagName);A.push(LX({userId:n,element:k}))}return ANe(n,i),A}const y1=zr.createAgent(),jp=sp(Yo.getInstance()),FC=zr.createAgent(),S1=sp(Yo.getInstance()),$C=sp(Yo.getInstance()),qEe={ssrc:0,status:qs.End,shareDimension:{width:0,height:0},receivedShareDimension:{width:1920,height:1080,logicWidth:1920,logicHeight:1080},sharePrivilege:sv.OnlyHost,activeNodeId:0,activeSsrc:0,shareQuality:1,isRemoteSharingActive:!1,isReceiveSharing:!1,isGrabRemoteControl:!1,isSDKGrabControl:!1,isScreenShareForbidden:!1,isReceiveSharingFromMainSession:!1,isSharingToBreakoutRoom:!1,isSharingWithSecondCamera:!1,secondCameraId:"default",isRequireReadReceipt:!1,capturedEnsuredCanvas:[],renderedEnsuredCanvas:[],remoteControllingSsrc:0,remoteControlApprovedSsrc:0,remoteControlAppDownloadUrl:"",remoteControlAppInstallStatus:lf.Unknown,isEnableAutoDeleteRcApp:!1,remoteControlledUserList:[],isRemoteControlEnabled:!1,isSimultaneousShareView:!1,statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0,bandwidth:0,bitrate:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0,bandwidth:0,bitrate:0}},annotationCapability:0,isAnnotationInitialized:!1,isAnnotationStarted:!1,annotationUsers:[],annotationToolColor:cSe.DarkGrey,annotationSpotlightColor:cSe.Red,annotationToolWidth:8,annotationToolType:I1.None,shareViewAttachments:{},annotationVanishingToolTimer:{displayTime:0,vanishingTime:2e3}},S8e=["userId","ssrc","isInitialized","isStarted","isDisabled"],C8e=op({[`${Wbe}`]:We(((e,{payload:n})=>{e.sharePrivilege=n})),[`${nL}`]:We(((e,{payload:n})=>{e.isRemoteSharingActive=n.bStatus===1,e.activeNodeId=n.activeNodeID,e.activeSsrc=n.ssrc})),[`${BA}`]:We(((e,{payload:n})=>{e.isReceiveSharing=n})),[`${Gbe}`]:We(((e,{payload:n})=>{e.shareDimension={...n}})),[`${Yp}`]:We(((e,{payload:n})=>{e.status=n,n===qs.End&&(e.isSimultaneousShareView=!1)})),[`${oNe}`]:We(((e,{payload:n})=>{e.ssrc=n})),[`${qbe}`]:We(((e,{payload:n})=>{e.shareQuality=n})),[`${NX}`]:We(((e,{payload:n})=>{e.receivedShareDimension={...n}})),[`${dNe}`]:We(((e,{payload:n})=>{e.remoteControlledUserList.includes(n)||e.remoteControlledUserList.push(n)})),[`${dge}`]:We(((e,{payload:n})=>{const r=e.remoteControlledUserList.indexOf(n);r>=0&&e.remoteControlledUserList.splice(r,1)})),[`${HY}`]:We(((e,{payload:n})=>{e.isGrabRemoteControl=n,n===!1&&(e.remoteControlViewportDomSelector=void 0)})),[`${lge}`]:We(((e,{payload:n})=>{e.isSDKGrabControl=n})),[`${sNe}`]:We(((e,{payload:n})=>{e.isReceiveSharingFromMainSession=n})),[`${HU}`]:We(((e,{payload:n})=>{e.isSharingToBreakoutRoom=n})),[`${rNe}`]:We(((e,{payload:n})=>{e.isSharingWithSecondCamera=n})),[`${iNe}`]:We(((e,{payload:n})=>{e.secondCameraId=n})),[`${aNe}`]:We(((e,{payload:n})=>{e.isRequireReadReceipt=n})),[`${PX}`]:We(((e,{payload:n})=>{e.isOptimizedForSharedVideo=n})),[`${uge}`]:We(((e,{payload:n})=>{const{data:{encoding:r,rate:i,...l}}=n;e.statistic.encode={bitrate:i,...l}})),[`${F5}`]:We(((e,{payload:n})=>{const{data:{encoding:r,rate:i,...l}}=n;e.statistic.decode={bitrate:i,...l}})),[`${cNe}`]:We(((e,{payload:n})=>{e.capturedEnsuredCanvas.includes(n)||e.capturedEnsuredCanvas.push(n)})),[`${lNe}`]:We(((e,{payload:n})=>{e.renderedEnsuredCanvas.includes(n)||e.renderedEnsuredCanvas.push(n)})),[`${c5}`]:We(((e,{payload:n})=>{e.remoteControllingSsrc=n})),[`${oL}`]:We(((e,{payload:n})=>{e.remoteControlApprovedSsrc=n})),[`${uNe}`]:We(((e,{payload:n})=>{e.remoteControlAppDownloadUrl=n})),[`${o2}`]:We(((e,{payload:n})=>{(e.remoteControlAppInstallStatus!==lf.Installed||lf.Unknown)&&(e.remoteControlAppInstallStatus=n)})),[`${k1}`]:We(((e,{payload:n})=>{e.remoteControlAppLaunchSheme=n})),[`${Kbe}`]:We(((e,{payload:n})=>{Object.assign(e,n)})),[`${Zbe}`]:We(((e,{payload:n})=>{e.remoteControlViewportDomSelector=n})),[`${fNe}`]:We(((e,{payload:n})=>{e.annotationCapability=n})),[`${s8e}`]:We(((e,{payload:n})=>{e.isAnnotationInitialized=n})),[`${r8e}`]:We(((e,{payload:n})=>{e.isAnnotationStarted=n})),[`${W0}`]:We(((e,{payload:n})=>{const{userId:r,ssrc:i,isInitialized:l,isStarted:f,isDisabled:h}=n;let v=-1;if(r!==void 0?v=e.annotationUsers.findIndex((y=>{var _;return y.userId===r||Td(r,(_=y.ssrc)!==null&&_!==void 0?_:0)})):i!==void 0&&(v=e.annotationUsers.findIndex((y=>{var _;return y.ssrc===i||Td(i,(_=y.userId)!==null&&_!==void 0?_:0)}))),v>=0){const y=e.annotationUsers[v];Object.entries(n).forEach((([_,A])=>{n[_]!==void 0&&S8e.includes(_)&&Object.assign(y,{[_]:A})}))}else e.annotationUsers.push({userId:r,ssrc:i,isInitialized:l||!1,isStarted:f||!1,isDisabled:h||!1})})),[`${pNe}`]:We(((e,{payload:n})=>{e.annotationToolColor=n})),[`${hNe}`]:We(((e,{payload:n})=>{e.annotationSpotlightColor=n})),[`${mNe}`]:We(((e,{payload:n})=>{e.annotationToolWidth=n})),[`${sL}`]:We(((e,{payload:n})=>{e.annotationToolType=n})),[`${fge}`]:We(((e,{payload:n})=>{e.isSimultaneousShareView=n})),[`${LX}`]:We(((e,{payload:n})=>{const{userId:r,element:i}=n;if(e.shareViewAttachments[`${r}`]){const l=bX(e.shareViewAttachments[`${r}`]);(l==null?void 0:l.indexOf(i))===-1&&e.shareViewAttachments[`${r}`].push(i)}else e.shareViewAttachments[`${r}`]=[],e.shareViewAttachments[`${r}`].push(i)})),[`${l5}`]:We(((e,{payload:n})=>{const{userId:r,element:i}=n,l=e.shareViewAttachments[`${r}`];if((l==null?void 0:l.length)>0){let f=i;Array.isArray(i)||(f=[i]),f.forEach((h=>{var v;const y=(v=bX(l))===null||v===void 0?void 0:v.indexOf(h);y!==void 0&&y!==-1&&l.splice(y,1)}))}})),[`${gNe}`]:We(((e,{payload:n})=>{e.annotationVanishingToolTimer={...n}})),[`${vNe}`]:()=>({...qEe})},qEe),E8e={annotationEpics0:(e,n)=>e.pipe(co(`${om}`),Kn((()=>{const{meeting:{mediaFeatureOptions:r}}=n.value,i=r?Yo.getAnnotationCapability(r):0;return fNe(i)}))),annotationEpics1:e=>bs(e,[Cn.StartAnnotationSuccess,Cn.StartAnnotationFailed]).pipe(ao((n=>{const{payload:{data:r,type:i}}=n;i===Cn.StartAnnotationSuccess?He(Uhe):i===Cn.StartAnnotationFailed&&He(Uhe,r)})),Nt((()=>Yn))),annotationEpics2:e=>oo(e,20241).pipe(Kn((n=>{const{activeNodeID:r,annotationOff:i}=n.payload.body;return He(ube,{userId:r,isAnnotationEnabled:i===0}),W0({userId:r,isDisabled:i===1})}))),annotationEpics3:(e,n)=>bs(e,Cn.AnnotationRedoStatus).pipe(_o(n),ao((([r,i])=>{const{payload:{data:l}}=r,{share:{activeSsrc:f,ssrc:h,annotationUsers:v}}=i;v.filter((y=>[f,h].includes(y.ssrc))).some((y=>y.isInitialized))&&He(gxe,l)})),Nt((()=>Yn))),annotationEpics4:(e,n)=>bs(e,Cn.AnnotationUndoStatus).pipe(_o(n),ao((([r,i])=>{const{payload:{data:l}}=r,{share:{activeSsrc:f,ssrc:h,annotationUsers:v}}=i;v.filter((y=>[f,h].includes(y.ssrc))).some((y=>y.isInitialized))&&He(mxe,l)})),Nt((()=>Yn))),annotationEpics5:(e,n)=>oo(e,la).pipe(Kn((r=>aE(r.payload.body))),_o(n),ao((([r,i])=>{const{share:{ssrc:l},meeting:{userId:f}}=i;if(r.update){const h=r.update.find((v=>(v==null?void 0:v.userId)===f&&v.sharerOn!==void 0));if(h!=null&&h.sharerOn){const v=Do(i);$C.updateSharingInfo(l,(v==null?void 0:v.displayName)||"")}}})),Nt((()=>Yn))),annotationEpics6:(e,n)=>bs(e,Cn.AnnoViewerRequestDraw).pipe(_o(n),ao((([r,i])=>{const{payload:{data:l}}=r,{breakoutRoom:f,participants:{attendeesList:h}}=i,{userId:v}=l;if(He(vxe,l),v){var y,_;const A=((y=h.find((k=>Td(k.userId,v))))===null||y===void 0?void 0:y.displayName)||(f==null||(_=f.mainSessionAttendeeList)===null||_===void 0||(_=_.find((k=>Td(k.userId,v))))===null||_===void 0?void 0:_.displayName)||"",R={userId:v,userName:A};$C.annotateAction(af.ANNOTATOR_ID_TO_NAME,R)}})),Nt((()=>Yn))),annotationEpics7:(e,n)=>e.pipe(co(`${Yp}`),_o(n),Gt((([,r])=>{var i;return((i=r.share)===null||i===void 0?void 0:i.status)===qs.End})),Nt((([r,i])=>{const{share:{annotationUsers:l,ssrc:f}}=i,h=[];return l.find((v=>v.ssrc===f))&&($C.stopPresenterAnnotation(f),h.push(W0({ssrc:f,isInitialized:!1,isStarted:!1})),h.push(sL(I1.None))),An(h)}))),annotationEpics8:(e,n)=>e.pipe(co(`${BA}`),al(nm),_o(n),Gt((([,r])=>r.share.isReceiveSharing===!1)),Nt((([r,i])=>{const{share:{activeNodeId:l,annotationUsers:f}}=i,h=[],v=YC(l,i);return v&&f.find((y=>y.ssrc===v))&&($C.stopViewerAnnotation(v),h.push(W0({ssrc:v,isInitialized:!1,isStarted:!1})),h.push(sL(I1.None))),$C.hideViewerAnnotationCanvas(),An(h)}))),annotationEpics9:(e,n)=>oo(e,la).pipe(_o(n),Gt((([r,i])=>{const{meeting:{userId:l}}=i,f=r.payload.body.update;return f&&f.length>0&&f.findIndex((h=>h.id!==l&&h.bShareOn!==void 0))>-1})),Nt((([r,i])=>{const{payload:{body:{update:l}}}=r,{share:{annotationUsers:f}}=i,h=l.filter((y=>y.bShareOn===!1)),v=[];return h==null||h.forEach((y=>{const{shareSsrc:_}=y;_&&f.find((A=>A.ssrc===_))&&($C.stopViewerAnnotation(_),v.push(W0({ssrc:_,isInitialized:!1,isStarted:!1})),v.push(sL(I1.None)))})),An(v)}))),annotationEpics10:(e,n)=>e.pipe(co(`${Gbe}`),_o(n),ao((([r,i])=>{var l;const{share:{ssrc:f,annotationUsers:h}}=i;(l=h.find((v=>v.ssrc===f)))!==null&&l!==void 0&&l.isInitialized&&$C.updatePresenterAnnotationCanvas()})),Nt((()=>Yn))),annotationEpics11:(e,n)=>e.pipe(co(`${NX}`),al(nm),_o(n),ao((([r,i])=>{var l;const{share:{activeSsrc:f,annotationUsers:h}}=i;(l=h.find((v=>v.ssrc===f)))!==null&&l!==void 0&&l.isInitialized&&$C.updateViewerAnnotationCanvas()})),Nt((()=>Yn))),annotationEpics12:e=>e.pipe(co(`${lv}`),ao((n=>{$C.removeViewerAnnotationCanvas()})),Nt((()=>Yn)))},_8e={remoteControlEpics0:e=>e.pipe(co(`${om}`),Kn((n=>{const{payload:{meetingOptions:r,rcAutoDelete:i,jwtRc:l,opRc:f}}=n,h=(r==null?void 0:r.isRemoteControlEnbaled)&&f&&l===1;return Kbe({isRemoteControlEnabled:h,isEnableAutoDeleteRcApp:i===1})}))),remoteControlEpics1:(e,n)=>oo(e,16391).pipe(Nt((r=>{const{payload:{body:{bOn:i,sendID:l,receiveID:f}}}=r,{meeting:{userId:h},share:{status:v,activeNodeId:y,isGrabRemoteControl:_}}=n.value,A=[];if(v===qs.End&&A.push(c5(0)),v!==qs.End)if(Td(h,l))i?(FU(),pge(),v===qs.Paused&&(FC.resumeSharing(),S1.resumeDesktopSharing(),A.push(Yp(qs.Sharing))),A.push(c5(f))):A.push(c5(0));else{var R;const k=(R=Ai(n.value))===null||R===void 0?void 0:R.find((N=>Td(N.userId,l)));k&&He(fxe,{userId:k.userId,displayName:k.displayName,isSharingEntireScreen:S1.isSharingEntireScreen()})}else if(!f||Td(f,h)){const k=Do(n.value);if(!Ku(k.userRole)&&!bo.isAndroidOrIOSBrowser){const N=l&&Td(y,l);i?(A.push(dNe(y)),N&&(_||FC.subscribeGrabRemoteControl(y,!0))):(A.push(dge(y)),N&&(_&&(FC.subscribeGrabRemoteControl(y,!1),A.push(HY(!1)),He(w2,!1)),S1.updateRemoteControlProperties({isControllerNow:!1}))),He(qJ,i)}}return An(A)}))),remoteControlEpics2:(e,n)=>oo(e,16395).pipe(_o(n),Gt((([r,i])=>r.payload.body.id===i.meeting.userId)),Kn((([r])=>{const{payload:{body:{bOn:i}}}=r;return S1.updateRemoteControlProperties({isControllerNow:i}),He(w2,i),HY(i)}))),remoteControlEpics3:e=>bs(e,[Cn.StartRemoteControlSuccess,Cn.StartRemoteControlFailed,Cn.CancelRemoteControlSuccess]).pipe(d6((n=>n.payload.type===Cn.StartRemoteControlSuccess?(He(cxe),lge(!0)):n.payload.type===Cn.CancelRemoteControlSuccess?lge(!1):void(n.payload.type===Cn.StartRemoteControlFailed&&He(lxe))))),remoteControlEpics4:e=>bs(e,[Cn.RemoteControlCopiedTextNotify,Cn.RemoteControlPasteTextLengthOverflow]).pipe(ao((n=>{if(n.payload.type===Cn.RemoteControlCopiedTextNotify){const{payload:{data:r}}=n;He(Fhe,{content:r.data,x:r.x,y:r.y})}else He(Fhe,{error:"length of pasted text is too long"})})),yi(Yn)),remoteControlEpics5:(e,n)=>oo(e,4342).pipe(Gt((r=>r.payload.body.result===0)),Nt((r=>{const{payload:{body:{downloadUrl:i,ssrc:l,urlScheme:f}}}=r,{share:{remoteControlApprovedSsrc:h,status:v}}=n.value,y=[],{isMacOS:_}=bo;if(v!==qs.End){if(!h||h===l){FU();try{const L=JSON.parse(i||"{}"),B=_?L.macDownloadUrl:L.winDownloadUrl;y.push(uNe(B))}catch(L){console.warn("unsupported JSON string",L)}}const A={},R=Ai(n.value).find((L=>Td(L.userId,l)));R&&Object.assign(A,{controllerName:Vc(R.displayName)}),Object.assign(A,{ssrc:l});const{deviceId:k}=S1.getShareStreamInfo();k&&Object.assign(A,{DeviceID:k});const N=`${f}&${new URLSearchParams(A).toString()}`;y.push(k1(N),o2(lf.Unknown)),He(pxe,N)}return An(y)}))),remoteControlEpics6:e=>e.pipe(co(`${FEe}`),Nt((()=>SNe.startCheck(1e4).pipe(Kn((()=>(He(jR,lf.Unknown),o2(lf.Unknown)))))))),remoteControlEpics7:(e,n)=>e.pipe(co(`${cpe}`),Gt((()=>{const{share:{remoteControlAppInstallStatus:r}}=n.value;return r===lf.Installed})),Nt((()=>CNe.startCheck(12e4).pipe(Nt((()=>{He(jR,kJ.Unlaunched);const{share:{remoteControlApprovedSsrc:r,isEnableAutoDeleteRcApp:i},meeting:{userId:l}}=n.value,f=[],{isMacOS:h}=bo;return r&&(FC.remoteControlConsent(DJ.CacheClean,r,l,{...S1.getShareStreamInfo(),platform:h?"mac":"win"},i),f.push(k1(""),oL(0))),An(f)})))))),remoteControlEpics8:(e,n)=>e.pipe(co(`${k1}`),Gt((r=>!!r.payload)),Nt((r=>{const{payload:i}=r,l=[];let f;if(i){(function(v){if(!v.startsWith("zoomprc://"))return;const y=rE("__ZOOM_SDK_RC_APP_SCHEME_@__");let _=document.getElementById(y);_||(_=document.createElement("iframe"),_.id=y,_.style.display="none",document.body.appendChild(_)),_.contentWindow.location.href=v})(i),l.push(cpe());const h=performance.now();document.hasFocus()?f=A5(25).pipe(a2((()=>{const v=performance.now()-h<500;return v||He(jR,lf.Uninstalled),v&&n.value.share.remoteControlAppInstallStatus===lf.Unknown})),mr((()=>{const v=performance.now()-h,y=[];return document.hasFocus()||(v>75?y.push(FEe()):FU(),He(jR,lf.Installed),y.push(o2(lf.Installed),cpe())),An(y)})),(function(){for(var v=[],y=0;y<arguments.length;y++)v[y]=arguments[y];return function(_){return w5(_,Di.apply(void 0,Z0([],fb(v))))}})(o2(lf.Uninstalled))):(He(jR,lf.Unknown),l.push(o2(lf.Unknown)))}return f?wl(f,An(l)):An(l)}))),remoteControlEpics9:(e,n)=>oo(e,zme).pipe(Nt((()=>(He(CY,Afe.Ended),BX(n.value,FC),An([k1(""),oL(0)]))))),remoteControlEpics10:(e,n)=>e.pipe(co(`${Yp}`),Gt((r=>{const{share:{remoteControllingSsrc:i,remoteControlApprovedSsrc:l}}=n.value;return!(r.payload!==qs.End||!i&&!l)})),ao((()=>{const{share:{remoteControllingSsrc:r,remoteControlApprovedSsrc:i,isEnableAutoDeleteRcApp:l},meeting:{userId:f}}=n.value,{isMacOS:h}=bo;r&&BX(n.value,FC),i!==r&&FC.remoteControlConsent(DJ.Decline,i,f,{...S1.getShareStreamInfo(),platform:h?"mac":"win"},l)})),yi(Yn)),remoteControlEpics11:(e,n)=>oo(e,16430).pipe(Nt((()=>(FU(),pge(),He(jR,kJ.Launched),n.value.share.status!==qs.End&&(function(r,i){(async function(l){const{media:{assetsPath:f}}=l,h=`${f}/qrscanner.min.js`;return"WebQrscanner"in window?Promise.resolve(""):new Promise(((v,y)=>{FY.log(`load qr scanner script start. url:${h}`),lQ(h,(()=>{FY.log("load qr scanner script done."),v("")}),y)}))})(r).then((()=>{FY.log("qr scanning start"),i.startRemoteControlQRCheck(!0)}))})(n.value,S1),An([k1(""),oL(0)]))))),remoteControlEpics12:e=>bs(e,Cn.CurrentDesktopSharingWidthHeight).pipe(ao((()=>{FC.syncSharedContentMetaWithRcApp(S1.getShareStreamInfo())})),yi(Yn)),remoteControlEpics13:(e,n)=>bs(e,Cn.SendRemoteControlQrCode).pipe(ao((r=>{const{payload:{data:i}}=r,{share:{status:l}}=n.value;l!==qs.End&&Array.isArray(i)&&i.length>0&&i.forEach((f=>{f!=null&&f.startsWith("zrc_")&&FC.sendRemoteControlAuth(f)}))})),yi(Yn)),remoteControlEpics14:e=>oo(e,16434).pipe(ao((n=>{const{payload:{body:{result:r}}}=n;r===0&&(_Ne(),He(CY,Afe.Started))})),yi(Yn)),remoteControlEpics15:(e,n)=>oo(e,la).pipe(Gt((r=>{var i,l;const{meeting:{userId:f},share:{remoteControlledUserList:h}}=n.value,{payload:{body:v}}=r;return h.length>0&&(((i=v.update)===null||i===void 0?void 0:i.some((y=>y.id!==f&&y.bShareOn===!1)))||((l=v.remove)===null||l===void 0?void 0:l.some((y=>y.id!==f))))})),Nt((r=>{var i,l,f,h;const{payload:{body:v}}=r,{share:{remoteControlledUserList:y,activeNodeId:_,isGrabRemoteControl:A},meeting:{userId:R}}=n.value,k=((i=(l=v.update)===null||l===void 0?void 0:l.filter((L=>L.id!==R&&L.bShareOn===!1)))!==null&&i!==void 0?i:[]).concat((f=(h=v.remove)===null||h===void 0?void 0:h.filter((L=>L.id!==R)))!==null&&f!==void 0?f:[]),N=[];return y.forEach((L=>{k.find((B=>B.id===L))&&(N.push(dge(L)),L===_&&A&&(N.push(HY(!1)),He(w2,!1)))})),An(N)}))),remoteControlEpics16:(e,n)=>e.pipe(co(`${Qp}`),ao((()=>{const{share:{remoteControllingSsrc:r,status:i}}=n.value;i===qs.Sharing&&r&&He(CY,Afe.Ended)})),yi(Yn)),remoteControlEpics17:e=>e.pipe(co(`${Zbe}`),Gt((n=>!!n.payload)),mr((n=>{const{payload:r}=n,i=document.querySelector(r);return i&&typeof ResizeObserver=="function"?(function(...f){return new Hc((h=>{const v=new ResizeObserver((y=>{y.forEach((_=>{h.next(_)}))}));return f.forEach((y=>v.observe(y))),()=>v.disconnect()}))})(i).pipe(Au(vE(si(ZP).pipe(Gt((f=>!(f!=null&&f.isActive))),Ys(1)))),(l===void 0&&(l=nm),Xl((function(f,h){var v=null,y=null,_=null,A=function(){if(v){v.unsubscribe(),v=null;var k=y;y=null,h.next(k)}};function R(){var k=_+100,N=l.now();if(N<k)return v=this.schedule(void 0,k-N),void h.add(v);A()}f.subscribe(Al(h,(function(k){y=k,_=l.now(),v||(v=l.schedule(R,100),h.add(v))}),(function(){A(),h.complete()}),void 0,(function(){y=v=null})))}))),ao((f=>{const{target:h}=f;h&&S1.updateRemoteControlProperties({dimension:XJ(h)})})),Nt((()=>Yn))):Yn;var l})))},w8e={epics0:(e,n)=>oo(e,av).pipe(Gt((r=>{var i;return((i=r.payload.body)===null||i===void 0?void 0:i.lockShare)!==void 0})),_o(n),ao((([r,i])=>{const{share:{sharePrivilege:l}}=i,{payload:{body:{lockShare:f}}}=r;l!==f&&He(uxe,f)})),Kn((([r])=>Wbe(r.payload.body.lockShare)))),epics1:e=>oo(e,20227).pipe(Kn((n=>oNe(n.payload.body.ssrc)))),epics2:(e,n)=>oo(e,Ume).pipe(_o(n),Gt((([r,i])=>{const{payload:{body:l}}=r,{share:{isReceiveSharingFromMainSession:f}}=i;return!f||f&&l.fromMainSession})),Nt((([r,i])=>{const{share:{isReceiveSharing:l,activeNodeId:f,isReceiveSharingFromMainSession:h},meeting:{userId:v}}=i,{payload:{body:y}}=r,_=[];if(l&&y.bStatus===1){if(f!==v)if(n2(i))_.push(...hge(f,y.activeNodeID,y.ssrc,{state:i,rwgAgent:y1,mediaAgent:jp})),He(GJ,{userId:y.activeNodeID});else{const A={activeUserId:y.activeNodeID,isActive:!0};h&&Object.assign(A,{isFromMainSession:!0}),He(ZP,A)}}else if(y.bStatus===1){const A={activeUserId:y.activeNodeID,isActive:!0};h&&Object.assign(A,{isFromMainSession:!0}),He(ZP,A)}else if(l){const A={activeUserId:y.activeNodeID,isActive:!1};h&&Object.assign(A,{isFromMainSession:!0}),He(ZP,A)}return _.push(nL(y)),An(_)}))),epics3:(e,n)=>bs(e,[Cn.SharingDesktopStreamHaveAudio,Cn.SharingDesktopStreamHaveNoAudio]).pipe(Gt((r=>r.payload.type!==Cn.SharingDesktopStreamHaveAudio||!n.value.audio.secondaryAudioMicrophoneId)),_o(n),Kn((([r,i])=>{const{meeting:{userId:l},share:{isSharingToBreakoutRoom:f,isOptimizedForSharedVideo:h}}=i,{payload:{type:v}}=r,y=v===Cn.SharingDesktopStreamHaveAudio;return y1.startSharing(l,{bShareToBO:f,bShareAudio:y,bShareVideo:!!h}),jp.switchSharingMode(h?ZU.VideoMode:ZU.Normal),HEe(!1)}))),epics4:e=>bs(e,[Cn.DesktopSharingError,Cn.DesktopSharingChromeExtensionUninstalled,Cn.DesktopSharingPermissionDenied,Cn.DesktopSharingSystemError]).pipe(Nt((n=>{const r=[];let i="";return[Cn.DesktopSharingPermissionDenied,Cn.DesktopSharingSystemError].includes(n.payload.type)&&(r.push(HEe(!0)),n.payload.type===Cn.DesktopSharingSystemError?bo.isMacOS&&(i="To use screen share on Chrome, please allow screen recording access in system setting."):i="To use screen share, please allow the permission request."),He(txe,{reason:i}),An(r)}))),epics5:(e,n)=>bs(e,Cn.CurrentDesktopSharingWidthHeight).pipe(Gt((r=>!!r.payload.data)),Kn((r=>{He(nxe,{...r.payload.data,userId:n.value.meeting.userId});const{payload:{data:{width:i,height:l}}}=r;return jp.ajustmentSharingCanvas(i,l),Gbe(r.payload.data)}))),epics6:(e,n)=>bs(e,Cn.SharingDecodeMaxSize).pipe(Gt((r=>!!r.payload.data)),_o(n),d6((([r,i])=>{const{share:{shareQuality:l,activeNodeId:f,shareViewAttachments:h}}=i,{payload:{data:{fps:v}}}=r,y=Number(v);if(l!==y)return n2(i)?rL(y1,i,f,y):Object.entries(h).filter((([,_])=>_.length>0)).forEach((([_])=>{rL(y1,i,Number(_),y)})),qbe(y)}))),epics7:(e,n)=>oo(e,20226).pipe(ao((r=>{var i,l;if(He(WJ,(i=r.payload)===null||i===void 0?void 0:i.body),(l=r.payload)!==null&&l!==void 0&&l.body){const{payload:{body:{width:f,height:h}}}=r;n2(n.value)&&jp.ajustmentReceivedSharingCanvas(f,h)}})),Kn((r=>NX(r.payload.body)))),epics8:(e,n)=>bs(e,Cn.SharingPara).pipe(ao((r=>{var i,l;if(He(WJ,(i=r.payload.data)===null||i===void 0?void 0:i.body),(l=r.payload.data)!==null&&l!==void 0&&l.body){const{payload:{data:{body:{width:f,height:h}}}}=r;n2(n.value)&&jp.ajustmentReceivedSharingCanvas(f,h)}})),Kn((r=>{var i;return NX((i=r.payload.data)===null||i===void 0?void 0:i.body)}))),epics9:(e,n)=>bs(e,Cn.UserStopDesktopSharing).pipe(_o(n),Kn((([,r])=>{const{meeting:{userId:i},share:{status:l}}=r;return l!==qs.End&&(y1.stopSharing(i),jp.stopDesktopSharing(),He(oxe)),Yp(qs.End)}))),epics10:(e,n)=>oo(e,la).pipe(_o(n),Gt((([r,i])=>{const{meeting:{userId:l}}=i,f=r.payload.body.update;return f&&f.length>0&&f.findIndex((h=>h.id===l&&h.bShareOn!==void 0))>-1})),Nt((([r,i])=>{const{meeting:{userId:l},share:{status:f,isReceiveSharing:h,activeNodeId:v,isSimultaneousShareView:y}}=i,{payload:{body:{update:_}}}=r,A=_.find((N=>N.id===l&&N.bShareOn===!1)),R=_.find((N=>N.id===l&&N.bShareOn===!0)),k=[];return A&&f!==qs.End&&(y1.stopSharing(l),jp.stopDesktopSharing(),k.push(Yp(qs.End)),He(sxe)),R&&f===qs.End&&(h&&!y&&(jp.stopRenderSharing(),y1.unsubscribeSharing(v),k.push(BA(!1))),k.push(Yp(qs.Sharing))),An(k)}))),epics11:(e,n)=>oo(e,la).pipe(_o(n),Gt((([r,i])=>{const{meeting:{userId:l}}=i,f=r.payload.body.update;return f&&f.length>0&&f.findIndex((h=>h.id!==l&&h.bShareOn!==void 0))>-1})),Nt((([r,i])=>{const{payload:{body:{update:l}}}=r,{share:{activeNodeId:f,isReceiveSharing:h}}=i,v=eE(i),y=l.filter((R=>R.bShareOn===!0&&R.bSharePause===!1)),_=l.filter((R=>R.bShareOn===!0&&R.bSharePause===!0)),A=l.filter((R=>R.bShareOn===!1));return y.length>0&&y.forEach((R=>{v.findIndex((k=>k.userId===R.id))===-1?He(cbe,R):He(axe,R)})),_.length>0&&_.forEach((R=>{He(ixe,R)})),A.length>0&&(A.filter((R=>v.findIndex((k=>k.userId===R.id))>-1)).forEach((R=>{He(lbe,R)})),h&&A.some((R=>R.id===f)))?mf(oo(e,Ume).pipe(Ys(1),yi(Yn)),Uc(50).pipe(yi(ZA("timeout")))).pipe(tp((()=>{const{share:{activeNodeId:R},meeting:{userId:k}}=n.value,N=v.filter((B=>B.userId!==R&&B.userId!==k));if(N.length>0&&n2(n.value)){var L;const B=[],H=N[0],{userId:q}=H,Y=(L=YC(q,i))!==null&&L!==void 0?L:q;return B.push(...hge(R,q,Y,{state:i,rwgAgent:y1,mediaAgent:jp})),He(GJ,{userId:q}),B.push(nL({activeNodeID:q,bStatus:1,ssrc:Y})),An(B)}return Yn}))):Yn}))),epics12:(e,n)=>oo(e,Ibe).pipe(_o(n),mr((([r,i])=>{const{payload:{body:{encryptKey:l,additionalType:f}}}=r,{media:{sharingDecodeStatus:h,sharingEncodeStatus:v},meeting:{confId:y,userId:_,zoomId:A,meetingId:R,meetingNumber:k,isWebinar:N}}=i;return U2(n).pipe(mr((L=>{let B=v;return(!bo.isSupportSendScreenSharing||N&&L&&Ku(L.userRole))&&(B="failed"),Ad("sharing",B,h).pipe(ao((([H,q])=>{const Y={userId:_,sn:iv(A),confId:y,encryptKey:iv(l),encryptType:f,meetingId:R,meetingNumber:k};if(H&&(jp==null||jp.updateMediaParams({iVType:G0.SHARING_ENCODE,isFromMainSession:!1,updateParams:Y})),q){jp.updateMediaParams({iVType:G0.SHARING_DECODE,isFromMainSession:!1,updateParams:Y});const{participants:{attendeesList:K}}=n.value;if(K.length>0){const se=K.map((ie=>({userid:ie.userId,sn:ie.zoomID&&iv(ie.zoomID)})));jp.updateUserMediaSN({added:se,isFromMainSession:!1,iVType:G0.SHARING_DECODE})}}})),yi(Yn))})))}))),epics13:(e,n)=>q0(e,20235).pipe(_o(n),ao((([r,i])=>{const{media:{sharingDecodeStatus:l}}=i,{type:f,payload:{body:h}}=r,v=f===`${iE}`;Ad("sharing","success",l).subscribe((([,y])=>{y&&jp.addReceivedSharingChannelType({isFromMainSession:v,...h})}))})),yi(Yn)),epics14:(e,n)=>q0(e,20236).pipe(_o(n),ao((([r,i])=>{const{media:{sharingDecodeStatus:l}}=i,{type:f,payload:{body:{ssrc:h}}}=r,v=f===`${iE}`;Ad("sharing","success",l).subscribe((([,y])=>{y&&jp.removeReceivedSharingChannelType({isFromMainSession:v,ssrc:h})}))})),yi(Yn)),epics15:e=>bs(e,Cn.SharingFirstDecodeFrameReceivedSsrc).pipe(Gt((n=>!!n.payload.data)),ao((n=>{const{payload:{data:{ssrc:r}}}=n;y1.sendReceivingSharingReady(r)})),yi(Yn)),epics16:(e,n)=>oo(e,20233).pipe(Gt((()=>!!n.value.share.isRequireReadReceipt)),ao((r=>{const{payload:{body:{bReceiveOk:i}}}=r;i&&He(dxe)})),yi(Yn)),epics17:(e,n)=>oo(e,av).pipe(Gt((r=>{var i;return((i=r.payload.body)===null||i===void 0?void 0:i.lockShare)!==void 0})),Nt((r=>{const{payload:{body:{lockShare:i}}}=r,{share:{isOptimizedForSharedVideo:l,isSharingToBreakoutRoom:f},audio:{isSharingAudio:h},meeting:{userId:v}}=n.value,y=[];return i===sv.MultipleShare&&l&&(y1.startSharing(v,{bShareAudio:h,bShareToBO:f,bShareVideo:!1}),jp.switchSharingMode(ZU.Normal),y.push(PX(!1))),An(y)}))),epics18:(e,n)=>bs(e,Cn.ShareQosData).pipe(_o(n),Kn((([r,i])=>{var l,f;const{meeting:{isWebinar:h},media:{sharingEncodeStatus:v,sharingDecodeStatus:y},share:{status:_,isReceiveSharing:A},participants:{xmppAttendeeList:R}}=i;let k=pbe(i).length>0;h&&(k=k||!!R.length);const N=_!==qs.End&&v==="success"&&(k||((l=i.recording)===null||l===void 0?void 0:l.cmrStatus)===Cl.Start),L=A&&y==="success";return(f=r.payload.data)!==null&&f!==void 0&&f.encoding?N?(He($he,r.payload),uge(r.payload)):uge(MA):L?(He($he,r.payload),F5(r.payload)):F5(MA)})))},A8e=nh(w8e,_8e,E8e),{setQaSetting:SWe,addQaQuestion:CWe,addQaAnswer:EWe,removeQaComment:_We,removeQaQuestion:wWe,dismissQaQuestion:AWe,reopenQaQuestion:TWe,voteQaQuestion:OWe,answerQaQuestionLive:IWe,updateAttendeeAnonymousQuestion:RWe,setQaEnabled:xWe,resetQa:T8e}=Ql("SET_QA_SETTING","ADD_QA_QUESTION","ADD_QA_ANSWER","REMOVE_QA_COMMENT","REMOVE_QA_QUESTION","DISMISS_QA_QUESTION","REOPEN_QA_QUESTION","VOTE_QA_QUESTION","ANSWER_QA_QUESTION_LIVE","UPDATE_ATTENDEE_ANONYMOUS_QUESTION","SET_QA_ENABLED","RESET_QA"),{setChatPrivilege:Ybe,setPanelistChatPrivilege:ONe,addChatMessageHistory:$5,resetChat:INe,setIsAllowAttendeeChat:RNe,setLatestChatMessageId:xNe,removeChatMessage:$Y,setFileChatSetting:DNe,addChatFileRecord:Jbe,updateChatFileRecord:wd,cancelSendFileChat:U5,addFailedChatFileTransfer:Xbe,setChatFileMessageId:kNe,cancelDownloadFileChat:Qbe}=Ql("SET_CHAT_PRIVILEGE","SET_PANELIST_CHAT_PRIVILEGE","ADD_CHAT_MESSAGE_HISTORY","RESET_CHAT","SET_IS_ALLOW_ATTENDEE_CHAT","SET_LATEST_CHAT_MESSAGE_ID","REMOVE_CHAT_MESSAGE","SET_FILE_CHAT_SETTING","ADD_CHAT_FILE_RECORD","UPDATE_CHAT_FILE_RECORD","CANCEL_SEND_FILE_CHAT","ADD_FAILED_CHAT_FILE_TRANSFER","SET_CHAT_FILE_MESSAGE_ID","CANCEL_DOWNLOAD_FILE_CHAT"),{setProcessorCreateInfo:MNe,addProcessorInstance:NNe,removeProcessorInstance:PNe,resetProcessor:LNe}=Ql("SET_PROCESSOR_CREATE_INFO","ADD_PROCESSOR_INSTANCE","REMOVE_PROCESSOR_INSTANCE","RESET_PROCESSOR"),{setCcEditorInfo:BNe,setTempSendCcText:DWe,setCcLtMessage:kWe,setTempReceiveLtText:MWe,setTempReceiveCcText:NWe,setGatewayInfoList:PWe,setLtEnable:LWe,setIsListenClosedCaption:BWe,setCcEnable:VWe,allowParticipantAskLt:HWe,receiveAskStartLt:FWe,setMeetingEnabledLtFeature:$We,updateLtStatus:UWe,deleteMessage:jWe,updateMessage:zWe,resetClosedCaption:O8e}=Ql("SET_CC_EDITOR_INFO","SET_CC_LT_MESSAGE","SET_TEMP_SEND_CC_TEXT","SET_TEMP_RECEIVE_LT_TEXT","SET_TEMP_RECEIVE_CC_TEXT","SET_GATEWAY_INFO_LIST","SET_LT_ENABLE","SET_IS_LISTEN_CLOSED_CAPTION","SET_CC_ENABLE","ALLOW_PARTICIPANT_ASK_LT","RECEIVE_ASK_START_LT","SET_MEETING_ENABLED_LT_FEATURE","UPDATE_LT_STATUS","DELETE_MESSAGE","UPDATE_MESSAGE","RESET_CLOSED_CAPTION"),{addBreakoutRooms:VNe,setBreakoutRoomAllocationPattern:mge,setBreakoutRoomSequenceId:VX,setMeetingElapsedTime:gge,setStartRoomElapsedTime:HNe,setBreakoutRoomOptions:FNe,setBreakoutRoomControlStatus:$Ne,setBreakoutRooms:u5,setCurrentBreakoutRoom:HX,setBreakoutRoomAttendeeStatus:x2,setBreakoutRoomConfId:vge,setBreakoutRoomToken:bge,resetBreakoutRoom:UNe,setBreakoutRoomClosingRoomTime:yge,setBreakoutRoomBroadcastMessage:jNe,setBreakoutRoomHostReplyType:e0e,setBreakoutRoomHostReplyRequestId:zNe,setMainSessionAttendeeList:WNe,setIsHugeBreakoutRoom:GNe,setBreakoutRoomPreAssignedRoomList:Sge,setBreakoutRoomUserRoleUpdated:Cge,setBreakoutRoomMeetingOptions:qNe,setBreakoutRoomUserActivityStatus:KNe,setBreakoutRoomIsBroadcastVoice:FX}=Ql("ADD_BREAKOUT_ROOMS","SET_BREAKOUT_ROOM_ALLOCATION_PATTERN","SET_BREAKOUT_ROOM_SEQUENCE_ID","SET_MEETING_ELAPSED_TIME","SET_START_ROOM_ELAPSED_TIME","SET_BREAKOUT_ROOM_OPTIONS","SET_BREAKOUT_ROOM_CONTROL_STATUS","SET_BREAKOUT_ROOMS","SET_CURRENT_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_ATTENDEE_STATUS","SET_BREAKOUT_ROOM_CONF_ID","SET_BREAKOUT_ROOM_TOKEN","RESET_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_CLOSING_ROOM_TIME","SET_BREAKOUT_ROOM_BROADCAST_MESSAGE","SET_BREAKOUT_ROOM_HOST_REPLY_TYPE","SET_BREAKOUT_ROOM_HOST_REPLY_REQUEST_ID","SET_MAIN_SESSION_ATTENDEE_LIST","SET_IS_HUGE_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_PRE_ASSIGNED_ROOM_LIST","SET_BREAKOUT_ROOM_USER_ROLE_UPDATED","SET_BREAKOUT_ROOM_MEETING_OPTIONS","SET_BREAKOUT_ROOM_USER_ACTIVITY_STATUS","SET_BREAKOUT_ROOM_IS_BROADCAST_VOICE"),{setCloudRecordingStatus:ZNe,setCloudRecordingEnable:YNe,setCloudIsoRecordingEnable:JNe,setAllowStopAutoRecording:XNe,setAutomaticCloudRecordingEnable:QNe,setIsZoomIQ:t0e,setZoomIQChanging:n0e,setLocalRecordStatus:o0e,setSupportLocalRecording:Ege,setLocalGrantPermissionOption:ePe,setLocalPermissionUserList:iL,resetRecording:tPe}=Ql("SET_CLOUD_RECORDING_STATUS","SET_CLOUD_RECORDING_ENABLE","SET_CLOUD_ISO_RECORDING_ENABLE","SET_ALLOW_STOP_AUTO_RECORDING","SET_AUTOMATIC_CLOUD_RECORDING_ENABLE","SET_IS_ZOOM_I_Q","SET_ZOOM_I_Q_CHANGING","SET_LOCAL_RECORD_STATUS","SET_SUPPORT_LOCAL_RECORDING","SET_LOCAL_GRANT_PERMISSION_OPTION","SET_LOCAL_PERMISSION_USER_LIST","RESET_RECORDING"),{updateCmdJid:nPe,removeCmdJid:oPe,setCmdChannelConnectionStatus:sPe,resetCmdChannel:rPe}=Ql("UPDATE_CMD_JID","REMOVE_CMD_JID","SET_CMD_CHANNEL_CONNECTION_STATUS","RESET_CMD_CHANNEL"),I8e="SET_ARCHIVING_STATUS",R8e="SET_ARCHIVING_SESSION_READY",x8e="SET_ARCHIVING_OPTIONS",D8e="RESET_ARCHIVING",{setArchivingStatus:WWe,setArchivingSessionReady:GWe,setArchivingOptions:qWe,resetArchiving:k8e}=Ql({[I8e]:e=>e,[R8e]:e=>e,[x8e]:e=>e,[D8e]:()=>{}}),{setIsLiveTranscriptionEnabled:iPe,setLiveTranscriptionMeetingOptions:aPe,setIsLiveTranscriptionManualCaptionerEnabled:_ge,setLiveTranscriptionGatewayId:cPe,setLiveTranscriptionSupportedLanguage:lPe,setIsLiveTranscriptionSubscribed:wge,setCurrentTranscriptionLang:IA,setCurrentTranslationLang:$X,addLiveTranscriptionMessage:Age,updateLiveTranscriptionMessage:uPe,reduceLiveTranscriptionMessages:dPe,setLiveTranscriptionEngineType:fPe,removeLiveTranscriptionFailoverState:pPe,setLiveTranscriptionLastCaptionMessage:hPe,resetLiveTranscription:mPe,setIsHostDisableCaptions:gPe,setIsSomeoneSetSessionTranscription:vPe,setIsSomeoneTranslating:bPe,setIsTranscriptionLanguageLocked:yPe,setIsExternalCaptionerCaptioning:SPe,setExternalCcUrl:CPe,setTranscriptionMode:EPe}=Ql("SET_IS_LIVE_TRANSCRIPTION_ENABLED","SET_LIVE_TRANSCRIPTION_MEETING_OPTIONS","SET_IS_LIVE_TRANSCRIPTION_MANUAL_CAPTIONER_ENABLED","SET_LIVE_TRANSCRIPTION_GATEWAY_ID","SET_LIVE_TRANSCRIPTION_SUPPORTED_LANGUAGE","SET_IS_LIVE_TRANSCRIPTION_SUBSCRIBED","SET_CURRENT_TRANSCRIPTION_LANG","SET_CURRENT_TRANSLATION_LANG","ADD_LIVE_TRANSCRIPTION_MESSAGE","UPDATE_LIVE_TRANSCRIPTION_MESSAGE","REDUCE_LIVE_TRANSCRIPTION_MESSAGES","SET_LIVE_TRANSCRIPTION_ENGINE_TYPE","REMOVE_LIVE_TRANSCRIPTION_FAILOVER_STATE","SET_LIVE_TRANSCRIPTION_LAST_CAPTION_MESSAGE","RESET_LIVE_TRANSCRIPTION"," SET_IS_HOST_DISABLE_CAPTIONS","SET_IS_SOMEONE_SET_SESSION_TRANSCRIPTION","SET_IS_SOMEONE_TRANSLATING","SET_IS_TRANSCRIPTION_LANGUAGE_LOCKED","SET_IS_EXTERNAL_CAPTIONER_CAPTIONING","SET_EXTERNAL_CC_URL","SET_TRANSCRIPTION_MODE"),{setPollData:KWe,setPollingId:ZWe,setPollingWebLinks:YWe,setPollingDocMaxSize:JWe,setPollingDocSize:XWe,setPollingDocLibraryMaxSize:QWe,setPollingDocLibrarySize:e9e,setIsRwgEnablePolling:t9e,setHasPollingInMeeting:n9e,resetPoll:M8e}=Ql("SET_POLL_DATA","SET_POLLING_ID","SET_POLLING_WEB_LINKS","SET_POLLING_DOC_MAX_SIZE","SET_POLLING_DOC_SIZE","SET_POLLING_DOC_LIBRARY_MAX_SIZE","SET_POLLING_DOC_LIBRARY_SIZE","SET_IS_RWG_ENABLE_POLLING","SET_HAS_POLLING_IN_MEETING","RESET_POLL"),{setLoggerInitOptions:s0e,setIsLaplaceInitialized:UX,setIsLogDetailed:_Pe,resetLogger:wPe}=Ql("SET_LOGGER_INIT_OPTIONS","SET_IS_LAPLACE_INITIALIZED","SET_IS_LOG_DETAILED","RESET_LOGGER"),{setIsLiveStreamEnable:APe,setLiveStreamStatus:jX,setLiveStreamChannel:TPe,resetLiveStream:OPe}=Ql("SET_IS_LIVE_STREAM_ENABLE","SET_LIVE_STREAM_STATUS","SET_LIVE_STREAM_CHANNEL","RESET_LIVE_STREAM"),{setBroadcastStreamingUtk:IPe,setBroadcastStreamingChannelId:j5,setBroadcastStreamingStatus:Tge,setBroadcastStreamingEnable:RPe,resetBroadcastStreaming:xPe}=Ql("SET_BROADCAST_STREAMING_UTK","SET_BROADCAST_STREAMING_CHANNEL_ID","SET_BROADCAST_STREAMING_STATUS","SET_BROADCAST_STREAMING_ENABLE","RESET_BROADCAST_STREAMING"),KEe=(e,n,r,i,l,f,h)=>{const v={ts:i,auth:l,rwcToken:r,dmz:1,option:h};return f&&Object.assign(v,{confID:f}),`https://${e}/wc/ping/${n}?${new URLSearchParams(v).toString()}`},BP=(e,n=!1)=>{const{socket:{zoomSocketStatus:r,xmppSocketStatus:i,mainSessionSocketStatus:l},meeting:{meetingStatus:f}}=e,h=[];if(f===Tu.Joined){var v;const y=Yo.getInstance(),_=zr.createAgent();if(((v=Do(e))===null||v===void 0?void 0:v.audio)===Ur.Computer&&y.leaveComputerAudio(),y.disconnect(),rme.watch(y.destroy()),e.video&&(e.video.subscribedVideoList.length>0&&e.video.subscribedVideoList.forEach((A=>{y.unsubscribeVideo(A)})),e.video.isCurrentUserStartedVideo&&He(qP)),e.share&&e.share.isReceiveSharing){const A=e.share.activeNodeId;e.share.remoteControlledUserList.length>0&&e.share.remoteControlledUserList.forEach((R=>{_.sharingRequestRemoteControl(R,!1)})),_.unsubscribeSharing(A)}qp.destroyInstance()}if(n||(rr.clearSession(),[Bi.WebclientTk,Bi.WebclientZsk,Bi.WebclientZtk,Bi.WebclientRecordingToken].forEach((y=>{sessionStorage.removeItem(y)})),xd.destroy()),r!==wi.Closed&&h.push(lv()),i!==wi.Closed&&h.push(Mme()),l!==wi.Closed&&h.push(jke()),n){const y=Do(e);h.push(Ime({audio:y==null?void 0:y.audio,muted:y==null?void 0:y.muted,video:y==null?void 0:y.bVideoOn,isFailover:n}))}else h.push(Ime({audio:!1,muted:void 0,video:!1,isFailover:n}));return h.push(Wke(),Yke(),Qke(),zMe(n),vNe(),SDe(n),T8e(),INe(),LNe(),tPe(),O8e(),UNe(),rPe(),k8e(),mPe(n),M8e(),wPe(n),OPe(n),xPe(n),Abe(Tu.Closed)),h},GZ=(e,...n)=>Cs({event:Y0,operations:[Kn((r=>r.find((i=>i.userId===e.userId&&(!e.key||i[`${e.key}`]!==void 0))))),Gt((r=>!!r)),Ys(1)]},...n),N8e={[`${SA.AudioDecodeInWorklet}`]:{mask:15,action:Kke},[`${SA.VideoHalfWebRTCEnable}`]:[{mask:null,action:kDe}],[`${SA.WebGL2Render}`]:{mask:15,action:MDe},[`${SA.WebGPURender}`]:{mask:15,action:NDe},[`${SA.ZMKFromRWG}`]:{mask:15,action:Fke}};function P8e(e){if(!e)return"";const n=e.match(/rid=(.*)/);return n?n[1]:""}const L8e=["userId","displayName","audio","isHost","avatar","bRaiseHand","bHold","bVideoOn","sharerOn","sharerPause","feedback","bLocalRecord","strPronoun","sdkKey","audioConnectionStatus","caps","bAllowISORecord","bVideoConnect","userIdentity","isSpeakerOnly","bVideoShare","bShareAudioOn","bShareToBORooms","bid",{from:"bInFailover",to:"isInFailover"},{from:"userGUID",to:"userGuid"},{from:"bGuest",to:"isGuest"},{from:"sharerPause",to:"sharePause"},{from:"bCoHost",to:e=>({isCoHost:!!e})},{from:"muted",to:(e,n)=>({muted:n!=null&&n.isSpeakerOnly||(n==null?void 0:n.audio)===""?void 0:e})},{from:"userType",to:(e,n)=>{const r=$2(e),i={isPhoneUser:r};return r&&n!=null&&n.phoneNumber&&Object.assign(i,{phoneNumber:n.phoneNumber}),i}}];function D2(e){return L8e.reduce(((n,r)=>{const i=typeof r=="string"?r:r.from,l=(function(f,h,v){if(typeof f=="string")return{[`${f}`]:h};if(typeof f=="object"&&f.from!==void 0){const{to:y}=f;return typeof y=="string"?{[`${y}`]:h}:y(h,v)}})(r,e[i],e);return{...n,...l}}),{})}const r0e=({breakoutRoom:{mainSessionAttendeeList:e}})=>e,DPe=({meeting:{zoomId:e}})=>e,kPe=({breakoutRoom:{isHugeBO:e}})=>e,eh=va([({breakoutRoom:{controlStatus:e}})=>e,({breakoutRoom:{currentRoom:{status:e}}})=>e,({breakoutRoom:{currentRoom:{boId:e}}})=>e],((e,n,r)=>!(e!==cr.InProgress&&e!==cr.Closing||n!==vs.InRoom&&n!==vs.TimeUp||!r))),upe=va([({breakoutRoom:{rooms:e}})=>e,yE,DPe,r0e,eh,kPe],((e,n,r,i,l,f)=>{const h=e.reduce(((v,y)=>{const{attendeeGuidList:_}=y;return v.concat(_)}),[]);return(l?i:n).filter((v=>!v.bHold&&!v.isHost&&v.zoomID!==r&&!v.bid&&!h.includes(v.userGUID)&&(!f||TMe(v.caps))))})),B8e=va([eh,r0e,yE,DPe,kPe],((e,n,r,i,l)=>(e?n:r).filter((f=>!f.bHold&&!f.isHost&&f.zoomID!==i&&!f.bid&&(!l||TMe(f.caps)))))),MR=va([eh,r0e,yE],((e,n,r)=>e?n.find((i=>i.isHost)):r.find((i=>i.isHost))));var ZEe,YEe,JEe,ju;const NR=zr.createAgent();let V8e=(ZEe=Yfe(OA.Other),YEe=Yfe(OA.Other),JEe=Yfe(OA.Other),ju=class extends Q0{constructor(e){super(e),this.modules=void 0,this.useSDK=void 0,this.useSDK=!1,this.modules=new Map}initWithSDK(e,n,r){return this.useSDK=!0,this.init(e,n,r)}init(e,n,r){const{audio:i,video:l}=jRe();if(!i||!l)return console.error("https://developers.zoom.us/docs/video-sdk/web/browser-support"),Promise.reject({type:Lt,errorCode:Fe.CLIENT_PLATFORM_UNSUPPORTED,reason:"Please update to the latest Chrome, Edge, Safari, or Firefox, as your current browser doesn't support audio/video. Retry after the upgrade."});const{[Ja]:f,[Ia]:h}=this;let v=JR,y="en-US",_=`${JR}/${XR}`;if(r){const{dependentAssets:A,additionalFeatures:R,constraints:k,language:N,webEndpoint:L}=r;N&&(y=N),L&&(function(B){dQ=FRe(B,{hostname:!0})})(L),A===Dfe.CDN||A===fY?(v=fY,_=`${fY}/${XR}`):A===Dfe.Global||A===JR?(v=JR,_=`${JR}/${XR}`):A===Dfe.CN||A===pY?(v=pY,_=`${pY}/${XR}`):A&&/^https?:\/\//.test(A)&&(v=bQ(A),_=`${v}/${XR}`),R&&Array.isArray(R)&&R.forEach((B=>{if(this[IJ][B]&&h.getState()[B]===void 0){const{epic:H,reducer:q,Client:Y}=this[IJ][B];h.injectReducer(B,q),h.injectEpic(H);const K=new Y(h);this.modules.set(B,K)}})),k!=null&&k.audio&&h.getState().audio===void 0&&(h.injectReducer("audio",i8e),h.injectEpic(l8e)),k!=null&&k.video&&h.getState().video===void 0&&(h.injectReducer("video",f8e),h.injectEpic(g8e)),k!=null&&k.screen&&h.getState().share===void 0&&(h.injectReducer("share",C8e),h.injectEpic(A8e))}return f(wke({apiKey:e,signature:n,language:y,useSDK:this.useSDK})),f(Obe({mediaConstraints:r&&r.constraints||{},assetsPath:v,enforceMultipleVideos:r==null?void 0:r.enforceMultipleVideos,enforceVirtualBackground:r==null?void 0:r.enforceVirtualBackground,skipJsMedia:r==null?void 0:r.skipJsMedia,patchJsMedia:r==null?void 0:r.patchJsMedia,alternativeNameForVideoPlayer:r==null?void 0:r.alternativeNameForVideoPlayer})),(r==null?void 0:r.stayAwake)!==void 0&&f(Pke(r.stayAwake)),(r==null?void 0:r.quicklyLeaveMeeting)!==void 0&&f(Vke(r.quicklyLeaveMeeting)),(r==null?void 0:r.isUIToolkit)!==void 0&&f(_ke(r.isUIToolkit)),(r==null?void 0:r.isLogDetailed)!==void 0&&f(_Pe(!!r.isLogDetailed)),new Promise(((A,R)=>{r!=null&&r.skipJsMedia?A(""):lQ(_,(()=>{var k;(k=window.JsMediaSDK_Instance)!==null&&k!==void 0&&(k=k.util)!==null&&k!==void 0&&k.initAsyncJob?window.JsMediaSDK_Instance.util.initAsyncJob().then((()=>A(""))):A("")}),(()=>{R({type:gs,reason:"dependent assets are not accessible",errorCode:Fe.CLIENT_DEPENDENT_ASSETS_INACCESSIBLE})}))}))}on(e,n){((r,i)=>{const l=OSe[r];if(l){const f=zR.get(r);if(f)f.push(i),zR.set(r,f);else{const h=[i];zR.set(r,h);const v=wl(...l.map((y=>{const{event:_,payload:A}=y;return Jl(t5,_).pipe(Kn((R=>A(R))),al(mE))}))).subscribe((y=>{const _=zR.get(r);_&&_.forEach((A=>{A(y)}))}));Jhe.push(v)}}})(e,n)}off(e,n){((r,i)=>{if(OSe[r]){const l=zR.get(r);if(Array.isArray(l)){const f=l.filter((h=>h!==i));zR.set(r,f)}}})(e,n)}getFeatureModule(e){return this.modules.get(e)}leave(){const{[go]:e,[Ja]:n}=this,{socket:{zoomSocketStatus:r},meeting:{meetingInfoTimestamp:i,zlkJwtToken:l}}=e();return r===wi.Connected||r===wi.Connecting?n(z2()):(i&&n(z2()),l||n(Ome())),Ra(Uc(500).pipe(V2("")))}end(){const{[go]:e,[Ja]:n}=this;return e().socket.zoomSocketStatus==="connected"?(n(kL()),Ra(Uc(500).pipe(ao((()=>{fbe()})),V2("")))):Promise.resolve("")}changeName(e,n){const r=this[Ia].getState(),{meeting:{bAllowAttendeeRename:i}}=r,l=Do(r),f=Ku(l.userRole),h=Qh(r);if(f)return Promise.reject({type:hf,errorCode:Fe.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED});if(n&&n!==(l==null?void 0:l.userId)){if(h){const{participants:{attendeesList:v}}=r,y=v.find((_=>_.userId===n));if(y)return NR.rename(n,Vc(e),Vc(y.displayName)),GZ({userId:n,key:"displayName"},(_=>_.displayName===e));{const _=c6(r).find((A=>A.userId===n));if(_){const A=Q2.getInstance();return NR.rename(_.userId,Vc(e),Vc(_.displayName)),A.rename(_.jid,e),Cs(yA,(R=>{const k=R.find((N=>N.jid===_.jid));return k&&k.displayName===e}))}return Promise.reject({type:gs,reason:"no matching user",errorCode:Fe.CLIENT_MISMATCH_USER})}}return Promise.reject({type:hf,errorCode:Fe.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED})}return e===l.displayName?Promise.resolve():h||i?(NR.rename(l.userId,Vc(e),Vc(l.displayName)),Cs(uf,(v=>v.displayName===e))):Promise.reject({type:hf,reason:"host disallow rename themselves",errorCode:Fe.CLIENT_HOST_DISALLOW_RENAME})}makeHost(e){return NR.assignHost(e,!1),GZ({userId:e,key:"isHost"},(n=>n.isHost===!0))}makeCoHost(e){const n=this[Ia].getState(),r=Ai(n).find((i=>i.userId===e));return(r==null?void 0:r.bCoHost)===!0?Promise.reject({type:gs,reason:`user:[${e}] is already co-host `,errorCode:Fe.CLIENT_MISMATCH_USER}):(NR.assignHost(e,!0),GZ({userId:e,key:"bCoHost"},(i=>i.bCoHost===!0)))}revokeCoHost(e){const n=this[Ia].getState(),r=Ai(n).find((i=>i.userId===e));return(r==null?void 0:r.bCoHost)===!1?Promise.reject({type:gs,reason:`user:[${e}] is not a co-host`,errorCode:Fe.CLIENT_MISMATCH_USER}):(NR.revokeCoHost(e),GZ({userId:e,key:"bCoHost"},(i=>i.bCoHost===!1)))}reclaimHost(){const e=this[go](),{meeting:{isOriginHost:n}}=e,r=Do(e);return r!=null&&r.isHost?Promise.resolve(""):n?(NR.reclaimHost(r.userId,!1),Cs(uf,(i=>i.isHost===!0))):Promise.reject({type:hf,reason:"Only orignial host can reclaim host",errorCode:Fe.CLIENT_MISMATCH_USER})}isHost(){const e=this[Ia].getState(),n=Do(e);return!!n&&n.isHost}isCoHost(){const e=this[Ia].getState(),n=Do(e);return!!n&&!!n.bCoHost}isOriginHost(){const{meeting:{isOriginHost:e}}=this[go]();return e}getCurrentUserInfo(){const e=this[Ia].getState(),n=Do(e);if(n){const r=D2(n);if(e.meeting.isWebinar&&Ku(n.userRole)){const{audio:i}=e,l=i==null?void 0:i.isAllowToTalk;Object.assign(r,{isAllowToTalk:l})}if(e.breakoutRoom&&eh(e)){const{breakoutRoom:{currentRoom:{boId:i}}}=e;Object.assign(r,{bid:i})}return r}return null}getParticipantsList(){const e=this[Ia].getState(),{meeting:{meetingStatus:n}}=e,r=Do(e);if(n===Tu.Joined&&r&&!r.bHold){var i;const l=e.breakoutRoom&&eh(e)?(i=e.breakoutRoom)===null||i===void 0||(i=i.currentRoom)===null||i===void 0?void 0:i.boId:"";return Ai(e).map((f=>{const h=D2(f);return l&&Object.assign(h,{bid:l}),h}))}return[]}getAssistantsList(){const e=this[Ia].getState(),{meeting:{meetingStatus:n}}=e,r=Do(e);return n===Tu.Joined&&r?O$e(e).map((i=>({userId:i.userId,displayName:i.displayName,isNewAst:!0}))):[]}getMeetingHost(){var e;const n=this[go]();let r=tme(n);return r||((e=n.breakoutRoom)===null||e===void 0?void 0:e.currentRoom.status)!==vs.InRoom||(r=n.breakoutRoom.mainSessionAttendeeList.find((i=>i.isHost))),r!==void 0?D2(r):null}getMeetingInfo(){const{meeting:{meetingStatus:e,isOnHold:n,meetingNumber:r,passWord:i,userName:l,userEmail:f,meetingTopic:h,meetingOptions:v,encType:y,region:_,network:A,topic:R,zlkJwtToken:k,userId:N,lang:L,inviteEmail:B,meetingId:H,participantID:q,h323Password:Y,recordingDisclaimer:K,recordingDisclaimerForRecorder:se,wrInfo:ie,meetingInfo:le,isNewJoinFlow:M,chatModerationPolicy:we}}=this[go](),Ne=e===Tu.Joined&&!n;if(k)return{topic:R,password:i,userName:l,isInMeeting:Ne,userId:N,meetingId:H};{let De="";return y===0?De="None":y===1?De="AES ECB":y===2&&(De="AES GCM"),{meetingNumber:r,password:i,userName:l,userEmail:f,inviteEmail:B,meetingTopic:h,encryptionType:De,region:_,network:A,isInMeeting:Ne,userId:N,lang:L,webEndpoint:E5(),meetingId:H,participantId:q,telPwd:Y,recordingInfo:{recordingDisclaimer:K,recordingDisclaimerForRecorder:se,isUserEnableRecordingReminder:v==null?void 0:v.isUserEnableRecordingReminder},wrInfo:Object.assign({},ie,{isNew:M}),scheduleInfo:le,chatModerationPolicy:we}}}},fn(ju.prototype,"end",[El,hn],Object.getOwnPropertyDescriptor(ju.prototype,"end"),ju.prototype),fn(ju.prototype,"changeName",[hn],Object.getOwnPropertyDescriptor(ju.prototype,"changeName"),ju.prototype),fn(ju.prototype,"makeHost",[ZEe,El,hn],Object.getOwnPropertyDescriptor(ju.prototype,"makeHost"),ju.prototype),fn(ju.prototype,"makeCoHost",[YEe,El,hn],Object.getOwnPropertyDescriptor(ju.prototype,"makeCoHost"),ju.prototype),fn(ju.prototype,"revokeCoHost",[JEe,El,hn],Object.getOwnPropertyDescriptor(ju.prototype,"revokeCoHost"),ju.prototype),fn(ju.prototype,"reclaimHost",[hn],Object.getOwnPropertyDescriptor(ju.prototype,"reclaimHost"),ju.prototype),ju);const H8e=zr.createAgent(),F8e=Q2.getInstance(),XEe=(e,n,r)=>{const i=n==null?void 0:n.userId;if(e==null||!e.zoomID||n==null||!n.displayName||i===e.userId)return{type:gs,reason:"invalid target user",errorCode:Fe.CHAT_MISMATCH_USER};const{chat:{chatPrivilege:l,panelistChatPrivilege:f},meeting:{isWebinar:h}}=r,v=Qh(r),y=n.isHost||n.bCoHost;let _=!1;if(!v){if(h)if(Ku(e.userRole))(l===gc.NoAttendee||l===gc.AllPanelist&&i!==ma.Panelist||l===gc.All&&i!==ma.All&&i!==ma.Panelist)&&(_=!0);else{const A=Ku(n==null?void 0:n.userRole);(f===W2.Invalid||f===W2.AllPanelist&&(A||i===ma.All))&&(_=!0)}else(l===gc.NoAttendee||l===gc.Host&&!y||i===ma.SilentModeUsers||l===gc.EveryonePublicly&&i!==ma.All&&!y)&&(_=!0);if(_)return{type:hf,reason:"Insufficient chat privilege",errorCode:Fe.CHAT_INSUFFICIENT_PRIVILEGE}}return null};function QEe(e,n){if(n===ma.All)return VU;if(n===ma.Panelist)return LP;if(n===ma.SilentModeUsers)return e8e;{const{meeting:{isWebinar:r},participants:{xmppAttendeeList:i,attendeesList:l}}=e;return r?l.find((f=>f.userId===n))||i.find((f=>f.userId===n)):l.find((f=>f.userId===n))}}function yU(e,n,r){if(r!=null&&r.host)return[tme(e),...MSe(e)].filter((i=>(i==null?void 0:i.userId)!==n)).map((i=>({userId:i==null?void 0:i.userId,displayName:i==null?void 0:i.displayName,isHost:i==null?void 0:i.isHost,isCoHost:i==null?void 0:i.bCoHost})));{let i=[tme(e),...MSe(e),...e.participants.attendeesList.filter((l=>!(l.bCoHost||l.isHost||l.bHold)))];if(r!=null&&r.includeAttendee){const l=c6(e).filter((f=>!$2(f.userType)));i=[...i,...l]}return i.filter((l=>l!==void 0&&l.userId!==n)).map((l=>({userId:l==null?void 0:l.userId,displayName:l==null?void 0:l.displayName,isHost:l==null?void 0:l.isHost,isCoHost:l==null?void 0:l.bCoHost})))}}function VP(e,n){const{chat:{chatHistory:r}}=n;return r.find((i=>{var l;return((l=i.file)===null||l===void 0||(l=l.upload)===null||l===void 0?void 0:l.uniqueId)===e}))}function MPe(e,n){const{meeting:{isWebinar:r},participants:{attendeesList:i}}=n,{destNodeID:l,senderName:f,attendeeNodeID:h}=e,v=i.find((k=>k.userId===l)),y=e.sn?e.sn:v==null?void 0:v.zoomID,_=f?hb(f):v==null?void 0:v.displayName;let A,R="";if(h===ma.SilentModeUsers)return{sender:{name:"Host",userId:l},receiver:{name:"Everyone (in Waiting Room)",userId:h},timestamp:new Date().getTime()};if(h===ma.All)R=r?"All panelists and attendees":"Everyone";else if(h===ma.Panelist)R="All panelists";else{if(r){const k=c6(n).find((N=>N.userId===h));k&&(R=k.displayName)}if(!R){const k=i.find((N=>N.userId===h));k&&(R=k.displayName,A=k.userGUID)}}return{sn:y,sender:{name:_,userId:l,userGuid:v==null?void 0:v.userGUID,avatar:v==null?void 0:v.avatar},receiver:{name:R,userId:h,userGuid:A},timestamp:new Date().getTime()}}function $8e(e){var n;const[r]=e.split(".").reverse();return(n=n8e[r])!==null&&n!==void 0?n:""}function NPe(e,n){const r=[];for(let i=e.length-1;i>=0;i--){const l=e[i];if(!l.file&&(!l.id&&l.sender.userId===n.userId&&[ma.All,ma.Panelist,ma.IndividualCcPanelist,n.destNodeID].includes(l.receiver.userId)&&r.unshift(l),l.id))break}return r.length>0?r[0]:null}function PPe(e){switch(e.responseType){case"json":if("response"in e)return e.response;var n=e;return JSON.parse(n.responseText);case"document":return e.responseXML;default:return"response"in e?e.response:(n=e).responseText}}var U8e=function(e,n,r,i){i===void 0&&(i="download_load"),this.originalEvent=e,this.xhr=n,this.request=r,this.type=i;var l=n.status,f=n.responseType;this.status=l??0,this.responseType=f??"";var h=n.getAllResponseHeaders();this.responseHeaders=h?h.split(`
`).reduce((function(_,A){var R=A.indexOf(": ");return _[A.slice(0,R)]=A.slice(R+2),_}),{}):{},this.response=PPe(n);var v=e.loaded,y=e.total;this.loaded=v,this.total=y},zX=s6((function(e){return function(n,r,i){var l;this.message=n,this.name="AjaxError",this.xhr=r,this.request=i,this.status=r.status,this.responseType=r.responseType;try{l=PPe(r)}catch{l=r.responseText}this.response=l}})),j8e=(function(){function e(n,r){return zX.call(this,"ajax timeout",n,r),this.name="AjaxTimeoutError",this}return e.prototype=Object.create(zX.prototype),e})(),z8e=Kn((function(e){return e.response})),eA,Xh=(eA=function(e){return(function(n){return new Hc((function(r){var i,l,f,h=YU({async:!0,crossDomain:!1,withCredentials:!1,method:"GET",timeout:0,responseType:"json"},n),v=h.queryParams,y=h.body,_=h.headers,A=h.url;if(!A)throw new TypeError("url is required");if(v)if(A.includes("?")){var R=A.split("?");if(2<R.length)throw new TypeError("invalid url");f=new URLSearchParams(R[1]),new URLSearchParams(v).forEach((function(Be,at){return f.set(at,Be)})),A=R[0]+"?"+f}else A=A+"?"+(f=new URLSearchParams(v));var k={};if(_)for(var N in _)_.hasOwnProperty(N)&&(k[N.toLowerCase()]=_[N]);var L=h.crossDomain;L||"x-requested-with"in k||(k["x-requested-with"]="XMLHttpRequest");var B=h.withCredentials,H=h.xsrfCookieName,q=h.xsrfHeaderName;if((B||!L)&&H&&q){var Y=(l=(i=document==null?void 0:document.cookie.match(new RegExp("(^|;\\s*)("+H+")=([^;]*)")))===null||i===void 0?void 0:i.pop())!==null&&l!==void 0?l:"";Y&&(k[q]=Y)}var K,se=(function(Be,at){var lt;if(!Be||typeof Be=="string"||(function($e){return typeof FormData<"u"&&$e instanceof FormData})(Be)||(function($e){return typeof URLSearchParams<"u"&&$e instanceof URLSearchParams})(Be)||(function($e){return ppe($e,"ArrayBuffer")})(Be)||(function($e){return ppe($e,"File")})(Be)||(function($e){return ppe($e,"Blob")})(Be)||(function($e){return typeof ReadableStream<"u"&&$e instanceof ReadableStream})(Be))return Be;if((function($e){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView($e)})(Be))return Be.buffer;if(typeof Be=="object")return at["content-type"]=(lt=at["content-type"])!==null&&lt!==void 0?lt:"application/json;charset=utf-8",JSON.stringify(Be);throw new TypeError("Unknown body type")})(y,k),ie=YU(YU({},h),{url:A,headers:k,body:se});K=n.createXHR?n.createXHR():new XMLHttpRequest;var le=n.progressSubscriber,M=n.includeDownloadProgress,we=M!==void 0&&M,Ne=n.includeUploadProgress,De=Ne!==void 0&&Ne,be=function(Be,at){K.addEventListener(Be,(function(){var lt,$e=at();(lt=le==null?void 0:le.error)===null||lt===void 0||lt.call(le,$e),r.error($e)}))};be("timeout",(function(){return new j8e(K,ie)})),be("abort",(function(){return new zX("aborted",K,ie)}));var me=function(Be,at){return new U8e(at,K,ie,Be+"_"+at.type)},Ye=function(Be,at,lt){Be.addEventListener(at,(function($e){r.next(me(lt,$e))}))};De&&[dpe,fpe,t_e].forEach((function(Be){return Ye(K.upload,Be,W8e)})),le&&[dpe,fpe].forEach((function(Be){return K.upload.addEventListener(Be,(function(at){var lt;return(lt=le==null?void 0:le.next)===null||lt===void 0?void 0:lt.call(le,at)}))})),we&&[dpe,fpe].forEach((function(Be){return Ye(K,Be,e_e)}));var Ke=function(Be){var at="ajax error"+(Be?" "+Be:"");r.error(new zX(at,K,ie))};K.addEventListener("error",(function(Be){var at;(at=le==null?void 0:le.error)===null||at===void 0||at.call(le,Be),Ke()})),K.addEventListener(t_e,(function(Be){var at,lt,$e=K.status;if($e<400){(at=le==null?void 0:le.complete)===null||at===void 0||at.call(le);var qt=void 0;try{qt=me(e_e,Be)}catch(io){return void r.error(io)}r.next(qt),r.complete()}else(lt=le==null?void 0:le.error)===null||lt===void 0||lt.call(le,Be),Ke($e)}));var Ze=ie.user,z=ie.method,$t=ie.async;for(var N in Ze?K.open(z,A,$t,Ze,ie.password):K.open(z,A,$t),$t&&(K.timeout=ie.timeout,K.responseType=ie.responseType),"withCredentials"in K&&(K.withCredentials=ie.withCredentials),k)k.hasOwnProperty(N)&&K.setRequestHeader(N,k[N]);return se?K.send(se):K.send(),function(){K&&K.readyState!==4&&K.abort()}}))})(typeof e=="string"?{url:e}:e)},eA.get=function(e,n){return Xh({method:"GET",url:e,headers:n})},eA.post=function(e,n,r){return Xh({method:"POST",url:e,body:n,headers:r})},eA.delete=function(e,n){return Xh({method:"DELETE",url:e,headers:n})},eA.put=function(e,n,r){return Xh({method:"PUT",url:e,body:n,headers:r})},eA.patch=function(e,n,r){return Xh({method:"PATCH",url:e,body:n,headers:r})},eA.getJSON=function(e,n){return z8e(Xh({method:"GET",url:e,headers:n}))},eA),W8e="upload",e_e="download",dpe="loadstart",fpe="progress",t_e="load",G8e=Object.prototype.toString;function ppe(e,n){return G8e.call(e)==="[object "+n+"]"}const LPe=Dd.getInstance(),BPe=LPe.makeLogger(["File Transfer"]);function VPe(e,n,r){const{name:i,size:l}=e,{meeting:{reportDomain:f,svcUrl:h,conId:v}}=r;return`https://${f}${n}?${new URLSearchParams({filename:i,filesize:l,rwg:h,cid:v}).toString()}`}function HPe(e,n){return n.fileObj?`${e}/zoomfile/download?objkey=${n.fileObj}&business=meeting`:`${e}/file/${n.fileID}?business=meeting`}function VL(e,n){return{fileName:e.name,fileSize:e.size,receiverId:n==null?void 0:n.userId,receiverGuid:n==null?void 0:n.userGuid}}function vA(e,n,r){LPe.report(`${e}. file name:${Od(n.name)},file size:${n.size}, ${"type"in n?`file type:${n.type}`:""}, error:${r.name};${r.message}`,["File Transfer"])}function hpe(e){var n,r,i;return{id:e.id,fileName:(n=e.file)===null||n===void 0?void 0:n.name,fileSize:(r=e.file)===null||r===void 0?void 0:r.size,fileUrl:(i=e.file)===null||i===void 0?void 0:i.fileUrl,senderId:e.sender.userId,senderGuid:e.sender.userGuid}}function FPe(e,n,r){return new Promise(((i,l)=>{const f=new FileReader;f.readAsArrayBuffer(e.slice(n,r)),f.onload=h=>{var v;return i((v=h.target)===null||v===void 0?void 0:v.result)},f.onerror=h=>l(h)}))}async function $Pe(e,n){let[r,i]=[e.size,0];n!=null&&(r=Math.min(rf.ChunkSize,e.size-n),i=n);const l=e.size-i<=rf.ChunkSize,f=Math.ceil(r/rf.EncodeBlockSize);try{const h=await Promise.all(Array.from({length:l?Math.max(f-1,1):f},((v,y)=>({start:y*rf.EncodeBlockSize+i,end:(l&&y===f-2?y+2:y+1)*rf.EncodeBlockSize+i}))).map((async({start:v,end:y})=>{try{const _=await FPe(e,v,y);return _?await xd.beginEncrypt({text:new Uint8Array(_),type:Rd.CHAT_FILE}):Promise.reject(null)}catch(_){return vA(`encrypt file buffer error. offset:${n},`,e,_),Promise.reject(_)}})));return(function(v){const y=v.reduce(((R,k)=>R+k.byteLength),0),_=new Uint8Array(y);let A=0;for(const R of v)_.set(new Uint8Array(R),A),A+=R.byteLength;return _})(h)}catch(h){console.warn(h)}return null}function UY(e,n,r,i){return i.pipe(co(`${U5}`,`${lv}`),Gt((l=>{if(l.type===`${lv}`)return!0;const{payload:{uniqueId:f,fileName:h,userId:v}}=l;return n===f&&e.name===h&&r.userId===v})),Ys(1),ao((l=>{BPe.info(`Cancel file upload. file name:${Od(e.name)},file size:${e.size},receiver id:${r.userId}`),He(H2,{...VL(e,r),progress:0,status:wu.Cancel,retryToken:l.type===`${U5}`?n:void 0})})))}function jY(e,n){if(e!=null&&e.file){const{file:r,receiver:i}=e,{upload:{chunkIndex:l,totalChunks:f,uniqueId:h}}=r;return He(H2,{...VL(n,i),progress:Math.floor((l??0)/(f??1)*100),status:wu.Fail,retryToken:h}),An([wd({upload:{status:wu.Fail,progress:0,uniqueId:h}}),Xbe({uniqueId:h,file:n})])}return Yn}function zY(e,n){return He(H2,{...VL(e),progress:0,status:wu.Fail}),Di(wd({upload:{status:wu.Fail,progress:0,uniqueId:n}}))}async function n_e(e,n,r,i){const l=VPe(e,"/wc/fileupload",i.value),f=new FormData;try{const h=await $Pe(e),v=VP(n,i.value);if(h&&v){f.append("file",new File([h],e.name));const{meeting:{zmk:y}}=i.value,{receiver:_}=v;return Xh({url:l,method:"POST",headers:{"Zoom-File-Origin":"redirect=support_auth",zmk:y},crossDomain:og(l),body:f,includeUploadProgress:!0}).pipe(Au(UY(e,n,_,r)),Nt((A=>{const{type:R,loaded:k,responseHeaders:N,total:L}=A;let B=0,H=wu.InProgress;const q={upload:{uniqueId:n}},Y=[];if(R==="upload_loadstart")B=0;else if(R==="upload_progress")B=Math.floor(k/L*100*.9);else if(R==="upload_load")B=90;else if(R==="download_load"){var K,se;B=100,H=wu.Success;const{chat:{fileServerDomain:ie}}=i.value,le=(K=N["zoom-file-id"])===null||K===void 0?void 0:K.trim(),M=(se=N["zoom-file-obj"])===null||se===void 0?void 0:se.trim(),we=HPe(ie,{fileObj:M});Object.assign(q,{fileID:le,fileObj:M,fileUrl:we})}return Object.assign(q.upload,{progress:B,status:H}),(B>0||R==="upload_loadstart")&&(He(H2,{...VL(e,_),progress:B,status:H}),Y.push(wd(q))),An(Y)})),tp((A=>(console.warn(A),vA("Upload small file error.",e,A),jY(v,e)))))}}catch(h){console.warn(h)}return zY(e,n)}const q8e=(()=>{const e=new qxe;return n=>async(...r)=>{await e.acquire(),n(...r),setTimeout((()=>{e.release()}),3e3)}})(),K8e=(function(e){const n=["chatFileTransfer"];return new Proxy(e,{get:(r,i)=>typeof i=="string"&&n.includes(i)?function(...l){return q8e(r[i].bind(r))(...l)}:Reflect.get(r,i)})})(zr.createAgent()),o_e={chatHistory:[],chatPrivilege:gc.All,panelistChatPrivilege:W2.AllPanelist,isAllowAttendeeChat:!0,isFileTransferEnable:!0,isEnableFileTransferEncrypted:!0,fileTransferFileType:[],fileDownloadPromptIgnoreList:[],fileTransferSizeLimit:0,fileServerDomain:"",failedFileTransfer:{}},Z8e=op({[`${$5}`]:We(((e,{payload:n})=>{e.chatHistory.push(n)})),[`${Ybe}`]:We(((e,{payload:n})=>{e.chatPrivilege=n})),[`${ONe}`]:We(((e,{payload:n})=>{e.panelistChatPrivilege=n})),[`${RNe}`]:We(((e,{payload:n})=>{e.isAllowAttendeeChat=n})),[`${xNe}`]:We(((e,{payload:n})=>{const{destNodeID:r,msgID:i,userId:l}=n,f=NPe(e.chatHistory,{userId:l,destNodeID:r});f&&Object.assign(f,{id:i})})),[`${$Y}`]:We(((e,{payload:n})=>{const{msgId:r}=n,i=e.chatHistory.findIndex((l=>l.id===r));i>=0&&e.chatHistory.splice(i,1)})),[`${DNe}`]:We(((e,{payload:n})=>{Object.assign(e,n)})),[`${Jbe}`]:We(((e,{payload:n})=>{const{originFile:r,...i}=n;e.chatHistory.push(i)})),[`${wd}`]:We(((e,{payload:n})=>{const{upload:r,download:i,originFile:l,...f}=n;if(r){var h;const{uniqueId:v,...y}=r,_=e.chatHistory.find((A=>{var R;return A.file&&((R=A.file.upload)===null||R===void 0?void 0:R.uniqueId)===v}));_!=null&&(h=_.file)!==null&&h!==void 0&&h.upload&&(Object.assign(_.file.upload,{...y}),Object.assign(_.file,{...f}),_.file.upload.status===wu.Success&&e.failedFileTransfer[_.file.upload.uniqueId]&&delete e.failedFileTransfer[_.file.upload.uniqueId])}else if(i){const{id:v,fileUrl:y}=f,_=e.chatHistory.find((A=>{var R;return A.id===v&&((R=A.file)===null||R===void 0?void 0:R.fileUrl)===y}));_!=null&&_.file&&(_.file.download?Object.assign(_.file.download,{...i}):Object.assign(_.file,{download:i}))}})),[`${U5}`]:We(((e,{payload:n})=>{const{uniqueId:r,fileName:i,userId:l}=n,f=e.chatHistory.find((v=>v.file&&v.file.name==i&&v.file.upload.uniqueId===r&&v.file.upload.status===wu.InProgress&&v.receiver.userId===l));var h;f!=null&&f.file&&Object.assign((h=f.file)===null||h===void 0?void 0:h.upload,{status:wu.Cancel,progress:0})})),[`${Xbe}`]:We(((e,{payload:n})=>{const{uniqueId:r,file:i}=n;e.failedFileTransfer[`${r}`]||Object.assign(e.failedFileTransfer,{[`${r}`]:i})})),[`${kNe}`]:We(((e,{payload:n})=>{const{fileID:r,msgID:i,senderId:l}=n,f=e.chatHistory.find((h=>{var v;return((v=h.file)===null||v===void 0?void 0:v.fileID)===r&&h.sender.userId===l}));f&&Object.assign(f,{id:i})})),[`${Qbe}`]:We(((e,{payload:n})=>{const{id:r,fileUrl:i}=n,l=e.chatHistory.find((h=>{var v,y;return h.id===r&&((v=h.file)===null||v===void 0?void 0:v.fileUrl)===i&&((y=h.file)===null||y===void 0?void 0:y.download.status)===ZC.InProgress}));var f;l!=null&&l.file&&Object.assign((f=l.file)===null||f===void 0?void 0:f.download,{status:ZC.Cancel,progress:0})})),[`${INe}`]:()=>({...o_e})},o_e);var bl;const SU=zr.createAgent();let Y8e=(bl=class extends Q0{async send(e,n){if(!e)return Promise.reject({type:gs,reason:"Text is empty",errorCode:Fe.CHAT_EMPTY_MESSAGE});const{[go]:r,[Ja]:i}=this,l=r(),f=Do(l),h=QEe(l,n),v=XEe(f,h,l);if(v)return Promise.reject(v);const{meeting:{isWebinar:y,encType:_}}=l,A=_===f6.AES_GCM;let R=!1;const k=y&&Ku(h.userRole);if(n===ma.SilentModeUsers)SU.chat(Vc(e),n);else{let L,B=0;y?k?8&~h.clientCap?(B=ma.Panelist,L=n,R=!0):(B=ma.IndividualCcPanelist,L=n):h&&(B=h.userId):B=h.userId,await(async function(H){const{text:q,destId:Y,sn:K,attendeeId:se}=H;{const ie=await xd.beginEncrypt({text:q,type:Rd.RWG_CHAT});H8e.chat(ie,Y,K,se)}})({text:e,destId:B,sn:f==null?void 0:f.zoomID,attendeeId:L}),R&&await(function(H){const{text:q,jid:Y,isGCMEnabled:K}=H;return xd.beginEncrypt({text:q,type:Rd.XMPP_CHAT}).then((se=>{F8e.sendWebinarMseeage(se,Y,ma.IndividualCcPanelist,K)}))})({text:e,jid:h.jid,isGCMEnabled:A})}const N=(function(L,B,H,q){const Y=new Date().getTime(),K=performance.now();return{message:L,sender:{name:B.displayName,userId:B.userId,userGuid:B.userGUID,avatar:B.avatar},receiver:{name:H==null?void 0:H.displayName,userId:q?ma.IndividualCcPanelist:H==null?void 0:H.userId,userGuid:H==null?void 0:H.userGUID},timestamp:Y,highResTimeStampForIdentification:K}})(e,f,h,k);if(i($5(N)),R)return He(_2,N),N;try{const L=await Ra(si(y2e).pipe(Kve(5e3),h2e((K=>N.highResTimeStampForIdentification!==K.identification||!([K.receiverId,ma.All,ma.Panelist].includes(n)||K.receiverId===ma.IndividualCcPanelist))),Ys(1))),{msgId:B}=L,{highResTimeStampForIdentification:H,...q}=N,Y={id:B,...q,...k&&{receiver:{name:h==null?void 0:h.displayName,userId:h==null?void 0:h.userId}}};return He(_2,Y),Y}catch{return Promise.reject({type:pQ,errorCode:Fe.OPERATION_TIMEOUT})}}setPrivilege(e){const n=this[go](),{meeting:{isWebinar:r},chat:{chatPrivilege:i},breakoutRoom:l}=n;return i===e?Promise.resolve(""):(l==null?void 0:l.controlStatus)===cr.InProgress&&eh(n)?Promise.reject({type:Lt,reason:"Cannot update chat privilege in a subsession",errorCode:Fe.CHAT_SUBSESSION_CONFLICT}):!r&&!J6e.includes(e)||r&&!X6e.includes(e)?Promise.reject({type:gs,reason:"invalid privilege value of parameter",errorCode:Fe.CHAT_INVALID_PRIVILEGE}):(SU.setChatPriviledge(e),Cs(GP,(f=>f.chatPrivilege===e)))}setPanelistPrivilege(e){const n=this[go](),{chat:{panelistChatPrivilege:r}}=n,i=Q6e[e];return r===i?Promise.resolve(""):Object.values(IX).includes(e)?(SU.setPanelistChatPrivilege(e),Cs(GP,(l=>l.panelistChatPrivilege===i))):Promise.reject({type:gs,reason:"Panelist privilege value is invalid",errorCode:Fe.CHAT_INVALID_PRIVILEGE})}deleteMessage(e){const n=this[go](),{chat:{chatHistory:r},meeting:{meetingOptions:i,userId:l}}=n;if(i!=null&&i.isEnableDeleteChatMsg){const f=Qh(n),h=r.find((v=>v.id===e));if(h){const{sender:v}=h;if(f)SU.chatCmdReq(e,OX.Delete);else{if(v.userId!==l)return Promise.reject({type:hf,reason:"can not delete message",errorCode:Fe.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED});SU.chatCmdReq(e,OX.Delete)}return Cs(PJ,(y=>y.id===e)).then((()=>({id:e})))}return Promise.reject({type:gs,reason:"msgId is wrong",errorCode:Fe.CHAT_INVALID_MSG_ID_OR_URL})}return Promise.reject({type:Lt,reason:"can not delete messages",errorCode:Fe.CHAT_DELETE_ACCOUNT_DISABLE})}lockChat(e){const n=this[go](),{meeting:{meetingOptions:r}}=n,i=r!=null&&r.isPrivateChatEnabled?gc.All:gc.EveryonePublicly;return this.setPrivilege(e?gc.NoOne:i)}sendFile(e,n){if(!e)return Promise.reject({type:gs,reason:"File is empty",errorCode:Fe.CHAT_EMPTY_FILE});const{[go]:r,[Ja]:i}=this,l=r(),{chat:{isFileTransferEnable:f,fileTransferFileType:h,fileTransferSizeLimit:v,failedFileTransfer:y}}=l;if(!f)return Promise.reject({type:Lt,reason:"Send files via in-session chat is not enabled",errorCode:Fe.CHAT_FILE_ACCOUNT_DISABLE});if(typeof e=="string"){const _=VP(e,l);if(_!=null&&_.file&&y[e]){const{file:{upload:A,...R}}=_,{file:{name:k,upload:{uniqueId:N}},receiver:{userId:L}}=_;return i(wd({originFile:y[e],...R,upload:{...A,status:wu.InProgress}})),Promise.resolve((()=>{i(U5({uniqueId:N,fileName:k,userId:L}))}))}return Promise.reject({type:gs,reason:"Retry token is not correct.",errorCode:Fe.CHAT_INVALID_RETRY_TOKEN})}{const{name:_}=e;if(h.length>0){const[L]=_.split(".").reverse();if(!h.some((B=>B===L)))return Promise.reject({type:Lt,reason:"File is not in the allow list",errorCode:Fe.CHAT_MISMATCH_FILE_TYPE})}if(e.size>v)return Promise.reject({type:Lt,reason:"File size exceeds the maximum limit.",errorCode:Fe.CHAT_EXCEED_FILE_SIZE});const A=Do(l),R=QEe(l,n),k=XEe(A,R,l);if(k)return Promise.reject(k);const N=YJ();return i(Jbe((function(L,B,H,q){const Y=new Date().getTime();return{file:{name:L.name,size:L.size,type:L.type,upload:{progress:0,uniqueId:B,totalChunks:0,chunkIndex:0}},originFile:L,sender:{name:H.displayName,userId:H.userId,userGuid:H.userGUID,avatar:H.avatar},receiver:{name:q==null?void 0:q.displayName,userId:q==null?void 0:q.userId,attendeeId:void 0,userGuid:q==null?void 0:q.userGUID},timestamp:Y}})(e,N,A,R))),Promise.resolve((()=>{i(Xbe({uniqueId:N,file:e})),i(U5({uniqueId:N,fileName:_,userId:R==null?void 0:R.userId}))}))}}downloadFile(e,n,r){const{[go]:i,[Ja]:l}=this,{chat:{chatHistory:f}}=i();return!e||!n?Promise.reject({type:gs,reason:"Invalid message id or file url!",errorCode:Fe.CHAT_INVALID_MSG_ID_OR_URL}):f.find((v=>{var y;return v.id===e&&((y=v.file)===null||y===void 0?void 0:y.fileUrl)===n}))?(l(wd({id:e,fileUrl:n,download:{status:ZC.InProgress,progress:0,blob:r}})),Promise.resolve((()=>l(Qbe({id:e,fileUrl:n}))))):Promise.reject({type:gs,reason:"Invalid message id or file url!",errorCode:Fe.CHAT_INVALID_MSG_ID_OR_URL})}getPrivilege(){const{chat:{chatPrivilege:e,isAllowAttendeeChat:n}}=this[go]();return n?e:gc.NoAttendee}getReceivers(){const e=this[go](),{chat:{chatPrivilege:n,panelistChatPrivilege:r,isAllowAttendeeChat:i},meeting:{isWebinar:l}}=e;if(!l&&!i)return[];const f=Do(e),h=Qh(e);if(f)if(l)if(Ku(f.userRole)){if(!i)return[];if(n===gc.All)return[LP,VU];if(n===gc.AllPanelist)return[LP];if(n===gc.NoOne)return[]}else{if(h||r===W2.Everyone){const v=yU(e,f.userId,{includeAttendee:!0});return[LP,VU,...v]}if(r===W2.AllPanelist){const v=yU(e,f.userId);return[LP,...v]}}else{const v=Qh(e);if(n===gc.All||v){const y=yU(e,f.userId);return[VU,...y]}if(n===gc.Host)return yU(e,f.userId,{host:!0});if(n===gc.EveryonePublicly){const y=yU(e,f.userId,{host:!0});return[VU,...y]}if(n===gc.NoOne)return[]}return[]}getHistory(){return this[go]().chat.chatHistory.map((e=>{const{highResTimeStampForIdentification:n,...r}=e;if(r.file){const{name:i,size:l,type:f,fileUrl:h,upload:v,download:y}=r.file,_={name:i,size:l,type:f,fileUrl:h};return v&&Object.assign(_,{upload:{status:v.status,progress:v.progress}}),y&&Object.assign(_,{download:{status:y.status,progress:y.progress}}),{...r,file:_}}return r}))}isAllowToDeleteMessages(){const e=this[go](),{meeting:{meetingOptions:n}}=e;return n==null?void 0:n.isEnableDeleteChatMsg}isFileTransferEnabled(){return this[go]().chat.isFileTransferEnable}getFileTransferSetting(){const e=this[go](),{chat:{fileTransferFileType:n,fileTransferSizeLimit:r}}=e;return{typeLimit:(n??[]).map((i=>`.${i}`)).join(","),sizeLimit:r}}},fn(bl.prototype,"send",[hn],Object.getOwnPropertyDescriptor(bl.prototype,"send"),bl.prototype),fn(bl.prototype,"setPrivilege",[Bc,hn],Object.getOwnPropertyDescriptor(bl.prototype,"setPrivilege"),bl.prototype),fn(bl.prototype,"setPanelistPrivilege",[Bc,hn,function(e,n,r){const i=r.value;r.value=function(...l){const f=this[Ia];if(f){const{meeting:{isWebinar:h}}=f.getState();if(!h)return Promise.reject({type:mY,reason:"non-webinar",errorCode:Fe.CLIENT_SESSION_NOT_WEBINAR})}return i.apply(this,l)}}],Object.getOwnPropertyDescriptor(bl.prototype,"setPanelistPrivilege"),bl.prototype),fn(bl.prototype,"deleteMessage",[hn],Object.getOwnPropertyDescriptor(bl.prototype,"deleteMessage"),bl.prototype),fn(bl.prototype,"lockChat",[Bc,hn],Object.getOwnPropertyDescriptor(bl.prototype,"lockChat"),bl.prototype),fn(bl.prototype,"sendFile",[hn],Object.getOwnPropertyDescriptor(bl.prototype,"sendFile"),bl.prototype),fn(bl.prototype,"downloadFile",[hn],Object.getOwnPropertyDescriptor(bl.prototype,"downloadFile"),bl.prototype),bl);const J8e={epics0:(e,n)=>eL(e,24583).pipe(_o(n),Nt((([r,i])=>{if(i.meeting.zlkJwtToken)return Yn;const{payload:{body:{sn:l,senderName:f,senderJid:h,receiver:v,text:y,type:_}}}=r,A=Do(i),R=c6(i),{meeting:{jid:k,userId:N},participants:{xmppAttendeeList:L}}=i;return xd.beginDecrypt({decryptedText:y,type:Rd.XMPP_CHAT,zoomId:l}).then((({message:B})=>{var H;let q=null,Y=0,K="";A&&Ku(A.userRole)&&k===v?(q=L.find((ie=>ie.jid===h)),Y=N,K=A.displayName):_===ma.Panelist&&(q=R.find((ie=>ie.jid===h)),Y=ma.Panelist,K=LP.displayName);const se={message:B,sender:{name:f,userId:((H=q)===null||H===void 0?void 0:H.userId)||0,avatar:""},receiver:{name:K,userId:Y},timestamp:new Date().getTime()};return He(_2,se),$5(se)}))}))),epics1:(e,n)=>oo(e,7944).pipe(_o(n),Nt((([r,i])=>{const{meeting:{bIbDisableChat:l}}=i,{payload:{body:{attendeeNodeID:f,sn:h,destNodeID:v,text:y,senderName:_,msgID:A}}}=r,R=Do(i);if(R){const k=Ku(R==null?void 0:R.userRole)&&f===R.userId&&!A;if(!l&&!k){const{sn:N,...L}=MPe({destNodeID:v,attendeeNodeID:f,senderName:_,sn:h},i);return(f===ma.SilentModeUsers?Promise.resolve({id:A,message:hb(y),...L}):xd.beginDecrypt({decryptedText:y,zoomId:N,type:Rd.RWG_CHAT}).then((({message:B})=>({id:A,message:B,...L})))).then((B=>(He(_2,B),$5(B))))}}return Yn}))),epics2:(e,n)=>oo(e,av).pipe(Gt((r=>{var i,l;return((i=r.payload.body)===null||i===void 0?void 0:i.chatPriviledge)!==void 0||((l=r.payload.body)===null||l===void 0?void 0:l.bAllowAttendeeChat)!==void 0})),_o(n),Kn((([r,i])=>{const{payload:{body:{chatPriviledge:l,bAllowAttendeeChat:f}}}=r,{chat:{chatPrivilege:h}}=i;return f!==void 0?(He(GP,f===!0?{chatPrivilege:h}:{chatPrivilege:gc.NoAttendee}),RNe(f)):(He(GP,{chatPrivilege:l}),Ybe(l))}))),epics3:e=>oo(e,av).pipe(Gt((n=>{var r;return((r=n.payload.body)===null||r===void 0?void 0:r.panelistChatPriviledge)!==void 0})),Kn((n=>{const{payload:{body:{panelistChatPriviledge:r}}}=n;return He(GP,{panelistChatPrivilege:r}),ONe(r)}))),epics4:(e,n)=>oo(e,4136).pipe(_o(n),Nt((([r,i])=>{const{payload:{body:{result:l,destNodeID:f,msgID:h,fileID:v}}}=r,{meeting:{userId:y},chat:{chatHistory:_}}=i,A=[];if(l===ipe.Success)if(v){const k=_.find((N=>{var L;return((L=N.file)===null||L===void 0?void 0:L.fileID)===v}));if(k){const{file:N,receiver:L,...B}=k,{name:H,size:q,type:Y,fileUrl:K}=N??{},{attendeeId:se,...ie}=L;He(_2,{id:h,file:{name:H,size:q,type:Y,fileUrl:K,upload:{status:wu.Complete,progress:100}},receiver:{...ie},...B}),A.push(kNe({fileID:v,msgID:h,senderId:y}))}}else{const k=NPe(_,{userId:y,destNodeID:f});var R;k&&(He(y2e,{msgId:h,receiverId:f,identification:(R=k.highResTimeStampForIdentification)!==null&&R!==void 0?R:0}),A.push(xNe({destNodeID:f,msgID:h,userId:y})))}else l!==ipe.Delete&&l!==ipe.Block||A.push($Y({msgId:h}));return An(A)}))),epics5:e=>oo(e,4238).pipe(Nt((n=>{const{payload:{body:{bSuccess:r,cmd:i,msgID:l}}}=n,f=[];return r&&i===OX.Delete&&(f.push($Y({msgId:l})),He(PJ,{id:l})),An(f)}))),epics6:e=>oo(e,7960).pipe(Nt((n=>{const{payload:{body:{cmd:r,msgID:i}}}=n,l=[];return r===OX.Delete&&(l.push($Y({msgId:i})),He(PJ,{id:i})),An(l)})))},X8e=nh(J8e,{chatFileEpics0:e=>e.pipe(co(`${om}`),Kn((n=>{var r,i,l;const{payload:{fileTransfer:f,fileServerDomain:h}}=n;return DNe({isFileTransferEnable:f==null?void 0:f.isEnable,isEnableFileTransferEncrypted:f==null?void 0:f.isEnableFileTransferEncrypted,fileTransferFileType:((r=f==null?void 0:f.fileType)!==null&&r!==void 0?r:"").replace(/\./g,"").split(",").filter(Boolean),fileTransferSizeLimit:1024*((i=f==null?void 0:f.sizeLimit)!==null&&i!==void 0?i:0)*1024||rf.MaxSize,fileDownloadPromptIgnoreList:((l=f==null?void 0:f.fileDownloadPromptIgnoreList)!==null&&l!==void 0?l:"").replace(/\./g,"").split(","),fileServerDomain:`https://${h}`})}))),chatFileEpics1:(e,n)=>e.pipe(co(`${Jbe}`),Nt((async r=>{const{payload:{originFile:i,file:{upload:{uniqueId:l}}}}=r;return i.size>rf.ChunkSize?await(async function(f,h,v,y){const _=VPe(f,"/wc/multiupload/init",y.value),A=await(async function(L){const B=Math.ceil(L.size/rf.ReaderChunkSize);return(await Promise.all(Array.from({length:B},((q,Y)=>({start:Y*rf.ReaderChunkSize,end:(Y+1)*rf.ReaderChunkSize}))).map((async({start:q,end:Y})=>{try{const K=await FPe(L,q,Y);return tDe(await window.crypto.subtle.digest("SHA-256",K))}catch(K){return vA("calculate file hash error.",L,K),Promise.reject(K)}})))).join("")})(f),{meeting:{zmk:R,meetingId:k}}=y.value,N=VP(h,y.value);if(A&&N){const{receiver:L}=N,B={fileName:f.name,length:f.size,channelType:4,digest:A,shareJid:k};return Xh({url:_,method:"POST",headers:{"Zoom-File-Origin":"redirect=support_auth",zmk:R},crossDomain:og(_),body:B}).pipe(Au(UY(f,h,L,v)),Kn((H=>{var q;const{responseHeaders:Y,response:K}=H,se=(q=Y["x-zm-trackingid"])===null||q===void 0?void 0:q.trim(),{uploadid:ie,path:le,metadata:M}=K,we=Math.ceil(f.size/rf.ChunkSize);return wd({originFile:f,upload:{uniqueId:h,status:wu.InProgress,progress:0,chunkIndex:0,totalChunks:we,uploadid:ie,trackingId:se,path:le,metadata:M}})})),tp((H=>(console.warn(H),vA("Upload file meta error.",f,H),jY(N,f)))),pb(wd({upload:{uniqueId:h,status:wu.Init}})))}return zY(f,h)})(i,l,e,n):await n_e(i,l,e,n)})),Nt((r=>r))),chatFileEpics2:(e,n)=>e.pipe(co(`${wd}`),Gt((r=>{var i;return((i=r.payload.upload)===null||i===void 0?void 0:i.status)===wu.Success})),cE((async r=>{const{payload:{upload:{uniqueId:i}}}=r,{chat:{isEnableFileTransferEncrypted:l,chatHistory:f}}=n.value,h=f.find((y=>{var _;return((_=y.file)===null||_===void 0||(_=_.upload)===null||_===void 0?void 0:_.uniqueId)===i})),v=[];if(h&&h.file){const{file:{name:y,size:_,fileObj:A,fileID:R,type:k},receiver:{userId:N,attendeeId:L}}=h;let[B,H]=["",""];if(l){const[q,Y]=await Promise.all([y,`${_}`].map((K=>xd.beginEncrypt({text:K,type:Rd.RWG_CHAT}))));[B,H]=[q,Y]}else[B,H]=[y,`${_}`].map((q=>Vc(q)));await K8e.chatFileTransfer({fileID:R,fileSize:H,fileName:B,fileObj:A,type:k,destNodeID:N,attendeeNodeID:L}),v.push(wd({upload:{uniqueId:i,status:wu.Complete}}))}return v}))),chatFileEpics3:(e,n)=>e.pipe(co(`${wd}`),Gt((r=>{const{payload:{upload:i,originFile:l}}=r;return!!i&&!!i.uniqueId&&i.status===wu.InProgress&&(l==null?void 0:l.size)<=rf.ChunkSize&&i.totalChunks===0})),Nt((async r=>{const{payload:{originFile:i,upload:{uniqueId:l}}}=r;return await n_e(i,l,e,n)})),Nt((r=>r))),chatFileEpics4:(e,n)=>e.pipe(co(`${wd}`),Gt((r=>{const{payload:{upload:i}}=r;return!!i&&!!i.uniqueId&&i.totalChunks>0&&i.chunkIndex!==i.totalChunks})),Nt((async r=>{const{payload:{originFile:i,upload:{uniqueId:l}}}=r;return await(async function(f,h,v,y){const _=VP(h,y.value);if(_!=null&&_.file){const{file:{upload:{chunkIndex:A,totalChunks:R,uploadid:k,path:N,trackingId:L,etags:B},size:H},receiver:q}=_,Y=A*rf.ChunkSize,K=await $Pe(f,Y);if(K){const{chat:{fileServerDomain:se},meeting:{zmk:ie}}=y.value,le=`${se}/upload/parts?${new URLSearchParams({uploadid:k,partNumber:A+1}).toString()}`,M=new FormData,we=new File([K],f.name);return M.append("file",we),Xh({url:le,method:"POST",headers:{"Zoom-File-Size":we.size,"Zoom-File-Path":N,"x-zm-trackingid":L,"Zoom-File-Origin":"redirect=support_auth",zmk:ie},crossDomain:og(le),body:M,includeUploadProgress:!0}).pipe(Au(UY(f,h,q,v)),Nt((Ne=>{var De;const{type:be,loaded:me,total:Ye,responseHeaders:Ke}=Ne;let Ze=0;const z={upload:{uniqueId:h,status:wu.InProgress}},$t=[],Be=VP(h,y.value),at=Be==null||(De=Be.file)===null||De===void 0?void 0:De.upload.progress;if(be==="upload_loadstart")Ze=at||Math.floor(A/R*100);else if(be==="upload_progress")Ze=Math.floor((A*rf.ChunkSize+.9*me)/H*100);else if(be==="upload_load")Ze=Math.floor((A*rf.ChunkSize+.9*Ye)/H*100);else if(be==="download_load"){Ze=at||Math.floor((A+1)/R*100);const lt=Ke["x-zm-etag"].trim(),$e=B?{...B,[`${A+1}`]:lt}:{[`${A+1}`]:lt};Object.assign(z.upload,{etags:$e,chunkIndex:A+1,totalChunks:R}),Object.assign(z,{originFile:f})}return(Ze>0||be==="upload_loadstart")&&(Object.assign(z.upload,{progress:Ze}),He(H2,{...VL(f,q),progress:Ze,status:wu.InProgress}),$t.push(wd(z))),An($t)})),tp((Ne=>(console.warn(Ne),vA(`Upload file chunk error. chunk:${A},total chunks:${R},uploadid:${k},trackingId:${L}`,f,Ne),jY(_,f)))))}}return zY(f,h)})(i,l,e,n)})),Nt((r=>r))),chatFileEpics5:(e,n)=>e.pipe(co(`${wd}`),Gt((r=>{const{payload:{upload:i}}=r;return!!i&&!!i.uniqueId&&i.totalChunks>0&&i.chunkIndex==i.totalChunks})),Nt((r=>{const{payload:{originFile:i,upload:{uniqueId:l}}}=r;return(function(f,h,v,y){const{chat:{fileServerDomain:_},meeting:{zmk:A}}=y.value,R=VP(h,y.value);if(R!=null&&R.file){const{file:{upload:{uploadid:k,metadata:N,etags:L,trackingId:B}},receiver:H}=R,q=`${_}/upload/complete?uploadid=${k}`;return Xh({url:q,method:"POST",headers:{"x-zm-trackingid":B,"Zoom-File-Origin":"redirect=support_auth",zmk:A},crossDomain:og(q),body:{metadata:N,etags:L}}).pipe(Au(UY(f,h,H,v)),Kn((Y=>{var K,se;const{chat:{fileServerDomain:ie}}=y.value,{responseHeaders:le}=Y,M=(K=le["zoom-file-id"])===null||K===void 0?void 0:K.trim(),we=(se=le["zoom-file-obj"])===null||se===void 0?void 0:se.trim(),Ne=`${ie}/zoomfile/download?objkey=${we}&business=meeting`;return He(H2,{...VL(f,H),progress:100,status:wu.Success}),wd({fileID:M,fileObj:we,fileUrl:Ne,upload:{uniqueId:h,progress:100,status:wu.Success}})})),tp((Y=>(console.warn(Y),vA(`Upload chunks checksum error.uploadid${k},trackingId${B}`,f,Y),jY(R,f)))))}return zY(f,h)})(i,l,e,n)}))),chatFileEpics6:(e,n)=>oo(e,4308).pipe(cE((async r=>{const{payload:{body:{attendeeNodeID:i,destNodeID:l,fileID:f,fileName:h,fileObj:v,fileSize:y,fileType:_,msgID:A,senderName:R}}}=r,{meeting:{bIbDisableChat:k},chat:{fileServerDomain:N,isEnableFileTransferEncrypted:L}}=n.value,B=[];if(!k){const H=HPe(N,{fileObj:v,fileID:f});if(_===t8e.Local){const{sn:q,...Y}=MPe({destNodeID:l,attendeeNodeID:i,senderName:R},n.value);let[K,se]=["",0];if(L){const[le,M]=await Promise.all([h,y].map((we=>xd.beginDecrypt({decryptedText:we,zoomId:q,type:Rd.RWG_CHAT}))));K=le.message,se=Number(M.message)}else K=hb(h),se=Number(hb(y));const ie={id:A,file:{name:K,size:se,fileUrl:H},...Y};B.push($5({...ie,file:{...ie.file,fileID:f,fileObj:v}})),setTimeout((()=>{He(_2,ie)}),0)}}return B}))),chatFileEpics7:(e,n)=>e.pipe(co(`${wd}`),Gt((r=>{var i,l;const{payload:f}=r;return f.id&&f.fileUrl&&((i=f.download)===null||i===void 0?void 0:i.status)===ZC.InProgress&&((l=f.download)===null||l===void 0?void 0:l.progress)===0})),Nt((r=>(function(i,l,f){var h;const{chat:{chatHistory:v},meeting:{zmk:y},participants:{attendeesList:_}}=f.value,A=v.find((R=>R.id===i));if(A!=null&&(h=A.file)!==null&&h!==void 0&&h.fileUrl){const{file:{fileUrl:R}}=A;return Xh({url:R,method:"GET",headers:{"Zoom-File-Origin":"redirect=support_auth",zmk:y},crossDomain:og(R),responseType:"arraybuffer",includeDownloadProgress:!0}).pipe(Au((function(k,N){return N.pipe(co(`${Qbe}`,`${lv}`),Gt((L=>{if(L.type===`${lv}`)return!0;const{payload:{id:B}}=L;return k.id===B})),Ys(1),ao((()=>{var L,B,H;BPe.info(`Cancel file download. file name:${Od((L=k.file)===null||L===void 0?void 0:L.name)},file size:${(B=k.file)===null||B===void 0?void 0:B.size},sender id:${(H=k.sender)===null||H===void 0?void 0:H.userId}`),He(bY,{...hpe(k),progress:0,status:ZC.Cancel})})))})(A,l)),cE((async k=>{const{type:N,loaded:L,total:B}=k,H=[],q={...hpe(A),progress:0,status:ZC.InProgress};if(N==="download_loadstart"&&Object.assign(q,{progress:0}),N==="download_progress"){var Y;const we=Math.floor(L/B*100);H.push(wd({id:i,fileUrl:(Y=A.file)===null||Y===void 0?void 0:Y.fileUrl,download:{progress:we}})),Object.assign(q,{progress:we})}else if(N==="download_load"){var K,se,ie;const Ne=ZC.Success;Object.assign(q,{progress:100,status:Ne}),H.push(wd({id:i,fileUrl:(K=A.file)===null||K===void 0?void 0:K.fileUrl,download:{progress:100,status:Ne}}));const De=(se=_.find((me=>me.userId===A.sender.userId)))===null||se===void 0?void 0:se.zoomID,be=await(async function(me,Ye,Ke){const Ze=Math.ceil(me.byteLength/rf.DecodeBlockSize);try{const z=await Promise.all(Array.from({length:Math.max(Ze-1,1)},(($t,Be)=>({start:Be*rf.DecodeBlockSize,end:(Be===Ze-2?Be+2:Be+1)*rf.DecodeBlockSize}))).map((async({start:$t,end:Be})=>{try{const at=me.slice($t,Be),{message:lt}=await xd.beginDecrypt({decryptedText:at,zoomId:Ke,type:Rd.CHAT_FILE});return lt}catch(at){return vA("decrypt file buffer error.",{name:Ye,size:me.byteLength},at),Promise.reject(at)}})));return new Blob(z,{type:$8e(Ye)})}catch{return null}})(k.response,(ie=A.file)===null||ie===void 0?void 0:ie.name,De);var le,M;be&&((le=A.file)!==null&&le!==void 0&&le.download.blob?Object.assign(q,{fileBlob:be}):(function(me,Ye){const Ke=document.createElement("a"),Ze=window.URL.createObjectURL(me);Ke.href=Ze,Ke.download=Ye,Ke.click(),window.URL.revokeObjectURL(Ze)})(be,(M=A.file)===null||M===void 0?void 0:M.name))}return(q.progress>0||N==="download_loadstart")&&He(bY,q),H})),tp((k=>(console.warn(k),vA(`download file error. file url:${R}`,{name:void 0,size:void 0},k),He(bY,{...hpe(A),progress:0,status:ZC.Fail}),Di(wd({id:i,fileUrl:R,download:{status:ZC.Fail,progress:0}}))))))}return Yn})(r.payload.id,e,n))))});function PR(e,n){var r,i,l;const{meeting:{isMeetingReset:f,meetingId:h,meetingNumber:v,userName:y,userEmail:_,tid:A,userId:R,userGUID:k,isRlbTP:N},breakoutRoom:L}=e;let B="";var H;return B=f?L!=null&&(H=L.currentRoom)!==null&&H!==void 0&&H.boConfId?"join breakout room":"meeting failover":"join meeting",{label:B,payload:{meetingId:(r=n==null?void 0:n.meetingId)!==null&&r!==void 0?r:h,tid:A,userId:(i=n==null?void 0:n.userId)!==null&&i!==void 0?i:R,userGUID:(l=n==null?void 0:n.userGUID)!==null&&l!==void 0?l:k,isRlbTP:N,meetingNumber:Od(v),userName:Od(y),userEmail:Od(_)}}}function Jh(e,n,r){return KA(mr((i=>{let l=!1;try{var f,h;const{logger:{options:v},meeting:{logConfig:y}}=n.value;l=(f=v==null?void 0:v.enable)!==null&&f!==void 0?f:(h=JSON.parse(y||"{}"))===null||h===void 0?void 0:h.enable}catch{}try{if(l){const{logger:{isLaplaceInitialized:v}}=n.value;if(!v)return e.pipe(co(`${UX}`),Ys(1),Nt((y=>(y.payload&&r(i),Yn))));r(i)}}catch(v){console.warn(v)}return Yn})))}function bA(e,n,r,i){return bs(e,r).pipe(Jh(e,n,i))}function aL(e,n,r,i){return oo(e,r).pipe(Jh(e,n,i))}function Oge(e){var n,r;const{audio:{activeMicrophone:i,activeSpeaker:l,microphoneDevicesList:f,speakerDevicesList:h}}=e;return`microphone: [${i} - ${f==null||(n=f.find((v=>v.deviceId===i)))===null||n===void 0?void 0:n.label}]; speaker: [${l} - ${h==null||(r=h.find((v=>v.deviceId===l)))===null||r===void 0?void 0:r.label}]`}function UPe(e){var n;const{video:{activeCamera:r,cameraDevicesList:i}}=e;return`camera: [${r} - ${i==null||(n=i.find((l=>l.deviceId===r)))===null||n===void 0?void 0:n.label}]`}function CU(e,n){return n!==void 0?` ,${e}:${n}`:""}const{InitSuccessAudio:Q8e,InitFailedAudio:e7e,InitSuccessVideo:t7e,InitFailedVideo:n7e,InitSuccessSharing:o7e,InitFailedSharing:s7e}=Cn,{DecodeSuccess:s_e,DecodeFailed:r_e,EncodeSuccess:i_e,EncodeFailed:a_e}=zp,r7e={[`${Q8e}`]:{name:"Audio",isException:!1},[`${e7e}`]:{name:"Audio",isException:!0},[`${t7e}`]:{name:"Video",isException:!1},[`${n7e}`]:{name:"Video",isException:!0},[`${o7e}`]:{name:"Sharing",isException:!1},[`${s7e}`]:{name:"Sharing",isException:!0}};function i7e(e){const n=(e??"").split("-");return[...new Set(n)].map((r=>({reason:r,count:n.filter((i=>r===i)).length})))}let tg=(function(e){return e[e.Success=0]="Success",e[e.MeetingIsOver=6]="MeetingIsOver",e[e.UserFull=9]="UserFull",e[e.MeetingLocked=12]="MeetingLocked",e[e.WebinarBlockedEmail=3033]="WebinarBlockedEmail",e[e.MeetingNotStarted=3008]="MeetingNotStarted",e[e.MeetingHasClosed=103003]="MeetingHasClosed",e[e.UserHasBeenRemoved=103039]="UserHasBeenRemoved",e[e.MMRIBReject=103043]="MMRIBReject",e[e.MMRConfParticipantExists=103044]="MMRConfParticipantExists",e})({}),UC=(function(e){return e[e.Unknown=0]="Unknown",e[e.Normal=1]="Normal",e[e.Userrequest=2]="Userrequest",e[e.SdkConnection=3]="SdkConnection",e[e.Reconnect=5]="Reconnect",e[e.PtRequest=6]="PtRequest",e[e.KickedByHost=7]="KickedByHost",e[e.EndByHost=8]="EndByHost",e[e.EndByHostStartAnotherMeeting=9]="EndByHostStartAnotherMeeting",e[e.FreeMeetingTimeout=10]="FreeMeetingTimeout",e[e.JBHTimeout=11]="JBHTimeout",e[e.EndBySingleStatus=12]="EndBySingleStatus",e[e.WebinarNeedRegister=13]="WebinarNeedRegister",e[e.ArchiveFail=14]="ArchiveFail",e[e.EndByNone=15]="EndByNone",e[e.EndByAdmin=16]="EndByAdmin",e[e.DuplicateSession=17]="DuplicateSession",e[e.MeetingTransfer=18]="MeetingTransfer",e})({}),a7e=(function(e){return e[e.WaitingRoomFailover=1]="WaitingRoomFailover",e[e.WebEndAndRejoin=2]="WebEndAndRejoin",e})({}),A1=(function(e){return e[e.Success=0]="Success",e[e.CommonError=200]="CommonError",e[e.WrongPasscode=3004]="WrongPasscode",e[e.RoleTypeMissing=3010]="RoleTypeMissing",e[e.InvalidParameter=4003]="InvalidParameter",e})({}),Pc=(function(e){return e[e.Success=0]="Success",e[e.AnotherMeetingInProgress=3e3]="AnotherMeetingInProgress",e[e.MeetingNotExist=3001]="MeetingNotExist",e[e.NotHost=3003]="NotHost",e[e.WrongPasscode=3004]="WrongPasscode",e[e.MissingEmail=3005]="MissingEmail",e[e.MeetingNotStarted=3008]="MeetingNotStarted",e[e.UserHasBeenRemoved=3009]="UserHasBeenRemoved",e[e.RoleTypeMissing=3010]="RoleTypeMissing",e[e.WebinarEnforceLogin=3034]="WebinarEnforceLogin",e[e.RealNameMissing=3082]="RealNameMissing",e[e.RegisterRequired=3099]="RegisterRequired",e[e.SsoLoginWindow=6024]="SsoLoginWindow",e[e.ZoomLoginWindow=3051]="ZoomLoginWindow",e[e.ZoomSpecificLoginWindow=3052]="ZoomSpecificLoginWindow",e[e.LoginRequired=3100]="LoginRequired",e[e.Reconnecting=4e3]="Reconnecting",e[e.Disconnect=4001]="Disconnect",e[e.InvalidParameter=4003]="InvalidParameter",e[e.DeniedRegisterWithPanelist=3032]="DeniedRegisterWithPanelist",e[e.ServiceOffline=403]="ServiceOffline",e[e.RwcEmpty=3621]="RwcEmpty",e[e.RwcError=3622]="RwcError",e[e.FrequentCall=3633]="FrequentCall",e[e.FrequentJoin=3634]="FrequentJoin",e[e.WasmFail=3635]="WasmFail",e[e.CommonError=200]="CommonError",e[e.Upgrade=1e4]="Upgrade",e})({});Pc.Success,Pc.RegisterRequired,Pc.LoginRequired,Pc.SsoLoginWindow,Pc.ZoomLoginWindow,Pc.ZoomSpecificLoginWindow,Pc.MissingEmail,Pc.MeetingNotExist,Pc.NotHost,Pc.WrongPasscode,Pc.RoleTypeMissing,Pc.AnotherMeetingInProgress,Pc.MeetingNotStarted,Pc.InvalidParameter,Pc.Reconnecting,Pc.UserHasBeenRemoved,Pc.WebinarEnforceLogin,Pc.Disconnect,Pc.DeniedRegisterWithPanelist,Pc.RwcEmpty,Pc.RwcError,Pc.FrequentCall,Pc.FrequentJoin,Pc.WasmFail,Pc.Upgrade;const c_e={3004:{"incorrect passcode":3004},3005:{"apac.errorcodes_web_has_in_progress":3e3},3008:{"apac.errorcodes_not_start":3008},3027:{"apac.errorcodes_host_email_as_attendee":3627},3033:{"apac.errorcodes_denied_email":3620},1005:{"apac.errorcodes_no_response_from_web":3621},131005:{"apac.errorcodes_no_response_from_web":3621},1001:{"apac.errorcodes_host_inactive":3625},131001:{"apac.errorcodes_host_inactive":3625},131013:{"meeting ended":4004},103039:{"user has been removed":3009},6:{"meeting ended":4004},9:{"meeting is at capacity":4005},12:{"meeting locked":4006},103043:{"reject for information barriers":4007},103044:{"participant exist":4008}};function _1(e,n){let r={code:200};if(c_e[e]!==void 0){const i=c_e[e],l=Object.keys(i)[0];return r={code:i[l],i18nKey:l},{reason:l.startsWith("apac")?"":l,errorCode:r.code}}return{errorCode:200,reason:"connection error"}}const Qf=Dd.getInstance(),mpe=()=>{if("connection"in navigator){const{effectiveType:e,rtt:n,downlink:r}=navigator.connection;Qf.makeLogger(["Network Connection Type"]).info(`Network connection. ect:${e},rtt:${n},downlink:${r}`)}},tA=Dd.getInstance().makeLogger(["Remote Control"]),l_e=sp(Yo.getInstance()),c7e=[{event:Cn.AudioBridgeReconnectStart,message:xR.AudioBridgeReconnectStart,logType:"info",additionalTags:["Audio Join Flow"]},{event:Cn.AudioBridgeReconnectEnd,message:xR.AudioBridgeReconnectEnd,logType:"info",additionalTags:["Audio Join Flow"]},{event:Cn.UserGrantCaptureAudio,message:e=>`${xR.DeviceAudioStreamCaptured},${Oge(e)}`,logType:"info",additionalTags:["Audio Capture Flow"]},{event:Cn.JoinComputerAudioComplete,message:xR.AudioJoinComplete,logType:"info",additionalTags:["Audio Join Flow"]},{event:Cn.LeaveComputerAudioComplete,message:xR.AudioLeaveComplete,logType:"info",additionalTags:["Audio Join Flow"]},{event:Cn.JoinSharingAudioComplete,message:xR.SharingAudioStartComplete,logType:"info",additionalTags:["Audio Sharing Flow"]},{event:Cn.LeaveSharingAudioComplete,message:xR.SharingAudioStopComplete,logType:"info",additionalTags:["Audio Sharing Flow"]}],l7e=[{event:Cn.StartVideoCaptureSuccess,message:e=>`${DR.StartCaptureVideoSuccess}, ${UPe(e)}`,logType:"info",additionalTags:["Video Join Flow"]},{event:Cn.StopVideoCaptureSuccess,message:DR.StopCaptureVideoSuccess,logType:"info",additionalTags:["Video Join Flow"]},{event:Cn.StartVideoStreamInVbSettingSuccess,message:DR.VBSettingSuccess,logType:"info",additionalTags:["Video VB Flow"]},{event:Cn.VbModelPreloadingOk,message:DR.VBPreloadSuccess,logType:"info",additionalTags:["Video VB Flow"]},{event:Cn.VbModelPreloading_3S,message:DR.VBPreloading3S,logType:"warn",additionalTags:["Video VB Flow"]},{event:Cn.VbModelPreloading_10S,message:DR.VBPreloading10S,logType:"warn",additionalTags:["Video VB Flow"]},{event:Cn.VbSettingParaError,message:DR.VBSettingFailed,logType:"error",additionalTags:["Video VB Flow"]}],u_e=c7e.map((e=>({...e,tag:"Audio"}))).concat(l7e.map((e=>({...e,tag:"Video"})))),Xm=Dd.getInstance(),{InitSuccessVideo:u7e,InitSuccessAudio:d7e,InitSuccessSharing:f7e,InitFailedVideo:p7e,InitFailedAudio:h7e,InitFailedSharing:m7e,AudioCaptureFailed:d_e,AudioWebsocketBroken:g7e,AudioZeroData:f_e,UserForbiddedCaptureVideo:p_e,UserCameraIsTakenByOtherPrograms:h_e,VideoWebsocketBroken:v7e,StopVideoCaptureFailed:b7e,DesktopSharingPermissionDenied:y7e,DesktopSharingSystemError:m_e,AudioSpeakerSetError:g_e,VbSettingParaError:S7e,MaskSettingParaError:C7e,WebglLostInMultiView:E7e,VideoStreamFailed:v_e,AudioStreamFailed:b_e,NotifyUIFailover:_7e,RecaptureAudio:y_e,WorkletProcessExceptions:w7e}=Cn,A7e=Yo.getInstance(),LR=Dd.getInstance(),gpe={options:void 0,isLaplaceInitialized:!1,isLogDetailed:!0},T7e=op({[`${s0e}`]:We(((e,{payload:n})=>{e.options=n})),[`${UX}`]:We(((e,{payload:n})=>{e.isLaplaceInitialized=n})),[`${_Pe}`]:We(((e,{payload:n})=>{e.isLogDetailed=n})),[`${wPe}`]:({options:e,isLogDetailed:n},{payload:r})=>r?{...gpe,isLogDetailed:n,options:e}:{...gpe}},gpe),O7e={mlEpics0:(e,n)=>bs(e,[u7e,d7e,f7e,p7e,h7e,m7e]).pipe(Jh(e,n,(r=>{const{payload:{type:i,data:l}}=r,{meeting:{userId:f}}=n.value,h=(function(v,y){const _=r7e[`${v}`];if(_){const{name:A,isException:R}=_,k=[A,`${A} Init Flow`];R&&k.push(`${A} exception flow`);let N="";return[s_e,r_e].includes(y)&&(N=`${N} decode`.trim()),[i_e,a_e].includes(y)&&(N=`${N} encode`.trim()),[i_e,s_e].includes(y)&&(N=`${N} success`.trim()),[r_e,a_e].includes(y)&&(N=`${N} failed`.trim()),{message:`init ${A.toLowerCase()} ${N}`,tags:k,isException:R}}return null})(i,l);if(h){const{message:v,tags:y,isException:_}=h;_?Xm.report(`${v}. userId:${f}`,y):Xm.makeLogger(y).info(v)}}))),mlEpics1:(e,n)=>bA(e,n,u_e.map((r=>r.event)),(r=>{const{payload:{type:i}}=r,l=u_e.find((f=>f.event===i));if(l){const{message:f,logType:h,additionalTags:v,tag:y}=l;let _=f;typeof f=="function"?window.setTimeout((()=>{_=f(n.value),Xm.makeLogger([y])[h](_,v)}),0):_&&Xm.makeLogger([y])[h](_,v)}})),mlEpics2:(e,n)=>e.pipe(co(`${PL}`),Gt((r=>!r.payload)),Jh(e,n,(()=>{Xm.makeLogger(["Audio"]).warn(`Auto play audio failed,${Oge(n.value)}`)}))),mlEpics3:(e,n)=>bA(e,n,_7e,(r=>{Xm.report(`WebRTC notify ui failover, subreason:${JSON.stringify(r.payload.data)}`,["Audio exception flow"])})),mlEpics4:(e,n)=>bA(e,n,[d_e,g7e,f_e,g_e,b_e,y_e,w7e],(r=>{const{payload:{type:i,data:l}}=r;let f=`Audio error case:${i}`;var h,v;i===d_e?f=`Audio capture failed. errorCode:${l==null?void 0:l.errorCode}, message:${l==null?void 0:l.errorMessage}, error:${l==null||(h=l.error)===null||h===void 0?void 0:h.name} ${l==null||(v=l.error)===null||v===void 0?void 0:v.message}.`:i===f_e?n.value.audio.webrtcRestartCount<3&&(f="audio capture zero data, auto failover"):i===g_e?f=`audio change speaker error. errorCode:${l==null?void 0:l.errorCode}, message:${l==null?void 0:l.errorMessage}.`:i===b_e?f="audio stream ended or muted, stop capture audio":i===y_e&&(f="audio muted after switching from background, try to recapture audio"),Xm.report(`${f},${Oge(n.value)}`,["Audio exception flow"])})),mlEpics5:(e,n)=>bA(e,n,[p_e,h_e,v7e,b7e,v_e],(r=>{const{payload:{type:i,data:l}}=r;let f=`Video error case:${i}`;if(i===p_e)f="Video capture is forbidden by the user"+(l?` (error name:${l==null?void 0:l.name};error message:${l==null?void 0:l.message})`:"");else if(i===h_e)f="Camera is taken by other programs"+(l?` (error name:${l==null?void 0:l.name};error message:${l==null?void 0:l.message})`:"");else if(i===S7e){var h;f=`VB setting error, param:${JSON.stringify((h=n.value.video.virtualBackground)!==null&&h!==void 0?h:{})}`}else if(i===C7e){var v;f=`Mask setting error, param:${JSON.stringify((v=n.value.video.mask)!==null&&v!==void 0?v:{})}`}else i===v_e&&(f=`Video stream ended or muted, if it is on iOS platform, will stop capture video.platform:${bo.browser}`);Xm.report(`${f},${UPe(n.value)}`,["Video exception flow"])})),mlEpics6:(e,n)=>bA(e,n,[y7e,m_e],(r=>{const{payload:{type:i}}=r;let l="";i===m_e?bo.isMacOS&&(l="Need to allow screen recording access in system setting on MacOS"):l="Need to allow the permission request",Xm.report(`${l}`,["Sharing exception flow"])})),mlEpics7:(e,n)=>bA(e,n,E7e,(r=>{const{payload:{data:i}}=r,{video:{renderedVideoList:l}}=n.value;if(i!=null&&i.canvasId){const f=l.filter((h=>h.canvasId===i.canvasId));Xm.report(`WebGl Context lost, canvas ID:${i.canvasId}, affected video node Ids:${f.map((h=>h.userId)).join(",")}`,["Video exception flow"])}})),mlEpics8:(e,n)=>Jl(document,"visibilitychange").pipe(Jh(e,n,(()=>{if(Xm.makeLogger(["Video"]).log(`Page visibility ${document.visibilityState} `),document.visibilityState=="hidden"&&bo.isAndroidOrIOSBrowser){const{logger:{isLogDetailed:r,isLaplaceInitialized:i}}=n.value;r&&i&&Xm.reportToGlobalTracing(void 0,!0,!0)}setTimeout((()=>{const r=document.visibilityState!=="visible",{video:{subscribedVideoList:i},meeting:{userId:l}}=n.value,f=i.filter((h=>h!==l)).length>0;r&&f&&(zr.createAgent().sendRWGConnectionPerformance("VCSV"),Xm.makeLogger(["Video"]).warn("Still subscribing videos after switching to background"))}),1e3)}))),mlEpics9:e=>bs(e,Cn.InitSuccessVideo).pipe(Gt((n=>n.payload.data===zp.EncodeSuccess&&bo.isAndroidOrIOSBrowser)),mr((()=>{const n=Xm.makeLogger(["Video"]);return n.info("Screen orientation: "+(cDe()?"landscape":"portrait")),lDe().pipe(ao((r=>{n.info("Screen orientation changes, current orientation: "+(r?"landscape":"portrait"))})),Xp())})))},I7e={rmclEpics0:(e,n)=>e.pipe(co(`${Kbe}`),Jh(e,n,(r=>{const{payload:{isRemoteControlEnabled:i,isEnableAutoDeleteRcApp:l}}=r;tA.log(`isRemoteControlEnabled:${i},auto delete:${l}`)}))),rmclEpics1:(e,n)=>e.pipe(co(`${k1}`),Gt((r=>!!r.payload)),Jh(e,n,(r=>{let i=r.payload;try{const l=new URL(i),f=l.searchParams.get("accountID");f&&(l.searchParams.set("accountID",Od(f)),i=l.toString()),tA.log(`Launch Remote control app, scheme:${i}`)}catch{}}))),rmclEpics2:(e,n)=>e.pipe(co(`${c5}`),Gt((r=>!!r.payload)),Jh(e,n,(r=>{tA.log(`Remote control session starts, controlling ssrc:${r.payload}`)}))),rmclEpics3:(e,n)=>aL(e,n,16430,(()=>{tA.log("Remote control app connected to rwg.")})),rmclEpics4:(e,n)=>aL(e,n,zme,(()=>{tA.log("Remote control app disconnected to rwg.")})),rmclEpics5:(e,n)=>aL(e,n,zme,(r=>{const{share:{status:i,isRemoteControlEnabled:l}}=n.value;l&&i!==qs.End&&r.payload.body.bOn&&tA.log(`Remote control sharing device info.${JSON.stringify(l_e.getShareStreamInfo())}`)})),rmclEpics6:(e,n)=>bA(e,n,Cn.CurrentDesktopSharingWidthHeight,(()=>{const{share:{isRemoteControlEnabled:r}}=n.value;r&&tA.log(`Remote control sharing device info changes.${JSON.stringify(l_e.getShareStreamInfo())}`)})),rmclEpics7:(e,n)=>bA(e,n,Cn.SendRemoteControlQrCode,(r=>{const{share:{status:i}}=n.value,{payload:{data:l}}=r;tA.log(`Remote control QR code result. sharing status:${i}, result${JSON.stringify(l)}`)}))},R7e={epics0:(e,n)=>e.pipe(co(`${om}`),Nt((async r=>{const{meeting:{logConfig:i,logEncryptionPubKey:l,zlkJwtToken:f,accountId:h,enableAutoLog:v,collectionToggleEnable:y,zsk:_,isUIToolkit:A},logger:{options:R}}=n.value;let k=R||{};if(i)try{const{enable:N,enableReport:L}=JSON.parse(i);k={...k,enable:N,enableReport:L}}catch{}if(f){const{telemetry_tracking_id:N}=bE(f),{payload:{meetingId:L}}=r;k={...k,enable:!0,enableReport:!0,trackingId:N??L}}else{let N=!1;N=_&&y!==void 0?!(v&&y):!v,rr.set(cMe.DisableAutoReportLogs,N,Zr.Memory)}return Qf.init({...k,logConfig:i,logEncryptionPubKey:l,accountId:h,isUIToolkit:A}).then((()=>[UX(!0),s0e(k)])).catch((()=>[UX(!1)]))})),Nt((r=>An(r)))),epics1:(e,n)=>aL(e,n,AQ,(r=>{var i,l,f,h;const{payload:{body:v}}=r;if(v&&v.res===tg.Success){Qf.makeLogger(["A/V Performance Info"]).info(`CPU cores:${navigator.hardwareConcurrency}, SharedArrayBuffer:${!!bo.isSupportSharedArrayBuffer},
          OffscreenCanvas:${!!bo.isSupportOffscreenCanvas}, browser:${bo.browser} ${bo.browserVersion}, OS:${bo.os} ${bo.osVersion}${CU("wow64",bo.wow64)}${CU("GPU",bo.gpu)}${CU("architecture",bo.architecture)}${CU("bitness",bo.bitness)}${CU("model",bo.model)}`,["CPU_CORES"]);const{media:{enforceMultipleVideos:$t,enforceVirtualBackground:Be,assetsPath:at,disableRenderLimits:lt},meeting:{stayAwake:$e,quicklyLeave:qt}}=n.value;Qf.makeLogger(["Init Option"]).info(`Init option:${JSON.stringify({enforceMultipleVideos:$t,disableRenderLimits:lt,enforceVirtualBackground:Be,assetsPath:at,stayAwake:$e,leaveOnPageUnload:qt})}`),"connection"in navigator&&(mpe(),navigator.connection.addEventListener("change",mpe))}else Qf.report(`join meeting failed, error:${JSON.stringify(_1(v==null?void 0:v.res))}, rwg error code:${v==null?void 0:v.res}, rwg conID:${v==null?void 0:v.conID}, error message:${v==null?void 0:v.error_desc}, rwg url:${v==null?void 0:v.svcUrl},mid:${n.value.meeting.meetingId}`,"JOIN_MEETING_FAILED","error");const{meeting:{meetingInfoTimestamp:y,pingRWCTimestamp:_,tid:A,meetingId:R,topic:k,accountId:N,cv:L,zlkJwtToken:B,websdkClientFeatureOptions:H},socket:{rwgServerList:q,retryCount:Y},video:{rendererType:K},media:{patchJsMedia:se,assetsPath:ie},audio:{isWebRtcAudioCapable:le},logger:{isLogDetailed:M}}=n.value;let we=["conID","confID","mmrFeature","mmrFeatureEx","reportDomain","res","role","svcUrl","userID","userGUID","useWBVideo","useWBAudio"].reduce((($t,Be)=>v[Be]!==void 0?{...$t,[`${Be}`]:v[Be]}:$t),{});we=["jid","mn","participantID"].reduce((($t,Be)=>v[Be]!==void 0?{...$t,[`${Be}`]:Od(v[Be])}:$t),we),we.response=we.res,delete we.res;const Ne=["connection_info_map"];let De;if(v.res===tg.Success&&Ne.push("Command Socket Event","User Info Map"),A){const $t=A.match(/clid=(\S+);/);$t&&$t.length>1&&(De=$t[1])}const be=Math.floor(performance.now()-y),me=Math.floor(performance.now()-_);let[Ye,Ke]=[void 0,void 0];if(B){var Ze;const{enforce_web_rtc_audio:$t,audio_compatible_mode:Be,audio_webrtc_mode:at,video_webrtc_mode:lt}=bE(B);Ye=(Ze=at??Be)!==null&&Ze!==void 0?Ze:$t,Ke=lt}const z=zr.createAgent();Qf.report(JSON.stringify({...we,tid:A,mid:R,userRegion:De,rwgUrl:q.length>0?(i=q[Y])===null||i===void 0?void 0:i.rwg:void 0,hardwareConcurrency:navigator.hardwareConcurrency,sharedArrayBuffer:bo.isSupportSharedArrayBuffer,OffscreenCanvas:bo.isSupportOffscreenCanvas,browserVersion:`${bo.browser} ${bo.browserVersion}`,osVersion:`${bo.os} ${bo.osVersion}`,gpu:bo.gpu,architecture:bo.architecture,model:bo.model,bitness:bo.bitness,wow64:bo.wow64,totalDurationOfJoining:be,durationOfRWG:me,rendererType:K,sdkVersion:L,mediaSdkVersion:(l=window.JsMediaSDK_Instance)===null||l===void 0?void 0:l.version,topic:k?Od(k):void 0,accountId:N?Od(N):void 0,patchJSMediaSDK:se,dependentAssets:ie,webRtcAudio:le,crossOriginIsolated:!!window.crossOriginIsolated,jwtAudio:Ye,jwtVideo:Ke,isRlbTP:(f=z.websocket)===null||f===void 0?void 0:f.isRlb,abOption:H,logDetail:M}),Ne,"info"),z.sendRWGConnectionPerformance(`WCL_M, conId: ${v==null?void 0:v.conID}, trackingId: ${(h=n.value.logger)===null||h===void 0||(h=h.options)===null||h===void 0?void 0:h.trackingId}, JOINFS(${be}), JOINFRWC(${me})`)})),epics2:(e,n)=>e.pipe(co(`${wbe}`),_o(n),Gt((([,r])=>r.meeting.encryptedRWC===void 0&&(r.meeting.encryptedGEORWC===void 0||r.meeting.encryptedGEORWC.length===0))),Jh(e,n,(()=>{const{label:r,payload:i}=PR(n.value);Qf.report(`${r} ${JSON.stringify(i)}`,["Join Meeting Flow","Ping RWC Domain Empty"],"error")}))),epics3:(e,n)=>e.pipe(co(`${Qp}`),Gt((r=>r.payload===qu.OnError||r.payload===qu.Disconnect||r.payload===qu.NoHeartbeat)),Jh(e,n,(r=>{var i;const{payload:l}=r,{socket:{rwgServerList:f,retryCount:h}}=n.value,{payload:v}=PR(n.value);Qf.report(`websocket unexpected disconnected,${JSON.stringify({code:l,rwgHost:(i=f[h])===null||i===void 0?void 0:i.rwg,...v})}`,["Join Meeting Flow","RWG Disconnect"])}))),epics4:(e,n)=>e.pipe(co(`${gX}`),Jh(e,n,(r=>{const{payload:{reason:i,count:l,interval:f,sequence:h,userId:v,userGUID:y,meetingId:_}}=r,{payload:A}=PR(n.value,{meetingId:_,userId:v,userGUID:y});Qf.report(`meeting failover,${JSON.stringify({reason:i,count:l,interval:f,sequence:h,detailed:i7e(h),...A})}`,["Join Meeting Flow","Failover"]),"connection"in navigator&&navigator.connection.removeEventListener("change",mpe)}))),epics5:(e,n)=>e.pipe(co(`${i5}`),Gt((r=>r.payload.status===wi.Connecting)),Jh(e,n,(r=>{const{payload:{rwgUrl:i}}=r;let l=i.replace(/(\d+)\?/,`${Od("$1")}?`);l=["email","zoomid","participantID","dn2","customer_key","mpwd","topic"].reduce(((h,v)=>h.indexOf(v)>-1?h.replace(new RegExp(`${v}=([^&]+)`,"g"),`${v}=${Od("$1")}`):h),l);const{payload:f}=PR(n.value);Qf.makeLogger(["Join Meeting Flow"]).info(`RWG URL,${JSON.stringify({rwgUrl:l,...f})}`,["RWG Url"])}))),epics6:(e,n)=>e.pipe(co(`${lv}`),Gt((r=>{const{payload:i}=r;return i?i.retry:n.value.meeting.meetingStatus===Tu.Initial})),Jh(e,n,(()=>{const{meeting:{meetingStatus:r},socket:{rwgServerList:i,retryCount:l}}=n.value;if(r!==Tu.Joined){const{payload:f}=PR(n.value),h=(i==null?void 0:i.length)>0?i[l]:void 0;Qf.report(JSON.stringify({...f,rwc:h==null?void 0:h.rwc,rwg:h==null?void 0:h.rwg}),["UNAVAILABLE_RWG"])}}))),epics7:(e,n)=>aL(e,n,1,(r=>{const{payload:{body:i}}=r;Qf.report(`join meeting failed, version blocked. Current version:${n.value.meeting.cv},upgrade version:${i==null?void 0:i.upgradeVersion}`,"JOIN_MEETING_FAILED","error")})),epics8:(e,n)=>aL(e,n,2,(()=>{Qf.report(`join meeting with low version of SDK. Current version:${n.value.meeting.cv}.`,"Join Meeting Flow","warn")})),epics9:(e,n)=>e.pipe(co(`${hX}`,`${DL}`),mr((()=>si(il,1).pipe(ao((r=>{try{const{code:i,reason:l,errorCode:f}=r??{},{payload:h}=PR(n.value);Qf.report(`Connection change with join meeting failed. payload:${JSON.stringify({code:i,reason:l,errorCode:f})}. meeting info:${JSON.stringify(h)}`,"JOIN_MEETING_FAILED","error")}catch{}})),Nt((()=>Yn)))))),epics10:(e,n)=>e.pipe(co(`${lv}`),Gt((r=>{var i;return!((i=r.payload)!==null&&i!==void 0&&i.retry)})),Jh(e,n,(()=>{const{logger:{isLogDetailed:r,isLaplaceInitialized:i}}=n.value;i&&r&&Qf.reportToGlobalTracing(void 0,!0)}))),epics11:(e,n)=>e.pipe(co(`${F1}`),Gt((()=>!!n.value.logger.isLogDetailed)),mr((()=>Jl(window,"beforeunload").pipe(ao((()=>{const{logger:{isLaplaceInitialized:r}}=n.value;r&&Qf.reportToGlobalTracing(void 0,!0,!0)})),Xp())))),epics12:(e,n)=>e.pipe(co(`${vX}`),Jh(e,n,(r=>{const{payload:i}=r,{payload:l}=PR(n.value);Qf.report(`XMPP Socket retry, count:${i},meeting info:${JSON.stringify(l)}`,["Join Meeting Flow","XMPP Socket Retry"])})))},x7e=nh(R7e,I7e,O7e),D7e=zr.createAgent(),S_e={cmrStatus:Cl.Stop,recordingEnable:!1,recordingIsoEnable:!1,allowStopAutoRecording:!1,automaticCloudRecordingEnable:!1,isZoomIQ:!1,zoomIQChanging:!1,localStatus:T5.Stop,supportLocalRecording:Yh.None,localGrantPermissionOption:l$e.None,localPermissionUserList:[]},k7e=op({[`${ZNe}`]:We(((e,{payload:n})=>{e.cmrStatus=n})),[`${YNe}`]:We(((e,{payload:n})=>{e.recordingEnable=n})),[`${JNe}`]:We(((e,{payload:n})=>{e.recordingIsoEnable=n})),[`${XNe}`]:We(((e,{payload:n})=>{e.allowStopAutoRecording=n})),[`${QNe}`]:We(((e,{payload:n})=>{e.automaticCloudRecordingEnable=n})),[`${t0e}`]:We(((e,{payload:n})=>{e.isZoomIQ=n})),[`${n0e}`]:We(((e,{payload:n})=>{e.zoomIQChanging=n})),[`${o0e}`]:We(((e,{payload:n})=>{e.localStatus=n})),[`${Ege}`]:We(((e,{payload:n})=>{e.supportLocalRecording=n})),[`${ePe}`]:We(((e,{payload:n})=>{e.localGrantPermissionOption=n})),[`${iL}`]:We(((e,{payload:n})=>{e.localPermissionUserList=n})),[`${tPe}`]:()=>({...S_e})},S_e);var C_e,E_e,__e,w_e,A_e,T_e,O_e,I_e,hc;const N0=zr.createAgent(),EU=ff("Recording");let M7e=(C_e=ro("recording"),E_e=ro("recording"),__e=ro("recording"),w_e=ro("recording"),A_e=ro("recording"),T_e=ro("recording"),O_e=ro("recording"),I_e=ro("recording"),hc=class extends Q0{startRecording(){const e=this[go](),{meeting:{bIbDisableRecording:n,recordingEnable:r},recording:{cmrStatus:i}}=e;return n?Promise.reject({type:Lt,reason:"Rejected by Information Barrier",errorCode:Fe.RECORDING_ACCOUNT_DISABLE}):r?i===Cl.Start?Promise.resolve(""):(N0.recordMeeting(!0,!1),Cs(QU,(l=>l.cmrServerStatus===Cl.Start))):Promise.reject({type:Lt,reason:"The account of the meeting disabled the cloud recording",errorCode:Fe.RECORDING_ACCOUNT_DISABLE})}pauseRecording(){const e=this[go](),{recording:{cmrStatus:n,allowStopAutoRecording:r}}=e;return n===Cl.Pause?Promise.resolve(""):n!==Cl.Start?Promise.reject({type:Lt,reason:"Recording is not started",errorCode:Fe.RECORDING_MISMATCH_STATE}):r?(N0.recordMeeting(!1,!0),Cs(QU,(i=>i.cmrServerStatus===Cl.Pause))):Promise.reject({type:Lt,reason:"Cannot pause cloud recording due to web setting config",errorCode:Fe.RECORDING_STOP_FORBIDDEN})}stopRecording(){const e=this[go](),{recording:{cmrStatus:n,allowStopAutoRecording:r}}=e;return n===Cl.Stop?Promise.resolve(""):r?(N0.recordMeeting(!1,!1),Cs(QU,(i=>i.cmrServerStatus===Cl.Stop))):Promise.reject({type:Lt,reason:"Cannot stop cloud recording due to web setting config",errorCode:Fe.RECORDING_STOP_FORBIDDEN})}accept(){const e=this[go](),{recording:{cmrStatus:n,recordingIsoEnable:r}}=e,i=Do(e);return r?n!==Cl.Start&&n!==Cl.Pause?Promise.reject({type:Lt,reason:"Recording is not started",errorCode:Fe.RECORDING_MISMATCH_STATE}):i!=null&&i.bAllowISORecord?Promise.resolve("You accepted ISO recording"):(N0.allowSelfRecord(!0),Cs(LJ,(l=>(l==null?void 0:l.userId)===(i==null?void 0:i.userId)&&(l==null?void 0:l.status)===j0.Accept))):Promise.reject({type:Lt,reason:"ISO Recording is not enabled",errorCode:Fe.RECORDING_ISO_DISABLE})}decline(){const e=this[go](),{recording:{cmrStatus:n,recordingIsoEnable:r}}=e,i=Do(e);return r?n!==Cl.Start&&n!==Cl.Pause?Promise.reject({type:Lt,reason:"Recording is not started",errorCode:Fe.RECORDING_MISMATCH_STATE}):(i==null?void 0:i.bAllowISORecord)===!0?Promise.reject({type:Lt,reason:"You had accept ISO recording, cant change it",errorCode:Fe.RECORDING_MISMATCH_STATE}):(N0.allowSelfRecord(!1),Promise.resolve("")):Promise.reject({type:Lt,reason:"ISO Recording is not enabled",errorCode:Fe.RECORDING_ISO_DISABLE})}getRecordingStatus(){const e=this[go](),{recording:{cmrStatus:n}}=e,r=I$e(e);return n===Cl.Start?j0.Recording:n===Cl.Pause?j0.Paused:r?j0.Recording:j0.Stopped}isRecordingEnabled(){const e=this[go](),{recording:{recordingEnable:n}}=e;return n}isAllowedToStopAutoRecording(){const e=this[go](),{recording:{allowStopAutoRecording:n}}=e;return n}isAutomaticCloudRecordingEnabled(){const e=this[go](),{recording:{automaticCloudRecordingEnable:n}}=e;return n}enableRecordingWithIQ(e){const{[go]:n,[Ja]:r}=this,i=n(),{recording:{isZoomIQ:l,zoomIQChanging:f},meeting:{meetingOptions:h}}=n();return h.isEnableKiwiRecording?Qh(i)?f?Promise.reject({type:Lt,reason:"We are changing, please wait",errorCode:Fe.RECORDING_IQ_MISMATCH_STATE}):e===l?Promise.reject({type:Lt,reason:`You have ${e?"enable":"disable"} Zoom IQ, don't need change`,errorCode:Fe.RECORDING_IQ_MISMATCH_STATE}):(r(n0e(!f)),r(t0e(!l)),N0.enableZoomIQRecord(e),Cs(C2e,(v=>v==null?void 0:v.success))):Promise.reject({type:Lt,reason:"Only Host or co-host can enable/disable Zoom IQ",errorCode:Fe.RECORDING_IQ_PERMISSION_REQUIRED}):Promise.reject({type:Lt,reason:"You not have zoom IQ license or not enable zoom IQ, please check and retry",errorCode:Fe.RECORDING_IQ_DISABLE})}isSupportLocalRecording(){const e=this[go](),{meeting:{meetingOptions:n,isWebinar:r},breakoutRoom:i}=e;if((i==null?void 0:i.currentRoom.status)===vs.InRoom)return!1;const l=Do(e);return(!r||!Ku(l.userRole))&&(n==null?void 0:n.isLocalRecordingEnabled)}isSupportLocalRecordingPermission(){const e=this[go](),{recording:{supportLocalRecording:n}}=e;if(!this.isSupportLocalRecording())return!1;const r=Do(e);return!(r==null||!r.isHost)||n===Yh.Allow}askLocalRecordingPermission(){const{[go]:e}=this,{recording:{supportLocalRecording:n}}=e();return this.isSupportLocalRecording()?n===Yh.None?(N0.localRecordingRequestPermission(),Promise.resolve("")):n===Yh.Allow?Promise.resolve(""):Promise.reject({reason:"permission is denied",errorCode:Fe.LOCAL_RECORDING_MISMATCH_STATE}):Promise.reject({reason:"not support",errorCode:Fe.LOCAL_RECORDING_ACCOUNT_DISABLE})}startLocalRecording(e){const{[go]:n,[Ja]:r}=this,i=n(),{recording:{localStatus:l,supportLocalRecording:f},meeting:{userId:h}}=i;if(!(e in T5))return Promise.reject({type:Lt,reason:"not support you parameter, only support type are 0(stop)/1(start)/2(pause).",errorCode:Fe.LOCAL_RECORDING_INVALID_VALUE});if(!this.isSupportLocalRecording())return Promise.reject({type:Lt,reason:"not support local recording",errorCode:Fe.LOCAL_RECORDING_ACCOUNT_DISABLE});if(e===l)return Promise.resolve(`you currently status is ${l}, do nothing`);const v=Do(i);return f===Yh.Allow||v!=null&&v.isHost?(N0.localRecordingMeeting(e),Cs(BJ,(y=>(y==null?void 0:y.userId)===h&&(r(o0e(y.bLocalRecord)),y.bLocalRecord===e)),1e3)):Promise.reject({type:Lt,reason:"you not have local recording permission, please use askLocalRecordingPermission request it first",errorCode:Fe.LOCAL_RECORDING_MISMATCH_STATE})}isSupportLocalRecordingGrantPermission(){const e=this[go]();if(!this.isSupportLocalRecording())return!1;const n=Do(e);return!(n==null||!n.isHost)&&!!jZ(n.caps)}grantLocalRecordingPermission(e,n,r){const{[go]:i,[Ja]:l}=this,f=i(),{recording:{localPermissionUserList:h}}=f;if(!this.isSupportLocalRecording())return Promise.resolve(!1);const v=Do(f);if(!jZ(v.caps))return Promise.reject({type:Lt,reason:"you can not grant permission",errorCode:Fe.LOCAL_RECORDING_MISMATCH_STATE});let y=!1;if(r&&(y=!0),h.filter((_=>_===e)).length>0){if(n===Yh.Allow)N0.localRecordingGrantPermission(e,!0,y);else{if(n!==Yh.Deny)return Promise.reject({type:Lt,reason:"only support DENY(1)/ALLOW(2)",errorCode:Fe.LOCAL_RECORDING_INVALID_VALUE});N0.localRecordingGrantPermission(e,!1,y)}return l(iL(h.filter((_=>_!==e)))),He(R1,{type:"answer",value:n===Yh.Allow}),Promise.resolve(!1)}return n!==Yh.Deny?Promise.reject({type:Lt,reason:"Direct grant only support DENY(1)",errorCode:Fe.LOCAL_RECORDING_INVALID_VALUE}):(N0.hostGrantPermission(e,!1),Cs(R1,(_=>(_==null?void 0:_.value)===e&&(n===Yh.Allow?(l(iL([...h,e])),(_==null?void 0:_.canRecord)===!0):(l(iL(h.filter((A=>A!==e)))),(_==null?void 0:_.canRecord)===!1))),1e3))}getLocalRecordingPermissionUserList(){const e=this[go](),{recording:{localPermissionUserList:n}}=e;if(!this.isSupportLocalRecording())return[];const r=Do(e);return jZ(r.caps)?n:Promise.reject({type:Lt,reason:"you can not grant permission",errorCode:Fe.LOCAL_RECORDING_MISMATCH_STATE})}getLocalRecordingPermissionOperation(){const e=this[go](),{recording:{localGrantPermissionOption:n}}=e;if(!this.isSupportLocalRecording())return null;const r=Do(e);return jZ(r.caps)?n:null}},fn(hc.prototype,"startRecording",[Bc,hn,C_e,EU],Object.getOwnPropertyDescriptor(hc.prototype,"startRecording"),hc.prototype),fn(hc.prototype,"pauseRecording",[Bc,hn,E_e,EU],Object.getOwnPropertyDescriptor(hc.prototype,"pauseRecording"),hc.prototype),fn(hc.prototype,"stopRecording",[Bc,hn,__e,EU],Object.getOwnPropertyDescriptor(hc.prototype,"stopRecording"),hc.prototype),fn(hc.prototype,"accept",[hn,w_e,EU],Object.getOwnPropertyDescriptor(hc.prototype,"accept"),hc.prototype),fn(hc.prototype,"decline",[hn,A_e,EU],Object.getOwnPropertyDescriptor(hc.prototype,"decline"),hc.prototype),fn(hc.prototype,"askLocalRecordingPermission",[hn,T_e],Object.getOwnPropertyDescriptor(hc.prototype,"askLocalRecordingPermission"),hc.prototype),fn(hc.prototype,"startLocalRecording",[hn,O_e],Object.getOwnPropertyDescriptor(hc.prototype,"startLocalRecording"),hc.prototype),fn(hc.prototype,"grantLocalRecordingPermission",[hn,El,I_e],Object.getOwnPropertyDescriptor(hc.prototype,"grantLocalRecordingPermission"),hc.prototype),hc);const N7e={moduleEpics0:e=>e.pipe(co(`${om}`),Kn((n=>{const{payload:{recordingEnable:r}}=n;return YNe(r)}))),moduleEpics1:(e,n)=>oo(e,av).pipe(Gt((r=>{var i,l,f;return((i=r.payload.body)===null||i===void 0?void 0:i.cmrServerStatus)!==void 0||((l=r.payload.body)===null||l===void 0?void 0:l.disAllowClientStopAutoCmr)!==void 0||((f=r.payload.body)===null||f===void 0?void 0:f.enableAutomicRecordingCloud)!==void 0})),_o(n),Nt((([r,i])=>{const{cmrServerStatus:l,disAllowClientStopAutoCmr:f,enableAutomicRecordingCloud:h}=r.payload.body,v=[];return l!==void 0&&(l!==Cl.Init&&(He(QU,{cmrServerStatus:l}),i.recording.recordingIsoEnable&&l===Cl.Start&&He(LJ,{status:j0.Ask})),v.push(ZNe(l))),f!==void 0&&v.push(XNe(!f)),h!==void 0&&v.push(QNe(h)),An(v)}))),moduleEpics2:e=>oo(e,av).pipe(Gt((n=>{var r;return((r=n.payload.body)===null||r===void 0?void 0:r.bCmrIsoEnble)!==void 0})),Kn((n=>{const{bCmrIsoEnble:r}=n.payload.body;return JNe(r)}))),moduleEpics3:(e,n)=>oo(e,la).pipe(_o(n),Gt((([r])=>{const{payload:{body:{update:i,add:l}}}=r;return(i==null?void 0:i.some((f=>f.bLocalRecordStatus!==void 0||f.canRecord!==void 0)))||(l==null?void 0:l.some((f=>f.bLocalRecordStatus!==void 0||f.canRecord!==void 0)))})),Nt((([r,i])=>{const{payload:{body:{update:l,add:f}}}=r,{meeting:{userId:h,isHost:v},recording:{supportLocalRecording:y},participants:{attendeesList:_}}=i,A=[];return l==null||l.concat(f||[]).filter((R=>R.bLocalRecordStatus!==void 0||R.canRecord!==void 0)).forEach((R=>{if(R.canRecord!==void 0){const k=!!R.canRecord;if(h===R.id||v){const N=_.find((L=>L.userId===h));!k&&N!=null&&N.bLocalRecord&&(He(R1,{type:"revoke",value:R.id,canRecord:k}),D7e.localRecordingMeeting(T5.Stop)),!k||N!=null&&N.bLocalRecord||He(R1,{type:"grant",value:R.id,canRecord:k})}h===R.id&&((y!==Yh.None||k)&&A.push(Ege(k?Yh.Allow:Yh.Deny)),k||A.push(o0e(T5.Stop)))}else He(BJ,{userId:R.id,bLocalRecord:R.bLocalRecordStatus})})),An(A)}))),moduleEpics4:(e,n)=>oo(e,la).pipe(Kn((r=>aE(r.payload.body))),_o(n),Nt((([r,i])=>{const l=[],{recording:{localPermissionUserList:f}}=i;return r.remove&&r.remove.forEach((h=>{f.filter((v=>v===(h==null?void 0:h.userId)))&&(l.push(iL(f.filter((v=>v!==(h==null?void 0:h.userId))))),He(R1,{type:"remove",value:h==null?void 0:h.userId}))})),An(l)}))),moduleEpics5:e=>oo(e,la).pipe(Gt((n=>{const{payload:{body:{update:r}}}=n;return r==null?void 0:r.some((i=>i.bAllowISORecord!==void 0))})),ao((n=>{const{payload:{body:{update:r}}}=n;r.filter((i=>i.bAllowISORecord!==void 0)).forEach((i=>{He(LJ,{userId:i.id,status:i.bAllowISORecord?j0.Accept:j0.Decline})}))})),yi(Yn)),moduleEpics6:e=>oo(e,av).pipe(Gt((n=>{var r;return((r=n.payload.body)===null||r===void 0?void 0:r.SalesRecordingAnalytics)!==void 0})),Kn((n=>{const{SalesRecordingAnalytics:r}=n.payload.body;return He(S2e,{isZoomIQ:r}),t0e(r)}))),moduleEpics7:(e,n)=>oo(e,4319).pipe(_o(n),Gt((([r])=>{var i;return((i=r.payload.body)===null||i===void 0?void 0:i.success)!==void 0})),Nt((([r,i])=>{const l=[],{success:f}=r.payload.body,{recording:{zoomIQChanging:h}}=i;return He(C2e,{success:f}),f&&l.push(n0e(!h)),An(l)}))),moduleEpics8:(e,n)=>oo(e,4344).pipe(_o(n),Gt((([r])=>{var i;return((i=r.payload.body)===null||i===void 0?void 0:i.cmdType)!==void 0})),Nt((([r,i])=>{var l;const f=[],{cmdType:h}=r.payload.body,{recording:{localPermissionUserList:v},meeting:{isHost:y}}=i;var _,A,R,k;return h==="permission_req_option"&&(He(R1,{type:"option",value:(_=r.payload.body)===null||_===void 0?void 0:_.option}),f.push(ePe((A=r.payload.body)===null||A===void 0?void 0:A.option))),h==="request_permission"&&(l=r.payload.body)!==null&&l!==void 0&&l.userId&&(y&&He(R1,{type:"request",value:(k=r.payload.body)===null||k===void 0?void 0:k.userId}),f.push(iL([...v,(R=r.payload.body)===null||R===void 0?void 0:R.userId]))),h==="permission_request_answer"&&(He(R1,{type:"answer",value:r.payload.body.agreed}),f.push(Ege(r.payload.body.agreed?Yh.Allow:Yh.Deny))),An(f)})))},P7e=nh(N7e);let WX=(function(e){return e[e.All=1]="All",e[e.Private=2]="Private",e})({}),jPe=(function(e){return e.SUCCESS="success",e})({}),p2=(function(e){return e.Screenshot="__zoom_internal_message_screenshot__@@",e.SpeakerOnly="__zoom_internal_message_speaker_only__@@",e})({});const L7e=Q2.getInstance(),B7e=zr.createAgent();async function zPe(e,n,r){const i=Qxe(e);return n?await xd.beginEncrypt({text:i,type:r}):i}const WY=async(e,n,r)=>{try{let i="";if(await(function(y){const{cmd:{connectionStatus:_}}=y;return _===jPe.SUCCESS?Promise.resolve(!0):Ra(si(nbe,1)).then((A=>A===DP.Connected||Promise.reject({type:Lt,reason:"Cannot establish the command channel"})))})(r()),n){await(function(_,A){const{cmd:{jids:R}}=A;return Object.prototype.hasOwnProperty.call(R,_)?Promise.resolve():Ra(si(yA).pipe(h2e((k=>k.findIndex((N=>Number(N.userId)===_))===-1)),Ys(1),al(nm)))})(n,r());const{cmd:{jids:y}}=r();if(!y[n])return Promise.reject({type:Wu,errorCode:Fe.INTERNAL_ERROR});i=y[n].jid}const{meeting:{encType:l}}=r(),f=i?WX.Private:WX.All,h=l===f6.AES_GCM,v=await zPe(e,h,Rd.XMPP_CHAT);L7e.sendWebinarMseeage(v,i,f,h)}catch{}return""},GY=async(e,n)=>{const r=await zPe(e,!1,Rd.RWG_CHAT);return B7e.sendCommandMessage(r,n),""};function Ige(e,n){for(const[r,i]of Object.entries(e))if(i.jid===n)return r}function R_e(e,n){let r,i=!1;if(e!=null&&e.startsWith(p2.SpeakerOnly)){const l=e.substring(p2.SpeakerOnly.length),f=Number(l)===1;r=M5({userId:n,key:"isSpeakerOnly",value:f}),i=!0}else if(e.startsWith(p2.Screenshot)){const l=e.substring(p2.Screenshot.length);try{const{userId:f,displayName:h,type:v}=JSON.parse(l);He(v==="video"?L2e:hxe,{userId:f,displayName:h})}catch(f){console.log(f)}i=!0}return[i,r]}const x_e=e=>n=>n.pipe(Nt((r=>{const{payload:{userId:i}}=r;return Ai(e.value).some((l=>l.userId===i))?An([r]):mf(si(mQ).pipe(Gt((l=>l.some((f=>f.userId===i)))),Ys(1),al(nm),Kn((()=>r))),Uc(3e3).pipe(Xp()))}))),D_e={connectionStatus:"initial",jids:{}},V7e=op({[`${rPe}`]:()=>({...D_e}),[`${nPe}`]:We(((e,{payload:n})=>{const{data:r,attendees:i}=n;r.forEach((l=>{const{jid:f,node:h}=l;if(!e.jids[h]||e.jids[h].jid!==f){const v=i.find((y=>y.userId===Number(h)));e.jids[h]={jid:f,userGuid:v==null?void 0:v.userGUID}}}))})),[`${oPe}`]:We(((e,{payload:n})=>{n.forEach((r=>{const{jid:i}=r,l=Ige(e.jids,i);l&&delete e.jids[l]}))})),[`${sPe}`]:We(((e,{payload:n})=>{e.connectionStatus=n}))},D_e);var _U;let H7e=(_U=class extends Q0{send(e,n){if(!e)return Promise.reject({type:gs,reason:"Text is empty",errorCode:Fe.CMD_EMPTY_MESSAGE});if(typeof e!="string")return Promise.reject({type:gs,reason:"Text is not a string",errorCode:Fe.CMD_INVALID_MESSAGE_TYPE});if(e.length>512)return Promise.reject({type:gs,reason:"Text exceeds the max length(512).",errorCode:Fe.CMD_EXCEED_MESSAGE_LENGTH});const{[go]:r}=this,i=r(),{socket:{xmppSocketStatus:l},meeting:{userId:f}}=i;return l!==wi.Connected?Promise.reject({type:Lt,reason:"Command channel is not ready",errorCode:Fe.CMD_CHANNEL_NOT_READY}):n&&Ai(r()).findIndex((h=>h.userId===n))===-1?Promise.reject({type:gs,reason:"Cannot find the user",errorCode:Fe.CMD_MISMATCH_USER}):Promise.race([WY(e,n??0,r),GY(e,n??0)]).then((()=>({timestamp:new Date().getTime(),text:e,receiverId:n??0,senderId:f})))}getJids(){const{[go]:e}=this,n=e(),{cmd:{jids:r}}=n;return r}},fn(_U.prototype,"send",[hn],Object.getOwnPropertyDescriptor(_U.prototype,"send"),_U.prototype),_U);const F7e={epics0:(e,n)=>eL(e,24577).pipe(_o(n),Kn((([r])=>{const{payload:{body:{status:i}}}=r;return i===jPe.SUCCESS&&He(nbe,DP.Connected),sPe(i)}))),epics1:(e,n)=>eL(e,24583).pipe(_o(n),Nt((async([r,i])=>{const{meeting:{userId:l,encType:f},cmd:{jids:h}}=i,{payload:{body:{senderName:v,senderJid:y,text:_,type:A,receiver:R,msgid:k,sn:N}}}=r,L=Ige(h,y),B=Ai(i).find((q=>q.userId===Number(L)));if(B&&(B.caps&xEe)===xEe)return"";{const q=Ige(h,R),Y=f===f6.AES_GCM,K=new Date().getTime();let se=_;if(Y)try{se=(await xd.beginDecrypt({decryptedText:_,type:Rd.XMPP_CHAT,zoomId:N})).message}catch{}if(A===WX.Private&&Number(q)===l||A===WX.All){const ie=hb(se),[le,M]=R_e(ie,Number(L));if(!le){var H;const we=L&&((H=h[L])===null||H===void 0?void 0:H.userGuid);He(xhe,{senderId:L,senderName:v,senderGuid:we,text:ie,timestamp:K,msgid:k})}return M}return""}})),Gt((r=>typeof r=="object"&&r!==null&&r.type!==void 0)),x_e(n),ao((r=>{const{payload:{userId:i,key:l,value:f}}=r;He(Y0,[{userId:i,[`${l}`]:f}])}))),epics2:(e,n)=>eL(e,24595).pipe(Nt((r=>{const{payload:{body:{action:i,data:l}}}=r,f=[];if([D1.List,D1.Add,D1.update].includes(i)&&l){const{breakoutRoom:h,participants:{attendeesList:v}}=n.value,y=(h==null?void 0:h.currentRoom.status)===vs.InRoom?v.concat(h.mainSessionAttendeeList):v;f.push(nPe({data:l,attendees:y}))}return i===D1.Remove&&l&&f.push(oPe(l)),An(f)}))),epics3:(e,n)=>oo(e,8032).pipe(Nt((async r=>{const{payload:{body:{senderID:i,commandContent:l,msgID:f}}}=r,h=hb(l),[v,y]=R_e(h,i);if(!v){const _=i&&Ai(n.value).find((A=>A.userId===i));He(xhe,{senderId:`${_==null?void 0:_.userId}`,senderName:_==null?void 0:_.displayName,senderGuid:_==null?void 0:_.userGUID,text:h,timestamp:new Date().getTime(),msgid:f})}return y})),Gt((r=>typeof r=="object"&&r!==null&&r.type!==void 0)),x_e(n),ao((r=>{const{payload:{userId:i,key:l,value:f}}=r;He(Y0,[{userId:i,[`${l}`]:f}])})))},$7e=nh(F7e,{extraEpics0:(e,n)=>e.pipe(co(`${Ube}`),mr((r=>{const{payload:{speakerOnly:i}}=r,l=Do(n.value);return((l==null?void 0:l.audio)!==void 0?An([l.audio]):si(uf).pipe(Gt((f=>f.audio!==void 0)),Ys(1))).pipe(ao((async()=>{const f=`${p2.SpeakerOnly}${i?1:0}`;await Promise.all([WY(f,0,(()=>n.value)),GY(f,0)])})),Xp())}))),extraEpics1:(e,n)=>oo(e,la).pipe(Gt((r=>{var i,l;const{payload:{body:f}}=r;return!((i=n.value.audio)===null||i===void 0||(i=i.customizeAudioOption)===null||i===void 0||!i.speakerOnly)&&(f==null||(l=f.add)===null||l===void 0?void 0:l.length)>0})),al(nm),Nt((r=>{const{payload:{body:{add:i}}}=r,l=n.value,{meeting:{userId:f},participants:{attendeesList:h}}=l,v=[];if(i){for(const y of i)if(y.id!==f){const _=Uc(Math.floor(Math.random()*Math.min(200+10*h.length,2e3))).pipe(Nt((()=>{if(Ai(n.value).some((A=>A.userId===y.id))){const A=`${p2.SpeakerOnly}1`;return An([WY(A,y.id,(()=>n.value)),GY(A,y.id)]).pipe(Nt((R=>An(R))),tp((()=>Yn)),Xp())}return Yn})),tp((()=>Yn)));v.push(_)}}return v.length>0?wl(...v):Yn})),Xp()),extraEpics2:(e,n)=>e.pipe(co(`${cme}`,`${nNe}`),ao((async r=>{const{payload:{targetUser:i,userId:l,displayName:f}}=r,h=r.type===`${cme}`?"video":"sharing",v=`${p2.Screenshot}${JSON.stringify({userId:l,displayName:f,type:h})}`;Promise.all([WY(v,i,(()=>n.value)),GY(v,i)])})),Xp())}),k_e=(e,n,r,i)=>{const{getState:l,dispatch:f}=r,h=l(),{participants:{attendeesList:v},audio:{localShareAudioUserMutedList:y},share:{isReceiveSharingFromMainSession:_},breakoutRoom:A}=h,R=(_?A==null?void 0:A.mainSessionAttendeeList:v).find((k=>k.userId==e));if(R){if(R.bShareAudioOn){const k=y.find((N=>N.userId===e));return k&&k.muted===!n&&f(V5(i,e,n,h)),Promise.resolve("")}return Promise.reject({type:Lt,reason:`Cannot ${n?"mute":"unmute"} share audio when the user's share audio is not enable.`,errorCode:Fe.AUDIO_NOT_STARTED})}return Promise.reject({type:gs,reason:"Cannot find the user",errorCode:Fe.STREAM_MISMATCH_USER})},M_e=(e,n)=>{const{store:{getState:r},rwgAgent:i}=e,{share:{sharePrivilege:l}}=r();return l===n?Promise.resolve(""):Object.values(sv).includes(n)?(i.lockSharing(n),NU("lockShare",n)):Promise.reject({type:gs,errorCode:Fe.SCREEN_SHARE_INVALID_PRIVILEGE})},HP=va([Ai],(e=>e.filter((n=>n.bVideoOn)))),vpe=va([HP],(e=>e.filter((n=>(n.caps&IEe)===IEe)))),U7e=(e,n,r,i,l,f,h,v,y,_)=>{const{store:{getState:A,dispatch:R},mediaAgent:k}=e,N=A(),{meeting:{userId:L,isUseWBVideo:B},media:{enforceMultipleVideos:H,disableRenderLimits:q},video:{subscribedVideoList:Y,renderedVideoList:K}}=N;if(B)return Promise.reject({type:Lt,reason:"Use the attachVideo method to render the video.",errorCode:Fe.VIDEO_METHOD_DEPRECATED});console.warn("Use the attachVideo method to render the video. The renderVideo method is deprecated. See the reference for details.");const se=Yo.getMaxCountRender(B,!!H,q),ie=d2()&&r===L;if(GL(n)&&!Y.includes(r)&&Y.length>=se&&new Set(K.map((we=>we.canvasId))).has(n.id))return Promise.reject({type:Lt,reason:`subscribe video counts greater than maximum size (${se})`,errorCode:Fe.VIDEO_RENDER_LIMIT_EXCEED});if(HP(N).findIndex((we=>we.userId===r))===-1)return Promise.reject({type:gs,reason:"user is not send video",errorCode:Fe.STREAM_MISMATCH_USER});if(n.id||(n.id=rE("__ZOOM_SDK_VIDEO_CANVAS_@__")),ie){if(sE(n)){n.playsInline=!0,n.muted=!0,n.autoplay=!0,bo.isIOSMobile&&(k.switchCanvasForVideoCapture(n),R(bbe())),k.renderVideo(n,r,y||kA,i,l,f,h,v,!0,_||"",!1),R(oX(r)),R(BDe(n.id));const we=document.querySelector(`#${whe}`);return we&&we.remove(),Promise.resolve("")}return Promise.reject({type:gs,reason:"You must use a <video> element to render self video for Chromium browser, Android browser without SharedArrayBuffer or iOS browser ",errorCode:Fe.STREAM_MISMATCH_RENDER_ELEMENT})}const le=!!_,{media:{videoDecodeStatus:M}}=N;return Ad("video","success",M).subscribe((async([we,Ne])=>{if(Ne){const{video:{ensuredCanvas:De,renderedVideoList:be}}=A();let me=n;De.includes(n.id)||(me=QJ(n),R(DDe(n.id)));const Ye=r===L,Ke=y||kA,Ze=await(async function(z,$t){const{video:{prefetchedVideo:Be}}=$t;return(Be==null?void 0:Be.userId)!==z||Be.loaded?"":Ra(mf(si(M2e,1),Uc(1e3).pipe(V2(""))))})(r,A());be.some((z=>z.userId===r&&z.key===Ke&&z.canvasId===me.id))||k.renderVideo(me,r,Ke,i,l,f,h,v,Ye,_||"",le),r!==L&&k.subscribeVideo(r,v,!1),Y.includes(r)||R(oX(r)),Ze&&R(JP(void 0)),R(O2({userId:r,key:Ke,canvasId:me.id,videoQuality:v,aspectRatio:l?i/l:0}))}})),M==="failed"?Promise.reject({type:Wu,reason:"Video  decode status is failed",errorCode:Fe.INTERNAL_ERROR}):Promise.resolve("")},cA={video:{detectAction:Yo.getVideoProcessorCapability,errorCode:{unsupported:Fe.VIDEO_PROCESSOR_UNSUPPORTED,duplicateCreate:Fe.VIDEO_PROCESSOR_DUPLICATE_CREATE,mismatchProcessor:Fe.VIDEO_PROCESSOR_MISMATCH_PROCESSOR,limitExceed:Fe.VIDEO_PROCESSOR_LIMIT_EXCEED}},audio:{detectAction:Yo.getAudioProcessorCapability,errorCode:{unsupported:Fe.AUDIO_PROCESSOR_UNSUPPORTED,duplicateCreate:Fe.AUDIO_PROCESSOR_DUPLICATE_CREATE,mismatchProcessor:Fe.AUDIO_PROCESSOR_MISMATCH_PROCESSOR,limitExceed:Fe.AUDIO_PROCESSOR_LIMIT_EXCEED}},share:{detectAction:Yo.getShareProcessorCapability,errorCode:{unsupported:Fe.SHARED_PROCESSOR_UNSUPPORTED,duplicateCreate:Fe.SHARED_PROCESSOR_DUPLICATE_CREATE,mismatchProcessor:Fe.SHARED_PROCESSOR_MISMATCH_PROCESSOR,limitExceed:Fe.SHARED_PROCESSOR_LIMIT_EXCEED}}},bpe=(e,n)=>{var r;const{store:{getState:i}}=e,l=i(),{meeting:{mediaFeatureOptions:f}}=l;return(r=cA[n])===null||r===void 0?void 0:r.detectAction(f||"")},N_e=(e,n)=>{const r=e.store.getState(),i=eE(r).find((l=>l.userId===n));if(i){const{caps:l}=i;return(f=>!(512&~f))(l)}return!1};var P_e,L_e,B_e,V_e,H_e,F_e,$_e,U_e,j_e,z_e,W_e,G_e,q_e,K_e,Z_e,Y_e,J_e,X_e,Q_e,ewe,twe,nwe,owe,swe,rwe,iwe,awe,cwe,lwe,uwe,dwe,fwe,pwe,hwe,mwe,gwe,vwe,bwe,ywe,Swe,Cwe,Ewe,_we,wwe,Awe,Twe,Owe,Iwe,Rwe,xwe,Dwe,kwe,Mwe,Nwe,Pwe,Lwe,Bwe,Vwe,Hwe,Fwe,$we,Uwe,jwe,zwe,Wwe,Gwe,qwe,Kwe,Zwe,Ywe,Jwe,Xwe,Qwe,eAe,tAe,nAe,oAe,sAe,rAe,iAe,aAe,cAe,lAe,uAe,dAe,fAe,pAe,hAe,mAe,gAe,vAe,bAe,yAe,SAe,CAe,tt;const Qm=ff("Audio"),yl=ff("Video"),Sl=ff("Sharing"),EAe=ff("Processor"),SP=ff("CameraControl"),jC=ff("Remote Control"),_Ae=TQ(HTMLCanvasElement,0),j7e=TQ([HTMLCanvasElement,HTMLVideoElement],0),wAe=TQ(HTMLCanvasElement,0,["id"]),AAe=TQ([HTMLCanvasElement,HTMLVideoElement],0,["id"]),z7e=DMe("annotation"),W7e=DMe("remote control");let G7e=(P_e=ro("audio"),L_e=ro("audio"),B_e=ro("audio"),V_e=ro("audio"),H_e=ro("audio"),F_e=ff("Audio",[1,2,3]),$_e=ro("audio"),U_e=ff("Audio",[1,2]),j_e=ro("audio"),z_e=ro("audio"),W_e=ro("audio"),G_e=ro("audio"),q_e=ro("share"),K_e=ro("audio"),Z_e=ro("share"),Y_e=ro("audio"),J_e=ro("audio"),X_e=ro("audio"),Q_e=ro("audio"),ewe=ro("audio"),twe=ro("audio"),nwe=ff("Audio",[1,2]),owe=ro("audio"),swe=ff("Audio",[1,2]),rwe=ro("audio"),iwe=ro("audio"),awe=ro("audio"),cwe=ro("audio"),lwe=ro("video"),uwe=ro("video"),dwe=ro("video"),fwe=ro("processor"),pwe=ro("processor"),hwe=ro("processor"),mwe=ro("video"),gwe=ro("video"),vwe=ro("video"),bwe=ro("video"),ywe=ro("video"),Swe=ro("video"),Cwe=ro("video"),Ewe=ro("video"),_we=ro("video"),wwe=ro("video"),Awe=ff("Video",[2]),Twe=ro("video"),Owe=ff("Video",[1]),Iwe=ro("video"),Rwe=ro("video"),xwe=ro("video"),Dwe=ro("video"),kwe=ro("video"),Mwe=ro("video"),Nwe=ro("video"),Pwe=ro("video"),Lwe=ro("video"),Bwe=ro("video"),Vwe=ro("video"),Hwe=ro("video"),Fwe=ro("video"),$we=ro("video"),Uwe=ro("video"),jwe=ro("video"),zwe=ro("share"),Wwe=ro("share"),Gwe=ro("share"),qwe=ro("share"),Kwe=ro("share"),Zwe=ro("share"),Ywe=ro("share"),Jwe=ro("share"),Xwe=uEe("isShareOptionLocked"),Qwe=uEe("isShareOptionLocked"),eAe=ro("share"),tAe=ro("share"),nAe=ro("share"),oAe=ro("share"),sAe=ro("share"),rAe=ro("share"),iAe=ro("share"),aAe=ro("share"),cAe=ro("share"),lAe=ro("share"),uAe=ro("share"),dAe=ro("share"),fAe=ro("share"),pAe=ro("share"),hAe=ro("share"),mAe=ro("share"),gAe=ro("share"),vAe=ro("share"),bAe=ro("share"),yAe=ro("share"),SAe=ro("share"),CAe=ro("share"),tt=class extends Q0{constructor(e){super(e),this[en]=void 0,this[Ia].dispatch(Pme()),this[en]={store:e,mediaAgent:yQ(sp(Yo.getInstance())),rwgAgent:zr.createAgent()}}startAudio(e){return((n,r)=>{const{store:{getState:i,dispatch:l},rwgAgent:f,mediaAgent:h}=n,v=i(),y=Do(v);if((y==null?void 0:y.audio)===Ur.Computer)return Promise.resolve("");if((y==null?void 0:y.audio)===Ur.Phone)return Promise.reject({type:Lt,reason:"joined by phone",errorCode:Fe.AUDIO_IN_PSTN});{const{audio:{isAllowToTalk:_,isComputerAudioLoading:A,canPlayAudio:R,customizeAudioOption:{speakerOnly:k}},media:{audioDecodeStatus:N,audioEncodeStatus:L}}=v;if(A)return Promise.reject({type:Lt,reason:"Computer audio has been loading, please wait.",errorCode:Fe.AUDIO_CAPTURE_LOADING});const B=(function(Y,K){const se=K?{...K}:void 0;if(NEe(Y.meeting.mediaFeatureOptions||"",Y.audio.isWebRtcAudioCapable)||(se==null?void 0:se.backgroundNoiseSuppression)!==!0||(console.warn("Background noise suppression requires SharedArrayBuffer and is only supported on desktop browser"),Object.assign(se,{backgroundNoiseSuppression:void 0})),(se==null?void 0:se.originalSound)!==void 0){se.backgroundNoiseSuppression&&se.originalSound&&(console.warn("Enabling original sound will disable background noise suppression."),Object.assign(se,{backgroundNoiseSuppression:!1}));const{originalSound:ie}=se;typeof ie=="object"&&ie.stereo&&!PEe()&&(console.warn("Cannot enable stereo audio on current platform due to the browser limitation"),Object.assign(ie,{stereo:!1}))}return LEe()||(se==null?void 0:se.syncButtonsOnHeadset)!==!0||(console.warn("Sync buttons on headset is not supported on the current platform"),Object.assign(se,{syncButtonsOnHeadset:void 0})),se!=null&&se.mediaFile&&!Yo.isSupportMediaPlaybackAsAudioInput()&&(console.warn("Cannot use media file as audio input due to the browser limitation"),Object.assign(se,{mediaFile:void 0})),se})(v,r);l(Ube(B??{}));const{speakerOnly:H,autoStartAudioInSafari:q}=B||{};if(!!k!=!!H&&l(M5({userId:v.meeting.userId,key:"isSpeakerOnly",value:!!H})),!y)return Promise.reject({type:Lt,reason:"Please call `startAudio` method after the `join` has been resolved",errorCode:Fe.STREAM_SESSION_JOIN_REQUIRED});{const Y=Ku(y.userRole)&&!_||H,{encodeInitStatus:K,decodeInitStatus:se}=age(v,y,H);if(H5()&&(se!=="success"||K!=="success"))return Promise.reject({type:Lt,reason:"It is required to wait for the audio encoding and decoding to be ready before calling `startAudio` method",errorCode:Fe.AUDIO_ENCODING_REQUIRED});l(KR(!0)),Ad("audio",K,se).subscribe((([ie,le])=>{if(ie&&le){let M=R||(H5()||bo.isIOSMobile)&&!q?Promise.resolve():(function(){const we=URL.createObjectURL(EFe),Ne=new Audio(we);Ne.muted=!1;const De=vQ((()=>Promise.reject()),3e3),be=bo.isIOSMobile?new Promise(((me,Ye)=>{var Ke;Ne.addEventListener("canplaythrough",(()=>{Ne.play().then((()=>{me(!0)})).catch((Ze=>{Ye(Ze)}))})),(Ke=Ne.load)===null||Ke===void 0||Ke.call(Ne)})):Ne.play();return Promise.race([be,De]).finally((()=>{URL.revokeObjectURL(we)}))})();M===void 0&&(M=Promise.resolve()),M.then((()=>ome("audio",i()))).then((()=>{const we=i();cge(f,we),tL(h,we,!Y),Ku(y.userRole)&&_&&l(ege(!0)),l(PL(!0))})).catch((()=>{l(PL(!1)),l(KR(!1))}))}else l(KR(!1))}))}return L==="failed"||N==="failed"?(l(KR(!1)),Promise.reject({type:Wu,reason:"audio encode or decode error",errorCode:Fe.INTERNAL_ERROR})):new Promise(((Y,K)=>{BEe().subscribe({next:()=>{l(KR(!1)),Y("")},error:se=>{Yo.getInstance().leaveComputerAudio();const ie=Do(i());(ie==null?void 0:ie.audio)!==Ur.Phone&&(l(uE(E2.MicrophoneError)),f.joinOrLeaveVoip(!1)),l(KR(!1)),K(se)}})}))}})(this[en],e)}stopAudio(){return(async e=>{const{store:{getState:n,dispatch:r},mediaAgent:i,rwgAgent:l}=e,f=n(),{audio:{isComputerAudioLoading:h,isShareAudioEnabled:v,isSharingAudio:y,isUsingMediaPlayback:_,customizeAudioOption:{speakerOnly:A}},meeting:{mediaFeatureOptions:R}}=f,k=Do(f);if(h)return Promise.reject({type:Lt,reason:"Computer audio has not finished joining, please wait.",errorCode:Fe.AUDIO_CAPTURE_LOADING});if(v){if(y&&!Yo.isSupportOpenMicWhenShareAudio(R||""))return Promise.reject({type:Lt,reason:"Cannot stop audio during sharing with audio",errorCode:Fe.AUDIO_SHARE_AUDIO_CONFLICT});r(LL(void 0)),r(lE(void 0))}return(k==null?void 0:k.audio)===Ur.Computer?(r(uE(E2.Active)),await i.leaveComputerAudio(),l.joinOrLeaveVoip(!1),A&&r(M5({userId:f.meeting.userId,key:"isSpeakerOnly",value:void 0})),_&&qp.getInstance().stopAudioElement(),r(G2(0)),Cs(gQ)):Promise.resolve("")})(this[en])}muteAudio(e){return((n,r)=>{const{store:{getState:i,dispatch:l},rwgAgent:f,mediaAgent:h}=n,v=i(),y=Do(v),{participants:{allowTalkAttendeesList:_,attendeesList:A},meeting:{mediaFeatureOptions:R}}=v;if(r==null||r===(y==null?void 0:y.userId))return(y==null?void 0:y.audio)===""||(y==null?void 0:y.audio)===null?Promise.reject({type:Lt,reason:"no audio joined",errorCode:Fe.AUDIO_NOT_STARTED}):(y==null?void 0:y.muted)===!0?Promise.resolve(""):(l(U0(sb.Active)),f.mute(y.userId,!0),h.muteAudio(),v.audio.isShareAudioEnabled&&!Yo.isSupportOpenMicWhenShareAudio(R||"")&&l(lE(!0)),Cs(ibe).then((()=>"")));if(Qh(v)){const k=_.concat(A).find((N=>N.userId===r));return k?k.audio===""||k===null?Promise.reject({type:Lt,reason:"no audio joined",errorCode:Fe.AUDIO_NOT_STARTED}):k.muted===!1?(f.mute(r,!0),Cs({event:V2e,operations:[Gt((N=>N.id===r&&N.muted!==void 0)),Ys(1)]},(N=>N.id===r&&N.muted==1))):Promise.resolve(""):Promise.reject({type:gs,reason:"no matching user",errorCode:Fe.STREAM_MISMATCH_USER})}return Promise.reject({type:hf,errorCode:Fe.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED})})(this[en],e)}unmuteAudio(e){return(async(n,r)=>{const{store:{getState:i,dispatch:l},rwgAgent:f,mediaAgent:h}=n,v=i(),y=Do(v),{audio:{isAllowToTalk:_,isAllowToTalkAttendeeConnected:A},meeting:{mediaFeatureOptions:R},participants:{allowTalkAttendeesList:k,attendeesList:N}}=v;if(r===void 0||r===(y==null?void 0:y.userId)){if((y==null?void 0:y.audio)===""||(y==null?void 0:y.audio)===null)return Promise.reject({type:Lt,reason:"no audio joined",errorCode:Fe.AUDIO_NOT_STARTED});if((y==null?void 0:y.muted)===!1)return Promise.resolve("");if(v.audio.isShareAudioEnabled&&!Yo.isSupportOpenMicWhenShareAudio(R||"")){if(v.audio.isSharingAudio)return Promise.reject({type:Lt,reason:"Cannot unmute audio during sharing with audio",errorCode:Fe.AUDIO_SHARE_AUDIO_CONFLICT});l(lE(!1))}return v.audio.bCanUnmute||y!=null&&y.isHost||y!=null&&y.bCoHost?(Ku(y.userRole)&&(_?A||(await h.leaveComputerAudio(),await tL(h,v,!0),l(ege(!0))):Promise.reject({type:Lt,reason:"Webinar attendee cannot unmute self audio.",errorCode:Fe.AUDIO_ATTENDEE_NOT_ALLOWED})),l(B5(zP.Active)),f.mute(y.userId,!1),h.unmuteAudio(),Cs(abe).then((()=>""))):Promise.reject({type:hf,reason:"host not allow unmute themselves",errorCode:Fe.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED})}if(Qh(v)){const L=k.concat(N).find((B=>B.userId===r));return L?L.audio===""||L===null?Promise.reject({type:Lt,reason:"no audio joined",errorCode:Fe.AUDIO_NOT_STARTED}):(L.muted===!0&&f.mute(r,!1),Promise.resolve("")):Promise.reject({type:gs,reason:"no matching user",errorCode:Fe.STREAM_MISMATCH_USER})}return Promise.reject({type:hf,errorCode:Fe.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED})})(this[en],e)}dialOut(e,n,r,i){return((l,f,h,v,y)=>{const{store:{getState:_,dispatch:A},rwgAgent:R}=l,k=_(),{meeting:{callOutCountry:N,isSupportCallOut:L}}=k;if(L&&Array.isArray(N)&&N.findIndex((B=>B.code===f))>-1){const{seq:B}=R.audioDialout(f+h,v,!(y==null||!y.callMe),!(y==null||!y.pressingOne),!(y==null||!y.greeting));return A(BMe({sequence:B,phoneNumber:f+h})),aA(MP.JoinAudioByCallMe)}return Promise.reject({type:gs,reason:"no matching country code",errorCode:Fe.PSTN_MISMATCH_COUNTRY_CODE})})(this[en],e,n,r,i)}cancelDialOut(e,n,r){return((i,l,f,h)=>{const{rwgAgent:v}=i;return v.audioCancelDialout(l+f,!(h==null||!h.callMe)),aA(MP.cancelDialOut)})(this[en],e,n,r)}hangup(){return(e=>{const{store:{getState:n,dispatch:r},rwgAgent:i}=e,l=n(),f=Do(l);return(f==null?void 0:f.audio)===Ur.Phone&&f.userId!==null?(i.audioDrop(f.userId),f.muted||r(U0(sb.Inherited)),aA(MP.hangup)):Promise.reject({type:Lt,reason:"not joined audio by phone",errorCode:Fe.PSTN_NOT_CONNECTED})})(this[en])}switchMicrophone(e){return(async(n,r)=>{const{store:{getState:i,dispatch:l},mediaAgent:f}=n,h=i(),{audio:{activeMicrophone:v,mediaPlaybackFile:y,isUsingMediaPlayback:_}}=h,{microphones:A}=await Ra(j2()),R=A.find((k=>k.deviceId===r));if(r==="default"||typeof r!="string"||R){const k=Do(h);if((k==null?void 0:k.audio)===Ur.Computer){let N=!1;if(typeof r=="string")(r!==v||_)&&(f.changeMicrophone(r,R==null?void 0:R.label,!(k==null||!k.muted)),l(nge(void 0)),qp.getInstance().stopAudioElement(),N=!0);else if(r&&(!_||(y==null?void 0:y.url)!==r.url)){const L=qp.getInstance();L.setAudioElement(r).then((()=>{r.playback!==void 0&&(f.enablePlayAudioFileLocally(!!r.playback),L.audioElement.dataset.playback=r.playback?"1":"0"),f.changeMicrophone(L.audioElement,void 0,!(k==null||!k.muted)),l(nge(r))})),N=!0}if(N)return JU(BEe()).then((()=>""))}else typeof r=="string"&&l(L5(r));return Promise.resolve("")}return Promise.reject({type:_Se,errorCode:Fe.STREAM_MISMATCH_DEVICE})})(this[en],e)}switchSpeaker(e){return(async(n,r)=>{const{store:{getState:i,dispatch:l},mediaAgent:f}=n,{audio:{activeSpeaker:h}}=i(),{speakers:v}=await Ra(j2());if(r!=="default"&&v.findIndex((_=>_.deviceId===r))==-1)return Promise.reject({type:_Se,errorCode:Fe.STREAM_MISMATCH_DEVICE});var y;if(((y=Do(i()))===null||y===void 0?void 0:y.audio)===Ur.Computer){if(r!==h)return f.changeSpeaker(r),Cs(Hhe,(_=>_))}else l(IQ(r));return Promise.resolve("")})(this[en],e)}muteShareAudio(e){return((n,r)=>{const{mediaAgent:i,rwgAgent:l,store:{getState:f,dispatch:h}}=n,v=f(),{meeting:{userId:y}}=v;if(r&&r!==y)return k_e(r,!0,n.store,i);{const{audio:{isSharingAudio:A,isShareAudioEnabled:R,isShareAudioMuted:k}}=v;if(!R)return Promise.reject({type:Lt,reason:"Cannot mute sharing audio when sharing audio is not enable",errorCode:Fe.AUDIO_SHARE_AUDIO_CONFLICT});if(k)return Promise.resolve("");{l.muteShareAudio(!0);let N=Promise.resolve();var _;return A&&(N=(_=i.leaveSharingAudio(!0))===null||_===void 0?void 0:_.then((()=>zbe(l,v).then((L=>{L.forEach((B=>h(B)))}))))),V5(i,y,!0,v),Promise.all([Cs({event:uf,operations:[Gt((L=>L.bShareAudioOn!==void 0)),Ys(1)]},(L=>L.bShareAudioOn===!1)),N]).then((()=>(h(RX(!0)),A&&(h(BL(!1)),He(CL,{state:"off"})),"")))}}})(this[en],e)}unmuteShareAudio(e){return((n,r)=>{const{mediaAgent:i,rwgAgent:l,store:{getState:f,dispatch:h}}=n,v=f(),{meeting:{userId:y}}=v;if(r&&r!==y)return k_e(r,!1,n.store,i);{const{audio:{isSharingAudio:_,isShareAudioEnabled:A,isShareAudioMuted:R},share:{status:k}}=v;if(!A)return Promise.reject({type:Lt,reason:"Cannot unmute sharing audio when sharing audio is not enable",errorCode:Fe.AUDIO_NOT_STARTED});if(R===!1)return Promise.resolve("");{l.muteShareAudio(!1);let N=Promise.resolve();return _===!1&&k===qs.Sharing&&(N=ige(i,l,v).then((L=>{L.forEach((B=>h(B)))}))),V5(i,y,!1,v),Promise.all([Cs({event:uf,operations:[Gt((L=>L.bShareAudioOn!==void 0)),Ys(1)]},(L=>L.bShareAudioOn===!0)),N]).then((()=>(h(RX(!1)),_===!1&&k===qs.Sharing&&(h(BL(!0)),He(CL,{state:"on"})),"")))}}})(this[en],e)}subscribeAudioStatisticData(e){return(async(n,r)=>{const{mediaAgent:i,store:{getState:l}}=n,f=l(),h=Do(f),v=!r||r.decode,y=!r||r.encode;if(!h)return Promise.reject({type:Lt,reason:"Call this function after the 'join' method resolved.",errorCode:Fe.STREAM_SESSION_JOIN_REQUIRED});{const{encodeInitStatus:_,decodeInitStatus:A}=age(f,h);Ad("audio",_,A).subscribe((([R,k])=>{R&&k&&(v&&i.subscribeToQos([cf.AudioDecode],mA),y&&i.subscribeToQos([cf.AudioEncode],mA))}))}return""})(this[en],e)}unsubscribeAudioStatisticData(e){return(async(n,r)=>{const{mediaAgent:i,store:{dispatch:l}}=n,f=!r||r.decode,h=!r||r.encode;return f&&(i.unsubscribeFromQos([cf.AudioDecode]),l(xX(xJ))),h&&(i.unsubscribeFromQos([cf.AudioEncode]),l(DX(xJ))),null})(this[en],e)}enableBackgroundNoiseSuppression(e){return((n,r)=>{const{mediaAgent:i,store:{getState:l,dispatch:f}}=n,{audio:{isBackgroundNoiseSuppression:h,originalSound:v,isWebRtcAudioCapable:y},meeting:{mediaFeatureOptions:_}}=l();let A=r;return A===!!h||(A&&!NEe(_||"",y)?(console.warn("Background noise suppression requires SharedArrayBuffer and is only supported on desktop browser"),A=!1):(A&&v&&(console.warn("Enabling noise suppression will disable original sound."),f(sge(!1))),f(tge(A)),i.changeAudioProfile(rge(l())))),Promise.resolve("")})(this[en],e)}enableSyncButtonsOnHeadset(e){return((n,r)=>{const{mediaAgent:i,store:{getState:l,dispatch:f}}=n,h=l(),{audio:{isHIDEnabled:v,microphoneDevicesList:y,activeMicrophone:_}}=h;if(r===!!v)return Promise.resolve("");{const R=Do(h);var A;return R?(r&&!LEe()?console.warn("Sync buttons on headset is not supported on the current platform"):(i.enableSyncButtonsOnHeadset(r,(A=y.find((k=>k.deviceId===_)))===null||A===void 0?void 0:A.label,R.muted),f(YMe(r))),Promise.resolve("")):Promise.reject({type:Lt,reason:"Please call `enableSyncButtonsOnHeadset` method after the `join` has been resolved",errorCode:Fe.STREAM_SESSION_JOIN_REQUIRED})}})(this[en],e)}enableOriginalSound(e){return((n,r)=>{const{mediaAgent:i,store:{getState:l,dispatch:f}}=n,{audio:{isBackgroundNoiseSuppression:h,originalSound:v}}=l(),y=r;return y===v||typeof r=="object"&&l6(r,v)||(typeof y!="object"||(y==null?void 0:y.stereo)!==!0||PEe()||(console.warn("Cannot enable stereo audio on current platform due to the browser limitation"),y.stereo=!1),h&&y&&(console.warn("Enabling original sound will disable background noise suppression."),f(tge(!1))),f(sge(y)),i.changeAudioProfile(rge(l()))),Promise.resolve("")})(this[en],e)}callCRCDevice(e,n){return((r,i,l)=>{const{rwgAgent:f,store:{dispatch:h,getState:v}}=r,{seq:y}=f.inviteCRCDevice(i,l);return h(XMe({sequence:y,ip:i,protocol:l})),aA(MP.crcCallOut).then((()=>{var _;const{audio:{crcDevice:A}}=v();return(_=A.find((R=>R.ip===i&&R.protocol===l&&R.sequence===y)))===null||_===void 0?void 0:_.uuid}))})(this[en],e,n)}cancelCallCRCDevice(e,n){return((r,i,l)=>{const{rwgAgent:f,store:{getState:h}}=r,{audio:{crcDevice:v}}=h(),y=v.find((_=>_.ip===i&&_.protocol===l));return y&&y.returnCode===hY.Ringing?(f.cancelInviteCRCDevice(y.transId),Promise.resolve("")):Promise.reject({type:Lt,reason:"Cannot cancel call out ",errorCode:Fe.CRC_NOT_CONNECTED})})(this[en],e,n)}muteAllAudio(){return(e=>{const{rwgAgent:n}=e;return n.audioMuteAll(!0),NU("bMutedAll",!0)})(this[en])}unmuteAllAudio(){return(e=>{const{rwgAgent:n}=e;return n.audioMuteAll(!1),NU("bMutedAll",!1)})(this[en])}muteAudioUponEntry(e=!0){return((n,r=!0)=>{const{store:{getState:i},rwgAgent:l}=n,{audio:{bMutedUponEntry:f}}=i();return f===r?Promise.resolve(""):(l.setMuteOnEntry(r),NU("bMutedUponEntry",r))})(this[en],e)}allowUnmuteAudioThemselves(e=!0){return((n,r=!0)=>{const{store:{getState:i},rwgAgent:l}=n,{audio:{bCanUnmute:f}}=i();return f===r?Promise.resolve(""):(l.allowUnmuteAudio(r),NU("bCanUnmute",r))})(this[en],e)}getMicList(){return(({store:{getState:e}})=>{const n=e();return n.audio?[...n.audio.microphoneDevicesList]:[]})(this[en])}getSpeakerList(){return(({store:{getState:e}})=>{const n=e();return n.audio?[...n.audio.speakerDevicesList]:[]})(this[en])}getAudioState(e){return(({store:{getState:n}},r)=>{const i=n(),{meeting:{isWebinar:l}}=i;let f=null;return r==null?f=Do(i):(f=i.participants.attendeesList.find((h=>h.userId===r)),l&&!f&&(f=i.participants.xmppAttendeeList.find((h=>h.userId===r)))),f?f.audio:null})(this[en],e)}isAudioMuted(e){return(({store:{getState:n}},r)=>{const i=n(),{meeting:{isWebinar:l}}=i;let f=null;return r===void 0?f=Do(i):(f=i.participants.attendeesList.find((h=>h.userId===r)),l&&!f&&(f=i.participants.xmppAttendeeList.find((h=>h.userId===r)))),!!f&&!!f.muted})(this[en],e)}getActiveMicrophone(){return(({store:{getState:e}})=>{const n=e();return n.audio?n.audio.activeMicrophone:null})(this[en])}getActiveSpeaker(){return(({store:{getState:e}})=>{const n=e();return n.audio?n.audio.activeSpeaker:null})(this[en])}isSupportCallOut(){return(({store:{getState:e}})=>{const{meeting:{isSupportCallOut:n,callOutCountry:r}}=e();return n&&Array.isArray(r)&&(r==null?void 0:r.length)>0})(this[en])}getDialOutStatus(){return(({store:{getState:e}})=>{const{audio:n}=e();return n==null?void 0:n.dialout[n.dialout.length-1].returnCode})(this[en])}getDialOutCountries(){return(({store:{getState:e}})=>{const{meeting:{callOutCountry:n}}=e();return Array.isArray(n)?n:[]})(this[en])}getShareAudioStatus(){return(({store:{getState:e}})=>{const{audio:{isShareAudioEnabled:n,isShareAudioMuted:r,isSharingAudio:i}}=e();return{isShareAudioEnabled:n,isShareAudioMuted:r,isSharingAudio:i}})(this[en])}isOthersShareAudioMutedLocally(e){return(({store:{getState:n}},r)=>{var i;const{audio:{localShareAudioUserMutedList:l}}=n();return(i=l.find((f=>f.userId===r)))===null||i===void 0?void 0:i.muted})(this[en],e)}getAudioStatisticData(){return(({store:{getState:e}})=>{const{audio:{statistic:n}}=e();return{...n}})(this[en])}getDialInInfo(){return(({store:{getState:e}})=>{const{meeting:{meetingNumber:n,tollNumbers:r,participantID:i,h323Password:l}}=e();return r===void 0?null:{meetingId:n,participantId:i,password:l||"",tollNumbers:r.map((f=>({...f})))}})(this[en])}isSupportMicrophoneAndShareAudioSimultaneously(){return(function(e){const{store:{getState:n}}=e,r=n(),{meeting:{mediaFeatureOptions:i}}=r;return Yo.isSupportOpenMicWhenShareAudio(i||"")})(this[en])}getAudioMediaPlaybackController(){return(({store:{getState:e},mediaAgent:n})=>{const r=e(),{audio:{isUsingMediaPlayback:i}}=r;if(i){const{audioElement:l}=qp.getInstance();return FSe(l,"audio",r,n)}return null})(this[en])}isAllowToUnmute(){return(({store:{getState:e}})=>{const n=e();return!!n.audio&&!!n.audio.bCanUnmute})(this[en])}getSessionSIPAddress(){return(e=>{const{store:{getState:n}}=e,{meeting:{sipDomain:r,h323Password:i,meetingNumber:l}}=n();return r?`${l}.${i??""}@${r}`:null})(this[en])}startVideo(e){return((n,r)=>{var i;const{store:{getState:l,dispatch:f},mediaAgent:h}=n,v=l(),{media:{videoDecodeStatus:y,videoEncodeStatus:_,enforceVirtualBackground:A},video:{isCaptureCameraLoading:R,isCurrentUserStartedVideo:k,isVideoMuted:N,backgroundMode:L},meeting:{isUseWBVideo:B}}=v,H=r?{...r}:void 0;if(k)return Promise.reject({type:Lt,reason:"Video is started",errorCode:Fe.VIDEO_MISMATCH_STATE});if(R)return Promise.reject({type:Lt,reason:"Camera is starting,please wait.",errorCode:Fe.VIDEO_CAPTURE_LOADING});if(N&&!Qh(v))return Promise.reject({type:Lt,reason:"Video is muted by the host",errorCode:Fe.VIDEO_MUTED_BY_HOST});if(d2(B))if(sE(H==null?void 0:H.videoElement))console.warn('The "videoElement" option will be removed in version 2.x. Please use the "attachVideo" or "renderVideo" method to render the self-view.');else{console.warn('Rendering self-view on Chromium browser, Android browser without SharedArrayBuffer or iOS browser requires video tag, Please use "attachVideo" or pass a video element instead of a canvas element in the "renderVideo" method');let q=document.body.querySelector(`#${whe}`);if(!q){q=document.createElement("video");const Y=bo.isSafari||bo.isIOSMobile?"position:fixed;top:-10000px;left:-10000px":"display:none";q.setAttribute("style",Y),q.muted=!0,q.playsInline=!0,q.autoplay=!0,q.id=whe,document.body.appendChild(q)}H&&Object.assign(H,{videoElement:q})}return!sme(A,B)&&H!=null&&H.virtualBackground?Promise.reject({type:gs,reason:"Virtual background only compatible with Chrome and Edge with SharedArrayBuffer enabled.",errorCode:Fe.VIDEO_VB_UNSUPPORTED}):L===_u.VideoProcessor&&H!=null&&H.virtualBackground&&H!=null&&(i=H.virtualBackground)!==null&&i!==void 0&&i.imageUrl?Promise.reject({type:Lt,reason:"Cannot start capture video with virtual background when video processor is enabled",errorCode:Fe.VIDEO_VB_PROCESSOR_CONFLICT}):(f(NP(!0)),Ad("video",_,y).subscribe((([q])=>{if(q){const Y=l(),{video:{activeCamera:K,isSupportHDVideo:se,virtualBackground:{imageSrc:ie},mask:{imageSrc:le},isMirrored:M}}=Y,{cameraId:we=K,captureWidth:Ne=0,captureHeight:De=0,mirrored:be,hd:me,fullHd:Ye,virtualBackground:Ke,mask:Ze}=H||{};xCe(be??M,h,Y),(me||Ye)&&(se&&Yo.isCompatibleHardwareForEncode()&&Yo.isSupportVideoEncodeHardwareAcceleration().then((at=>{at&&(h.enableHardwareAccelerationForVideoEncode(!0),f(TP({encode:at})))})),se||console.warn("Cannot capture HD video due to either account restriction and/or hardware limitation"));const z=Ke||Ke===void 0&&!!ie&&Ze===void 0,$t=Ze||Ze===void 0&&!!le;let Be=Promise.resolve({});if(z){const at=Ke||{imageUrl:void 0,cropped:void 0};Be=DY({...at,captureWidth:Ne,captureHeight:De,cameraId:we,hd:me},h,Y).then((()=>at))}else if($t){const at=Ze||{imageUrl:void 0,cropped:void 0,clip:void 0,rootWidth:void 0,rootHeight:void 0};at.rootWidth||Object.assign(at,{rootWidth:1280}),at.rootHeight||Object.assign(at,{rootHeight:720}),Be=kY({...at,captureWidth:Ne,captureHeight:De,cameraId:we,hd:me},h,Y).then((()=>at))}H!=null&&H.mediaFile&&!Yo.isSupportMediaPlaybackAsVideoInput()&&(console.warn("Cannot use media file as video input due to the browser limitation."),Object.assign(H,{mediaFile:void 0})),Be.then((at=>ome("video",l()).then((()=>at)))).then((at=>{ake(h,Y,H).forEach((lt=>{f(lt)})),z?f(OY(at)):$t&&f(IY(at))})).catch((at=>{f(NP(!1)),He(obe,{...at??{}})}))}else f(NP(!1))})),aA(ESe.startCaptureVideo).then((()=>{f(nX(!1)),f(tX(!1))})).catch((q=>Promise.reject(RCe(q)))).finally((()=>{f(NP(!1))})))})(this[en],e)}stopVideo(){return(e=>{const{store:{getState:n},mediaAgent:r}=e,{video:{isCaptureCameraLoading:i,isCurrentUserStartedVideo:l,isUsingMediaPlayback:f}}=n();return i?Promise.reject({type:Lt,reason:"Camera is starting,please wait.",errorCode:Fe.VIDEO_CAPTURE_LOADING}):l?(r.stopCaptureVideo(),f&&qp.getInstance().stopVideoElement(),Cs(qP,(h=>(h==null?void 0:h.failed)!==!0))):Promise.reject({type:Lt,reason:"camera is closed",errorCode:Fe.VIDEO_MISMATCH_STATE})})(this[en])}switchCamera(e){return((n,r)=>{const{store:{getState:i,dispatch:l},mediaAgent:f}=n,h=i(),{video:{cameraDevicesList:v,isCurrentUserStartedVideo:y,virtualBackground:_,mask:A,mediaPlaybackFile:R,isUsingMediaPlayback:k,customizedVideoOption:N,activeCamera:L}}=h;if(typeof r=="string"&&!ike(r,v))return Promise.reject({type:gs,reason:"Cannot find cameraDeviceId in camera devices list.",errorCode:Fe.STREAM_MISMATCH_DEVICE});const B=L===r;if(y||_!=null&&_.isVBConfigured||A.isMaskConfigured){if(typeof r=="string"){const{captureWidth:H,captureHeight:q}=EQ(N);f.changeCamera(r,o6.includes(r),{width:H,height:q},B),l(mme(void 0)),qp.getInstance().stopVideoElement()}else if(r&&(!k||(R==null?void 0:R.url)!==r.url)){const H=qp.getInstance();H.setVideoElement(r).then((()=>{f.changeCamera(H.videoElement),l(mme(r))}))}return N!=null&&N.customVideoConstraints&&!B&&l(HDe()),aA(ESe.switchCameraVideo).then((()=>{l(nX(!1)),l(tX(!1))})).catch((H=>(f.stopCaptureVideo(),Promise.reject(RCe(H)))))}return typeof r=="string"&&l(_L(r)),Promise.resolve()})(this[en],e)}createProcessor(e){return(async(n,r)=>{const{store:{getState:i,dispatch:l},mediaAgent:f}=n,h=i(),{media:{videoEncodeStatus:v,audioEncodeStatus:y,sharingEncodeStatus:_},processor:{processorCreatedList:A},meeting:{mediaFeatureOptions:R}}=h,{type:k,name:N}=r;if(!(k in cA)||!cA[k].detectAction(R||""))throw{type:Lt,reason:`Your browser does not support ${k} processor.`,errorCode:cA[k].errorCode.unsupported};if(A.some((({name:H,type:q})=>H===N&&q===k)))throw{type:gs,reason:"You have already created this Processor",errorCode:cA[k].errorCode.duplicateCreate};const L={video:v,audio:y,share:_}[k],B=await Ra(Ad(k,L,"success").pipe(mr((([H])=>{if(H)return mf(An(f.addProcessor(r)).pipe(Kn((Y=>({result:Y})))),Uc(1e4).pipe(Kn((()=>{throw{type:pQ,errorCode:Fe.OPERATION_TIMEOUT}}))));throw{type:Wu,reason:`${q=k,OUe(eke(q).toLowerCase())} encode status is failed`,errorCode:Fe.INTERNAL_ERROR};var q})),tp((H=>{throw H!=null&&H.type?H:{type:Wu,reason:"An error occurred while creating a Processor.",errorCode:Fe.INTERNAL_ERROR}}))));if(!B.result)throw{type:Wu,reason:"An error occurred while creating a Processor.",errorCode:Fe.INTERNAL_ERROR};return l(MNe(r)),B.result})(this[en],e)}addProcessor(e){return(async(n,r)=>{const{store:{getState:i,dispatch:l},mediaAgent:f}=n,h=i(),{processor:{processorCreatedList:v,processorInstanceList:y},video:{backgroundMode:_,mask:A,virtualBackground:R}}=h,{name:k,type:N}=r,L=["video","share"].includes(N);if(!v.some((({name:B,type:H})=>B===k&&H===N)))throw{type:gs,reason:"Processor not found.",errorCode:cA[N].errorCode.mismatchProcessor};if(y.some((({type:B,name:H})=>B===N&&(L||k===H))))throw{type:Lt,reason:L?`Currently we only support using one ${N} processor at a time.`:"Cannot add this processor again.",errorCode:cA[N].errorCode.limitExceed};if(N==="video"){if((_===_u.VirtualBackground||_===_u.Mask)&&(A.imageSrc||R.imageSrc))throw{type:Lt,reason:"Cannot use video processor when virtual background or mask is enabled",errorCode:Fe.VIDEO_VB_PROCESSOR_CONFLICT};l(hme(_u.VideoProcessor))}return await f.startProcessor(r),l(NNe({name:k,type:N})),""})(this[en],e)}removeProcessor(e){return(async(n,r)=>{const{store:{getState:i,dispatch:l},mediaAgent:f}=n,h=i(),{processor:{processorInstanceList:v}}=h,{name:y,type:_}=r;if(!v.some((({name:A,type:R})=>A===y&&R===_)))throw{type:gs,reason:"Processor not found.",errorCode:cA[_].errorCode.mismatchProcessor};return await f.stopProcessor(r),l(PNe({name:y,type:_})),_==="video"&&l(hme(_u.Null)),""})(this[en],e)}renderVideo(e,n,r,i,l,f,h,v,y){return U7e(this[en],e,n,r,i,l,f,h,v,y)}stopRenderVideo(e,n,r,i,l=!1,f){return((h,v,y,_,A,R=!1,k)=>{const{store:{getState:N,dispatch:L},mediaAgent:B}=h,H=N(),{video:{subscribedVideoList:q,renderedVideoList:Y},meeting:{userId:K}}=H;if(q.includes(y)){const se=_||kA;if(d2()&&y===K&&sE(v))return v.pause(),L(TY(y)),L(bbe(v.id)),Promise.resolve("");if(Y.find((ie=>ie.userId===y&&ie.key===se&&ie.canvasId===v.id))&&(B.stopRenderVideo(v.id,y,se,Ufe(A),R),Y.filter((ie=>ie.userId===y)).length==1&&(y!==K&&B.unsubscribeVideo(y),L(TY(y))),L(sX({userId:y,key:se,canvasId:v.id}))),k&&K!==k){const{video:{subscribedVideoList:ie,prefetchedVideo:le}}=N();HP(H).find((M=>M.userId===k))&&!ie.includes(k)&&(le==null?void 0:le.userId)!==k&&L(JP({userId:k,lastCopy:le}))}}return Promise.resolve("")})(this[en],e,n,r,i,l,f)}updateVideoCanvasDimension(e,n,r){return((i,l,f,h)=>{const{mediaAgent:v}=i;return f>=0&&h>=0&&v.updateRenderedVideoCanvasDimension(l,f,h),Promise.resolve("")})(this[en],e,n,r)}adjustRenderedVideoPosition(e,n,r,i,l,f,h){return((v,y,_,A,R,k,N,L)=>{const{store:{getState:B,dispatch:H},mediaAgent:q}=v,{video:{subscribedVideoList:Y}}=B();if(Y.includes(_)){if(sE(y))return Promise.resolve("");const K=L||kA;q.adjustRenderedVideoPosition(y.id,_,K,k,N,A,R,Ufe("#000")),H(O2({userId:_,key:K,canvasId:y.id,aspectRatio:R?A/R:0}))}else console.warn("Cannot adjust the size or position of the video as the video has not been rendered yet.");return Promise.resolve("")})(this[en],e,n,r,i,l,f,h)}clearVideoCanvas(e,n){return((r,i,l)=>{const{mediaAgent:f}=r;return f.clearVideoCanvas(i.id,Ufe(l)),Promise.resolve("")})(this[en],e,n)}mirrorVideo(e){return((n,r)=>{const{store:{getState:i,dispatch:l},mediaAgent:f}=n,h=i(),{video:{isCurrentUserStartedVideo:v,virtualBackground:y,isMirrored:_}}=h;return _===r||((v||y!=null&&y.isVBConfigured)&&xCe(r,f,h),l(LDe(r))),Promise.resolve("")})(this[en],e)}enableHardwareAcceleration(e){return((n,r)=>{const{store:{getState:i,dispatch:l},mediaAgent:f}=n,{video:{isSupportHDVideo:h}}=i(),v=[];if(typeof r=="boolean"||r.decode!==void 0){const y=typeof r=="boolean"?r:!!r.decode;y?v.push(Yo.isSupportVideoDecodeHardwareAcceleration().then((_=>(_&&f.enableHardwareAccelerationForVideoDecode(_),l(TP({decode:_})),_)))):(f.enableHardwareAccelerationForVideoDecode(y),l(TP({decode:y})),v.push(!0))}if(typeof r=="boolean"||r.encode!==void 0){const y=typeof r=="boolean"?r:!!r.encode;h?y?Yo.isCompatibleHardwareForEncode()?v.push(Yo.isSupportVideoEncodeHardwareAcceleration().then((_=>(_&&f.enableHardwareAccelerationForVideoEncode(_),l(TP({encode:_})),_)))):(console.warn("Can not turn on hardware acceleration with your graphic card due to the technical limitation"),v.push(!1)):(f.enableHardwareAccelerationForVideoEncode(!1),l(TP({encode:!1})),v.push(!0)):typeof r!="boolean"&&r!=null&&r.encode&&(console.warn("Can not use the hardware acceleration for video encoding due to the account restriction"),v.push(!1))}return Promise.all(v).then((y=>y.every((_=>!!_))))})(this[en],e)}subscribeVideoStatisticData(e){return(async(n,r)=>{const{mediaAgent:i,store:{getState:l,dispatch:f}}=n,{media:{videoDecodeStatus:h,videoEncodeStatus:v},video:{subscriptionStatus:y}}=l(),_=!r||r.decode,A=!r||r.encode;return Ad("video",v,h).subscribe((([R,k])=>{const N={};_&&k&&!y.decode&&(i.subscribeToQos([cf.VideoDecode],mA),Object.assign(N,{decode:!0})),A&&R&&!y.encode&&(i.subscribeToQos([cf.VideoEncode],mA),Object.assign(N,{encode:!0})),r!=null&&r.detailed&&k&&!y.detailed&&(i.enableVideoObserver(!0),Object.assign(N,{detailed:!0})),f(gme(N))})),null})(this[en],e)}unsubscribeVideoStatisticData(e){return(async(n,r)=>{const{mediaAgent:i,store:{dispatch:l}}=n,f=!r||r.decode,h=!r||r.encode,v={};return f&&(i.unsubscribeFromQos([cf.VideoDecode]),l(iX(MA)),Object.assign(v,{decode:!1})),h&&(i.unsubscribeFromQos([cf.VideoEncode]),l(aX(MA)),Object.assign(v,{encode:!1})),r!=null&&r.detailed&&(i.enableVideoObserver(!1),Object.assign(v,{detailed:!1})),l(gme(v)),null})(this[en],e)}previewVirtualBackground(e,n,r,i){return((l,f,h,v,y)=>{const{store:{getState:_,dispatch:A},mediaAgent:R}=l,k=_();return DY({imageUrl:h,cropped:v,cameraId:y},R,k,f).then((N=>(typeof N=="object"&&N!=null&&N.type&&A(N),A(OY({imageUrl:h,cropped:v})),!0))).catch((N=>Promise.reject({type:Lt,...N??{}})))})(this[en],e,n,r,i)}updateVirtualBackgroundImage(e,n){return((r,i,l)=>{const{store:{getState:f,dispatch:h},mediaAgent:v}=r,y=f(),{video:{virtualBackground:{imageSrc:_,cropped:A},backgroundMode:R}}=y;return i===_&&l===A?Promise.resolve(!0):R===_u.Mask||R===_u.VideoProcessor?Promise.reject({type:Lt,reason:`Cannot update virtual background in the ${R===_u.Mask?"mask":"video processor"} mode`,errorCode:Fe.VIDEO_VB_PROCESSOR_CONFLICT}):DY({imageUrl:i,cropped:l},v,y).then((k=>(typeof k=="object"&&k!=null&&k.type&&h(k),h(OY({imageUrl:i,cropped:l})),!0))).catch((k=>Promise.reject({type:Lt,...k??{}})))})(this[en],e,n)}stopPreviewVirtualBackground(){return(e=>{const{store:{getState:n},mediaAgent:r}=e,{video:{virtualBackground:{isVBConfigured:i}}}=n();return i?(r.stopVirtualBackgroundSetting(),Promise.resolve(!0)):Promise.reject({type:Lt,reason:"Cannot stop preview virtual background before start",errorCode:Fe.VIDEO_VB_MISMATCH_STATE})})(this[en])}previewVideoMask(e,n){return((r,i,l)=>{const{store:{getState:f,dispatch:h},mediaAgent:v}=r,y=f();return l.rootWidth&&l.rootHeight||Object.assign(l,{rootWidth:i.width,rootHeight:i.height}),kY(l,v,y,i).then((_=>(typeof _=="object"&&_!=null&&_.type&&h(_),h(IY(l)),!0))).catch((_=>Promise.reject({type:Lt,..._??{}})))})(this[en],e,n)}updateVideoMask(e){return((n,r)=>{const{store:{getState:i,dispatch:l},mediaAgent:f}=n,h=i(),{video:{mask:v,backgroundMode:y}}=h,{isMaskConfigured:_}=v;if(y===_u.VirtualBackground||y===_u.VideoProcessor)return Promise.reject({type:Lt,reason:`Cannot update mask in the ${y===_u.VirtualBackground?"virtual background":"video processor"} mode`,errorCode:Fe.VIDEO_MASK_PROCESSOR_CONFLICT});if(_){const A={...r};return["imageUrl","cropped","clip","rootHeight","rootWidth"].forEach((R=>{(r==null?void 0:r[R])===void 0&&(R==="imageUrl"?Object.assign(A,{imageUrl:v.imageSrc}):Object.assign(A,{[`${R}`]:v[R]}))})),kY(A,f,h).then((R=>(typeof R=="object"&&R!=null&&R.type&&l(R),l(IY(A)),!0))).catch((R=>Promise.reject({type:Lt,...R??{}})))}return Promise.reject({type:Lt,reason:"Cannot update mask",errorCode:Fe.VIDEO_MASK_IMAGE_INACCESSIBLE})})(this[en],e)}stopPreviewVideoMask(){return(e=>{const{store:{getState:n},mediaAgent:r}=e,{video:{mask:{isMaskConfigured:i}}}=n();return i?(r.stopMaskSetting(),Promise.resolve(!0)):Promise.reject({type:Lt,reason:"Cannot stop preview mask before start",errorCode:Fe.VIDEO_MASK_IMAGE_INACCESSIBLE})})(this[en])}requestFarEndCameraControl(e){return((n,r)=>{const{store:{getState:i},rwgAgent:l}=n,f=i(),{meeting:{userId:h},video:{farEndCameraControlStatus:{controlledUserList:v}}}=f;return h===r?Promise.reject({type:Lt,reason:'Using "stream.controlCamera" method to control self camera',errorCode:Fe.FAR_END_CAMERA_CONTROL_MISMATCH_STATE}):HP(f).findIndex((y=>y.userId===r))===-1?Promise.reject({type:gs,reason:"Cannot request control camera with video off",errorCode:Fe.FAR_END_CAMERA_CONTROL_MISMATCH_STATE}):vpe(f).findIndex((y=>y.userId===r))!==-1?(v.includes(r)||l.sendFarEndCameraControl(Gp.Request,r),Promise.resolve("")):Promise.reject({type:Lt,reason:"The far end camera does not support PTZ",errorCode:Fe.FAR_END_CAMERA_CONTROL_DEVICE_UNSUPPORTED})})(this[en],e)}approveFarEndCameraControl(e){return((n,r)=>{const{store:{getState:i,dispatch:l},rwgAgent:f}=n,{video:{currentCameraControlStatus:{isRequested:h,isInControl:v,controllingUserId:y},ptz:_,activeCamera:A}}=i();if(h){if(v&&(!y||r===y))return Promise.resolve("");f.sendFarEndCameraControl(Gp.Approve,r);const R=_==null?void 0:_[A];return R!==void 0&&f.sendCameraAblity({pan:!!R.pan,tilt:!!R.tilt,zoom:!!R.zoom}),l(cX(!1)),l(lX({isInControl:!0,userId:r})),He(jJ,{isControlled:!0,userId:r}),Promise.resolve("")}return Promise.reject({type:Lt,reason:"Cannot approve before request",errorCode:Fe.FAR_END_CAMERA_CONTROL_MISMATCH_STATE})})(this[en],e)}declineFarEndCameraControl(e){return((n,r)=>{const{store:{getState:i,dispatch:l},rwgAgent:f}=n,{video:{currentCameraControlStatus:{isInControl:h,isRequested:v}}}=i();return v||h?(f.sendFarEndCameraControl(Gp.Decline,r),l(cX(!1)),l(lX({isInControl:!1,userId:0})),He(jJ,{isControlled:!1}),Promise.resolve("")):Promise.reject({type:Lt,reason:"Cannot decline before request",errorCode:Fe.FAR_END_CAMERA_CONTROL_MISMATCH_STATE})})(this[en],e)}giveUpFarEndCameraControl(e){return((n,r)=>{const{store:{getState:i,dispatch:l},rwgAgent:f}=n,{video:{farEndCameraControlStatus:{controlledUserList:h}}}=i();return h.includes(r)?(f.sendFarEndCameraControl(Gp.GiveUp,r),l(uX(r)),Promise.resolve("")):Promise.reject({type:Lt,reason:"Cannot give up control befire aquired",errorCode:Fe.FAR_END_CAMERA_CONTROL_MISMATCH_STATE})})(this[en],e)}controlCamera(e){return((n,r)=>{const{store:{getState:i,dispatch:l},mediaAgent:f}=n,{video:{isCurrentUserStartedVideo:h,ptz:v,activeCamera:y}}=i();if(h){const{cmd:_,range:A,reset:R}=r,k=v[y];if(k){const N=Ebe(k)||{},{key:L,range:B}=lke(_,A);if(k[L])return Object.assign(N,{[L]:R?0:cke(k[L].capability,k[L].value,B)}),f.movePTZCamera(N).then((()=>{l(gbe({constraints:N,deviceId:y}))})).catch((H=>Promise.reject({type:Wu,reason:H,errorCode:Fe.INTERNAL_ERROR})))}return Promise.resolve("")}return Promise.reject({type:Lt,reason:"Cannot control the camera before it's started",errorCode:Fe.FAR_END_CAMERA_CONTROL_MISMATCH_STATE})})(this[en],e)}controlFarEndCamera(e){return((n,r)=>{const{store:{getState:i,dispatch:l},rwgAgent:f}=n,h=i(),{video:{farEndCameraControlStatus:{controlledUserList:v,isControlling:y}}}=h,{userId:_,cmd:A,range:R}=r;if(y)return Promise.reject({type:Lt,reason:"Cannot send new command while the previous control is not done",errorCode:Fe.FAR_END_CAMERA_RATE_LIMIT});if(v.includes(_)){if(A===gA.SwitchCamera)return f.sendFarEndCameraControl(Gp.SwitchCamera,_,gA.SwitchCamera),Promise.resolve("");{const k=vpe(h).find((N=>N.userId===_));if(k==null||!k.nFECC)return Promise.reject({type:Lt,reason:"The far end camera does not support PTZ",errorCode:Fe.FAR_END_CAMERA_CONTROL_DEVICE_UNSUPPORTED});if(R&&R>0){const N=R/100*1e4;return f.sendFarEndCameraControl(Gp.StartControl,_,A),l(pme(!0)),A5(200).pipe(Au(Uc(N-100).pipe(Ys(1)))).subscribe((()=>{f.sendFarEndCameraControl(Gp.ContinueControl,_,A)})),Ra(Uc(N).pipe(ao((()=>{f.sendFarEndCameraControl(Gp.StopControl,_,A),l(pme(!1))})))).then((()=>""))}return Promise.reject({type:gs,reason:"Range cannot be negative or 0",errorCode:Fe.FAR_END_CAMERA_INVALID_RANGE})}}return Promise.reject({type:Lt,reason:"Cannot control before request granted",errorCode:Fe.FAR_END_CAMERA_PERMISSION_REQUIRED})})(this[en],e)}attachVideo(e,n,r){return((i,l,f,h)=>{const{store:{getState:v,dispatch:y},mediaAgent:_}=i,A=v(),{meeting:{userId:R,isUseWBVideo:k},media:{enforceMultipleVideos:N,alternativeNameForVideoPlayer:L,disableRenderLimits:B},video:{videoAttachments:H,subscribedVideoList:q}}=A,Y=Yo.getMaxCountRender(k,!!N,B),K=q.filter((Ne=>Ne!==R)).length;if(Y>1&&l!==R&&!q.includes(l)&&K>=Y)return Promise.reject({type:Lt,reason:`subscribe video counts greater than maximum size (${Y})`,errorCode:Fe.VIDEO_RENDER_LIMIT_EXCEED});if(HP(A).findIndex((Ne=>Ne.userId===l))===-1)return Promise.reject({type:gs,reason:"user is not send video",errorCode:Fe.STREAM_MISMATCH_USER});const{media:{videoDecodeStatus:se}}=A;let ie;const le=L??"video-player";if(h){var M;const[Ne,De]=PZ(h,le);if(!Ne)return Promise.reject(De);ie=De;const be=Number((M=ie.getAttribute("node-id"))!==null&&M!==void 0?M:"0");if(be!==l&&d2()&&[be,l].includes(R)){var we;const me=document.createElement(le);for(const Ye of ie.attributes)me.setAttribute(Ye.name,Ye.value);be&&(ie.setAttribute("node-id","0"),y(RY({userId:be,element:ie}))),(we=ie.parentElement)===null||we===void 0||we.replaceChild(me,ie),ie=me}}else ie=document.createElement(le);return Ad("video","success",se).subscribe((async([Ne,De])=>{if(De){const me=H[`${l}`];var be;me!=null&&me.includes(ie)?ie.setAttribute("video-quality",`${f}`):(be=ie)===null||be===void 0||be.setAttribute("node-id",`${l}`),y(vbe({userId:l,element:ie})),l!==R&&_.subscribeVideo(l,f,!1),q.includes(l)||y(oX(l)),y(O2({userId:l,key:kA,canvasId:WP,videoQuality:f,aspectRatio:16/9}))}})),Promise.resolve(ie)})(this[en],e,n,r)}detachVideo(e,n){return((r,i,l)=>{const{store:{getState:f,dispatch:h},mediaAgent:v}=r,y=f(),{video:{subscribedVideoList:_,videoAttachments:A},meeting:{userId:R},media:{alternativeNameForVideoPlayer:k}}=y;if(_.includes(i)){let L;const B=k??"video-player";if(l){const[Y,K]=PZ(l,B);L=Y?K:void 0}const H=A[`${i}`];let q;if(H&&H.length!==0){var N;L?H.findIndex((se=>se===L))!==-1?(q=L,q.setAttribute("node-id","0"),h(RY({userId:i,element:q}))):console.warn(`${l} has not been attached with userID:${i}`):(q=[...H],q.forEach((se=>{se.setAttribute("node-id","0")})),h(RY({userId:i,element:q})));const{video:{videoAttachments:Y,renderedVideoList:K}}=f();((N=Y[`${i}`])===null||N===void 0?void 0:N.length)===0&&(K.filter((se=>se.userId===i&&se.canvasId!==WP)).length===0&&(i!==R&&v.unsubscribeVideo(i),h(TY(i))),h(sX({userId:i,key:kA,canvasId:WP})))}else console.warn(`UserId:${i} has not been attached.`);return Promise.resolve(q)}return Promise.resolve(void 0)})(this[en],e,n)}spotlight(e,n){return((r,i,l)=>{const{store:{getState:f},rwgAgent:h}=r,v=f(),{video:{spotlightUserList:y}}=v;return y.includes(i)?Promise.reject({type:gs,reason:`userId:${i} has already spotlighted`,errorCode:Fe.VIDEO_SPOTLIGHT_MISMATCH_STATE}):HP(v).findIndex((_=>_.userId===i))===-1?Promise.reject({type:gs,reason:`userId:${i} has not started video`,errorCode:Fe.STREAM_MISMATCH_USER}):(h.spotlightVideo(i,{bReplace:l,bSpotlight:!0,bUnSpotlightAll:!1}),Cs(KP,(_=>{const{spotlightList:A}=_;return A.includes(i)})))})(this[en],e,n)}removeSpotlight(e){return((n,r)=>{const{store:{getState:i},rwgAgent:l}=n,f=i(),{meeting:{userId:h},video:{spotlightUserList:v}}=f,y=r||h,_=Ai(f);if(!v.includes(y)||_.findIndex((k=>k.userId===y))===-1)return Promise.reject({type:gs,reason:`userId:${r} is not spotlighted`,errorCode:Fe.VIDEO_SPOTLIGHT_MISMATCH_STATE});const A=Qh(f);if(v.length>1&&y===h&&!A)return Promise.reject({type:Lt,reason:"Cannot remove spotlight for self when the host has multiple spotlighted videos",errorCode:Fe.VIDEO_SPOTLIGHT_MULTI_CONFLICT});if(y!==h&&!A)return Promise.reject({type:hf,reason:"only host or co-host can cancel others spotlight",errorCode:Fe.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED});l.spotlightVideo(y,{bReplace:!1,bSpotlight:!1,bUnSpotlightAll:!1});const R=y===h&&v.length===1?zJ:KP;return Cs(R,(k=>{const{spotlightList:N}=k;return!N.includes(y)}))})(this[en],e)}removeAllSpotlights(){return(e=>{const{store:{getState:n},rwgAgent:r}=e,{video:{spotlightUserList:i}}=n();return i.length===0?Promise.resolve(""):(r.spotlightVideo(null,{bUnSpotlightAll:!0}),Cs(KP,(l=>{const{spotlightList:f}=l;return f.length===0})))})(this[en])}screenshotVideo(e){return(async(n,r)=>{const{mediaAgent:i,store:{getState:l,dispatch:f}}=n,{video:{subscribedVideoList:h,selfPreviewVideoList:v,customizedVideoOption:y}}=l(),_=Do(l()),A=r===(_==null?void 0:_.userId)&&_.bVideoOn&&(v.length>0||!(y==null||!y.videoElement));if(!h.includes(r)&&!A)return Promise.reject({type:gs,reason:"user is not send video",errorCode:Fe.STREAM_MISMATCH_USER});try{const R=await i.screenshot(r,"video");return r!==(_==null?void 0:_.userId)&&f(cme({targetUser:r,userId:_==null?void 0:_.userId,displayName:_==null?void 0:_.displayName})),R}catch(R){return Promise.reject({type:Wu,reason:R,errorCode:Fe.INTERNAL_ERROR})}})(this[en],e)}isCapturingVideo(){return(e=>{const{store:{getState:n}}=e,r=n();return!!r.video&&r.video.isCurrentUserStartedVideo})(this[en])}isCameraTaken(){return(e=>{const{store:{getState:n}}=e,r=n();return!!r.video&&r.video.isCameraTaken})(this[en])}isCaptureForbidden(){return(e=>{const{store:{getState:n}}=e,r=n();return!!r.video&&r.video.isCaptureForbidden})(this[en])}getCameraList(){return(e=>{const{store:{getState:n}}=e,r=n();if(!r.video)return[];const{video:{cameraDevicesList:i}}=r;return i.map((l=>Object.assign({},l)))})(this[en])}getActiveCamera(){return(e=>{const{store:{getState:n}}=e,r=n();return r.video?r.video.activeCamera:""})(this[en])}getActiveVideoId(){return(e=>{const{store:{getState:n}}=e,r=n();return r.video?r.video.activeVideoId:0})(this[en])}getVideoMaxQuality(){return(e=>{const{store:{getState:n}}=e,r=n();return r.video?r.video.receivedVideoMaxQuality:RJ.Video_90P})(this[en])}getReceivedVideoDimension(){return(e=>{const{store:{getState:n}}=e,r=n();return r.video?r.video.receivedVideoDimension:null})(this[en])}getCapturedVideoResolution(){return(e=>{const{store:{getState:n}}=e;return{...n().video.capturedVideoDimension}})(this[en])}isSupportMultipleVideos(){return(e=>{const{store:{getState:n}}=e,{meeting:{isUseWBVideo:r},media:{enforceMultipleVideos:i,disableRenderLimits:l}}=n();return Yo.getMaxCountRender(r,i,l)>1})(this[en])}isSupportHDVideo(){return(e=>{var n;const{store:{getState:r}}=e;return(n=r().video)===null||n===void 0?void 0:n.isSupportHDVideo})(this[en])}getHardwareAccelerationStatus(){return(e=>{var n;const{store:{getState:r}}=e;return(n=r().video)===null||n===void 0?void 0:n.hardwareAcceleration})(this[en])}getVideoStatisticData(){return(({store:{getState:e}})=>{const{video:{statistic:n}}=e();return{...n}})(this[en])}isSupportVirtualBackground(){return(e=>{const{store:{getState:n}}=e,r=n();return sme(r.media.enforceVirtualBackground,r.meeting.isUseWBVideo)})(this[en])}getVirtualbackgroundStatus(){return(e=>{const{store:{getState:n}}=e;return{...n().video.virtualBackground}})(this[en])}isRenderSelfViewWithVideoElement(){return d2(this[Ia].getState().meeting.isUseWBVideo)}getNetworkQuality(e){return((n,r)=>{var i;const{store:{getState:l}}=n,f=l(),{video:h,meeting:{userId:v}}=f,y=r??v,_=h==null||(i=h.networkQuality)===null||i===void 0?void 0:i[`${y}`];if(_){const A={};return _.uplink&&Object.assign(A,{uplink:_.uplink.level}),_.downlink&&Object.assign(A,{downlink:_.downlink.level}),A}return null})(this[en],e)}getFarEndCameraPTZCapability(e){return((n,r)=>{const{store:{getState:i}}=n,l=vpe(i()).find((f=>f.userId===r));return(l==null?void 0:l.nFECC)!==void 0?uke(l==null?void 0:l.nFECC):{pan:!1,tilt:!1,zoom:!1}})(this[en],e)}getCameraPTZCapability(e){return((n,r)=>{const{store:{getState:i}}=n,{video:{ptz:l,activeCamera:f}}=i(),h=l[r??f];return{pan:!(h==null||!h.pan),tilt:!(h==null||!h.tilt),zoom:!(h==null||!h.zoom)}})(this[en],e)}isBrowserSupportPTZ(){const{pan:e,tilt:n,zoom:r}=Yo.getPTZCapability();return e||n||r}getVideoMaskStatus(){return(e=>{var n;const{store:{getState:r}}=e,i=r(),{isMaskConfigured:l,imageSrc:f,...h}=((n=i.video)===null||n===void 0?void 0:n.mask)||{};return{...h,imageUrl:f}})(this[en])}isVideoMirrored(){return(e=>{const{store:{getState:n}}=e,{video:{isMirrored:r}}=n();return r})(this[en])}getSpotlightedUserList(){return(e=>{const{store:{getState:n}}=e,r=n();if(!r.video)return[];const{video:{spotlightUserList:i}}=r;return Ai(r).filter((l=>i.includes(l.userId))).map((l=>D2(l)))})(this[en])}getVideoMediaPlaybackController(){return(({store:{getState:e},mediaAgent:n})=>{const r=e(),{video:{isUsingMediaPlayback:i}}=r;if(i){const{videoElement:l}=qp.getInstance();return FSe(l,"video",r,n)}return null})(this[en])}getMaxRenderableVideos(){return(e=>{const{store:{getState:n}}=e,{meeting:{isUseWBVideo:r},media:{enforceMultipleVideos:i,disableRenderLimits:l}}=n();return Yo.getMaxCountRender(r,i,l)})(this[en])}startShareView(e,n,r){return(async(i,l,f,h)=>{const{store:{getState:v,dispatch:y},mediaAgent:_,rwgAgent:A}=i,R=v(),{share:{renderedEnsuredCanvas:k,isReceiveSharingFromMainSession:N,shareViewAttachments:L},media:{sharingDecodeStatus:B,alternativeNameForVideoPlayer:H}}=R;await(async function(se,ie,le,M){const{share:{isReceiveSharing:we,isRemoteSharingActive:Ne,activeNodeId:De,isSimultaneousShareView:be,status:me,annotationUsers:Ye,isReceiveSharingFromMainSession:Ke,ssrc:Ze}}=le;if(be){if(!se)return Promise.reject({type:gs,reason:"",errorCode:Fe.STREAM_MISMATCH_USER});if(Ke){if(ie!==De)return Promise.reject({type:gs,reason:"",errorCode:Fe.STREAM_MISMATCH_USER})}else{const $t=WEe(eE(le),ie);if($t)return $t}if(we)return Promise.reject({type:Lt,reason:"",errorCode:Fe.SCREEN_SHARE_MISMATCH_STATE});const z=zEe(Ye,Ze,M);if(z)return z;await Ra($Se(le))}else{if(!se||ie!==De)return Promise.reject({type:gs,reason:"",errorCode:Fe.STREAM_MISMATCH_USER});if(!Ne||we||me!==qs.End)return Promise.reject({type:Lt,reason:"",errorCode:Fe.SCREEN_SHARE_MISMATCH_STATE})}return""})(l,f,R,_),l.id||(l.id=rE("__ZOOM_SDK_SHARE_CANVAS_@__"));const q=!!h;var Y,K;if(Y=L[`${f}`],K=l.id,!(Y!=null&&Y.find((se=>se.isDummy&&se.canvasId===K)))){const se=bNe(f,l.id,H??"video-player");se.setAttribute("share-source",N?"main":""),y(LX({userId:f,element:se}))}return Ad("sharing","success",B).subscribe((([,se])=>{if(se){let ie=l;k.includes(l.id)||(ie=QJ(l),y(lNe(l.id))),y(BA(!0)),rL(A,v(),f),_.renderSharing(f,ie,q,h,N),wNe(f,v(),_)}})),B==="failed"?Promise.reject({type:Wu,reason:"",errorCode:Fe.INTERNAL_ERROR}):Cs(WJ,(se=>!!se),6e4)})(this[en],e,n,r)}stopShareView(){return(e=>{const{store:{dispatch:n,getState:r},rwgAgent:i,mediaAgent:l}=e,{share:{isReceiveSharing:f,activeNodeId:h,shareViewAttachments:v},breakoutRoom:y}=r();if(!f)return Promise.resolve("");let _=!1;(y==null?void 0:y.currentRoom.status)===vs.InRoom&&y.mainSessionAttendeeList.length>0&&(_=y.mainSessionAttendeeList.findIndex((N=>N.userId===h))>-1);const A=((R=v[`${h}`])==null?void 0:R.filter((N=>N.isDummy)))||[];var R;A&&A.length>0&&n(l5({userId:h,element:A})),l.stopRenderSharing(),i.unsubscribeSharing(h,_);const{share:{shareViewAttachments:k}}=r();return Object.entries(k).every((([,N])=>N.length===0))&&n(BA(!1)),Promise.resolve("")})(this[en])}switchShareView(e){return((n,r)=>{const{store:{getState:i,dispatch:l},rwgAgent:f,mediaAgent:h}=n,v=i(),{share:{isReceiveSharing:y,activeNodeId:_,isReceiveSharingFromMainSession:A},breakoutRoom:R}=v;if(!y)return Promise.reject({type:Lt,errorCode:Fe.SCREEN_SHARE_MISMATCH_STATE});if(!n2(v))return Promise.reject({type:Lt,errorCode:Fe.SCREEN_SHARE_MISMATCH_STATE,reason:"Cannot use `switchShareView` to switch when using `attachShareView`. Please use the sequence `detachShareView(oldUserId)`  `attachShareView(newUserId)` to perform the switch."});if(r===_)return Promise.resolve("");let k=[];if(k=A?R.mainSessionAttendeeList.filter((L=>L.bShareToBORooms&&L.sharerOn)):eE(v),!(k.findIndex((L=>L.userId===_))>-1))return Promise.reject({type:gs,reason:"no matching user id",errorCode:Fe.STREAM_MISMATCH_USER});{var N;const L=(N=YC(r,v))!==null&&N!==void 0?N:r,B=hge(_,r,L,{state:v,rwgAgent:f,mediaAgent:h});Array.isArray(B)&&B.length>0&&B.forEach((H=>l(H))),l(nL({bStatus:1,activeNodeID:r,ssrc:L})),He(GJ,{userId:r})}return Promise.resolve("")})(this[en],e)}updateSharingCanvasDimension(e,n){return((r,i,l)=>{const{store:{getState:f},mediaAgent:h}=r,v=f(),{share:{isReceiveSharing:y,isGrabRemoteControl:_,remoteControlViewportDomSelector:A}}=v;if(y&&(h.updateRenderedSharingDimension(i,l),_&&A)){const R=document.querySelector(A);h.updateRemoteControlProperties({dimension:R&&XJ(R)})}return Promise.resolve("")})(this[en],e,n)}startShareScreen(e,n){return(async(r,i,l)=>{const{store:{getState:f,dispatch:h},mediaAgent:v}=r,y=f(),{meeting:{meetingOptions:_},share:{sharePrivilege:A,ssrc:R,capturedEnsuredCanvas:k},media:{sharingEncodeStatus:N},breakoutRoom:L}=y;await y8e(i,y,l);const B=Qh(y);if(l!=null&&l.broadcastToBreakoutRoom){if(!B||(L==null?void 0:L.currentRoom.status)===vs.InRoom)return B?Promise.reject({type:Lt,reason:"Unable to share screen to breakout room when in the room",errorCode:Fe.SCREEN_SHARE_SUBSESSION_CONFLICT}):Promise.reject({type:hf,errorCode:Fe.SCREEN_SHARE_HOST_PRIVILEGE_REQUIRED});h(HU(!0))}else h(HU(!1));return(l==null?void 0:l.requestReadReceipt)!==void 0&&h(aNe(l==null?void 0:l.requestReadReceipt)),(l==null?void 0:l.optimizedForSharedVideo)!==void 0&&A!==sv.MultipleShare&&h(PX((l==null?void 0:l.optimizedForSharedVideo)&&Yo.isSupportVideoShareSend())),i.id||(i.id=rE("__ZOOM_SDK_SELF_SHARE_CANVAS_@__")),h(fge(!(l==null||!l.simultaneousShareView))),Ad("sharing",N,"success").subscribe((([H])=>{if(H){k.includes(i.id)||(QJ(i),h(cNe(i.id)));let q=document.querySelector(`#${oSe}`);q&&q.tagName==="VIDEO"||(q=document.createElement("video"),q.id=oSe,q.style.display="none",document.body.appendChild(q));const Y=l!=null&&l.secondaryCameraId?{cameraId:l.secondaryCameraId,width:l.captureWidth,height:l.captureHeight}:void 0,K=!(l!=null&&l.hideShareAudioOption);v.startDesktopSharing(R,i,q,Y,_!=null&&_.isDisableShareAudioIntoBo?K&&!(l!=null&&l.broadcastToBreakoutRoom):K,l==null?void 0:l.displaySurface,l==null?void 0:l.sourceId,l==null?void 0:l.controls),h(MX(void 0)),h(rNe(!!Y))}})),new Promise(((H,q)=>{mf(si(uf).pipe(Gt((Y=>Y.sharerOn!==void 0)),Ys(1)),si(txe,1).pipe(Nt((Y=>ZA({reason:Y.reason||"user deny screen share",errorCode:Y.reason?Fe.SCREEN_SHARE_SYSTEM_DENIED:Fe.SCREEN_SHARE_USER_DENIED}))))).subscribe({next:Y=>{if(Y.sharerOn===!0){const{share:{isSharingToBreakoutRoom:K},meeting:{meetingOptions:se}}=f(),ie=!(se!=null&&se.isDisableShareAudioIntoBo||!K);v.enableShareAudioToBreakoutRoom(ie),H("")}else q({type:Wu,errorCode:Fe.INTERNAL_ERROR})},error:Y=>{q({type:Lt,...Y})}})}))})(this[en],e,n)}stopShareScreen(){return(e=>{const{store:{getState:n,dispatch:r},rwgAgent:i,mediaAgent:l}=e,{share:{status:f,isSimultaneousShareView:h},meeting:{userId:v}}=n();return f===qs.End?Promise.resolve(""):(i.stopSharing(v),l.stopDesktopSharing(),r(Yp(qs.End)),h&&r(fge(!1)),Cs(uf,(y=>y.sharerOn===!1)))})(this[en])}pauseShareScreen(){return(e=>{const{store:{getState:n,dispatch:r},rwgAgent:i,mediaAgent:l}=e,f=n(),{share:{status:h},breakoutRoom:v}=f;if(h===qs.Sharing){if(i.pauseSharing(),l.pauseDesktopSharing(),v&&eh(f)){const y=Do(f);return Promise.resolve("").then((()=>{if(y){const{userId:_,sharerOn:A,bShareAudioOn:R,bVideoShare:k}=y,N={userId:_,sharerOn:A,sharerPause:!0,bShareAudioOn:R,bVideoShare:k};r(ML({update:[N]})),r(Yp(qs.Paused)),He(uf,N)}}))}return Cs(uf,(y=>y.sharerPause===!0)).then((()=>(r(Yp(qs.Paused)),"")))}return Promise.reject({type:Lt,errorCode:Fe.SCREEN_SHARE_MISMATCH_STATE})})(this[en])}resumeShareScreen(){return(e=>{const{store:{getState:n,dispatch:r},rwgAgent:i,mediaAgent:l}=e,f=n(),{share:{status:h},breakoutRoom:v}=f;if(h===qs.Paused){if(i.resumeSharing(),l.resumeDesktopSharing(),v&&eh(f)){const y=Do(f);return Promise.resolve("").then((()=>{if(y){const{userId:_,sharerOn:A,bShareAudioOn:R,bVideoShare:k}=y,N={userId:_,sharerOn:A,sharerPause:!1,bShareAudioOn:R,bVideoShare:k};r(ML({update:[N]})),r(Yp(qs.Sharing)),He(uf,N)}}))}return Cs(uf,(y=>y.sharerOn===!0&&y.sharerPause===!1)).then((()=>(r(Yp(qs.Sharing)),"")))}return Promise.reject({type:Lt,errorCode:Fe.SCREEN_SHARE_MISMATCH_STATE})})(this[en])}setSharePrivilege(e){return M_e(this[en],e)}lockShare(e){return((n,r)=>M_e(n,r?sv.OnlyHost:sv.HostGrab))(this[en],e)}shareToBreakoutRoom(){return(e=>{const{store:{getState:n,dispatch:r},rwgAgent:i,mediaAgent:l}=e,{meeting:{userId:f},breakoutRoom:h,share:{isSharingToBreakoutRoom:v,status:y}}=n();return y===qs.End?Promise.reject({type:Lt,reason:"Invalid sharing status",errorCode:Fe.SCREEN_SHARE_MISMATCH_STATE}):v?Promise.resolve(""):h.currentRoom.status===vs.InRoom?Promise.reject({type:Lt,reason:"Unable to share screen to breakout room when in the room",errorCode:Fe.SCREEN_SHARE_SUBSESSION_CONFLICT}):(i.startShareToBreakoutRoom(f),r(HU(!0)),l.enableShareAudioToBreakoutRoom(!0),Promise.resolve(""))})(this[en])}stopShareToBreakoutRoom(){return(e=>{const{store:{getState:n,dispatch:r},rwgAgent:i,mediaAgent:l}=e,{meeting:{userId:f},share:{isSharingToBreakoutRoom:h}}=n();return h&&(i.stopShareToBreakoutRoom(f),r(HU(!1)),l.enableShareAudioToBreakoutRoom(!1)),Promise.resolve("")})(this[en])}muteOthersScreenShare(e){return((n,r)=>{const{store:{getState:i},rwgAgent:l}=n,f=i(),{meeting:{userId:h}}=f,v=eE(f);return r===h?Promise.reject({type:Lt,reason:"Cannot mute self share, use 'stopScreenShare' instead",errorCode:Fe.SCREEN_SHARE_MISMATCH_STATE}):v.findIndex((y=>y.userId===r))===-1?Promise.reject({type:gs,reason:"Target user is not sharing",errorCode:Fe.STREAM_MISMATCH_USER}):(l.stopSharing(r),Cs(Y0,(y=>y.some((_=>_.userId===r&&_.sharerOn===!1)))))})(this[en],e)}enableOptimizeForSharedVideo(e){return((n,r)=>{const{store:{getState:i,dispatch:l},mediaAgent:f,rwgAgent:h}=n,{share:{status:v,isOptimizedForSharedVideo:y,isSharingToBreakoutRoom:_,sharePrivilege:A},audio:{isSharingAudio:R},meeting:{userId:k}}=i();return v!==qs.End?y===r?Promise.resolve(""):A!==sv.MultipleShare?r&&!Yo.isSupportVideoShareSend()?Promise.reject({type:Lt,reason:"Cannot enable optimize for shared video due to the platform is not supported ",errorCode:Fe.SCREEN_SHARE_OPTIMIZE_VIDEO_UNSUPPORTED}):(h.startSharing(k,{bShareAudio:R,bShareToBO:_,bShareVideo:r}),f.switchSharingMode(r?ZU.VideoMode:ZU.Normal),Cs({event:uf,operations:[Gt((N=>N.bVideoShare!==void 0)),Ys(1)]},(N=>N.bVideoShare===r)).then((()=>(l(PX(r)),"")))):Promise.reject({type:Lt,reason:"Cannot enable optimize for shared video when enabling multiple screen shares",errorCode:Fe.SCREEN_SHARE_OPTIMIZE_VIDEO_CONFLICT}):Promise.reject({type:Lt,reason:"Cannot enable optimize for shared video when screen share is not started",errorCode:Fe.SCREEN_SHARE_MISMATCH_STATE})})(this[en],e)}updateSharedVideoQuality(e){return((n,r)=>{const{store:{getState:i,dispatch:l},rwgAgent:f}=n,h=i(),{share:{shareQuality:v,activeNodeId:y,isReceiveSharing:_}}=h,A=RMe(h);return _&&y!==0?(A&&v!==r&&(rL(f,h,y,r),l(qbe(r))),Promise.resolve("")):Promise.reject({type:Lt,reason:"Cannot update shared video quality when screen share is not started",errorCode:Fe.SCREEN_SHARE_MISMATCH_STATE})})(this[en],e)}subscribeShareStatisticData(e){return(async(n,r)=>{const{mediaAgent:i,store:{getState:l}}=n,f=l(),{media:{sharingEncodeStatus:h,sharingDecodeStatus:v}}=l(),y=Do(f),_=!r||r.decode,A=!r||r.encode;if(!y)return Promise.reject({type:Lt,reason:"Call this function after the 'join' method resolved.",errorCode:Fe.STREAM_SESSION_JOIN_REQUIRED});{const R=Ku(y.userRole)||!bo.isSupportSendScreenSharing?"failed":h;Ad("sharing",R,v).subscribe((([k,N])=>{_&&N&&i.subscribeToQos([cf.SharingDecode],mA),A&&k&&i.subscribeToQos([cf.SharingEncode],mA)}))}return""})(this[en],e)}unsubscribeShareStatisticData(e){return(async(n,r)=>{const{mediaAgent:i,store:{dispatch:l}}=n,f=!r||r.decode,h=!r||r.encode;return f&&(i.unsubscribeFromQos([cf.SharingDecode]),l(F5(MA))),h&&(i.unsubscribeFromQos([cf.SharingEncode]),l(F5(MA))),null})(this[en],e)}screenshotSharedContent(e){return(async(n,r)=>{const{store:{getState:i,dispatch:l},mediaAgent:f}=n,{share:{isReceiveSharing:h,activeNodeId:v,shareViewAttachments:y}}=i();if(!h)return Promise.reject({type:Lt,reason:"Cannot take screenshot when screen share is not started",errorCode:Fe.SCREEN_SHARE_MISMATCH_STATE});{let _=v;if(r){if(!Object.entries(y).some((([R,k])=>Number(R)===r&&k.length>0)))return Promise.reject({type:gs,reason:"User is not in the shared content rendering list",errorCode:Fe.STREAM_MISMATCH_USER});_=r}const A=Do(i());try{const R=await f.screenshot(_,"sharing");return l(nNe({targetUser:_,userId:A==null?void 0:A.userId,displayName:A==null?void 0:A.displayName})),R}catch(R){return Promise.reject({type:Wu,errorCode:Fe.INTERNAL_ERROR,reason:R})}}})(this[en],e)}attachShareView(e,n){return(async(r,i,l)=>{const{store:{getState:f,dispatch:h},mediaAgent:v,rwgAgent:y}=r,_=f(),{media:{sharingDecodeStatus:A,alternativeNameForVideoPlayer:R}}=_,k=R??"video-player";let N;if(await(function(L,B,H){const{share:{isSimultaneousShareView:q,annotationUsers:Y,ssrc:K,status:se,isReceiveSharing:ie,remoteControlledUserList:le,isReceiveSharingFromMainSession:M,activeNodeId:we},meeting:{userId:Ne},breakoutRoom:De}=B,be=[];if(M){var me;const Ze=Do(B);be.push(...(me=De==null?void 0:De.mainSessionAttendeeList.filter((z=>!z.bid&&!z.bHold&&z.userGUID!==(Ze==null?void 0:Ze.userGUID))))!==null&&me!==void 0?me:[])}else{var Ye,Ke;be.push(...(Ye=(Ke=eE(B))===null||Ke===void 0?void 0:Ke.filter((Ze=>Ze.userId!==Ne)))!==null&&Ye!==void 0?Ye:[])}if(L!==we){const Ze=WEe(be,L);if(Ze)return Ze}if(q){const Ze=zEe(Y,K,H);if(Ze)return Ze}else if(se!==qs.End)return Promise.reject({type:Lt,reason:"Screen share is in progress",errorCode:Fe.SCREEN_SHARE_MISMATCH_STATE});if(ie){if(Y.some(($t=>$t.isInitialized)))return Promise.reject({type:Lt,reason:"Cannot attach multiple share views due to annotation is in progress",errorCode:Fe.SCREEN_SHARE_MISMATCH_STATE});if(le.length>0)return Promise.reject({type:Lt,reason:"Cannot attach multiple share views due to remote control is in progress",errorCode:Fe.SCREEN_SHARE_MISMATCH_STATE});const Ze=Fbe(B),z=GEe();if(Ze>=z)return Promise.reject({type:Lt,reason:`Cannot attach multiple share views exceeding the maximum allowed limit(${z})`,errorCode:Fe.SCREEN_SHARE_LIMIT_EXCEED})}return""})(i,_,v),l){const[L,B]=PZ(l,k);if(!L)return Promise.reject(B);N=B}else N=document.createElement(k);return await Ra(Ad("sharing","success",A).pipe(Nt((async([,L])=>{if(L){await JU($Se(f()));const H=f(),{share:{isReceiveSharing:q,shareViewAttachments:Y,isReceiveSharingFromMainSession:K}}=H,se=Y[`${i}`];var B;N&&se&&se.findIndex((ie=>ie===N))!==-1?console.warn("Share view already attached"):(N.setAttribute("media-type","share"),N.setAttribute("share-source",K?"main":""),N.setAttribute("node-id",`${i}`)),h(LX({userId:i,element:N})),rL(y,H,i,void 0,q),q||(h(BA(!0)),h(nL({bStatus:1,activeNodeID:i,ssrc:(B=YC(i,H))!==null&&B!==void 0?B:i})),ANe(i,{state:H,rwgAgent:y,mediaAgent:v}))}})))),Promise.resolve(N)})(this[en],e,n)}detachShareView(e,n){return(async(r,i,l)=>{const{store:{getState:f,dispatch:h},rwgAgent:v,mediaAgent:y}=r,_=f(),{share:{shareViewAttachments:A},media:{alternativeNameForVideoPlayer:R}}=_;if(A[`${i}`]){var k;const B=TNe(i,{state:_,rwgAgent:v,mediaAgent:y});let H;Array.isArray(B)&&B.length>0&&B.forEach((le=>h(le)));const q=R??"video-player";if(l){const[le,M]=PZ(l,q);H=le?M:void 0}let Y;const K=A[`${i}`];H?K.findIndex((le=>le===H))!==-1?(Y=H,Y.setAttribute("node-id","0"),h(l5({userId:i,element:Y}))):console.warn(`${l} has not been attached with userID:${i}`):(Y=[...K.filter((le=>!le.isDummy))],Y.forEach((le=>{le.setAttribute("node-id","0")})),h(l5({userId:i,element:Y})));const{share:{shareViewAttachments:se},breakoutRoom:ie}=f();if(((k=se[`${i}`])===null||k===void 0?void 0:k.length)===0){let le=!1;(ie==null?void 0:ie.currentRoom.status)===vs.InRoom&&ie.mainSessionAttendeeList.length>0&&(le=ie.mainSessionAttendeeList.findIndex((De=>De.userId===i))>-1);const M=Object.entries(se).filter((([,De])=>De.length!=0)).length,we=[0,1].includes(M),Ne=M===0;if(v.unsubscribeSharing(i,le,!we),Ne&&h(BA(!1)),M===1){var N;const De=(N=Object.entries(se).find((([,be])=>be.length!==0)))===null||N===void 0?void 0:N[0];if(De){var L;const be=Number(De);h(nL({bStatus:1,activeNodeID:be,ssrc:(L=YC(be,_))!==null&&L!==void 0?L:be}))}}}return Promise.resolve(Y)}return Promise.resolve(void 0)})(this[en],e,n)}startAnnotation(){return(async e=>{const{store:{getState:n,dispatch:r},mediaAgent:i}=e,l=n(),{share:{ssrc:f,activeSsrc:h,isReceiveSharing:v,status:y,annotationVanishingToolTimer:_}}=l,A=y!==qs.End,R=await(async function(L){const{share:{ssrc:B,activeSsrc:H,annotationCapability:q,isReceiveSharing:Y,status:K,isReceiveSharingFromMainSession:se,annotationUsers:ie}}=L,le=K!==qs.End;if(!le&&!Y)return Promise.reject({type:Lt,reason:"No active share session",errorCode:Fe.SCREEN_SHARE_ANNOTATION_NO_ACTIVE_SHARE});if(q===0||le&&q===1)return Promise.reject({type:Lt,reason:"Annotation is not enabled for your account.",errorCode:Fe.SCREEN_SHARE_ANNOTATION_ACCOUNT_DISABLE});const M=ie.find((we=>we.ssrc===(Y?H:B)));if(Y){if(se)return Promise.reject({type:Lt,reason:"You cannot annotation on share to subsession content.",errorCode:Fe.SCREEN_SHARE_ANNOTATION_NOT_SUPPORT});if(M!=null&&M.isDisabled)return Promise.reject({type:Lt,reason:"Annotation is disabled for the current share session by sharer.",errorCode:Fe.SCREEN_SHARE_ANNOTATION_PRESENTER_DISABLED});if(M!=null&&M.isStarted)return Promise.reject({type:Lt,reason:"Annotation is already started",errorCode:Fe.SCREEN_SHARE_ANNOTATION_DUPLICATE_START})}else if(le&&M!=null&&M.isStarted)return Promise.reject({type:Lt,reason:"Annotation is already started",errorCode:Fe.SCREEN_SHARE_ANNOTATION_DUPLICATE_START});return M})(l),k=Do(l);setTimeout((()=>{v?(i.startViewerAnnotation(f,h,(k==null?void 0:k.displayName)||""),i.annotateAction(af.UPDATE_VANISHING_TOOL_TIME,{displayTime:2e3,outTime:2e3})):A&&(i.startPresenterAnnotation(f,f,(k==null?void 0:k.displayName)||""),i.annotateAction(af.UPDATE_VANISHING_TOOL_TIME,{displayTime:_.displayTime,outTime:_.vanishingTime}))}),0);const N=v?h:f;return R!=null&&R.isInitialized?(r(W0({ssrc:N,isStarted:!0})),Promise.resolve("")):(r(W0({ssrc:N,isInitialized:!0,isStarted:!0})),Cs(Uhe,(L=>(L&&r(W0({ssrc:N,isInitialized:!1,isStarted:!1})),!L))))})(this[en])}stopAnnotation(){return(e=>{const{store:{getState:n,dispatch:r},mediaAgent:i}=e,{share:{isReceiveSharing:l,activeSsrc:f,ssrc:h,annotationUsers:v}}=n(),y=l?f:h,_=v.find((R=>R.ssrc===y));if(_==null||!_.isInitialized||!_.isStarted)return Promise.reject({type:Lt,reason:"Annotation is not started.",errorCode:Fe.SCREEN_SHARE_ANNOTATION_NOT_START});r(W0({ssrc:_.ssrc,isStarted:!1}));const A={toolType:I1.None};return i.annotateAction(af.SELECT_TOOL,A),r(sL(I1.None)),i.annotateAction(af.CLOSE_TOOL_BAR),Promise.resolve("")})(this[en])}changeAnnotationPrivilege(e){return((n,r)=>{const{store:{getState:i},rwgAgent:l}=n,{meeting:{userId:f}}=i();return l.toggleShareAnnotation(r,f),Cs(ube,(h=>!!h))})(this[en],e)}showAnnotatorName(e){return((n,r)=>{const{store:{getState:i},mediaAgent:l}=n,{share:{status:f}}=i();return f!==qs.End?(l.annotateAction(af.SHOW_ANNOTATOR_NAME,{toShow:r}),Promise.resolve("")):Promise.reject({type:Lt,reason:"Only the share presenter can control the name display during a session session.",errorCode:Fe.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER})})(this[en],e)}canDoAnnotation(){return(e=>{var n;const{store:{getState:r}}=e,{share:{isReceiveSharing:i,activeNodeId:l,status:f,annotationCapability:h,isReceiveSharingFromMainSession:v,isSimultaneousShareView:y,annotationUsers:_},meeting:{userId:A}}=r(),R=f!==qs.End;if(!R&&!i||h===0||R&&h===1)return!1;const k=i?l:A,N=(n=YC(k,r()))!==null&&n!==void 0?n:k,L=_.find((H=>{var q;return H.ssrc===N||Td(N,(q=H.userId)!==null&&q!==void 0?q:0)})),B=L==null?void 0:L.isDisabled;return!(i&&(v||B)||y||xMe(r()))})(this[en])}getAnnotationController(){return(e=>({setToolType:n=>((r,i)=>{const{store:{getState:l,dispatch:f},mediaAgent:h}=r,{share:{annotationToolColor:v,annotationSpotlightColor:y,annotationToolWidth:_,status:A}}=l();if(!Object.values(I1).includes(i))return Promise.reject({type:Lt,reason:`toolType = ${i} is invalid`,errorCode:Fe.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER});const R=A!==qs.End,k=i===I1.Spotlight;if(k&&!R)return Promise.reject({type:Lt,reason:"Only the share presenter can spotlight",errorCode:Fe.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER});const N={toolType:i,color:k?y:v,width:_};return h.annotateAction(af.SELECT_TOOL,N),f(sL(i)),Promise.resolve("")})(e,n),setToolWidth:n=>((r,i)=>{const{store:{getState:l,dispatch:f},mediaAgent:h}=r,{share:{annotationToolType:v,annotationToolColor:y}}=l(),_=Math.ceil(i),A={toolType:v,color:y,width:_};return h.annotateAction(af.SELECT_TOOL,A),f(mNe(_)),Promise.resolve("")})(e,n),setToolColor:n=>((r,i)=>{const{store:{getState:l,dispatch:f},mediaAgent:h}=r,{share:{annotationToolType:v,annotationToolWidth:y}}=l(),_={toolType:v,color:i,width:y};return h.annotateAction(af.SELECT_TOOL,_),f(v===I1.Spotlight?hNe(i):pNe(i)),Promise.resolve("")})(e,n),getToolWidth:()=>(n=>{const{store:{getState:r}}=n,{share:{annotationToolWidth:i}}=r();return i})(e),getToolColor:()=>(n=>{const{store:{getState:r}}=n,{share:{annotationToolType:i,annotationToolColor:l,annotationSpotlightColor:f}}=r();return i===I1.Spotlight?f:l})(e),getToolType:()=>(n=>{const{store:{getState:r}}=n,{share:{annotationToolType:i}}=r();return i})(e),undo:()=>(n=>{const{mediaAgent:r}=n;return r.annotateAction(af.UNDO),Promise.resolve("")})(e),redo:()=>(n=>{const{mediaAgent:r}=n;return r.annotateAction(af.REDO),Promise.resolve("")})(e),clear:n=>((r,i)=>{const{store:{getState:l},mediaAgent:f}=r,{share:{status:h,isReceiveSharing:v},meeting:{isHost:y}}=l();if(!Object.values(Ofe).includes(i))return Promise.reject({type:Lt,reason:`clearType = ${i} is invalid`,errorCode:Fe.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER});const _=h!==qs.End;if(i===Ofe.All&&v&&!y)return Promise.reject({type:Lt,reason:"As a viewer, you cannot clear all annotation",errorCode:Fe.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER});if(i===Ofe.Viewer&&!_)return Promise.reject({type:Lt,reason:"You must be the presenter to clear the annotation from the viewer",errorCode:Fe.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER});const A={clearType:i,isHost:y};return f.annotateAction(af.CLEAR,A),Promise.resolve("")})(e,n),setVanishingToolTimer:n=>((r,i)=>{const{store:{getState:l,dispatch:f},mediaAgent:h}=r,{share:{annotationVanishingToolTimer:v}}=l(),{displayTime:y,vanishingTime:_}=i;if(y&&(y<0||y>15e3))return Promise.reject({type:Lt,reason:"Vanishing tool display time should be within range of [0, 15] seconds",errorCode:Fe.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER});if(_&&(_<1e3||_>15e3))return Promise.reject({type:Lt,reason:"Vanishing tool vanishing time should be within range of [1, 15] seconds",errorCode:Fe.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER});const A={displayTime:y??v.displayTime,outTime:_??v.vanishingTime};return h.annotateAction(af.UPDATE_VANISHING_TOOL_TIME,A),f(gNe({displayTime:A.displayTime,vanishingTime:A.outTime})),Promise.resolve("")})(e,n),getVanishingToolTimer:()=>(n=>{const{store:{getState:r}}=n,{share:{annotationVanishingToolTimer:i}}=r();return i})(e)}))(this[en])}getShareUserList(){return(e=>{const{store:{getState:n}}=e,r=n();if(!r.share)return[];const{share:{isReceiveSharingFromMainSession:i}}=r;if(i){const{breakoutRoom:{mainSessionAttendeeList:l}}=r;return l.filter((f=>f.bShareToBORooms&&(f.sharerOn||f.sharerPause))).map((f=>D2(f)))}return eE(r).map((l=>D2(l)))})(this[en])}getActiveShareUserId(){return(e=>{const{store:{getState:n}}=e,r=n();return r.share&&r.share.isRemoteSharingActive?r.share.activeNodeId:0})(this[en])}isReceiveSharing(){return(e=>{const{store:{getState:n}}=e,r=n();return!!r.share&&r.share.isReceiveSharing})(this[en])}getShareViewDimension(){return(e=>{const{store:{getState:n}}=e,r=n();if(r.share){if(r.share.status!==qs.End)return{...r.share.shareDimension};{const{share:{receivedShareDimension:i}}=r;return{width:i.width,height:i.height}}}return null})(this[en])}getShareStatus(){return(e=>{const{store:{getState:n}}=e,r=n();return r.share?r.share.status:null})(this[en])}isShareLocked(){return(e=>{const{store:{getState:n}}=e,r=n();return!!r.share&&r.share.sharePrivilege===sv.OnlyHost})(this[en])}isReceiveSharingFromMainSession(){return(e=>{const{store:{getState:n}}=e,r=n();return!!r.share&&r.share.isReceiveSharingFromMainSession})(this[en])}getSharePrivilege(){return(e=>{const{store:{getState:n}}=e,r=n();return r.share?r.share.sharePrivilege:null})(this[en])}isStartShareScreenWithVideoElement(){return bo.isSupportMediaStreamTrackProcessor}isOptimizeForSharedVideoEnabled(){return(e=>{const{store:{getState:n}}=e,r=n();return!!r.share&&!!r.share.isOptimizedForSharedVideo})(this[en])}isSupportOptimizedForSharedVideo(){return Yo.isSupportVideoShareSend()}isSupportVideoProcessor(){return bpe(this[en],"video")}isSupportAudioProcessor(){return bpe(this[en],"audio")}isSupportShareProcessor(){return bpe(this[en],"share")}getShareStatisticData(){return(({store:{getState:e}})=>{const{share:{statistic:n}}=e();return{...n}})(this[en])}getMaxRenderableShareViews(){return GEe()}requestRemoteControl(){return(e=>{const{store:{getState:n},rwgAgent:r}=e,{share:{isReceiveSharing:i,activeNodeId:l,isRemoteControlEnabled:f}}=n();return f?N_e(e,l)?i?GR(n())?Promise.reject({type:Lt,reason:"Already get the approval",errorCode:Fe.REMOTE_CONTROL_MISMATCH_STATE}):(r.sharingRequestRemoteControl(l,!0),new Promise((h=>{si(qJ,1).subscribe((v=>{h(v)}))}))):Promise.reject({type:Lt,reason:"Cannot request control due to no sharing available",errorCode:Fe.REMOTE_CONTROL_MISMATCH_STATE}):Promise.reject({type:gs,errorCode:Fe.REMOTE_CONTROL_MISMATCH_STATE}):Promise.reject({type:Lt,reason:"Cannot request control due to the feature is not enabled.",errorCode:Fe.REMOTE_CONTROL_ACCOUNT_DISABLE})})(this[en])}giveUpRemoteControl(){return(e=>{const{store:{getState:n},rwgAgent:r}=e,{share:{isGrabRemoteControl:i,activeNodeId:l}}=n();return GR(n())?(i&&r.subscribeGrabRemoteControl(l,!1),r.sharingRequestRemoteControl(l,!1),Cs(qJ,(f=>f===!1))):Promise.reject({type:Lt,errorCode:Fe.REMOTE_CONTROL_MISMATCH_STATE})})(this[en])}startRemoteControl(e){return(async(n,r)=>{const{store:{getState:i,dispatch:l},mediaAgent:f,rwgAgent:h}=n,{share:{isSDKGrabControl:v,activeNodeId:y}}=i();if(!GR(i()))return Promise.reject({type:Lt,reason:"required to be approved",errorCode:Fe.REMOTE_CONTROL_PERMISSION_REQUIRED});if(await ENe(y,r,i(),h,f),r.dataset.zmrvId||r.setAttribute("data-zmrv-id",rE("__ZOOM_SDK_RC_VIEWPORT_DATA_ID_@__")),l(Zbe(`${r.tagName}[data-zmrv-id="${r.dataset.zmrvId}"]`)),v){const{share:{isGrabRemoteControl:_}}=i();return _?Promise.resolve(""):Cs(w2,(A=>!!A))}return aA({success:cxe,fail:[lxe]})})(this[en],e)}grabRemoteControl(){return(e=>{const{store:{getState:n},rwgAgent:r}=e,{share:{isGrabRemoteControl:i,activeNodeId:l}}=n();return GR(n())?i?Promise.resolve(""):(r.subscribeGrabRemoteControl(l,!0),Cs(w2,(f=>!!f))):Promise.reject({type:Lt,reason:"should be approved before grab",errorCode:Fe.REMOTE_CONTROL_PERMISSION_REQUIRED})})(this[en])}updateRemoteControlViewportDimension(e){return((n,r)=>{const{store:{getState:i},mediaAgent:l}=n;return GR(i())&&l.updateRemoteControlProperties({dimension:{scaleWidth:r.width,scaleHeight:r.height,srcOffsetX:r.left,srcOffsetY:r.top}}),Promise.resolve("")})(this[en],e)}approveRemoteControl(e,n){return((r,i,l)=>{const{store:{getState:f,dispatch:h},rwgAgent:v,mediaAgent:y}=r,_=f(),{share:{status:A,isEnableAutoDeleteRcApp:R,remoteControllingSsrc:k},meeting:{userId:N}}=_;if(A===qs.End)return Promise.reject({type:Lt,reason:"Cannot approve remote control when sharing is not ongoing.",errorCode:Fe.REMOTE_CONTROL_MISMATCH_STATE});if(A===qs.Paused&&(v.resumeSharing(),y.resumeDesktopSharing(),h(Yp(qs.Sharing))),y.isSharingEntireScreen()){var L,B;k&&!Td(k,i)&&(BX(_,v),h(k1("")));const H=(L=YC(i,_))!==null&&L!==void 0?L:i,{isMacOS:q}=bo,Y=(B=Ai(_).find((K=>Td(K.userId,H))))===null||B===void 0?void 0:B.displayName;return v.remoteControlConsent(DJ.Approve,H,N,{...y.getShareStreamInfo(),platform:bo.isMacOS?"mac":"win",controllerName:Y?Vc(Y):""},R,q?void 0:l?1:0),h(oL(H)),Cs(pxe)}return Promise.reject({type:Lt,reason:"Cannot approve remote control when not sharing entire screen.",errorCode:Fe.REMOTE_CONTROL_MISMATCH_DISPLAY_SURFACE})})(this[en],e,n)}declineRemoteControl(e){return((n,r)=>{var i;const{store:{getState:l},rwgAgent:f,mediaAgent:h}=n,v=l(),{meeting:{userId:y},share:{isEnableAutoDeleteRcApp:_}}=v,A=(i=YC(r,v))!==null&&i!==void 0?i:r;return f.remoteControlConsent(DJ.Decline,A,y,{...h.getShareStreamInfo(),platform:bo.isMacOS?"mac":"win"},_),Promise.resolve("")})(this[en],e)}stopRemoteControl(){return(e=>{const{store:{getState:n,dispatch:r},rwgAgent:i}=e;return BX(n(),i),r(k1("")),r(oL(0)),Promise.resolve("")})(this[en])}launchRemoteControlApp(e){return((n,r)=>{const{store:{getState:i,dispatch:l}}=n,f=i(),{share:{remoteControlAppLaunchSheme:h}}=f;return h?(l(k1(r?`${h}&bAutoDelete=1`:h)),l(o2(lf.Unknown)),Promise.resolve("")):Promise.reject({type:Lt,reason:"Cannot launch app due to no permission",errorCode:Fe.REMOTE_CONTROL_INVALID_LAUNCH_SCHEME})})(this[en],e)}isRemoteControlEnabled(){return(e=>{var n;const{store:{getState:r}}=e;return!((n=r().share)===null||n===void 0||!n.isRemoteControlEnabled)})(this[en])}getRemoteControlAppDownloadUrl(){return(e=>{const{store:{getState:n}}=e,r=n();return r.share?r.share.remoteControlAppDownloadUrl:null})(this[en])}isTargetShareSupportRemoteControl(e){return N_e(this[en],e)}isRemotelyControlApproved(){return(e=>{const{store:{getState:n}}=e,r=n();return!!r.share&&GR(r)})(this[en])}isControllingUserRemotely(){return(e=>{const{store:{getState:n}}=e,r=n();return!!r.share&&r.share.isGrabRemoteControl})(this[en])}getRemotelyControllingUser(){return(e=>{const{store:{getState:n}}=e,r=n();if(r.share){const{remoteControllingSsrc:i}=r.share;if(i)return Ai(r).find((l=>Td(l.userId,i)))}return null})(this[en])}getShareStreamSettings(){return(({store:{getState:e},mediaAgent:n})=>{const{share:{status:r}}=e();return r!==qs.End?n.getShareStreamInfo(!0):null})(this[en])}},fn(tt.prototype,"startAudio",[hn,P_e,Qm],Object.getOwnPropertyDescriptor(tt.prototype,"startAudio"),tt.prototype),fn(tt.prototype,"stopAudio",[hn,L_e,Qm],Object.getOwnPropertyDescriptor(tt.prototype,"stopAudio"),tt.prototype),fn(tt.prototype,"muteAudio",[hn,B_e,Qm],Object.getOwnPropertyDescriptor(tt.prototype,"muteAudio"),tt.prototype),fn(tt.prototype,"unmuteAudio",[hn,V_e,Qm],Object.getOwnPropertyDescriptor(tt.prototype,"unmuteAudio"),tt.prototype),fn(tt.prototype,"dialOut",[hn,H_e,F_e],Object.getOwnPropertyDescriptor(tt.prototype,"dialOut"),tt.prototype),fn(tt.prototype,"cancelDialOut",[hn,$_e,U_e],Object.getOwnPropertyDescriptor(tt.prototype,"cancelDialOut"),tt.prototype),fn(tt.prototype,"hangup",[hn,j_e,Qm],Object.getOwnPropertyDescriptor(tt.prototype,"hangup"),tt.prototype),fn(tt.prototype,"switchMicrophone",[hn,z_e,Qm],Object.getOwnPropertyDescriptor(tt.prototype,"switchMicrophone"),tt.prototype),fn(tt.prototype,"switchSpeaker",[hn,W_e,Qm],Object.getOwnPropertyDescriptor(tt.prototype,"switchSpeaker"),tt.prototype),fn(tt.prototype,"muteShareAudio",[hn,G_e,q_e,Qm],Object.getOwnPropertyDescriptor(tt.prototype,"muteShareAudio"),tt.prototype),fn(tt.prototype,"unmuteShareAudio",[hn,K_e,Z_e,Qm],Object.getOwnPropertyDescriptor(tt.prototype,"unmuteShareAudio"),tt.prototype),fn(tt.prototype,"subscribeAudioStatisticData",[hn,Y_e,Qm],Object.getOwnPropertyDescriptor(tt.prototype,"subscribeAudioStatisticData"),tt.prototype),fn(tt.prototype,"unsubscribeAudioStatisticData",[hn,J_e,Qm],Object.getOwnPropertyDescriptor(tt.prototype,"unsubscribeAudioStatisticData"),tt.prototype),fn(tt.prototype,"enableBackgroundNoiseSuppression",[hn,X_e,Qm],Object.getOwnPropertyDescriptor(tt.prototype,"enableBackgroundNoiseSuppression"),tt.prototype),fn(tt.prototype,"enableSyncButtonsOnHeadset",[hn,Q_e,Qm],Object.getOwnPropertyDescriptor(tt.prototype,"enableSyncButtonsOnHeadset"),tt.prototype),fn(tt.prototype,"enableOriginalSound",[hn,ewe,Qm],Object.getOwnPropertyDescriptor(tt.prototype,"enableOriginalSound"),tt.prototype),fn(tt.prototype,"callCRCDevice",[hn,twe,nwe],Object.getOwnPropertyDescriptor(tt.prototype,"callCRCDevice"),tt.prototype),fn(tt.prototype,"cancelCallCRCDevice",[hn,owe,swe],Object.getOwnPropertyDescriptor(tt.prototype,"cancelCallCRCDevice"),tt.prototype),fn(tt.prototype,"muteAllAudio",[Bc,hn,rwe],Object.getOwnPropertyDescriptor(tt.prototype,"muteAllAudio"),tt.prototype),fn(tt.prototype,"unmuteAllAudio",[Bc,hn,iwe],Object.getOwnPropertyDescriptor(tt.prototype,"unmuteAllAudio"),tt.prototype),fn(tt.prototype,"muteAudioUponEntry",[Bc,hn,awe],Object.getOwnPropertyDescriptor(tt.prototype,"muteAudioUponEntry"),tt.prototype),fn(tt.prototype,"allowUnmuteAudioThemselves",[Bc,hn,cwe],Object.getOwnPropertyDescriptor(tt.prototype,"allowUnmuteAudioThemselves"),tt.prototype),fn(tt.prototype,"startVideo",[hn,lwe,yl],Object.getOwnPropertyDescriptor(tt.prototype,"startVideo"),tt.prototype),fn(tt.prototype,"stopVideo",[hn,uwe,yl],Object.getOwnPropertyDescriptor(tt.prototype,"stopVideo"),tt.prototype),fn(tt.prototype,"switchCamera",[hn,dwe,yl],Object.getOwnPropertyDescriptor(tt.prototype,"switchCamera"),tt.prototype),fn(tt.prototype,"createProcessor",[hn,fwe,yl],Object.getOwnPropertyDescriptor(tt.prototype,"createProcessor"),tt.prototype),fn(tt.prototype,"addProcessor",[hn,pwe,EAe],Object.getOwnPropertyDescriptor(tt.prototype,"addProcessor"),tt.prototype),fn(tt.prototype,"removeProcessor",[hn,hwe,EAe],Object.getOwnPropertyDescriptor(tt.prototype,"removeProcessor"),tt.prototype),fn(tt.prototype,"renderVideo",[j7e,hn,mwe,yl],Object.getOwnPropertyDescriptor(tt.prototype,"renderVideo"),tt.prototype),fn(tt.prototype,"stopRenderVideo",[AAe,hn,gwe,yl],Object.getOwnPropertyDescriptor(tt.prototype,"stopRenderVideo"),tt.prototype),fn(tt.prototype,"updateVideoCanvasDimension",[wAe,hn,vwe,yl],Object.getOwnPropertyDescriptor(tt.prototype,"updateVideoCanvasDimension"),tt.prototype),fn(tt.prototype,"adjustRenderedVideoPosition",[AAe,hn,bwe,yl],Object.getOwnPropertyDescriptor(tt.prototype,"adjustRenderedVideoPosition"),tt.prototype),fn(tt.prototype,"clearVideoCanvas",[wAe,hn,ywe,yl],Object.getOwnPropertyDescriptor(tt.prototype,"clearVideoCanvas"),tt.prototype),fn(tt.prototype,"mirrorVideo",[hn,Swe,yl],Object.getOwnPropertyDescriptor(tt.prototype,"mirrorVideo"),tt.prototype),fn(tt.prototype,"enableHardwareAcceleration",[hn,Cwe,yl],Object.getOwnPropertyDescriptor(tt.prototype,"enableHardwareAcceleration"),tt.prototype),fn(tt.prototype,"subscribeVideoStatisticData",[hn,Ewe,yl],Object.getOwnPropertyDescriptor(tt.prototype,"subscribeVideoStatisticData"),tt.prototype),fn(tt.prototype,"unsubscribeVideoStatisticData",[hn,_we,yl],Object.getOwnPropertyDescriptor(tt.prototype,"unsubscribeVideoStatisticData"),tt.prototype),fn(tt.prototype,"previewVirtualBackground",[hn,wwe,Awe],Object.getOwnPropertyDescriptor(tt.prototype,"previewVirtualBackground"),tt.prototype),fn(tt.prototype,"updateVirtualBackgroundImage",[hn,Twe,Owe],Object.getOwnPropertyDescriptor(tt.prototype,"updateVirtualBackgroundImage"),tt.prototype),fn(tt.prototype,"stopPreviewVirtualBackground",[hn,Iwe,yl],Object.getOwnPropertyDescriptor(tt.prototype,"stopPreviewVirtualBackground"),tt.prototype),fn(tt.prototype,"previewVideoMask",[_Ae,hn,Rwe,yl],Object.getOwnPropertyDescriptor(tt.prototype,"previewVideoMask"),tt.prototype),fn(tt.prototype,"updateVideoMask",[hn,xwe,yl],Object.getOwnPropertyDescriptor(tt.prototype,"updateVideoMask"),tt.prototype),fn(tt.prototype,"stopPreviewVideoMask",[hn,Dwe,yl],Object.getOwnPropertyDescriptor(tt.prototype,"stopPreviewVideoMask"),tt.prototype),fn(tt.prototype,"requestFarEndCameraControl",[hn,kwe,SP],Object.getOwnPropertyDescriptor(tt.prototype,"requestFarEndCameraControl"),tt.prototype),fn(tt.prototype,"approveFarEndCameraControl",[hn,Mwe,SP],Object.getOwnPropertyDescriptor(tt.prototype,"approveFarEndCameraControl"),tt.prototype),fn(tt.prototype,"declineFarEndCameraControl",[hn,Nwe,SP],Object.getOwnPropertyDescriptor(tt.prototype,"declineFarEndCameraControl"),tt.prototype),fn(tt.prototype,"giveUpFarEndCameraControl",[hn,Pwe,SP],Object.getOwnPropertyDescriptor(tt.prototype,"giveUpFarEndCameraControl"),tt.prototype),fn(tt.prototype,"controlCamera",[hn,Lwe,SP],Object.getOwnPropertyDescriptor(tt.prototype,"controlCamera"),tt.prototype),fn(tt.prototype,"controlFarEndCamera",[hn,Bwe,SP],Object.getOwnPropertyDescriptor(tt.prototype,"controlFarEndCamera"),tt.prototype),fn(tt.prototype,"attachVideo",[hn,Vwe,yl],Object.getOwnPropertyDescriptor(tt.prototype,"attachVideo"),tt.prototype),fn(tt.prototype,"detachVideo",[hn,Hwe,yl],Object.getOwnPropertyDescriptor(tt.prototype,"detachVideo"),tt.prototype),fn(tt.prototype,"spotlight",[Bc,hn,Fwe,yl],Object.getOwnPropertyDescriptor(tt.prototype,"spotlight"),tt.prototype),fn(tt.prototype,"removeSpotlight",[hn,$we,yl],Object.getOwnPropertyDescriptor(tt.prototype,"removeSpotlight"),tt.prototype),fn(tt.prototype,"removeAllSpotlights",[El,hn,Uwe,yl],Object.getOwnPropertyDescriptor(tt.prototype,"removeAllSpotlights"),tt.prototype),fn(tt.prototype,"screenshotVideo",[hn,jwe,yl],Object.getOwnPropertyDescriptor(tt.prototype,"screenshotVideo"),tt.prototype),fn(tt.prototype,"startShareView",[_Ae,hn,zwe,Sl],Object.getOwnPropertyDescriptor(tt.prototype,"startShareView"),tt.prototype),fn(tt.prototype,"stopShareView",[hn,Wwe,Sl],Object.getOwnPropertyDescriptor(tt.prototype,"stopShareView"),tt.prototype),fn(tt.prototype,"switchShareView",[hn,Gwe,Sl],Object.getOwnPropertyDescriptor(tt.prototype,"switchShareView"),tt.prototype),fn(tt.prototype,"updateSharingCanvasDimension",[hn,qwe,Sl],Object.getOwnPropertyDescriptor(tt.prototype,"updateSharingCanvasDimension"),tt.prototype),fn(tt.prototype,"startShareScreen",[hn,Kwe,Sl],Object.getOwnPropertyDescriptor(tt.prototype,"startShareScreen"),tt.prototype),fn(tt.prototype,"stopShareScreen",[hn,Zwe,Sl],Object.getOwnPropertyDescriptor(tt.prototype,"stopShareScreen"),tt.prototype),fn(tt.prototype,"pauseShareScreen",[hn,Ywe,Sl],Object.getOwnPropertyDescriptor(tt.prototype,"pauseShareScreen"),tt.prototype),fn(tt.prototype,"resumeShareScreen",[hn,Jwe,Sl],Object.getOwnPropertyDescriptor(tt.prototype,"resumeShareScreen"),tt.prototype),fn(tt.prototype,"setSharePrivilege",[Bc,Xwe,hn,Sl],Object.getOwnPropertyDescriptor(tt.prototype,"setSharePrivilege"),tt.prototype),fn(tt.prototype,"lockShare",[Bc,Qwe,hn,Sl],Object.getOwnPropertyDescriptor(tt.prototype,"lockShare"),tt.prototype),fn(tt.prototype,"shareToBreakoutRoom",[hn,Bc,eAe,Sl],Object.getOwnPropertyDescriptor(tt.prototype,"shareToBreakoutRoom"),tt.prototype),fn(tt.prototype,"stopShareToBreakoutRoom",[hn,Bc,tAe,Sl],Object.getOwnPropertyDescriptor(tt.prototype,"stopShareToBreakoutRoom"),tt.prototype),fn(tt.prototype,"muteOthersScreenShare",[hn,Bc,nAe,Sl],Object.getOwnPropertyDescriptor(tt.prototype,"muteOthersScreenShare"),tt.prototype),fn(tt.prototype,"enableOptimizeForSharedVideo",[hn,oAe,Sl],Object.getOwnPropertyDescriptor(tt.prototype,"enableOptimizeForSharedVideo"),tt.prototype),fn(tt.prototype,"updateSharedVideoQuality",[hn,sAe,Sl],Object.getOwnPropertyDescriptor(tt.prototype,"updateSharedVideoQuality"),tt.prototype),fn(tt.prototype,"subscribeShareStatisticData",[hn,rAe,Sl],Object.getOwnPropertyDescriptor(tt.prototype,"subscribeShareStatisticData"),tt.prototype),fn(tt.prototype,"unsubscribeShareStatisticData",[hn,iAe,Sl],Object.getOwnPropertyDescriptor(tt.prototype,"unsubscribeShareStatisticData"),tt.prototype),fn(tt.prototype,"screenshotSharedContent",[hn,aAe,Sl],Object.getOwnPropertyDescriptor(tt.prototype,"screenshotSharedContent"),tt.prototype),fn(tt.prototype,"attachShareView",[hn,cAe,Sl],Object.getOwnPropertyDescriptor(tt.prototype,"attachShareView"),tt.prototype),fn(tt.prototype,"detachShareView",[hn,lAe,Sl],Object.getOwnPropertyDescriptor(tt.prototype,"detachShareView"),tt.prototype),fn(tt.prototype,"startAnnotation",[hn,uAe,Sl,z7e],Object.getOwnPropertyDescriptor(tt.prototype,"startAnnotation"),tt.prototype),fn(tt.prototype,"stopAnnotation",[hn,dAe,Sl],Object.getOwnPropertyDescriptor(tt.prototype,"stopAnnotation"),tt.prototype),fn(tt.prototype,"changeAnnotationPrivilege",[hn,fAe,Sl],Object.getOwnPropertyDescriptor(tt.prototype,"changeAnnotationPrivilege"),tt.prototype),fn(tt.prototype,"requestRemoteControl",[hn,pAe,jC,W7e],Object.getOwnPropertyDescriptor(tt.prototype,"requestRemoteControl"),tt.prototype),fn(tt.prototype,"giveUpRemoteControl",[hn,hAe,jC],Object.getOwnPropertyDescriptor(tt.prototype,"giveUpRemoteControl"),tt.prototype),fn(tt.prototype,"startRemoteControl",[hn,mAe,jC],Object.getOwnPropertyDescriptor(tt.prototype,"startRemoteControl"),tt.prototype),fn(tt.prototype,"grabRemoteControl",[hn,gAe,jC],Object.getOwnPropertyDescriptor(tt.prototype,"grabRemoteControl"),tt.prototype),fn(tt.prototype,"updateRemoteControlViewportDimension",[hn,vAe,jC],Object.getOwnPropertyDescriptor(tt.prototype,"updateRemoteControlViewportDimension"),tt.prototype),fn(tt.prototype,"approveRemoteControl",[hn,bAe,jC],Object.getOwnPropertyDescriptor(tt.prototype,"approveRemoteControl"),tt.prototype),fn(tt.prototype,"declineRemoteControl",[hn,yAe,jC],Object.getOwnPropertyDescriptor(tt.prototype,"declineRemoteControl"),tt.prototype),fn(tt.prototype,"stopRemoteControl",[hn,SAe,jC],Object.getOwnPropertyDescriptor(tt.prototype,"stopRemoteControl"),tt.prototype),fn(tt.prototype,"launchRemoteControlApp",[hn,CAe,jC],Object.getOwnPropertyDescriptor(tt.prototype,"launchRemoteControlApp"),tt.prototype),tt);var TAe,OAe,IAe,RAe,xAe,DAe,kAe,MAe,mc;const BR=ff("Audio"),q7e=ff("Sharing");let K7e=(TAe=ro("share"),OAe=ro("audio"),IAe=ro("audio"),RAe=ro("audio"),xAe=ro("audio"),DAe=ro("audio"),kAe=ro("audio"),MAe=ro("audio"),mc=class extends G7e{switchSharingSecondaryCamera(e){return((n,r)=>{const{store:{getState:i,dispatch:l},mediaAgent:f}=n,h=i(),{video:{cameraDevicesList:v},share:{status:y,isSharingWithSecondCamera:_}}=h;return r!=="default"&&v.map((A=>A.deviceId)).indexOf(r)===-1?Promise.reject({type:gs,reason:"Cannot find cameraDeviceId in camera devices list.",errorCode:Fe.STREAM_MISMATCH_DEVICE}):(y===qs.Sharing&&_&&f.changeSharingSecondCamera(r),l(iNe(r)),Promise.resolve())})(this[en],e)}muteUserAudioLocally(e){return((n,r)=>{const{mediaAgent:i,store:{getState:l,dispatch:f}}=n,h=l(),{audio:{locallyMutedAudioList:v}}=h,y=Ai(h).filter((_=>_.audio===Ur.Computer));return v.includes(r)||y.findIndex((_=>_.userId===r))===-1||(i.muteOrUnmuteOtherAudio(r,!0),f(qMe(r))),Promise.resolve("")})(this[en],e)}unmuteUserAudioLocally(e){return((n,r)=>{const{mediaAgent:i,store:{getState:l,dispatch:f}}=n,{audio:{locallyMutedAudioList:h}}=l();return h.includes(r)&&(i.muteOrUnmuteOtherAudio(r,!1),f(kX(r))),Promise.resolve("")})(this[en],e)}adjustUserAudioVolumeLocally(e,n){return((r,i,l)=>{const{mediaAgent:f,store:{getState:h,dispatch:v}}=r,y=h();return Ai(y).findIndex((_=>_.userId===i))!==-1&&(f.adjustOtherAudioVolume(i,l),v(KMe({userId:i,volume:l}))),Promise.resolve("")})(this[en],e,n)}muteAllUserAudioLocally(){return(e=>{const{mediaAgent:n,store:{getState:r,dispatch:i}}=e,{audio:{isStopAllImcomingAudio:l}}=r();return l||(n.stopAllIncomingAudio(!0),i(oge(!0))),Promise.resolve("")})(this[en])}unmuteAllUserAudioLocally(){return(e=>{const{mediaAgent:n,store:{getState:r,dispatch:i}}=e,{audio:{isStopAllImcomingAudio:l,locallyMutedAudioList:f}}=r();return l&&(n.stopAllIncomingAudio(!1),i(oge(!1)),f.length>0&&f.forEach((h=>{n.muteOrUnmuteOtherAudio(h,!1),i(kX(h))}))),Promise.resolve("")})(this[en])}startSecondaryAudio(e,n){return(async(r,i,l)=>{const{mediaAgent:f,rwgAgent:h,store:{getState:v,dispatch:y}}=r,_=v(),{audio:{microphoneDevicesList:A,activeMicrophone:R,isWebRtcAudioCapable:k},share:{status:N}}=_,L=Do(_);if(!Yo.isSupportShare2ndAudioDevice(k))return Promise.reject({type:Lt,reason:"Cannot start secondary audio due to platform is not supported",errorCode:Fe.SECONDARY_AUDIO_UNSUPPORTED});if((L==null?void 0:L.audio)===Ur.Computer&&R===i)return Promise.reject({type:Lt,reason:"Cannot start secondary audio with the same microphone",errorCode:Fe.SECONDARY_AUDIO_DEVICE_CONFLICT});if(N!==qs.End)return Promise.reject({type:Lt,reason:"Cannot start secondary audio while screen sharing is in progress",errorCode:Fe.SECONDARY_AUDIO_SCREEN_SHARING_CONFLICT});let B=A;if(A.length===0){const{microphones:H}=await Ra(j2());B=H}return i&&B.findIndex((H=>H.deviceId===i))===-1?Promise.reject({type:gs,reason:"Cannot find the microphone",errorCode:Fe.STREAM_MISMATCH_DEVICE}):(h.muteShareAudio(!1,!0),f.share2ndAudio(i,l),y(MX(i)),Cs(Y2e))})(this[en],e,n)}stopSecondaryAudio(){return(async e=>{const{mediaAgent:n,rwgAgent:r,store:{getState:i,dispatch:l}}=e,f=i(),{audio:{secondaryAudioMicrophoneId:h}}=f;if(!h)return Promise.reject({type:Lt,reason:"Cannot stop secondary audio due to not started ",errorCode:Fe.SECONDARY_AUDIO_NOT_STARTED});r.muteShareAudio(!0,!0),n.leaveSharingAudio(!1),l(MX(void 0))})(this[en])}isUserAudioMutedLocally(e){return(({store:{getState:n}},r)=>{const{audio:{locallyMutedAudioList:i}}=n();return i.includes(r)})(this[en],e)}getUserVolumeLocally(e){return(({store:{getState:n}},r)=>{var i,l;const{audio:{localUserAudioVolumeList:f,locallyMutedAudioList:h}}=n();return(i=(l=f.find((v=>v.userId===r)))===null||l===void 0?void 0:l.volume)!==null&&i!==void 0?i:h.includes(r)?0:100})(this[en],e)}},fn(mc.prototype,"switchSharingSecondaryCamera",[hn,TAe,q7e],Object.getOwnPropertyDescriptor(mc.prototype,"switchSharingSecondaryCamera"),mc.prototype),fn(mc.prototype,"muteUserAudioLocally",[hn,OAe,BR],Object.getOwnPropertyDescriptor(mc.prototype,"muteUserAudioLocally"),mc.prototype),fn(mc.prototype,"unmuteUserAudioLocally",[hn,IAe,BR],Object.getOwnPropertyDescriptor(mc.prototype,"unmuteUserAudioLocally"),mc.prototype),fn(mc.prototype,"adjustUserAudioVolumeLocally",[hn,RAe,BR],Object.getOwnPropertyDescriptor(mc.prototype,"adjustUserAudioVolumeLocally"),mc.prototype),fn(mc.prototype,"muteAllUserAudioLocally",[hn,xAe,BR],Object.getOwnPropertyDescriptor(mc.prototype,"muteAllUserAudioLocally"),mc.prototype),fn(mc.prototype,"unmuteAllUserAudioLocally",[hn,DAe,BR],Object.getOwnPropertyDescriptor(mc.prototype,"unmuteAllUserAudioLocally"),mc.prototype),fn(mc.prototype,"startSecondaryAudio",[hn,kAe,BR],Object.getOwnPropertyDescriptor(mc.prototype,"startSecondaryAudio"),mc.prototype),fn(mc.prototype,"stopSecondaryAudio",[hn,MAe,BR],Object.getOwnPropertyDescriptor(mc.prototype,"stopSecondaryAudio"),mc.prototype),mc);const qZ={controlStatus:cr.NotStarted,sequenceId:1,rooms:[],isHugeBO:!1,allocationPattern:l2.Automatically,currentRoom:{status:vs.Initial,boStatus:jxe.NoToken,boConfId:"",boId:"",name:"",boToken:""},options:{isAutoJoinRoom:!1,isBackToMainSessionEnabled:!0,isTimerEnabled:!1,timerDuration:1800,isTimerAutoEnabled:!1,waitSeconds:60,isAutoMoveBackToMainSession:!1,isRoomSelectionEnabled:!1},mainSessionAttendeeList:[],preAssignedRooms:[],meetingElapsedTime:0,startRoomElapsedTime:0,closingRoomTime:0,broadcastMessage:"",hostReplyToQuestionerType:void 0,hostReplyToRequestId:void 0,isUserRoleUpdated:!1,mainSessionConfId:"",isEnableBOBroadcast:!1,isEnableBreakoutRoom:!1,isEnableBOViewActivityStatus:!1,inRoomUserActivityStatusMap:{},isEnableBOBroadcastVoice:!1,isBroadcastVoice:!1},Z7e=op({[`${VNe}`]:We(((e,{payload:n})=>{Array.isArray(n)?e.rooms.push(...n):e.rooms.push(n)})),[`${mge}`]:We(((e,{payload:n})=>{e.allocationPattern=n})),[`${VX}`]:We(((e,{payload:n})=>{e.sequenceId=n})),[`${gge}`]:We(((e,{payload:n})=>{e.meetingElapsedTime=n})),[`${HNe}`]:We(((e,{payload:n})=>{e.startRoomElapsedTime=n})),[`${FNe}`]:We(((e,{payload:n})=>{const{options:r}=e;Object.assign(r,n)})),[`${$Ne}`]:We(((e,{payload:n})=>{e.controlStatus=n})),[`${u5}`]:We(((e,{payload:n})=>{e.rooms=n})),[`${HX}`]:We(((e,{payload:n})=>{const{currentRoom:r}=e;Object.assign(r,n)})),[`${x2}`]:We(((e,{payload:n})=>{const{currentRoom:r}=e;r.status=n})),[`${vge}`]:We(((e,{payload:n})=>{const{currentRoom:r}=e;r.boConfId=n})),[`${bge}`]:We(((e,{payload:n})=>{const{currentRoom:r}=e;r.boToken=n})),[`${yge}`]:We(((e,{payload:n})=>{e.closingRoomTime=n})),[`${jNe}`]:We(((e,{payload:n})=>{e.broadcastMessage=n})),[`${e0e}`]:We(((e,{payload:n})=>{e.hostReplyToQuestionerType=n})),[`${zNe}`]:We(((e,{payload:n})=>{e.hostReplyToRequestId=n})),[`${WNe}`]:We(((e,{payload:n})=>{n.add!==void 0&&n.add.length>0&&n.add.forEach((r=>{const i=e.mainSessionAttendeeList.find((l=>l.userId===r.userId));i!==void 0?Object.assign(i,r):KJ(r.userRole)||e.mainSessionAttendeeList.push(r)})),n.update!==void 0&&n.update.length>0&&n.update.forEach((r=>{const i=e.mainSessionAttendeeList.find((l=>l.userId===r.userId));i!==void 0&&Object.assign(i,r)})),n.remove!==void 0&&n.remove.length>0&&n.remove.forEach((r=>{const i=e.mainSessionAttendeeList.findIndex((l=>l.userId===r.userId));i!==-1&&e.mainSessionAttendeeList.splice(i,1)}))})),[`${GNe}`]:We(((e,{payload:n})=>{e.isHugeBO=n})),[`${Cge}`]:We(((e,{payload:n})=>{e.isUserRoleUpdated=n})),[`${Sge}`]:We(((e,{payload:n})=>{e.preAssignedRooms=n})),[`${qNe}`]:We(((e,{payload:n})=>{e.isEnableBreakoutRoom=n.isEnableBreakoutRoom,e.isEnableBOBroadcast=n.isEnableBOBroadcast,e.isEnableBOViewActivityStatus=n.isEnableBOViewActivityStatus,e.isEnableBOBroadcastVoice=n.isEnableBOBroadcastVoice})),[`${KNe}`]:We(((e,{payload:n})=>{const{userGuid:r,status:i}=n,{inRoomUserActivityStatusMap:l}=e;l[`${r}`]=i})),[`${FX}`]:We(((e,{payload:n})=>{e.isBroadcastVoice=n})),[`${UNe}`]:e=>{const{currentRoom:{status:n}}=e;return n===vs.Joining?{...qZ,preAssignedRooms:e.preAssignedRooms,currentRoom:e.currentRoom,closingRoomTime:e.closingRoomTime}:n===vs.Leaving?{...qZ,preAssignedRooms:e.preAssignedRooms,closingRoomTime:e.closingRoomTime}:{...qZ,preAssignedRooms:e.preAssignedRooms}}},qZ);var pf=Uint8Array,sg=Uint16Array,xQ=Uint32Array,DQ=new pf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),kQ=new pf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Rge=new pf([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),WPe=function(e,n){for(var r=new sg(31),i=0;i<31;++i)r[i]=n+=1<<e[i-1];var l=new xQ(r[30]);for(i=1;i<30;++i)for(var f=r[i];f<r[i+1];++f)l[f]=f-r[i]<<5|i;return[r,l]},GPe=WPe(DQ,2),qPe=GPe[0],xge=GPe[1];qPe[28]=258,xge[258]=28;for(var NAe=WPe(kQ,0),Y7e=NAe[0],PAe=NAe[1],Dge=new sg(32768),Fc=0;Fc<32768;++Fc){var VR=(43690&Fc)>>>1|(21845&Fc)<<1;VR=(61680&(VR=(52428&VR)>>>2|(13107&VR)<<2))>>>4|(3855&VR)<<4,Dge[Fc]=((65280&VR)>>>8|(255&VR)<<8)>>>1}var V1=function(e,n,r){for(var i=e.length,l=0,f=new sg(n);l<i;++l)e[l]&&++f[e[l]-1];var h,v=new sg(n);for(l=0;l<n;++l)v[l]=v[l-1]+f[l-1]<<1;if(r){h=new sg(1<<n);var y=15-n;for(l=0;l<i;++l)if(e[l])for(var _=l<<4|e[l],A=n-e[l],R=v[e[l]-1]++<<A,k=R|(1<<A)-1;R<=k;++R)h[Dge[R]>>>y]=_}else for(h=new sg(i),l=0;l<i;++l)e[l]&&(h[l]=Dge[v[e[l]-1]++]>>>15-e[l]);return h},XA=new pf(288);for(Fc=0;Fc<144;++Fc)XA[Fc]=8;for(Fc=144;Fc<256;++Fc)XA[Fc]=9;for(Fc=256;Fc<280;++Fc)XA[Fc]=7;for(Fc=280;Fc<288;++Fc)XA[Fc]=8;var z5=new pf(32);for(Fc=0;Fc<32;++Fc)z5[Fc]=5;var J7e=V1(XA,9,0),X7e=V1(XA,9,1),Q7e=V1(z5,5,0),eje=V1(z5,5,1),ype=function(e){for(var n=e[0],r=1;r<e.length;++r)e[r]>n&&(n=e[r]);return n},P0=function(e,n,r){var i=n/8|0;return(e[i]|e[i+1]<<8)>>(7&n)&r},Spe=function(e,n){var r=n/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(7&n)},i0e=function(e){return(e+7)/8|0},GX=function(e,n,r){(n==null||n<0)&&(n=0),(r==null||r>e.length)&&(r=e.length);var i=new(e.BYTES_PER_ELEMENT==2?sg:e.BYTES_PER_ELEMENT==4?xQ:pf)(r-n);return i.set(e.subarray(n,r)),i},tje=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],w1=function(e,n,r){var i=new Error(n||tje[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,w1),!r)throw i;return i},zC=function(e,n,r){r<<=7&n;var i=n/8|0;e[i]|=r,e[i+1]|=r>>>8},wU=function(e,n,r){r<<=7&n;var i=n/8|0;e[i]|=r,e[i+1]|=r>>>8,e[i+2]|=r>>>16},Cpe=function(e,n){for(var r=[],i=0;i<e.length;++i)e[i]&&r.push({s:i,f:e[i]});var l=r.length,f=r.slice();if(!l)return[ZPe,0];if(l==1){var h=new pf(r[0].s+1);return h[r[0].s]=1,[h,1]}r.sort((function(ie,le){return ie.f-le.f})),r.push({s:-1,f:25001});var v=r[0],y=r[1],_=0,A=1,R=2;for(r[0]={s:-1,f:v.f+y.f,l:v,r:y};A!=l-1;)v=r[r[_].f<r[R].f?_++:R++],y=r[_!=A&&r[_].f<r[R].f?_++:R++],r[A++]={s:-1,f:v.f+y.f,l:v,r:y};var k=f[0].s;for(i=1;i<l;++i)f[i].s>k&&(k=f[i].s);var N=new sg(k+1),L=kge(r[A-1],N,0);if(L>n){i=0;var B=0,H=L-n,q=1<<H;for(f.sort((function(ie,le){return N[le.s]-N[ie.s]||ie.f-le.f}));i<l;++i){var Y=f[i].s;if(!(N[Y]>n))break;B+=q-(1<<L-N[Y]),N[Y]=n}for(B>>>=H;B>0;){var K=f[i].s;N[K]<n?B-=1<<n-N[K]++-1:++i}for(;i>=0&&B;--i){var se=f[i].s;N[se]==n&&(--N[se],++B)}L=n}return[new pf(N),L]},kge=function(e,n,r){return e.s==-1?Math.max(kge(e.l,n,r+1),kge(e.r,n,r+1)):n[e.s]=r},LAe=function(e){for(var n=e.length;n&&!e[--n];);for(var r=new sg(++n),i=0,l=e[0],f=1,h=function(y){r[i++]=y},v=1;v<=n;++v)if(e[v]==l&&v!=n)++f;else{if(!l&&f>2){for(;f>138;f-=138)h(32754);f>2&&(h(f>10?f-11<<5|28690:f-3<<5|12305),f=0)}else if(f>3){for(h(l),--f;f>6;f-=6)h(8304);f>2&&(h(f-3<<5|8208),f=0)}for(;f--;)h(l);f=1,l=e[v]}return[r.subarray(0,i),n]},AU=function(e,n){for(var r=0,i=0;i<n.length;++i)r+=e[i]*n[i];return r},KPe=function(e,n,r){var i=r.length,l=i0e(n+2);e[l]=255&i,e[l+1]=i>>>8,e[l+2]=255^e[l],e[l+3]=255^e[l+1];for(var f=0;f<i;++f)e[l+f+4]=r[f];return 8*(l+4+i)},BAe=function(e,n,r,i,l,f,h,v,y,_,A){zC(n,A++,r),++l[256];for(var R=Cpe(l,15),k=R[0],N=R[1],L=Cpe(f,15),B=L[0],H=L[1],q=LAe(k),Y=q[0],K=q[1],se=LAe(B),ie=se[0],le=se[1],M=new sg(19),we=0;we<Y.length;++we)M[31&Y[we]]++;for(we=0;we<ie.length;++we)M[31&ie[we]]++;for(var Ne=Cpe(M,7),De=Ne[0],be=Ne[1],me=19;me>4&&!De[Rge[me-1]];--me);var Ye,Ke,Ze,z,$t=_+5<<3,Be=AU(l,XA)+AU(f,z5)+h,at=AU(l,k)+AU(f,B)+h+14+3*me+AU(M,De)+(2*M[16]+3*M[17]+7*M[18]);if($t<=Be&&$t<=at)return KPe(n,A,e.subarray(y,y+_));if(zC(n,A,1+(at<Be)),A+=2,at<Be){Ye=V1(k,N,0),Ke=k,Ze=V1(B,H,0),z=B;var lt=V1(De,be,0);for(zC(n,A,K-257),zC(n,A+5,le-1),zC(n,A+10,me-4),A+=14,we=0;we<me;++we)zC(n,A+3*we,De[Rge[we]]);A+=3*me;for(var $e=[Y,ie],qt=0;qt<2;++qt){var io=$e[qt];for(we=0;we<io.length;++we){var En=31&io[we];zC(n,A,lt[En]),A+=De[En],En>15&&(zC(n,A,io[we]>>>5&127),A+=io[we]>>>12)}}}else Ye=J7e,Ke=XA,Ze=Q7e,z=z5;for(we=0;we<v;++we)if(i[we]>255){En=i[we]>>>18&31,wU(n,A,Ye[En+257]),A+=Ke[En+257],En>7&&(zC(n,A,i[we]>>>23&31),A+=DQ[En]);var Zn=31&i[we];wU(n,A,Ze[Zn]),A+=z[Zn],Zn>3&&(wU(n,A,i[we]>>>5&8191),A+=kQ[Zn])}else wU(n,A,Ye[i[we]]),A+=Ke[i[we]];return wU(n,A,Ye[256]),A+Ke[256]},nje=new xQ([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ZPe=new pf(0),oje=(function(){for(var e=new Int32Array(256),n=0;n<256;++n){for(var r=n,i=9;--i;)r=(1&r&&-306674912)^r>>>1;e[n]=r}return e})(),Epe=function(e,n,r){for(;r;++n)e[n]=r,r>>>=8};function sje(e,n){n||(n={});var r=(function(){var h=-1;return{p:function(v){for(var y=h,_=0;_<v.length;++_)y=oje[255&y^v[_]]^y>>>8;h=y},d:function(){return~h}}})(),i=e.length;r.p(e);var l=(function(h,v,y,_){return(function(A,R,k,N,L,B){var H=A.length,q=new pf(N+H+5*(1+Math.ceil(H/7e3))+L),Y=q.subarray(N,q.length-L),K=0;if(!R||H<8)for(var se=0;se<=H;se+=65535){var ie=se+65535;ie>=H&&(Y[K>>3]=B),K=KPe(Y,K+1,A.subarray(se,ie))}else{for(var le=nje[R-1],M=le>>>13,we=8191&le,Ne=(1<<k)-1,De=new sg(32768),be=new sg(Ne+1),me=Math.ceil(k/3),Ye=2*me,Ke=function(Bt){return(A[Bt]^A[Bt+1]<<me^A[Bt+2]<<Ye)&Ne},Ze=new xQ(25e3),z=new sg(288),$t=new sg(32),Be=0,at=0,lt=(se=0,0),$e=0,qt=0;se<H;++se){var io=Ke(se),En=32767&se,Zn=be[io];if(De[En]=Zn,be[io]=En,$e<=se){var Et=H-se;if((Be>7e3||lt>24576)&&Et>423){K=BAe(A,Y,0,Ze,z,$t,at,lt,qt,se-qt,K),lt=Be=at=0,qt=se;for(var Jt=0;Jt<286;++Jt)z[Jt]=0;for(Jt=0;Jt<30;++Jt)$t[Jt]=0}var ce=2,Hs=0,Fo=we,yt=En-Zn&32767;if(Et>2&&io==Ke(se-yt))for(var Xt=Math.min(M,Et)-1,Wn=Math.min(32767,se),bt=Math.min(258,Et);yt<=Wn&&--Fo&&En!=Zn;){if(A[se+ce]==A[se+ce-yt]){for(var Kt=0;Kt<bt&&A[se+Kt]==A[se+Kt-yt];++Kt);if(Kt>ce){if(ce=Kt,Hs=yt,Kt>Xt)break;var Ut=Math.min(yt,Kt-2),Ue=0;for(Jt=0;Jt<Ut;++Jt){var dt=se-yt+Jt+32768&32767,Ot=dt-De[dt]+32768&32767;Ot>Ue&&(Ue=Ot,Zn=dt)}}}yt+=(En=Zn)-(Zn=De[En])+32768&32767}if(Hs){Ze[lt++]=268435456|xge[ce]<<18|PAe[Hs];var Oe=31&xge[ce],pt=31&PAe[Hs];at+=DQ[Oe]+kQ[pt],++z[257+Oe],++$t[pt],$e=se+ce,++Be}else Ze[lt++]=A[se],++z[A[se]]}}K=BAe(A,Y,B,Ze,z,$t,at,lt,qt,se-qt,K)}return GX(q,0,N+i0e(K)+L)})(h,v.level==null?6:v.level,v.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(h.length)))):12+v.mem,y,_,!0)})(e,n,(function(h){return 10+(h.filename&&h.filename.length+1||0)})(n),8),f=l.length;return(function(h,v){var y=v.filename;if(h[0]=31,h[1]=139,h[2]=8,h[8]=v.level<2?4:v.level==9?2:0,h[9]=3,v.mtime!=0&&Epe(h,4,Math.floor(new Date(v.mtime||Date.now())/1e3)),y){h[3]=8;for(var _=0;_<=y.length;++_)h[_+10]=y.charCodeAt(_)}})(l,n),Epe(l,f-8,r.d()),Epe(l,f-4,i),l}var VAe=typeof TextEncoder<"u"&&new TextEncoder,Mge=typeof TextDecoder<"u"&&new TextDecoder;try{Mge.decode(ZPe,{stream:!0})}catch{}const{WebclientBreakoutRoomAttendeeStatus:a0e,WebclientBreakoutRoomCommand:rje}=Bi,_pe=sp(Yo.getInstance());function F0(e,n){let r=0;for(;r<e.length;r++){const i=e[r],{attendeeGuidList:l}=i;if(l!=null&&l.includes(n))break}return r<e.length?e[r]:void 0}function OP(){rr.remove(a0e),rr.remove(rje)}function Nge(){return zr.createAgent().leaveBO(1),He(em,{reason:np.BackToMainSession}),OP(),[x2(vs.Leaving),Qp(qu.NormalCase)]}function wpe(e,n){return He(em,{reason:np.JoinBreakoutRoom,roomName:e}),n===vs.InRoom&&zr.createAgent().leaveBO(1),[x2(vs.Joining),Qp(qu.NormalCase)]}function HAe(e){return He(em,{reason:np.MoveToBreakoutRoom,roomName:e}),zr.createAgent().leaveBO(1),[x2(vs.Joining),Qp(qu.NormalCase)]}function Ape(e){return e!==vs.InRoom&&e!==vs.Joining&&e!==vs.Leaving}function KZ(e,n=!1){const r=n?vs.InRoom:vs.Invited;return rr.set(a0e,JSON.stringify({status:r,boId:e.boId}),Zr.SessionStorage),HX({status:r,boId:e.boId,name:e.name,boStatus:e.boStatus})}function Tpe(e){const{breakoutRoom:{isUserRoleUpdated:n,currentRoom:{boConfId:r}}}=e.value,i=Do(e.value);return i&&(!r||r&&n)?Di(i.isHost):(r?si(qhe,1):si(a6,1).pipe(Nt((f=>I5(f.userRole)?An([1]):mf(si(uf).pipe(Gt((h=>h.userRole!==void 0&&h.displayName===void 0||h.bVideoConnect!==void 0)),Ys(1)),si(mQ).pipe(Gt((h=>h.some((v=>I5(v.userRole))))),Ys(1)),Uc(3e3)))))).pipe(al(mE),_o(e),Kn((([,f])=>Do(f).isHost)))}function Pge(e){return Yve({boIdList:si(Dxe).pipe(o$e(((n,r)=>[...n,r]),[]),Ys(e))}).pipe(Kve(1e4))}const ije=[{mask:Mfe.Connect,key:"audio",value:""},{mask:Mfe.Voip,key:"audio",value:"computer"},{mask:Mfe.Muted,key:"muted",value:!0},{mask:DSe.Connect,key:"bVideoOn",value:!1},{mask:DSe.On,key:"bVideoOn",value:!0},{mask:kSe.Share,key:"sharerOn",value:!0},{mask:kSe.ShareAudio,key:"bShareAudioOn",value:!0}];function FAe(e,n){const r=(eh(n)?n.breakoutRoom.mainSessionAttendeeList:n.participants.attendeesList).find((i=>i.userId===Number(e)));return r?{inviterId:r.userId,inviterGuid:r.userGUID,inviterName:r.displayName}:{}}const L0=zr.createAgent(),Ope=["userRole","bCoHost","bCCEditor","bHold"],aje=zr.createAgent(),cje=sp(Yo.getInstance());var _r;const Kl=zr.createAgent(),$Ae=sp(Yo.getInstance()),eg=ff("Breakout Room");let lje=(_r=class extends Q0{createRooms(e,n){const r=this[go](),i=this[Ja],{breakoutRoom:{isHugeBO:l,sequenceId:f,rooms:h,controlStatus:v,isEnableBreakoutRoom:y}}=r;if(!y)return Promise.reject({type:Lt,reason:"Breakout room feature is not enabled.",errorCode:Fe.SUBSESSION_ACCOUNT_DISABLE});if(v===cr.InProgress||v===cr.Closing)return Promise.reject({type:Lt,reason:"breakout room has started!",errorCode:Fe.SUBSESSION_MISMATCH_STATE});let _;_=typeof e=="string"?[e]:typeof e=="number"?Array.from({length:e}).map(((R,k)=>`${RSe} ${k+f}`)):e;const A=l?100:50;return _.length<1||h.length+_.length>A?Promise.reject({type:gs,reason:"exceed maximum size",errorCode:Fe.SUBSESSION_EXCEED_CAPACITY}):(Kl.batchCreateBOToken(_),new Promise(((R,k)=>{Pge(_.length).subscribe({next({boIdList:N}){let L=N.map(((H,q)=>({boId:H,name:_[q]})));if(n===l2.Automatically){const H=upe(r),q=L.length,Y=H.length;L=L.map(((K,se)=>{const ie=[];let le=se;for(;le<Y;)ie.push(H[le]),le+=q;return{...K,attendeeList:ie}}))}const B=L.map((({boId:H,name:q,attendeeList:Y})=>({boId:H,name:q,attendeeGuidList:Y&&Y.map((K=>K.userGUID))})));if(i(VNe(B)),i(mge(n)),i(VX(f+L.length)),n===l2.Automatically){const H=L.map((q=>({roomId:q.boId,name:q.name,attendeeList:q.attendeeList.map((Y=>({userId:Y.userId,avatar:Y.avatar,displayName:Y.displayName})))})));R(H)}else R(L.map((H=>({roomId:H.boId,name:H.name,attendeeList:[]}))))},error(){k({type:Wu,errorCode:Fe.INTERNAL_ERROR})}})})))}recreateRooms(e,n){const r=this[go](),i=this[Ja],{breakoutRoom:{isHugeBO:l,sequenceId:f,controlStatus:h,isEnableBreakoutRoom:v}}=r;if(!v)return Promise.reject({type:Lt,reason:"Breakout room feature is not enabled.",errorCode:Fe.SUBSESSION_ACCOUNT_DISABLE});if(h===cr.InProgress||h===cr.Closing)return Promise.reject({type:Lt,reason:"breakout room has started!",errorCode:Fe.SUBSESSION_MISMATCH_STATE});let y;y=typeof e=="string"?[e]:typeof e=="number"?Array.from({length:e}).map(((A,R)=>`${RSe} ${R+f}`)):e;const _=l?100:50;return y.length<1||y.length>_?Promise.reject({type:gs,reason:"exceed maximum size",errorCode:Fe.SUBSESSION_EXCEED_CAPACITY}):(Kl.batchCreateBOToken(y),new Promise(((A,R)=>{Pge(y.length).subscribe((({boIdList:k})=>{let N=k.map(((B,H)=>({boId:B,name:y[H]})));if(n===l2.Automatically){const B=N.length,H=B8e(r),q=H.length;N=N.map(((Y,K)=>{const se=[];let ie=K;for(;ie<q;)se.push(H[ie]),ie+=B;return{...Y,attendeeList:se}}))}const L=N.map((({boId:B,name:H,attendeeList:q})=>({boId:B,name:H,attendeeGuidList:q&&q.map((Y=>Y.userGUID))})));if(i(u5(L)),i(mge(n)),i(VX(f+N.length)),n===l2.Automatically){const B=N.map((H=>({roomId:H.boId,name:H.name,attendeeList:H.attendeeList.map((q=>({userId:q.userId,avatar:q.avatar,displayName:q.displayName})))})));A(B)}else A(N.map((B=>({roomId:B.boId,name:B.name,attendeeList:[]}))))}),(()=>{R({type:Wu,errorCode:Fe.INTERNAL_ERROR})}))})))}openRooms(e,n){var r;const i=this[go](),l={isAutoJoinRoom:!1,isBackToMainSessionEnabled:!0,isTimerEnabled:!1,timerDuration:1800,isTimerAutoEnabled:!1,waitSeconds:60,isAutoMoveBackToMainSession:!1,isRoomSelectionEnabled:!1},{breakoutRoom:{controlStatus:f,rooms:h,sequenceId:v,isHugeBO:y}}=i;if(f===cr.InProgress||f===cr.Closing)return Promise.reject({type:Lt,reason:"breakout room has started!",errorCode:Fe.SUBSESSION_MISMATCH_STATE});if(e.some((L=>h.findIndex((B=>B.boId===L.roomId))===-1)))return Promise.reject({type:gs,reason:"roomId is wrong",errorCode:Fe.SUBSESSION_MISMATCH_ID});const _=Ai(i);if(e.reduce(((L,B)=>L.concat(B.attendeeList)),[]).some((L=>_.findIndex((B=>B.userId===L.userId))===-1)))return Promise.reject({type:gs,reason:"Invalid user",errorCode:Fe.SUBSESSION_MISMATCH_USER});const A=e.map((L=>{const{attendeeList:B}=L,H=B.map((q=>{const Y=_.find((K=>K.userId===q.userId));return Y==null?void 0:Y.userGUID}));return{BID:L.roomId,MeetingTitle:L.name,MeetingToken:void 0,Status:jxe.Started,HostID:"",ParticipantList:H}})),R=n?{...l,...n}:l,k={ControlStatus:cr.InProgress,NameIndex:v,IsAutoJoinEnabled:+R.isAutoJoinRoom,IsBackToMainSessionEnabled:+R.isBackToMainSessionEnabled,IsTimerEnabled:+R.isTimerEnabled,TimerDuration:R.timerDuration,IsTimerAutoEndEnabled:+R.isTimerAutoEnabled,WaitSeconds:R.waitSeconds<0?0:R.waitSeconds,StartTimeOnMMR:void 0,ItemList:A,IsAutoMovetoMainSessionEnabled:R.isAutoMoveBackToMainSession,IsParticipantsChooseRoomEnabled:+R.isRoomSelectionEnabled};let N=Qxe(JSON.stringify(k));if(y&&(N=(L=>V$e(sje((function(B){if(VAe)return VAe.encode(B);for(var H=B.length,q=new pf(B.length+(B.length>>1)),Y=0,K=function(M){q[Y++]=M},se=0;se<H;++se){if(Y+5>q.length){var ie=new pf(Y+8+(H-se<<1));ie.set(q),q=ie}var le=B.charCodeAt(se);le<128?K(le):le<2048?(K(192|le>>6),K(128|63&le)):le>55295&&le<57344?(K(240|(le=65536+(1047552&le)|1023&B.charCodeAt(++se))>>18),K(128|le>>12&63),K(128|le>>6&63),K(128|63&le)):(K(224|le>>12),K(128|le>>6&63),K(128|63&le))}return GX(q,0,Y)})(L))))(N)),(r=Do(i))!==null&&r!==void 0&&r.isHost)Kl.startBO(N);else{const L=MR(i);L&&Kl.coHostStartBO(N,L.userId)}return Cs(QR,(L=>L.controlStatus===cr.InProgress))}joinRoom(e){const n=this[go](),r=Do(n),{breakoutRoom:{controlStatus:i,rooms:l,options:{isRoomSelectionEnabled:f},currentRoom:{status:h,boId:v}},meeting:{userGUID:y}}=n;if(i!==cr.InProgress)return Promise.reject({type:Lt,reason:"Breakout room is not started",errorCode:Fe.SUBSESSION_MISMATCH_STATE});if(r!=null&&r.isHost){const _=l.find((A=>A.boId===e));if(!_)return Promise.reject({type:gs,reason:"Room ID is not correct",errorCode:Fe.SUBSESSION_MISMATCH_ID});Kl.joinBO(_.boId)}else if(r!=null&&r.bCoHost){if(!l.find((_=>_.boId===e)))return Promise.reject({type:gs,reason:"Room ID is not correct",errorCode:Fe.SUBSESSION_MISMATCH_ID});{const _=MR(n);if(!_)return Promise.reject({type:Lt,reason:"No host in the meeting, cannot join the room",errorCode:Fe.SUBSESSION_MISMATCH_STATE});Kl.wantJoinBO(_==null?void 0:_.userId,e)}}else{if(h===vs.InRoom&&v===e)return Promise.resolve("");{let _=!1;const A=F0(l,y);if(A&&A.boId===e)Kl.joinBO(A.boId);else if(f)if(l.findIndex((R=>R.boId===e))!==-1){const R=MR(n);if(!R)return Promise.reject({type:Lt,reason:"No host in the meeting, cannot join the room",errorCode:Fe.SUBSESSION_MISMATCH_STATE});Kl.wantJoinBO(R.userId,e)}else _=!0;else _=!0;if(_)return Promise.reject({type:gs,reason:"Room ID is not correct",errorCode:Fe.SUBSESSION_MISMATCH_ID})}}return Cs(wY,(_=>_.boId===e))}leaveRoom(){const e=this[go](),n=this[Ja],{breakoutRoom:{controlStatus:r,options:i,currentRoom:{status:l}}}=e;if(r!==cr.InProgress&&r!==cr.Closing||l!==vs.InRoom)return Promise.reject({type:Lt,errorCode:Fe.SUBSESSION_MISMATCH_STATE});{const f=Qh(e);if(!i.isBackToMainSessionEnabled&&!f)return Promise.reject({type:hf,reason:"Can not return main session during the breakout room",errorCode:Fe.SUBSESSION_EXIT_RESTRICTED});Nge().forEach((h=>n(h)))}return Promise.resolve("")}askForHelp(){const e=this[go](),{breakoutRoom:{controlStatus:n,mainSessionAttendeeList:r,currentRoom:{status:i}},participants:{attendeesList:l}}=e,f=Qh(e);if(n!==cr.InProgress||i!==vs.InRoom)return Promise.reject({type:Lt,reason:"you are not in breakout room",errorCode:Fe.SUBSESSION_MISMATCH_STATE});if(f)return Promise.reject({type:Lt,reason:"host or co-host can not ask for help",errorCode:Fe.SUBSESSION_MISMATCH_USER});{const h=r.find((v=>v.isHost));if(h){if(l.findIndex((v=>v.zoomID===h.zoomID))>-1)return Promise.reject({type:Lt,reason:"host is in room",errorCode:Fe.SUBSESSION_MISMATCH_STATE});Kl.askForHelpBO(h.userId)}}return Cs(dbe,(h=>h.result===wA.Received))}postponeHelping(e){const n=this[go](),r=this[Ja],{breakoutRoom:{mainSessionAttendeeList:i,currentRoom:{status:l}},participants:{attendeesList:f}}=n;let h=f;return l===vs.InRoom&&(h=i),h.findIndex((v=>v.userId===e))>-1?(Kl.askForHelpResultBO(e,wA.Ignore),r(e0e(wA.Ignore)),Promise.resolve("")):Promise.reject({type:gs,reason:"user id is not correct",errorCode:Fe.SUBSESSION_MISMATCH_USER})}broadcast(e){const{breakoutRoom:{isEnableBOBroadcast:n}}=this[go]();return n?e?xd.beginEncrypt({text:e,type:Rd.BO_BROADCAST}).then((r=>(Kl.broadcastBO(r),Promise.resolve("")))):Promise.reject({type:gs,reason:"content empty",errorCode:Fe.SUBSESSION_BROADCAST_INVALID_CONTENT}):Promise.reject({type:Lt,reason:"Cannot broadcast message due to the feature is not enable",errorCode:Fe.SUBSESSION_BROADCAST_DISABLE})}startBroadcastVoice(){const e=this[go](),n=this[Ja],{breakoutRoom:{isEnableBOBroadcast:r,isEnableBOBroadcastVoice:i,isBroadcastVoice:l}}=e;if(r&&i){if(eh(e))return Promise.reject({type:Lt,reason:"Cannot broadcast voice in the room",errorCode:Fe.SUBSESSION_BROADCAST_VOICE_RESTRICTED});{if(l)return Promise.resolve("");const f=Do(e);return(f==null?void 0:f.audio)===Ur.Computer&&f.muted===!1?(Kl.broadcastVoiceReq(!0),$Ae.broadcastVoiceToBreakoutRoom(!0),n(FX(!0)),Promise.resolve("")):Promise.reject({type:Lt,reason:"Start audio and unmute to broadcast",errorCode:Fe.SUBSESSION_BROADCAST_VOICE_MISMATCH_STATE})}}return Promise.reject({type:Lt,reason:"Cannot broadcast voice due to the feature is not enable",errorCode:Fe.SUBSESSION_BROADCAST_VOICE_DISABLE})}stopBroadcastVoice(){const e=this[go](),n=this[Ja],{breakoutRoom:{isBroadcastVoice:r}}=e;return r?(Kl.broadcastVoiceReq(!1),$Ae.broadcastVoiceToBreakoutRoom(!1),n(FX(!1)),Promise.resolve("")):Promise.reject({type:Lt,reason:"Cannot stop broadcast voice due to it is not started",errorCode:Fe.SUBSESSION_BROADCAST_VOICE_MISMATCH_STATE})}assignUserToRoom(e,n){const r=this[go](),{breakoutRoom:{rooms:i}}=r,l=upe(r).find((h=>h.userId===e));if(!(l&&i.findIndex((h=>h.boId===n))>-1))return Promise.reject({type:gs,reason:"Invalid user",errorCode:Fe.SUBSESSION_MISMATCH_USER});var f;if((f=Do(r))!==null&&f!==void 0&&f.isHost)Kl.assignToBO(e,n);else{const h=MR(r);h&&Kl.coHostAssignToBO(l.userGUID,n,h.userId)}return Cs(QR,(h=>{const{controlStatus:v,roomList:y}=h,_=y.find((A=>A.boId===n));return v===cr.InProgress&&_&&_.attendeeGuidList.includes(l.userGUID)}))}moveUserToRoom(e,n){const r=this[go](),{breakoutRoom:{rooms:i,mainSessionAttendeeList:l},participants:{attendeesList:f}}=r,h=(eh(r)?l:f).find((y=>y.userId===e));if(!h)return Promise.reject({type:gs,reason:"user id not correct",errorCode:Fe.SUBSESSION_MISMATCH_USER});{const y=F0(i,h.userGUID);if(!y)return Promise.reject({type:Lt,reason:"user not in a room",errorCode:Fe.SUBSESSION_MISMATCH_USER});if(y.boId===n)return Promise.reject({type:Lt,reason:"user already in the target room",errorCode:Fe.SUBSESSION_MISMATCH_STATE});{const _=i.find((A=>A.boId===n));if(!_)return Promise.reject({type:gs,reason:"invalid room id",errorCode:Fe.SUBSESSION_MISMATCH_ID});var v;if((v=Do(r))!==null&&v!==void 0&&v.isHost)Kl.switchBO(e,_.boId);else{const A=MR(r);A&&Kl.coHostAssignToBO(h.userGUID,_.boId,A.userId)}}}return Cs(QR,(y=>{const{controlStatus:_,roomList:A}=y,R=A.find((k=>k.boId===n));return _===cr.InProgress&&R&&R.attendeeGuidList.includes(h.userGUID)}))}moveBackToMainSession(e){const n=this[go](),{breakoutRoom:{rooms:r,mainSessionAttendeeList:i},participants:{attendeesList:l}}=n,f=(eh(n)?i:l).find((v=>v.userId===e));if(!f)return Promise.reject({type:gs,reason:"user id not correct",errorCode:Fe.SUBSESSION_MISMATCH_USER});if(!F0(r,f.userGUID))return Promise.reject({type:Lt,reason:"user not in a room",errorCode:Fe.SUBSESSION_MISMATCH_USER});var h;if((h=Do(n))!==null&&h!==void 0&&h.isHost)Kl.moveToMainSession(f.userGUID);else{const v=MR(n);v&&Kl.coHostMoveToMainSession(f.userGUID,v.userId)}return Cs(QR,(v=>{const{controlStatus:y,roomList:_}=v;return y===cr.InProgress&&_.some((A=>{const{attendeeGuidList:R}=A;return R.includes(f.userGUID)}))}))}closeRoom(){const e=this[go](),{breakoutRoom:{controlStatus:n}}=e;if(n!==cr.InProgress)return Promise.reject({type:Lt,reason:"room is not started",errorCode:Fe.SUBSESSION_MISMATCH_STATE});var r;if((r=Do(e))!==null&&r!==void 0&&r.isHost)Kl.stopBO(cr.Closing);else{const i=MR(e);i&&Kl.coHostStopBO(cr.Closing,i.userId)}return Cs(QR,(i=>i.controlStatus===cr.Closing))}loadPreAssignedRooms(){const e=this[go](),{meeting:{meetingOptions:n},breakoutRoom:{controlStatus:r}}=e;return!n.isAllowBreakoutRoomPreAssign||r!==cr.NotStarted&&r!==cr.Closed?Promise.reject({type:Lt,errorCode:Fe.SUBSESSION_MISMATCH_STATE}):(Kl.preAssignBreakoutRoom(),Cs(Pxe))}getUnassignedAttendeeList(){const e=this[go](),n=Do(e);return n!=null&&n.isHost||n!=null&&n.bCoHost?upe(e).map((r=>D2(r))):[]}getRoomList(){const e=this[go](),{breakoutRoom:{rooms:n,currentRoom:{status:r,boId:i},mainSessionAttendeeList:l,inRoomUserActivityStatusMap:f,options:{isRoomSelectionEnabled:h}},participants:{attendeesList:v}}=e,y=Do(e);if(y&&(y.isHost||y.bCoHost||h)){const _=r===vs.InRoom,A=_?l:v;return n.map((R=>{const{attendeeGuidList:k,boId:N,name:L}=R,B=(k||[]).map((H=>A.find((q=>q.userGUID===H)))).filter((H=>!(H!=null&&H.isHost))).filter(Boolean);return _&&y.isHost&&N===i&&B.unshift(y),{roomId:N,name:L,attendeeList:B.filter((H=>!!H)).map((H=>{var q;const Y=(q=f[H.userGUID])!==null&&q!==void 0?q:{};return{userId:H.userId,displayName:H.displayName,avatar:H.avatar,isInRoom:H.bid===N,userGuid:H.userGUID,...Y}}))}}))}return e.breakoutRoom.rooms.map((_=>{const{boId:A,name:R}=_;return{roomId:A,name:R,attendeeList:[]}}))}getAttendeeStatus(){return this[go]().breakoutRoom.currentRoom.status}getRoomStatus(){return this[go]().breakoutRoom.controlStatus}getCurrentRoom(){const e=this[go](),{breakoutRoom:{currentRoom:{status:n,name:r,boId:i}}}=e;return{attendeeStatus:n,name:r,roomId:i}}getRoomOptions(){const e=this[go](),{breakoutRoom:{options:n}}=e,{whoStart:r,whoStop:i,...l}=n;return{...l}}isBreakoutRoomEnabled(){const e=this[go](),{breakoutRoom:{isEnableBreakoutRoom:n}}=e;return!!n}},fn(_r.prototype,"createRooms",[hn,Bc,eg],Object.getOwnPropertyDescriptor(_r.prototype,"createRooms"),_r.prototype),fn(_r.prototype,"recreateRooms",[hn,Bc,eg],Object.getOwnPropertyDescriptor(_r.prototype,"recreateRooms"),_r.prototype),fn(_r.prototype,"openRooms",[hn,Bc,eg],Object.getOwnPropertyDescriptor(_r.prototype,"openRooms"),_r.prototype),fn(_r.prototype,"joinRoom",[hn,eg],Object.getOwnPropertyDescriptor(_r.prototype,"joinRoom"),_r.prototype),fn(_r.prototype,"leaveRoom",[hn,eg],Object.getOwnPropertyDescriptor(_r.prototype,"leaveRoom"),_r.prototype),fn(_r.prototype,"askForHelp",[hn,eg],Object.getOwnPropertyDescriptor(_r.prototype,"askForHelp"),_r.prototype),fn(_r.prototype,"postponeHelping",[El,hn,eg],Object.getOwnPropertyDescriptor(_r.prototype,"postponeHelping"),_r.prototype),fn(_r.prototype,"broadcast",[Bc,hn],Object.getOwnPropertyDescriptor(_r.prototype,"broadcast"),_r.prototype),fn(_r.prototype,"startBroadcastVoice",[El,hn,eg],Object.getOwnPropertyDescriptor(_r.prototype,"startBroadcastVoice"),_r.prototype),fn(_r.prototype,"stopBroadcastVoice",[El,hn,eg],Object.getOwnPropertyDescriptor(_r.prototype,"stopBroadcastVoice"),_r.prototype),fn(_r.prototype,"assignUserToRoom",[Bc,hn,eg],Object.getOwnPropertyDescriptor(_r.prototype,"assignUserToRoom"),_r.prototype),fn(_r.prototype,"moveUserToRoom",[Bc,hn,eg],Object.getOwnPropertyDescriptor(_r.prototype,"moveUserToRoom"),_r.prototype),fn(_r.prototype,"moveBackToMainSession",[Bc,hn,eg],Object.getOwnPropertyDescriptor(_r.prototype,"moveBackToMainSession"),_r.prototype),fn(_r.prototype,"closeRoom",[Bc,hn,eg],Object.getOwnPropertyDescriptor(_r.prototype,"closeRoom"),_r.prototype),fn(_r.prototype,"loadPreAssignedRooms",[El,hn,eg],Object.getOwnPropertyDescriptor(_r.prototype,"loadPreAssignedRooms"),_r.prototype),_r);const uje={breakoutRoomSharingEpics0:(e,n)=>TA(e,la).pipe(Gt((r=>{var i;const{payload:{body:l}}=r;return l==null||(i=l.update)===null||i===void 0?void 0:i.some((f=>f.bShareToBORooms!==void 0||f.bShareOn!==void 0))})),_o(n),Kn((([r,i])=>{const{payload:{body:{update:l}}}=r,{breakoutRoom:{mainSessionAttendeeList:f}}=i,h=l.filter((_=>_.bShareOn&&_.bShareToBORooms)),v=l.filter((_=>!_.bShareOn||!_.bShareToBORooms)),y=f.filter((_=>_.sharerOn&&_.bShareToBORooms));return h.length>0&&h.forEach((_=>{y.findIndex((A=>A.userId===_.id))===-1&&He(cbe,{..._,isFromMainSession:!0})})),v.length>0&&v.filter((_=>y.findIndex((A=>A.userId===_.id))>-1)).forEach((_=>{He(lbe,{..._,isFromMainSession:!0})})),l.map((_=>{if(_.bShareOn&&_.bShareToBORooms){if(f.filter((A=>A.sharerOn&&A.bShareToBORooms&&A.userId!==_.id)).length===0)return{activeNodeID:_.id,bStatus:1,ssrc:_.shareSsrc};{const A=f.find((R=>R.userId===_.id));if(A!=null&&A.isHost)return{activeNodeID:_.id,bStatus:1,ssrc:_.shareSsrc}}}else if(!_.bShareOn||!_.bShareToBORooms){const A=f.filter((R=>R.bShareToBORooms&&R.sharerOn));if(A.length===1&&A[0].userId===_.id)return{activeNodeID:_.id,bStatus:0,ssrc:0};{const R=A.filter((N=>N.userId!==_.id)),k=R.find((N=>N.isHost));if(k)return{activeNodeID:k.userId,bStatus:1,ssrc:k.shareSsrc};{const N=R[0];if(N)return{activeNodeID:N.userId,bStatus:1,ssrc:N.shareSsrc}}}}})).filter(Boolean)})),Nt((r=>{const{share:{status:i},meeting:{userId:l}}=n.value,f=[];return r.map((h=>{const{activeNodeID:v,bStatus:y,ssrc:_}=h,A=y===1;f.push(sNe(A)),A&&i!==qs.End&&(aje.stopSharing(l),cje.stopDesktopSharing(),f.push(Yp(qs.End)),He(rxe));let R={activeNodeID:v,bStatus:y,ssrc:_,fromMainSession:!0};if(!A){const{participants:{attendeesList:k}}=n.value,N=k.filter((L=>L.sharerOn));if(N.length>0){const L=N[0];R={activeNodeID:L.userId,bStatus:1,ssrc:L.shareSsrc||0}}}f.push(X2({evt:Ume,body:R}))})),An(f)}))),breakoutRoomSharingEpics1:(e,n)=>TA(e,AQ).pipe(mr((r=>{const{payload:{body:{userID:i,confID:l}}}=r;return wl(...["sharing","audio"].map((f=>(function(h,v,y,_,A){return TA(v,h==="audio"?jme:Ibe).pipe(Ys(1),ao((R=>{const{payload:{body:{encryptKey:k,additionalType:N}}}=R,{media:{sharingDecodeStatus:L,audioDecodeStatus:B},meeting:{svcUrl:H,meetingNumber:q,conId:Y,zoomId:K,meetingId:se}}=y.value;Ad(h,"success",h==="audio"?B:L).subscribe((([,ie])=>{if(ie){const le=`wss://${H}/wc/media/${q}?type=${h==="audio"?"ma":"ms"}&cid=${Y}&mode=1`;_pe.createMainSessionChannel(h,le),_pe.updateMediaParams({iVType:h==="audio"?G0.AUDIO_DECODE:G0.SHARING_DECODE,isFromMainSession:!0,updateParams:{userId:_,sn:iv(K),confId:A,encryptType:N,encryptKey:iv(k),meetingId:se,meetingNumber:q}});const{breakoutRoom:{mainSessionAttendeeList:M}}=y.value;if((M==null?void 0:M.length)>0){const we=M.map((Ne=>({userid:Ne.userId,sn:Ne.zoomID&&iv(Ne.zoomID)})));_pe.updateUserMediaSN({added:we,isFromMainSession:!0,iVType:h==="audio"?G0.AUDIO_DECODE:G0.SHARING_DECODE})}}}))})),Nt((()=>Yn)))})(f,e,n,i,l))))})))},dje={epics0:(e,n)=>e.pipe(co(`${F1}`),mr((r=>{const{breakoutRoom:i,meeting:{meetingOptions:l}}=n.value,{payload:{hugeBO:f,elapsed:h}}=r,v=[];return i&&(l&&(v.push(GNe(f&&l.isBO100Enabled===!0)),v.push(qNe({isEnableBreakoutRoom:l.isEnableBreakoutRoom,isEnableBOBroadcast:l.isEnableBOBroadcast,isEnableBOViewActivityStatus:l.isEnableBOViewActivityStatus,isEnableBOBroadcastVoice:l.isEnableBOBroadcastVoice}))),i.currentRoom.boConfId&&v.push(Nme()),h!==void 0&&v.push(gge(h))),An(v)}))),epics1:e=>oo(e,4174).pipe(ao((n=>{He(Dxe,n.payload.body.bid)})),yi(Yn)),epics2:(e,n)=>q0(e,7950).pipe(_o(n),mr((([r,i])=>{const{payload:{body:{proto:l}}}=r,{breakoutRoom:{isHugeBO:f,currentRoom:{status:h,boId:v}},meeting:{userGUID:y}}=i;let _=l;f&&(_=(function(k){if(Mge)return Mge.decode(k);var N=(function(B){for(var H="",q=0;;){var Y=B[q++],K=(Y>127)+(Y>223)+(Y>239);if(q+K>B.length)return[H,GX(B,q-1)];K?K==3?(Y=((15&Y)<<18|(63&B[q++])<<12|(63&B[q++])<<6|63&B[q++])-65536,H+=String.fromCharCode(55296|Y>>10,56320|1023&Y)):H+=1&K?String.fromCharCode((31&Y)<<6|63&B[q++]):String.fromCharCode((15&Y)<<12|(63&B[q++])<<6|63&B[q++]):H+=String.fromCharCode(Y)}})(k),L=N[0];return N[1].length&&w1(8),L})((function(k){return(function(N,L,B){var H=N.length;if(!H||B&&B.f&&!B.l)return L||new pf(0);var q=!L||B,Y=!B||B.i;B||(B={}),L||(L=new pf(3*H));var K=function(Ot){var Oe=L.length;if(Ot>Oe){var pt=new pf(Math.max(2*Oe,Ot));pt.set(L),L=pt}},se=B.f||0,ie=B.p||0,le=B.b||0,M=B.l,we=B.d,Ne=B.m,De=B.n,be=8*H;do{if(!M){se=P0(N,ie,1);var me=P0(N,ie+1,3);if(ie+=3,!me){var Ye=N[(En=i0e(ie)+4)-4]|N[En-3]<<8,Ke=En+Ye;if(Ke>H){Y&&w1(0);break}q&&K(le+Ye),L.set(N.subarray(En,Ke),le),B.b=le+=Ye,B.p=ie=8*Ke,B.f=se;continue}if(me==1)M=X7e,we=eje,Ne=9,De=5;else if(me==2){var Ze=P0(N,ie,31)+257,z=P0(N,ie+10,15)+4,$t=Ze+P0(N,ie+5,31)+1;ie+=14;for(var Be=new pf($t),at=new pf(19),lt=0;lt<z;++lt)at[Rge[lt]]=P0(N,ie+3*lt,7);ie+=3*z;var $e=ype(at),qt=(1<<$e)-1,io=V1(at,$e,1);for(lt=0;lt<$t;){var En,Zn=io[P0(N,ie,qt)];if(ie+=15&Zn,(En=Zn>>>4)<16)Be[lt++]=En;else{var Et=0,Jt=0;for(En==16?(Jt=3+P0(N,ie,3),ie+=2,Et=Be[lt-1]):En==17?(Jt=3+P0(N,ie,7),ie+=3):En==18&&(Jt=11+P0(N,ie,127),ie+=7);Jt--;)Be[lt++]=Et}}var ce=Be.subarray(0,Ze),Hs=Be.subarray(Ze);Ne=ype(ce),De=ype(Hs),M=V1(ce,Ne,1),we=V1(Hs,De,1)}else w1(1);if(ie>be){Y&&w1(0);break}}q&&K(le+131072);for(var Fo=(1<<Ne)-1,yt=(1<<De)-1,Xt=ie;;Xt=ie){var Wn=(Et=M[Spe(N,ie)&Fo])>>>4;if((ie+=15&Et)>be){Y&&w1(0);break}if(Et||w1(2),Wn<256)L[le++]=Wn;else{if(Wn==256){Xt=ie,M=null;break}var bt=Wn-254;if(Wn>264){var Kt=DQ[lt=Wn-257];bt=P0(N,ie,(1<<Kt)-1)+qPe[lt],ie+=Kt}var Ut=we[Spe(N,ie)&yt],Ue=Ut>>>4;if(Ut||w1(3),ie+=15&Ut,Hs=Y7e[Ue],Ue>3&&(Kt=kQ[Ue],Hs+=Spe(N,ie)&(1<<Kt)-1,ie+=Kt),ie>be){Y&&w1(0);break}q&&K(le+131072);for(var dt=le+bt;le<dt;le+=4)L[le]=L[le-Hs],L[le+1]=L[le+1-Hs],L[le+2]=L[le+2-Hs],L[le+3]=L[le+3-Hs];le=dt}}B.l=M,B.p=Xt,B.b=le,B.f=se,M&&(se=1,B.m=Ne,B.d=we,B.n=De)}while(!se);return le==L.length?L:GX(L,0,le)})(k.subarray((function(N){N[0]==31&&N[1]==139&&N[2]==8||w1(6,"invalid gzip data");var L=N[3],B=10;4&L&&(B+=N[10]|2+(N[11]<<8));for(var H=(L>>3&1)+(L>>4&1);H>0;H-=!N[B++]);return B+(2&L)})(k),-8),new pf((function(N){var L=N.length;return(N[L-4]|N[L-3]<<8|N[L-2]<<16|N[L-1]<<24)>>>0})(k)))})(iv(l))));const A=[];let R;try{const k=JSON.parse(hb(_)),{ControlStatus:N,NameIndex:L,IsAutoJoinEnabled:B,IsBackToMainSessionEnabled:H,IsParticipantsChooseRoomEnabled:q,IsTimerEnabled:Y,TimerDuration:K,IsTimerAutoEndEnabled:se,WaitSeconds:ie,StartTimeOnMMR:le,ItemList:M,WhoStart:we,WhoStop:Ne,IsAutoMovetoMainSessionEnabled:De}=k,be={isAutoJoinRoom:B,isBackToMainSessionEnabled:H,isTimerEnabled:Y,timerDuration:K,isTimerAutoEnabled:se,waitSeconds:ie,isAutoMoveBackToMainSession:De,isRoomSelectionEnabled:q,whoStart:we,whoStop:Ne};A.push(FNe(be)),A.push(HNe(le)),A.push(VX(L)),A.push($Ne(N));const me=M&&M.map((Ye=>({boId:Ye.BID,name:Ye.MeetingTitle,boStatus:Ye.Status,hostId:Ye.HostID,attendeeGuidList:Ye.ParticipantList||[]})))||[];switch(A.push(u5(me)),He(QR,{controlStatus:N,roomList:me}),N){case cr.InProgress:if(h!==vs.InRoom&&h!==vs.Joining){const Ye=(function(Ke,Ze){const{meeting:{isHost:z,userGUID:$t},breakoutRoom:{currentRoom:{status:Be,boId:at}}}=Ze.value,lt=rr.get(a0e),$e=[];if(lt)try{const{status:qt,boId:io}=JSON.parse(lt);if(qt===vs.Invited)if(z)OP();else{const En=F0(Ke,$t);En&&($e.push(KZ(En)),Be!==vs.Initial&&at===En.boId||He(_Y,{roomId:En.boId,name:En.name}))}else if(qt===vs.InRoom){let En;if(En=z?Ke.find((Zn=>Zn.boId===io)):F0(Ke,$t),En){$e.push(KZ(En));const Zn=En.boId;U2(Ze).subscribe((()=>{zr.createAgent().joinBO(Zn)}))}OP()}}catch(qt){console.error(qt)}return $e})(me,n);if(Ye.length===0){const Ke=F0(me,y);Ke&&A.push(KZ(Ke))}else A.push(...Ye)}else if(h===vs.InRoom&&r.type===`${iE}`){const Ye=F0(me,y);Ye&&Tpe(n).subscribe((Ke=>{v===Ye.boId||Ke||L0.joinBO(Ye.boId)}))}be.isTimerEnabled&&be.timerDuration>0&&(R=(function(Ye,Ke,Ze){return Tpe(Ye).pipe(_o(Ye),mr((([z,$t])=>{const{breakoutRoom:{currentRoom:{status:Be},meetingElapsedTime:at},meeting:{joinMeetingTimeStamp:lt}}=$t,$e=lt-1e3*at+1e3*Ze+1e3*Ke;if(performance.now()<$e){if(z)return A5(1e3).pipe(Kn((()=>Math.floor(($e-performance.now())/1e3))),_o(Ye),a2((([qt,io])=>{const{breakoutRoom:{controlStatus:En,currentRoom:{status:Zn}},socket:{zoomSocketStatus:Et},meeting:{isHost:Jt}}=io;return qt>=0&&Jt&&En===cr.InProgress&&(Zn===vs.InRoom||Zn===vs.MainSession||Zn===vs.Initial)&&Et===wi.Connected})),ao((([qt])=>{He(Ghe,{countdown:qt})})),Gt((([qt])=>qt===0)),ao((([,qt])=>{const{breakoutRoom:{options:io}}=qt;io.isTimerAutoEnabled?zr.createAgent().stopBO(cr.Closing):He(Nxe)})),Nt((()=>Yn)));if(Be===vs.InRoom)return A5(1e3).pipe(Kn((()=>Math.floor(($e-performance.now())/1e3))),_o(Ye),a2((([qt,io])=>{const{breakoutRoom:{currentRoom:{status:En}},meeting:{isHost:Zn},socket:{zoomSocketStatus:Et}}=io;return qt>=0&&En===vs.InRoom&&!Zn&&Et===wi.Connected})),ao((([qt])=>{He(Ghe,{countdown:qt})})),Nt((()=>Yn)))}return Yn})))})(n,be.timerDuration,le));break;case cr.Closing:R=Tpe(n).pipe(Gt((Ye=>Ye)),Nt((()=>{const Ye=[],{breakoutRoom:{closingRoomTime:Ke,currentRoom:{status:Ze}},participants:{attendeesList:z}}=n.value;let $t=be.waitSeconds;if(Ke!==0&&be.waitSeconds>0){const Be=Math.floor((performance.now()-Ke)/1e3);$t=Math.max(be.waitSeconds-Be,0)}if($t===0)return L0.stopBO(cr.Closed),Yn;{if(Ze!==vs.InRoom&&z.length>1&&z.every((at=>!at.bid)))return L0.stopBO(cr.Closed),Yn;Ke||Ye.push(yge(performance.now()));const Be=performance.now()+1e3*$t;return wl(An(Ye),Uc(0,1e3).pipe(Kn((()=>Math.floor((Be-performance.now())/1e3))),_o(n),a2((([,at])=>{const{breakoutRoom:{controlStatus:lt},meeting:{isHost:$e},socket:{zoomSocketStatus:qt}}=at;return lt===cr.Closing&&qt===wi.Connected&&$e})),ao((([at])=>{at>=0&&He(Whe,{countdown:at})})),Gt((([at])=>at<=0)),ao((()=>{L0.stopBO(cr.Closed)})),Nt((()=>Yn))))}})));break;case cr.Closed:A.push(yge(0)),h===vs.Leaving?A.push(x2(vs.MainSession)):h===vs.Invited?A.push(x2(vs.Initial)):h!==vs.InRoom&&h!==vs.Joining||A.push(...Nge()),OP()}}catch(k){console.error(k)}return R?wl(An(A),R):An(A)}))),epics3:(e,n)=>q0(e,4194).pipe(_o(n),mr((([r,i])=>{const{payload:{body:{bid:l,botoken:f,confID:h}}}=r,{meeting:{isHost:v},breakoutRoom:{rooms:y,currentRoom:{status:_}}}=i,A=[],R=y.find((k=>k.boId===l));return R&&(A.push(KZ(R,v)),A.push(vge(h)),A.push(bge(f)),He(wY,{boId:l}),v||_!==vs.InRoom?A.push(...wpe(R.name,_)):A.push(...HAe(R.name))),An(A)}))),epics4:(e,n)=>e.pipe(co(`${X2}`,`${iE}`),Gt((r=>r.payload.evt===7949)),_o(n),Nt((([r,i])=>{var l;const{payload:{body:f}}=r,{meeting:{userGUID:h},breakoutRoom:{rooms:v,options:{isAutoJoinRoom:y,isAutoMoveBackToMainSession:_},currentRoom:{status:A},mainSessionAttendeeList:R},participants:{attendeesList:k}}=i,{commandType:N}=f,L=[];let B;const H=(l=(Ape(A)?k:R).find((ie=>ie.userGUID===h)))===null||l===void 0?void 0:l.userId;switch(N){case RR.Join:{const{targetBID:ie,botoken:le,confID:M,joinReason:we,requestSourceID:Ne}=f,De=F0(v,h);if(De&&De.boId===ie){L.push(vge(M)),L.push(bge(le));const be=Number(we)===A$e.Active&&H===Number(Ne);y||be?(be&&He(wY,{boId:ie}),L.push(...wpe(De.name))):(rr.set(Bi.WebclientBreakoutRoomCommand,N,Zr.SessionStorage),He(_Y,{roomId:ie,name:De.name,...FAe(Ne,i)}))}break}case RR.Switch:{const{targetBID:ie,botoken:le,confID:M,joinMethod:we,requestSourceID:Ne}=f,De=F0(v,h);De&&De.boId===ie&&(L.push(HX({boId:De.boId,boToken:le,boConfId:M,name:De.name})),H===Number(Ne)&&Number(we)===xSe.AskToLeave&&He(wY,{boId:ie}),A===vs.Invited?(rr.set(Bi.WebclientBreakoutRoomCommand,N,Zr.SessionStorage),y||H===Number(Ne)?L.push(...wpe(De.name)):He(_Y,{roomId:ie,name:De.name,...FAe(Ne,i)})):L.push(...HAe(De.name)));break}case RR.Leave:{const{waitTime:ie,joinMethod:le}=f;if(Ape(A))L.push(HX({boId:"",boToken:"",boConfId:"",status:vs.Initial}));else{const M=Number(ie);if(M>0){const we=performance.now()+1e3*M;B=Uc(0,1e3).pipe(Kn((()=>Math.floor((we-performance.now())/1e3))),_o(n),a2((([Ne,De])=>{const{breakoutRoom:{controlStatus:be,currentRoom:{status:me}},meeting:{isHost:Ye},socket:{zoomSocketStatus:Ke}}=De;return Ne>=0&&Ke===wi.Connected&&be===cr.Closing&&me===vs.InRoom&&!Ye})),ao((([Ne])=>{Ne>=0&&He(Whe,{countdown:Ne})})),yi(Yn))}else if(Number(le)!==xSe.AskToLeave||_)L.push(...Nge());else{var q,Y,K;const{requestSourceID:we}=f,Ne=Number(we),{participants:{attendeesList:De}}=i;let be=De.find((me=>me.userId===Ne));if(!be){const{breakoutRoom:{mainSessionAttendeeList:me}}=i;be=me.find((Ye=>Ye.userId===Ne))}He(Bxe,{inviterId:(q=be)===null||q===void 0?void 0:q.userId,inviterGuid:(Y=be)===null||Y===void 0?void 0:Y.userGUID,inviterName:(K=be)===null||K===void 0?void 0:K.displayName})}OP()}break}case RR.Broadcast:{const{textContent:ie,requestID:le}=f;if(ie){const{meeting:{encType:M},participants:{attendeesList:we},breakoutRoom:{mainSessionAttendeeList:Ne}}=i;let De="";if(M===f6.AES_GCM){const be=(Ape(A)?we:Ne).find((me=>me.userId===Number(le)));be&&(De=be.zoomID)}B=An(xd.beginDecrypt({decryptedText:ie,type:Rd.BO_BROADCAST,zoomId:De}).then((({message:be})=>(He(kxe,{message:be}),jNe(be)))))}break}case RR.HelpReq:{const{requestID:ie}=f,{breakoutRoom:{mainSessionAttendeeList:le,rooms:M,currentRoom:{boId:we},hostReplyToQuestionerType:Ne,hostReplyToRequestId:De},participants:{attendeesList:be}}=i;if(ie){if(A===vs.InRoom){const me=le.find((Ye=>Ye.userId===ie));if(me&&me.bid===we){L0.askForHelpResultBO(ie,wA.AlreadyInRoom);break}}if(Ne===wA.Received&&De!==ie)L0.askForHelpResultBO(ie,wA.Busy);else{L0.askForHelpResultBO(ie,wA.Received),L.push(e0e(wA.Received),zNe(ie));const me=(A===vs.InRoom?le:be).find((Ye=>Ye.userId===ie));if(me){const Ye=me.bid,Ke=M.find((Ze=>Ze.boId===Ye));Ke&&He(Mxe,{userId:ie,userGuid:me.userGUID,displayName:me.displayName,roomName:Ke.name,roomId:Ke.boId})}}}break}case RR.HelpRes:{const{helpResult:ie}=f;He(dbe,{result:Number(ie)});break}case RR.BOActivity:{var se;const{activityRoster:ie,activityTalking:le,requestID:M}=f,we=(se=(eh(i)?i.breakoutRoom.mainSessionAttendeeList:i.participants.attendeesList).find((Ne=>Ne.userId===M)))===null||se===void 0?void 0:se.userGUID;if(we){const{breakoutRoom:{rooms:Ne}}=i,De=F0(Ne,we),be=(function(me,Ye){const Ke={isTalking:Ye===1};return ije.forEach((Ze=>{const{mask:z,key:$t,value:Be}=Ze;(z&me)===z&&Object.assign(Ke,{[`${$t}`]:Be})})),Ke})(Number(ie),Number(le));L.push(KNe({userGuid:we,status:be})),He(Vxe,{...be,userId:M,userGuid:we,roomId:De==null?void 0:De.boId,roomName:De==null?void 0:De.name})}break}}return B?wl(An(L),B):An(L)}))),epics5:(e,n)=>TA(e,AQ).pipe(_o(n),mr((([r,i])=>{const{payload:{body:{res:l,elapsed:f}}}=r,h=[];return l===tg.MeetingHasClosed||l===tg.UserHasBeenRemoved?(OP(),h.push(...BP(i,!1))):l===tg.Success&&(h.push(gge(f)),h.push(x2(vs.InRoom)),rr.set(Bi.WebclientBreakoutRoomAttendeeStatus,JSON.stringify({status:vs.InRoom,boId:i.breakoutRoom.currentRoom.boId}),Zr.SessionStorage)),An(h)}))),epics6:e=>TA(e,la).pipe(Kn((n=>aE(n.payload.body))),Nt((n=>{const r=[WNe(n)];return He(Lxe),An(r)}))),epics7:(e,n)=>TA(e,la).pipe(Kn((r=>aE(r.payload.body))),Kn((r=>{const i=[];return["add","update"].forEach((l=>r[l]&&i.push(...r[l]))),i.filter((l=>[...Ope,"bAudioUnencrytped"].some((f=>l[f]!==void 0))))})),Gt((r=>r.length>0)),al(mE),Nt((r=>{const i=[],{participants:{attendeesList:l},breakoutRoom:{mainSessionAttendeeList:f,isUserRoleUpdated:h},meeting:{userId:v}}=n.value,y=r.map((_=>{const A=f.find((k=>k.userId===_.userId)),R=l.find((k=>k.userGUID===(A==null?void 0:A.userGUID)));if(R){if(_.bCCEditor!==void 0&&i.push(BNe({editorId:_.bCCEditor?R.userId:"",isEditor:!!_.bCCEditor,editorZoomId:_.bCCEditor?R.zoomID:""})),delete _.bRaiseHand,delete _.bCapsPinMultiVideo,delete _.bInFailover,delete _.uniqueIndex,!h&&R.userId===v){const k={};I5(_.userRole)?Object.assign(k,_):(f.some((N=>N.isHost))||_.bAudioUnencrytped!==void 0)&&Object.assign(k,A),k.userId!==void 0&&(i.push(Cge(!0)),He(qhe,_))}return{..._,userId:R.userId}}})).filter((_=>!!_&&Ope.some((A=>_[A]!==void 0))));return y.length>0&&(He(Y0,y),i.push(ML({update:y}))),An(i)}))),epics8:e=>TA(e,av).pipe(Gt((n=>{const{payload:{body:r}}=n;return(r==null?void 0:r.bAllowAttendeeRename)!==void 0||(r==null?void 0:r.chatPriviledge)!==void 0||(r==null?void 0:r.lockShare)!==void 0})),Kn((n=>{const{payload:{body:r}}=n;return r.bAllowAttendeeRename!==void 0?mX(n.payload.body):r.chatPriviledge!==void 0?Ybe(r.chatPriviledge):r.lockShare!==void 0?Wbe(r.lockShare):void 0}))),epics9:(e,n)=>oo(e,la).pipe(_o(n),Gt((([,r])=>{const{meeting:{isHost:i},breakoutRoom:{controlStatus:l,currentRoom:{status:f}}}=r;return i&&l===cr.Closing&&f!==vs.InRoom})),al(mE),ao((()=>{const{participants:{attendeesList:r}}=n.value;r.every((i=>!i.bid))&&r.length>1&&L0.stopBO(cr.Closed)})),yi(Yn)),epics10:(e,n)=>oo(e,4214).pipe(_o(n),mr((([r,i])=>{const{payload:{body:{proto:l}}}=r,{breakoutRoom:{rooms:f,isHugeBO:h}}=i;try{const v=JSON.parse(hb(l)),y=[];if(v&&v.PreAssignBoList&&Array.isArray(v.PreAssignBoList)){const _=v.PreAssignBoList.map((R=>({name:R.BoName,emails:R.email})));y.push(Sge(_));const A=h?100:50;if(f.length+_.length<A){const R=_.map((k=>k.name));return L0.batchCreateBOToken(R),wl(An(y),Pge(R.length).pipe(_o(n),Nt((([{boIdList:k},N])=>{const L=Ai(N),B=_.map(((q,Y)=>{const{emails:K,name:se}=q;let ie=[];return K&&Array.isArray(K)&&(ie=K.map((le=>L.filter((M=>M.userEmail===le)).map((M=>M.userGUID)))).reduce(((le,M)=>[...le,...M]),[])),{boId:k[Y],name:se,attendeeGuidList:ie}})),H=B.map(((q,Y)=>({roomId:q.boId,name:q.name,emails:_[Y].emails})));return He(Pxe,{rooms:H}),An([u5(B),Sge(H)])}))))}return An(y)}}catch{console.error("pre assign proto is not valid")}return Yn}))),epics11:(e,n)=>q0(e,la).pipe(_o(n),Gt((([r,i])=>{const{meeting:{isHost:l,meetingStatus:f,meetingOptions:h},breakoutRoom:{controlStatus:v}}=i,{payload:{body:y}}=r;return f===Tu.Joined&&(h==null?void 0:h.isAllowBreakoutRoomPreAssign)&&l&&(v===cr.NotStarted||v===cr.InProgress)&&Array.isArray(y.add)})),Nt((([r,i])=>{const{breakoutRoom:{controlStatus:l,rooms:f,preAssignedRooms:h,currentRoom:{status:v}},participants:{failoverAttendeesList:y}}=i,_=h==null?void 0:h.filter((k=>f.findIndex((N=>N.boId===k.roomId))>-1)),{payload:{body:{add:A}}}=r,R=[];return _.length>0&&A.filter((k=>k.userEmail&&k.userGUID)).filter((k=>y.findIndex((N=>N.zoomID===k.zoomID))===-1)).forEach((k=>{if(!F0(f,k.userGUID))for(let N=0;N<(_==null?void 0:_.length);N++){const L=_[N];if(L.emails.includes(k.userEmail)){if(l===cr.NotStarted){const B=We(f,(H=>{const q=H.find((Y=>Y.boId===L.roomId));q==null||q.attendeeGuidList.push(k.userGUID)}));R.push(u5(B))}else l===cr.InProgress&&(v===vs.InRoom&&r.type===`${iE}`?L0.assignToBO(k.id,String(L.roomId)):v!==vs.Initial&&v!==vs.MainSession||L0.assignToBO(k.id,String(L.roomId)));break}}})),An(R)}))),epics12:(e,n)=>oo(e,la).pipe(Gt((r=>{const{breakoutRoom:{mainSessionAttendeeList:i}}=n.value,{payload:{body:l}}=r;return i.length>0&&(l.add!==void 0||l.update!==void 0)})),al(nm),Kn((r=>aE(r.payload.body))),Nt((r=>{const{breakoutRoom:{mainSessionAttendeeList:i,isUserRoleUpdated:l},participants:{attendeesList:f}}=n.value;let h=[];const v=[];["add","update"].forEach((A=>r[A]&&h.push(...r[A])));const y=[...Ope,"isHost"];h=h.filter((A=>y.some((R=>A[R]!==void 0))));const _=h.filter((A=>A.zoomID!==void 0));return h=h.map((A=>{var R,k,N,L;const B=(R=(k=A.zoomID)!==null&&k!==void 0?k:(N=_.find((H=>H.userId===A.userId)))===null||N===void 0?void 0:N.zoomID)!==null&&R!==void 0?R:(L=f.find((H=>H.userId===A.userId)))===null||L===void 0?void 0:L.zoomID;if(B){const H=i.find((q=>q.zoomID===B));if(H)return l||(v.push(Cge(!0)),He(qhe,H)),Object.keys(A).filter((q=>Object.prototype.hasOwnProperty.call(A,q))).filter((q=>y.includes(q))).reduce(((q,Y)=>{const K=H[Y];if(K!==void 0||Y==="bCoHost"){const se=typeof A[Y]=="boolean"?!!K:K;Object.assign(q,{[Y]:se})}return q}),{userId:A.userId})}})).filter(Boolean),h.length>0&&(He(Y0,h),v.push(ML({update:h}))),An(v)}))),epics13:e=>TA(e,7999).pipe(ao((n=>{const{payload:{body:{bStatus:r}}}=n;He(Hxe,{status:!!r})})),Nt((()=>Yn))),epics14:(e,n)=>oo(e,7940).pipe(Nt((r=>{const{payload:{body:{bHost:i}}}=r,{breakoutRoom:{isBroadcastVoice:l}}=n.value,f=[];return!i&&l&&(Yo.getInstance().broadcastVoiceToBreakoutRoom(!1),f.push(FX(!1))),An(f)})))},fje=nh(dje,uje);let ZZ=(function(e){return e[e.Ready=0]="Ready",e[e.UserSub=1]="UserSub",e[e.ManualCaptionerEnabled=2]="ManualCaptionerEnabled",e[e.ManualCaptionerDisabled=3]="ManualCaptionerDisabled",e})({}),lb=(function(e){return e[e.Unspecified=-1]="Unspecified",e[e.English=0]="English",e[e["Chinese (Simplified)"]=1]="Chinese (Simplified)",e[e.Japanese=2]="Japanese",e[e.German=3]="German",e[e.French=4]="French",e[e.Russian=5]="Russian",e[e.Portuguese=6]="Portuguese",e[e.Spanish=7]="Spanish",e[e.Korean=8]="Korean",e[e.Italian=9]="Italian",e[e.Reserved=10]="Reserved",e[e.Vietnamese=11]="Vietnamese",e[e.Dutch=12]="Dutch",e[e.Ukrainian=13]="Ukrainian",e[e.Arabic=14]="Arabic",e[e["Chinese (Traditional)"]=16]="Chinese (Traditional)",e[e.Czech=17]="Czech",e[e.Estonian=18]="Estonian",e[e.Finnish=19]="Finnish",e[e.Hebrew=21]="Hebrew",e[e.Hindi=22]="Hindi",e[e.Hungarian=23]="Hungarian",e[e.Indonesian=24]="Indonesian",e[e.Malay=25]="Malay",e[e.Persian=26]="Persian",e[e.Polish=27]="Polish",e[e.Romanian=28]="Romanian",e[e.Swedish=29]="Swedish",e[e.Tamil=30]="Tamil",e[e.Telugu=31]="Telugu",e[e.Tagalog=32]="Tagalog",e[e.Turkish=33]="Turkish",e[e["French (Canada)"]=34]="French (Canada)",e[e.Danish=35]="Danish",e[e.Thai=37]="Thai",e[e.Cantonese=44]="Cantonese",e[e.NoTranslation=400]="NoTranslation",e[e.DefaultManualInput=401]="DefaultManualInput",e[e.Customized=500]="Customized",e})({}),nA=(function(e){return e[e.Unknown=0]="Unknown",e[e.Close=1]="Close",e[e.New=2]="New",e[e.Insert=3]="Insert",e[e.Delete=4]="Delete",e[e.Reset=5]="Reset",e[e.Audiodesc=6]="Audiodesc",e[e.Speaker=7]="Speaker",e[e.Error=8]="Error",e})({}),UAe=(function(e){return e[e.TranslateNotSupport=1]="TranslateNotSupport",e})({}),lA=(function(e){return e[e.Unspecified=0]="Unspecified",e[e.InMeetingManual=1]="InMeetingManual",e[e.ExternalCaptioner=2]="ExternalCaptioner",e[e.ASR=4]="ASR",e})({});const d5={en:0,zh:1,ja:2,de:3,fr:4,ru:5,pt:6,es:7,ko:8,it:9,en1:10,vi:11,nl:12,uk:13,ar:14,"zh-hant":16,cs:17,et:18,fi:19,he:21,hi:22,hu:23,id:24,ms:25,fa:26,pl:27,ro:28,sv:29,ta:30,te:31,tl:32,tr:33,"fr-ca":34,da:35,th:37,"zh-yue":44,ca:48},qX=Object.keys(lb).filter((e=>/\d+/.test(lb[e]))).reduce(((e,n)=>({...e,[`${lb[n]}`]:n})),{}),jAe=Object.keys(d5).reduce(((e,n)=>(Object.assign(e,{[`${d5[`${n}`]}`]:n}),e)),{}),qY="zoom-sdk-live-transcription",JC="live-transcription";(function(e){return e[e.English=0]="English",e[e.Chinese=1]="Chinese",e[e.Japanese=2]="Japanese",e[e.German=3]="German",e[e.French=4]="French",e[e.Russian=5]="Russian",e[e.Portuguese=6]="Portuguese",e[e.Spanish=7]="Spanish",e[e.Korean=8]="Korean",e[e.Italian=9]="Italian",e[e.Reserved=10]="Reserved",e[e.Vietnamese=11]="Vietnamese",e[e.Dutch=12]="Dutch",e[e.Ukrainian=13]="Ukrainian",e[e.Arabic=14]="Arabic",e[e["Chinese (Traditional)"]=16]="Chinese (Traditional)",e[e.Czech=17]="Czech",e[e.Estonian=18]="Estonian",e[e.Finnish=19]="Finnish",e[e.Hebrew=21]="Hebrew",e[e.Hindi=22]="Hindi",e[e.Hungarian=23]="Hungarian",e[e.Indonesian=24]="Indonesian",e[e.Malay=25]="Malay",e[e.Persian=26]="Persian",e[e.Polish=27]="Polish",e[e.Romanian=28]="Romanian",e[e.Swedish=29]="Swedish",e[e.Tamil=30]="Tamil",e[e.Telugu=31]="Telugu",e[e.Tagalog=32]="Tagalog",e[e.Turkish=33]="Turkish",e[e["French (Canada)"]=34]="French (Canada)",e[e.Danish=35]="Danish",e[e.Thai=37]="Thai",e[e.Cantonese=44]="Cantonese",e[e.Catalan=48]="Catalan",e[e.NoTranslation=400]="NoTranslation",e[e.DefaultManualInput=401]="DefaultManualInput",e})({});(function(e){return e.English="en",e["Chinese (Simplified)"]="zh",e.Japanese="ja",e.German="de",e.French="fr",e.Russian="ru",e.Portuguese="pt",e.Spanish="es",e.Korean="ko",e.Italian="it",e.Reserved="en1",e.Vietnamese="vi",e.Dutch="nl",e.Ukrainian="uk",e.Arabic="ar",e["Chinese (Traditional)"]="zh-hant",e.Czech="cs",e.Estonian="et",e.Finnish="fi",e.Hebrew="he",e.Hindi="hi",e.Hungarian="hu",e.Indonesian="id",e.Malay="ms",e.Persian="fa",e.Polish="pl",e.Romanian="ro",e.Swedish="sv",e.Tamil="ta",e.Telugu="te",e.Tagalog="tl",e.Turkish="tr",e["French (Canada)"]="fr-ca",e.Danish="da",e.Thai="th",e.Cantonese="zh-yue",e.Catalan="ca",e})({});let cL=(function(e){return e.Individual="individual",e.Session="session",e})({});function Lge(e){const n=e===lb.Unspecified?lb.Reserved:e;Yo.getInstance().selectLanguageChannelForNewLTT(n)}function KY(e,n,r){const{state:i,rwgAgent:l}=r,{liveTranscription:{isSomeoneTranslating:f,isHostLockSpeakingLanguage:h},meeting:{userId:v,isWebinar:y}}=i,_=e??lb.English;var A;h||y?l.setSpokenLanguage(_):(((A=Do(i))===null||A===void 0?void 0:A.audio)===Ur.Computer&&Lge(e??lb.Unspecified),e!==void 0&&n&&l.setTranscriptionLanguage(_,f?v:0))}const pje=$xe(Fxe,(function(e,n){return rke(e,n)}))([Ai,({meeting:{gatewayUserList:e}})=>e],((e,n)=>{const r={};return e.forEach((i=>{Object.assign(r,{[`${i.userId}`]:i.zoomID})})),n==null||n.forEach((i=>{Object.assign(r,{[`${i.userId}`]:i.sn})})),r})),zAe=va([Ai],(e=>e.find((n=>n.bCCEditor===!0)))),hje=va([Ai,Uxe],((e,n)=>e.some((r=>r.bCCEditor===!0&&r.userId===n)))),Ipe=zr.createAgent(),Rpe={isEnableTranslatedCaptions:!1,isHostLockSpeakingLanguage:!1,transcriptionLang:[],isEnableAutomatedCaptions:!1,supportedTranscriptionLanguage:[],isLiveTranscriptionEnabled:!1,isHostDisableCaptions:!1,isManualCaptionerEnabled:!1,gatewayId:void 0,isLiveTranscriptionSubscribed:!1,messageRecords:[],isRecordsReduced:!1,reducedRecordsCount:0,isSomeoneSetSessionTranscription:!1,isSomeoneTranslating:!1,isTranscriptionLanguageLocked:!1,isExternalCaptionerCaptioning:!1,externalCcUrl:void 0,transcriptionMode:cL.Individual},mje=op({[`${iPe}`]:We(((e,{payload:n})=>{e.isLiveTranscriptionEnabled=n})),[`${aPe}`]:We(((e,{payload:n})=>{const{transcriptionLang:r,translatedSetting:i,...l}=n;if(r&&(e.transcriptionLang=r.split(";").map((f=>{const h=f&&d5[f];return h!==void 0?{lang:f,code:h}:null})).filter(Boolean)),i){const f=Object.keys(i).map((v=>{const y=i[v];if(y){const _=y.split(";").map((A=>{const R=A&&d5[A];return R!==void 0?{lang:A,code:R}:null})).filter(Boolean);return{lang:v,code:d5[v],translatedToLanguage:_}}return null})).filter(Boolean),h=f.reduce(((v,y)=>(y.translatedToLanguage.forEach((_=>{v.findIndex((A=>A.code===_.code))===-1&&v.push(_)})),v)),[]);e.translatedSetting=f,e.translationLang=h}Object.assign(e,l)})),[`${_ge}`]:We(((e,{payload:n})=>{e.isManualCaptionerEnabled=n})),[`${cPe}`]:We(((e,{payload:n})=>{e.gatewayId=n})),[`${gPe}`]:We(((e,{payload:n})=>{e.isHostDisableCaptions=n})),[`${lPe}`]:We(((e,{payload:n})=>{e.supportedTranscriptionLanguage=n})),[`${IA}`]:We(((e,{payload:n})=>{e.currentTranscriptionLang=n})),[`${$X}`]:We(((e,{payload:n})=>{e.currentTranslationLang=n})),[`${Age}`]:We(((e,{payload:n})=>{e.messageRecords.push(n)})),[`${uPe}`]:We(((e,{payload:n})=>{const r=e.messageRecords.find((i=>i.msgId===n.msgId));r&&Object.assign(r,n)})),[`${dPe}`]:We(((e,{payload:n})=>{const{remains:r,reducedRecordsCount:i}=n,l=e.messageRecords.length-r;e.isRecordsReduced=!0,e.reducedRecordsCount=i,e.messageRecords.splice(0,l)})),[`${wge}`]:We(((e,{payload:n})=>{e.isLiveTranscriptionSubscribed=n})),[`${fPe}`]:We(((e,{payload:n})=>{e.liveTransEngineType=n})),[`${pPe}`]:We((e=>{e.stateBeforeFailover=void 0})),[`${hPe}`]:We(((e,{payload:n})=>{e.lastManualCaption=n})),[`${vPe}`]:We(((e,{payload:n})=>{e.isSomeoneSetSessionTranscription=n})),[`${bPe}`]:We(((e,{payload:n})=>{e.isSomeoneTranslating=n})),[`${yPe}`]:We(((e,{payload:n})=>{e.isTranscriptionLanguageLocked=n})),[`${SPe}`]:We(((e,{payload:n})=>{e.isExternalCaptionerCaptioning=n})),[`${CPe}`]:We(((e,{payload:n})=>{e.externalCcUrl=n})),[`${EPe}`]:We(((e,{payload:n})=>{e.transcriptionMode=n})),[`${mPe}`]:(e,{payload:n})=>n?{...Rpe,stateBeforeFailover:{currentTranscriptionLang:e.currentTranscriptionLang,currentTranslationLang:e.currentTranslationLang,isLiveTranscriptionSubscribed:e.isLiveTranscriptionSubscribed,transcriptionMode:e.transcriptionMode},messageRecords:e.messageRecords,isRecordsReduced:e.isRecordsReduced,reducedRecordsCount:e.reducedRecordsCount}:{...Rpe}},Rpe);var Oa;const Xg=zr.createAgent(),WC=ff("Live transcription");let gje=(Oa=class extends Q0{startLiveTranscription(){const{[go]:e,[Ja]:n}=this,{liveTranscription:{isLiveTranscriptionEnabled:r,isEnableTranslatedCaptions:i,isLiveTranscriptionSubscribed:l,isHostDisableCaptions:f}}=e();return l?Promise.resolve(""):f?Promise.reject({type:Lt,reason:"Captions has been disabled by host.",errorCode:Fe.TRANSCRIPTION_FEATURE_DISABLE}):r?(Xg.enableNewLLT(),Cs(nv).then((()=>{const{liveTranscription:{currentTranscriptionLang:h,transcriptionMode:v,isSomeoneSetSessionTranscription:y}}=e(),_=h??lb.English;return KY(h,v===cL.Session&&!y,{state:e(),rwgAgent:Xg}),n(IA(_)),i&&Xg.setTranslationLanguage(),Cs({event:nv,operations:[Gt((A=>A.autoCaption===!0&&A.lang!==void 0)),Ys(1)]})}))):Promise.reject({type:Lt,reason:"Live transcription is not enabled.",errorCode:Fe.TRANSCRIPTION_ACCOUNT_DISABLE})}disableCaptions(e){const{[go]:n}=this,{liveTranscription:{isHostDisableCaptions:r}}=n();return e===r?Promise.resolve():(Xg.disableCaptions(e),Cs(ebe,(i=>i===e)))}setSpeakingLanguage(e,n){const{[go]:r,[Ja]:i}=this,l=r(),{liveTranscription:{isLiveTranscriptionSubscribed:f,transcriptionLang:h,isTranscriptionLanguageLocked:v}}=l,y=Do(l);if(v&&(y==null||!y.isHost))return Promise.reject({type:Lt,reason:"Transcription language has been locked, only host can set the language.",errorCode:Fe.TRANSCRIPTION_LANGUAGE_LOCKED});const _=h.find((A=>A.lang===e));if(_){const{code:A}=_;return(n==null?void 0:n.mode)===cL.Session?f&&KY(A,!0,{state:l,rwgAgent:Xg}):KY(A,!1,{state:l,rwgAgent:Xg}),i(IA(A)),n!=null&&n.mode&&i(EPe(n.mode)),Promise.resolve("")}return Promise.reject({type:gs,reason:"Unsupported transcription language",errorCode:Fe.TRANSCRIPTION_LANGUAGE_UNSUPPORTED})}setTranslationLanguage(e){const{[go]:n,[Ja]:r}=this,i=n(),{liveTranscription:{isEnableTranslatedCaptions:l,isLiveTranscriptionSubscribed:f,translationLang:h}}=i;if(!l)return Promise.reject({type:Lt,reason:"Live translation is not enabled.",errorCode:Fe.TRANSLATION_ACCOUNT_DISABLE});if(!f)return Promise.reject({type:Lt,reason:"Cannot set translation language before starting live transcription",errorCode:Fe.TRANSCRIPTION_MISMATCH_STATE});if(e){const v=h==null?void 0:h.find((y=>y.lang===e));return v?(Xg.setTranslationLanguage(v.code),Cs({event:nv,operations:[Gt((y=>y.autoCaption===!0&&y.lang===v.code)),Ys(1)]},(({lang:y})=>y===v.code))):Promise.reject({type:Lt,reason:`Cannot support translating to ${e}`,errorCode:Fe.TRANSLATION_LANGUAGE_UNSUPPORTED})}return Xg.setTranslationLanguage(),r($X(void 0)),Promise.resolve("")}lockTranscriptionLanguage(e){const{[go]:n}=this,{liveTranscription:{isTranscriptionLanguageLocked:r,isEnableTranslatedCaptions:i}}=n();return i?Promise.reject({type:Lt,reason:"Cannot lock transcription language due to translation is enabled",errorCode:Fe.TRANSCRIPTION_MISMATCH_STATE}):e!==r?(Xg.lockTranscriptionLanguage(e),Cs(tbe,(l=>l===e))):Promise.resolve("")}enableManualCaptioner(){const{[go]:e}=this,{meeting:{meetingOptions:n},liveTranscription:{isManualCaptionerEnabled:r,isHostDisableCaptions:i}}=e();if(i)return Promise.reject({type:Lt,reason:"Captions has been disabled by host.",errorCode:Fe.MANUAL_CAPTION_FEATURE_DISABLE});const{isEnableManualCaptions:l,isEnableClosedCaption:f}=n;return l??f?r?Promise.resolve():(Xg.enableManualCaption(!0),Cs(nv,(({autoCaption:h})=>h===!1))):Promise.reject({type:Lt,reason:"Manual caption is not enabled.",errorCode:Fe.MANUAL_CAPTION_ACCOUNT_DISABLE})}disableManualCaptioner(){const{[go]:e}=this,{liveTranscription:{isManualCaptionerEnabled:n}}=e();return n?(Xg.enableManualCaption(!1),Cs(nv,(({autoCaption:r})=>r===!0))):Promise.resolve()}assignManualCaption(e){var n;const{[go]:r}=this,i=r(),{liveTranscription:{isManualCaptionerEnabled:l},participants:{attendeesList:f},meeting:{userId:h}}=i;return l?((n=zAe(i))===null||n===void 0?void 0:n.userId)===e?Promise.resolve(""):f.find((y=>y.userId===e))?(Xg.assignCC(e,!0),Cs({event:h===e?uf:Y0,operations:[Gt((y=>y.userId===e)),Ys(1)]},(y=>y.bCCEditor===!0))):Promise.reject({type:gs,reason:"Cannot find the user",errorCode:Fe.MANUAL_CAPTION_MISMATCH_USER}):Promise.reject({type:Lt,reason:"Cannot assign caption editor due to the manual captioner is not enabled.",errorCode:Fe.MANUAL_CAPTION_FEATURE_DISABLE})}sendCaptionTextManually(e,n){var r;const{[go]:i,[Ja]:l}=this,f=i(),{liveTranscription:{lastManualCaption:h},meeting:{userId:v}}=f,y=Do(f);let _=Promise.resolve();const A=(r=zAe(f))===null||r===void 0?void 0:r.userId;return y!=null&&y.isHost&&A!==v&&(_=this.assignManualCaption(v)),_.then((()=>hje(i())?(function(R,k,N){const L=R.length,B=[];var H;if(N)B.push({op:"close",text:R,msgId:(H=k==null?void 0:k.msgId)!==null&&H!==void 0?H:YJ()});else if(k&&k!=null&&k.text){const q=k.text.length;let Y=0,K=0;for(;R[Y]===k.text[Y]&&Y<L;)K+=eDe(R[Y]),Y+=1;Y===q&&Y===L?B.push({op:"same"}):Y===q&&Y<L?B.push({op:"insert",text:R.slice(Y),size:0,pos:K,msgId:k.msgId}):Y<q&&Y===L?B.push({op:"delete",size:0,pos:K,msgId:k.msgId}):(B.push({op:"delete",size:0,pos:K,msgId:k.msgId}),B.push({op:"insert",text:R.slice(Y),pos:K,msgId:k.msgId}))}else L>0&&B.push({op:"start",text:R,pos:0,size:0,msgId:YJ()});return B.filter((q=>q.op!=="same"))})(e,h,n):Promise.reject({type:hf,reason:"Cannot type caption ",errorCode:Fe.MANUAL_CAPTION_INSUFFICIENT_PRIVILEGE}))).then((R=>Array.isArray(R)?(R.forEach((k=>{const{text:N,...L}=k;xd.beginEncrypt({text:N??"",type:Rd.CC_MESSAGE}).then((B=>{Xg.sendManualCaption({text:B,...L});const H=n?void 0:{text:N,msgId:k.msgId};l(hPe(H))}))})),Cs(XU,(k=>k.source===lA.InMeetingManual))):""))}getLiveTranscriptionStatus(){const{[go]:e}=this,{liveTranscription:{isLiveTranscriptionEnabled:n,isEnableTranslatedCaptions:r,isManualCaptionerEnabled:i,transcriptionLang:l,translatedSetting:f,isHostDisableCaptions:h,isTranscriptionLanguageLocked:v}}=e();return{isLiveTranscriptionEnabled:n,isLiveTranslationEnabled:r,isHostDisableCaptions:h,isManualCaptionerEnabled:i,isHostLockTranscriptionLanguage:v,transcriptionLanguage:l.map((y=>y.lang)).join(";"),translationLanguage:f==null?void 0:f.map((y=>({speakingLanguage:y.lang,translatedToLanguage:y.translatedToLanguage.map((_=>_.lang)).join(";")})))}}getLiveTranscriptionSetting(){const{[go]:e}=this,{meeting:{meetingOptions:n}}=e(),{isEnableManualCaptions:r,isEnableLiveTranscription:i,isEnableClosedCaption:l,isEnableAllowThirdPartyCCToken:f,isEnableViewFullTranscript:h,isEnableSaveCaptions:v}=n||{};return{isEnableManualCaptions:r,isEnableLiveTranscription:i,isEnableClosedCaption:l,isEnableAllowThirdPartyCCToken:f,isEnableViewFullTranscript:h,isEnableSaveCaptions:v}}getCurrentTranscriptionLanguage(){const{[go]:e}=this,{liveTranscription:{currentTranscriptionLang:n}}=e();return n!==void 0?{code:jAe[n],name:qX[n]}:null}getCurrentTranslationLanguage(){const{[go]:e}=this,{liveTranscription:{currentTranslationLang:n}}=e();return n!==void 0?{code:jAe[n],name:qX[n]}:null}getLatestTranscription(){const{[go]:e}=this,{liveTranscription:{messageRecords:n,isManualCaptionerEnabled:r}}=e(),i=r?lb.DefaultManualInput:lb.NoTranslation,l=n.filter((f=>f.language===i));return l.length?l[l.length-1].text:""}getLatestTranslation(){const{[go]:e}=this,{liveTranscription:{messageRecords:n,currentTranslationLang:r,isEnableTranslatedCaptions:i}}=e();if(i||r!==void 0){const l=n.filter((f=>f.language===r));return l.length?l[l.length-1].text:""}return""}getFullTranscriptionHistory(){const{[go]:e}=this,n=e(),{liveTranscription:{messageRecords:r,isRecordsReduced:i}}=n;return i?(function(l){return window.indexedDB!==void 0?new Promise((f=>{const h=window.indexedDB.open(qY,1);h.addEventListener("success",(()=>{const v=h.result;if(v.objectStoreNames.contains(JC)){const y=v.transaction([JC],"readonly").objectStore(JC),_=[],A=l.meeting.meetingId,R=y.index("mid"),k=IDBKeyRange.only(A),N=R.openCursor(k);N.onsuccess=()=>{const L=N.result;L?(_.push(...L.value.records),L.continue()):(f(_),v.close())},N.onerror=()=>{f(""),v.close()}}else f("")})),h.addEventListener("error",(()=>{f("")}))})):Promise.resolve("")})(n).then((l=>Array.isArray(l)?l.concat(r):[...r])):[...r]}getManualCaptionEditor(){const{[go]:e}=this,n=e(),{closedCaption:{editorId:r}}=n;let i;if(!r)return{};if(i=Ai(n).find((A=>A.userId===r)),!i)return{};const{userId:l,isHost:f,displayName:h,avatar:v,bCoHost:y,zoomID:_}=i;return{userId:l,isHost:f,displayName:h,avatar:v,bCoHost:y,zoomID:_}}getManualCaptionUrl(){const{[go]:e}=this,{meeting:{meetingOptions:n,ccUrl:r,confId:i},breakoutRoom:l,liveTranscription:{externalCcUrl:f}}=e(),{isEnableManualCaptions:h,isEnableAllowThirdPartyCCToken:v}=n||{};if(!h||!v)return console.warn("you not enable manual caption"),"";const y=f||r;return l&&eh(e())?`${y}&${new URLSearchParams({subconfid:i}).toString()}`:y}},fn(Oa.prototype,"startLiveTranscription",[hn,WC],Object.getOwnPropertyDescriptor(Oa.prototype,"startLiveTranscription"),Oa.prototype),fn(Oa.prototype,"disableCaptions",[El,hn,WC],Object.getOwnPropertyDescriptor(Oa.prototype,"disableCaptions"),Oa.prototype),fn(Oa.prototype,"setSpeakingLanguage",[hn,WC],Object.getOwnPropertyDescriptor(Oa.prototype,"setSpeakingLanguage"),Oa.prototype),fn(Oa.prototype,"setTranslationLanguage",[hn,WC],Object.getOwnPropertyDescriptor(Oa.prototype,"setTranslationLanguage"),Oa.prototype),fn(Oa.prototype,"lockTranscriptionLanguage",[El,hn,WC],Object.getOwnPropertyDescriptor(Oa.prototype,"lockTranscriptionLanguage"),Oa.prototype),fn(Oa.prototype,"enableManualCaptioner",[El,hn,WC],Object.getOwnPropertyDescriptor(Oa.prototype,"enableManualCaptioner"),Oa.prototype),fn(Oa.prototype,"disableManualCaptioner",[El,hn,WC],Object.getOwnPropertyDescriptor(Oa.prototype,"disableManualCaptioner"),Oa.prototype),fn(Oa.prototype,"assignManualCaption",[hn,El,WC],Object.getOwnPropertyDescriptor(Oa.prototype,"assignManualCaption"),Oa.prototype),fn(Oa.prototype,"sendCaptionTextManually",[hn,WC],Object.getOwnPropertyDescriptor(Oa.prototype,"sendCaptionTextManually"),Oa.prototype),Oa);const vje={epics0:e=>e.pipe(co(`${om}`),Kn((n=>{const{payload:{liveTranscription:r}}=n;return aPe(r)}))),epics1:(e,n)=>oo(e,av).pipe(Gt((r=>{var i,l;return((i=r.payload.body)===null||i===void 0?void 0:i.NewLttAvaliable)!==void 0||((l=r.payload.body)===null||l===void 0?void 0:l.LiveTransEngineType)!==void 0})),Kn((r=>{const{payload:{body:{NewLttAvaliable:i,LiveTransEngineType:l}}}=r,{liveTranscription:{isEnableAutomatedCaptions:f}}=n.value;return i!==void 0?(He(b2e,!!i),iPe(f&&!!i)):fPe(l)}))),epics2:(e,n)=>oo(e,7982).pipe(Nt((r=>{const{payload:{body:{status:i,gwId:l}}}=r,f=[];switch(i){case ZZ.Ready:f.push(cPe(l));break;case ZZ.ManualCaptionerEnabled:He(nv,{autoCaption:!1}),f.push(_ge(!0));break;case ZZ.ManualCaptionerDisabled:He(nv,{autoCaption:!0}),f.push(BNe({editorId:"",isEditor:!1,editorZoomId:""})),f.push(_ge(!1));break;case ZZ.UserSub:{He(nv,{autoCaption:n.value.liveTranscription.isLiveTranscriptionEnabled});const{liveTranscription:{stateBeforeFailover:v,transcriptionMode:y,isSomeoneSetSessionTranscription:_}}=n.value;if(v!=null&&v.isLiveTranscriptionSubscribed){var h;Ipe.enableNewLLT();const A=(h=v.currentTranscriptionLang)!==null&&h!==void 0?h:lb.English;KY(v.currentTranscriptionLang,y===cL.Session&&!_,{state:n.value,rwgAgent:Ipe}),f.push(IA(A)),v.currentTranslationLang!==void 0&&Ipe.setTranslationLanguage(v.currentTranslationLang),f.push(pPe())}break}}return An(f)}))),epics3:e=>oo(e,7984).pipe(Kn((n=>{const{payload:{body:{langs:r}}}=n;return lPe(r)}))),epics4:e=>oo(e,8011).pipe(Nt((n=>{const{payload:{body:{disabled:r}}}=n,i=[];return He(ebe,r),i.push(gPe(r)),r&&i.push(wge(!1)),An(i)}))),epics5:(e,n)=>oo(e,7985).pipe(Gt((r=>{var i;return((i=r.payload.body)===null||i===void 0?void 0:i.success)===!0})),Nt((r=>{const{payload:{body:{src:i,lang:l,success:f}}}=r,{liveTranscription:{transcriptionLang:h}}=n.value,v=[];var y;return f&&v.push(wge(!0)),i===lA.ASR?(l===lb.NoTranslation?v.push($X(void 0)):v.push($X(l)),He(nv,{autoCaption:!0,lang:l,language:(y=h.find((_=>_.code===l)))===null||y===void 0?void 0:y.lang})):[lA.InMeetingManual,lA.ExternalCaptioner].includes(i)&&He(nv,{autoCaption:!1}),An(v)}))),epics6:(e,n)=>oo(e,7986).pipe(_o(n),Nt((([r,i])=>{const l=Do(i),{liveTranscription:{currentTranscriptionLang:f,isSomeoneSetSessionTranscription:h,transcriptionLang:v}}=i,{payload:{body:y}}=r,_=[vPe(!0)];if((y==null?void 0:y.lang)!==void 0){const{lang:R}=y,k=f!==R;var A;h&&!k||He(nv,{autoCaption:!0,sessionLang:R,sessionLanguage:(A=v.find((N=>N.code===R)))===null||A===void 0?void 0:A.lang}),(l==null?void 0:l.audio)===Ur.Computer&&k&&Lge(R),_.push(IA(R))}return An(_)}))),epics7:(e,n)=>bs(e,Cn.JoinComputerAudioComplete).pipe(Gt((()=>{const{liveTranscription:{transcriptionMode:r,isLiveTranscriptionSubscribed:i,currentTranscriptionLang:l}}=n.value;return l!==void 0&&(r===cL.Individual||r===cL.Session&&i)})),ao((()=>{const{liveTranscription:{currentTranscriptionLang:r}}=n.value;r&&Lge(r)})),Xp()),epics8:(e,n)=>oo(e,7983).pipe(Gt((r=>r.payload.body!==void 0)),Nt((r=>{const{payload:{body:{msgType:i,errorCode:l,language:f,source:h,content:v,keyNodeId:y,msgId:_,nodeId:A,pos:R,size:k,audioLanguage:N}}}=r;if(i===nA.Error){if(l===UAe.TranslateNotSupport){const{liveTranscription:{currentTranslationLang:L}}=n.value;L&&He(XU,{error:UAe.TranslateNotSupport,errorMessage:`${qX[N]} to ${qX[L]} translation is not supported!`,audioLanguage:N,translationLang:L})}}else{const L=n.value,B=Ai(L),{liveTranscription:{isManualCaptionerEnabled:H}}=L;if(H&&h===lA.ASR)return Promise.resolve();if((function(q,Y){const{liveTranscription:{isEnableTranslatedCaptions:K,isLiveTranscriptionEnabled:se},meeting:{meetingOptions:ie}}=Y,{isEnableManualCaptions:le,isEnableAllowHostAssignTypeCC:M,isEnableClosedCaption:we,isEnableAllowThirdPartyCCToken:Ne}=ie;return q===lA.ASR?K||se:q===lA.InMeetingManual?le&&M||le===void 0&&we:q===lA.ExternalCaptioner?Ne:void 0})(h,L)&&v&&y){const q=pje(L)[y];if(q)return xd.beginDecrypt({decryptedText:v,type:Rd.CC_MESSAGE,zoomId:q}).then((({message:Y})=>{const{liveTranscription:{messageRecords:K}}=n.value,se=[],ie=K.find((le=>le.msgId===_));if(ie){const{text:le}=ie,M=((Ne,De)=>{if(!Ne||De===0)return"";let be=0;for(let me=0;me<Ne.length;me++)if(be+=eDe(Ne[me]),be===De)return Ne.slice(0,me+1);return Ne})(le,R);let we;i===nA.Insert&&k===0||i===nA.Delete&&k===0?we={...ie,text:M+Y,msgType:i}:i===nA.Close&&(we={...ie,text:Y,msgType:i,done:!0}),we&&(se.push(uPe(we)),He(XU,we))}else if([nA.New,nA.Close].includes(i)||H&&i===nA.Insert){const le=B.find((we=>we.userId===A)),M={msgId:_,userId:A,displayName:le==null?void 0:le.displayName,avatar:le==null?void 0:le.avatar,text:Y,source:h,language:f,timestamp:new Date().getTime(),done:i===nA.Close};se.push(Age({...M,msgType:i})),He(XU,M)}return se}))}}return Promise.resolve()})),Nt((r=>Array.isArray(r)?An(r):Yn))),epics9:(e,n)=>e.pipe(co(`${Age}`),al(mE),Nt((()=>{const{liveTranscription:{messageRecords:r}}=n.value;return r.length>=1e5?(function(i){const{meeting:{meetingId:l},liveTranscription:{messageRecords:f,reducedRecordsCount:h}}=i;return window.indexedDB!==void 0?new Promise((v=>{const y=window.indexedDB.open(qY,1);y.addEventListener("upgradeneeded",(()=>{const _=y.result;if(!_.objectStoreNames.contains(JC)){const A=_.createObjectStore(JC,{keyPath:["startIndex","mid"],autoIncrement:!1});A.createIndex("mid","mid",{unique:!1}),A.transaction.oncomplete=()=>{console.log(`Create objectStore [${JC}] complete`)}}})),y.addEventListener("success",(()=>{const _=y.result,A=f.length,R=.9*A,k=A-R,N=f.slice(0,R),L=h+N.length,B=_.transaction([JC],"readwrite");B.objectStore(JC).put({startIndex:h,mid:l,records:N}),B.oncomplete=()=>{v(dPe({remains:k,reducedRecordsCount:L})),_.close()},B.onerror=()=>{v(""),_.close()}}))})):Promise.resolve("")})(n.value):Promise.resolve("")})),Gt((r=>typeof r=="object"))),epics10:(e,n)=>e.pipe(co(`${z2}`,`${kL}`),Gt((()=>n.value.liveTranscription.isRecordsReduced)),ao((()=>{(function(){if(window.indexedDB!==void 0){const r=window.indexedDB.open(qY,1);r.addEventListener("success",(()=>{const i=r.result;i.objectStoreNames.contains(JC)&&(window.indexedDB.deleteDatabase(qY),i.close())}))}})()})),Xp()),epics11:(e,n)=>bs(e,[Cn.AudiobridgeSetCcLangSuccess,Cn.AudiobridgeSetCcLangFailure]).pipe(Nt((r=>{const{payload:{type:i,data:l}}=r,{liveTranscription:{currentTranscriptionLang:f}}=n.value,h=[];return i===Cn.AudiobridgeSetCcLangSuccess&&l!==f?h.push(IA(l)):i===Cn.AudiobridgeSetCcLangFailure&&h.push(IA(void 0)),An(h)}))),epics12:e=>oo(e,8014).pipe(Gt((n=>!!n.payload.body)),Nt((n=>{const{payload:{body:{delivered:r,type:i}}}=n,l=[];return i==="translationstarted"?r&&(l.push(bPe(!0)),He(nv,{autoCaption:!0,translationStarted:!0})):i==="meetinglanglocked"?(l.push(yPe(r)),He(tbe,r)):i==="tcap"&&r&&l.push(SPe(!0)),An(l)}))),epics13:e=>oo(e,8026).pipe(Gt((n=>{var r;return!((r=n.payload.body)===null||r===void 0||!r.url)})),Kn((n=>CPe(n.payload.body.url)))),epics14:e=>oo(e,8027).pipe(Kn((n=>{var r;return IA((r=n.payload.body)===null||r===void 0?void 0:r.speaking_language_id)})))},bje=nh(vje),WAe={isLiveStreamEnable:!1,status:0,channelName:"",viewerUrl:"",liveStreamOn:!1},yje=op({[`${APe}`]:We(((e,{payload:n})=>{e.isLiveStreamEnable=n})),[`${jX}`]:We(((e,{payload:n})=>{e.status=n})),[`${TPe}`]:We(((e,{payload:n})=>{e.channelName=n.channelName,e.viewerUrl=n.viewerUrl,e.liveStreamOn=n.liveStreamOn})),[`${OPe}`]:(e,{payload:n})=>n?{...e}:{...WAe}},WAe);let oA=(function(e){return e[e.Ended=0]="Ended",e[e.InProgress=1]="InProgress",e[e.Connecting=2]="Connecting",e[e.Timeout=3]="Timeout",e})({});var sA;const GAe=zr.createAgent();let Sje=(sA=class extends Q0{startLiveStream(e,n,r){const{[go]:i,[Ja]:l}=this,{liveStream:{isLiveStreamEnable:f,status:h},meeting:{zlkJwtToken:v}}=i();return v?h===oA.InProgress?Promise.reject({type:Lt,reason:"Live stream is already on",errorCode:Fe.LIVE_STREAM_MISMATCH_STATE}):f?e&&n&&r?(GAe.startLiveStream(e,n,r),Cs({event:e5,operations:[Gt((y=>y===oA.InProgress)),Ys(1)]},void 0,3e4).then((()=>"")).catch((()=>{const{liveStream:{status:y}}=i();return y===oA.Connecting?(He(e5,oA.Timeout),l(jX(oA.Timeout)),Promise.reject({type:Wu,errorCode:Fe.INTERNAL_ERROR})):Promise.resolve("")}))):Promise.reject({type:gs,reason:"parameter cannot be empty",errorCode:Fe.LIVE_STREAM_INVALID_PARAMETER}):Promise.reject({type:Lt,reason:"Live stream is not enabled",errorCode:Fe.LIVE_STREAM_ACCOUNT_DISABLE}):Promise.reject({type:Lt,reason:"meeting sdk don't support start live stream use startLiveStream",errorCode:Fe.LIVE_STREAM_INVALID_PARAMETER})}stopLiveStream(){const{[go]:e,[Ja]:n}=this,{liveStream:{status:r}}=e();return r===oA.InProgress&&(GAe.stopLiveStream(),He(e5,oA.Ended),n(jX(oA.Ended))),Promise.resolve("")}getLiveStreamInfo(){const e=this[go](),{meeting:{liveStreamInfo:n,zlkJwtToken:r,isHost:i}}=e;return r?(console.warn("video sdk don't support get live stream info"),null):i?n&&Object.keys(n).length!==0?n:(console.warn("can not get live stream info"),null):(console.warn("only host get live stream info"),null)}isLiveStreamEnabled(){const{[go]:e}=this,{liveStream:n,meeting:{liveStreamInfo:r,zlkJwtToken:i}}=e();return(i||(r==null?void 0:r.isEnabledLiveStream))&&!(n==null||!n.isLiveStreamEnable)}getLiveStreamStatus(){const{[go]:e}=this,{liveStream:{liveStreamOn:n,channelName:r,viewerUrl:i,status:l}}=e();return{liveStreamOn:n,channelName:r,viewerUrl:i,status:l}}},fn(sA.prototype,"startLiveStream",[El],Object.getOwnPropertyDescriptor(sA.prototype,"startLiveStream"),sA.prototype),fn(sA.prototype,"stopLiveStream",[El],Object.getOwnPropertyDescriptor(sA.prototype,"stopLiveStream"),sA.prototype),sA);const Cje=nh({epics0:e=>e.pipe(co(`${om}`),Kn((n=>{const{payload:{liveStreamInfo:r}}=n;return APe(!(r==null||!r.isEnabledLiveStream))}))),epics1:e=>oo(e,7970).pipe(Nt((n=>{const{payload:{body:{channelName:r,liveStreamOn:i,_isApiCall:l,status:f,viewerUrl:h}}}=n;return He(e5,f),An([TPe({channelName:r,viewerUrl:h,liveStreamOn:i}),jX(f)])})))}),{setSummaryEnable:YPe,setSmartSummaryStatus:JPe,resetSummary:Eje}=Ql("SET_SUMMARY_ENABLE","SET_SMART_SUMMARY_STATUS","RESET_SUMMARY"),{setMeetingQueryEnable:XPe,setMeetingQueryStatus:QPe}=Ql("SET_MEETING_QUERY_ENABLE","SET_MEETING_QUERY_STATUS");let RA=(function(e){return e.Default="",e.Start="Start",e.Paused="Paused",e.Stopped="Stopped",e})({}),VA=(function(e){return e[e.GW_IND_NONE=0]="GW_IND_NONE",e[e.GW_IND_START=1]="GW_IND_START",e[e.GW_IND_PAUSE=2]="GW_IND_PAUSE",e[e.GW_IND_STOP=3]="GW_IND_STOP",e})({}),xA=(function(e){return e.Default="",e.Start="Start",e.Paused="Paused",e.Stopped="Stopped",e})({}),HA=(function(e){return e[e.GW_IND_NONE=0]="GW_IND_NONE",e[e.GW_IND_START=1]="GW_IND_START",e[e.GW_IND_PAUSE=2]="GW_IND_PAUSE",e[e.GW_IND_STOP=3]="GW_IND_STOP",e})({});const qAe={summaryStatus:VA.GW_IND_STOP,summaryEnable:!1,meetingQueryStatus:HA.GW_IND_STOP,meetingQueryEnable:!1},_je=op({[`${YPe}`]:We(((e,{payload:n})=>{e.summaryEnable=n})),[`${JPe}`]:We(((e,{payload:n})=>{e.summaryStatus=n})),[`${XPe}`]:We(((e,{payload:n})=>{e.meetingQueryEnable=n})),[`${QPe}`]:We(((e,{payload:n})=>{e.meetingQueryStatus=n})),[`${Eje}`]:()=>({...qAe})},qAe);var KAe,ZAe,YAe,JAe,Qg;const YZ=zr.createAgent();let wje=(KAe=ro("summary"),ZAe=ro("summary"),YAe=ro("summary"),JAe=ro("summary"),fn((Qg=class extends Q0{startSummary(){const e=this[go](),{summary:{summaryEnable:n,summaryStatus:r}}=e;return n?r===VA.GW_IND_START?Promise.resolve(""):(YZ.summaryMeeting(!0),Cs(EA,(i=>i.status===RA.Start))):Promise.reject({type:Lt,reason:"The account of the meeting disabled the smart summary",errorCode:Fe.SUMMARY_ACCOUNT_DISABLE})}stopSummary(){const e=this[go](),{summary:{summaryStatus:n}}=e;return n!==VA.GW_IND_START?Promise.resolve("not start summary, do nothing"):(YZ.summaryMeeting(!1),Cs(EA,(r=>r.status===RA.Stopped)))}getSummaryStatus(){const e=this[go](),{summary:{summaryStatus:n}}=e;return n===VA.GW_IND_START?RA.Start:n===VA.GW_IND_STOP?RA.Stopped:RA.Default}isSummaryEnabled(){const e=this[go](),{summary:{summaryEnable:n}}=e;return n}startMeetingQuery(){const e=this[go](),{summary:{meetingQueryEnable:n,meetingQueryStatus:r}}=e;return n?r===HA.GW_IND_START?Promise.resolve(""):(YZ.startMeetingQuery(!0),Cs(_A,(i=>i.status===xA.Start))):Promise.reject({type:Lt,reason:"The account of the meeting disabled the smart summary",errorCode:Fe.SUMMARY_ACCOUNT_DISABLE})}stopMeetingQuery(){const e=this[go](),{summary:{meetingQueryStatus:n}}=e;return n!==HA.GW_IND_START?Promise.resolve("not start meeting query, do nothing"):(YZ.startMeetingQuery(!1),Cs(_A,(r=>r.status===xA.Stopped)))}getMeetingQueryStatus(){const e=this[go](),{summary:{meetingQueryStatus:n}}=e;return n===HA.GW_IND_START?xA.Start:n===HA.GW_IND_STOP?xA.Stopped:xA.Default}isMeetingQueryEnabled(){const e=this[go](),{summary:{meetingQueryEnable:n}}=e;return n}}).prototype,"startSummary",[El,hn,KAe],Object.getOwnPropertyDescriptor(Qg.prototype,"startSummary"),Qg.prototype),fn(Qg.prototype,"stopSummary",[El,hn,ZAe],Object.getOwnPropertyDescriptor(Qg.prototype,"stopSummary"),Qg.prototype),fn(Qg.prototype,"startMeetingQuery",[El,hn,YAe],Object.getOwnPropertyDescriptor(Qg.prototype,"startMeetingQuery"),Qg.prototype),fn(Qg.prototype,"stopMeetingQuery",[El,hn,JAe],Object.getOwnPropertyDescriptor(Qg.prototype,"stopMeetingQuery"),Qg.prototype),Qg);const Aje=nh({moduleEpics0:e=>oo(e,8007).pipe(Gt((n=>{var r;return((r=n.payload.body)===null||r===void 0?void 0:r.supported)!==void 0})),Kn((n=>{const{supported:r}=n.payload.body;return He(EA,{supported:r}),YPe(r)}))),moduleEpics1:(e,n)=>oo(e,8008).pipe(Gt((r=>{var i;return((i=r.payload.body)===null||i===void 0?void 0:i.status)!==void 0})),_o(n),Nt((([r,i])=>{const{status:l}=r.payload.body,{summary:{summaryStatus:f}}=i,h=[];if(l!==f)switch(l){case VA.GW_IND_START:He(EA,{status:RA.Start});break;case VA.GW_IND_PAUSE:He(EA,{status:RA.Paused});break;case VA.GW_IND_STOP:He(EA,{status:RA.Stopped});break;default:He(EA,{status:""})}return h.push(JPe(l)),An(h)}))),moduleEpics2:(e,n)=>oo(e,8015).pipe(Gt((r=>{var i;return((i=r.payload.body)===null||i===void 0?void 0:i.supported)!==void 0})),_o(n),Kn((([r,i])=>{const{supported:l}=r.payload.body;He(_A,{supported:l});const{meeting:{zlkJwtToken:f}}=i;if(f){const{auto_transcription:h}=bE(f);h&&(l?zr.createAgent().startMeetingQuery(!0):console.warn("You account don't support auto transcription"))}return XPe(l)}))),moduleEpics3:(e,n)=>oo(e,8016).pipe(Gt((r=>{var i;return((i=r.payload.body)===null||i===void 0?void 0:i.status)!==void 0})),_o(n),Nt((([r,i])=>{const{status:l}=r.payload.body,{summary:{meetingQueryStatus:f}}=i,h=[];if(l!==f)switch(l){case HA.GW_IND_START:He(_A,{status:xA.Start});break;case HA.GW_IND_PAUSE:He(_A,{status:xA.Paused});break;case HA.GW_IND_STOP:He(_A,{status:xA.Stopped});break;default:He(_A,{status:""})}return h.push(QPe(l)),An(h)})))});let $0=(function(e){return e[e.Init=0]="Init",e[e.Pending=1]="Pending",e[e.InProgress=2]="InProgress",e[e.Closing=3]="Closing",e[e.Closed=4]="Closed",e})({}),KX=(function(e){return e[e.Start=1]="Start",e[e.Stop=2]="Stop",e})({});const Tje=Dd.getInstance();function f5(e){Tje.report(e,["Broadcast streaming"])}const XAe={utk:"",status:$0.Init,channelId:"",channelName:"",isBroadcastStreamingEnable:!1},Oje=op({[`${IPe}`]:(e,n)=>We(e,(r=>{r.utk=n.payload})),[`${j5}`]:(e,n)=>We(e,(r=>{const{channelId:i,channelName:l}=n.payload;r.channelId=i,r.channelName=l})),[`${Tge}`]:(e,n)=>We(e,(r=>{r.status=n.payload})),[`${RPe}`]:(e,n)=>We(e,(r=>{r.isBroadcastStreamingEnable=n.payload})),[`${xPe}`]:(e,{payload:n})=>n?{...e}:{...XAe}},XAe);var rA;const QAe=zr.createAgent(),eTe=ff("Broadcast streaming");let Ije=(rA=class extends Q0{startBroadcast(){const{[go]:e,[Ja]:n}=this,{broadcastStreaming:{isBroadcastStreamingEnable:r,status:i},meeting:{meetingNumber:l,topic:f,lang:h},breakoutRoom:v}=e();return r?(v==null?void 0:v.controlStatus)===cr.InProgress&&eh(e())?Promise.reject({type:Lt,reason:"Cannot start broadcast in a breakout room.",errorCode:Fe.BROADCAST_STREAMING_MISMATCH_STATE}):i===$0.Init||i===$0.Closed?(QAe.requestUserInfoToken(4,1),JU(si(Zhe,1).pipe(mr((y=>{const _=`https://${E5()}/live/createAndStartStream`,A=(function(k){return k.slice(0,128).padEnd(5,"*")})(f??""),R={meetingNumber:`${l}`,channelName:A};return Xh({url:_,method:"POST",headers:{utk:y,lang:h,"Content-Type":"application/json"},crossDomain:og(_),body:R}).pipe(Au(vE()),Nt((k=>{const{status:N,errorCode:L,errorMessage:B,result:H}=k.response;return N&&L===0?(n(j5({channelName:A,channelId:H==null?void 0:H.channelId,type:KX.Start})),rr.set(Bi.VIDEO_SDK_BROADCAST_STREAMING_CHANNEL_ID,H==null?void 0:H.channelId,Zr.SessionStorage),Promise.resolve(H.channelId)):(f5(`Start broadcast streaming error: errorCode: ${L}; message:${B},tid:${(q=k.responseHeaders)===null||q===void 0?void 0:q["x-zm-trackingid"]}`),Promise.reject({type:Wu,errorCode:Fe.INTERNAL_ERROR}));var q})),tp((k=>(f5(`Start broadcast streaming error: ${k.name};${k.message}`),Promise.reject({type:Wu,errorCode:Fe.INTERNAL_ERROR})))))}))))):Promise.reject({type:Lt,reason:"Broadcast streaming is already in progress",errorCode:Fe.BROADCAST_STREAMING_MISMATCH_STATE}):Promise.reject({type:Lt,reason:"Broadcast streaming is not enabled",errorCode:Fe.BROADCAST_STREAMING_ACCOUNT_DISABLE})}stopBroadcast(e){const{[go]:n,[Ja]:r}=this,{broadcastStreaming:{status:i,utk:l,channelId:f,channelName:h},meeting:{meetingNumber:v,lang:y}}=n(),_=e||f;if(!_)return Promise.reject({type:gs,reason:"Channel ID is required to stop broadcast streaming",errorCode:Fe.BROADCAST_STREAMING_INVALID_CHANNEL_ID});if(i===$0.InProgress){const A=`https://${E5()}/live/stopStream`,R={meetingNumber:`${v}`,channelId:_};let k=Promise.resolve(l);return l||(QAe.requestUserInfoToken(4,1),k=JU(si(Zhe,1))),k.then((N=>JU(Xh({url:A,method:"POST",headers:{utk:N,lang:y,"Content-Type":"application/json"},crossDomain:og(A),body:R}).pipe(Au(vE()),Nt((L=>{const{status:B,errorCode:H,errorMessage:q}=L.response;return B&&H===0?(r(j5({channelName:h,channelId:_,type:KX.Stop})),Promise.resolve(_)):(f5(`Stop broadcast streaming error: errorCode: ${H}; message:${q}, tid:${(Y=L.responseHeaders)===null||Y===void 0?void 0:Y["x-zm-trackingid"]}`),Promise.reject({type:Wu,errorCode:Fe.INTERNAL_ERROR}));var Y}))))))}return Promise.reject({type:Lt,reason:"Broadcast streaming is not in progress",errorCode:Fe.BROADCAST_STREAMING_MISMATCH_STATE})}getBroadcastStreamingStatus(){const{[go]:e}=this,{broadcastStreaming:{status:n,channelId:r}}=e();return{status:n,channelId:r}}isBroadcastStreamingEnable(){const{[go]:e}=this,{broadcastStreaming:{isBroadcastStreamingEnable:n}}=e();return n}},fn(rA.prototype,"startBroadcast",[hn,El,eTe],Object.getOwnPropertyDescriptor(rA.prototype,"startBroadcast"),rA.prototype),fn(rA.prototype,"stopBroadcast",[hn,El,eTe],Object.getOwnPropertyDescriptor(rA.prototype,"stopBroadcast"),rA.prototype),rA);const Rje=nh({epics0:e=>e.pipe(co(`${om}`),Nt((n=>{const{payload:{enableVsdkInteractiveLiveStream:r}}=n,i=[];i.push(RPe(!!r));const l=rr.get(Bi.VIDEO_SDK_BROADCAST_STREAMING_CHANNEL_ID);return l&&i.push(j5({channelId:l})),An(i)}))),epics1:e=>oo(e,4310).pipe(Nt((n=>{const{payload:{body:r}}=n,i=[];if((r==null?void 0:r.type)===4){const{utk:l}=r;i.push(IPe(l)),He(Zhe,l)}return An(i)}))),epics2:(e,n)=>oo(e,7995).pipe(Nt((r=>{const{payload:{body:{status:i}}}=r,{broadcastStreaming:{status:l}}=n.value,f=[];return i&&l!==$0.InProgress&&(f.push(Tge($0.InProgress)),He(Yhe,{status:$0.InProgress})),An(f)}))),epics3:(e,n)=>e.pipe(co(`${j5}`),Gt((r=>!!r.payload.type)),mr((r=>{const i=`https://${E5()}/live/getStreamState`,{broadcastStreaming:{utk:l},meeting:{meetingNumber:f}}=n.value,{payload:{channelId:h,type:v}}=r,y={meetingNumber:`${f}`,channelId:h};return bSe((()=>Xh({url:i,method:"POST",headers:{utk:l,"Content-Type":"application/json"},crossDomain:og(i),body:y}))).pipe((_=R=>{const{status:k,errorCode:N,result:L}=R.response;if(k&&N===0){const B=v===KX.Start?$0.InProgress:$0.Closed;if((L==null?void 0:L.state)===B)return Di(R)}return bSe((()=>Xh({url:i,method:"POST",headers:{utk:l,"Content-Type":"application/json"},crossDomain:og(i),body:y}))).pipe(p2e((()=>Uc(1e3))))},A===void 0&&(A=1/0),A=(A||0)<1?1/0:A,Xl((function(R,k){return u2e(R,k,_,A,0,!0,void 0)}))),Au(vE()),a2((R=>{const{status:k,errorCode:N,result:L,errorMessage:B}=R.response;if(k&&N===0){const q=v===KX.Start?$0.InProgress:$0.Closed;return(L==null?void 0:L.state)!==q}var H;return f5(`Query broadcast streaming status failed. errorCode: ${N}, errorMessage: ${B},tid:${(H=R.responseHeaders)===null||H===void 0?void 0:H["x-zm-trackingid"]}`),!1}),!0),Kve(6e4),Nt((R=>{const{status:k,errorCode:N,result:L}=R.response,B=[];return k&&N===0&&(He(Yhe,{status:L.state}),B.push(Tge(L.state))),B})),tp((R=>(f5(`Query broadcast streaming status failed. error: ${R.name}; ${R.message}`),Yn))));var _,A})))});var TU;const xje={chat:{epic:X8e,reducer:Z8e,Client:Y8e},logger:{epic:x7e,reducer:T7e,Client:class extends Q0{getLogs(e){return LR.getLogs(this[Ia],e)}getStore(){return LR.doNotUseDirtyGetStore()}setLogOptions(e){e&&this[Ia].dispatch(s0e(e))}isAutoReportInAccountSettingEnabled(){const{meeting:{zlkJwtToken:e,enableAutoLog:n,collectionToggleEnable:r,zsk:i}}=this[Ia].getState();return!!e||(i?n&&r:n)}reportMeetingProblem(e){var n;const{product:r,problem:i,timeOfOccurrence:l,description:f,ticket:h,isLogIncluded:v}=e,{meeting:{userId:y,confId:_,conId:A,svcUrl:R}}=this[Ia].getState(),k=`'product':${r}
'problem':${i}
'timeOfOccurrence':${l}
'description':${f}
'ticketID':${h}
'isLogIncluded':${v?"Logs included":""}
'nodeId':${y}
'confId':${_}
'conId':${A}
'svcUrl':${R}`,N=["REPORT_NOTIFICATION"];return(n=LR.makeLogger(N).logWithExtraProperties("",{IM_NOTIFICATION:`${k}
TrackingId:${LR.trackingId}`}))===null||n===void 0?void 0:n.then((()=>{LR.reportToGlobalTracing(v?void 0:N,!0)}))}reportToGlobalTracing(e){return A7e.beforeReportToGlobalTracing(),LR.reportToGlobalTracing(e,!0)}reportRating(e,n){const{meeting:r,media:i,socket:l}=this[Ia].getState();if(r){var f,h,v,y;const{zlkJwtToken:_,meetingStatus:A}=r,{assetsPath:R,enforceMultipleVideos:k,enforceVirtualBackground:N,disableRenderLimits:L}=i;LR.report(`rating:${e}, feedback:${n}, appKey:${_?(f=bE(_))===null||f===void 0?void 0:f.app_key:""}, CPU:${navigator.hardwareConcurrency}, GPU:${(h=bo.gpu)!==null&&h!==void 0?h:""}, browser:${bo.browser} ${bo.browserVersion}, OS:${bo.os} ${bo.osVersion}, SharedArrayBuffer:${!!bo.isSupportSharedArrayBuffer},
         OffscreenCanvas:${!!bo.isSupportOffscreenCanvas},
         assetPath:${R},
          enforceMultipleVideos:${k},
          disableRenderLimits:${L},
          enforceVirtualBackground:${N}, ${A===Tu.Joined?`session duration:${Math.floor((performance.now()-((v=r==null?void 0:r.pingRWCTimestamp)!==null&&v!==void 0?v:0))/1e3)}, rwg:${l==null||(y=l.rwgServerList)===null||y===void 0||(y=y[l.retryCount])===null||y===void 0?void 0:y.rwg}, failover count:${r==null?void 0:r.failover.count}`:""}`,"User Rating","info"),Number(e)<=2&&this.reportToGlobalTracing()}return Promise.resolve()}}},recording:{epic:P7e,reducer:k7e,Client:M7e},cmd:{epic:$7e,reducer:V7e,Client:H7e},breakoutRoom:{epic:fje,reducer:Z7e,Client:lje},liveTranscription:{epic:bje,reducer:mje,Client:gje},liveStream:{epic:Cje,reducer:yje,Client:Sje},summary:{epic:Aje,reducer:_je,Client:wje},broadcastStreaming:{epic:Rje,reducer:Oje,Client:Ije}},Dje=zr.createAgent();let kje=(TU=class extends V8e{constructor(e){super(e),this.mediaStream=void 0,this[IJ]=xje}getMediaStream(){return this.mediaStream===void 0&&(this.mediaStream=new K7e(this[Ia])),this.mediaStream}joinInstant(e,n,r,i,l,f){const{[go]:h,[Ja]:v}=this,{meeting:{lang:y,meetingStatus:_},socket:{zoomSocketStatus:A}}=h();return n?_!==Tu.Joined&&A===wi.Closed?(v(DL({topic:e==null?void 0:e.toLowerCase(),password:l||"",userName:r,zlk:n,lang:y,cv:i})),f&&v(Mke(f)),aA(s$e.JoinMeeting)):Promise.reject({type:Lt,reason:"duplicated operation",errorCode:Fe.CLIENT_DUPLICATED_JOIN}):Promise.reject({type:gs,reason:"invalid  signature",errorCode:Fe.CLIENT_INVALID_JOIN_PARAMETER})}removeUser(e){const n=this[Ia].getState(),{participants:{attendeesList:r},breakoutRoom:i}=n,l=r.find((f=>f.userId===e));if(l){let f=e;if((i==null?void 0:i.controlStatus)===cr.InProgress&&eh(n)){const h=i.mainSessionAttendeeList.find((v=>v.userGUID===(l==null?void 0:l.userGUID)));h&&(f=h.userId)}return Dje.expel(f),Cs(Jve,(h=>h.some((v=>v.userId===e))))}return Promise.reject({type:gs,reason:"no matched user",errorCode:Fe.CLIENT_MISMATCH_USER})}},fn(TU.prototype,"removeUser",[Bc,hn],Object.getOwnPropertyDescriptor(TU.prototype,"removeUser"),TU.prototype),TU);function p5(e){return p5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},p5(e)}function Mje(e,n,r){return(n=(function(i){var l=(function(f,h){if(p5(f)!="object"||!f)return f;var v=f[Symbol.toPrimitive];if(v!==void 0){var y=v.call(f,h);if(p5(y)!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)})(i,"string");return p5(l)=="symbol"?l:l+""})(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function tTe(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable}))),r.push.apply(r,i)}return r}function nTe(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?tTe(Object(r),!0).forEach((function(i){Mje(e,i,r[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tTe(Object(r)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))}))}return e}function Wp(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var oTe=typeof Symbol=="function"&&Symbol.observable||"@@observable",xpe=function(){return Math.random().toString(36).substring(7).split("").join(".")},ZX={INIT:"@@redux/INIT"+xpe(),REPLACE:"@@redux/REPLACE"+xpe(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+xpe()}};function eLe(e,n,r){var i;if(typeof n=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Wp(0));if(typeof n=="function"&&r===void 0&&(r=n,n=void 0),r!==void 0){if(typeof r!="function")throw new Error(Wp(1));return r(eLe)(e,n)}if(typeof e!="function")throw new Error(Wp(2));var l=e,f=n,h=[],v=h,y=!1;function _(){v===h&&(v=h.slice())}function A(){if(y)throw new Error(Wp(3));return f}function R(N){if(typeof N!="function")throw new Error(Wp(4));if(y)throw new Error(Wp(5));var L=!0;return _(),v.push(N),function(){if(L){if(y)throw new Error(Wp(6));L=!1,_();var B=v.indexOf(N);v.splice(B,1),h=null}}}function k(N){if(!(function(H){if(typeof H!="object"||H===null)return!1;for(var q=H;Object.getPrototypeOf(q)!==null;)q=Object.getPrototypeOf(q);return Object.getPrototypeOf(H)===q})(N))throw new Error(Wp(7));if(N.type===void 0)throw new Error(Wp(8));if(y)throw new Error(Wp(9));try{y=!0,f=l(f,N)}finally{y=!1}for(var L=h=v,B=0;B<L.length;B++)(0,L[B])();return N}return k({type:ZX.INIT}),(i={dispatch:k,subscribe:R,getState:A,replaceReducer:function(N){if(typeof N!="function")throw new Error(Wp(10));l=N,k({type:ZX.REPLACE})}})[oTe]=function(){var N,L=R;return(N={subscribe:function(B){if(typeof B!="object"||B===null)throw new Error(Wp(11));function H(){B.next&&B.next(A())}return H(),{unsubscribe:L(H)}}})[oTe]=function(){return this},N},i}function tLe(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.length===0?function(i){return i}:n.length===1?n[0]:n.reduce((function(i,l){return function(){return i(l.apply(void 0,arguments))}}))}const B0=zr.createAgent(),Nje=Dd.getInstance();let HR,sTe;const Pje=zr.createAgent();let qh=null;var rTe,iTe={exports:{}},Lje=(rTe||(rTe=1,iTe.exports=(function(){function e(i){var l=new Date,f="";return i&&(f+="".concat(l.getMonth()+1,"/").concat(l.getDate(),"/").concat(l.getFullYear()," ")),"[".concat(f).concat(l.getHours(),":").concat(l.getMinutes(),":").concat(l.getSeconds(),".").concat(l.getMilliseconds(),`]:
`)}var n=function(i,l){var f={mode:"cors"};return l&&Object.assign(f,{signal:l}),Promise.any(i.map((function(h){return(function(v,y,_,A){function R(k){return k instanceof _?k:new _((function(N){N(k)}))}return new(_||(_=Promise))((function(k,N){function L(q){try{H(A.next(q))}catch(Y){N(Y)}}function B(q){try{H(A.throw(q))}catch(Y){N(Y)}}function H(q){q.done?k(q.value):R(q.value).then(L,B)}H((A=A.apply(v,[])).next())}))})(void 0,0,void 0,(function(){var v,y,_,A,R;return(function(k,N){var L,B,H,q,Y={label:0,sent:function(){if(1&H[0])throw H[1];return H[1]},trys:[],ops:[]};return q={next:K(0),throw:K(1),return:K(2)},typeof Symbol=="function"&&(q[Symbol.iterator]=function(){return this}),q;function K(ie){return function(le){return se([ie,le])}}function se(ie){if(L)throw new TypeError("Generator is already executing.");for(;Y;)try{if(L=1,B&&(H=2&ie[0]?B.return:ie[0]?B.throw||((H=B.return)&&H.call(B),0):B.next)&&!(H=H.call(B,ie[1])).done)return H;switch(B=0,H&&(ie=[2&ie[0],H.value]),ie[0]){case 0:case 1:H=ie;break;case 4:return Y.label++,{value:ie[1],done:!1};case 5:Y.label++,B=ie[1],ie=[0];continue;case 7:ie=Y.ops.pop(),Y.trys.pop();continue;default:if(!((H=(H=Y.trys).length>0&&H[H.length-1])||ie[0]!==6&&ie[0]!==2)){Y=0;continue}if(ie[0]===3&&(!H||ie[1]>H[0]&&ie[1]<H[3])){Y.label=ie[1];break}if(ie[0]===6&&Y.label<H[1]){Y.label=H[1],H=ie;break}if(H&&Y.label<H[2]){Y.label=H[2],Y.ops.push(ie);break}H[2]&&Y.ops.pop(),Y.trys.pop();continue}ie=N.call(k,Y)}catch(le){ie=[6,le],B=0}finally{L=H=0}if(5&ie[0])throw ie[1];return{value:ie[0]?ie[1]:void 0,done:!0}}})(this,(function(k){switch(k.label){case 0:return k.trys.push([0,3,,4]),[4,fetch(h.url,f)];case 1:if(!(v=k.sent()).ok)throw new Error("HTTP error! status: ".concat(v.status));return[4,v.json()];case 2:return y=k.sent(),_=v.headers.get("call-id"),[2,{response:y,server:h,callId:_}];case 3:throw A=k.sent(),R="server: ".concat(h.domain,", message: ").concat(A.message),new Error(R);case 4:return[2]}}))}))}))).catch((function(h){var v="";return h instanceof AggregateError&&h.errors.forEach((function(y,_){v+="".concat(y.message,`
`)})),Promise.reject(v)}))},r=(function(){function i(){this.MAX_RETRY_TIMES=5}return i.prototype.setRetryTimes=function(l){l===void 0&&(l=5),this.MAX_RETRY_TIMES=l},i.prototype.init=function(l){this.serverList=l,this.delayTime=Array.from(new Set(this.serverList.map((function(f){return f.dl})))),this.excludedServer=[],this.tryTimes=1,this.log="".concat(e(),"initial server list: ").concat(JSON.stringify((function(f){return f.map((function(h){return{domain:h.domain,dl:h.dl,dc:h.dc}}))})(this.serverList)),`
`)},i.prototype.ping=function(l){return this.init(l),this.tryPing()},i.prototype.retry=function(){return this.tryTimes+=1,this.filter(),this.serverList.length===0||this.MAX_RETRY_TIMES>0&&this.tryTimes>this.MAX_RETRY_TIMES?Promise.reject(`no usable RWC any more:
`.concat(this.log)):this.tryPing()},i.prototype.cancelPing=function(){this.abortPingController&&(this.abortPingController.abort(),this.abortPingController=void 0)},i.prototype.tryPing=function(){var l,f=this;this.cancelPing(),this.log+="".concat(e(!0),"Try Times: ").concat(this.tryTimes,`
`),this.abortPingController=(function(){if(typeof AbortController=="function")return new AbortController})();var h=(l=this.abortPingController)===null||l===void 0?void 0:l.signal;return new Promise((function(v,y){var _=f.delayTime.reduce((function(k,N){return k+N}),0),A=setTimeout((function(){f.log+="ping time out ".concat(_+1e4,`s
`),f.serverList=[],f.cancelPing()}),_+1e4),R=(function(k){var N=k.reduce((function(L,B){var H=B.dl;return L[H]||(L[H]=[]),L[H].push(B),L}),{});return Object.entries(N).map((function(L){var B,H=L[0],q=L[1];return[(B=Number(H))!==null&&B!==void 0?B:0,q]})).sort((function(L,B){return L[0]-B[0]})).map((function(L){return L[0],L[1]}))})(f.serverList);Promise.any(R.map((function(k,N){var L=f.delayTime[N];return(function(B,H,q){return new Promise((function(Y,K){var se;if(q!=null&&q.aborted)return K(new Error("Promise was cancelled"));var ie=setTimeout((function(){B().then(Y).catch(K).finally((function(){var M;return(M=q==null?void 0:q.removeEventListener)===null||M===void 0?void 0:M.call(q,"abort",le)}))}),H),le=function(){var M;clearTimeout(ie),(M=q==null?void 0:q.removeEventListener)===null||M===void 0||M.call(q,"abort",le),K(new Error("Promise was cancelled"))};(se=q==null?void 0:q.addEventListener)===null||se===void 0||se.call(q,"abort",le)}))})((function(){return f.log+="".concat(e(),"ping[dl=").concat(L,"][groupIndex=").concat(N,"]-->").concat(JSON.stringify(k.map((function(B){return B.domain}))),`
`),n(k,h)}),L,h)}))).then((function(k){var N=k.response,L=k.server,B=k.callId;f.log+="".concat(e(),"ping resolved: request server:").concat(L.domain,`
 response:`).concat(JSON.stringify(N),`
 Call-ID:`).concat(B,`
`),f.lastServer=L,v({response:N,request:L,log:f.log})})).catch((function(k){return k instanceof AggregateError?(f.log+=e(),k.errors.forEach((function(N,L){f.log+="ping failed [groupIndex=".concat(L,`]:
`).concat(N,`
`)}))):f.log+="".concat(e(),"ping failed. Errors(unknown): ").concat(k.message,`
`),y(f.log)})).finally((function(){clearTimeout(A),f.cancelPing()}))}))},i.prototype.filter=function(){var l,f=this;this.serverList=this.serverList.filter((function(h){var v;return h.domain!==f.lastServer.domain&&h.dc!==l||(l||(l=(v=f.excludedServer.find((function(y){return y.dc===f.lastServer.dc})))===null||v===void 0?void 0:v.dc),f.excludedServer.push(f.lastServer),!1)})),this.log+="".concat(e(),"excludedServer ").concat(JSON.stringify(this.excludedServer.map((function(h){return h.domain}))),`
`)},i.prototype.getLog=function(){return this.log},i})();return new r})()),iTe.exports),k2=SQ(Lje);const Bge=Dd.getInstance();k2.setRetryTimes(0);const nLe=e=>KA(Au(vE().pipe(ao((()=>{k2.cancelPing(),Bge.report(`ping rwc canceled. ping rwc log:${k2.getLog()}`,["Join Meeting Flow","Ping RWC Error"],"warn")})))),Nt((n=>{const{response:r,request:i}=n;let l={};return l=r?{...r,rwc:i.domain,fromNginx:!1}:{rwc:i.domain,rwg:i.domain,rwcToken:i.rwcToken,fromNginx:!0},An([zke(l),kme()])})),tp((()=>{const n=k2.getLog(),{meeting:{meetingId:r,meetingNumber:i,userName:l}}=e.value;return Bge.report(`ping rwc error,${JSON.stringify({meetingId:r,meetingNumber:Od(i),userName:Od(l)})}, ping rwc log: ${n}`,["Join Meeting Flow","Ping RWC Error"],"error"),He(il,{reason:"connection error",errorCode:A1.CommonError}),An([...BP(e.value)])}))),aTe=(e,n)=>e.pipe(co(`${wbe}`),_o(n),Gt((([,r])=>r.meeting.encryptedRWC!==void 0||r.meeting.encryptedGEORWC!==void 0&&r.meeting.encryptedGEORWC.length>0)),mr((([,r])=>An(k2.ping((i=>{const{meeting:{encryptedRWC:l,encryptedGEORWC:f,meetingOptions:h,meetingNumber:v,ts:y,auth:_},breakoutRoom:A,video:R,audio:k}=i,N=h==null?void 0:h.isEnableGeoFenceRWC,L=R!=null&&R.isWebrtcVideoCapable||k!=null&&k.isWebRtcAudioCapable&&(k==null?void 0:k.webRtcAudioMode)&AFe.WebRTCAudio2?R==null?void 0:R.miniRwgOptionValue:0;return N&&f&&(f==null?void 0:f.length)>0?f.map((B=>{const{dc:H,dl:q,rwc:Y,rwcToken:K}=B;return{url:KEe(Y,v,K,y,_,A==null?void 0:A.currentRoom.boConfId,L),domain:Y,rwcToken:K,dl:q,dc:H}})):l?Object.keys(l).map((B=>{const H=l[B];return{url:KEe(B,v,H,y,_,A==null?void 0:A.currentRoom.boConfId,L),domain:B,rwcToken:H,dl:0,dc:"AP"}})):[]})(r))).pipe(nLe(n),pb(Ake(performance.now()))))));let cTe=0;const Bje=Dd.getInstance(),Dpe={meetingStatus:Tu.Initial,isWindowOpen:!1,apiKey:"",signature:"",signatureType:"",lang:"en-US",tk:"",customerKey:"",mtkGuid:"",pingRWCTimestamp:0,meetingInfoTimestamp:0,passWord:"",meetingNumber:0,userName:"",userEmail:"",sdkUrl:"",sdkOrigin:"",proxy:1,cv:"",meetingId:"",tid:"",ts:"",auth:"",sign:"",isSupportCallOut:!1,tollNumbers:void 0,recordingEnable:!1,callOutCountry:void 0,inviteEmail:"",xmppConfig:null,isSupportH323:!1,h323GatewayInfo:"",h323Password:"",trackAuth:"",isOriginHost:!1,isWebinar:!1,encryptedRWC:void 0,meetingOptions:{},meetingTopic:"",bLock:!1,bHoldUponEntry:!1,viewOnly:0,listenOnlyPhone:0,bAllowRaiseHand:!1,bAllowAttendeeRename:!1,bBroadcast:void 0,bAllowPlayChimeForEnterOrExit:!1,bIbDisableShare:!1,bIbDisableChat:!1,bAllowShowCount:!1,encryptKey:"",bNoHostTimeOut:!1,confId:"",conId:"",e2eEncrypt:!1,zoomId:"",jid:"",xtoken:"",groups:void 0,svcUrl:"",encType:NaN,userGUID:"",userId:NaN,isHost:!1,isCoHost:!1,participantID:0,isOnHold:!1,isMeetingReset:!1,bRecord:!1,audioVideoBeforeOnHold:void 0,region:void 0,network:void 0,joinMeetingTimeStamp:0,activeAppInfo:void 0,recordingDisclaimerForRecorder:{},recordingDisclaimer:{},ccUrl:"",sessionIdleTimeoutMins:40,reportDomain:"",discardedRwcList:[],sharePronounType:void 0,stayAwake:!1,wrInfo:{},meetingInfo:{},isNewJoinFlow:!1,gatewayUserList:[],logConfig:"",logEncryptionPubKey:"",failover:{count:0,isCurrentFailoverRecorded:!1,reason:-1,interval:0,joinMeetingSuccessTimestamp:0,sequence:""},isUseWBVideo:!1,isUseWBAudio:!1,enableLongPollingCheckStart:!1,rsPwd:"",chatModerationPolicy:{},isAlternativeHost:!1,isAssistant:!1,isRlbTP:!1,isRlbTPReady:!1,isUIToolkit:!1,liveStreamInfo:{}},Vje=op({[`${om}`]:We(((e,{payload:n})=>{n.customerKey=e.customerKey||n.customerKey||"",Object.assign(e,n),e.meetingStatus=Tu.Initial})),[`${U5e}`]:We(((e,{payload:n})=>{n.customerKey=e.customerKey||n.customerKey||"",Object.assign(e,n)})),[`${j5e}`]:We(((e,{payload:n})=>{e.isWindowOpen=n})),[`${wke}`]:We(((e,{payload:n})=>{n.useSDK?e.signatureType="sdk":e.signatureType="api",e.apiKey=n.apiKey,e.signature=n.signature,e.lang=n.language})),[`${z5e}`]:We(((e,{payload:n})=>{e.ztk=n})),[`${W5e}`]:We(((e,{payload:n})=>{e.zsk=n})),[`${G5e}`]:We(((e,{payload:n})=>{e.tk=n.tk,e.mtkGuid=n.mtkGuid})),[`${Ake}`]:We(((e,{payload:n})=>{e.pingRWCTimestamp=n})),[`${Hke}`]:We(((e,{payload:n})=>{e.meetingInfoTimestamp=n})),[`${F1}`]:We(((e,{payload:n})=>{e.confId=n.confID,e.conId=n.conID,e.e2eEncrypt=n.e2eEncrypt,e.meetingNumber=parseInt(n.mn,10),e.zoomId=n.zoomID,e.meetingStatus=Tu.Joined,e.jid=n.jid,e.xtoken=n.xtoken,e.groups=n.groups,e.svcUrl=n.svcUrl,e.encType=n.encType,e.userGUID=n.userGUID,e.userId=n.userID,e.role=n.role,e.participantID=n.participantID,e.reportDomain=n.reportDomain,e.abToken=n.ABtoken,e.supportLocalAB=!!n.supportLocalAB,e.isUseWBVideo=!!n.useWBVideo,e.mediasdkConfig=n.mediasdkConfig,e.isUseWBAudio=!!n.useWBAudio,n.enableWebTransport&&(e.enableWebtransport=n.enableWebTransport,e.webtransportPort=n.WebTransportPort)})),[`${mX}`]:We(((e,{payload:n})=>{if(n.gatewayUser){var r;const{userId:l,sn:f}=n.gatewayUser,h=(r=e.gatewayUserList)===null||r===void 0?void 0:r.find((v=>v.userId===l));var i;h?h.sn=f:(i=e.gatewayUserList)===null||i===void 0||i.push(n.gatewayUser)}else Object.assign(e,n)})),[`${Tke}`]:We(((e,{payload:n})=>{e.isHost=n})),[`${Oke}`]:We(((e,{payload:n})=>{e.isCoHost=n})),[`${PP}`]:We(((e,{payload:n})=>{e.isOnHold=n})),[`${Ike}`]:We(((e,{payload:n})=>{e.isMeetingReset=n})),[`${Rke}`]:We(((e,{payload:n})=>{e.audioVideoBeforeOnHold=n})),[`${Rme}`]:We(((e,{payload:n})=>{e.currentUserAudioBeforeReset=n})),[`${xme}`]:We(((e,{payload:n})=>{e.isCurrentUserMutedBeforeReset=n})),[`${Abe}`]:We(((e,{payload:n})=>{e.meetingStatus=n})),[`${xke}`]:We(((e,{payload:n})=>{e.region=n.region,e.network=n.network})),[`${Dke}`]:We(((e,{payload:n})=>{e.isCurrentUserStartVideoBeforeReset=n})),[`${kke}`]:We(((e,{payload:n})=>{e.joinMeetingTimeStamp=n})),[`${q5e}`]:We(((e,{payload:n})=>{e.activeAppInfo=n})),[`${LU}`]:We(((e,{payload:n})=>{e.idleStartTime=n})),[`${Mke}`]:We(((e,{payload:n})=>{e.sessionIdleTimeoutMins=n})),[`${K5e}`]:We(((e,{payload:n})=>{var r;const i=(r=e.encryptedGEORWC)===null||r===void 0||(r=r.find((f=>f.rwc===n)))===null||r===void 0?void 0:r.dc;if(i){var l;const f=(l=e.encryptedGEORWC)===null||l===void 0?void 0:l.filter((h=>h.dc===i));f&&e.discardedRwcList.some((h=>(f==null?void 0:f.findIndex((v=>v.rwc===h)))>=0))&&e.discardedRwcList.push(...f.map((h=>h.rwc))),e.discardedRwcList.push(n)}})),[`${Nke}`]:We(((e,{payload:n})=>{e.sharePronounType=n})),[`${Pke}`]:We(((e,{payload:n})=>{e.stayAwake=n})),[`${Lke}`]:We(((e,{payload:n})=>{e.failover.joinMeetingSuccessTimestamp=n})),[`${Bke}`]:We((e=>{Object.assign(e.failover,{...Dpe.failover,count:e.failover.count,joinMeetingSuccessTimestamp:e.failover.joinMeetingSuccessTimestamp})})),[`${gX}`]:We(((e,{payload:n})=>{const{count:r,reason:i,interval:l,sequence:f}=n;e.failover.count=r,e.failover.reason=i,e.failover.interval=l,e.failover.isCurrentFailoverRecorded=!0,e.failover.sequence=f})),[`${Vke}`]:We(((e,{payload:n})=>{e.quicklyLeave=n})),[`${Fke}`]:We(((e,{payload:n})=>{e.isEnableZmkFromRWG=n})),[`${NY}`]:We(((e,{payload:n})=>{e.isRlbTP=n})),[`${$ke}`]:We(((e,{payload:n})=>{e.isRlbTPReady=n})),[`${_ke}`]:We(((e,{payload:n})=>{e.isUIToolkit=n})),[`${Ime}`]:(e,{payload:n})=>{const{isFailover:r}=n,i={isMeetingReset:!0,apiKey:e.apiKey,signatureType:e.signatureType,signature:e.signature,lang:e.lang,proxy:1,stayAwake:e.stayAwake};var l;return r&&Object.assign(i,{currentUserAudioBeforeReset:e.audioVideoBeforeOnHold?e.audioVideoBeforeOnHold.audio:n.audio,isCurrentUserMutedBeforeReset:e.audioVideoBeforeOnHold?e.audioVideoBeforeOnHold.muted:(l=e.isCurrentUserMutedBeforeReset)!==null&&l!==void 0?l:n.muted,isCurrentUserStartVideoBeforeReset:e.audioVideoBeforeOnHold?e.audioVideoBeforeOnHold.video:n.video,meetingNumber:e.meetingNumber,userName:e.userName,passWord:e.passWord,userEmail:e.userEmail,sdkUrl:e.sdkUrl,sdkOrigin:e.sdkOrigin,cv:e.cv,zsk:e.zsk,ztk:e.ztk,idleStartTime:e.idleStartTime,sessionIdleTimeoutMins:e.sessionIdleTimeoutMins,customerKey:e.customerKey,failover:e.failover,stayAwake:e.stayAwake,quicklyLeave:e.quicklyLeave}),{...Dpe,...i}}},Dpe),Hje={meetingFailoverReportEpic0:(e,n)=>e.pipe(co(`${om}`),mr((()=>{const r=n.value.meeting.failover.joinMeetingSuccessTimestamp===0&&!!rr.get(Bi.WebclientZoomId);return e.pipe(co(`${F1}`),Ys(1),Nt((()=>{const i=[],{count:l,sequence:f}=rr.get(Bi.WebclientFailoverCount)||{};let{meeting:{failover:{count:h,reason:v,interval:y}}}=n.value;const{meeting:{pingRWCTimestamp:_}}=n.value;if(r){h=(l??0)+1,v=qu.RefreshPage,y=0;const k=f?`${f}-${v}`:`${v}`;rr.set(Bi.WebclientFailoverCount,{count:h,sequence:k},Zr.SessionStorage),i.push(gX({count:h,reason:v,interval:y,sequence:k}))}const A=performance.now();let R=`WCL_M, JMCT(${A-_})`;return h>0&&v!==qu.NormalCase&&(R=`${R},FAILOVER(${h},${v},${(y/1e3).toFixed(1)})`),Pje.sendRWGConnectionPerformance(R),i.push(Bke(),Lke(A)),An(i)})))}))),meetingFailoverReportEpic1:(e,n)=>e.pipe(co(`${Qp}`),Nt((r=>{const{payload:i}=r,{meeting:{failover:{joinMeetingSuccessTimestamp:l,isCurrentFailoverRecorded:f},userGUID:h,userId:v,meetingId:y}}=n.value,_=[];if(!f){let{count:A,sequence:R}=rr.get(Bi.WebclientFailoverCount)||{};R=R?`${R}-${i}`:`${i}`,i!==qu.NormalCase&&(A+=1,rr.set(Bi.WebclientFailoverCount,{count:A,sequence:R},Zr.SessionStorage));const k=performance.now()-l;_.push(gX({reason:i,count:A,interval:k,sequence:R,userGUID:h,userId:v,meetingId:y}))}return An(_)})))},Fje={sessionIdleEpic0:(e,n)=>e.pipe(co(`${F1}`),_o(n),Gt((([,r])=>r.meeting.zlkJwtToken!==void 0)),mr((()=>(HR&&HR.complete(),HR=new cb,sTe=A5(6e4).pipe(Kn((()=>performance.now()))).subscribe(HR),HR.pipe(Kn((r=>XCe(r)))))))),sessionIdleEpic1:e=>e.pipe(co(`${lv}`)).pipe(ao((()=>{HR&&(HR.complete(),sTe.unsubscribe())})),yi(Yn)),sessionIdleEpic2:(e,n)=>e.pipe(co(`${XCe}`),_o(n),Nt((([r,i])=>{var l;const{meeting:{idleStartTime:f,sessionIdleTimeoutMins:h,isOriginHost:v,isWebinar:y},participants:{attendeesList:_,xmppAttendeeList:A},recording:R,breakoutRoom:k}=i,N=r.payload,L=[];if(_.length!==1||y&&A.length!==0||(k==null||(l=k.currentRoom)===null||l===void 0?void 0:l.status)===vs.InRoom||(R==null?void 0:R.cmrStatus)===Cl.Start)L.push(LU(void 0));else if(f){const B=v&&I5(_[0].userRole)?h:40;N-f>60*B*1e3&&(console.warn(`No active for ${B} minutes, will end the session.`),Nje.report(`Session idle timeout(${B} minutes), end the session automatically!`,["Join Meeting Flow","Session idle"],"warn"),L.push(kL()),Uc(500).subscribe((()=>{fbe()})))}else L.push(LU(N));return An(L)}))),sessionIdleEpic3:(e,n)=>e.pipe(co(`${X2}`),Gt((r=>[la,av].includes(r.payload.evt)&&n.value.meeting.idleStartTime!==void 0)),al(nm),Nt((()=>{var r;const{participants:{attendeesList:i,xmppAttendeeList:l},recording:f,breakoutRoom:h}=n.value,v=[];return(i.length>1||l.length>0||(f==null?void 0:f.cmrStatus)===Cl.Start||(h==null||(r=h.currentRoom)===null||r===void 0?void 0:r.status)===vs.InRoom)&&v.push(LU(void 0)),An(v)}))),sessionIdleEpic4:e=>e.pipe(co(`${z2}`,`${kL}`),V2(LU(void 0)))},$je={meetingMainEpics0:(e,n)=>oo(e,0).pipe(ao((r=>{var i;if(((i=r.payload.body)===null||i===void 0?void 0:i.status)==="READY"){const{meeting:{zlkJwtToken:l,signatureType:f,sign:h,passWord:v,isHost:y,isOriginHost:_,ztk:A,zsk:R,tk:k,userEmail:N},breakoutRoom:L}=n.value,B=l?{zlkJwtToken:l}:{signType:f,sign:h};if(v&&v!==""&&(l?Object.assign(B,{mpwd:Vc(v)}):y&&_||Object.assign(B,{mpwd:v})),(L==null?void 0:L.currentRoom.status)===vs.Joining){const{currentRoom:{boId:q,boConfId:Y,boToken:K}}=L;q&&Y&&K&&Object.assign(B,{botk:K})}if(!l){A&&Object.assign(B,{zak:A}),(sessionStorage.getItem(Bi.WebclientZsk)||R)&&Object.assign(B,{zak:R}),k&&Object.assign(B,{tk:k});const q=rr.get(Bi.WebclientWebinarToken);q!==void 0&&Object.assign(B,{tk:q});const Y=sessionStorage.getItem(Bi.WebclientRecordingToken);Y&&Object.assign(B,{localRecordToken:Y}),N&&Object.assign(B,{email:N})}B0.sendLaunchParams(B);const H=rr.get(Bi.WebclientMeetingToken);H&&B0.joinMeeting(H)}})),yi(Yn)),meetingMainEpics1:(e,n)=>{return oo(e,AQ).pipe(_o(n),Gt((([,i])=>i.socket.zoomSocketStatus===wi.Connected)),(r=([i,l])=>{const{payload:{body:{res:f,userID:h,zoomID:v,mn:y,participantID:_,meetingtoken:A,role:R}}}=i,{meeting:{userEmail:k,userName:N,isMeetingReset:L,apiKey:B,zsk:H,signatureType:q}}=l;if(tg.Success===f){const{WebclientParticipantId:K,WebclientZoomId:se,WebclientUserEmail:ie,WebclientUserName:le,WebclientMeetingToken:M}=Bi;rr.set(se,v,Zr.SessionStorage),rr.set(K,_,Zr.SessionStorage),k&&rr.set(ie,k,Zr.SessionStorage),rr.set(le,N,Zr.SessionStorage),A&&rr.set(M,A,Zr.SessionStorage),H&&B0.sendSdkKeyToMonitor(q,B,h);const we=[F1(i.payload.body),kke(performance.now())];return L&&we.push(Ike(!1)),(R&F2.Owner)===F2.Owner&&(He(il,{reason:"dont support assisnt join through widget",errorCode:-1}),B0.leaveMeeting()),He(g2e,{meetingNumber:y}),An(we)}if(tg.MeetingLocked===f)He(il,_1(f));else if(tg.UserFull===f)He(il,Object.assign({},_1(f),{lmUrl:i.payload.body.lmURL}));else if(tg.MeetingIsOver===f)He(il,_1(f));else if(tg.MMRIBReject===f)He(il,_1(f));else if(tg.MMRConfParticipantExists===f)He(il,_1(f));else if([tg.UserHasBeenRemoved,tg.WebinarBlockedEmail].includes(f))He(il,_1(f));else if(tg.MeetingNotStarted===f){var Y;const K=_1(f),{meeting:{meetingNumber:se,passWord:ie,userName:le,userEmail:M,inviteEmail:we,meetingTopic:Ne,region:De,network:be,userId:me,lang:Ye,meetingId:Ke,participantID:Ze,wrInfo:z,meetingInfo:$t,isNewJoinFlow:Be,enableLongPollingCheckStart:at,tid:lt,signature:$e,rsPwd:qt}}=l;Object.assign(K,{meetingInfo:{meetingNumber:se,password:ie,userName:le,userEmail:M,inviteEmail:we,meetingTopic:Ne,region:De,network:be,userId:me,lang:Ye,webEndpoint:E5(),meetingId:Ke,participantId:Ze,wrInfo:Object.assign({},z,{isNew:Be}),scheduleInfo:$t,enableLongPollingCheckStart:at,rid:P8e(lt),role:Number((Y=bE($e))===null||Y===void 0?void 0:Y.role),rsPwd:qt}}),He(il,K)}else He(il,_1(f));return An(BP(l,!1))},KA(mr(((i,l)=>r(i)||Yn)))));var r},meetingMainEpics2:(e,n)=>oo(e,av).pipe(_o(n),Kn((([r,i])=>{const{payload:{body:l}}=r,{meeting:{zoomId:f,encType:h,gcmSessinKey:v}}=i;if((l==null?void 0:l.encryptKey)!==void 0&&xd.init(f,l.encryptKey,h),(l==null?void 0:l.gatewayKey)!==void 0){const y=Yo.getInstance(),[,_,A]=l.gatewayKey.split(".");y.sendUserNodeList([{userid:Number(_),sn:A&&iv(A)}],v)}return He(Qve,l),mX(l)}))),meetingMainEpics3:(e,n)=>oo(e,7939).pipe(_o(n),Nt((([r,i])=>{const{payload:{body:l}}=r;if(l.reason!==void 0){if(UC.Reconnect===l.reason)return a7e.WaitingRoomFailover===l.subReason?He(em,{reason:np.OnHold}):He(em,{reason:np.Failover}),Di(Qp(qu.NormalCase));UC.KickedByHost===l.reason?He(CA,{reason:"kicked by host"}):[UC.EndByHost,UC.EndByNone,UC.EndByAdmin,UC.EndByHostStartAnotherMeeting].includes(l.reason)?He(CA,{reason:"ended by host"}):UC.FreeMeetingTimeout===l.reason?He(CA,{reason:"free meeting ended"}):[UC.DuplicateSession,UC.MeetingTransfer].includes(l.reason)&&He(CA,{reason:"duplicated session"})}return i.meeting.isMeetingReset?Yn:An(BP(i,!1))}))),meetingMainEpics4:(e,n)=>e.pipe(co(`${Qp}`),_o(n),Nt((([,r])=>{const i=BP(r,!0);let l;if(r.meeting.zlkJwtToken){const f=(function(v){if(v){const{meeting:{topic:y,passWord:_,userName:A,zlkJwtToken:R,lang:k,cv:N,customerKey:L}}=v;return{topic:y,passWord:_,userName:A,zlkJwtToken:R,lang:k,cv:N,customerKey:L}}return null})(r),h={topic:f==null?void 0:f.topic,password:f==null?void 0:f.passWord,userName:f==null?void 0:f.userName,zlk:f==null?void 0:f.zlkJwtToken,lang:f==null?void 0:f.lang,cv:f==null?void 0:f.cv,customerKey:f==null?void 0:f.customerKey};l=Di(DL(h)).pipe(SL(1e3))}else{const f=(function(h){var v;const{meeting:{apiKey:y,signature:_,signatureType:A,meetingNumber:R,userName:k,lang:N,passWord:L,userEmail:B,sdkUrl:H,sdkOrigin:q,proxy:Y,cv:K,ztk:se,zsk:ie,tk:le}}=h;let M=se||sessionStorage.getItem(Bi.WebclientZtk),we=ie||sessionStorage.getItem(Bi.WebclientZsk);const Ne=Number((v=bE(_))===null||v===void 0?void 0:v.role)===1;return Ne||(M=we,we=""),{apiKey:y,signature:_,signatureType:A,meetingNumber:R,userName:k,lang:N,passWord:L?encodeURIComponent(L):"",userEmail:B,sdkUrl:H,sdkOrigin:q,proxy:Y,cv:K,ztk:M,zsk:we,tk:le||sessionStorage.getItem(Bi.WebclientTk),ulsm:Ne&&we?1:0}})(r);l=Di(hX(f)).pipe(SL(1e3))}return w5(An(i),l)}))),meetingMainEpics5:e=>q0(e,7940).pipe(ao((n=>{He("MEETING_HOST_CHANGE_INDICATION",n.payload.body.bHost)})),Kn((n=>Tke(n.payload.body)))),meetingMainEpics6:e=>q0(e,7941).pipe(ao((n=>{He("MEETING_COHOST_CHANGE_INDICATION",n.payload.body.bCoHost)})),Kn((n=>Oke(n.payload.body)))),meetingMainEpics7:e=>q0(e,7945).pipe(ao((n=>{const{payload:{body:{opt:r}}}=n;rr.set(Bi.WebclientOpt,r,Zr.SessionStorage)})),yi(Yn)),meetingMainEpics8:(e,n)=>oo(e,7942).pipe(ao((r=>{const{payload:{body:{bHold:i}}}=r;rr.set(Bi.WebclientIsOnHold,i?1:0,Zr.SessionStorage),He(Xve,i)})),_o(n),Nt((([r,i])=>{const l=[PP(r.payload.body.bHold)];if(r.payload.body.bHold){const f=Do(i);if(f){l.push(Rke({audio:f.audio,video:f.bVideoOn,muted:f.muted}));const h=sp(Yo.getInstance());if(f.audio==="computer"&&(h.leaveComputerAudio(),B0.joinOrLeaveVoip(!1)),f.bVideoOn&&h.stopCaptureVideo(),f.sharerOn&&(B0.stopSharing(f.userId),h.stopDesktopSharing(),l.push(Yp(qs.End))),i.video&&i.video.subscribedVideoList.length>0&&i.video.subscribedVideoList.forEach((v=>{h.unsubscribeVideo(v)})),i.share&&i.share.isReceiveSharing){const v=i.share.activeNodeId;i.share.remoteControlledUserList.length>0&&(i.share.remoteControlledUserList.forEach((y=>{B0.sharingRequestRemoteControl(y,!1)})),GR(i)&&h.stopRemoteControl()),B0.unsubscribeSharing(v),h.stopRenderSharing(),l.push(BA(!1))}}}return An(l)}))),meetingMainEpics9:e=>oo(e,7954).pipe(Kn((n=>xke(n.payload.body)))),meetingMainEpics10:e=>oo(e,4216).pipe(ao((n=>{He("MEETING_CLAIM_HOST_KEY_RESPONSE",n.payload.body.bresult)})),yi(Yn)),meetingMainEpics11:(e,n)=>e.pipe(co(`${z2}`,`${kL}`),_o(n),Nt((([r,i])=>{const l=R$e(i),{socket:{zoomSocketStatus:f},meeting:{meetingId:h}}=i;return f===wi.Connected&&(r.type===`${z2}`?B0.leaveMeeting(l):r.type===`${kL}`&&B0.endMeeting()),h&&He(CA,{}),An(BP(i,!1))}))),meetingMainEpics12:(e,n)=>e.pipe(co(`${Ome}`),_o(n),Nt((([r,i])=>{if(r.type===`${Ome}`&&i.meeting.meetingNumber&&!i.meeting.zlkJwtToken){const l={mn:i.meeting.meetingNumber.toString(),name:i.meeting.userName,customerKey:i.meeting.customerKey?Vc(i.meeting.customerKey):""},{jbhLeave:f}={jbhLeave:`https://${dQ}/wc/jbhLeave`},h=`${f}/?${new URLSearchParams(l).toString()}`;fetch(h,{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"}})}return Yn}))),meetingMainEpics13:e=>oo(e,2).pipe(ao((()=>{console.warn("Upgrade to latest version to optimize meeting experience")})),yi(Yn)),meetingMainEpics14:e=>oo(e,1).pipe(ao((n=>{const{payload:{body:{upgradeVersion:r}}}=n,i=_1(1e4);if(i&&i.reason){const l=i.reason.replace(/{(\d+)}/g,(()=>r));i.reason=l}He(il,i)})),yi(Yn)),meetingMainEpics15:e=>oo(e,4265).pipe(Kn((n=>{const{payload:{body:r}}=n,{nShareType:i}=r;return He(v2e,{userSharePronounType:i}),Nke(i)}))),meetingMainEpics16:e=>oo(e,4128).pipe(ao((n=>{const{payload:{body:{meetingtoken:r}}}=n,{WebclientMeetingToken:i}=Bi;r&&rr.set(i,r,Zr.SessionStorage)})),yi(Yn)),meetingMainEpics17:(e,n)=>e.pipe(co(`${F1}`),Gt((()=>!!n.value.meeting.quicklyLeave)),mr((()=>Jl(window,"beforeunload").pipe(ao((()=>{B0.leaveMeeting()})),yi(Yn))))),meetingMainEpics18:(e,n)=>oo(e,8025).pipe(Gt((r=>!!r.payload.body.Zmk&&!!n.value.meeting.isEnableZmkFromRWG)),Kn((r=>{const{payload:{body:{Zmk:i}}}=r;return mX({zmk:i})}))),meetingMainEpics19:(e,n)=>e.pipe(co(`${om}`),Nt((r=>{const{payload:{mediaFeatureOptions:i,mediaSDKPath:l}}=r,{media:{skipJsMedia:f,patchJsMedia:h,assetsPath:v}}=n.value;if((function(y){return(function(_){try{if(47>_.length)return 0;const A=_.slice(_.length-47-1+1,_.length-47+1);if(A)return parseInt(A,16)}catch{}return 0})(y)===1})(i)){const y=`${!f&&h&&oDe(v)&&l?bQ(l):v}/tp.min.js`;return An(window.ZoomTPModule===void 0||typeof window.ZoomTPModule.ZoomTPWebSocket!="function"?new Promise(((_,A)=>lQ(y,(()=>_("")),(()=>A())))):Promise.resolve("")).pipe(Nt((()=>{const{meeting:{mediaFeatureOptions:_},logger:A}=n.value,R=A?Dd.getInstance().makeLogger(["TP MODULE"]):void 0;return An(window.ZoomTPModule.initTPModule({options:_,logInstance:R}).then((()=>(He(vY,!0),$ke(!0)))).catch((()=>(He(vY,!1),NY(!1)))))})),tp((()=>(setTimeout((()=>{Dd.getInstance().report(`Unable to load tp.min.js,url:${y}`,["TP MODULE"],"error")}),5e3),He(vY,!1),An([NY(!1)])))),pb(NY(!0)))}return Yn})))},Uje=nh($je,{wakeLockEpic0:(e,n)=>e.pipe(co(`${F1}`),_o(n),Gt((([,r])=>!!r.meeting.stayAwake)),ao((async()=>{try{const{isSafari:r,isIOSMobile:i}=bo;qh&&qh.release().then((()=>{qh=null})),"wakeLock"in navigator&&((r||i)&&await Ra(mf(Jl(document,"click").pipe(Ys(1)),Jl(document,"touchend").pipe(Ys(1)))),qh=await navigator.wakeLock.request("screen"),qh.addEventListener("release",(()=>{})))}catch{}})),mr((()=>Jl(document,"visibilitychange").pipe(Nt((async()=>{if(document.visibilityState==="visible"){const{isSafari:r,isIOSMobile:i}=bo;qh&&qh.release().then((()=>{qh=null})),"wakeLock"in navigator&&((r||i)&&await Ra(mf(Jl(document,"click").pipe(Ys(1)),Jl(document,"touchend").pipe(Ys(1)))),qh=await navigator.wakeLock.request("screen"))}else qh&&qh.release().then((()=>{qh=null}))})),yi(Yn))))),wakeLockEpic1:e=>e.pipe(co(`${lv}`)).pipe(ao((()=>{qh&&qh.release().then((()=>{qh=null}))})),yi(Yn))},Hje,Fje,{meetingInfoEpic:(e,n)=>e.pipe(co(`${DL}`),mr((r=>{const i=Object.assign({},r.payload,{password:Vc(r.payload.password),topic:Vc(r.payload.topic)}),{videoSDKUrl:l}={videoSDKUrl:`https://${dQ}/wc/lsdk`};return((f,h,v="zoomsdkjsonpcallback")=>new Hc((y=>{cTe++;const _=`${v}${cTe}`,A=document.createElement("script");Object.keys(h).forEach((R=>(h[R]===void 0||h[R]===null)&&delete h[R])),A.src=`${f}?${new URLSearchParams(Object.assign(h,{callback:_})).toString()}`,A.async=!0,A.onerror=R=>y.error(R),document.getElementsByTagName("head")[0].appendChild(A),window[_]=R=>{A.parentNode&&A.parentNode.removeChild(A),delete window[_],y.next(R),y.complete()}})))(l,i).pipe(Au(e.pipe(co(`${z2}`),ao((()=>{He(CA,{})})),Ys(1))),tp((f=>Di({status:!1,result:f.toString(),errorCode:-3e3}))),Nt((f=>{const[h,v]=(y=Di(f),[Gt(_=R=>R.status===!0&&R.result!==void 0,A)(Id(y)),Gt(e$e(_,A))(Id(y))]);var y,_,A;return v.subscribe((R=>{Bje.report(`get meeting info error, ${JSON.stringify(R)}`,["Join Meeting Flow","Get Meeting Info Error"],"error"),R.status||(R.errorCode===3e3&&R.errorMessage==="Meeting password is incorrect"?He(il,{errorCode:A1.WrongPasscode,reason:"Incorrect passcode."}):R.errorCode===3e3&&R.errorMessage==="The role type error"?He(il,{errorCode:A1.RoleTypeMissing,reason:"Role type error"}):R.errorCode===-3e3?He(il,{errorCode:A1.CommonError,reason:"connection error"}):R.errorCode===3e3?He(il,{reason:R.errorMessage,errorCode:A1.CommonError}):R.errorCode===300?He(il,{reason:"This account does not exist or does not belong to you",errorCode:A1.CommonError}):R.errorCode===124&&R.errorMessage==="Parse lite sdk topic and pwd fail"?He(il,{reason:"Topic is invalid",errorCode:A1.CommonError}):R.errorCode===124&&R.errorMessage==="The java web token is expired or more than 2 days or ineffective."?He(il,{reason:"The token has expired, is over 2 days old, or is ineffective.",errorCode:A1.CommonError}):R.errorCode===124&&He(il,{reason:"Verify JWT failed",errorCode:A1.CommonError}))})),h.pipe(MMe((R=>{if(R.status===!0){const{result:{mid:N,websdkClientFeatureOptions:L,showRecommendVersion:B}}=R;rr.init(N);const H=((K,se)=>{if(K.result){const{result:{mn:ie,ts:le,auth:M,track_auth:we,mid:Ne,tid:De,webMediaBlockConfig:be,encryptedRWC:me,encryptedGEORWC:Ye,user_identity:Ke,meetingOptions:Ze,can_recording:z,wcXMPPConfig:$t,call_out_country_json:Be,isOriginalHost:at,support_call_out:lt,liveTranscription:$e,logConfig:qt,logEncryptionPubKey:io,toll_numbers_json:En,h323Password:Zn,liveStreamInfo:Et,rc_auto_delete:Jt,jwt_rc:ce,op_rc:Hs,mediaSDKVersion:Fo,mediaSDKPathPrefix:yt,zmk:Xt,fileTransfer:Wn,fileServerDomain:bt,accountId:Kt,mediaFeatureOptions:Ut,websdkClientFeatureOptions:Ue,sipDomain:dt,enableVsdkInteractiveLiveStream:Ot}}=K,{lang:Oe,password:pt,topic:Bt,zlk:tn,cv:ht,userName:gt}=se;return{meetingNumber:ie,meetingId:Ne,tid:De,ts:le,auth:M,passWord:pt,trackAuth:we,customerKey:Ke,encryptedRWC:JSON.parse(me||"{}"),encryptedGEORWC:JSON.parse(Ye||"{}"),meetingOptions:JSON.parse(Ze||"{}"),recordingEnable:z==="1",topic:Bt,userName:rr.get(Bi.WebclientUserName)||gt,cv:ht,zlkJwtToken:tn,webMediaBlockConfig:be,xmppConfig:JSON.parse($t||"{}"),callOutCountry:JSON.parse(Be||"{}"),lang:Oe,isOriginHost:at,isSupportCallOut:lt==="1",liveTranscription:JSON.parse($e||"{}"),logConfig:qt,logEncryptionPubKey:io,tollNumbers:En===void 0?void 0:JSON.parse(En),h323Password:Zn,liveStreamInfo:JSON.parse(Et||"{}"),rcAutoDelete:Jt,jwtRc:ce,opRc:Hs,mediaSDKPath:Fo&&yt?`${bQ(yt)}/${Fo}`:void 0,zmk:Xt,fileTransfer:JSON.parse(Wn||"{}"),fileServerDomain:bt,accountId:Kt,mediaFeatureOptions:Ut,websdkClientFeatureOptions:Ue,sipDomain:dt,enableVsdkInteractiveLiveStream:Ot}}return K})(R,r.payload);var k;B&&(r==null||(k=r.payload)===null||k===void 0||k.lang,console.log("Update VideoSDK-Web to the latest version to optimize meeting experience","https://developers.zoom.us/docs/video-sdk/web/"));const q=[Di(om(H)),J5e(aTe,n,wbe())],Y=(K=>{const se=[];if(K){const ie=K.split("").reverse();Object.keys(SA).filter((le=>/M:\d+(,\d+)*;V:\d+(,\d+)*/.test(SA[le]))).forEach((le=>{const M=SA[le];let[we,Ne]=M.split(";");we.startsWith("V:")&&([we,Ne]=[Ne,we]);const De=Ne.slice(2).split(",").map((Ye=>ie[Number(Ye)-1])).reverse().join(""),be=parseInt(De,16),me=N8e[M];me&&(Array.isArray(me)?me:[me]).forEach((Ye=>{const Ke=Ye.mask?(be&Ye.mask)>0:be;se.push(Di(Ye.action(Ke)))}))}))}return se})(L);return Y.length>0&&q.unshift(...Y),w5(...q)}})))})),pb(Hke(performance.now())))}))),pingRWCEpic:aTe,retryPingRWCEpic:(e,n)=>e.pipe(co(`${Tbe}`),al(nm),Gt((()=>n.value.meeting.meetingStatus===Tu.Initial&&n.value.socket.zoomSocketStatus===wi.Closed)),mr((()=>{const{meeting:{meetingId:r,meetingNumber:i,userName:l},socket:{retryCount:f,rwgServerList:h}}=n.value,v=h==null?void 0:h[f-1];return Bge.makeLogger(["Join Meeting Flow"]).info(`ping rwc retry. Last failed rwc:${v==null?void 0:v.rwc}, last failed rwg:${v==null?void 0:v.rwg}, retry count:${f}, meeting detail:${JSON.stringify({meetingId:r,meetingNumber:Od(i),userName:Od(l)})}, rwc log:${k2.getLog()}`,["Ping RWC Retry"]),An(k2.retry()).pipe(nLe(n))})))});function JZ(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)e[i]=r[i]}return e}var jje=(function e(n,r){function i(l,f,h){if(typeof document<"u"){typeof(h=JZ({},r,h)).expires=="number"&&(h.expires=new Date(Date.now()+864e5*h.expires)),h.expires&&(h.expires=h.expires.toUTCString()),l=encodeURIComponent(l).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var v="";for(var y in h)h[y]&&(v+="; "+y,h[y]!==!0&&(v+="="+h[y].split(";")[0]));return document.cookie=l+"="+n.write(f,l)+v}}return Object.create({set:i,get:function(l){if(typeof document<"u"&&(!arguments.length||l)){for(var f=document.cookie?document.cookie.split("; "):[],h={},v=0;v<f.length;v++){var y=f[v].split("="),_=y.slice(1).join("=");try{var A=decodeURIComponent(y[0]);if(h[A]=n.read(_,A),l===A)break}catch{}}return l?h[l]:h}},remove:function(l,f){i(l,"",JZ({},f,{expires:-1}))},withAttributes:function(l){return e(this.converter,JZ({},this.attributes,l))},withConverter:function(l){return e(JZ({},this.converter,l),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(n)}})})({read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const{WebclientIsOnHold:zje,WebclientOpt:Wje,WebclientParticipantId:Gje,WebclientZoomId:qje,WebclientMeetingToken:Kje}=Bi,{WebclientDeviceId:lTe}=Jme;function uTe({retryCount:e,rwgServerList:n,userName:r,auth:i,trackAuth:l,meetingId:f,customerKey:h,tid:v,lang:y,ts:_,bid:A,botk:R,confID:k,zlkJwtToken:N,isWebRtcAudioCapable:L,isMeetingReset:B,cameraDevicesList:H,isWebrtcVideoCapable:q,webRtcAudioMode:Y,mediaFeatureOptions:K}){const se=jje.get("_zm_mtk_guid");let ie=rr.get(lTe);if(ie||(ie=EX(),rr.set(lTe,ie,Zr.LocalStorage)),n.length>e){var le;const M=n[e],we={dn2:Vc(r),auth:i,browser:`${bo.browser}${bo.browserVersion} ${(le=window)!==null&&le!==void 0&&le.crossOriginIsolated?"SAB":""}`,trackAuth:l,mid:f,tid:v,lang:y,ts:_,"ZM-CID":ie,_ZM_MTG_TRACK_ID:se||"",customer_key:Vc(h),cfs:0,islch:1};if(N)try{const{vendor:me}=bE(N);me&&Object.assign(we,{vendor:me})}catch(me){console.log(me)}M.rwcAuth?Object.assign(we,{rwcAuth:M.rwcAuth}):M.rwcToken&&Object.assign(we,{rwcToken:M.rwcToken});const Ne=bo.isIE?1:bo.isIE||bo.isSupportEssentialAudioAndVideoAbility?2:0;Object.assign(we,{as_type:Ne}),[{key:Wje,queryKey:"opt"},{key:Gje,queryKey:"participantID"},{key:qje,queryKey:"zoomid"}].forEach((me=>{const Ye=rr.get(me.key);Ye!==void 0&&(we[me.queryKey]=Ye)}));const De=A&&R&&k;De&&Object.assign(we,{bid:Vc(A),confID:k}),rr.get(Kje)&&Object.assign(we,{isdj:1}),Object.assign(we,{from:bo.isAndroidBrowser?"android":bo.isIOSMobile?"ios":"other"}),L&&Object.assign(we,{useABAudio:Y}),Object.assign(we,{clientCaps:Zje({isAudioBridgeEnabled:L,isBO:De,mediaFeatureOptions:K})}),Object.assign(we,{clientCapsEx:Yje()}),Object.assign(we,{useWBVideo:q?1:0});const be=B?H.length>0?1:0:1;return Object.assign(we,{isCamera:be}),Object.assign(we,{clientOS:bo.isAndroidOrIOSBrowser||bo.isHarmonyOS?bo.isIOSMobile?"ios":"android":bo.isMacOS?"mac":"win"}),Object.assign(we,{audioFeature:Yo.getAudioFeatureFlag(L)}),{queryObject:{...we},rwgServer:M}}return null}function Zje(e){const{isAudioBridgeEnabled:n,isBO:r,mediaFeatureOptions:i}=e;let l=Jm.WebCameraIndication|Jm.SendMeetingTokenSeparately|Jm.SmartSummary|Jm.LocalRecording|Jm.LocalRecordingGrantPermission|Jm.UnifyErrorType;const f=Yo.getPTZCapability();return(f.pan||f.tilt||f.zoom)&&(l|=Jm.SupportFarEndCameraControl),Yo.isSupportVideoShare()&&(l|=Jm.SupportVideoShare),n&&Yo.isSupportAudioBridgeAVSync()&&(l|=Jm.WebrtcAudioRtcpTime),Yo.isSupportShareMultiStream()&&(l|=Jm.ShareMultiStream),Yo.isSupportVideoLTR()&&(l|=Jm.VideoLTR),r||(l|=Jm.RequestRemoteControl),Yo.isSupportFullHDVideo(i||"")&&(l|=Jm.SupportSend1080PVideo),Yo.isSupportFullHDVideoShare(i||"")&&(l|=Jm.SupportSend1080PVideoShare),l}function Yje(){let e=DEe.SupportPresenterAnnotation;return e|=DEe.SupportMMRCommandChannel,e}function M2(e,n){const r=()=>{const{socket:{zoomSocketStatus:i},meeting:{meetingStatus:l,isMeetingReset:f}}=e.value;return i!==wi.Closed&&l===Tu.Joined&&!f};return n?KA(SL(n),Gt(r)):KA(Gt(r))}const CP=zr.createAgent();let XZ;const FR=Q2.getInstance();let QZ;const EP=OQ.getInstance();let eY;const dTe={zoomSocketStatus:wi.Closed,xmppSocketStatus:wi.Closed,mainSessionSocketStatus:wi.Closed,retryCount:0,rwgServerList:[],xmppRetryCount:0},Jje=op({[`${i5}`]:We(((e,{payload:n})=>{e.zoomSocketStatus=n.status})),[`${zke}`]:We(((e,{payload:n})=>{const{rwgServerList:r}=e;r.find((i=>i.rwg===n.rwg))||r.push(n)})),[`${Tbe}`]:We(((e,{payload:n})=>{e.retryCount=n})),[`${PY}`]:We(((e,{payload:n})=>{e.xmppSocketStatus=n})),[`${LY}`]:We(((e,{payload:n})=>{e.mainSessionSocketStatus=n})),[`${vX}`]:We(((e,{payload:n})=>{e.xmppRetryCount=n})),[`${Wke}`]:()=>dTe},dTe),Xje={mainSessionEpics0:(e,n)=>e.pipe(co(`${Nme}`),_o(n),Gt((([,r])=>r.socket.mainSessionSocketStatus==="closed")),mr((([,r])=>{const{meeting:{svcUrl:i,meetingNumber:l,conId:f,isRlbTP:h}}=r,v=(function(y,_,A){return`wss://${y}/wc/media/${_}?type=m&cid=${A}&mode=2`})(i,l,f);return((y,_)=>(EP.connect(y,_),eY=new cb,gE((A=>EP.on(Zp.Message,A)),(A=>EP.off(Zp.Message,A))).pipe(Kn((A=>A.data))).subscribe(eY),eY))(v,h).pipe(Kn((y=>{try{return JSON.parse(y)}catch(_){return console.error(_),{evt:0}}})),Gt((y=>y.evt!==0)),NMe(),Kn((y=>iE(y))),pb(LY(wi.Connecting)))}))),mainSessionEpics1:(e,n)=>e.pipe(co(`${Nme}`),mr((()=>{const[r,i,l]=[Zp.Open,Zp.Close,Zp.Error].map((f=>gE((h=>EP.on(f,h)),(h=>EP.off(f,h)))));return wl(r.pipe(V2(LY(wi.Connected))),i.pipe(M2(n,500),Kn((()=>(He(em,{reason:np.Failover}),Qp(qu.DisconnectMChannel))))),l.pipe(M2(n,500),Kn((()=>(He(em,{reason:np.Failover}),Qp(qu.OnErrorMChannel))))))}))),mainSessionEpics2:e=>e.pipe(co(`${jke}`),V2(LY(wi.Closed)),ao((()=>{var n;EP.close(),(n=eY)===null||n===void 0||n.complete()})))},Qje={epics0:(e,n)=>e.pipe(co(`${kme}`),_o(n),Gt((([,r])=>r.socket.zoomSocketStatus===wi.Closed&&!!r.meeting.meetingId)),mr((([,r])=>(function(i){const{media:{patchedMediaSDKStatus:l},meeting:{isRlbTP:f,isRlbTPReady:h}}=i;return Yve([l===DU.Loading?si(EY,1).pipe(al(mE)):An([0]),f?h?An([0]):si(vY,1).pipe(al(mE)):An([0])])})(r).pipe(mr((()=>{const{socket:{retryCount:i,rwgServerList:l},meeting:f,breakoutRoom:h,audio:v,video:y}=n.value;let _;const A={...f,retryCount:i,rwgServerList:l};if(v){const{isWebRtcAudioCapable:N,webRtcAudioMode:L}=v;Object.assign(A,{isWebRtcAudioCapable:N,webRtcAudioMode:L})}if(y){const{cameraDevicesList:N,isWebrtcVideoCapable:L}=y;Object.assign(A,{cameraDevicesList:N,isWebrtcVideoCapable:L})}if(h&&h.currentRoom.status===vs.Joining){const{currentRoom:{boId:N,boConfId:L,boToken:B}}=h;Object.assign(A,{bid:N,botk:B,confID:L})}if(_=f.zlkJwtToken?(function(N){const L=uTe(N);if(L){const{queryObject:B,rwgServer:H}=L,{topic:q,cv:Y,meetingNumber:K,isUIToolkit:se}=N;return Object.assign(B,{topic:Vc(q),iccv:Y}),se&&Object.assign(B,{browser:B.browser+" UIToolkit"}),`wss://${H.rwg}/instantsdk/${K}?${new URLSearchParams(B).toString()}`}return null})(A):(function(N){const L=uTe(N);if(L){const{queryObject:B,rwgServer:H}=L,{cv:q,meetingNumber:Y}=N;return Object.assign(B,{jscv:q,browser:B.browser+" ComponentView"}),[{key:zje,queryKey:"cfs"}].forEach((K=>{const se=rr.get(K.key);se!==void 0&&(B[K.queryKey]=se)})),`wss://${H.rwg}/wc/api/${Y}?${new URLSearchParams(B).toString()}`}return null})(A),_){const N=(R=_,k=f.isRlbTP,CP.connect(R,k),XZ=new cb,gE((L=>CP.on(Zp.Message,L)),(L=>CP.off(Zp.Message,L)),(L=>L.data)).subscribe(XZ),XZ);return wl(N.pipe(Gt((L=>typeof L=="string")),Kn((L=>{try{return JSON.parse(L)}catch(B){return console.error(B),{evt:0}}})),NMe(),d6((L=>{if(L.evt!==0||!L.body||L.body.test!=="invalid parameters!")return X2(L);He(il,{errorCode:A1.InvalidParameter,reason:"Invalid parameter"})})),pb(i5({status:wi.Connecting,rwgUrl:_}))),N.pipe(Gt((L=>L instanceof ArrayBuffer)),Kn((L=>Y5e(L)))))}var R,k;return Yn})))))),epics1:(e,n)=>e.pipe(co(`${kme}`),_o(n),Gt((([,r])=>r.socket.zoomSocketStatus===wi.Closed&&!!r.meeting.meetingId)),mr((()=>{const[r,i,l,f]=[Zp.Open,Zp.Close,Zp.Error,Zp.Inactive].map((h=>gE((v=>CP.on(h,v)),(v=>CP.off(h,v)))));return wl(r.pipe(Nt((()=>wl(Di(i5({status:wi.Connected})),Uc(6e4).pipe(_o(n),Gt((([,h])=>h.meeting.meetingStatus===Tu.Initial&&!h.meeting.isMeetingReset)),Kn((()=>(He(em,{reason:np.Failover}),Qp(qu.NoHeartbeat))))))))),i.pipe(M2(n),Kn((()=>(He(em,{reason:np.Failover}),Qp(qu.Disconnect))))),f.pipe(M2(n),Kn((()=>(He(em,{reason:np.Failover}),Qp(qu.NoHeartbeat))))),l.pipe(_o(n),Nt((([,h])=>{const{meeting:{meetingStatus:v,isMeetingReset:y},socket:{rwgServerList:_,retryCount:A}}=h,R=[];return v===Tu.Initial&&_!=null&&_.length?R.push(Tbe(A+1),lv({retry:!0})):y||v!==Tu.Joined||(He(em,{reason:np.Failover}),R.push(Qp(qu.OnError))),An(R)}))))}))),epics2:(e,n)=>e.pipe(co(`${lv}`),mr((r=>{const i=[i5({status:wi.Closed})];return r.payload&&r.payload.retry?An(i):An(i).pipe(SL(100),ao((()=>{var l;n.value.socket.zoomSocketStatus===wi.Closed&&(CP.close(),(l=XZ)===null||l===void 0||l.complete())})))})))},eze=nh(Qje,{xmppEpics0:(e,n)=>e.pipe(co(`${F1}`),Nt((()=>{const{meeting:{meetingOptions:r,zlkJwtToken:i,isWebinar:l}}=n.value,f=[];return(r.isPollingEnabled||i||l)&&f.push(HZ()),An(f)}))),xmppEpics1:(e,n)=>e.pipe(co(`${HZ}`),_o(n),Gt((([,r])=>r.socket.xmppSocketStatus===wi.Closed)),mr((([,r])=>{const{meeting:{svcUrl:i,meetingNumber:l,conId:f,isRlbTP:h}}=r,v=(function(y,_,A){return`wss://${y}/wc/media/${_}?type=x&cid=${A}`})(i,l,f);return((y,_)=>(FR.connect(y,_),QZ=new cb,gE((A=>FR.on(tE.Message,A)),(A=>FR.off(tE.Message,A))).subscribe(QZ),QZ))(v,h).pipe(Gt((y=>(y==null?void 0:y.evt)!==void 0)),Kn((y=>Uke(y))),pb(PY(wi.Connecting)))}))),xmppEpics2:(e,n)=>e.pipe(co(`${HZ}`),mr((()=>{const[r,i,l]=[tE.Open,tE.Close,tE.Error].map((h=>gE((v=>FR.on(h,v)),(v=>FR.off(h,v))))),f=h=>Nt((()=>{const{socket:{xmppSocketStatus:v,xmppRetryCount:y}}=n.value,_=[];return v===wi.Connecting&&y<3?(_.push(vX(y+1)),_.push(Mme({retry:!0}))):(v===wi.Connected||y>=3)&&(He(em,{reason:np.Failover}),_.push(Qp(h))),An(_)}));return wl(r.pipe(ao((()=>{const h=(function(){const{isSupportEssentialAudioAndVideoAbility:v,isSupportAudioWorklet:y}=bo;return v&&y?11:10})();FR.join(h)})),Kn((()=>PY(wi.Connected)))),i.pipe(M2(n,500),f(qu.DisconnectXmpp)),l.pipe(M2(n,500),f(qu.OnErrorXmppChannel)))}))),xmppEpics3:(e,n)=>e.pipe(co(`${Mme}`),mr((r=>{var i;const l=[PY(wi.Closed)];return(i=r.payload)!==null&&i!==void 0&&i.retry?An(l):An(l).pipe(SL(100),ao((()=>{var f;n.value.socket.xmppSocketStatus===wi.Closed&&(FR.close(),(f=QZ)===null||f===void 0||f.complete())})))}))),xmppEpics4:(e,n)=>e.pipe(co(`${vX}`),Gt((r=>r.payload<=3)),Nt((r=>An([r]).pipe(SL(1e3*Math.pow(2,r.payload-1))))),M2(n),Kn((()=>HZ())))},Xje),fTe={audioEncodeStatus:"initial",audioDecodeStatus:"initial",videoEncodeStatus:"initial",videoDecodeStatus:"initial",sharingEncodeStatus:"initial",sharingDecodeStatus:"initial",assetsPath:"",mediaConstraints:void 0,enforceMultipleVideos:!1,enforceVirtualBackground:!1,isMediaAgentInitialized:!1,disableRenderLimits:!1},tze=op({[`${Bme}`]:We(((e,{payload:n})=>{e.audioDecodeStatus=n})),[`${Lme}`]:We(((e,{payload:n})=>{e.audioEncodeStatus=n})),[`${BY}`]:We(((e,{payload:n})=>{e.sharingDecodeStatus=n})),[`${Fme}`]:We(((e,{payload:n})=>{e.sharingEncodeStatus=n})),[`${Hme}`]:We(((e,{payload:n})=>{e.videoDecodeStatus=n})),[`${Vme}`]:We(((e,{payload:n})=>{e.videoEncodeStatus=n})),[`${Obe}`]:We(((e,{payload:n})=>{e.mediaConstraints=n.mediaConstraints,e.assetsPath=n.assetsPath,e.enforceMultipleVideos=!!n.enforceMultipleVideos,e.enforceVirtualBackground=n.enforceVirtualBackground,e.skipJsMedia=n.skipJsMedia,e.patchJsMedia=n.patchJsMedia,e.alternativeNameForVideoPlayer=n.alternativeNameForVideoPlayer,n.enforceMultipleVideos&&typeof n.enforceMultipleVideos=="object"&&(e.disableRenderLimits=!!n.enforceMultipleVideos.disableRenderLimits)})),[`${qke}`]:We(((e,{payload:n})=>{const{type:r,encryptKey:i,additionalType:l}=n,f={encryptKey:i,additionalType:l};r==="audio"?e.audioEncrypt=f:r==="video"?e.videoEncrypt=f:r==="sharing"&&(e.sharingEncrypt=f)})),[`${Kke}`]:We(((e,{payload:n})=>{e.isEnableDecoderInWorklet=n})),[`${VY}`]:We(((e,{payload:n})=>{e.patchedMediaSDKStatus=n})),[`${Zke}`]:We(((e,{payload:n})=>{e.assetsPath=n})),[`${$me}`]:We(((e,{payload:n})=>{e.isMediaAgentInitialized=n})),[`${Yke}`]:e=>({...fTe,mediaConstraints:e.mediaConstraints,assetsPath:e.assetsPath,enforceMultipleVideos:e.enforceMultipleVideos,disableRenderLimits:e.disableRenderLimits,enforceVirtualBackground:e.enforceVirtualBackground,alternativeNameForVideoPlayer:e.alternativeNameForVideoPlayer})},fTe),{InitSuccessVideo:kpe,InitSuccessAudio:Mpe,InitSuccessSharing:Npe,InitFailedVideo:Ppe,InitFailedAudio:Lpe,InitFailedSharing:Bpe,HealthCheckFailed:pTe,AudioWebsocketBroken:hTe,VideoWebsocketBroken:mTe,AudioStreamFailed:gTe,VideoStreamFailed:vTe,WebglContextInvalid:bTe,WasmMemoryFail:yTe,AudioStreamMuted:STe,RecoverWebrtcAudio:CTe,AudioBridgeSocketConnectionError:ETe,VideoStreamMuted:_Te}=Cn,Cu=sp(Yo.getInstance()),oLe=Dd.getInstance(),wTe=oLe.makeLogger(["Media Agent"]),tY=[],nze={epics0:(e,n)=>e.pipe(co(`${om}`),mr((r=>{var i;const{meeting:{isMeetingReset:l}}=n.value;return bo.mediaFeatureOptions=(i=r.payload)===null||i===void 0?void 0:i.mediaFeatureOptions,e.pipe(Au(e.pipe(co(`${lv}`),Gt((f=>{var h;return!((h=f.payload)!==null&&h!==void 0&&h.retry)})),Ys(1))),co(`${F1}`),Ys(1),cE((()=>{var f;const{logger:h,media:{mediaConstraints:v,assetsPath:y,enforceMultipleVideos:_,enforceVirtualBackground:A},meeting:{meetingId:R,meetingNumber:k,mediaFeatureOptions:N,webMediaBlockConfig:L}}=n.value,B=h!=null&&(f=h.options)!==null&&f!==void 0&&f.enable?Dd.getInstance().makeLogger(["MEDIA SDK"]):void 0;return(function(H){const{media:{patchedMediaSDKStatus:q}}=H;return q===DU.Loading?Ra(si(EY,1)):Promise.resolve()})(n.value).then((()=>{const H=[];return Cu.init({...rDe(_,A),globalTracingLogger:Z6e(B),mid:R,meetingNumber:k,mediaSDKConfig:{mediaFeatureOptions:N,webMediaBlockConfig:L,mediaSDKCDNPath:y},rwgAgent:zr.createAgent()}),H.push($me(!0)),l&&v!==void 0&&y!==void 0&&H.push(Pme()),H})).catch((()=>[]))})))}))),epics1:(e,n)=>e.pipe(co(`${om}`),Gt((r=>{const{payload:{mediaSDKPath:i}}=r,{media:{skipJsMedia:l,patchJsMedia:f,assetsPath:h},meeting:{isMeetingReset:v}}=n.value;return!l&&oDe(h)&&!!f&&!!i&&!v})),mr((r=>{const{payload:{mediaSDKPath:i}}=r,l=bQ(i);return An(new Promise(((f,h)=>{const v=`${l}/${XR}`;"JsMediaSDK_Instance"in window&&(window.JsMediaSDK_Instance_backup=window.JsMediaSDK_Instance,delete window.JsMediaSDK_Instance),lQ(v,(()=>{"JsMediaSDK_Instance_backup"in window&&delete window.JsMediaSDK_Instance_backup,wTe.info(`patched media sdk url:${v}`),f("")}),(()=>{"JsMediaSDK_Instance_backup"in window&&(window.JsMediaSDK_Instance=window.JsMediaSDK_Instance_backup,delete window.JsMediaSDK_Instance_backup),wTe.error(`cannot load patched media sdk :${v}`),h()}))}))).pipe(Nt((()=>(He(EY),An([VY(DU.Done),Zke(l)])))),tp((()=>(He(EY),An([VY(DU.Done)])))),pb(VY(DU.Loading)))}))),epics2:(e,n)=>(function(r,i){return r.pipe(co(`${Pme}`),Gt((()=>{const{media:{assetsPath:l,mediaConstraints:f}}=i.value;return l!==void 0&&f!==void 0})),mr((()=>{const{media:{isMediaAgentInitialized:l}}=i.value;return l?An([0]):r.pipe(co(`${$me}`),Gt((f=>!!f.payload)),Ys(1))})))})(e,n).pipe(ao((()=>{const{media:{assetsPath:r,mediaConstraints:i}}=n.value;Cu.notifySDKMeetingReady(),r&&i&&Cu.setAssetsAndConstraint(r,i),U2(n).pipe(mr((l=>An(rme.acquire().then((()=>l)))))).subscribe((l=>{const{meeting:{svcUrl:f,meetingNumber:h,conId:v,e2eEncrypt:y,userId:_,isWebinar:A,enableWebtransport:R,webtransportPort:k,isUseWBVideo:N,mediasdkConfig:L,reportDomain:B,abToken:H,confId:q},media:{alternativeNameForVideoPlayer:Y,enforceMultipleVideos:K,disableRenderLimits:se},audio:ie,video:le}=n.value;var M;l&&(Cu.connect({svcUrl:f,meetingNumber:h,conId:v,confId:q,e2eEncrypt:y,isViewOnly:Ku(l.userRole),currentUserId:_,isWebinar:A,reportDomain:B,abToken:H??"",enableWebtransport:!!R,webtransportPort:k??0,isWebRtcVideoCapable:N,isWebRtcAudioCapable:!(ie==null||!ie.isWebRtcAudioCapable),rendererType:(M=le==null?void 0:le.rendererType)!==null&&M!==void 0?M:0,webrtcMode:$$e(!(ie==null||!ie.isWebRtcAudioCapable),N),mediasdkConfig:L??{},enforceMultipleVideos:K,disableRenderLimits:se}),Cke({mediaSDK:()=>Cu.instance,tagName:Y,failover:"1"}))}))})),mr((()=>gE((r=>Cu.registerCallback(r)),(r=>Cu.unregisterCallback(r)),((r,i)=>({type:r,data:i}))).pipe(Kn((r=>Gke(r))))))),epics3:e=>bs(e,[kpe,Mpe,Npe,Ppe,Lpe,Bpe]).pipe(MMe((n=>{const{payload:{type:r,data:i}}=n;if(r===Mpe||r===Lpe){if(i===zp.EncodeSuccess)return He(bxe),Di(Lme("success"));if(i===zp.DecodeSuccess)return He(yxe),Di(Bme("success"));if(i===zp.EncodeFailed)return He(_xe),Di(Lme("failed"));if(i===zp.DecodeFailed)return He(wxe),Di(Bme("failed"))}else if(r===kpe||r===Ppe){if(i===zp.EncodeSuccess)return He(Sxe),Di(Vme("success"));if(i===zp.DecodeSuccess)return He(Cxe),Di(Hme("success"));if(i===zp.EncodeFailed)return He(Axe),Di(Vme("failed"));if(i===zp.DecodeFailed)return He(Txe),Di(Hme("failed"))}else if(r===Npe||r===Bpe){if(i===zp.EncodeSuccess)return He(Exe),Di(Fme("success"));if(i===zp.DecodeSuccess)return He(jhe),Di(BY("success"));if(i===zp.EncodeFailed)return He(Oxe),Di(Fme("failed"));if(i===zp.DecodeFailed)return He(Ixe),Di(BY("failed"));if(r===Npe&&i===void 0)return He(jhe),Di(BY("success"))}}))),epics4:(e,n)=>bs(e,[kpe,Mpe]).pipe(mr((()=>typeof navigator.mediaDevices=="object"?wl(j2(),wl(bs(e,Cn.StartVideoCaptureSuccess),bs(e,Cn.DeviceChangeEvent),bs(e,Cn.UserGrantCaptureAudio).pipe(Gt((()=>!n.value.audio.isUserGrantCaptureAudio))),bs(e,Cn.JoinComputerAudioComplete).pipe(Gt((r=>{var i;return!((i=r.payload.data)===null||i===void 0||!i.isPassive)}))),si(zhe).pipe(Gt((r=>r.state==="granted")))).pipe(Nt((()=>j2().pipe(ao((()=>{setTimeout((()=>{He(Rxe)}),50)}))))))).pipe(_o(n),Nt((([r,i])=>{const l=[UMe(r.microphones),jMe(r.speakers),mbe(r.cameras)];if(i.audio){const{audio:{activeMicrophone:v,activeSpeaker:y,microphoneDevicesList:_,speakerDevicesList:A,isUsingMediaPlayback:R},video:{cameraDevicesList:k,activeCamera:N,isUsingMediaPlayback:L}}=i,B=Do(i),{microphones:H,speakers:q,cameras:Y}=r,K=_.filter((le=>H.findIndex((M=>M.deviceId===le.deviceId))===-1)),se=A.filter((le=>q.findIndex((M=>M.deviceId===le.deviceId))===-1)),ie=k.filter((le=>Y.findIndex((M=>M.deviceId===le.deviceId))===-1));if(K.length>0){if(K.some((le=>Pfe(le,v,_)))){const le=hU(H);R||Cu.changeMicrophone("default",le==null?void 0:le.label,!(B==null||!B.muted)),l.push(L5("default"))}}else if(v==="default"){const le=hU(_),M=hU(H);!R&&_.length>0&&(le==null?void 0:le.label)!==(M==null?void 0:M.label)&&Cu.changeMicrophone("default",M==null?void 0:M.label,!(B==null||!B.muted))}var f,h;se.length>0?se.some((le=>Pfe(le,y,A)))&&(Cu.changeSpeaker("default"),l.push(IQ("default"))):y==="default"&&A.length>0&&((f=hU(A))===null||f===void 0?void 0:f.label)!==((h=hU(q))===null||h===void 0?void 0:h.label)&&Cu.changeSpeaker("default"),ie.length>0&&ie.some((le=>Pfe(le,N,k)))&&(L||Cu.stopCaptureVideo(),l.push(_L(bo.isAndroidOrIOSBrowser?i2.User:"default")))}return An(l)}))):Yn))),epics5:(e,n)=>q0(e,la).pipe(ao((r=>{const{type:i,payload:{body:l}}=r,f=i===`${iE}`;if(l.add){const h=l.add.map((v=>({userid:v.id,sn:v.zoomID&&iv(v.zoomID)})));if(!f){const{meeting:{gcmSessinKey:v}}=n.value;Cu.sendUserNodeList(h,v)}Cu.updateUserMediaSN({added:h,isFromMainSession:f,iVType:G0.SHARING_DECODE}),f&&Cu.updateUserMediaSN({added:h,isFromMainSession:f,iVType:G0.AUDIO_DECODE})}if(l.remove&&l.remove.length>0){if(!f){const{meeting:{gcmSessinKey:h}}=n.value;Cu.sendUserNodeList(l.remove.map((v=>({userid:v.id,bremove:!0}))),h)}Cu.updateUserMediaSN({removed:l.remove.map((h=>h.id)),isFromMainSession:f,iVType:G0.SHARING_DECODE}),f&&Cu.updateUserMediaSN({removed:l.remove.map((h=>h.id)),isFromMainSession:f,iVType:G0.AUDIO_DECODE})}})),yi(Yn)),epics6:e=>bs(e,Cn.AesGcmIvResponse).pipe(ao((n=>{const{payload:{data:{workerType:r,iv:i}}}=n,l=rr.get(Bi.WebclientIVState);if(l){const f={...l,[r]:i};rr.set(Bi.WebclientIVState,f,Zr.SessionStorage)}})),yi(Yn)),epics7:e=>e.pipe(co(`${X2}`),Gt((n=>[jme,eEe,Ibe].includes(n.payload.evt))),Kn((n=>{const{payload:{evt:r,body:{encryptKey:i,additionalType:l}}}=n;return qke({type:r===jme?"audio":r===eEe?"video":"sharing",encryptKey:i,additionalType:l})}))),epics8:e=>e.pipe(co(`${Obe}`),ao((n=>{const{payload:r}=n;Yl.setMediaOption({assetsPath:r.assetsPath,enforceMultipleVideos:r.enforceMultipleVideos,enforceVirtualBackground:r.enforceVirtualBackground,alternativeNameForVideoPlayer:r.alternativeNameForVideoPlayer})})),yi(Yn)),epics9:e=>e.pipe(co(`${DL}`,`${hX}`),ao((()=>{ov.getInstance().inProgress&&(ov.getInstance().disconnect(),rme.watch(ov.getInstance().destroy()))})),yi(Yn)),epics10:e=>e.pipe(co(`${DL}`,`${hX}`),mr((()=>"permissions"in navigator?["microphone","camera"].map((n=>{navigator.permissions.query({name:n}).then((r=>{const i=()=>{He(zhe,{name:n,state:r.state})};i(),r.addEventListener("change",i),tY.push((()=>{r.removeEventListener("change",i)}))})).catch((()=>{}))})):Yn)),yi(Yn)),epics11:e=>e.pipe(co(`${Abe}`),Gt((n=>n.payload===Tu.Closed)),ao((()=>{tY.length>0&&(tY.forEach((n=>n())),tY.length=0)})),yi(Yn)),epics12:(e,n)=>bs(e,[pTe,Ppe,Lpe,Bpe,hTe,mTe,gTe,vTe,bTe,yTe,STe,CTe,ETe,_Te]).pipe(Nt((r=>{const{payload:{type:i,data:l}}=r;let f,h;if(i===hTe||i===ETe)f={message:"Audio connection failed. Please refresh your browser to reconnect.",type:"audio",code:Wh.AudioConnectionFailed};else if(i===mTe)f={message:"Connection to remote video has failed. Please refresh your browser to try again.",type:"video",code:Wh.VideoConnectionFailed};else if(i===gTe)l===kU.Exception?f={message:"Can't access your microphone. Please refresh your browser to try again.",type:"audio",code:Wh.AudioStreamEnded}:l===kU.PermissionReset&&(f={message:"Your browser is preventing access to your microphone.Please grant the permission.",type:"audio",code:Wh.MicrophonePermissionReset});else if(i===vTe)l===kU.Exception?f={message:"Can't access your camera. Please refresh your browser to try again.",type:"video",code:Wh.VideoStreamEnded}:l===kU.PermissionReset&&(f={message:"Your browser is preventing access to your camera.Please grant the permission.",type:"video",code:Wh.CameraPermissionReset});else if(i===bTe)f={message:"Oops! Something went wrong. Please close all browsers and rejoin the meeting.",type:"video",code:Wh.WebGlContextInvalid};else if(i===yTe)f={message:"Uh-oh! Youre running low on memory. Please close all browsers and rejoin the meeting.",type:"video",code:Wh.WasmOutOfMemory};else if(i===pTe){let[y,_]=["",0];l===-129?(y="sharing",_=Wh.SharingStreamFailed):[-130,-135].includes(l)?(y="video",_=Wh.VideoStreamFailed):[-131,-136].includes(l)&&(y="audio",_=Wh.AudioStreamFailed),f={message:"Oops! Something went wrong. Please close all browsers and rejoin the meeting.",type:y,code:_}}else if(i===STe){const y="audio";let[_,A]=[0,""];l?(_=Wh.MicrophoneMuted,A="Your mic is muted in system or browser settings. Please open your settings to unmute and adjust the level."):(_=Wh.AudioStreamMuted,A="Audio was interrupted by the system. Please click anywhere to resume playback.",h=ime().pipe(Au(bs(e,Cn.AudioStreamUnmuted).pipe(Ys(1))),ao((()=>{iDe(Cu,n.value)})))),f={message:A,type:y,code:_}}else if(i===CTe)l===!1&&(f={message:"Audio playback was interrupted. Please click anywhere to resume playback.",type:"audio",code:Wh.AudioPlaybackInterrupted});else if(i===_Te&&n.value.video.isCurrentUserStartedVideo){const y="video",_=Wh.VideoStreamMuted;h=ime().pipe(Au(bs(e,Cn.VideoStreamUnmuted).pipe(Ys(1))),ao((()=>{(function(R,k){const{video:{isCurrentUserStartedVideo:N,activeCamera:L,isUsingMediaPlayback:B,customizedVideoOption:H}}=k;if(N&&!B){const{captureWidth:q,captureHeight:Y}=EQ(H);R.changeCamera(L,o6.includes(L),{width:q,height:Y},!0)}})(Cu,n.value)}))),f={message:"Video was interrupted by the system. Please click anywhere to resume.",type:y,code:_}}var v;return f&&(oLe.report(`active media failed. reason:${i}; message:${f.message}`,`${(v=f.type)===null||v===void 0?void 0:v.replace(/^./,(y=>y.toUpperCase()))} exception flow`),He(xxe,f)),h??An([])})),Nt((()=>Yn))),epics13:e=>oo(e,4366).pipe(ao((n=>{const{payload:r}=n;Cu.bypassMediaMessage(r)})),Nt((()=>Yn))),epics14:(e,n)=>bs(e,Cn.NotifyUIFailover).pipe(Gt((()=>!n.value.meeting.isMeetingReset&&n.value.meeting.meetingStatus===Tu.Joined)),Kn((r=>{const{payload:{data:i}}=r;He(em,{reason:np.Failover});let l=qu.NotifyUiFailover;return(i==null?void 0:i.audio)!==void 0&&(bo.isAndroidOrIOSBrowser||bo.isHarmonyOS||i.audio!==aSe.FallbackToWasm||rr.set(Bi.VideoSDKWebRTCAudioFallbackWasm,1,Zr.SessionStorage)),(i==null?void 0:i.video)!==void 0&&(l=qu.NotifyUIWMSCFailover,i.video===aSe.FallbackToWasm&&rr.set(Bi.VideoSDKWebRTCVideoFallbackWasm,1,Zr.SessionStorage)),Qp(l)})))},oze=nh(nze),ATe={processorCreatedList:[],processorInstanceList:[]},sze={meeting:Vje,socket:Jje,participants:S6e,media:tze,processor:op({[`${MNe}`]:We(((e,{payload:n})=>{e.processorCreatedList.push(n)})),[`${NNe}`]:We(((e,{payload:n})=>{e.processorInstanceList.push(n)})),[`${PNe}`]:We(((e,{payload:n})=>{const r=e.processorInstanceList.findIndex((i=>i.name===n.name&&i.type===n.type));r>=0&&e.processorInstanceList.splice(r,1)})),[`${LNe}`]:()=>({...ATe})},ATe)},rze=tLe;function TTe(e){return(function(n){for(var r=Object.keys(n),i={},l=0;l<r.length;l++){var f=r[l];typeof n[f]=="function"&&(i[f]=n[f])}var h,v=Object.keys(i);try{(function(y){Object.keys(y).forEach((function(_){var A=y[_];if(A(void 0,{type:ZX.INIT})===void 0)throw new Error(Wp(12));if(A(void 0,{type:ZX.PROBE_UNKNOWN_ACTION()})===void 0)throw new Error(Wp(13))}))})(i)}catch(y){h=y}return function(y,_){if(y===void 0&&(y={}),h)throw h;for(var A=!1,R={},k=0;k<v.length;k++){var N=v[k],L=i[N],B=y[N],H=L(B,_);if(H===void 0)throw _&&_.type,new Error(Wp(14));R[N]=H,A=A||H!==B}return(A=A||v.length!==Object.keys(y).length)?R:y}})({...sze,...e})}class GC extends Dme{static createClient(){if(!this.meetingClient){const n=(function(){const r=(function(v){v===void 0&&(v={});var y,_=new hSe.constructor(hSe.schedulerActionCtor),A=new cb,R=function(k){y=k;var N=new cb,L=new cb,B=N.asObservable().pipe(al(_)),H=new Z5e(L.pipe(al(_)),y.getState());return A.pipe(Kn((function(q){var Y=q(B,H,v.dependencies);if(!Y)throw new TypeError('Your root Epic "'+(q.name||"<anonymous>")+`" does not return a stream. Double check you're not missing a return statement!`);return Y})),Nt((function(q){return An(q).pipe(Rhe(_),al(_))}))).subscribe(y.dispatch),function(q){return function(Y){var K=q(Y);return L.next(y.getState()),N.next(Y),K}}};return R.run=function(k){A.next(k)},R})(),{epicSubject:i,rootEpic:l}=(function(){const v=new MFe(Jke(Uje,eze,E6e,oze));return{epicSubject:v,rootEpic:(y,_,A)=>v.pipe(Au(y.pipe(co(`${Eke}`))),Nt((R=>R(y,_,A))))}})(),f=[r],h=eLe(TTe(),rze((function(){for(var v=arguments.length,y=new Array(v),_=0;_<v;_++)y[_]=arguments[_];return function(A){return function(){var R=A.apply(void 0,arguments),k=function(){throw new Error(Wp(15))},N={getState:R.getState,dispatch:function(){return k.apply(void 0,arguments)}},L=y.map((function(B){return B(N)}));return k=tLe.apply(void 0,L)(R.dispatch),nTe(nTe({},R),{},{dispatch:k})}}})(...f)));return h.asyncReducers={},h.injectReducer=(v,y)=>{h.asyncReducers[v]===void 0&&(h.asyncReducers[v]=y,h.replaceReducer(TTe(h.asyncReducers)))},h.injectEpic=v=>{i.next(v)},r.run(l),h})();this.meetingClient=new kje(n)}return this.meetingClient}}function ize(e,n,r){return(n=(function(i){var l=(function(f,h){if(typeof f!="object"||!f)return f;var v=f[Symbol.toPrimitive];if(v!==void 0){var y=v.call(f,h);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(f)})(i,"string");return typeof l=="symbol"?l:l+""})(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function OTe(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable}))),r.push.apply(r,i)}return r}function rg(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?OTe(Object(r),!0).forEach((function(i){ize(e,i,r[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OTe(Object(r)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))}))}return e}function W5(e,n){if(e==null)return{};var r,i,l=(function(h,v){if(h==null)return{};var y={};for(var _ in h)if({}.hasOwnProperty.call(h,_)){if(v.indexOf(_)!==-1)continue;y[_]=h[_]}return y})(e,n);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(i=0;i<f.length;i++)r=f[i],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}const p6="2.2.12",nY="INVALID_PARAMETERS",aze="https://dmogdx0jrul3u.cloudfront.net/videosdk/".concat(p6,"/lib"),cze="https://source.zoom.us/videosdk/".concat(p6,"/lib"),lze="https://jssdk.zoomus.cn/videosdk/".concat(p6,"/lib"),Vpe=e=>typeof e=="string"&&e.length>0,sLe=e=>{let n="";switch(e){case"Global":n=cze;break;case"CN":n=lze;break;case"CDN":n=aze;break;default:n=e}return n},rLe=["userId","avatar","displayName","isHost","audio","muted","bVideoOn","sharerOn","sharerPause","userIdentity","isSpeakerOnly","bVideoShare","bShareAudioOn","userGuid","isPhoneUser","isInFailover",{from:"isCoHost",to:"isManager"},{from:"bAllowISORecord",to:"isAllowIndividualRecording"},{from:"bVideoConnect",to:"isVideoConnect"},{from:"bShareToBORooms",to:"bShareToSubsession"},{from:"bid",to:"subsessionId"},{from:"phoneNumber",to:e=>e===void 0?{}:{phoneNumber:e}}],iLe=[...rLe,{from:"userGUID",to:"userGuid"},{from:"bCoHost",to:e=>({isManager:!!e})},{from:"userType",to:e=>({isPhoneUser:!(5&~e)})},{from:"bid",to:e=>e?{subsessionId:e}:{}},{from:"bInFailover",to:"isInFailover"}],uze=iLe.map((e=>typeof e=="string"?e:e.from));function aLe(e,n){return typeof e=="string"?{["".concat(e)]:n}:typeof e.to=="string"?{["".concat(e.to)]:n}:e.to(n)}function h2(e){if(e)return rLe.reduce(((n,r)=>{const i=typeof r=="string"?r:r.from,l=aLe(r,e[i]);return rg(rg({},n),l)}),{})}function Hpe(e){if(e)return Object.keys(e).reduce(((n,r)=>{const i=uze.indexOf(r);if(i>-1){const l=iLe[i],f=typeof l=="string"?l:l.from,h=aLe(l,e[f]);return rg(rg({},n),h)}return n}),{})}const nn=Symbol("stream");class dze{constructor(n){this[nn]=void 0,this[nn]=n}startAudio(n){return this[nn].startAudio(n)}stopAudio(){return this[nn].stopAudio()}muteAudio(n){return this[nn].muteAudio(n)}unmuteAudio(n){return this[nn].unmuteAudio(n)}inviteByPhone(n,r,i,l){return this[nn].dialOut(n,r,i,l)}cancelInviteByPhone(n,r,i){return this[nn].cancelDialOut(n,r,i)}hangup(){return this[nn].hangup()}getCurrentSessionCallinInfo(){return this[nn].getDialInInfo()}muteShareAudio(n){return this[nn].muteShareAudio(n)}unmuteShareAudio(n){return this[nn].unmuteShareAudio(n)}subscribeAudioStatisticData(n){return this[nn].subscribeAudioStatisticData(n)}unsubscribeAudioStatisticData(n){return this[nn].unsubscribeAudioStatisticData(n)}muteUserAudioLocally(n){return this[nn].muteUserAudioLocally(n)}unmuteUserAudioLocally(n){return this[nn].unmuteUserAudioLocally(n)}adjustUserAudioVolumeLocally(n,r){return this[nn].adjustUserAudioVolumeLocally(n,r)}enableBackgroundNoiseSuppression(n){return this[nn].enableBackgroundNoiseSuppression(n)}enableSyncButtonsOnHeadset(n){return this[nn].enableSyncButtonsOnHeadset(n)}muteAllUserAudioLocally(){return this[nn].muteAllUserAudioLocally()}unmuteAllUserAudioLocally(){return this[nn].unmuteAllUserAudioLocally()}enableOriginalSound(n){return this[nn].enableOriginalSound(n)}callCRCDevice(n,r){return this[nn].callCRCDevice(n,r)}cancelCallCRCDevice(n,r){return this[nn].cancelCallCRCDevice(n,r)}startSecondaryAudio(n,r){return this[nn].startSecondaryAudio(n,r)}stopSecondaryAudio(){return this[nn].stopSecondaryAudio()}muteAllAudio(){return this[nn].muteAllAudio()}unmuteAllAudio(){return this[nn].unmuteAllAudio()}muteAudioUponStartAudio(n){return this[nn].muteAudioUponEntry(n)}allowAudioUnmutedBySelf(n){return this[nn].allowUnmuteAudioThemselves(n)}isAudioMuted(n){return this[nn].isAudioMuted(n)}getMicList(){return this[nn].getMicList()}getSpeakerList(){return this[nn].getSpeakerList()}getActiveMicrophone(){return this[nn].getActiveMicrophone()}getActiveSpeaker(){return this[nn].getActiveSpeaker()}switchMicrophone(n){return this[nn].switchMicrophone(n)}switchSpeaker(n){return this[nn].switchSpeaker(n)}isSupportPhoneFeature(){return this[nn].isSupportCallOut()}getSupportCountryInfo(){return this[nn].getDialOutCountries()}getInviteByPhoneStatus(){return this[nn].getDialOutStatus()}getShareAudioStatus(){return this[nn].getShareAudioStatus()}isOthersShareAudioMutedLocally(n){return this[nn].isOthersShareAudioMutedLocally(n)}getAudioStatisticData(){return this[nn].getAudioStatisticData()}isUserAudioMutedLocally(n){return this[nn].isUserAudioMutedLocally(n)}getUserVolumeLocally(n){return this[nn].getUserVolumeLocally(n)}isSupportMicrophoneAndShareAudioSimultaneously(){return this[nn].isSupportMicrophoneAndShareAudioSimultaneously()}getAudioMediaPlaybackController(){return this[nn].getAudioMediaPlaybackController()}isAllowAudioUnmutedBySelf(){return this[nn].isAllowToUnmute()}getSessionSIPAddress(){return this[nn].getSessionSIPAddress()}startVideo(n){return this[nn].startVideo(n)}stopVideo(){return this[nn].stopVideo()}createProcessor(n){return this[nn].createProcessor(n)}addProcessor(n){return this[nn].addProcessor(n)}removeProcessor(n){return this[nn].removeProcessor(n)}renderVideo(n,r,i,l,f,h,v,y){return this[nn].renderVideo(n,r,i,l,f,h,v,y)}stopRenderVideo(n,r,i,l){let f=arguments.length>4&&arguments[4]!==void 0&&arguments[4],h=arguments.length>5?arguments[5]:void 0;return this[nn].stopRenderVideo(n,r,i,l,f,h)}updateVideoCanvasDimension(n,r,i){return this[nn].updateVideoCanvasDimension(n,r,i)}adjustRenderedVideoPosition(n,r,i,l,f,h,v){return this[nn].adjustRenderedVideoPosition(n,r,i,l,f,h,v)}clearVideoCanvas(n,r){return this[nn].clearVideoCanvas(n,r)}mirrorVideo(n){return this[nn].mirrorVideo(n)}enableHardwareAcceleration(n){return this[nn].enableHardwareAcceleration(n)}previewVirtualBackground(n,r,i,l){return this[nn].previewVirtualBackground(n,r,i,l)}updateVirtualBackgroundImage(n,r){return this[nn].updateVirtualBackgroundImage(n,r)}stopPreviewVirtualBackground(){return this[nn].stopPreviewVirtualBackground()}previewVideoMask(n,r){return this[nn].previewVideoMask(n,r)}updateVideoMask(n){return this[nn].updateVideoMask(n)}stopPreviewVideoMask(){return this[nn].stopPreviewVideoMask()}switchCamera(n){return this[nn].switchCamera(n)}subscribeVideoStatisticData(n){return this[nn].subscribeVideoStatisticData(n)}unsubscribeVideoStatisticData(n){return this[nn].unsubscribeVideoStatisticData(n)}attachVideo(n,r,i){return this[nn].attachVideo(n,r,i)}detachVideo(n,r){return this[nn].detachVideo(n,r)}spotlightVideo(n,r){return this[nn].spotlight(n,r!=null&&r)}removeSpotlightedVideo(n){return this[nn].removeSpotlight(n)}removeAllSpotlightedVideos(){return this[nn].removeAllSpotlights()}screenshotVideo(n){return this[nn].screenshotVideo(n)}isCapturingVideo(){return this[nn].isCapturingVideo()}isCameraTaken(){return this[nn].isCameraTaken()}getActiveVideoId(){return this[nn].getActiveVideoId()}getActiveCamera(){return this[nn].getActiveCamera()}getCameraList(){return this[nn].getCameraList()}isCaptureForbidden(){return this[nn].isCaptureForbidden()}getVideoMaxQuality(){return this[nn].getVideoMaxQuality()}getReceivedVideoDimension(){return this[nn].getReceivedVideoDimension()}isSupportMultipleVideos(){return this[nn].isSupportMultipleVideos()}getMaxRenderableVideos(){return this[nn].getMaxRenderableVideos()}isSupportHDVideo(){return this[nn].isSupportHDVideo()}isSupportVirtualBackground(){return this[nn].isSupportVirtualBackground()}isSupportVideoProcessor(){return this[nn].isSupportVideoProcessor()}isSupportAudioProcessor(){return this[nn].isSupportAudioProcessor()}isSupportShareProcessor(){return this[nn].isSupportShareProcessor()}getVirtualbackgroundStatus(){return this[nn].getVirtualbackgroundStatus()}getVideoStatisticData(){return this[nn].getVideoStatisticData()}isRenderSelfViewWithVideoElement(){return this[nn].isRenderSelfViewWithVideoElement()}getCapturedVideoResolution(){return this[nn].getCapturedVideoResolution()}getVideoMaskStatus(){return this[nn].getVideoMaskStatus()}isVideoMirrored(){return this[nn].isVideoMirrored()}getSpotlightedUserList(){return this[nn].getSpotlightedUserList().map((n=>h2(n)))}getVideoMediaPlaybackController(){return this[nn].getVideoMediaPlaybackController()}startShareView(n,r){return this[nn].startShareView(n,r)}stopShareView(){return this[nn].stopShareView()}attachShareView(n,r){return this[nn].attachShareView(n,r)}detachShareView(n,r){return this[nn].detachShareView(n,r)}switchShareView(n){return this[nn].switchShareView(n)}startShareScreen(n,r){return(r==null?void 0:r.broadcastToSubsession)!==void 0&&Object.assign(r||{},{broadcastToBreakoutRoom:r==null?void 0:r.broadcastToSubsession}),this[nn].startShareScreen(n,r)}pauseShareScreen(){return this[nn].pauseShareScreen()}resumeShareScreen(){return this[nn].resumeShareScreen()}stopShareScreen(){return this[nn].stopShareScreen()}lockShare(n){return this[nn].lockShare(n)}updateSharingCanvasDimension(n,r){return this[nn].updateSharingCanvasDimension(n,r)}switchSharingSecondaryCamera(n){return this[nn].switchSharingSecondaryCamera(n)}setSharePrivilege(n){return this[nn].setSharePrivilege(n)}shareToSubsession(){return this[nn].shareToBreakoutRoom()}stopShareToSubsession(){return this[nn].stopShareToBreakoutRoom()}enableOptimizeForSharedVideo(n){return this[nn].enableOptimizeForSharedVideo(n)}updateSharedVideoQuality(n){return this[nn].updateSharedVideoQuality(n)}subscribeShareStatisticData(n){return this[nn].subscribeShareStatisticData(n)}unsubscribeShareStatisticData(n){return this[nn].unsubscribeShareStatisticData(n)}screenshotShareView(n){return this[nn].screenshotSharedContent(n)}isShareLocked(){return this[nn].isShareLocked()}getSharePrivilege(){return this[nn].getSharePrivilege()}getActiveShareUserId(){return this[nn].getActiveShareUserId()}getShareStatus(){return this[nn].getShareStatus()}getShareUserList(){return this[nn].getShareUserList().map((n=>h2(n)))}isStartShareScreenWithVideoElement(){return this[nn].isStartShareScreenWithVideoElement()}isOptimizeForSharedVideoEnabled(){return this[nn].isOptimizeForSharedVideoEnabled()}isSupportOptimizedForSharedVideo(){return this[nn].isSupportOptimizedForSharedVideo()}getShareStatisticData(){return this[nn].getShareStatisticData()}getShareStreamSettings(){return this[nn].getShareStreamSettings()}getMaxRenderableShareViews(){return this[nn].getMaxRenderableShareViews()}requestFarEndCameraControl(n){return this[nn].requestFarEndCameraControl(n)}approveFarEndCameraControl(n){return this[nn].approveFarEndCameraControl(n)}declineFarEndCameraControl(n){return this[nn].declineFarEndCameraControl(n)}giveUpFarEndCameraControl(n){return this[nn].giveUpFarEndCameraControl(n)}controlCamera(n){return this[nn].controlCamera(n)}controlFarEndCamera(n){return this[nn].controlFarEndCamera(n)}getFarEndCameraPTZCapability(n){return this[nn].getFarEndCameraPTZCapability(n)}getCameraPTZCapability(n){return this[nn].getCameraPTZCapability(n)}isBrowserSupportPTZ(){return this[nn].isBrowserSupportPTZ()}getNetworkQuality(n){return this[nn].getNetworkQuality(n)}requestRemoteControl(){return this[nn].requestRemoteControl()}giveUpRemoteControl(){return this[nn].giveUpRemoteControl()}startRemoteControl(n){return this[nn].startRemoteControl(n)}grabRemoteControl(){return this[nn].grabRemoteControl()}approveRemoteControl(n,r){return this[nn].approveRemoteControl(n,r)}declineRemoteControl(n){return this[nn].declineRemoteControl(n)}stopRemoteControl(){return this[nn].stopRemoteControl()}launchRemoteControlApp(n){return this[nn].launchRemoteControlApp(n)}isRemotelyControlApproved(){return this[nn].isRemotelyControlApproved()}isControllingUserRemotely(){return this[nn].isControllingUserRemotely()}isTargetShareSupportRemoteControl(n){return this[nn].isTargetShareSupportRemoteControl(n)}getRemoteControlAppDownloadUrl(){return this[nn].getRemoteControlAppDownloadUrl()}getRemotelyControllingUser(){return this[nn].getRemotelyControllingUser()}isRemoteControlEnabled(){return this[nn].isRemoteControlEnabled()}startAnnotation(){return this[nn].startAnnotation()}stopAnnotation(){return this[nn].stopAnnotation()}changeAnnotationPrivilege(n){return this[nn].changeAnnotationPrivilege(n)}showAnnotatorName(n){return this[nn].showAnnotatorName(n)}canDoAnnotation(){return this[nn].canDoAnnotation()}getAnnotationController(){return this[nn].getAnnotationController()}}const fze=["isCoHost"],tb=Symbol("chat");class pze{constructor(n){this[tb]=void 0,this[tb]=n}send(n,r){return this[tb].send(n,r)}sendToAll(n){return this[tb].send(n,ma.All)}sendFile(n,r){return this[tb].sendFile(n,r)}downloadFile(n,r,i){return this[tb].downloadFile(n,r,i)}setPrivilege(n){return this[tb].setPrivilege(n)}getPrivilege(){return this[tb].getPrivilege()}getReceivers(){return this[tb].getReceivers().map((n=>{const{isCoHost:r}=n;return rg({isManager:r},W5(n,fze))}))}getHistory(){return this[tb].getHistory()}isFileTransferEnabled(){return this[tb].isFileTransferEnabled()}getFileTransferSetting(){return this[tb].getFileTransferSetting()}}const C1=Symbol("recording");class hze{constructor(n){this[C1]=void 0,this[C1]=n}canStartRecording(){return this[C1].isRecordingEnabled()}startCloudRecording(){return this[C1].startRecording()}pauseCloudRecording(){return this[C1].pauseRecording()}resumeCloudRecording(){return this[C1].startRecording()}stopCloudRecording(){return this[C1].stopRecording()}getCloudRecordingStatus(){return this[C1].getRecordingStatus()}acceptIndividualRecording(){return this[C1].accept()}declineIndividualRecording(){return this[C1].decline()}}const Fpe=Symbol("command");class mze{constructor(n){this[Fpe]=void 0,this[Fpe]=n}send(n,r){return this[Fpe].send(n,r)}}const gze=["isInRoom"],vze=["isAutoJoinRoom","isRoomSelectionEnabled"],Zl=Symbol("breakout-room");class bze{constructor(n){this[Zl]=void 0,this[Zl]=n}createSubsessions(n,r){return this[Zl].createRooms(n,r).then((i=>i.map((l=>({subsessionId:l.roomId,subsessionName:l.name,userList:l.attendeeList})))))}openSubsessions(n,r){const i=r?rg(rg({},r),{},{isAutoJoinRoom:r.isAutoJoinSubsession,isRoomSelectionEnabled:r.isSubsessionSelectionEnabled}):void 0,l=n.map((f=>({roomId:f.subsessionId,name:f.subsessionName,attendeeList:f.userList})));return this[Zl].openRooms(l,i)}joinSubsession(n){return this[Zl].joinRoom(n)}leaveSubsession(){return this[Zl].leaveRoom()}askForHelp(){return this[Zl].askForHelp()}postponeHelping(n){return this[Zl].postponeHelping(n)}broadcast(n){return this[Zl].broadcast(n)}assignUserToSubsession(n,r){return this[Zl].assignUserToRoom(n,r)}moveUserToSubsession(n,r){return this[Zl].moveUserToRoom(n,r)}moveBackToMainSession(n){return this[Zl].moveBackToMainSession(n)}closeAllSubsessions(){return this[Zl].closeRoom()}startBroadcastVoice(){return this[Zl].startBroadcastVoice()}stopBroadcastVoice(){return this[Zl].stopBroadcastVoice()}getUnassignedUserList(){return this[Zl].getUnassignedAttendeeList().map((n=>h2(n)))}getSubsessionList(){return this[Zl].getRoomList().map((n=>{const{roomId:r,name:i,attendeeList:l}=n;return{subsessionId:r,subsessionName:i,userList:l.map((f=>{const h=f,{isInRoom:v}=h;return rg({isInSubsession:v},W5(h,gze))}))}}))}getUserStatus(){return this[Zl].getAttendeeStatus()}getSubsessionStatus(){return this[Zl].getRoomStatus()}getCurrentSubsession(){const{attendeeStatus:n,name:r,roomId:i}=this[Zl].getCurrentRoom();return{userStatus:n,subsessionName:r,subsessionId:i}}getSubsessionOptions(){const n=this[Zl].getRoomOptions(),{isAutoJoinRoom:r,isRoomSelectionEnabled:i}=n;return rg({isAutoJoinSubsession:r,isSubsessionSelectionEnabled:i},W5(n,vze))}isSubsessionEnabled(){return this[Zl].isBreakoutRoomEnabled()}}const ev=Symbol("liveTranscription");class yze{constructor(n){this[ev]=void 0,this[ev]=n}startLiveTranscription(){return this[ev].startLiveTranscription()}setSpeakingLanguage(n,r){return this[ev].setSpeakingLanguage(n,r)}setTranslationLanguage(n){return this[ev].setTranslationLanguage(n)}disableCaptions(n){return this[ev].disableCaptions(n)}lockTranscriptionLanguage(n){return this[ev].lockTranscriptionLanguage(n)}getLiveTranscriptionStatus(){return this[ev].getLiveTranscriptionStatus()}getCurrentTranscriptionLanguage(){return this[ev].getCurrentTranscriptionLanguage()}getCurrentTranslationLanguage(){return this[ev].getCurrentTranslationLanguage()}getLatestTranscription(){return this[ev].getLatestTranscription()}getLatestTranslation(){return this[ev].getLatestTranslation()}getFullTranscriptionHistory(){return this[ev].getFullTranscriptionHistory()}}const _P=Symbol("liveStream");class Sze{constructor(n){this[_P]=void 0,this[_P]=n}startLiveStream(n,r,i){return this[_P].startLiveStream(n,r,i)}stopLiveStream(){return this[_P].stopLiveStream()}isLiveStreamEnabled(){return this[_P].isLiveStreamEnabled()}getLiveStreamStatus(){var n;return(n=this[_P].getLiveStreamStatus())===null||n===void 0?void 0:n.status}}const OU=Symbol("logger");class Cze{constructor(n,r){if(this[OU]=void 0,this[OU]=n,r){const{debugMode:i,trackingId:l}=r;this[OU].setLogOptions({debugMode:i,trackingId:l})}}reportToGlobalTracing(n){return this[OU].reportToGlobalTracing(n)}reportRating(n,r){return this[OU].reportRating(n,r)}}const wP=Symbol("broadcastStreaming");class Eze{constructor(n){this[wP]=void 0,this[wP]=n}startBroadcast(){return this[wP].startBroadcast()}stopBroadcast(n){return this[wP].stopBroadcast(n)}isBroadcastStreamingEnable(){return this[wP].isBroadcastStreamingEnable()}getBroadcastStreamingStatus(){return this[wP].getBroadcastStreamingStatus()}}const _ze=["roomName"],wze=["roomId","roomName"],ITe=[{event:"connection-change",originalEvent:"connection-change",payloadTransform:e=>{const{roomName:n}=e,r=W5(e,_ze);return n?rg(rg({},r),{},{subsessionName:n}):e}},{event:"user-added",originalEvent:"user-added",payloadTransform:e=>e.map((n=>Hpe(n)))},{event:"user-updated",originalEvent:"user-updated",payloadTransform:e=>e.map((n=>Hpe(n)))},{event:"user-removed",originalEvent:"user-removed",payloadTransform:e=>e.map((n=>Hpe(n)))},{event:"subsession-invite-to-join",originalEvent:"invite-to-join",payloadTransform:e=>({subsessionId:e.roomId,subsessionName:e.name})},{event:"subsession-countdown",originalEvent:"room-countdown"},{event:"subsession-time-up",originalEvent:"room-time-up"},{event:"closing-subsession-countdown",originalEvent:"closing-room-countdown"},{event:"subsession-broadcast-message",originalEvent:"broadcast-message"},{event:"subsession-broadcast-voice",originalEvent:"broadcast-voice"},{event:"subsession-ask-for-help",originalEvent:"ask-for-help",payloadTransform:e=>({userId:e.userId,userGuid:e.userGuid,displayName:e.displayName,subsessionId:e.roomId,subsessionName:e.roomName})},{event:"subsession-ask-for-help-response",originalEvent:"ask-for-help-response"},{event:"subsession-invite-back-to-main-session",originalEvent:"invite-back-to-main-session"},{event:"subsession-state-change",originalEvent:"room-state-change"},{event:"host-ask-unmute-audio",originalEvent:"unmute-audio-consent"},{event:"subsession-user-update",originalEvent:"room-user-update",payloadTransform:e=>{const{roomId:n,roomName:r}=e;return rg({subsessionId:n,subsessionName:r},W5(e,wze))}},{event:"active-media-failed",originalEvent:"media-internal-error"}],E1=Symbol("summary");class Aze{constructor(n){this[E1]=void 0,this[E1]=n}startSummary(){return this[E1].startSummary()}stopSummary(){return this[E1].stopSummary()}isSummaryEnabled(){return this[E1].isSummaryEnabled()}getSummaryStatus(){return this[E1].getSummaryStatus()}startMeetingQuery(){return this[E1].startMeetingQuery()}stopMeetingQuery(){return this[E1].stopMeetingQuery()}isMeetingQueryEnabled(){return this[E1].isMeetingQueryEnabled()}getMeetingQueryStatus(){return this[E1].getMeetingQueryStatus()}}const xi=Symbol("Client"),oY=new WeakMap;class Tze{constructor(){this[xi]=void 0,this.stream=void 0,this.chat=void 0,this.command=void 0,this.recording=void 0,this.subsession=void 0,this.liveTranscription=void 0,this.logger=void 0,this.liveStream=void 0,this.aiClient=void 0,this.broadcastStreaming=void 0,this[xi]=GC.createClient(),oY.set(this,new Map)}init(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"en-US",r=arguments.length>2?arguments[2]:void 0;const i=sLe(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global");return window.isSecureContext===!1&&console.warn("The page is not in a secure context, to use audio, video, screen, a secure context must be enabled."),(function(){const l="__ZOOM_VIDEO_SDK_DOM_STORAGE_TEST__";try{return localStorage.setItem(l,l),localStorage.removeItem(l),sessionStorage.setItem(l,l),sessionStorage.removeItem(l),!0}catch{return!1}})()||console.warn("localstorage or sessionstorage is not enabled, please enable to use the video sdk,"),this[xi].init("","",{language:n,dependentAssets:i,constraints:rg(rg({},GC.checkSystemRequirements()),{},{screen:typeof WebAssembly=="object"&&typeof Worker=="function"}),additionalFeatures:["chat","cmd","recording","breakoutRoom","liveTranscription","logger","liveStream","summary","broadcastStreaming"],webEndpoint:(r==null?void 0:r.webEndpoint)||"zoom.us",skipJsMedia:r==null?void 0:r.skipJsMedia,enforceMultipleVideos:r==null?void 0:r.enforceMultipleVideos,stayAwake:r==null?void 0:r.stayAwake,enforceVirtualBackground:r==null?void 0:r.enforceVirtualBackground,quicklyLeaveMeeting:r==null?void 0:r.leaveOnPageUnload,patchJsMedia:r==null?void 0:r.patchJsMedia,alternativeNameForVideoPlayer:r==null?void 0:r.alternativeNameForVideoPlayer,isUIToolkit:r==null?void 0:r.isUIToolkit,isLogDetailed:r==null?void 0:r.isLogDetailed})}join(n,r,i,l,f){return Vpe(n)&&Vpe(r)&&Vpe(i)?n.length>200?Promise.reject({type:nY,reason:"The maximum length of topic is 200",errorCode:Fe.CLIENT_INVALID_JOIN_PARAMETER}):i.length>200?Promise.reject({type:nY,reason:"The maximum length of username is 200",errorCode:Fe.CLIENT_INVALID_JOIN_PARAMETER}):l&&(typeof l!="string"||l.length>10)?Promise.reject({type:nY,reason:"The maximum length of password is 10",errorCode:Fe.CLIENT_INVALID_JOIN_PARAMETER}):this[xi].joinInstant(n,r,i,p6,l,f):Promise.reject({type:nY,reason:"Topic, token and userName must be string and required",errorCode:Fe.CLIENT_INVALID_JOIN_PARAMETER})}leave(){var n;return arguments.length>0&&arguments[0]!==void 0&&arguments[0]?((n=oY.get(this))===null||n===void 0||n.clear(),this[xi].end()):this[xi].leave()}on(n,r){const i=ITe.find((l=>l.event===n));if(i){const{originalEvent:l,payloadTransform:f}=i;if(f){const h=y=>{const _=f(y);r(_)};this[xi].on(l,h);const v=oY.get(this);if(v){v.has(n)||v.set(n,[]);const y=v.get(n);y==null||y.push({originalCb:r,newCb:h})}}else this[xi].on(l,r)}else this[xi].on(n,r)}off(n,r){const i=ITe.find((l=>l.event===n));if(i){const{originalEvent:l,payloadTransform:f}=i;if(f){const h=oY.get(this);if(h){const v=h.get(n),y=v==null?void 0:v.find((_=>_.originalCb===r));if(y&&v){this[xi].off(l,y.newCb);const _=v==null?void 0:v.filter((A=>A.originalCb!==r));h.set(n,_)}}}else this[xi].off(l,r)}else this[xi].off(n,r)}getMediaStream(){return this.stream||(this.stream=new dze(this[xi].getMediaStream())),this.stream}getChatClient(){return this.chat||(this.chat=new pze(this[xi].getFeatureModule("chat"))),this.chat}getRecordingClient(){return this.recording||(this.recording=new hze(this[xi].getFeatureModule("recording"))),this.recording}getCommandClient(){return this.command||(this.command=new mze(this[xi].getFeatureModule("cmd"))),this.command}getSubsessionClient(){return this.subsession||(this.subsession=new bze(this[xi].getFeatureModule("breakoutRoom"))),this.subsession}getLiveTranscriptionClient(){return this.liveTranscription||(this.liveTranscription=new yze(this[xi].getFeatureModule("liveTranscription"))),this.liveTranscription}getLoggerClient(n){return this.logger||(this.logger=new Cze(this[xi].getFeatureModule("logger"),n)),this.logger}getLiveStreamClient(){return this.liveStream||(this.liveStream=new Sze(this[xi].getFeatureModule("liveStream"))),this.liveStream}getBroadcastStreamingClient(){return this.broadcastStreaming||(this.broadcastStreaming=new Eze(this[xi].getFeatureModule("broadcastStreaming"))),this.broadcastStreaming}getAIClient(){return this.aiClient||(this.aiClient=new Aze(this[xi].getFeatureModule("summary"))),this.aiClient}getSessionInfo(){const n=this[xi].getMeetingInfo();return{isInMeeting:n.isInMeeting||!1,password:n.password||"",topic:n.topic,userName:n.userName,userId:n.userId,sessionId:n.meetingId}}getCurrentUserInfo(){return h2(this[xi].getCurrentUserInfo())}getUser(n){return h2(this[xi].getParticipantsList().find((r=>r.userId===n)))}getAllUser(){return this[xi].getParticipantsList().map((n=>h2(n)))}changeName(n,r){return this[xi].changeName(n,r)}makeHost(n){return this[xi].makeHost(n)}removeUser(n){return this[xi].removeUser(n)}makeManager(n){return this[xi].makeCoHost(n)}revokeManager(n){return this[xi].revokeCoHost(n)}reclaimHost(){return this[xi].reclaimHost()}isHost(){return this[xi].isHost()}isOriginalHost(){return this[xi].isOriginHost()}getSessionHost(){return h2(this[xi].getMeetingHost())}isManager(){return this[xi].isCoHost()}}class Vge{static createClient(){return this.videoClient||(this.videoClient=new Tze),this.videoClient}static destroyClient(){return this.videoClient?this.videoClient.leave().then((()=>(this.videoClient=null,GC.destroyClient()))):Promise.resolve(void 0)}static checkSystemRequirements(){return GC.checkSystemRequirements()}static checkFeatureRequirements(){return GC.checkFeatureRequirements()}static getDevices(n){return GC.getDevices(n)}static createLocalAudioTrack(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return GC.createLocalAudioTrack(n)}static createLocalVideoTrack(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return GC.createLocalVideoTrack(n)}static preloadDependentAssets(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global";GC.preloadDependentAssets(sLe(n))}}Vge.videoClient=void 0,Vge.VERSION=p6;(function(e){return e[e.All=1]="All",e[e.NoOne=4]="NoOne",e[e.EveryonePublicly=5]="EveryonePublicly",e})({});(function(e){return e[e.All=0]="All",e})({});(function(e){return e[e.Automatically=l2.Automatically]="Automatically",e[e.Manually=l2.Manually]="Manually",e})({});(function(e){return e[e.Initial=vs.Initial]="Initial",e[e.Invited=vs.Invited]="Invited",e[e.Joining=vs.Joining]="Joining",e[e.InSubsession=vs.InRoom]="InSubsession",e[e.Leaving=vs.Leaving]="Leaving",e[e.MainSession=vs.MainSession]="MainSession",e})({});(function(e){return e[e.NotStarted=cr.NotStarted]="NotStarted",e[e.InProgress=cr.InProgress]="InProgress",e[e.Closing=cr.Closing]="Closing",e[e.Closed=cr.Closed]="Closed",e})({});(function(e){return e[e.Failover=np.Failover]="Failover",e[e.JoinSubsession=np.JoinBreakoutRoom]="JoinSubsession",e[e.MoveToSubsession=np.MoveToBreakoutRoom]="MoveToSubsession",e[e.BackToMainSession=np.BackToMainSession]="BackToMainSession",e})({});(function(e){return e[e.Unlocked=sv.HostGrab]="Unlocked",e[e.Locked=sv.OnlyHost]="Locked",e[e.MultipleShare=sv.MultipleShare]="MultipleShare",e})({});(function(e){return e[e.Unknown=lf.Unknown]="Unknown",e[e.Uninstalled=lf.Uninstalled]="Uninstalled",e[e.Installed=lf.Installed]="Installed",e[e.Unlaunched=kJ.Unlaunched]="Unlaunched",e[e.Launched=kJ.Launched]="Launched",e})({});var $pe={exports:{}},RTe;function Oze(){return RTe||(RTe=1,(function(e){(function(){var n=function(t){if(t===null)return"null";if(t===void 0)return"undefined";var s=typeof t;return s==="object"&&(Array.prototype.isPrototypeOf(t)||t.constructor&&t.constructor.name==="Array")?"array":s==="object"&&(String.prototype.isPrototypeOf(t)||t.constructor&&t.constructor.name==="String")?"string":s},r=function(t){return["undefined","boolean","number","string","function","xml","null"].indexOf(t)!==-1},i=function(t,s){var a=Array.prototype.slice.call(t);return a.sort(s)},l=function(t,s){return f(function(a,u){return t.eq(s(a),s(u))})},f=function(t){return{eq:t}},h=f(function(t,s){return t===s}),v=h,y=function(t){return f(function(s,a){if(s.length!==a.length)return!1;for(var u=s.length,p=0;p<u;p++)if(!t.eq(s[p],a[p]))return!1;return!0})},_=function(t,s){return l(y(t),function(a){return i(a,s)})},A=function(t){return f(function(s,a){var u=Object.keys(s),p=Object.keys(a);if(!_(v).eq(u,p))return!1;for(var b=u.length,E=0;E<b;E++){var I=u[E];if(!t.eq(s[I],a[I]))return!1}return!0})},R=f(function(t,s){if(t===s)return!0;var a=n(t),u=n(s);return a!==u?!1:r(a)?t===s:a==="array"?y(R).eq(t,s):a==="object"?A(R).eq(t,s):!1});const k=Object.getPrototypeOf,N=(t,s,a)=>{var u;return a(t,s.prototype)?!0:((u=t.constructor)===null||u===void 0?void 0:u.name)===s.name},L=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&N(t,String,(a,u)=>u.isPrototypeOf(a))?"string":s},B=t=>s=>L(s)===t,H=t=>s=>typeof s===t,q=t=>s=>t===s,Y=(t,s)=>se(t)&&N(t,s,(a,u)=>k(a)===u),K=B("string"),se=B("object"),ie=t=>Y(t,Object),le=B("array"),M=q(null),we=H("boolean"),Ne=q(void 0),De=t=>t==null,be=t=>!De(t),me=H("function"),Ye=H("number"),Ke=(t,s)=>{if(le(t)){for(let a=0,u=t.length;a<u;++a)if(!s(t[a]))return!1;return!0}return!1},Ze=()=>{},z=(t,s)=>(...a)=>t(s.apply(null,a)),$t=(t,s)=>a=>t(s(a)),Be=t=>()=>t,at=t=>t,lt=(t,s)=>t===s;function $e(t,...s){return(...a)=>{const u=s.concat(a);return t.apply(null,u)}}const qt=t=>s=>!t(s),io=t=>()=>{throw new Error(t)},En=t=>t(),Zn=t=>{t()},Et=Be(!1),Jt=Be(!0);class ce{constructor(s,a){this.tag=s,this.value=a}static some(s){return new ce(!0,s)}static none(){return ce.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?ce.some(s(this.value)):ce.none()}bind(s){return this.tag?s(this.value):ce.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:ce.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return be(s)?ce.some(s):ce.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ce.singletonNone=new ce(!1);const Hs=Array.prototype.slice,Fo=Array.prototype.indexOf,yt=Array.prototype.push,Xt=(t,s)=>Fo.call(t,s),Wn=(t,s)=>{const a=Xt(t,s);return a===-1?ce.none():ce.some(a)},bt=(t,s)=>Xt(t,s)>-1,Kt=(t,s)=>{for(let a=0,u=t.length;a<u;a++){const p=t[a];if(s(p,a))return!0}return!1},Ut=(t,s)=>{const a=t.length,u=new Array(a);for(let p=0;p<a;p++){const b=t[p];u[p]=s(b,p)}return u},Ue=(t,s)=>{for(let a=0,u=t.length;a<u;a++){const p=t[a];s(p,a)}},dt=(t,s)=>{for(let a=t.length-1;a>=0;a--){const u=t[a];s(u,a)}},Ot=(t,s)=>{const a=[],u=[];for(let p=0,b=t.length;p<b;p++){const E=t[p];(s(E,p)?a:u).push(E)}return{pass:a,fail:u}},Oe=(t,s)=>{const a=[];for(let u=0,p=t.length;u<p;u++){const b=t[u];s(b,u)&&a.push(b)}return a},pt=(t,s)=>{if(t.length===0)return[];{let a=s(t[0]);const u=[];let p=[];for(let b=0,E=t.length;b<E;b++){const I=t[b],D=s(I);D!==a&&(u.push(p),p=[]),a=D,p.push(I)}return p.length!==0&&u.push(p),u}},Bt=(t,s,a)=>(dt(t,(u,p)=>{a=s(a,u,p)}),a),tn=(t,s,a)=>(Ue(t,(u,p)=>{a=s(a,u,p)}),a),ht=(t,s,a)=>{for(let u=0,p=t.length;u<p;u++){const b=t[u];if(s(b,u))return ce.some(b);if(a(b,u))break}return ce.none()},gt=(t,s)=>ht(t,s,Et),No=(t,s)=>{for(let a=0,u=t.length;a<u;a++){const p=t[a];if(s(p,a))return ce.some(a)}return ce.none()},Ko=(t,s)=>{for(let a=t.length-1;a>=0;a--)if(s(t[a],a))return ce.some(a);return ce.none()},Wo=t=>{const s=[];for(let a=0,u=t.length;a<u;++a){if(!le(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);yt.apply(s,t[a])}return s},Jn=(t,s)=>Wo(Ut(t,s)),ys=(t,s)=>{for(let a=0,u=t.length;a<u;++a){const p=t[a];if(s(p,a)!==!0)return!1}return!0},ps=t=>{const s=Hs.call(t,0);return s.reverse(),s},es=(t,s)=>Oe(t,a=>!bt(s,a)),is=(t,s)=>{const a={};for(let u=0,p=t.length;u<p;u++){const b=t[u];a[String(b)]=s(b,u)}return a},st=(t,s)=>{const a=Hs.call(t,0);return a.sort(s),a},ft=(t,s)=>s>=0&&s<t.length?ce.some(t[s]):ce.none(),It=t=>ft(t,0),Dt=t=>ft(t,t.length-1),Nn=me(Array.from)?Array.from:t=>Hs.call(t),$n=(t,s)=>{for(let a=0;a<t.length;a++){const u=s(t[a],a);if(u.isSome())return u}return ce.none()},lo=(t,s)=>{const a=[],u=me(s)?p=>Kt(a,b=>s(b,p)):p=>bt(a,p);for(let p=0,b=t.length;p<b;p++){const E=t[p];u(E)||a.push(E)}return a},Vt=Object.keys,Pn=Object.hasOwnProperty,wn=(t,s)=>{const a=Vt(t);for(let u=0,p=a.length;u<p;u++){const b=a[u],E=t[b];s(E,b)}},ko=(t,s)=>ts(t,(a,u)=>({k:u,v:s(a,u)})),ts=(t,s)=>{const a={};return wn(t,(u,p)=>{const b=s(u,p);a[b.k]=b.v}),a},mn=t=>(s,a)=>{t[a]=s},wr=(t,s,a,u)=>{wn(t,(p,b)=>{(s(p,b)?a:u)(p,b)})},As=(t,s)=>{const a={},u={};return wr(t,s,mn(a),mn(u)),{t:a,f:u}},Yi=(t,s)=>{const a={};return wr(t,s,mn(a),Ze),a},Si=(t,s)=>{const a=[];return wn(t,(u,p)=>{a.push(s(u,p))}),a},Yr=t=>Si(t,at),Ts=(t,s)=>ho(t,s)?ce.from(t[s]):ce.none(),ho=(t,s)=>Pn.call(t,s),Os=(t,s)=>ho(t,s)&&t[s]!==void 0&&t[s]!==null,Xa=(t,s,a=R)=>A(a).eq(t,s),eu={generate:t=>{if(!le(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return Ue(t,(u,p)=>{const b=Vt(u);if(b.length!==1)throw new Error("one and only one name per case");const E=b[0],I=u[E];if(a[E]!==void 0)throw new Error("duplicate key detected:"+E);if(E==="cata")throw new Error("cannot have a case named cata (sorry)");if(!le(I))throw new Error("case arguments must be an array");s.push(E),a[E]=(...D)=>{const $=D.length;if($!==I.length)throw new Error("Wrong number of arguments to case "+E+". Expected "+I.length+" ("+I+"), got "+$);return{fold:(...te)=>{if(te.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+te.length);return te[p].apply(null,D)},match:te=>{const re=Vt(te);if(s.length!==re.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+re.join(","));if(!ys(s,Re=>bt(re,Re)))throw new Error("Not all branches were specified when using match. Specified: "+re.join(", ")+`
Required: `+s.join(", "));return te[E].apply(null,D)},log:te=>{console.log(te,{constructors:s,constructor:E,params:D})}}}}),a}},fo=t=>{let s=t;return{get:()=>s,set:p=>{s=p}}},vc=t=>{const s=b=>b(t),a=Be(t),u=()=>p,p={tag:!0,inner:t,fold:(b,E)=>E(t),isValue:Jt,isError:Et,map:b=>xa.value(b(t)),mapError:u,bind:s,exists:s,forall:s,getOr:a,or:u,getOrThunk:a,orThunk:u,getOrDie:a,each:b=>{b(t)},toOptional:()=>ce.some(t)};return p},Ji=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(u,p)=>u(t),isValue:Et,isError:Jt,map:s,mapError:u=>xa.error(u(t)),bind:s,exists:Et,forall:Jt,getOr:at,or:at,getOrThunk:En,orThunk:En,getOrDie:io(String(t)),each:Ze,toOptional:ce.none};return a},xa={value:vc,error:Ji,fromOption:(t,s)=>t.fold(()=>Ji(s),vc)},kd=typeof window<"u"?window:Function("return this;")(),Js=()=>{const t=window.crypto.getRandomValues(new Uint8Array(16));return t[6]=t[6]&15|64,t[8]=t[8]&63|128,t},Iu=()=>{const t=Js(),s=(a,u)=>{let p="";for(let b=a;b<=u;++b){const E=t[b].toString(16).padStart(2,"0");p+=E}return p};return`${s(0,3)}-${s(4,5)}-${s(6,7)}-${s(8,9)}-${s(10,15)}`},Yu=(t,s,a)=>Math.min(Math.max(t,s),a),tu=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let cl=0;const Xi=t=>{const a=new Date().getTime(),u=Math.floor(tu()*1e9);return cl++,t+"_"+u+cl+String(a)},nu=()=>window.isSecureContext?window.crypto.randomUUID():Iu(),Ju=(t,s)=>s,Un=(t,s)=>ie(t)&&ie(s)?Md(t,s):s,oh=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let u=0;u<s.length;u++){const p=s[u];for(const b in p)ho(p,b)&&(a[b]=t(a[b],p[b]))}return a},Md=oh(Un),Nd=oh(Ju),gr=(t,s,a=lt)=>t.exists(u=>a(u,s)),sh=(t,s,a=lt)=>Vi(t,s,a).getOr(t.isNone()&&s.isNone()),zc=t=>{const s=[],a=u=>{s.push(u)};for(let u=0;u<t.length;u++)t[u].each(a);return s},Vi=(t,s,a)=>t.isSome()&&s.isSome()?ce.some(a(t.getOrDie(),s.getOrDie())):ce.none(),ou=(t,s,a,u)=>t.isSome()&&s.isSome()&&a.isSome()?ce.some(u(t.getOrDie(),s.getOrDie(),a.getOrDie())):ce.none(),Pd=t=>t.bind(at),bc=(t,s)=>t?ce.some(s):ce.none(),Pr=(t,s)=>{let a=s??kd;for(let u=0;u<t.length&&a!==void 0&&a!==null;++u)a=a[t[u]];return a},Qa=(t,s)=>{const a=t.split(".");return Pr(a,s)};eu.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Gi=t=>{const s=[],a=[];return Ue(t,u=>{u.fold(p=>{s.push(p)},p=>{a.push(p)})}),{errors:s,values:a}},sm=t=>{const s=fo(ce.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(ce.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:I=>{a(),s.set(ce.some(I))}}},rm=t=>{const s=fo(ce.none()),a=()=>s.get().each(I=>clearInterval(I));return{clear:()=>{a(),s.set(ce.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:I=>{a(),s.set(ce.some(setInterval(I,t)))}}},yc=()=>{const t=sm(Ze);return{...t,on:a=>t.get().each(a)}},ll=(t,s)=>t.substring(s),Tl=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,rh=(t,s)=>$o(t,s)?ll(t,s.length):t,ii=(t,s,a=0,u)=>{const p=t.indexOf(s,a);return p!==-1?Ne(u)?!0:p+s.length<=u:!1},$o=(t,s)=>Tl(t,s,0),ai=(t,s)=>Tl(t,s,t.length-s.length),Da=t=>s=>s.replace(t,""),Lr=Da(/^\s+|\s+$/g),ih=Da(/^\s+/g),ip=Da(/\s+$/g),Ar=t=>t.length>0,ec=t=>!Ar(t),Ol=(t,s)=>s<=0?"":new Array(s+1).join(t),im=(t,s=10)=>{const a=parseInt(t,s);return isNaN(a)?ce.none():ce.some(a)},Hn=(t,s)=>{let a=null;return{cancel:()=>{M(a)||(clearTimeout(a),a=null)},throttle:(...b)=>{M(a)&&(a=setTimeout(()=>{a=null,t.apply(null,b)},s))}}},Il=(t,s)=>{let a=null;const u=()=>{M(a)||(clearTimeout(a),a=null)};return{cancel:u,throttle:(...b)=>{u(),a=setTimeout(()=>{a=null,t.apply(null,b)},s)}}},ka=t=>{let s=!1,a;return(...u)=>(s||(s=!0,a=t.apply(null,u)),a)},Sc="\uFEFF",ci="",am="",Cc=t=>t===Sc,ul=t=>t.replace(/\uFEFF/g,""),ap=t=>{const s={};return Ue(t,a=>{s[a]={}}),Vt(s)},gf=t=>t.length!==void 0,Xu=Array.isArray,cp=t=>{if(Xu(t))return t;{const s=[];for(let a=0,u=t.length;a<u;a++)s[a]=t[a];return s}},vf=(t,s,a)=>{if(!t)return!1;if(a=a||t,gf(t)){for(let u=0,p=t.length;u<p;u++)if(s.call(a,t[u],u,t)===!1)return!1}else for(const u in t)if(ho(t,u)&&s.call(a,t[u],u,t)===!1)return!1;return!0},Qu=(t,s)=>{const a=[];return vf(t,(u,p)=>{a.push(s(u,p,t))}),a},bf=(t,s)=>{const a=[];return vf(t,(u,p)=>{(!s||s(u,p,t))&&a.push(u)}),a},kn=(t,s)=>{if(t){for(let a=0,u=t.length;a<u;a++)if(t[a]===s)return a}return-1},Ld=(t,s,a,u)=>{let p=Ne(a)?t[0]:a;for(let b=0;b<t.length;b++)p=s.call(u,p,t[b],b);return p},lp=(t,s,a)=>{for(let u=0,p=t.length;u<p;u++)if(s.call(a,t[u],u,t))return u;return-1},ve=t=>t[t.length-1],Ve=(t,s,a,u)=>{const p=t.isiOS()&&/ipad/i.test(a)===!0,b=t.isiOS()&&!p,E=t.isiOS()||t.isAndroid(),I=E||u("(pointer:coarse)"),D=p||!b&&E&&u("(min-device-width:768px)"),$=b||E&&!D,J=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,te=!$&&!D&&!J;return{isiPad:Be(p),isiPhone:Be(b),isTablet:Be(D),isPhone:Be($),isTouch:Be(I),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:Be(J),isDesktop:Be(te)}},it=(t,s)=>{for(let a=0;a<t.length;a++){const u=t[a];if(u.test(s))return u}},jt=(t,s)=>{const a=it(t,s);if(!a)return{major:0,minor:0};const u=p=>Number(s.replace(a,"$"+p));return Is(u(1),u(2))},Rn=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?so():jt(t,a)},so=()=>Is(0,0),Is=(t,s)=>({major:t,minor:s}),hs={nu:Is,detect:Rn,unknown:so},Xs=(t,s)=>$n(s.brands,a=>{const u=a.brand.toLowerCase();return gt(t,p=>{var b;return u===((b=p.brand)===null||b===void 0?void 0:b.toLowerCase())}).map(p=>({current:p.name,version:hs.nu(parseInt(a.version,10),0)}))}),ae=(t,s)=>{const a=String(s).toLowerCase();return gt(t,u=>u.search(a))},Ce=(t,s)=>ae(t,s).map(a=>{const u=hs.detect(a.versionRegexes,s);return{current:a.name,version:u}}),je=(t,s)=>ae(t,s).map(a=>{const u=hs.detect(a.versionRegexes,s);return{current:a.name,version:u}}),At=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,to=t=>s=>ii(s,t),Ps=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>ii(t,"edge/")&&ii(t,"chrome")&&ii(t,"safari")&&ii(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,At],search:t=>ii(t,"chrome")&&!ii(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>ii(t,"msie")||ii(t,"trident")},{name:"Opera",versionRegexes:[At,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:to("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:to("firefox")},{name:"Safari",versionRegexes:[At,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(ii(t,"safari")||ii(t,"mobile/"))&&ii(t,"applewebkit")}],x=[{name:"Windows",search:to("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>ii(t,"iphone")||ii(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:to("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:to("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:to("linux"),versionRegexes:[]},{name:"Solaris",search:to("sunos"),versionRegexes:[]},{name:"FreeBSD",search:to("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:to("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],U={browsers:Be(Ps),oses:Be(x)},X="Edge",ne="Chromium",de="IE",ge="Opera",Te="Firefox",rt="Safari",ot=()=>Rt({current:void 0,version:hs.unknown()}),Rt=t=>{const s=t.current,a=t.version,u=p=>()=>s===p;return{current:s,version:a,isEdge:u(X),isChromium:u(ne),isIE:u(de),isOpera:u(ge),isFirefox:u(Te),isSafari:u(rt)}},rn={unknown:ot,nu:Rt},xn="Windows",Zt="iOS",uo="Android",Fs="Linux",Dr="macOS",lr="Solaris",Ma="FreeBSD",Ti="ChromeOS",ed=()=>td({current:void 0,version:hs.unknown()}),td=t=>{const s=t.current,a=t.version,u=p=>()=>s===p;return{current:s,version:a,isWindows:u(xn),isiOS:u(Zt),isAndroid:u(uo),isMacOS:u(Dr),isLinux:u(Fs),isSolaris:u(lr),isFreeBSD:u(Ma),isChromeOS:u(Ti)}},Tr={unknown:ed,nu:td},Br={detect:(t,s,a)=>{const u=U.browsers(),p=U.oses(),b=s.bind(D=>Xs(u,D)).orThunk(()=>Ce(u,t)).fold(rn.unknown,rn.nu),E=je(p,t).fold(Tr.unknown,Tr.nu),I=Ve(E,b,t,a);return{browser:b,os:E,deviceType:I}}},Qi=t=>window.matchMedia(t).matches;let fg=ka(()=>Br.detect(window.navigator.userAgent,ce.from(window.navigator.userAgentData),Qi));const su=()=>fg(),Bd=(t,s)=>Qa(t,s),pg=(t,s)=>{const a=Bd(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},Ru=Object.getPrototypeOf,Vd=t=>pg("HTMLElement",t),ah=t=>{const s=Qa("ownerDocument.defaultView",t);return se(t)&&(Vd(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Ru(t).constructor.name))},xu=window.navigator.userAgent,hg=su(),nc=hg.browser,ba=hg.os,ch=hg.deviceType,U1=xu.indexOf("Windows Phone")!==-1,$s={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:nc.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!nc.isIE(),windowsPhone:U1,browser:{current:nc.current,version:nc.version,isChromium:nc.isChromium,isEdge:nc.isEdge,isFirefox:nc.isFirefox,isIE:nc.isIE,isOpera:nc.isOpera,isSafari:nc.isSafari},os:{current:ba.current,version:ba.version,isAndroid:ba.isAndroid,isChromeOS:ba.isChromeOS,isFreeBSD:ba.isFreeBSD,isiOS:ba.isiOS,isLinux:ba.isLinux,isMacOS:ba.isMacOS,isSolaris:ba.isSolaris,isWindows:ba.isWindows},deviceType:{isDesktop:ch.isDesktop,isiPad:ch.isiPad,isiPhone:ch.isiPhone,isPhone:ch.isPhone,isTablet:ch.isTablet,isTouch:ch.isTouch,isWebView:ch.isWebView}},Ci=/^\s*|\s*$/g,lh=t=>De(t)?"":(""+t).replace(Ci,""),kr=(t,s)=>s?s==="array"&&Xu(t)?!0:typeof t===s:t!==void 0,mg=(t,s,a={})=>{const u=K(t)?t.split(s||","):t||[];let p=u.length;for(;p--;)a[u[p]]={};return a},mb=ho,SE=(t,...s)=>{for(let a=0;a<s.length;a++){const u=s[a];for(const p in u)if(ho(u,p)){const b=u[p];b!==void 0&&(t[p]=b)}}return t},gb=function(t,s,a,u){u=u||this,t&&(a&&(t=t[a]),vf(t,(p,b)=>s.call(u,p,b,a)===!1?!1:(gb(p,s,a,u),!0)))},yn={trim:lh,isArray:Xu,is:kr,toArray:cp,makeMap:mg,each:vf,map:Qu,grep:bf,inArray:kn,hasOwn:mb,extend:SE,walk:gb,resolve:(t,s=window)=>{const a=t.split(".");for(let u=0,p=a.length;u<p&&(s=s[a[u]],!!s);u++);return s},explode:(t,s)=>le(t)?t:t===""?[]:Qu(t.split(s||","),lh),_addCacheSuffix:t=>{const s=$s.cacheSuffix;return s&&(t+=(t.indexOf("?")===-1?"?":"&")+s),t}},oc=(t,s)=>{const u=(s||document).createElement("div");if(u.innerHTML=t,!u.hasChildNodes()||u.childNodes.length>1){const p="HTML does not have a single root node";throw console.error(p,t),new Error(p)}return fp(u.childNodes[0])},dp=(t,s)=>{const u=(s||document).createElement(t);return fp(u)},dl=(t,s)=>{const u=(s||document).createTextNode(t);return fp(u)},fp=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},Me={fromHtml:oc,fromTag:dp,fromText:dl,fromDom:fp,fromPoint:(t,s,a)=>ce.from(t.dom.elementFromPoint(s,a)).map(fp)},Ec=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,u)=>{t.setStart(a.dom,u)},a=>{t.setStartAfter(a.dom)})},Hd=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,u)=>{t.setEnd(a.dom,u)},a=>{t.setEndAfter(a.dom)})},bb=(t,s,a)=>{const u=t.document.createRange();return Ec(u,s),Hd(u,a),u},pp=(t,s,a,u,p)=>{const b=t.document.createRange();return b.setStart(s.dom,a),b.setEnd(u.dom,p),b},$a=eu.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ze=(t,s,a)=>s(Me.fromDom(a.startContainer),a.startOffset,Me.fromDom(a.endContainer),a.endOffset),mt=(t,s)=>s.match({domRange:a=>({ltr:Be(a),rtl:ce.none}),relative:(a,u)=>({ltr:ka(()=>bb(t,a,u)),rtl:ka(()=>ce.some(bb(t,u,a)))}),exact:(a,u,p,b)=>({ltr:ka(()=>pp(t,a,u,p,b)),rtl:ka(()=>ce.some(pp(t,p,b,a,u)))})}),Yt=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(p=>p.collapsed===!1).map(p=>$a.rtl(Me.fromDom(p.endContainer),p.endOffset,Me.fromDom(p.startContainer),p.startOffset)).getOrThunk(()=>ze(t,$a.ltr,a)):ze(t,$a.ltr,a)},cn=(t,s)=>{const a=mt(t,s);return Yt(t,a)};$a.ltr,$a.rtl;const Sn=8,To=9,Po=11,ds=1,qo=3,Ls=(t,s)=>{const a=t.dom;if(a.nodeType!==ds)return!1;{const u=a;if(u.matches!==void 0)return u.matches(s);if(u.msMatchesSelector!==void 0)return u.msMatchesSelector(s);if(u.webkitMatchesSelector!==void 0)return u.webkitMatchesSelector(s);if(u.mozMatchesSelector!==void 0)return u.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Bs=t=>t.nodeType!==ds&&t.nodeType!==To&&t.nodeType!==Po||t.childElementCount===0,Es=(t,s)=>{const a=s===void 0?document:s.dom;return Bs(a)?[]:Ut(a.querySelectorAll(t),Me.fromDom)},Ks=(t,s)=>{const a=s===void 0?document:s.dom;return Bs(a)?ce.none():ce.from(a.querySelector(t)).map(Me.fromDom)},eo=(t,s)=>t.dom===s.dom,ur=(t,s)=>{const a=t.dom,u=s.dom;return a===u?!1:a.contains(u)},Ua=Ls,_c=(t,s)=>{const a=[],u=b=>(a.push(b),s(b));let p=s(t);do p=p.bind(u);while(p.isSome());return a},Xo=t=>t.dom.nodeName.toLowerCase(),sc=t=>t.dom.nodeType,Ei=t=>s=>sc(s)===t,ji=t=>sc(t)===Sn||Xo(t)==="#comment",Sf=t=>ki(t)&&ah(t.dom),ki=Ei(ds),dr=Ei(qo),tT=Ei(To),nT=Ei(Po),ua=t=>s=>ki(s)&&Xo(s)===t,Fd=t=>Me.fromDom(t.dom.ownerDocument),$d=t=>tT(t)?t:Fd(t),ya=t=>Me.fromDom($d(t).dom.documentElement),Cf=t=>Me.fromDom($d(t).dom.defaultView),Rl=t=>ce.from(t.dom.parentNode).map(Me.fromDom),Du=t=>ce.from(t.dom.parentElement).map(Me.fromDom),Wc=(t,s)=>{const a=me(s)?s:Et;let u=t.dom;const p=[];for(;u.parentNode!==null&&u.parentNode!==void 0;){const b=u.parentNode,E=Me.fromDom(b);if(p.push(E),a(E)===!0)break;u=b}return p},vr=t=>{const s=a=>Oe(a,u=>!eo(t,u));return Rl(t).map(Oi).map(s).getOr([])},nd=t=>ce.from(t.dom.previousSibling).map(Me.fromDom),xl=t=>ce.from(t.dom.nextSibling).map(Me.fromDom),rc=t=>ps(_c(t,nd)),ja=t=>_c(t,xl),Oi=t=>Ut(t.dom.childNodes,Me.fromDom),Ud=(t,s)=>{const a=t.dom.childNodes;return ce.from(a[s]).map(Me.fromDom)},za=t=>Ud(t,0),ea=t=>Ud(t,t.dom.childNodes.length-1),cm=t=>t.dom.childNodes.length,CE=t=>{const s=t.dom.head;if(s==null)throw new Error("Head is not available yet");return Me.fromDom(s)},ey=t=>nT(t)&&be(t.dom.host),Wa=t=>Me.fromDom(t.dom.getRootNode()),j1=t=>ey(t)?t:CE($d(t)),EE=t=>ey(t)?t:Me.fromDom($d(t).dom.body),gg=t=>{const s=Wa(t);return ey(s)?ce.some(s):ce.none()},Lo=t=>Me.fromDom(t.dom.host),z1=t=>{if(be(t.target)){const s=Me.fromDom(t.target);if(ki(s)&&Na(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return It(a)}}return ce.from(t.target)},Na=t=>be(t.dom.shadowRoot),ic=(t,s,a,u,p,b,E)=>({target:t,x:s,y:a,stop:u,prevent:p,kill:b,raw:E}),ac=t=>{const s=Me.fromDom(z1(t).getOr(t.target)),a=()=>t.stopPropagation(),u=()=>t.preventDefault(),p=z(u,a);return ic(s,t.clientX,t.clientY,a,u,p,t)},Jr=(t,s)=>a=>{t(a)&&s(ac(a))},lm=(t,s,a,u,p)=>{const b=Jr(a,u);return t.dom.addEventListener(s,b,p),{unbind:$e(od,t,s,b,p)}},ty=(t,s,a,u)=>lm(t,s,a,u,!1),od=(t,s,a,u)=>{t.dom.removeEventListener(s,a,u)},Ef=Jt,W1=(t,s,a)=>ty(t,s,Ef,a),G1=()=>Me.fromDom(document),yb=(t,s=!1)=>t.dom.focus({preventScroll:s}),hp=t=>{const s=Wa(t).dom;return t.dom===s.activeElement},jd=(t=G1())=>ce.from(t.dom.activeElement).map(Me.fromDom),q1=t=>jd(Wa(t)).filter(s=>t.dom.contains(s.dom)),wc=(t,s)=>{Rl(t).each(u=>{u.dom.insertBefore(s.dom,t.dom)})},sd=(t,s)=>{xl(t).fold(()=>{Rl(t).each(p=>{Qs(p,s)})},u=>{wc(u,s)})},mp=(t,s)=>{za(t).fold(()=>{Qs(t,s)},u=>{t.dom.insertBefore(s.dom,u.dom)})},Qs=(t,s)=>{t.dom.appendChild(s.dom)},ku=(t,s)=>{wc(t,s),Qs(s,t)},_E=(t,s)=>{Ue(s,a=>{wc(t,a)})},Sb=(t,s)=>{Ue(s,(a,u)=>{const p=u===0?t:s[u-1];sd(p,a)})},rd=(t,s)=>{Ue(s,a=>{Qs(t,a)})},jo=(t,s,a)=>{if(K(a)||we(a)||Ye(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},_i=(t,s,a)=>{jo(t.dom,s,a)},Ac=(t,s)=>{const a=t.dom;wn(s,(u,p)=>{jo(a,p,u)})},Xr=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},id=(t,s)=>ce.from(Xr(t,s)),li=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},da=(t,s)=>{t.dom.removeAttribute(s)},uv=t=>{const s=t.dom.attributes;return s==null||s.length===0},Ds=t=>tn(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),zd=t=>{t.dom.textContent="",Ue(Oi(t),s=>{Vr(s)})},Vr=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},ru=t=>{const s=Oi(t);s.length>0&&Sb(t,s),Vr(t)},fa=(t,s)=>Me.fromDom(t.dom.cloneNode(s)),pa=t=>fa(t,!1),gp=t=>fa(t,!0),dv=(t,s)=>{const a=Me.fromTag(s),u=Ds(t);return Ac(a,u),a},uh=(t,s)=>{const a=dv(t,s);sd(t,a);const u=Oi(t);return rd(a,u),Vr(t),a},um=(t,s)=>{const u=(s||document).createElement("div");return u.innerHTML=t,Oi(Me.fromDom(u))},dm=t=>Ut(t,Me.fromDom),Tc=t=>t.dom.innerHTML,dh=(t,s)=>{const u=Fd(t).dom,p=Me.fromDom(u.createDocumentFragment()),b=um(s,u);rd(p,b),zd(t),Qs(t,p)},oT=t=>{const s=Me.fromTag("div"),a=Me.fromDom(t.dom.cloneNode(!0));return Qs(s,a),Tc(s)},fm=t=>t.style!==void 0&&me(t.style.getPropertyValue),br=t=>{const s=dr(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return gg(Me.fromDom(s)).fold(()=>a.body.contains(s),$t(br,Lo))},K1=(t,s,a)=>{if(!K(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);fm(t)&&t.style.setProperty(s,a)},fv=(t,s)=>{fm(t)&&t.style.removeProperty(s)},Gc=(t,s,a)=>{const u=t.dom;K1(u,s,a)},iu=(t,s)=>{const a=t.dom;wn(s,(u,p)=>{K1(a,p,u)})},zi=(t,s)=>{const a=t.dom,p=window.getComputedStyle(a).getPropertyValue(s);return p===""&&!br(t)?fh(a,s):p},fh=(t,s)=>fm(t)?t.style.getPropertyValue(s):"",ta=(t,s)=>{const a=t.dom,u=fh(a,s);return ce.from(u).filter(p=>p.length>0)},pv=t=>{const s={},a=t.dom;if(fm(a))for(let u=0;u<a.style.length;u++){const p=a.style.item(u);s[p]=a.style[p]}return s},ny=(t,s)=>{const a=t.dom;fv(a,s),gr(id(t,"style").map(Lr),"")&&da(t,"style")},Z1=t=>t.dom.offsetWidth,_f=((t,s)=>{const a=(I,D)=>{if(!Ye(D)&&!D.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+D);const $=I.dom;fm($)&&($.style[t]=D+"px")},u=I=>{const D=s(I);if(D<=0||D===null){const $=zi(I,t);return parseFloat($)||0}return D},p=u,b=(I,D)=>tn(D,($,J)=>{const te=zi(I,J),re=te===void 0?0:parseInt(te,10);return isNaN(re)?$:$+re},0);return{set:a,get:u,getOuter:p,aggregate:b,max:(I,D,$)=>{const J=b(I,$);return D>J?D-J:0}}})("height",t=>{const s=t.dom;return br(t)?s.getBoundingClientRect().height:s.offsetHeight}),sT=t=>_f.get(t),Y1=(t,s)=>({left:t,top:s,translate:(u,p)=>Y1(t+u,s+p)}),wf=Y1,wE=t=>{const s=t.getBoundingClientRect();return wf(s.left,s.top)},hv=(t,s)=>t!==void 0?t:s!==void 0?s:0,Cb=t=>{const s=t.dom.ownerDocument,a=s.body,u=s.defaultView,p=s.documentElement;if(a===t.dom)return wf(a.offsetLeft,a.offsetTop);const b=hv(u==null?void 0:u.pageYOffset,p.scrollTop),E=hv(u==null?void 0:u.pageXOffset,p.scrollLeft),I=hv(p.clientTop,a.clientTop),D=hv(p.clientLeft,a.clientLeft);return Eb(t).translate(E-D,b-I)},Eb=t=>{const s=t.dom,u=s.ownerDocument.body;return u===s?wf(u.offsetLeft,u.offsetTop):br(t)?wE(s):wf(0,0)},J1=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,u=s.body.scrollTop||s.documentElement.scrollTop;return wf(a,u)},AE=(t,s,a)=>{const p=(a!==void 0?a.dom:document).defaultView;p&&p.scrollTo(t,s)},Wd=(t,s)=>{su().browser.isSafari()&&me(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(s)},rT=(t,s)=>{const a=b=>{if(!t(b))throw new Error("Can only get "+s+" value of a "+s+" node");return u(b).getOr("")},u=b=>t(b)?ce.from(b.dom.nodeValue):ce.none();return{get:a,getOption:u,set:(b,E)=>{if(!t(b))throw new Error("Can only set raw "+s+" value of a "+s+" node");b.dom.nodeValue=E}}},pm=(t,s)=>{const u=document.createDocumentFragment();return Ue(t,p=>{u.appendChild(p.dom)}),Me.fromDom(u)},yr=rT(dr,"text"),qc=t=>yr.get(t),vp=t=>yr.getOption(t),X1=(t,s)=>yr.set(t,s),hm=(t,s)=>{const a=Xr(t,s);return a===void 0||a===""?[]:a.split(" ")},Q1=(t,s,a)=>{const p=hm(t,s).concat([a]);return _i(t,s,p.join(" ")),!0},TE=(t,s,a)=>{const u=Oe(hm(t,s),p=>p!==a);return u.length>0?_i(t,s,u.join(" ")):da(t,s),!1};var bp=(t,s,a,u,p)=>t(a,u)?ce.some(a):me(p)&&p(a)?ce.none():s(a,u,p);const yp=(t,s,a)=>{let u=t.dom;const p=me(a)?a:Et;for(;u.parentNode;){u=u.parentNode;const b=Me.fromDom(u);if(s(b))return ce.some(b);if(p(b))break}return ce.none()},Rr=(t,s,a)=>bp((p,b)=>b(p),yp,t,s,a),OE=(t,s)=>{const a=t.dom;return a.parentNode?Ii(Me.fromDom(a.parentNode),u=>!eo(t,u)&&s(u)):ce.none()},Ii=(t,s)=>{const a=p=>s(Me.fromDom(p));return gt(t.dom.childNodes,a).map(Me.fromDom)},mv=(t,s)=>{const a=u=>{for(let p=0;p<u.childNodes.length;p++){const b=Me.fromDom(u.childNodes[p]);if(s(b))return ce.some(b);const E=a(u.childNodes[p]);if(E.isSome())return E}return ce.none()};return a(t.dom)},na=(t,s,a)=>yp(t,u=>Ls(u,s),a),Sp=(t,s)=>Ks(s,t),Kc=(t,s,a)=>bp((p,b)=>Ls(p,b),na,t,s,a),ph=t=>t.dom.classList!==void 0,oy=t=>hm(t,"class"),eS=(t,s)=>Q1(t,"class",s),tS=(t,s)=>TE(t,"class",s),iT=(t,s)=>bt(oy(t),s)?tS(t,s):eS(t,s),au=(t,s)=>{ph(t)?t.dom.classList.add(s):eS(t,s)},Af=t=>{(ph(t)?t.dom.classList:oy(t)).length===0&&da(t,"class")},oa=(t,s)=>{ph(t)?t.dom.classList.remove(s):tS(t,s),Af(t)},Ga=(t,s)=>{const a=ph(t)?t.dom.classList.toggle(s):iT(t,s);return Af(t),a},sy=(t,s)=>ph(t)&&t.dom.classList.contains(s),_b=(t,s)=>{Ue(s,a=>{au(t,a)})},ry=(t,s)=>{Ue(s,a=>{oa(t,a)})},IE=t=>Kc(t,"[contenteditable]"),Gd=(t,s=!1)=>br(t)?t.dom.isContentEditable:IE(t).fold(Be(s),a=>tx(a)==="true"),tx=t=>t.dom.contentEditable,j=(t,s)=>{t.dom.contentEditable=s?"true":"false"},Z=(t,s,a)=>Oe(Wc(t,a),s),he=(t,s)=>Oe(Oi(t),s),Ie=(t,s)=>{let a=[];return Ue(Oi(t),u=>{s(u)&&(a=a.concat([u])),a=a.concat(Ie(u,s))}),a},Xe=(t,s,a)=>Z(t,u=>Ls(u,s),a),Ht=(t,s)=>Es(s,t),Vn=(t,s,a)=>yp(t,s,a).isSome(),yo=(t,s)=>OE(t,s).isSome(),cs=(t,s)=>mv(t,s).isSome(),_s=(t,s)=>Vn(t,$e(eo,s)),Gr=(t,s,a)=>na(t,s,a).isSome(),ui=t=>me(t)?t:Et,ha=(t,s,a)=>{let u=t.dom;const p=ui(a);for(;u.parentNode;){u=u.parentNode;const b=Me.fromDom(u),E=s(b);if(E.isSome())return E;if(p(b))break}return ce.none()},Dl=(t,s,a)=>{const u=s(t),p=ui(a);return u.orThunk(()=>p(t)?ce.none():ha(t,s,p))},hh=t=>vp(t).filter(s=>s.trim().length!==0||s.indexOf(ci)>-1).isSome(),mh=t=>Sf(t)&&Xr(t,"contenteditable")==="false",qd=["img","br"],nS=t=>hh(t)||bt(qd,Xo(t))||mh(t),gv=t=>mv(t,nS),vg={create:(t,s,a,u)=>({start:t,soffset:s,finish:a,foffset:u})},vv=eu.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ay=(t,s,a,u)=>t.fold(s,a,u),cy=t=>t.fold(at,at,at),aT=vv.before,cT=vv.on,Zs=vv.after,Hr={before:aT,on:cT,after:Zs,cata:ay,getStart:cy},Pa=eu.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),cu=t=>Pa.exact(t.start,t.soffset,t.finish,t.foffset),ly=t=>t.match({domRange:s=>Me.fromDom(s.startContainer),relative:(s,a)=>Hr.getStart(s),exact:(s,a,u,p)=>s}),wb=Pa.domRange,uy=Pa.relative,dy=Pa.exact,nx=t=>{const s=ly(t);return Cf(s)},bg=vg.create,mm={domRange:wb,relative:uy,exact:dy,exactFromRange:cu,getWin:nx,range:bg},lT=(t,s,a)=>{var u;return ce.from((u=t.caretPositionFromPoint)===null||u===void 0?void 0:u.call(t,s,a)).bind(p=>{if(p.offsetNode===null)return ce.none();const b=t.createRange();return b.setStart(p.offsetNode,p.offset),b.collapse(),ce.some(b)})},JL=(t,s,a)=>{var u;return ce.from((u=t.caretRangeFromPoint)===null||u===void 0?void 0:u.call(t,s,a))},La=(t,s,a)=>t.caretPositionFromPoint?lT(t,s,a):t.caretRangeFromPoint?JL(t,s,a):ce.none(),Sa=(t,s,a)=>{const u=t.document;return La(u,s,a).map(p=>vg.create(Me.fromDom(p.startContainer),p.startOffset,Me.fromDom(p.endContainer),p.endOffset))},gh=(t,s)=>{const a=Xo(t);return a==="input"?Hr.after(t):bt(["br","img"],a)?s===0?Hr.before(t):Hr.after(t):Hr.on(t,s)},fy=(t,s)=>{const a=t.fold(Hr.before,gh,Hr.after),u=s.fold(Hr.before,gh,Hr.after);return mm.relative(a,u)},RE=(t,s,a,u)=>{const p=gh(t,s),b=gh(a,u);return mm.relative(p,b)},kl=t=>t.match({domRange:s=>{const a=Me.fromDom(s.startContainer),u=Me.fromDom(s.endContainer);return RE(a,s.startOffset,u,s.endOffset)},relative:fy,exact:RE}),uT=t=>{const s=mm.getWin(t).dom,a=(p,b,E,I)=>pp(s,p,b,E,I),u=kl(t);return cn(s,u).match({ltr:a,rtl:a})},bv=(t,s,a)=>Sa(t,s,a),xE=t=>{const s=t===void 0?window:t;return su().browser.isFirefox()?ce.none():ce.from(s.visualViewport)},ad=(t,s,a,u)=>({x:t,y:s,width:a,height:u,right:t+a,bottom:s+u}),DE=t=>{const s=t===void 0?window:t,a=s.document,u=J1(Me.fromDom(a));return xE(s).fold(()=>{const p=s.document.documentElement,b=p.clientWidth,E=p.clientHeight;return ad(u.left,u.top,b,E)},p=>ad(Math.max(p.pageLeft,u.left),Math.max(p.pageTop,u.top),p.width,p.height))};class Kr{constructor(s,a){this.node=s,this.rootNode=a,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(s){return this.node=this.findSibling(this.node,"firstChild","nextSibling",s),this.node}prev(s){return this.node=this.findSibling(this.node,"lastChild","previousSibling",s),this.node}prev2(s){return this.node=this.findPreviousNode(this.node,s),this.node}findSibling(s,a,u,p){if(s){if(!p&&s[a])return s[a];if(s!==this.rootNode){let b=s[u];if(b)return b;for(let E=s.parentNode;E&&E!==this.rootNode;E=E.parentNode)if(b=E[u],b)return b}}}findPreviousNode(s,a){if(s){const u=s.previousSibling;if(this.rootNode&&u===this.rootNode)return;if(u){if(!a){for(let b=u.lastChild;b;b=b.lastChild)if(!b.lastChild)return b}return u}const p=s.parentNode;if(p&&p!==this.rootNode)return p}}}const py=/^[ \t\r\n]*$/,yg=t=>py.test(t),XL=t=>{for(const s of t)if(!Cc(s))return!1;return!0},ox=t=>" \f	\v".indexOf(t)!==-1,kE=t=>t===`
`||t==="\r",QL=(t,s)=>s<t.length&&s>=0?kE(t[s]):!1,dT=(t,s=4,a=!0,u=!0)=>{const p=Ol(" ",s),b=t.replace(/\t/g,p);return tn(b,(I,D)=>ox(D)||D===ci?I.pcIsSpace||I.str===""&&a||I.str.length===b.length-1&&u||QL(b,I.str.length+1)?{pcIsSpace:!1,str:I.str+ci}:{pcIsSpace:!0,str:I.str+" "}:{pcIsSpace:kE(D),str:I.str+D},{pcIsSpace:!1,str:""}).str},Sg=t=>s=>!!s&&s.nodeType===t,fT=t=>!!t&&!Object.getPrototypeOf(t),vo=Sg(1),di=t=>vo(t)&&Sf(Me.fromDom(t)),hy=t=>vo(t)&&t.namespaceURI==="http://www.w3.org/2000/svg",Ab=t=>{const s=t.toLowerCase();return a=>be(a)&&a.nodeName.toLowerCase()===s},Oc=t=>{const s=t.map(a=>a.toLowerCase());return a=>{if(a&&a.nodeName){const u=a.nodeName.toLowerCase();return bt(s,u)}return!1}},my=(t,s)=>{const a=s.toLowerCase().split(" ");return u=>{if(vo(u)){const p=u.ownerDocument.defaultView;if(p)for(let b=0;b<a.length;b++){const E=p.getComputedStyle(u,null);if((E?E.getPropertyValue(t):null)===a[b])return!0}}return!1}},e4=t=>s=>vo(s)&&s.hasAttribute(t),Tb=t=>vo(t)&&t.hasAttribute("data-mce-bogus"),sx=t=>vo(t)&&t.getAttribute("data-mce-bogus")==="all",gm=t=>vo(t)&&t.tagName==="TABLE",yv=t=>s=>!!(di(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),pT=Oc(["textarea","input"]),gn=Sg(3),hT=Sg(4),mT=Sg(7),Wi=Sg(8),xs=Sg(9),Ob=Sg(11),Ri=Ab("br"),gT=Ab("img"),Cp=Ab("a"),lu=yv("true"),fi=yv("false"),ME=t=>di(t)&&t.isContentEditable&&be(t.parentElement)&&!t.parentElement.isContentEditable,vm=Oc(["td","th"]),vT=Oc(["td","th","caption"]),NE=Ab("template"),Ep=Oc(["video","audio","object","embed"]),bT=Ab("li"),PE=Ab("details"),yT=Ab("summary"),rx={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},t4=(t,s,a)=>{const u=Me.fromDom(s),p=Me.fromDom(t),b=a.getWhitespaceElements();return Vn(p,I=>ho(b,Xo(I)),$e(eo,u))},ST=t=>vo(t)&&t.nodeName==="A"&&!t.hasAttribute("href")&&(t.hasAttribute("name")||t.hasAttribute("id")),ix=(t,s)=>vo(t)&&ho(s.getNonEmptyElements(),t.nodeName),LE=e4("data-mce-bookmark"),n4=t=>Du(Me.fromDom(t)).exists(s=>!Gd(s)),o4=(t,s,a)=>yg(t.data)&&!t4(t,s,a),CT=(t,s,a,u)=>gn(t)&&!o4(t,s,a)&&(!u.includeZwsp||!XL(t.data)),ET=(t,s,a,u)=>me(u.isContent)&&u.isContent(s)||ix(s,t)||LE(s)||ST(s)||CT(s,a,t,u)||fi(s)||lu(s)&&n4(s),Tf=(t,s,a)=>{const u={...rx,...a};if(u.checkRootAsContent&&ET(t,s,s,u))return!1;let p=s.firstChild,b=0;if(!p)return!0;const E=new Kr(p,s);do{if(u.skipBogus&&vo(p)){const I=p.getAttribute("data-mce-bogus");if(I){p=E.next(I==="all");continue}}if(Wi(p)){p=E.next(!0);continue}if(Ri(p)){b++,p=E.next();continue}if(ET(t,p,s,u))return!1;p=E.next()}while(p);return b<=1},uu=(t,s,a)=>Tf(t,s.dom,{checkRootAsContent:!0,...a}),Kd=(t,s,a)=>ET(t,s,s,{includeZwsp:rx.includeZwsp,...a}),zo=t=>{const s=t.toLowerCase();return s==="svg"?"svg":s==="math"?"math":"html"},du=t=>zo(t)!=="html",Ib=t=>du(t.nodeName),ax=t=>zo(t.nodeName),s4=["svg","math"],BE=()=>{const t=yc(),s=()=>t.get().map(ax).getOr("html");return{track:p=>(Ib(p)?t.set(p):t.get().exists(b=>!b.contains(p))&&t.clear(),s()),current:s,reset:()=>{t.clear()}}},oS="data-mce-block",Rb=t=>Oe(Vt(t),s=>!/[A-Z]/.test(s)),VE=t=>Ut(Rb(t),s=>{const a=CSS.escape(s);return`${a}:`+Ut(s4,u=>`not(${u} ${a})`).join(":")}).join(","),Sv=(t,s)=>be(s.querySelector(t))?(s.setAttribute(oS,"true"),s.getAttribute("data-mce-selected")==="inline-boundary"&&s.removeAttribute("data-mce-selected"),!0):(s.removeAttribute(oS),!1),_T=(t,s)=>{const a=VE(t.getTransparentElements()),u=VE(t.getBlockElements());return Oe(s.querySelectorAll(a),p=>Sv(u,p))},cx=(t,s,a)=>{var u;const p=a?"lastChild":"firstChild";for(let b=s[p];b;b=b[p])if(Tf(t,b,{checkRootAsContent:!0})){(u=b.parentNode)===null||u===void 0||u.removeChild(b);return}},Hi=(t,s,a)=>{const u=document.createRange(),p=s.parentNode;if(p){u.setStartBefore(s),u.setEndBefore(a);const b=u.extractContents();cx(t,b,!0),u.setStartAfter(a),u.setEndAfter(s);const E=u.extractContents();cx(t,E,!1),Tf(t,b,{checkRootAsContent:!0})||p.insertBefore(b,s),Tf(t,a,{checkRootAsContent:!0})||p.insertBefore(a,s),Tf(t,E,{checkRootAsContent:!0})||p.insertBefore(E,s),p.removeChild(s)}},_p=(t,s,a)=>{const u=t.getBlockElements(),p=Me.fromDom(s),b=I=>Xo(I)in u,E=I=>eo(I,p);Ue(dm(a),I=>{yp(I,b,E).each(D=>{const $=he(I,J=>b(J)&&!t.isValidChild(Xo(D),Xo(J)));if($.length>0){const J=Du(D);Ue($,te=>{yp(te,b,E).each(re=>{Hi(t,re.dom,te.dom)})}),J.each(te=>_T(t,te.dom))}})})},Mu=(t,s,a)=>{Ue([...a,...sn(t,s)?[s]:[]],u=>Ue(Ht(Me.fromDom(u),u.nodeName.toLowerCase()),p=>{Zd(t,p.dom)&&ru(p)}))},Cv=(t,s)=>{const a=_T(t,s);_p(t,s,a),Mu(t,s,a)},fu=(t,s)=>{if(gy(t,s)){const a=VE(t.getBlockElements());Sv(a,s)}},xb=(t,s,a)=>{const u=b=>eo(b,Me.fromDom(s)),p=Wc(Me.fromDom(a),u);ft(p,p.length-2).filter(ki).fold(()=>Cv(t,s),b=>Cv(t,b.dom))},cc=t=>t.hasAttribute(oS),fl=(t,s)=>ho(t.getTransparentElements(),s),gy=(t,s)=>vo(s)&&fl(t,s.nodeName),sn=(t,s)=>gy(t,s)&&cc(s),Zd=(t,s)=>gy(t,s)&&!cc(s),sS=(t,s)=>s.type===1&&fl(t,s.name)&&K(s.attr(oS)),qa=su().browser,Of=t=>gt(t,ki),If=t=>qa.isFirefox()&&Xo(t)==="table"?Of(Oi(t)).filter(s=>Xo(s)==="caption").bind(s=>Of(ja(s)).map(a=>{const u=a.dom.offsetTop,p=s.dom.offsetTop,b=s.dom.offsetHeight;return u<=p?-b:0})).getOr(0):0,lx=(t,s)=>t.children&&bt(t.children,s),Cg=(t,s,a)=>{let u=0,p=0;const b=t.ownerDocument;if(a=a||t,s){if(a===t&&s.getBoundingClientRect&&zi(Me.fromDom(t),"position")==="static"){const I=s.getBoundingClientRect();return u=I.left+(b.documentElement.scrollLeft||t.scrollLeft)-b.documentElement.clientLeft,p=I.top+(b.documentElement.scrollTop||t.scrollTop)-b.documentElement.clientTop,{x:u,y:p}}let E=s;for(;E&&E!==a&&E.nodeType&&!lx(E,a);){const I=E;u+=I.offsetLeft||0,p+=I.offsetTop||0,E=I.offsetParent}for(E=s.parentNode;E&&E!==a&&E.nodeType&&!lx(E,a);)u-=E.scrollLeft||0,p-=E.scrollTop||0,E=E.parentNode;p+=If(Me.fromDom(s))}return{x:u,y:p}},ux=(t,s)=>{const a=s.crossOrigin;return s.contentCssCors?"anonymous":me(a)?a(t):void 0},Nu=(t,s={})=>{let a=0;const u={},p=Me.fromDom(t),b=$d(p),E=et=>{s.referrerPolicy=et},I=et=>{s.contentCssCors=et},D=et=>{s.crossOrigin=et},$=et=>{Qs(j1(p),et)},J=et=>{const ut=j1(p);Sp(ut,"#"+et).each(Vr)},te=et=>Ts(u,et).getOrThunk(()=>({id:"mce-u"+a++,passed:[],failed:[],count:0})),re=et=>new Promise((ut,_t)=>{let Qt;const Mn=yn._addCacheSuffix(et),bn=te(Mn);u[Mn]=bn,bn.count++;const Wt=(Ao,ss)=>{Ue(Ao,Zn),bn.status=ss,bn.passed=[],bn.failed=[],Qt&&(Qt.onload=null,Qt.onerror=null,Qt=null)},ct=()=>Wt(bn.passed,2),ke=()=>Wt(bn.failed,3);if(ut&&bn.passed.push(ut),_t&&bn.failed.push(_t),bn.status===1)return;if(bn.status===2){ct();return}if(bn.status===3){ke();return}bn.status=1;const wt=Me.fromTag("link",b.dom);Ac(wt,{rel:"stylesheet",type:"text/css",id:bn.id});const vn=ux(et,s);vn!==void 0&&_i(wt,"crossOrigin",vn),s.referrerPolicy&&_i(wt,"referrerpolicy",s.referrerPolicy),Qt=wt.dom,Qt.onload=ct,Qt.onerror=ke,$(wt),_i(wt,"href",Mn)}),fe=(et,ut)=>{const _t=te(et);u[et]=_t,_t.count++;const Qt=Me.fromTag("style",b.dom);Ac(Qt,{rel:"stylesheet",type:"text/css",id:_t.id,"data-mce-key":et}),Qt.dom.innerHTML=ut,$(Qt)},Re=et=>Promise.allSettled(Ut(et,_t=>re(_t).then(Be(_t)))).then(_t=>{const Qt=Ot(_t,Mn=>Mn.status==="fulfilled");return Qt.fail.length>0?Promise.reject(Ut(Qt.fail,Mn=>Mn.reason)):Ut(Qt.pass,Mn=>Mn.value)}),Ae=et=>{const ut=yn._addCacheSuffix(et);Ts(u,ut).each(_t=>{--_t.count===0&&(delete u[ut],J(_t.id))})};return{load:re,loadRawCss:fe,loadAll:Re,unload:Ae,unloadRawCss:et=>{Ts(u,et).each(ut=>{--ut.count===0&&(delete u[et],J(ut.id))})},unloadAll:et=>{Ue(et,ut=>{Ae(ut)})},_setReferrerPolicy:E,_setContentCssCors:I,_setCrossOrigin:D}},wp=(()=>{const t=new WeakMap;return{forElement:(a,u)=>{const b=Wa(a).dom;return ce.from(t.get(b)).getOrThunk(()=>{const E=Nu(b,u);return t.set(b,E),E})}}})(),rS=t=>t.nodeName.toLowerCase()==="span",qi=(t,s)=>be(t)&&(Kd(s,t)||s.isInline(t.nodeName.toLowerCase())),dx=(t,s,a)=>{const u=new Kr(t,s).prev(!1),p=new Kr(t,s).next(!1),b=Ne(u)||qi(u,a),E=Ne(p)||qi(p,a);return b&&E},HE=t=>rS(t)&&t.getAttribute("data-mce-type")==="bookmark",vh=(t,s,a)=>gn(t)&&t.data.length>0&&dx(t,s,a),wT=t=>vo(t)?t.childNodes.length>0:!1,cd=t=>Ob(t)||xs(t),AT=(t,s,a,u)=>{var p;const b=u||s;if(vo(s)&&HE(s))return s;const E=s.childNodes;for(let I=E.length-1;I>=0;I--)AT(t,E[I],a,b);if(vo(s)){const I=s.childNodes;I.length===1&&HE(I[0])&&((p=s.parentNode)===null||p===void 0||p.insertBefore(I[0],s))}return!cd(s)&&!Kd(a,s)&&!wT(s)&&!vh(s,b,a)&&t.remove(s),s},Ct=yn.makeMap,pu=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,vy=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Fi=/[<>&\"\']/g,Yd=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Zc={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},Or={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},fx={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Ev=t=>{const s=Me.fromTag("div").dom;return s.innerHTML=t,s.textContent||s.innerText||t},TT=(t,s)=>{const a={};if(t){const u=t.split(",");s=s||10;for(let p=0;p<u.length;p+=2){const b=String.fromCharCode(parseInt(u[p],s));if(!Or[b]){const E="&"+u[p+1]+";";a[b]=E,a[E]=b}}return a}else return},_v=TT("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),by=(t,s)=>t.replace(s?pu:vy,a=>Or[a]||a),px=t=>(""+t).replace(Fi,s=>Or[s]||s),hx=(t,s)=>t.replace(s?pu:vy,a=>a.length>1?"&#"+((a.charCodeAt(0)-55296)*1024+(a.charCodeAt(1)-56320)+65536)+";":Or[a]||"&#"+a.charCodeAt(0)+";"),Eg=(t,s,a)=>{const u=a||_v;return t.replace(s?pu:vy,p=>Or[p]||u[p]||p)},Db={encodeRaw:by,encodeAllRaw:px,encodeNumeric:hx,encodeNamed:Eg,getEncodeFunc:(t,s)=>{const a=TT(s)||_v,u=(E,I)=>E.replace(I?pu:vy,D=>Or[D]!==void 0?Or[D]:a[D]!==void 0?a[D]:D.length>1?"&#"+((D.charCodeAt(0)-55296)*1024+(D.charCodeAt(1)-56320)+65536)+";":"&#"+D.charCodeAt(0)+";"),p=(E,I)=>Eg(E,I,a),b=Ct(t.replace(/\+/g,","));return b.named&&b.numeric?u:b.named?s?p:Eg:b.numeric?hx:by},decode:t=>t.replace(Yd,(s,a)=>a?(a.charAt(0).toLowerCase()==="x"?a=parseInt(a.substr(1),16):a=parseInt(a,10),a>65535?(a-=65536,String.fromCharCode(55296+(a>>10),56320+(a&1023))):Zc[a]||String.fromCharCode(a)):fx[s]||_v[s]||Ev(s))},Yc=(t,s)=>(t=yn.trim(t),t?t.split(s||" "):[]),Ic=t=>new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$"),_g=t=>se(t)&&t.source&&Object.prototype.toString.call(t)==="[object RegExp]",wg=t=>{const s=a=>le(a)?Ut(a,s):_g(a)?new RegExp(a.source,a.flags):se(a)?ko(a,s):a;return s(t)},kb=t=>{const s=/^(~)?(.+)$/;return Jn(Yc(t,","),a=>{const u=s.exec(a);if(u){const b=u[1]==="~"?"span":"div",E=u[2];return[{cloneName:b,name:E}]}else return[]})},yy=t=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...t!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...t!=="html5-strict"?["xml:lang"]:[]]),hu=t=>{let s,a;s="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",a="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",t!=="html4"&&(s+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",a+=" audio canvas command data datalist mark meter output picture progress template time wbr video ruby bdi keygen svg"),t!=="html5-strict"&&(a=[a,"acronym applet basefont big font strike tt"].join(" "),s=[s,"center dir isindex noframes"].join(" "));const u=[s,a].join(" ");return{blockContent:s,phrasingContent:a,flowContent:u}},wv=t=>{const{blockContent:s,phrasingContent:a,flowContent:u}=hu(t),p=b=>Object.freeze(b.split(" "));return Object.freeze({blockContent:p(s),phrasingContent:p(a),flowContent:p(u)})},Ka={html4:ka(()=>wv("html4")),html5:ka(()=>wv("html5")),"html5-strict":ka(()=>wv("html5-strict"))},FE=(t,s)=>{const{blockContent:a,phrasingContent:u,flowContent:p}=Ka[t]();return s==="blocks"?ce.some(a):s==="phrasing"?ce.some(u):s==="flow"?ce.some(p):ce.none()},Ap=t=>{const s=yy(t),{phrasingContent:a,flowContent:u}=hu(t),p={},b=(D,$,J)=>{p[D]={attributes:is($,Be({})),attributesOrder:$,children:is(J,Be({}))}},E=(D,$="",J="")=>{const te=Yc(J),re=Yc(D);let fe=re.length;const Re=[...s,...Yc($)];for(;fe--;)b(re[fe],Re.slice(),te)},I=(D,$)=>{const J=Yc(D),te=Yc($);let re=J.length;for(;re--;){const fe=p[J[re]];for(let Re=0,Ae=te.length;Re<Ae;Re++)fe.attributes[te[Re]]={},fe.attributesOrder.push(te[Re])}};return t!=="html5-strict"&&(Ue(Yc("acronym applet basefont big font strike tt"),J=>{E(J,"",a)}),Ue(Yc("center dir isindex noframes"),J=>{E(J,"",u)})),E("html","manifest","head body"),E("head","","base command link meta noscript script style title"),E("title hr noscript br"),E("base","href target"),E("link","href rel media hreflang type sizes hreflang"),E("meta","name http-equiv content charset"),E("style","media type scoped"),E("script","src async defer type charset"),E("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",u),E("dd div","",u),E("address dt caption","",t==="html4"?a:u),E("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",a),E("blockquote","cite",u),E("ol","reversed start type","li"),E("ul","","li"),E("li","value",u),E("dl","","dt dd"),E("a","href target rel media hreflang type",t==="html4"?a:u),E("q","cite",a),E("ins del","cite datetime",u),E("img","src sizes srcset alt usemap ismap width height"),E("iframe","src name width height",u),E("embed","src type width height"),E("object","data type typemustmatch name usemap form width height",[u,"param"].join(" ")),E("param","name value"),E("map","name",[u,"area"].join(" ")),E("area","alt coords shape href target rel media hreflang type"),E("table","border","caption colgroup thead tfoot tbody tr"+(t==="html4"?" col":"")),E("colgroup","span","col"),E("col","span"),E("tbody thead tfoot","","tr"),E("tr","","td th"),E("td","colspan rowspan headers",u),E("th","colspan rowspan headers scope abbr",u),E("form","accept-charset action autocomplete enctype method name novalidate target",u),E("fieldset","disabled form name",[u,"legend"].join(" ")),E("label","form for",a),E("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),E("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",t==="html4"?u:a),E("select","disabled form multiple name required size","option optgroup"),E("optgroup","disabled label","option"),E("option","disabled label selected value"),E("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),E("menu","type label",[u,"li"].join(" ")),E("noscript","",u),t!=="html4"&&(E("wbr"),E("ruby","",[a,"rt rp"].join(" ")),E("figcaption","",u),E("mark rt rp bdi","",a),E("summary","",[a,"h1 h2 h3 h4 h5 h6"].join(" ")),E("canvas","width height",u),E("data","value",a),E("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[u,"track source"].join(" ")),E("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[u,"track source"].join(" ")),E("picture","","img source"),E("source","src srcset type media sizes"),E("track","kind src srclang label default"),E("datalist","",[a,"option"].join(" ")),E("article section nav aside main header footer","",u),E("hgroup","","h1 h2 h3 h4 h5 h6"),E("figure","",[u,"figcaption"].join(" ")),E("time","datetime",a),E("dialog","open",u),E("command","type label icon disabled checked radiogroup command"),E("output","for form name",a),E("progress","value max",a),E("meter","value min max low high optimum",a),E("details","open",[u,"summary"].join(" ")),E("keygen","autofocus challenge disabled form keytype name"),b("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),t!=="html5-strict"&&(I("script","language xml:space"),I("style","xml:space"),I("object","declare classid code codebase codetype archive standby align border hspace vspace"),I("embed","align name hspace vspace"),I("param","valuetype type"),I("a","charset name rev shape coords"),I("br","clear"),I("applet","codebase archive code object alt name width height align hspace vspace"),I("img","name longdesc align border hspace vspace"),I("iframe","longdesc frameborder marginwidth marginheight scrolling align"),I("font basefont","size color face"),I("input","usemap align"),I("select"),I("textarea"),I("h1 h2 h3 h4 h5 h6 div p legend caption","align"),I("ul","type compact"),I("li","type"),I("ol dl menu dir","compact"),I("pre","width xml:space"),I("hr","align noshade size width"),I("isindex","prompt"),I("table","summary width frame rules cellspacing cellpadding align bgcolor"),I("col","width align char charoff valign"),I("colgroup","width align char charoff valign"),I("thead","align char charoff valign"),I("tr","align char charoff valign bgcolor"),I("th","axis align char charoff valign nowrap bgcolor width height"),I("form","accept"),I("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),I("tfoot","align char charoff valign"),I("tbody","align char charoff valign"),I("area","nohref"),I("body","background bgcolor text link vlink alink")),t!=="html4"&&(I("input button select textarea","autofocus"),I("input textarea","placeholder"),I("a","download"),I("link script img","crossorigin"),I("img","loading"),I("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),t!=="html4"&&Ue([p.video,p.audio],D=>{delete D.children.audio,delete D.children.video}),Ue(Yc("a form meter progress dfn"),D=>{p[D]&&delete p[D].children[D]}),delete p.caption.children.table,delete p.script,p},Tp=t=>t==="-"?"remove":"add",$E=t=>{const s=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return ce.from(s.exec(t)).map(a=>({preset:a[1]==="@",name:a[2]}))},lc=t=>{const s=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Jn(Yc(t,","),a=>{const u=s.exec(a);if(u){const p=u[1],b=p?Tp(p):"replace",E=u[2],I=Jn(Yc(u[3],"|"),D=>$E(D).toArray());return[{operation:b,name:E,validChildren:I}]}else return[]})},Sy=(t,s)=>{const a=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,u=/[*?+]/,{attributes:p,attributesOrder:b}=s;return Ue(Yc(t,"|"),E=>{const I=a.exec(E);if(I){const D={},$=I[1],J=I[2].replace(/[\\:]:/g,":"),te=I[3],re=I[4];if($==="!"&&(s.attributesRequired=s.attributesRequired||[],s.attributesRequired.push(J),D.required=!0),$==="-"){delete p[J],b.splice(yn.inArray(b,J),1);return}if(te&&(te==="="?(s.attributesDefault=s.attributesDefault||[],s.attributesDefault.push({name:J,value:re}),D.defaultValue=re):te==="~"?(s.attributesForced=s.attributesForced||[],s.attributesForced.push({name:J,value:re}),D.forcedValue=re):te==="<"&&(D.validValues=yn.makeMap(re,"?"))),u.test(J)){const fe=D;s.attributePatterns=s.attributePatterns||[],fe.pattern=Ic(J),s.attributePatterns.push(fe)}else p[J]||b.push(J),p[J]=D}})},Ag=(t,s)=>{wn(t.attributes,(a,u)=>{s.attributes[u]=a}),s.attributesOrder.push(...t.attributesOrder)},Mb=(t,s)=>{const a=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Jn(Yc(s,","),u=>{const p=a.exec(u);if(p){const b=p[1],E=p[2],I=p[3],D=p[4],$=p[5],J={attributes:{},attributesOrder:[]};if(t.each(te=>Ag(te,J)),b==="#"?J.paddEmpty=!0:b==="-"&&(J.removeEmpty=!0),D==="!"&&(J.removeEmptyAttrs=!0),$&&Sy($,J),I&&(J.outputName=E),E==="@")if(t.isNone())t=ce.some(J);else return[];return[I?{name:E,element:J,aliasName:I}:{name:E,element:J}]}else return[]})},bm={},aS=yn.makeMap,Jd=yn.each,Nb=yn.extend,mx=yn.explode,sa=(t,s={})=>{const a=aS(t," ",aS(t.toUpperCase()," "));return Nb(a,s)},gx=t=>sa("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),ym=(t,s)=>{if(t){const a={};return K(t)&&(t={"*":t}),Jd(t,(u,p)=>{a[p]=a[p.toUpperCase()]=s==="map"?aS(u,/[, ]/):mx(u,/[, ]/)}),a}else return},Op=(t={})=>{var s;const a={},u={};let p=[];const b={},E={},I=(Ho,sr,Aa)=>{const el=t[Ho];if(el)return aS(el,/[, ]/,aS(el.toUpperCase(),/[, ]/));{let vl=bm[Ho];return vl||(vl=sa(sr,Aa),bm[Ho]=vl),vl}},D=(s=t.schema)!==null&&s!==void 0?s:"html5",$=Ap(D);t.verify_html===!1&&(t.valid_elements="*[*]");const J=ym(t.valid_styles),te=ym(t.invalid_styles,"map"),re=ym(t.valid_classes,"map"),fe=I("whitespace_elements","pre script noscript style textarea video audio iframe object code"),Re=I("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),Ae=I("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),_e=I("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),Qe="td th iframe video audio object script code",et=I("non_empty_elements",Qe+" pre svg textarea summary",Ae),ut=I("move_caret_before_on_enter_elements",Qe+" table",Ae),_t="h1 h2 h3 h4 h5 h6",Qt=I("text_block_elements",_t+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Mn=I("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing colgroup col",Qt),bn=I("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Wt=I("transparent_elements","a ins del canvas map"),ct=I("wrap_block_elements","pre "+_t);Jd("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Ho=>{E[Ho]=new RegExp("</"+Ho+"[^>]*>","gi")});const ke=Ho=>{const sr=ce.from(a["@"]),Aa=/[*?+]/;Ue(Mb(sr,Ho??""),({name:el,element:vl,aliasName:Nc})=>{if(Nc&&(a[Nc]=vl),Aa.test(el)){const aa=vl;aa.pattern=Ic(el),p.push(aa)}else a[el]=vl})},wt=Ho=>{p=[],Ue(Vt(a),sr=>{delete a[sr]}),ke(Ho)},vn=(Ho,sr)=>{var Aa,el;delete bm.text_block_elements,delete bm.block_elements;const vl=sr.extends?!of(sr.extends):!1,Nc=sr.extends;if(u[Ho]=Nc?u[Nc]:{},b[Ho]=Nc??Ho,et[Ho.toUpperCase()]={},et[Ho]={},vl||(Mn[Ho.toUpperCase()]={},Mn[Ho]={}),Nc&&!a[Ho]&&a[Nc]){const aa=wg(a[Nc]);delete aa.removeEmptyAttrs,delete aa.removeEmpty,a[Ho]=aa}else a[Ho]={attributesOrder:[],attributes:{}};if(le(sr.attributes)){const aa=Jf=>{ca.attributesOrder.push(Jf),ca.attributes[Jf]={}},ca=(Aa=a[Ho])!==null&&Aa!==void 0?Aa:{};delete ca.attributesDefault,delete ca.attributesForced,delete ca.attributePatterns,delete ca.attributesRequired,ca.attributesOrder=[],ca.attributes={},Ue(sr.attributes,Jf=>{const Jv=yy(D);$E(Jf).each(({preset:g1,name:R0})=>{g1?R0==="global"&&Ue(Jv,aa):aa(R0)})}),a[Ho]=ca}if(we(sr.padEmpty)){const aa=(el=a[Ho])!==null&&el!==void 0?el:{};aa.paddEmpty=sr.padEmpty,a[Ho]=aa}if(le(sr.children)){const aa={},ca=Jv=>{aa[Jv]={}},Jf=Jv=>{FE(D,Jv).each(g1=>{Ue(g1,ca)})};Ue(sr.children,Jv=>{$E(Jv).each(({preset:g1,name:R0})=>{g1?Jf(R0):ca(R0)})}),u[Ho]=aa}Nc&&wn(u,(aa,ca)=>{aa[Nc]&&(u[ca]=aa=Nb({},u[ca]),aa[Ho]=aa[Nc])})},Ao=Ho=>{Ue(kb(Ho??""),({name:sr,cloneName:Aa})=>{vn(sr,{extends:Aa})})},ss=Ho=>{se(Ho)?wn(Ho,(sr,Aa)=>vn(Aa,sr)):K(Ho)&&Ao(Ho)},ks=Ho=>{Ue(lc(Ho??""),({operation:sr,name:Aa,validChildren:el})=>{const vl=sr==="replace"?{"#comment":{}}:u[Aa],Nc=ca=>{sr==="remove"?delete vl[ca]:vl[ca]={}},aa=ca=>{FE(D,ca).each(Jf=>{Ue(Jf,Nc)})};Ue(el,({preset:ca,name:Jf})=>{ca?aa(Jf):Nc(Jf)}),u[Aa]=vl})},Gs=Ho=>{const sr=a[Ho];if(sr)return sr;let Aa=p.length;for(;Aa--;){const el=p[Aa];if(el.pattern.test(Ho))return el}},Pi=()=>{t.valid_elements?(wt(t.valid_elements),Jd($,(Ho,sr)=>{u[sr]=Ho.children})):(Jd($,(Ho,sr)=>{a[sr]={attributes:Ho.attributes,attributesOrder:Ho.attributesOrder},u[sr]=Ho.children}),Jd(Yc("strong/b em/i"),Ho=>{const sr=Yc(Ho,"/");a[sr[1]].outputName=sr[0]}),Jd(bn,(Ho,sr)=>{a[sr]&&(t.padd_empty_block_inline_children&&(a[sr].paddInEmptyBlock=!0),a[sr].removeEmpty=!0)}),Jd(Yc("ol ul blockquote a table tbody"),Ho=>{a[Ho]&&(a[Ho].removeEmpty=!0)}),Jd(Yc("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Ho=>{a[Ho]&&(a[Ho].paddEmpty=!0)}),Jd(Yc("span"),Ho=>{a[Ho].removeEmptyAttrs=!0})),delete a.svg,ss(t.custom_elements),ks(t.valid_children),ke(t.extended_valid_elements),ks("+ol[ul|ol],+ul[ul|ol]"),Jd({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Ho,sr)=>{a[sr]&&(a[sr].parentsRequired=Yc(Ho))}),t.invalid_elements&&Jd(mx(t.invalid_elements),Ho=>{a[Ho]&&delete a[Ho]}),Gs("span")||ke("span[!data-mce-type|*]")},Li=Be(J),gl=Be(te),In=Be(re),Io=Be(_e),or=Be(Mn),Er=Be(Qt),Eo=Be(bn),Dn=Be(Object.seal(Ae)),Xn=Be(Re),Go=Be(et),rs=Be(ut),Nr=Be(fe),ni=Be(Wt),jh=Be(ct),ql=Be(Object.seal(E)),Zg=(Ho,sr)=>{const Aa=u[Ho.toLowerCase()];return!!(Aa&&Aa[sr.toLowerCase()])},Zm=(Ho,sr)=>{const Aa=Gs(Ho);if(Aa)if(sr){if(Aa.attributes[sr])return!0;const el=Aa.attributePatterns;if(el){let vl=el.length;for(;vl--;)if(el[vl].pattern.test(sr))return!0}}else return!0;return!1},of=Ho=>ho(or(),Ho),Yf=Ho=>!$o(Ho,"#")&&Zm(Ho)&&!of(Ho),Yg=Ho=>ho(jh(),Ho)||Yf(Ho),zw=Be(b);return Pi(),{type:D,children:u,elements:a,getValidStyles:Li,getValidClasses:In,getBlockElements:or,getInvalidStyles:gl,getVoidElements:Dn,getTextBlockElements:Er,getTextInlineElements:Eo,getBoolAttrs:Io,getElementRule:Gs,getSelfClosingElements:Xn,getNonEmptyElements:Go,getMoveCaretBeforeOnEnterElements:rs,getWhitespaceElements:Nr,getTransparentElements:ni,getSpecialElements:ql,isValidChild:Zg,isValid:Zm,isBlock:of,isInline:Yf,isWrapper:Yg,getCustomElements:zw,addValidElements:ke,setValidElements:wt,addCustomElements:ss,addValidChildren:ks}},OT=t=>({value:Pb(t)}),Pb=t=>rh(t,"#").toUpperCase(),ld=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},Lb=t=>{const s=ld(t.red)+ld(t.green)+ld(t.blue);return OT(s)},Bb=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,IT=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,UE=(t,s,a,u)=>({red:t,green:s,blue:a,alpha:u}),jE=(t,s,a,u)=>{const p=parseInt(t,10),b=parseInt(s,10),E=parseInt(a,10),I=parseFloat(u);return UE(p,b,E,I)},zE=t=>Bb.test(t)?"rgb":IT.test(t)?"rgba":"other",RT=t=>{const s=Bb.exec(t);if(s!==null)return ce.some(jE(s[1],s[2],s[3],"1"));const a=IT.exec(t);return a!==null?ce.some(jE(a[1],a[2],a[3],a[4])):ce.none()},vx=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,Vb=t=>RT(t).map(Lb).map(s=>"#"+s.value).getOr(t),Hb=(t={},s)=>{const a=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,u=/\s*([^:]+):\s*([^;]+);?/g,p=/\s+$/,b={};let E,I;const D=Sc;s&&(E=s.getValidStyles(),I=s.getInvalidStyles());const $=(`\\" \\' \\; \\: ; : `+D).split(" ");for(let te=0;te<$.length;te++)b[$[te]]=D+te,b[D+te]=$[te];const J={parse:te=>{const re={};let fe=!1;const Re=t.url_converter,Ae=t.url_converter_scope||J,_e=(Wt,ct,ke)=>{const wt=re[Wt+"-top"+ct];if(!wt)return;const vn=re[Wt+"-right"+ct];if(!vn)return;const Ao=re[Wt+"-bottom"+ct];if(!Ao)return;const ss=re[Wt+"-left"+ct];if(!ss)return;const ks=[wt,vn,Ao,ss];let Gs=ks.length-1;for(;Gs--&&ks[Gs]===ks[Gs+1];);Gs>-1&&ke||(re[Wt+ct]=Gs===-1?ks[0]:ks.join(" "),delete re[Wt+"-top"+ct],delete re[Wt+"-right"+ct],delete re[Wt+"-bottom"+ct],delete re[Wt+"-left"+ct])},Qe=Wt=>{const ct=re[Wt];if(!ct)return;const ke=ct.indexOf(",")>-1?[ct]:ct.split(" ");let wt=ke.length;for(;wt--;)if(ke[wt]!==ke[0])return!1;return re[Wt]=ke[0],!0},et=(Wt,ct,ke,wt)=>{Qe(ct)&&Qe(ke)&&Qe(wt)&&(re[Wt]=re[ct]+" "+re[ke]+" "+re[wt],delete re[ct],delete re[ke],delete re[wt])},ut=Wt=>(fe=!0,b[Wt]),_t=(Wt,ct)=>(fe&&(Wt=Wt.replace(/\uFEFF[0-9]/g,ke=>b[ke])),ct||(Wt=Wt.replace(/\\([\'\";:])/g,"$1")),Wt),Qt=Wt=>String.fromCharCode(parseInt(Wt.slice(1),16)),Mn=Wt=>Wt.replace(/\\[0-9a-f]+/gi,Qt),bn=(Wt,ct,ke,wt,vn,Ao)=>{if(vn=vn||Ao,vn)return vn=_t(vn),"'"+vn.replace(/\'/g,"\\'")+"'";if(ct=_t(ct||ke||wt||""),!t.allow_script_urls){const ss=ct.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(ss)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(ss))return""}return Re&&(ct=Re.call(Ae,ct,"style")),"url('"+ct.replace(/\'/g,"\\'")+"')"};if(te){te=te.replace(/[\u0000-\u001F]/g,""),te=te.replace(/\\[\"\';:\uFEFF]/g,ut).replace(/\"[^\"]+\"|\'[^\']+\'/g,ct=>ct.replace(/[;:]/g,ut));let Wt;for(;Wt=u.exec(te);){u.lastIndex=Wt.index+Wt[0].length;let ct=Wt[1].replace(p,"").toLowerCase(),ke=Wt[2].replace(p,"");if(ct&&ke){if(ct=Mn(ct),ke=Mn(ke),ct.indexOf(D)!==-1||ct.indexOf('"')!==-1||!t.allow_script_urls&&(ct==="behavior"||/expression\s*\(|\/\*|\*\//.test(ke)))continue;ct==="font-weight"&&ke==="700"?ke="bold":(ct==="color"||ct==="background-color")&&(ke=ke.toLowerCase()),zE(ke)==="rgb"&&RT(ke).each(wt=>{ke=Vb(vx(wt)).toLowerCase()}),ke=ke.replace(a,bn),re[ct]=fe?_t(ke,!0):ke}}_e("border","",!0),_e("border","-width"),_e("border","-color"),_e("border","-style"),_e("padding",""),_e("margin",""),et("border","border-width","border-style","border-color"),re.border==="medium none"&&delete re.border,re["border-image"]==="none"&&delete re["border-image"]}return re},serialize:(te,re)=>{let fe="";const Re=(_e,Qe)=>{const et=Qe[_e];if(et)for(let ut=0,_t=et.length;ut<_t;ut++){const Qt=et[ut],Mn=te[Qt];Mn&&(fe+=(fe.length>0?" ":"")+Qt+": "+Mn+";")}},Ae=(_e,Qe)=>{if(!I||!Qe)return!0;let et=I["*"];return et&&et[_e]?!1:(et=I[Qe],!(et&&et[_e]))};return re&&E?(Re("*",E),Re(re,E)):wn(te,(_e,Qe)=>{_e&&Ae(Qe,re)&&(fe+=(fe.length>0?" ":"")+Qe+": "+_e+";")}),fe}};return J},bh={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Tg=t=>t instanceof Event||me(t.initEvent),Fb=t=>t.isDefaultPrevented===Jt||t.isDefaultPrevented===Et,bx=t=>De(t.preventDefault)||Tg(t),cS=(t,s)=>{const a=s??{};for(const u in t)ho(bh,u)||(a[u]=t[u]);return be(t.composedPath)&&(a.composedPath=()=>t.composedPath()),be(t.getModifierState)&&(a.getModifierState=u=>t.getModifierState(u)),be(t.getTargetRanges)&&(a.getTargetRanges=()=>t.getTargetRanges()),a},lS=(t,s,a,u)=>{var p;const b=cS(s,u);return b.type=t,De(b.target)&&(b.target=(p=b.srcElement)!==null&&p!==void 0?p:a),bx(s)&&(b.preventDefault=()=>{b.defaultPrevented=!0,b.isDefaultPrevented=Jt,me(s.preventDefault)&&s.preventDefault()},b.stopPropagation=()=>{b.cancelBubble=!0,b.isPropagationStopped=Jt,me(s.stopPropagation)&&s.stopPropagation()},b.stopImmediatePropagation=()=>{b.isImmediatePropagationStopped=Jt,b.stopPropagation()},Fb(b)||(b.isDefaultPrevented=b.defaultPrevented===!0?Jt:Et,b.isPropagationStopped=b.cancelBubble===!0?Jt:Et,b.isImmediatePropagationStopped=Et)),b},yx="mce-data-",Sx=/^(?:mouse|contextmenu)|click/,WE=(t,s,a,u)=>{t.addEventListener(s,a,u||!1)},$b=(t,s,a,u)=>{t.removeEventListener(s,a,u||!1)},GE=t=>be(t)&&Sx.test(t.type),Rf=(t,s)=>{const a=lS(t.type,t,document,s);if(GE(t)&&Ne(t.pageX)&&!Ne(t.clientX)){const u=a.target.ownerDocument||document,p=u.documentElement,b=u.body,E=a;E.pageX=t.clientX+(p&&p.scrollLeft||b&&b.scrollLeft||0)-(p&&p.clientLeft||b&&b.clientLeft||0),E.pageY=t.clientY+(p&&p.scrollTop||b&&b.scrollTop||0)-(p&&p.clientTop||b&&b.clientTop||0)}return a},Cx=(t,s,a)=>{const u=t.document,p={type:"ready"};if(a.domLoaded){s(p);return}const b=()=>u.readyState==="complete"||u.readyState==="interactive"&&u.body,E=()=>{$b(t,"DOMContentLoaded",E),$b(t,"load",E),a.domLoaded||(a.domLoaded=!0,s(p)),t=null};b()?E():WE(t,"DOMContentLoaded",E),a.domLoaded||WE(t,"load",E)};class Ip{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=yx+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(s,a,u,p){const b=this;let E;const I=window,D=re=>{b.executeHandlers(Rf(re||I.event),$)};if(!s||gn(s)||Wi(s))return u;let $;s[b.expando]?$=s[b.expando]:($=b.count++,s[b.expando]=$,b.events[$]={}),p=p||s;const J=a.split(" ");let te=J.length;for(;te--;){let re=J[te],fe=D,Re=!1,Ae=!1;if(re==="DOMContentLoaded"&&(re="ready"),b.domLoaded&&re==="ready"&&s.readyState==="complete"){u.call(p,Rf({type:re}));continue}!b.hasFocusIn&&(re==="focusin"||re==="focusout")&&(Re=!0,Ae=re==="focusin"?"focus":"blur",fe=_e=>{const Qe=Rf(_e||I.event);Qe.type=Qe.type==="focus"?"focusin":"focusout",b.executeHandlers(Qe,$)}),E=b.events[$][re],E?re==="ready"&&b.domLoaded?u(Rf({type:re})):E.push({func:u,scope:p}):(b.events[$][re]=E=[{func:u,scope:p}],E.fakeName=Ae,E.capture=Re,E.nativeHandler=fe,re==="ready"?Cx(s,fe,b):WE(s,Ae||re,fe,Re))}return s=E=null,u}unbind(s,a,u){if(!s||gn(s)||Wi(s))return this;const p=s[this.expando];if(p){let b=this.events[p];if(a){const E=a.split(" ");let I=E.length;for(;I--;){const D=E[I],$=b[D];if($){if(u){let J=$.length;for(;J--;)if($[J].func===u){const te=$.nativeHandler,re=$.fakeName,fe=$.capture,Re=$.slice(0,J).concat($.slice(J+1));Re.nativeHandler=te,Re.fakeName=re,Re.capture=fe,b[D]=Re}}(!u||$.length===0)&&(delete b[D],$b(s,$.fakeName||D,$.nativeHandler,$.capture))}}}else wn(b,(E,I)=>{$b(s,E.fakeName||I,E.nativeHandler,E.capture)}),b={};for(const E in b)if(ho(b,E))return this;delete this.events[p];try{delete s[this.expando]}catch{s[this.expando]=null}}return this}fire(s,a,u){return this.dispatch(s,a,u)}dispatch(s,a,u){if(!s||gn(s)||Wi(s))return this;const p=Rf({type:a,target:s},u);do{const b=s[this.expando];b&&this.executeHandlers(p,b),s=s.parentNode||s.ownerDocument||s.defaultView||s.parentWindow}while(s&&!p.isPropagationStopped());return this}clean(s){if(!s||gn(s)||Wi(s))return this;if(s[this.expando]&&this.unbind(s),s.getElementsByTagName||(s=s.document),s&&s.getElementsByTagName){this.unbind(s);const a=s.getElementsByTagName("*");let u=a.length;for(;u--;)s=a[u],s[this.expando]&&this.unbind(s)}return this}destroy(){this.events={}}cancel(s){return s&&(s.preventDefault(),s.stopImmediatePropagation()),!1}executeHandlers(s,a){const u=this.events[a],p=u&&u[s.type];if(p)for(let b=0,E=p.length;b<E;b++){const I=p[b];if(I&&I.func.call(I.scope,s)===!1&&s.preventDefault(),s.isImmediatePropagationStopped())return}}}Ip.Event=new Ip;const uS=yn.each,Ex=yn.grep,_x="data-mce-style",ud=yn.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),dS=(t,s,a)=>{De(a)||a===""?da(t,s):_i(t,s,a)},wx=t=>t.replace(/[A-Z]/g,s=>"-"+s.toLowerCase()),Av=(t,s)=>{let a=0;if(t)for(let u=t.nodeType,p=t.previousSibling;p;p=p.previousSibling){const b=p.nodeType;s&&gn(p)&&(b===u||!p.data.length)||(a++,u=b)}return a},r4=(t,s)=>{const a=Xr(s,"style"),u=t.serialize(t.parse(a),Xo(s));dS(s,_x,u)},i4=(t,s)=>Ye(t)?ho(ud,s)?t+"":t+"px":t,xT=(t,s,a)=>{const u=wx(s);De(a)||a===""?ny(t,u):Gc(t,u,i4(a,u))},a4=(t,s,a)=>{const u=s.keep_values,p={set:(E,I,D)=>{const $=Me.fromDom(E);me(s.url_converter)&&be(I)&&(I=s.url_converter.call(s.url_converter_scope||a(),String(I),D,E));const J="data-mce-"+D;dS($,J,I),dS($,D,I)},get:(E,I)=>{const D=Me.fromDom(E);return Xr(D,"data-mce-"+I)||Xr(D,I)}},b={style:{set:(E,I)=>{const D=Me.fromDom(E);u&&dS(D,_x,I),da(D,"style"),K(I)&&iu(D,t.parse(I))},get:E=>{const I=Me.fromDom(E),D=Xr(I,_x)||Xr(I,"style");return t.serialize(t.parse(D),Xo(I))}}};return u&&(b.href=b.src=p),b},Ir=(t,s={})=>{const a={},u=window,p={};let b=0;const E=!0,I=!0,D=wp.forElement(Me.fromDom(t),{contentCssCors:s.contentCssCors,referrerPolicy:s.referrerPolicy,crossOrigin:St=>{const kt=s.crossOrigin;if(me(kt))return kt(St,"stylesheet")}}),$=[],J=s.schema?s.schema:Op({}),te=Hb({url_converter:s.url_converter,url_converter_scope:s.url_converter_scope},s.schema),re=s.ownEvents?new Ip:Ip.Event,fe=J.getBlockElements(),Re=St=>K(St)?ho(fe,St):vo(St)&&(ho(fe,St.nodeName)||sn(J,St)),Ae=St=>St&&t&&K(St)?t.getElementById(St):St,_e=St=>{const kt=Ae(St);return be(kt)?Me.fromDom(kt):null},Qe=(St,kt,Gn="")=>{let Bn;const Zo=_e(St);if(be(Zo)&&ki(Zo)){const hr=uZ[kt];hr&&hr.get?Bn=hr.get(Zo.dom,kt):Bn=Xr(Zo,kt)}return be(Bn)?Bn:Gn},et=St=>{const kt=Ae(St);return De(kt)?[]:kt.attributes},ut=(St,kt,Gn)=>{Io(St,Bn=>{if(vo(Bn)){const Zo=Me.fromDom(Bn),hr=Gn===""?null:Gn,Ta=Xr(Zo,kt),x0=uZ[kt];x0&&x0.set?x0.set(Zo.dom,hr,kt):dS(Zo,kt,hr),Ta!==hr&&s.onSetAttrib&&s.onSetAttrib({attrElm:Zo.dom,attrName:kt,attrValue:hr})}})},_t=(St,kt)=>St.cloneNode(kt),Qt=()=>s.root_element||t.body,Mn=St=>{const kt=DE(St);return{x:kt.x,y:kt.y,w:kt.width,h:kt.height}},bn=(St,kt)=>Cg(t.body,Ae(St),kt),Wt=(St,kt,Gn)=>{Io(St,Bn=>{const Zo=Me.fromDom(Bn);xT(Zo,kt,Gn),s.update_styles&&r4(te,Zo)})},ct=(St,kt)=>{Io(St,Gn=>{const Bn=Me.fromDom(Gn);wn(kt,(Zo,hr)=>{xT(Bn,hr,Zo)}),s.update_styles&&r4(te,Bn)})},ke=(St,kt,Gn)=>{const Bn=Ae(St);if(!(De(Bn)||!di(Bn)&&!hy(Bn)))return Gn?zi(Me.fromDom(Bn),wx(kt)):(kt=kt.replace(/-(\D)/g,(Zo,hr)=>hr.toUpperCase()),kt==="float"&&(kt="cssFloat"),Bn.style?Bn.style[kt]:void 0)},wt=St=>{const kt=Ae(St);if(!kt)return{w:0,h:0};let Gn=ke(kt,"width"),Bn=ke(kt,"height");return(!Gn||Gn.indexOf("px")===-1)&&(Gn="0"),(!Bn||Bn.indexOf("px")===-1)&&(Bn="0"),{w:parseInt(Gn,10)||kt.offsetWidth||kt.clientWidth,h:parseInt(Bn,10)||kt.offsetHeight||kt.clientHeight}},vn=St=>{const kt=Ae(St),Gn=bn(kt),Bn=wt(kt);return{x:Gn.x,y:Gn.y,w:Bn.w,h:Bn.h}},Ao=(St,kt)=>{if(!St)return!1;const Gn=le(St)?St:[St];return Kt(Gn,Bn=>Ls(Me.fromDom(Bn),kt))},ss=(St,kt,Gn,Bn)=>{const Zo=[];let hr=Ae(St);Bn=Bn===void 0;const Ta=Gn||(Qt().nodeName!=="BODY"?Qt().parentNode:null);if(K(kt))if(kt==="*")kt=vo;else{const x0=kt;kt=Qv=>Ao(Qv,x0)}for(;hr&&!(hr===Ta||De(hr.nodeType)||xs(hr)||Ob(hr));){if(!kt||kt(hr))if(Bn)Zo.push(hr);else return[hr];hr=hr.parentNode}return Bn?Zo:null},ks=(St,kt,Gn)=>{const Bn=ss(St,kt,Gn,!1);return Bn&&Bn.length>0?Bn[0]:null},Gs=(St,kt,Gn)=>{let Bn=kt;if(St){K(kt)&&(Bn=Zo=>Ao(Zo,kt));for(let Zo=St[Gn];Zo;Zo=Zo[Gn])if(me(Bn)&&Bn(Zo))return Zo}return null},Pi=(St,kt)=>Gs(St,kt,"nextSibling"),Li=(St,kt)=>Gs(St,kt,"previousSibling"),gl=St=>me(St.querySelectorAll),In=(St,kt)=>{var Gn,Bn;const Zo=(Bn=(Gn=Ae(kt))!==null&&Gn!==void 0?Gn:s.root_element)!==null&&Bn!==void 0?Bn:t;return gl(Zo)?Nn(Zo.querySelectorAll(St)):[]},Io=function(St,kt,Gn){const Bn=Gn??this;if(le(St)){const Zo=[];return uS(St,(hr,Ta)=>{const x0=Ae(hr);x0&&Zo.push(kt.call(Bn,x0,Ta))}),Zo}else{const Zo=Ae(St);return Zo?kt.call(Bn,Zo):!1}},or=(St,kt)=>{Io(St,Gn=>{wn(kt,(Bn,Zo)=>{ut(Gn,Zo,Bn)})})},Er=(St,kt)=>{Io(St,Gn=>{const Bn=Me.fromDom(Gn);dh(Bn,kt)})},Eo=(St,kt,Gn,Bn,Zo)=>Io(St,hr=>{const Ta=K(kt)?t.createElement(kt):kt;return be(Gn)&&or(Ta,Gn),Bn&&(!K(Bn)&&Bn.nodeType?Ta.appendChild(Bn):K(Bn)&&Er(Ta,Bn)),Zo?Ta:hr.appendChild(Ta)}),Dn=(St,kt,Gn)=>Eo(t.createElement(St),St,kt,Gn,!0),Xn=Db.decode,Go=Db.encodeAllRaw,rs=(St,kt,Gn="")=>{let Bn="<"+St;for(const Zo in kt)Os(kt,Zo)&&(Bn+=" "+Zo+'="'+Go(kt[Zo])+'"');return ec(Gn)&&ho(J.getVoidElements(),St)?Bn+" />":Bn+">"+Gn+"</"+St+">"},Nr=St=>{const kt=t.createElement("div"),Gn=t.createDocumentFragment();Gn.appendChild(kt),St&&(kt.innerHTML=St);let Bn;for(;Bn=kt.firstChild;)Gn.appendChild(Bn);return Gn.removeChild(kt),Gn},ni=(St,kt)=>Io(St,Gn=>{const Bn=Me.fromDom(Gn);return kt&&Ue(Oi(Bn),Zo=>{dr(Zo)&&Zo.dom.length===0?Vr(Zo):wc(Bn,Zo)}),Vr(Bn),Bn.dom}),jh=St=>Io(St,kt=>{const Gn=kt.attributes;for(let Bn=Gn.length-1;Bn>=0;Bn--)kt.removeAttributeNode(Gn.item(Bn))}),ql=St=>te.parse(St),Zg=(St,kt)=>te.serialize(St,kt),Zm=St=>{if(Gw!==Ir.DOM&&t===document){if(a[St])return;a[St]=!0}let kt=t.getElementById("mceDefaultStyles");if(!kt){kt=t.createElement("style"),kt.id="mceDefaultStyles",kt.type="text/css";const Gn=t.head;Gn.firstChild?Gn.insertBefore(kt,Gn.firstChild):Gn.appendChild(kt)}kt.styleSheet?kt.styleSheet.cssText+=St:kt.appendChild(t.createTextNode(St))},of=St=>{St||(St=""),Ue(St.split(","),kt=>{p[kt]=!0,D.load(kt).catch(Ze)})},Yf=(St,kt,Gn)=>{Io(St,Bn=>{if(vo(Bn)){const Zo=Me.fromDom(Bn),hr=kt.split(" ");Ue(hr,Ta=>{be(Gn)?(Gn?au:oa)(Zo,Ta):Ga(Zo,Ta)})}})},Yg=(St,kt)=>{Yf(St,kt,!0)},zw=(St,kt)=>{Yf(St,kt,!1)},Ho=(St,kt)=>{const Gn=_e(St),Bn=kt.split(" ");return be(Gn)&&ys(Bn,Zo=>sy(Gn,Zo))},sr=St=>{Io(St,kt=>ny(Me.fromDom(kt),"display"))},Aa=St=>{Io(St,kt=>Gc(Me.fromDom(kt),"display","none"))},el=St=>{const kt=_e(St);return be(kt)&&gr(ta(kt,"display"),"none")},vl=St=>(St||"mce_")+b++,Nc=St=>{const kt=_e(St);return be(kt)?vo(kt.dom)?kt.dom.outerHTML:oT(kt):""},aa=(St,kt)=>{Io(St,Gn=>{vo(Gn)&&(Gn.outerHTML=kt)})},ca=(St,kt)=>{const Gn=Ae(kt);return Io(St,Bn=>{const Zo=Gn==null?void 0:Gn.parentNode,hr=Gn==null?void 0:Gn.nextSibling;return Zo&&(hr?Zo.insertBefore(Bn,hr):Zo.appendChild(Bn)),Bn})},Jf=(St,kt,Gn)=>Io(kt,Bn=>{var Zo;const hr=le(kt)?St.cloneNode(!0):St;return Gn&&uS(Ex(Bn.childNodes),Ta=>{hr.appendChild(Ta)}),(Zo=Bn.parentNode)===null||Zo===void 0||Zo.replaceChild(hr,Bn),Bn}),Jv=(St,kt)=>{if(St.nodeName!==kt.toUpperCase()){const Gn=Dn(kt);return uS(et(St),Bn=>{ut(Gn,Bn.nodeName,Qe(St,Bn.nodeName))}),Jf(Gn,St,!0),Gn}else return St},g1=(St,kt)=>{let Gn=St;for(;Gn;){let Bn=kt;for(;Bn&&Gn!==Bn;)Bn=Bn.parentNode;if(Gn===Bn)break;Gn=Gn.parentNode}return!Gn&&St.ownerDocument?St.ownerDocument.documentElement:Gn},R0=(St,kt,Gn)=>ie(kt)?Tf(J,St,{...Gn,isContent:Zo=>{const hr=Zo.nodeName.toLowerCase();return!!kt[hr]}}):Tf(J,St,Gn),rP=()=>t.createRange(),iP=(St,kt,Gn)=>{let Bn=rP(),Zo,hr;if(St&&kt&&St.parentNode&&kt.parentNode){const Ta=St.parentNode;return Bn.setStart(Ta,Av(St)),Bn.setEnd(kt.parentNode,Av(kt)),Zo=Bn.extractContents(),Bn=rP(),Bn.setStart(kt.parentNode,Av(kt)+1),Bn.setEnd(Ta,Av(St)+1),hr=Bn.extractContents(),Ta.insertBefore(AT(Gw,Zo,J),St),Gn?Ta.insertBefore(Gn,St):Ta.insertBefore(kt,St),Ta.insertBefore(AT(Gw,hr,J),St),ni(St),Gn||kt}else return},TR=(St,kt,Gn,Bn)=>{if(le(St)){let Zo=St.length;const hr=[];for(;Zo--;)hr[Zo]=TR(St[Zo],kt,Gn,Bn);return hr}else return s.collect&&(St===t||St===u)&&$.push([St,kt,Gn,Bn]),re.bind(St,kt,Gn,Bn||Gw)},Xv=(St,kt,Gn)=>{if(le(St)){let Bn=St.length;const Zo=[];for(;Bn--;)Zo[Bn]=Xv(St[Bn],kt,Gn);return Zo}else{if($.length>0&&(St===t||St===u)){let Bn=$.length;for(;Bn--;){const[Zo,hr,Ta]=$[Bn];St===Zo&&(!kt||kt===hr)&&(!Gn||Gn===Ta)&&re.unbind(Zo,hr,Ta)}}return re.unbind(St,kt,Gn)}},Ww=(St,kt,Gn)=>re.dispatch(St,kt,Gn),Q$=(St,kt,Gn)=>re.dispatch(St,kt,Gn),aP=St=>{if(St&&di(St)){const kt=St.getAttribute("data-mce-contenteditable");return kt&&kt!=="inherit"?kt:St.contentEditable!=="inherit"?St.contentEditable:null}else return null},Gw={doc:t,settings:s,win:u,files:p,stdMode:E,boxModel:I,styleSheetLoader:D,boundEvents:$,styles:te,schema:J,events:re,isBlock:Re,root:null,clone:_t,getRoot:Qt,getViewPort:Mn,getRect:vn,getSize:wt,getParent:ks,getParents:ss,get:Ae,getNext:Pi,getPrev:Li,select:In,is:Ao,add:Eo,create:Dn,createHTML:rs,createFragment:Nr,remove:ni,setStyle:Wt,getStyle:ke,setStyles:ct,removeAllAttribs:jh,setAttrib:ut,setAttribs:or,getAttrib:Qe,getPos:bn,parseStyle:ql,serializeStyle:Zg,addStyle:Zm,loadCSS:of,addClass:Yg,removeClass:zw,hasClass:Ho,toggleClass:Yf,show:sr,hide:Aa,isHidden:el,uniqueId:vl,setHTML:Er,getOuterHTML:Nc,setOuterHTML:aa,decode:Xn,encode:Go,insertAfter:ca,replace:Jf,rename:Jv,findCommonAncestor:g1,run:Io,getAttribs:et,isEmpty:R0,createRng:rP,nodeIndex:Av,split:iP,bind:TR,unbind:Xv,fire:Q$,dispatch:Ww,getContentEditable:aP,getContentEditableParent:St=>{const kt=Qt();let Gn=null;for(let Bn=St;Bn&&Bn!==kt&&(Gn=aP(Bn),Gn===null);Bn=Bn.parentNode);return Gn},isEditable:St=>{if(be(St)){const kt=vo(St)?St:St.parentElement;return be(kt)&&di(kt)&&Gd(Me.fromDom(kt))}else return!1},destroy:()=>{if($.length>0){let St=$.length;for(;St--;){const[kt,Gn,Bn]=$[St];re.unbind(kt,Gn,Bn)}}wn(p,(St,kt)=>{D.unload(kt),delete p[kt]})},isChildOf:(St,kt)=>St===kt||kt.contains(St),dumpRng:St=>"startContainer: "+St.startContainer.nodeName+", startOffset: "+St.startOffset+", endContainer: "+St.endContainer.nodeName+", endOffset: "+St.endOffset},uZ=a4(te,s,Be(Gw));return Gw};Ir.DOM=Ir(document),Ir.nodeIndex=Av;const Ax=Ir.DOM,Tx=0,xf=1,Ub=2,zs=3;class Ba{constructor(s={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=s}_setReferrerPolicy(s){this.settings.referrerPolicy=s}_setCrossOrigin(s){this.settings.crossOrigin=s}loadScript(s){return new Promise((a,u)=>{const p=Ax;let b;const E=()=>{p.remove($),b&&(b.onerror=b.onload=b=null)},I=()=>{E(),a()},D=()=>{E(),u("Failed to load script: "+s)},$=p.uniqueId();b=document.createElement("script"),b.id=$,b.type="text/javascript",b.src=yn._addCacheSuffix(s),this.settings.referrerPolicy&&p.setAttrib(b,"referrerpolicy",this.settings.referrerPolicy);const J=this.settings.crossOrigin;if(me(J)){const te=J(s);te!==void 0&&p.setAttrib(b,"crossorigin",te)}b.onload=I,b.onerror=D,(document.getElementsByTagName("head")[0]||document.body).appendChild(b)})}isDone(s){return this.states[s]===Ub}markDone(s){this.states[s]=Ub}add(s){const a=this;return a.queue.push(s),a.states[s]===void 0&&(a.states[s]=Tx),new Promise((p,b)=>{a.scriptLoadedCallbacks[s]||(a.scriptLoadedCallbacks[s]=[]),a.scriptLoadedCallbacks[s].push({resolve:p,reject:b})})}load(s){return this.add(s)}remove(s){delete this.states[s],delete this.scriptLoadedCallbacks[s]}loadQueue(){const s=this.queue;return this.queue=[],this.loadScripts(s)}loadScripts(s){const a=this,u=(D,$)=>{Ts(a.scriptLoadedCallbacks,$).each(J=>{Ue(J,te=>te[D]($))}),delete a.scriptLoadedCallbacks[$]},p=D=>{const $=Oe(D,J=>J.status==="rejected");return $.length>0?Promise.reject(Jn($,({reason:J})=>le(J)?J:[J])):Promise.resolve()},b=D=>Promise.allSettled(Ut(D,$=>a.states[$]===Ub?(u("resolve",$),Promise.resolve()):a.states[$]===zs?(u("reject",$),Promise.reject($)):(a.states[$]=xf,a.loadScript($).then(()=>{a.states[$]=Ub,u("resolve",$);const J=a.queue;return J.length>0?(a.queue=[],b(J).then(p)):Promise.resolve()},()=>(a.states[$]=zs,u("reject",$),Promise.reject($)))))),E=D=>(a.loading=!0,b(D).then($=>{a.loading=!1;const J=a.queueLoadedCallbacks.shift();return ce.from(J).each(Zn),p($)})),I=ap(s);return a.loading?new Promise((D,$)=>{a.queueLoadedCallbacks.push(()=>{E(I).then(D,$)})}):E(I)}}Ba.ScriptLoader=new Ba;const fS=(t,s)=>{const a=t.indexOf(s);return a!==-1&&t.indexOf(s,a+1)>a},qE=t=>se(t)&&ho(t,"raw"),pi=t=>le(t)&&t.length>1,Cy={},KE=fo("en"),Ox=()=>Ts(Cy,KE.get()),Rp={getData:()=>ko(Cy,t=>({...t})),setCode:t=>{t&&KE.set(t)},getCode:()=>KE.get(),add:(t,s)=>{let a=Cy[t];a||(Cy[t]=a={});const u=Ut(Vt(s),p=>p.toLowerCase());wn(s,(p,b)=>{const E=b.toLowerCase();E!==b&&fS(u,E)?(ho(s,E)||(a[E]=p),a[b]=p):a[E]=p})},translate:t=>{const s=Ox().getOr({}),a=I=>me(I)?Object.prototype.toString.call(I):u(I)?"":""+I,u=I=>I===""||I===null||I===void 0,p=I=>{const D=a(I);return ho(s,D)?a(s[D]):Ts(s,D.toLowerCase()).map(a).getOr(D)},b=I=>I.replace(/{context:\w+}$/,""),E=I=>I.replaceAll("...",am);if(u(t))return"";if(qE(t))return E(a(t.raw));if(pi(t)){const I=t.slice(1),D=p(t[0]).replace(/\{([0-9]+)\}/g,($,J)=>ho(I,J)?a(I[J]):$);return E(b(D))}return E(b(p(t)))},isRtl:()=>Ox().bind(t=>Ts(t,"_dir")).exists(t=>t==="rtl"),hasCode:t=>ho(Cy,t)},pl=()=>{const t=[],s={},a={},u=[],p=(Ae,_e)=>{const Qe=Oe(u,et=>et.name===Ae&&et.state===_e);Ue(Qe,et=>et.resolve())},b=Ae=>ho(s,Ae),E=Ae=>ho(a,Ae),I=Ae=>{if(a[Ae])return a[Ae].instance},D=(Ae,_e)=>{const Qe=Rp.getCode(),et=","+(_e||"")+",";!Qe||_e&&et.indexOf(","+Qe+",")===-1||Ba.ScriptLoader.add(s[Ae]+"/langs/"+Qe+".js")},$=(Ae,_e)=>{pl.languageLoad!==!1&&(b(Ae)?D(Ae,_e):Re(Ae,"loaded").then(()=>D(Ae,_e)))},J=(Ae,_e)=>(t.push(_e),a[Ae]={instance:_e},p(Ae,"added"),_e),te=Ae=>{delete s[Ae],delete a[Ae]},re=(Ae,_e)=>K(_e)?K(Ae)?{prefix:"",resource:_e,suffix:""}:{prefix:Ae.prefix,resource:_e,suffix:Ae.suffix}:_e,fe=(Ae,_e)=>{if(s[Ae])return Promise.resolve();let Qe=K(_e)?_e:_e.prefix+_e.resource+_e.suffix;Qe.indexOf("/")!==0&&Qe.indexOf("://")===-1&&(Qe=pl.baseURL+"/"+Qe),s[Ae]=Qe.substring(0,Qe.lastIndexOf("/"));const et=()=>(p(Ae,"loaded"),Promise.resolve());return a[Ae]?et():Ba.ScriptLoader.add(Qe).then(et)},Re=(Ae,_e="added")=>_e==="added"&&E(Ae)||_e==="loaded"&&b(Ae)?Promise.resolve():new Promise(Qe=>{u.push({name:Ae,state:_e,resolve:Qe})});return{items:t,urls:s,lookup:a,get:I,requireLangPack:$,add:J,remove:te,createUrl:re,load:fe,waitFor:Re}};pl.languageLoad=!0,pl.baseURL="",pl.PluginManager=pl(),pl.ThemeManager=pl(),pl.ModelManager=pl();const xp=Be("mce-annotation"),yh=Be("data-mce-annotation"),Sh=Be("data-mce-annotation-uid"),Tv=Be("data-mce-annotation-active"),Sm=Be("data-mce-annotation-classes"),Og=Be("data-mce-annotation-attrs"),DT=t=>s=>eo(s,t),kT=(t,s)=>{const a=t.selection.getRng(),u=Me.fromDom(a.startContainer),p=Me.fromDom(t.getBody()),b=s.fold(()=>"."+xp(),D=>`[${yh()}="${D}"]`),E=Ud(u,a.startOffset).getOr(u);return Kc(E,b,DT(p)).bind(D=>id(D,`${Sh()}`).bind($=>id(D,`${yh()}`).map(J=>{const te=ZE(t,$);return{uid:$,name:J,elements:te}})))},g6=t=>ki(t)&&sy(t,xp()),u4=(t,s)=>li(t,"data-mce-bogus")||Gr(t,'[data-mce-bogus="all"]',DT(s)),ZE=(t,s)=>{const a=Me.fromDom(t.getBody()),u=Ht(a,`[${Sh()}="${s}"]`);return Oe(u,p=>!u4(p,a))},YE=(t,s)=>{const a=Me.fromDom(t.getBody()),u=Ht(a,`[${yh()}="${s}"]`),p={};return Ue(u,b=>{if(!u4(b,a)){const E=Xr(b,Sh()),I=Ts(p,E).getOr([]);p[E]=I.concat([b])}}),p},kx=(t,s)=>{const a=fo({}),u=()=>({listeners:[],previous:yc()}),p=(te,re)=>{b(te,fe=>(re(fe),fe))},b=(te,re)=>{const fe=a.get(),Re=Ts(fe,te).getOrThunk(u),Ae=re(Re);fe[te]=Ae,a.set(fe)},E=(te,re,fe)=>{p(te,Re=>{Ue(Re.listeners,Ae=>Ae(!0,te,{uid:re,nodes:Ut(fe,_e=>_e.dom)}))})},I=te=>{p(te,re=>{Ue(re.listeners,fe=>fe(!1,te))})},D=(te,re)=>{Ue(ZE(t,te),fe=>{re?_i(fe,Tv(),"true"):da(fe,Tv())})},$=Il(()=>{const te=st(s.getNames());Ue(te,re=>{b(re,fe=>{const Re=fe.previous.get();return kT(t,ce.some(re)).fold(()=>{Re.each(Ae=>{I(re),fe.previous.clear(),D(Ae,!1)})},({uid:Ae,name:_e,elements:Qe})=>{gr(Re,Ae)||(Re.each(et=>D(et,!1)),E(_e,Ae,Qe),fe.previous.set(Ae),D(Ae,!0))}),{previous:fe.previous,listeners:fe.listeners}})})},30);return t.on("remove",()=>{$.cancel()}),t.on("NodeChange",()=>{$.throttle()}),{addListener:(te,re)=>{b(te,fe=>({previous:fe.previous,listeners:fe.listeners.concat([re])}))}}},JE=(t,s)=>{const a=yh(),u=b=>ce.from(b.attr(a)).bind(s.lookup),p=b=>{var E,I;b.attr(Sh(),null),b.attr(yh(),null),b.attr(Tv(),null);const D=ce.from(b.attr(Og())).map(re=>re.split(",")).getOr([]),$=ce.from(b.attr(Sm())).map(re=>re.split(",")).getOr([]);Ue(D,re=>b.attr(re,null));const J=(I=(E=b.attr("class"))===null||E===void 0?void 0:E.split(" "))!==null&&I!==void 0?I:[],te=es(J,[xp()].concat($));b.attr("class",te.length>0?te.join(" "):null),b.attr(Sm(),null),b.attr(Og(),null)};t.serializer.addTempAttr(Tv()),t.serializer.addAttributeFilter(a,b=>{for(const E of b)u(E).each(I=>{I.persistent===!1&&(E.name==="span"?E.unwrap():p(E))})})},Ov=()=>{const t={};return{register:(p,b)=>{t[p]={name:p,settings:b}},lookup:p=>Ts(t,p).map(b=>b.settings),getNames:()=>Vt(t)}},pS=(t,s,a=Et)=>{const u=new Kr(t,s),p=b=>{let E;do E=u[b]();while(E&&!gn(E)&&!a(E));return ce.from(E).filter(gn)};return{current:()=>ce.from(u.current()).filter(gn),next:()=>p("next"),prev:()=>p("prev"),prev2:()=>p("prev2")}},Ch=(t,s)=>{const a=s||(E=>t.isBlock(E)||Ri(E)||fi(E)),u=(E,I,D,$)=>{if(gn(E)){const J=$(E,I,E.data);if(J!==-1)return ce.some({container:E,offset:J})}return D().bind(J=>u(J.container,J.offset,D,$))};return{backwards:(E,I,D,$)=>{const J=pS(E,$??t.getRoot(),a);return u(E,I,()=>J.prev().map(te=>({container:te,offset:te.length})),D).getOrNull()},forwards:(E,I,D,$)=>{const J=pS(E,$??t.getRoot(),a);return u(E,I,()=>J.next().map(te=>({container:te,offset:0})),D).getOrNull()}}},XE=["td","th"],d4=["thead","tbody","tfoot"],QE=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],e_=["li","dd","dt"],Mx=["ul","ol","dl"],f4=["pre","script","textarea","style"],Ey=t=>{let s;return a=>(s=s||is(t,Jt),ho(s,Xo(a)))},Nx=t=>Xo(t)==="table",Cm=t=>ki(t)&&Xo(t)==="br",_y=Ey(QE),t_=Ey(Mx),Em=Ey(e_),mu=Ey(d4),dd=Ey(XE),fd=Ey(f4),n_=t=>{const s=[];let a=t.dom;for(;a;)s.push(Me.fromDom(a)),a=a.lastChild;return s},MT=t=>{const s=Ht(t,"br"),a=Oe(n_(t).slice(-1),Cm);s.length===a.length&&Ue(a,Vr)},wy=()=>{const t=Me.fromTag("br");return _i(t,"data-mce-bogus","1"),t},_m=t=>{zd(t),Qs(t,wy())},p4=(t,s)=>{ea(t).each(a=>{nd(a).each(u=>{s.isBlock(Xo(t))&&Cm(a)&&s.isBlock(Xo(u))&&Vr(a)})})},Va=Sc,o_=Cc,Pu=ul,Px=t=>t.insertContent(Va,{preserve_zwsp:!0}),Lx=vo,Iv=gn,Ig=t=>(Iv(t)&&(t=t.parentNode),Lx(t)&&t.hasAttribute("data-mce-caret")),fr=t=>Iv(t)&&o_(t.data),Ml=t=>Ig(t)||fr(t),hS=t=>t.firstChild!==t.lastChild||!Ri(t.firstChild),s_=(t,s)=>{var a;const p=((a=t.ownerDocument)!==null&&a!==void 0?a:document).createTextNode(Va),b=t.parentNode;if(s){const E=t.previousSibling;if(Iv(E)){if(Ml(E))return E;if(Rv(E))return E.splitText(E.data.length-1)}b==null||b.insertBefore(p,t)}else{const E=t.nextSibling;if(Iv(E)){if(Ml(E))return E;if(wm(E))return E.splitText(1),E}t.nextSibling?b==null||b.insertBefore(p,t.nextSibling):b==null||b.appendChild(p)}return p},r_=t=>{const s=t.container();return gn(s)?s.data.charAt(t.offset())===Va||t.isAtStart()&&fr(s.previousSibling):!1},mS=t=>{const s=t.container();return gn(s)?s.data.charAt(t.offset()-1)===Va||t.isAtEnd()&&fr(s.nextSibling):!1},Bx=(t,s,a)=>{var u;const b=((u=s.ownerDocument)!==null&&u!==void 0?u:document).createElement(t);b.setAttribute("data-mce-caret",a?"before":"after"),b.setAttribute("data-mce-bogus","all"),b.appendChild(wy().dom);const E=s.parentNode;return a?E==null||E.insertBefore(b,s):s.nextSibling?E==null||E.insertBefore(b,s.nextSibling):E==null||E.appendChild(b),b},wm=t=>Iv(t)&&t.data[0]===Va,Rv=t=>Iv(t)&&t.data[t.data.length-1]===Va,NT=t=>{var s;const a=t.getElementsByTagName("br"),u=a[a.length-1];Tb(u)&&((s=u.parentNode)===null||s===void 0||s.removeChild(u))},Xd=t=>t&&t.hasAttribute("data-mce-caret")?(NT(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,Ay=t=>Ig(t.startContainer),Ca=Math.round,Lu=t=>t?{left:Ca(t.left),top:Ca(t.top),bottom:Ca(t.bottom),right:Ca(t.right),width:Ca(t.width),height:Ca(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},i_=(t,s)=>(t=Lu(t),s||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),Vx=(t,s)=>t.left===s.left&&t.top===s.top&&t.bottom===s.bottom&&t.right===s.right,PT=(t,s,a)=>t>=0&&t<=Math.min(s.height,a.height)/2,xv=(t,s)=>{const a=Math.min(s.height/2,t.height/2);return t.bottom-a<s.top?!0:t.top>s.bottom?!1:PT(s.top-t.bottom,t,s)},jb=(t,s)=>t.top>s.bottom?!0:t.bottom<s.top?!1:PT(s.bottom-t.top,t,s),LT=(t,s,a)=>s>=t.left&&s<=t.right&&a>=t.top&&a<=t.bottom,BT=t=>tn(t,(s,a)=>s.fold(()=>ce.some(a),u=>{const p=Math.min(a.left,u.left),b=Math.min(a.top,u.top),E=Math.max(a.right,u.right),I=Math.max(a.bottom,u.bottom);return ce.some({top:b,right:E,bottom:I,left:p,width:E-p,height:I-b})}),ce.none()),gS=(t,s,a)=>{const u=Math.max(Math.min(s,t.left+t.width),t.left),p=Math.max(Math.min(a,t.top+t.height),t.top);return Math.sqrt((s-u)*(s-u)+(a-p)*(a-p))},VT=(t,s)=>Math.max(0,Math.min(t.bottom,s.bottom)-Math.max(t.top,s.top)),Dv=t=>{const s=t.startContainer,a=t.startOffset;return s===t.endContainer&&s.hasChildNodes()&&t.endOffset===a+1?s.childNodes[a]:null},Rg=(t,s)=>{if(vo(t)&&t.hasChildNodes()){const a=t.childNodes,u=Yu(s,0,a.length-1);return a[u]}else return t},Hx=(t,s)=>{if(!(s<0&&vo(t)&&t.hasChildNodes()))return Rg(t,s)},Jc=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),Fx=t=>K(t)&&t.charCodeAt(0)>=768&&Jc.test(t),kv=(...t)=>s=>{for(let a=0;a<t.length;a++)if(t[a](s))return!0;return!1},$x=(...t)=>s=>{for(let a=0;a<t.length;a++)if(!t[a](s))return!1;return!0},a_=lu,HT=fi,vS=Ri,FT=gn,Ux=Oc(["script","style","textarea"]),jx=Oc(["img","input","textarea","hr","iframe","video","audio","object","embed"]),bS=Oc(["table"]),Ha=Ml,hi=t=>Ha(t)?!1:FT(t)?!Ux(t.parentNode):jx(t)||vS(t)||bS(t)||Za(t),Xc=t=>vo(t)&&t.getAttribute("unselectable")==="true",Za=t=>!Xc(t)&&HT(t),uc=(t,s)=>{for(let a=t.parentNode;a&&a!==s;a=a.parentNode){if(Za(a))return!1;if(a_(a))return!0}return!0},Ea=t=>Za(t)?!tn(Nn(t.getElementsByTagName("*")),(s,a)=>s||a_(a),!1):!1,c_=t=>jx(t)||Ea(t),l_=(t,s)=>hi(t)&&uc(t,s),u_=vo,zx=hi,d_=my("display","block table"),Wx=my("float","left right"),zb=$x(u_,zx,qt(Wx)),$T=qt(my("white-space","pre pre-line pre-wrap")),Wb=gn,f_=Ri,UT=Ir.nodeIndex,p_=Hx,Eh=t=>t?t.createRange():Ir.DOM.createRng(),yS=t=>K(t)&&/[\r\n\t ]/.test(t),jT=t=>!!t.setStart&&!!t.setEnd,Ty=t=>{const s=t.startContainer,a=t.startOffset;if(yS(t.toString())&&$T(s.parentNode)&&gn(s)){const u=s.data;if(yS(u[a-1])||yS(u[a+1]))return!0}return!1},SS=t=>{const s=t.ownerDocument,a=Eh(s),u=s.createTextNode(ci),p=t.parentNode;p.insertBefore(u,t),a.setStart(u,0),a.setEnd(u,1);const b=Lu(a.getBoundingClientRect());return p.removeChild(u),b},h_=t=>{const s=t.startContainer,a=t.endContainer,u=t.startOffset,p=t.endOffset;if(s===a&&gn(a)&&u===0&&p===1){const b=t.cloneRange();return b.setEndAfter(a),Dp(b)}else return null},zT=t=>t.left===0&&t.right===0&&t.top===0&&t.bottom===0,Dp=t=>{var s;let a;const u=t.getClientRects();return u.length>0?a=Lu(u[0]):a=Lu(t.getBoundingClientRect()),!jT(t)&&f_(t)&&zT(a)?SS(t):zT(a)&&jT(t)&&(s=h_(t))!==null&&s!==void 0?s:a},Am=(t,s)=>{const a=i_(t,s);return a.width=1,a.right=a.left+1,a},Oy=t=>{const s=[],a=E=>{E.height!==0&&(s.length>0&&Vx(E,s[s.length-1])||s.push(E))},u=(E,I)=>{const D=Eh(E.ownerDocument);if(I<E.data.length){if(Fx(E.data[I]))return;if(Fx(E.data[I-1])&&(D.setStart(E,I),D.setEnd(E,I+1),!Ty(D))){a(Am(Dp(D),!1));return}}I>0&&(D.setStart(E,I-1),D.setEnd(E,I),Ty(D)||a(Am(Dp(D),!1))),I<E.data.length&&(D.setStart(E,I),D.setEnd(E,I+1),Ty(D)||a(Am(Dp(D),!0)))},p=t.container(),b=t.offset();if(Wb(p))return u(p,b),s;if(u_(p))if(t.isAtEnd()){const E=p_(p,b);Wb(E)&&u(E,E.data.length),zb(E)&&!f_(E)&&a(Am(Dp(E),!1))}else{const E=p_(p,b);if(Wb(E)&&u(E,0),zb(E)&&t.isAtEnd())return a(Am(Dp(E),!1)),s;const I=p_(t.container(),t.offset()-1);zb(I)&&!f_(I)&&(d_(I)||d_(E)||!zb(E))&&a(Am(Dp(I),!1)),zb(E)&&a(Am(Dp(E),!0))}return s},Pt=(t,s,a)=>{const u=()=>(Wb(t),s===0),p=()=>Wb(t)?s>=t.data.length:s>=t.childNodes.length,b=()=>{const J=Eh(t.ownerDocument);return J.setStart(t,s),J.setEnd(t,s),J},E=()=>(a||(a=Oy(Pt(t,s))),a),I=()=>E().length>0,D=J=>J&&t===J.container()&&s===J.offset(),$=J=>p_(t,J?s-1:s);return{container:Be(t),offset:Be(s),toRange:b,getClientRects:E,isVisible:I,isAtStart:u,isAtEnd:p,isEqual:D,getNode:$}};Pt.fromRangeStart=t=>Pt(t.startContainer,t.startOffset),Pt.fromRangeEnd=t=>Pt(t.endContainer,t.endOffset),Pt.after=t=>Pt(t.parentNode,UT(t)+1),Pt.before=t=>Pt(t.parentNode,UT(t)),Pt.isAbove=(t,s)=>Vi(It(s.getClientRects()),Dt(t.getClientRects()),xv).getOr(!1),Pt.isBelow=(t,s)=>Vi(Dt(s.getClientRects()),It(t.getClientRects()),jb).getOr(!1),Pt.isAtStart=t=>t?t.isAtStart():!1,Pt.isAtEnd=t=>t?t.isAtEnd():!1,Pt.isTextPosition=t=>t?gn(t.container()):!1,Pt.isElementPosition=t=>!Pt.isTextPosition(t);const Bu=(t,s)=>{gn(s)&&s.data.length===0&&t.remove(s)},Iy=(t,s,a)=>{s.insertNode(a),Bu(t,a.previousSibling),Bu(t,a.nextSibling)},CS=(t,s,a)=>{const u=ce.from(a.firstChild),p=ce.from(a.lastChild);s.insertNode(a),u.each(b=>Bu(t,b.previousSibling)),p.each(b=>Bu(t,b.nextSibling))},m_=(t,s,a)=>{Ob(a)?CS(t,s,a):Iy(t,s,a)},_h=gn,Nl=Tb,ES=Ir.nodeIndex,Gx=t=>{const s=t.parentNode;return Nl(s)?Gx(s):s},g_=t=>t?Ld(t.childNodes,(s,a)=>(Nl(a)&&a.nodeName!=="BR"?s=s.concat(g_(a)):s.push(a),s),[]):[],qx=(t,s)=>{let a=t;for(;(a=a.previousSibling)&&_h(a);)s+=a.data.length;return s},Gb=t=>s=>t===s,WT=t=>{let s,a;s=g_(Gx(t)),a=lp(s,Gb(t),t),s=s.slice(0,a+1);const u=Ld(s,(p,b,E)=>(_h(b)&&_h(s[E-1])&&p++,p),0);return s=bf(s,Oc([t.nodeName])),a=lp(s,Gb(t),t),a-u},Tm=t=>(_h(t)?"text()":t.nodeName.toLowerCase())+"["+WT(t)+"]",GT=(t,s,a)=>{const u=[];for(let p=s.parentNode;p&&p!==t;p=p.parentNode)u.push(p);return u},Kx=(t,s)=>{let a=[],u=s.container(),p=s.offset(),b;if(_h(u))b=qx(u,p);else{const I=u.childNodes;p>=I.length?(b="after",p=I.length-1):b="before",u=I[p]}a.push(Tm(u));let E=GT(t,u);return E=bf(E,qt(Tb)),a=a.concat(Qu(E,I=>Tm(I))),a.reverse().join("/")+","+b},Pl=(t,s,a)=>{let u=g_(t);return u=bf(u,(p,b)=>!_h(p)||!_h(u[b-1])),u=bf(u,Oc([s])),u[a]},wh=(t,s)=>{let a=t,u=0;for(;_h(a);){const p=a.data.length;if(s>=u&&s<=u+p){t=a,s=s-u;break}if(!_h(a.nextSibling)){t=a,s=p;break}u+=p,a=a.nextSibling}return _h(t)&&s>t.data.length&&(s=t.data.length),Pt(t,s)},pd=(t,s)=>{if(!s)return null;const a=s.split(","),u=a[0].split("/"),p=a.length>1?a[1]:"before",b=Ld(u,(E,I)=>{const D=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(I);return D?(D[1]==="text()"&&(D[1]="#text"),Pl(E,D[1],parseInt(D[2],10))):null},t);if(!b)return null;if(!_h(b)&&b.parentNode){let E;return p==="after"?E=ES(b)+1:E=ES(b),Pt(b.parentNode,E)}return wh(b,parseInt(p,10))},v_=fi,Ry=(t,s,a)=>{let u=t(s.data.slice(0,a)).length;for(let p=s.previousSibling;p&&gn(p);p=p.previousSibling)u+=t(p.data).length;return u},Zx=(t,s,a,u,p)=>{const b=p?u.startContainer:u.endContainer;let E=p?u.startOffset:u.endOffset;const I=[],D=t.getRoot();if(gn(b))I.push(a?Ry(s,b,E):E);else{let $=0;const J=b.childNodes;E>=J.length&&J.length&&($=1,E=Math.max(0,J.length-1)),I.push(t.nodeIndex(J[E],a)+$)}for(let $=b;$&&$!==D;$=$.parentNode)I.push(t.nodeIndex($,a));return I},h4=(t,s,a,u)=>{const p=s.dom,b=Zx(p,t,a,u,!0),E=s.isForward(),I=Ay(u)?{isFakeCaret:!0}:{};if(s.isCollapsed())return{start:b,forward:E,...I};{const D=Zx(p,t,a,u,!1);return{start:b,end:D,forward:E,...I}}},qT=(t,s,a)=>{let u=0;return yn.each(t.select(s),p=>{if(p.getAttribute("data-mce-bogus")!=="all"){if(p===a)return!1;u++;return}}),u},Yx=(t,s)=>{let a=s?t.startContainer:t.endContainer,u=s?t.startOffset:t.endOffset;if(vo(a)&&a.nodeName==="TR"){const p=a.childNodes;a=p[Math.min(s?u:u-1,p.length-1)],a&&(u=s?0:a.childNodes.length,s?t.setStart(a,u):t.setEnd(a,u))}},Rs=t=>(Yx(t,!0),Yx(t,!1),t),xo=(t,s)=>{if(vo(t)&&(t=Rg(t,s),v_(t)))return t;if(Ml(t)){gn(t)&&Ig(t)&&(t=t.parentNode);let a=t.previousSibling;if(v_(a)||(a=t.nextSibling,v_(a)))return a}},_S=t=>xo(t.startContainer,t.startOffset)||xo(t.endContainer,t.endOffset),b_=(t,s,a)=>{const u=a.getNode(),p=a.getRng();if(u.nodeName==="IMG"||v_(u)){const E=u.nodeName;return{name:E,index:qT(a.dom,E,u)}}const b=_S(p);if(b){const E=b.tagName;return{name:E,index:qT(a.dom,E,b)}}return h4(t,a,s,p)},KT=t=>{const s=t.getRng();return{start:Kx(t.dom.getRoot(),Pt.fromRangeStart(s)),end:Kx(t.dom.getRoot(),Pt.fromRangeEnd(s)),forward:t.isForward()}},m4=t=>({rng:t.getRng(),forward:t.isForward()}),ZT=(t,s,a)=>{const u={"data-mce-type":"bookmark",id:s,style:"overflow:hidden;line-height:0px"};return a?t.create("span",u,"&#xFEFF;"):t.create("span",u)},mi=(t,s)=>{const a=t.dom;let u=t.getRng();const p=a.uniqueId(),b=t.isCollapsed(),E=t.getNode(),I=E.nodeName,D=t.isForward();if(I==="IMG")return{name:I,index:qT(a,I,E)};const $=Rs(u.cloneRange());if(!b){$.collapse(!1);const te=ZT(a,p+"_end",s);m_(a,$,te)}u=Rs(u),u.collapse(!0);const J=ZT(a,p+"_start",s);return m_(a,u,J),t.moveToBookmark({id:p,keep:!0,forward:D}),{id:p,forward:D}},y_=(t,s,a=!1)=>s===2?b_(Pu,a,t):s===3?KT(t):s?m4(t):mi(t,!1),wS=$e(b_,at,!0),qb=t=>t===1,Ft=t=>t===-1,S_=t=>t.type==="inline-command"||t.type==="inline-format",Jx=t=>t.type==="block-command"||t.type==="block-format",C_=(t,s)=>(t.type==="block-command"||t.type==="block-format")&&t.trigger===s,Xx=t=>{var s;const a=p=>xa.error({message:p,pattern:t}),u=(p,b,E)=>{if(t.format!==void 0){let I;if(le(t.format)){if(!ys(t.format,K))return a(p+" pattern has non-string items in the `format` array");I=t.format}else if(K(t.format))I=[t.format];else return a(p+" pattern has non-string `format` parameter");return xa.value(b(I))}else return t.cmd!==void 0?K(t.cmd)?xa.value(E(t.cmd,t.value)):a(p+" pattern has non-string `cmd` parameter"):a(p+" pattern is missing both `format` and `cmd` parameters")};if(!se(t))return a("Raw pattern is not an object");if(!K(t.start))return a("Raw pattern is missing `start` parameter");if(t.end!==void 0){if(!K(t.end))return a("Inline pattern has non-string `end` parameter");if(t.start.length===0&&t.end.length===0)return a("Inline pattern has empty `start` and `end` parameters");let p=t.start,b=t.end;return b.length===0&&(b=p,p=""),u("Inline",E=>({type:"inline-format",start:p,end:b,format:E}),(E,I)=>({type:"inline-command",start:p,end:b,cmd:E,value:I}))}else{if(t.replacement!==void 0)return K(t.replacement)?t.start.length===0?a("Replacement pattern has empty `start` parameter"):xa.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):a("Replacement pattern has non-string `replacement` parameter");{const p=(s=t.trigger)!==null&&s!==void 0?s:"space";return t.start.length===0?a("Block pattern has empty `start` parameter"):u("Block",b=>({type:"block-format",start:t.start,format:b[0],trigger:p}),(b,E)=>({type:"block-command",start:t.start,cmd:b,value:E,trigger:p}))}}},xg=t=>Oe(t,Jx),Kb=t=>Oe(t,S_),Zb=(t,s)=>({inlinePatterns:Kb(t),blockPatterns:xg(t),dynamicPatternsLookup:s}),YT=(t,s)=>({...t,blockPatterns:Oe(t.blockPatterns,a=>C_(a,s))}),Yb=t=>{const s=Gi(Ut(t,Xx));return Ue(s.errors,a=>console.error(a.message,a.pattern)),s.values},Qr=t=>s=>{const a=t(s);return Yb(a)},Ah=(t,s)=>t.dispatch("PreProcess",s),Qx=(t,s)=>t.dispatch("PostProcess",s),Dg=t=>{t.dispatch("remove")},kp=t=>{t.dispatch("detach")},g4=(t,s)=>{t.dispatch("SwitchMode",{mode:s})},v4=(t,s,a,u,p)=>{t.dispatch("ObjectResizeStart",{target:s,width:a,height:u,origin:p})},JT=(t,s,a,u,p)=>{t.dispatch("ObjectResized",{target:s,width:a,height:u,origin:p})},b4=t=>{t.dispatch("PreInit")},y4=t=>{t.dispatch("PostRender")},S4=t=>{t.dispatch("Init")},C4=(t,s)=>{t.dispatch("PlaceholderToggle",{state:s})},XT=(t,s,a)=>{t.dispatch(s,a)},Tn=(t,s,a,u)=>{t.dispatch("FormatApply",{format:s,node:a,vars:u})},eD=(t,s,a,u)=>{t.dispatch("FormatRemove",{format:s,node:a,vars:u})},Rc=(t,s)=>t.dispatch("BeforeSetContent",s),tD=(t,s)=>t.dispatch("SetContent",s),nD=(t,s)=>t.dispatch("BeforeGetContent",s),oD=(t,s)=>t.dispatch("GetContent",s),E4=(t,s)=>{t.dispatch("AutocompleterStart",s)},Qo=(t,s)=>{t.dispatch("AutocompleterUpdate",s)},QT=(t,s)=>{t.dispatch("AutocompleterUpdateActiveRange",s)},sD=t=>{t.dispatch("AutocompleterEnd")},v6=(t,s,a)=>t.dispatch("PastePreProcess",{content:s,internal:a}),_4=(t,s,a)=>t.dispatch("PastePostProcess",{node:s,internal:a}),rD=(t,s)=>t.dispatch("PastePlainTextToggle",{state:s}),b6=(t,s)=>t.dispatch("EditableRootStateChange",{state:s}),w4=(t,s)=>t.dispatch("DisabledStateChange",{state:s}),iD=t=>t.dispatch("CloseActiveTooltips"),eO=su().deviceType,ns=eO.isTouch(),tO=Ir.DOM,kg=t=>{const s=t.indexOf("=")>0?t.split(/[;,](?![^=;,]*(?:[;,]|$))/):t.split(",");return tn(s,(a,u)=>{const p=u.split("="),b=p[0],E=p.length>1?p[1]:b;return a[Lr(b)]=Lr(E),a},{})},Qd=t=>Y(t,RegExp),Qn=t=>s=>s.options.get(t),Ll=t=>K(t)||se(t),AS=(t,s="")=>a=>{const u=K(a);if(u)if(a.indexOf("=")!==-1){const p=kg(a);return{value:Ts(p,t.id).getOr(s),valid:u}}else return{value:a,valid:u};else return{valid:!1,message:"Must be a string."}},TS=t=>{const s=t.options.register;s("id",{processor:"string",default:t.id}),s("selector",{processor:"string"}),s("target",{processor:"object"}),s("suffix",{processor:"string"}),s("cache_suffix",{processor:"string"}),s("base_url",{processor:"string"}),s("referrer_policy",{processor:"string",default:""}),s("crossorigin",{processor:"function",default:Be(void 0)}),s("language_load",{processor:"boolean",default:!0}),s("inline",{processor:"boolean",default:!1}),s("iframe_attrs",{processor:"object",default:{}}),s("doctype",{processor:"string",default:"<!DOCTYPE html>"}),s("document_base_url",{processor:"string",default:t.editorManager.documentBaseURL}),s("body_id",{processor:AS(t,"tinymce"),default:"tinymce"}),s("body_class",{processor:AS(t),default:""}),s("content_security_policy",{processor:"string",default:""}),s("br_in_pre",{processor:"boolean",default:!0}),s("forced_root_block",{processor:a=>{const u=K(a)&&Ar(a);return u?{value:a,valid:u}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),s("forced_root_block_attrs",{processor:"object",default:{}}),s("newline_behavior",{processor:a=>{const u=bt(["block","linebreak","invert","default"],a);return u?{value:a,valid:u}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),s("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),s("no_newline_selector",{processor:"string",default:""}),s("keep_styles",{processor:"boolean",default:!0}),s("end_container_on_empty_block",{processor:a=>we(a)?{valid:!0,value:a}:K(a)?{valid:!0,value:a}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),s("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),s("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),s("font_size_classes",{processor:"string",default:""}),s("automatic_uploads",{processor:"boolean",default:!0}),s("images_reuse_filename",{processor:"boolean",default:!1}),s("images_replace_blob_uris",{processor:"boolean",default:!0}),s("icons",{processor:"string",default:""}),s("icons_url",{processor:"string",default:""}),s("images_upload_url",{processor:"string",default:""}),s("images_upload_base_path",{processor:"string",default:""}),s("images_upload_credentials",{processor:"boolean",default:!1}),s("images_upload_handler",{processor:"function"}),s("language",{processor:"string",default:"en"}),s("language_url",{processor:"string",default:""}),s("entity_encoding",{processor:"string",default:"named"}),s("indent",{processor:"boolean",default:!0}),s("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),s("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),s("indent_use_margin",{processor:"boolean",default:!1}),s("indentation",{processor:"string",default:"40px"}),s("content_css",{processor:a=>{const u=a===!1||K(a)||Ke(a,K);return u?K(a)?{value:Ut(a.split(","),Lr),valid:u}:le(a)?{value:a,valid:u}:a===!1?{value:[],valid:u}:{value:a,valid:u}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:A_(t)?[]:["default"]}),s("content_style",{processor:"string"}),s("content_css_cors",{processor:"boolean",default:!1}),s("font_css",{processor:a=>{const u=K(a)||Ke(a,K);return u?{value:le(a)?a:Ut(a.split(","),Lr),valid:u}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),s("extended_mathml_attributes",{processor:"string[]"}),s("extended_mathml_elements",{processor:"string[]"}),s("inline_boundaries",{processor:"boolean",default:!0}),s("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),s("object_resizing",{processor:a=>{const u=we(a)||K(a);return u?a===!1||eO.isiPhone()||eO.isiPad()?{value:"",valid:u}:{value:a===!0?"table,img,figure.image,div,video,iframe":a,valid:u}:{valid:!1,message:"Must be boolean or a string"}},default:!ns}),s("resize_img_proportional",{processor:"boolean",default:!0}),s("event_root",{processor:"string"}),s("service_message",{processor:"string"}),s("onboarding",{processor:"boolean",default:!0}),s("tiny_cloud_entry_url",{processor:"string"}),s("theme",{processor:a=>a===!1||K(a)||me(a),default:"silver"}),s("theme_url",{processor:"string"}),s("formats",{processor:"object"}),s("format_empty_lines",{processor:"boolean",default:!1}),s("format_noneditable_selector",{processor:"string",default:""}),s("preview_styles",{processor:a=>{const u=a===!1||K(a);return u?{value:a===!1?"":a,valid:u}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),s("custom_ui_selector",{processor:"string",default:""}),s("hidden_input",{processor:"boolean",default:!0}),s("submit_patch",{processor:"boolean",default:!0}),s("encoding",{processor:"string"}),s("add_form_submit_trigger",{processor:"boolean",default:!0}),s("add_unload_trigger",{processor:"boolean",default:!0}),s("custom_undo_redo_levels",{processor:"number",default:0}),s("disable_nodechange",{processor:"boolean",default:!1}),s("disabled",{processor:a=>we(a)?(t.initialized&&$S(t)!==a&&Promise.resolve().then(()=>{w4(t,a)}),{valid:!0,value:a}):{valid:!1,message:"The value must be a boolean."},default:!1}),s("readonly",{processor:"boolean",default:!1}),s("editable_root",{processor:"boolean",default:!0}),s("plugins",{processor:"string[]",default:[]}),s("external_plugins",{processor:"object"}),s("forced_plugins",{processor:"string[]"}),s("model",{processor:"string",default:t.hasPlugin("rtc")?"plugin":"dom"}),s("model_url",{processor:"string"}),s("block_unsupported_drop",{processor:"boolean",default:!0}),s("visual",{processor:"boolean",default:!0}),s("visual_table_class",{processor:"string",default:"mce-item-table"}),s("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),s("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(t.hasPlugin("help")?". Press ALT-0 for help.":"")}),s("setup",{processor:"function"}),s("init_instance_callback",{processor:"function"}),s("url_converter",{processor:"function",default:t.convertURL}),s("url_converter_scope",{processor:"object",default:t}),s("urlconverter_callback",{processor:"function"}),s("allow_conditional_comments",{processor:"boolean",default:!1}),s("allow_html_data_urls",{processor:"boolean",default:!1}),s("allow_svg_data_urls",{processor:"boolean"}),s("allow_html_in_named_anchor",{processor:"boolean",default:!1}),s("allow_html_in_comments",{processor:"boolean",default:!1}),s("allow_script_urls",{processor:"boolean",default:!1}),s("allow_unsafe_link_target",{processor:"boolean",default:!1}),s("allow_mathml_annotation_encodings",{processor:a=>{const u=Ke(a,K);return u?{value:a,valid:u}:{valid:!1,message:"Must be an array of strings."}},default:[]}),s("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),s("fix_list_elements",{processor:"boolean",default:!1}),s("preserve_cdata",{processor:"boolean",default:!1}),s("remove_trailing_brs",{processor:"boolean",default:!0}),s("pad_empty_with_br",{processor:"boolean",default:!1}),s("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),s("element_format",{processor:"string",default:"html"}),s("entities",{processor:"string"}),s("schema",{processor:"string",default:"html5"}),s("convert_urls",{processor:"boolean",default:!0}),s("relative_urls",{processor:"boolean",default:!0}),s("remove_script_host",{processor:"boolean",default:!0}),s("custom_elements",{processor:Ll}),s("extended_valid_elements",{processor:"string"}),s("invalid_elements",{processor:"string"}),s("invalid_styles",{processor:Ll}),s("valid_children",{processor:"string"}),s("valid_classes",{processor:Ll}),s("valid_elements",{processor:"string"}),s("valid_styles",{processor:Ll}),s("verify_html",{processor:"boolean",default:!0}),s("auto_focus",{processor:a=>K(a)||a===!0}),s("browser_spellcheck",{processor:"boolean",default:!1}),s("protect",{processor:"array"}),s("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),s("deprecation_warnings",{processor:"boolean",default:!0}),s("a11y_advanced_options",{processor:"boolean",default:!1}),s("api_key",{processor:"string"}),s("license_key",{processor:"string"}),s("paste_block_drop",{processor:"boolean",default:!1}),s("paste_data_images",{processor:"boolean",default:!0}),s("paste_preprocess",{processor:"function"}),s("paste_postprocess",{processor:"function"}),s("paste_webkit_styles",{processor:"string",default:"none"}),s("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),s("paste_merge_formats",{processor:"boolean",default:!0}),s("smart_paste",{processor:"boolean",default:!0}),s("paste_as_text",{processor:"boolean",default:!1}),s("paste_tab_spaces",{processor:"number",default:4}),s("text_patterns",{processor:a=>Ke(a,se)||a===!1?{value:Yb(a===!1?[]:a),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),s("text_patterns_lookup",{processor:a=>me(a)?{value:Qr(a),valid:!0}:{valid:!1,message:"Must be a single function"},default:a=>[]}),s("noneditable_class",{processor:"string",default:"mceNonEditable"}),s("editable_class",{processor:"string",default:"mceEditable"}),s("noneditable_regexp",{processor:a=>Ke(a,Qd)?{value:a,valid:!0}:Qd(a)?{value:[a],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),s("table_tab_navigation",{processor:"boolean",default:!0}),s("highlight_on_focus",{processor:"boolean",default:!0}),s("xss_sanitization",{processor:"boolean",default:!0}),s("details_initial_state",{processor:a=>{const u=bt(["inherited","collapsed","expanded"],a);return u?{value:a,valid:u}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),s("details_serialized_state",{processor:a=>{const u=bt(["inherited","collapsed","expanded"],a);return u?{value:a,valid:u}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),s("init_content_sync",{processor:"boolean",default:!1}),s("newdocument_content",{processor:"string",default:""}),s("sandbox_iframes",{processor:"boolean",default:!0}),s("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),s("convert_unsafe_embeds",{processor:"boolean",default:!0}),s("user_id",{processor:"string",default:"Anonymous"}),s("fetch_users",{processor:a=>a===void 0?{valid:!0,value:void 0}:me(a)?{valid:!0,value:a}:{valid:!1,message:"fetch_users must be a function that returns a Promise<ExpectedUser[]>"}}),t.on("ScriptsLoaded",()=>{s("directionality",{processor:"string",default:Rp.isRtl()?"rtl":void 0}),s("placeholder",{processor:"string",default:tO.getAttrib(t.getElement(),"placeholder")})}),s("lists_indent_on_tab",{processor:"boolean",default:!0}),s("list_max_depth",{processor:a=>{const u=Ye(a);if(u){if(a<0)throw new Error("list_max_depth cannot be set to lower than 0");return{value:a,valid:u}}else return{valid:!1,message:"Must be a number"}}})},E_=Qn("iframe_attrs"),xy=Qn("doctype"),OS=Qn("document_base_url"),Mg=Qn("body_id"),hl=Qn("body_class"),Om=Qn("content_security_policy"),A4=Qn("br_in_pre"),Qc=Qn("forced_root_block"),Dy=Qn("forced_root_block_attrs"),T4=Qn("newline_behavior"),js=Qn("br_newline_selector"),Th=Qn("no_newline_selector"),Jb=Qn("keep_styles"),y6=Qn("end_container_on_empty_block"),Xb=Qn("automatic_uploads"),Ws=Qn("images_reuse_filename"),S6=Qn("images_replace_blob_uris"),aD=Qn("icons"),C6=Qn("icons_url"),E6=Qn("images_upload_url"),IS=Qn("images_upload_base_path"),O4=Qn("images_upload_credentials"),_6=Qn("images_upload_handler"),__=Qn("content_css_cors"),nO=Qn("referrer_policy"),RS=Qn("crossorigin"),cD=Qn("language"),I4=Qn("language_url"),xS=Qn("indent_use_margin"),oO=Qn("indentation"),sO=Qn("content_css"),lD=Qn("content_style"),uD=Qn("font_css"),dD=Qn("directionality"),rO=Qn("inline_boundaries_selector"),iO=Qn("object_resizing"),ir=Qn("resize_img_proportional"),fD=Qn("placeholder"),w_=Qn("event_root"),aO=Qn("service_message"),Df=Qn("theme"),pD=Qn("theme_url"),cO=Qn("model"),R4=Qn("model_url"),Im=Qn("inline_boundaries"),x4=Qn("formats"),DS=Qn("preview_styles"),kS=Qn("format_empty_lines"),D4=Qn("format_noneditable_selector"),Mv=Qn("custom_ui_selector"),A_=Qn("inline"),hD=Qn("hidden_input"),k4=Qn("submit_patch"),mD=Qn("add_form_submit_trigger"),w6=Qn("add_unload_trigger"),gD=Qn("custom_undo_redo_levels"),vD=Qn("disable_nodechange"),MS=Qn("readonly"),NS=Qn("editable_root"),PS=Qn("content_css_cors"),Qb=Qn("plugins"),T_=Qn("external_plugins"),LS=Qn("block_unsupported_drop"),Ng=Qn("visual"),BS=Qn("visual_table_class"),lO=Qn("visual_anchor_class"),O_=Qn("iframe_aria_text"),bD=Qn("setup"),yD=Qn("init_instance_callback"),SD=Qn("urlconverter_callback"),M4=Qn("auto_focus"),I_=Qn("browser_spellcheck"),ky=Qn("protect"),e0=Qn("paste_block_drop"),t0=Qn("paste_data_images"),CD=Qn("paste_preprocess"),ED=Qn("paste_postprocess"),_D=Qn("newdocument_content"),R_=Qn("paste_webkit_styles"),wD=Qn("paste_remove_styles_if_webkit"),N4=Qn("paste_merge_formats"),AD=Qn("smart_paste"),x_=Qn("paste_as_text"),uO=Qn("paste_tab_spaces"),D_=Qn("allow_html_data_urls"),dO=Qn("text_patterns"),P4=Qn("text_patterns_lookup"),fO=Qn("noneditable_class"),TD=Qn("editable_class"),OD=Qn("noneditable_regexp"),VS=Qn("preserve_cdata"),L4=Qn("highlight_on_focus"),pO=Qn("xss_sanitization"),hO=Qn("init_content_sync"),B4=t=>t.options.isSet("text_patterns_lookup"),V4=t=>yn.explode(t.options.get("font_size_style_values")),n0=t=>yn.explode(t.options.get("font_size_classes")),ID=t=>t.options.get("encoding")==="xml",RD=t=>yn.explode(t.options.get("images_file_types")),H4=Qn("table_tab_navigation"),F4=Qn("details_initial_state"),$4=Qn("details_serialized_state"),k_=Qn("sandbox_iframes"),HS=t=>t.options.get("sandbox_iframes_exclusions"),mO=Qn("convert_unsafe_embeds"),FS=Qn("license_key"),xD=Qn("api_key"),$S=Qn("disabled"),U4=Qn("user_id"),M_=Qn("fetch_users"),j4=Qn("lists_indent_on_tab"),DD=t=>ce.from(t.options.get("list_max_depth")),A6=vo,z4=gn,o0=t=>{const s=t.parentNode;s&&s.removeChild(t)},N_=t=>{const s=Pu(t);return{count:t.length-s.length,text:s}},P_=t=>{let s;for(;(s=t.data.lastIndexOf(Va))!==-1;)t.deleteData(s,1)},kD=(t,s)=>(Rm(t),s),W4=(t,s)=>{const a=N_(t.data.substr(0,s.offset())),u=N_(t.data.substr(s.offset()));return(a.text+u.text).length>0?(P_(t),Pt(t,s.offset()-a.count)):s},L_=(t,s)=>{const a=s.container(),u=Wn(Nn(a.childNodes),t).map(p=>p<s.offset()?Pt(a,s.offset()-1):s).getOr(s);return Rm(t),u},MD=(t,s)=>z4(t)&&s.container()===t?W4(t,s):kD(t,s),ND=(t,s)=>s.container()===t.parentNode?L_(t,s):kD(t,s),B_=(t,s)=>Pt.isTextPosition(s)?MD(t,s):ND(t,s),Rm=t=>{A6(t)&&Ml(t)&&(hS(t)?t.removeAttribute("data-mce-caret"):o0(t)),z4(t)&&(P_(t),t.data.length===0&&o0(t))},PD=fi,G4=Ep,q4=vm,K4="*[contentEditable=false],video,audio,embed,object",My=(t,s,a)=>{const u=i_(s.getBoundingClientRect(),a);let p,b;if(t.tagName==="BODY"){const I=t.ownerDocument.documentElement;p=t.scrollLeft||I.scrollLeft,b=t.scrollTop||I.scrollTop}else{const I=t.getBoundingClientRect();p=t.scrollLeft-I.left,b=t.scrollTop-I.top}u.left+=p,u.right+=p,u.top+=b,u.bottom+=b,u.width=1;let E=s.offsetWidth-s.clientWidth;return E>0&&(a&&(E*=-1),u.left+=E,u.right+=E),u},LD=t=>{var s,a;const u=Ht(Me.fromDom(t),K4);for(let p=0;p<u.length;p++){const b=u[p].dom;let E=b.previousSibling;if(Rv(E)){const I=E.data;I.length===1?(s=E.parentNode)===null||s===void 0||s.removeChild(E):E.deleteData(I.length-1,1)}E=b.nextSibling,wm(E)&&(E.data.length===1?(a=E.parentNode)===null||a===void 0||a.removeChild(E):E.deleteData(0,1))}},gO=(t,s,a,u)=>{const p=yc();let b,E;const I=Qc(t),D=t.dom,$=(Ae,_e)=>{let Qe;if(J(),q4(_e))return null;if(a(_e)){const et=Bx(I,_e,Ae),ut=My(s,_e,Ae);D.setStyle(et,"top",ut.top),D.setStyle(et,"caret-color","transparent"),E=et;const _t=D.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});D.setStyles(_t,{...ut}),D.add(s,_t),p.set({caret:_t,element:_e,before:Ae}),Ae&&D.addClass(_t,"mce-visual-caret-before"),te(),Qe=_e.ownerDocument.createRange(),Qe.setStart(et,0),Qe.setEnd(et,0)}else return E=s_(_e,Ae),Qe=_e.ownerDocument.createRange(),Oh(E.nextSibling)?(Qe.setStart(E,0),Qe.setEnd(E,0)):(Qe.setStart(E,1),Qe.setEnd(E,1)),Qe;return Qe},J=()=>{LD(s),E&&(Rm(E),E=null),p.on(Ae=>{D.remove(Ae.caret),p.clear()}),b&&(clearInterval(b),b=void 0)},te=()=>{b=window.setInterval(()=>{p.on(Ae=>{u()?D.toggleClass(Ae.caret,"mce-visual-caret-hidden"):D.addClass(Ae.caret,"mce-visual-caret-hidden")})},500)},re=()=>{p.on(Ae=>{const _e=My(s,Ae.element,Ae.before);D.setStyles(Ae.caret,{..._e})})},fe=()=>clearInterval(b),Re=()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}";return{isShowing:p.isSet,show:$,hide:J,getCss:Re,reposition:re,destroy:fe}},V_=()=>$s.browser.isFirefox(),Oh=t=>PD(t)||G4(t),US=t=>(Oh(t)||gm(t)&&V_())&&Du(Me.fromDom(t)).exists(Gd),xm=lu,vO=fi,BD=Ep,VD=my("display","block table table-cell table-row table-caption list-item"),Z4=Ml,HD=Ig,Y4=vo,J4=gn,X4=hi,Ny=(t,s)=>{let a;for(;a=t(s);)if(!HD(a))return a;return null},jS=(t,s,a,u,p)=>{const b=new Kr(t,u),E=vO(t)||HD(t);let I;if(Ft(s)){if(E&&(I=Ny(b.prev.bind(b),!0),a(I)))return I;for(;I=Ny(b.prev.bind(b),p);)if(a(I))return I}if(qb(s)){if(E&&(I=Ny(b.next.bind(b),!0),a(I)))return I;for(;I=Ny(b.next.bind(b),p);)if(a(I))return I}return null},FD=(t,s)=>{const a=p=>xm(p.dom),u=p=>p.dom===s;return yp(Me.fromDom(t),a,u).map(p=>p.dom).getOr(s)},Dm=(t,s)=>{for(;t&&t!==s;){if(VD(t))return t;t=t.parentNode}return null},km=(t,s,a)=>Dm(t.container(),a)===Dm(s.container(),a),bO=(t,s)=>{if(!s)return ce.none();const a=s.container(),u=s.offset();return Y4(a)?ce.from(a.childNodes[u+t]):ce.none()},H_=(t,s)=>{var a;const p=((a=s.ownerDocument)!==null&&a!==void 0?a:document).createRange();return t?(p.setStartBefore(s),p.setEndBefore(s)):(p.setStartAfter(s),p.setEndAfter(s)),p},$D=(t,s,a)=>Dm(s,t)===Dm(a,t),wo=(t,s,a)=>{const u=t?"previousSibling":"nextSibling";let p=a;for(;p&&p!==s;){let b=p[u];if(b&&Z4(b)&&(b=b[u]),vO(b)||BD(b)){if($D(s,b,p))return b;break}if(X4(b))break;p=p.parentNode}return null},Nv=$e(H_,!0),Py=$e(H_,!1),yO=(t,s,a)=>{let u;const p=$e(wo,!0,s),b=$e(wo,!1,s),E=a.startContainer,I=a.startOffset;if(Ig(E)){const D=J4(E)?E.parentNode:E,$=D.getAttribute("data-mce-caret");if($==="before"&&(u=D.nextSibling,US(u)))return Nv(u);if($==="after"&&(u=D.previousSibling,US(u)))return Py(u)}if(!a.collapsed)return a;if(gn(E)){if(Z4(E)){if(t===1){if(u=b(E),u)return Nv(u);if(u=p(E),u)return Py(u)}if(t===-1){if(u=p(E),u)return Py(u);if(u=b(E),u)return Nv(u)}return a}if(Rv(E)&&I>=E.data.length-1)return t===1&&(u=b(E),u)?Nv(u):a;if(wm(E)&&I<=1)return t===-1&&(u=p(E),u)?Py(u):a;if(I===E.data.length)return u=b(E),u?Nv(u):a;if(I===0)return u=p(E),u?Py(u):a}return a},F_=(t,s)=>bO(t?0:-1,s).filter(vO),Pg=(t,s,a)=>{const u=yO(t,s,a);return t===-1?Pt.fromRangeStart(u):Pt.fromRangeEnd(u)},Ly=t=>ce.from(t.getNode()).map(Me.fromDom),zS=t=>ce.from(t.getNode(!0)).map(Me.fromDom),Pv=(t,s)=>{let a=s;for(;a=t(a);)if(a.isVisible())return a;return a},By=(t,s)=>{const a=km(t,s);return!a&&Ri(t.getNode())?!0:a},SO=fi,Ih=gn,CO=vo,$_=Ri,Rh=hi,Mm=c_,Lv=l_,s0=(t,s)=>{const a=[];let u=t;for(;u&&u!==s;)a.push(u),u=u.parentNode;return a},Nm=(t,s)=>t.hasChildNodes()&&s<t.childNodes.length?t.childNodes[s]:null,EO=(t,s)=>{if(qb(t)){if(Rh(s.previousSibling)&&!Ih(s.previousSibling))return Pt.before(s);if(Ih(s))return Pt(s,0)}if(Ft(t)){if(Rh(s.nextSibling)&&!Ih(s.nextSibling))return Pt.after(s);if(Ih(s))return Pt(s,s.data.length)}return Ft(t)?$_(s)?Pt.before(s):Pt.after(s):Pt.before(s)},WS=(t,s)=>{const a=s.nextSibling;return a&&Rh(a)?Ih(a)?Pt(a,0):Pt.before(a):xh(1,Pt.after(s),t)},xh=(t,s,a)=>{let u,p,b,E;if(!CO(a)||!s)return null;if(s.isEqual(Pt.after(a))&&a.lastChild){if(E=Pt.after(a.lastChild),Ft(t)&&Rh(a.lastChild)&&CO(a.lastChild))return $_(a.lastChild)?Pt.before(a.lastChild):E}else E=s;const I=E.container();let D=E.offset();if(Ih(I)){if(Ft(t)&&D>0)return Pt(I,--D);if(qb(t)&&D<I.length)return Pt(I,++D);u=I}else{if(Ft(t)&&D>0&&(p=Nm(I,D-1),Rh(p)))return!Mm(p)&&(b=jS(p,t,Lv,p),b)?Ih(b)?Pt(b,b.data.length):Pt.after(b):Ih(p)?Pt(p,p.data.length):Pt.before(p);if(qb(t)&&D<I.childNodes.length&&(p=Nm(I,D),Rh(p)))return $_(p)?WS(a,p):!Mm(p)&&(b=jS(p,t,Lv,p),b)?Ih(b)?Pt(b,0):Pt.before(b):Ih(p)?Pt(p,0):Pt.after(p);u=p||E.getNode()}if(u&&(qb(t)&&E.isAtEnd()||Ft(t)&&E.isAtStart())&&(u=jS(u,t,Jt,a,!0),Lv(u,a)))return EO(t,u);p=u&&jS(u,t,Lv,a);const $=ve(Oe(s0(I,a),SO));return $&&(!p||!$.contains(p))?(qb(t)?E=Pt.after($):E=Pt.before($),E):p?EO(t,p):null},Dh=t=>({next:s=>xh(1,s,t),prev:s=>xh(-1,s,t)}),UD=(t,s,a)=>{const u=t?Pt.before(a):Pt.after(a);return Bl(t,s,u)},_O=t=>Ri(t)?Pt.before(t):Pt.after(t),wO=t=>Pt.isTextPosition(t)?t.offset()===0:hi(t.getNode()),AO=t=>{if(Pt.isTextPosition(t)){const s=t.container();return t.offset()===s.data.length}else return hi(t.getNode(!0))},jD=(t,s)=>!Pt.isTextPosition(t)&&!Pt.isTextPosition(s)&&t.getNode()===s.getNode(!0),T6=t=>!Pt.isTextPosition(t)&&Ri(t.getNode()),Q4=(t,s,a)=>t?!jD(s,a)&&!T6(s)&&AO(s)&&wO(a):!jD(a,s)&&wO(s)&&AO(a),Bl=(t,s,a)=>{const u=Dh(s);return ce.from(t?u.next(a):u.prev(a))},r0=(t,s,a)=>Bl(t,s,a).bind(u=>km(a,u,s)&&Q4(t,a,u)?Bl(t,s,u):ce.some(u)),TO=(t,s,a,u)=>r0(t,s,a).bind(p=>u(p)?TO(t,s,p,u):ce.some(p)),Bv=(t,s)=>{const a=t?s.firstChild:s.lastChild;return gn(a)?ce.some(Pt(a,t?0:a.data.length)):a?hi(a)?ce.some(t?Pt.before(a):_O(a)):UD(t,s,a):ce.none()},Vl=$e(Bl,!0),gu=$e(Bl,!1),Hl=$e(Bv,!0),Mp=$e(Bv,!1),Lg="_mce_caret",Vu=t=>vo(t)&&t.id===Lg,Pm=(t,s)=>{let a=s;for(;a&&a!==t;){if(Vu(a))return a;a=a.parentNode}return null},zD=t=>K(t.start),O6=t=>ho(t,"rng"),WD=t=>ho(t,"id"),os=t=>ho(t,"name"),U_=t=>yn.isArray(t.start),kf=t=>!os(t)&&we(t.forward)?t.forward:!0,GD=(t,s)=>(vo(s)&&t.isBlock(s)&&!s.innerHTML&&(s.innerHTML='<br data-mce-bogus="1" />'),s),e3=(t,s)=>{const a=ce.from(pd(t.getRoot(),s.start)),u=ce.from(pd(t.getRoot(),s.end));return Vi(a,u,(p,b)=>{const E=t.createRng();return E.setStart(p.container(),p.offset()),E.setEnd(b.container(),b.offset()),{range:E,forward:kf(s)}})},t3=(t,s)=>{var a;const p=((a=t.ownerDocument)!==null&&a!==void 0?a:document).createTextNode(Va);t.appendChild(p),s.setStart(p,0),s.setEnd(p,0)},n3=t=>!t.hasChildNodes(),qD=(t,s)=>Mp(t).fold(Et,a=>(s.setStart(a.container(),a.offset()),s.setEnd(a.container(),a.offset()),!0)),OO=(t,s,a)=>n3(s)&&Pm(t,s)?(t3(s,a),!0):!1,GS=(t,s,a,u)=>{const p=a[s?"start":"end"],b=t.getRoot();if(p){let E=b,I=p[0];for(let D=p.length-1;E&&D>=1;D--){const $=E.childNodes;if(OO(b,E,u))return!0;if(p[D]>$.length-1)return OO(b,E,u)?!0:qD(E,u);E=$[p[D]]}gn(E)&&(I=Math.min(p[0],E.data.length)),vo(E)&&(I=Math.min(p[0],E.childNodes.length)),s?u.setStart(E,I):u.setEnd(E,I)}return!0},Mf=t=>gn(t)&&t.data.length>0,i0=(t,s,a)=>{const u=t.get(a.id+"_"+s),p=u==null?void 0:u.parentNode,b=a.keep;if(u&&p){let E,I;if(s==="start"?b?u.hasChildNodes()?(E=u.firstChild,I=1):Mf(u.nextSibling)?(E=u.nextSibling,I=0):Mf(u.previousSibling)?(E=u.previousSibling,I=u.previousSibling.data.length):(E=p,I=t.nodeIndex(u)+1):(E=p,I=t.nodeIndex(u)):b?u.hasChildNodes()?(E=u.firstChild,I=1):Mf(u.previousSibling)?(E=u.previousSibling,I=u.previousSibling.data.length):(E=p,I=t.nodeIndex(u)):(E=p,I=t.nodeIndex(u)),!b){const D=u.previousSibling,$=u.nextSibling;yn.each(yn.grep(u.childNodes),te=>{gn(te)&&(te.data=te.data.replace(/\uFEFF/g,""))});let J;for(;J=t.get(a.id+"_"+s);)t.remove(J,!0);if(gn($)&&gn(D)&&!$s.browser.isOpera()){const te=D.data.length;D.appendData($.data),t.remove($),E=D,I=te}}return ce.some(Pt(E,I))}else return ce.none()},o3=(t,s)=>{const a=t.createRng();return GS(t,!0,s,a)&&GS(t,!1,s,a)?ce.some({range:a,forward:kf(s)}):ce.none()},j_=(t,s)=>{const a=i0(t,"start",s),u=i0(t,"end",s);return Vi(a,u.or(a),(p,b)=>{const E=t.createRng();return E.setStart(GD(t,p.container()),p.offset()),E.setEnd(GD(t,b.container()),b.offset()),{range:E,forward:kf(s)}})},s3=(t,s)=>ce.from(t.select(s.name)[s.index]).map(a=>{const u=t.createRng();return u.selectNode(a),{range:u,forward:!0}}),z_=(t,s)=>{const a=t.dom;if(s){if(U_(s))return o3(a,s);if(zD(s))return e3(a,s);if(WD(s))return j_(a,s);if(os(s))return s3(a,s);if(O6(s))return ce.some({range:s.rng,forward:kf(s)})}return ce.none()},xc=(t,s,a)=>y_(t,s,a),r3=(t,s)=>{z_(t,s).each(({range:a,forward:u})=>{t.setRng(a,u)})},hd=t=>vo(t)&&t.tagName==="SPAN"&&t.getAttribute("data-mce-type")==="bookmark",W_=(t=>s=>t===s)(ci),a0=t=>t!==""&&` \f
\r	\v`.indexOf(t)!==-1,IO=t=>!a0(t)&&!W_(t)&&!Cc(t),RO=t=>{const s=[];if(t)for(let a=0;a<t.rangeCount;a++)s.push(t.getRangeAt(a));return s},xO=t=>Jn(t,s=>{const a=Dv(s);return a?[Me.fromDom(a)]:[]}),i3=t=>RO(t).length>1,G_=t=>Oe(xO(t),dd),KD=t=>Ht(t,"td[data-mce-selected],th[data-mce-selected]"),q_=(t,s)=>{const a=KD(s);return a.length>0?a:G_(t)},Vv=t=>q_(RO(t.selection.getSel()),Me.fromDom(t.getBody())),Vy=(t,s)=>na(t,"table",s),DO=t=>{const s=t.startContainer,a=t.startOffset;return gn(s)?a===0?ce.some(Me.fromDom(s)):ce.none():ce.from(s.childNodes[a]).map(Me.fromDom)},ZD=t=>{const s=t.endContainer,a=t.endOffset;return gn(s)?a===s.data.length?ce.some(Me.fromDom(s)):ce.none():ce.from(s.childNodes[a-1]).map(Me.fromDom)},Bg=t=>za(t).fold(Be([t]),s=>[t].concat(Bg(s))),K_=t=>ea(t).fold(Be([t]),s=>Xo(s)==="br"?nd(s).map(a=>[t].concat(K_(a))).getOr([]):[t].concat(K_(s))),kO=(t,s)=>Vi(DO(s),ZD(s),(a,u)=>{const p=gt(Bg(t),$e(eo,a)),b=gt(K_(t),$e(eo,u));return p.isSome()&&b.isSome()}).getOr(!1),Z_=(t,s,a,u)=>{const p=a,b=new Kr(a,p),E=Yi(t.schema.getMoveCaretBeforeOnEnterElements(),(D,$)=>!bt(["td","th","table"],$.toLowerCase()));let I=a;do{if(gn(I)&&yn.trim(I.data).length!==0){u?s.setStart(I,0):s.setEnd(I,I.data.length);return}if(E[I.nodeName]){u?s.setStartBefore(I):I.nodeName==="BR"?s.setEndBefore(I):s.setEndAfter(I);return}}while(I=u?b.next():b.prev());p.nodeName==="BODY"&&(u?s.setStart(p,0):s.setEnd(p,p.childNodes.length))},qS=t=>{const s=t.selection.getSel();return be(s)&&s.rangeCount>0},MO=(t,s)=>{const a=Vv(t);a.length>0?Ue(a,u=>{const p=u.dom,b=t.dom.createRng();b.setStartBefore(p),b.setEndAfter(p),s(b,!0)}):s(t.selection.getRng(),!1)},KS=(t,s,a)=>{const u=mi(t,s);a(u),t.moveToBookmark(u)},NO=(t,s)=>t.startContainer===t.endContainer&&t.endOffset-t.startOffset===1&&s(t.startContainer.childNodes[t.startOffset]),a3=t=>NO(t,di),c3=t=>NO(t,gn),PO=t=>NO(t,Cp),ZS=t=>Ye(t==null?void 0:t.nodeType),LO=t=>vo(t)&&!hd(t)&&!Vu(t)&&!Tb(t),YD=(t,s)=>{if(LO(s)&&!/^(TD|TH)$/.test(s.nodeName)){const a=t.getAttrib(s,"data-mce-selected"),u=parseInt(a,10);return!isNaN(u)&&u>0}else return!1},Y_=(t,s,a)=>{const{selection:u,dom:p}=t,b=u.getNode(),E=fi(b);KS(u,!0,()=>{s()}),E&&fi(b)&&p.isChildOf(b,t.getBody())?t.selection.select(b):a(u.getStart())&&l3(p,u)},l3=(t,s)=>{var a,u;const p=s.getRng(),{startContainer:b,startOffset:E}=p,I=s.getNode();if(!YD(t,I)&&vo(b)){const D=b.childNodes,$=t.getRoot();let J;if(E<D.length){const te=D[E];J=new Kr(te,(a=t.getParent(te,t.isBlock))!==null&&a!==void 0?a:$)}else{const te=D[D.length-1];J=new Kr(te,(u=t.getParent(te,t.isBlock))!==null&&u!==void 0?u:$),J.next(!0)}for(let te=J.current();te;te=J.next()){if(t.getContentEditable(te)==="false")return;if(gn(te)&&!VO(te)){p.setStart(te,0),s.setRng(p);return}}}},JD=(t,s,a)=>{if(t){const u=s?"nextSibling":"previousSibling";for(t=t[u];t;t=t[u])if(vo(t)||!VO(t))return t}},BO=(t,s)=>!!t.getTextBlockElements()[s.nodeName.toLowerCase()]||sn(t,s),Hy=(t,s,a)=>t.schema.isValidChild(s,a),VO=(t,s=!1)=>{if(be(t)&&gn(t)){const a=s?t.data.replace(/ /g,""):t.data;return yg(a)}else return!1},gi=t=>be(t)&&gn(t)&&t.length===0,XD=(t,s)=>{const a="[data-mce-cef-wrappable]",u=D4(t),p=ec(u)?a:`${a},${u}`;return Ls(Me.fromDom(s),p)},QD=(t,s)=>{const a=t.dom;return LO(s)&&a.getContentEditable(s)==="false"&&XD(t,s)&&a.select('[contenteditable="true"]',s).length===0},g=(t,s)=>me(t)?t(s):(be(s)&&(t=t.replace(/%(\w+)/g,(a,u)=>s[u]||a)),t),C=(t,s)=>(t=t||"",s=s||"",t=""+(t.nodeName||t),s=""+(s.nodeName||s),t.toLowerCase()===s.toLowerCase()),O=(t,s)=>{if(De(t))return null;{let a=String(t);return(s==="color"||s==="backgroundColor")&&(a=Vb(a)),s==="fontWeight"&&t===700&&(a="bold"),s==="fontFamily"&&(a=a.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),a}},P=(t,s,a)=>{const u=t.getStyle(s,a);return O(u,a)},G=(t,s)=>{let a;return t.getParent(s,u=>vo(u)?(a=t.getStyle(u,"text-decoration"),!!a&&a!=="none"):!1),a},ee=(t,s,a)=>t.getParents(s,a,t.getRoot()),ue=(t,s,a)=>{const u=t.formatter.get(s);return be(u)&&Kt(u,a)},ye=(t,s)=>ue(t,s,u=>{const p=b=>me(b)||b.length>1&&b.charAt(0)==="%";return Kt(["styles","attributes"],b=>Ts(u,b).exists(E=>{const I=le(E)?E:Yr(E);return Kt(I,p)}))}),xe=(t,s,a)=>{const u=["inline","block","selector","attributes","styles","classes"],p=b=>Yi(b,(E,I)=>Kt(u,D=>D===I));return ue(t,s,b=>{const E=p(b);return ue(t,a,I=>{const D=p(I);return Xa(E,D)})})},Ge=t=>Os(t,"block"),vt=t=>Ge(t)&&t.wrapper===!0,ln=t=>Ge(t)&&t.wrapper!==!0,Fn=t=>Os(t,"selector"),On=t=>Os(t,"inline"),Oo=t=>Fn(t)&&On(t)&&gr(Ts(t,"mixed"),!0),zt=t=>Fn(t)&&t.expand!==!1&&!On(t),un=t=>{const s=[];let a=t;for(;a;){if(gn(a)&&a.data!==Va||a.childNodes.length>1)return[];vo(a)&&s.push(a),a=a.firstChild}return s},Bo=t=>un(t).length>0,ls=t=>Vu(t.dom)&&Bo(t.dom),no=hd,Sr=ee,Cr=VO,ms=BO,_a=t=>Ri(t)&&t.getAttribute("data-mce-bogus")&&!t.nextSibling,ef=(t,s)=>{let a=s;for(;a;){if(vo(a)&&t.getContentEditable(a))return t.getContentEditable(a)==="false"?a:s;a=a.parentNode}return s},Lm=(t,s,a,u)=>{const p=s.data;if(t){for(let b=a;b>0;b--)if(u(p.charAt(b-1)))return b}else for(let b=a;b<p.length;b++)if(u(p.charAt(b)))return b;return-1},Hv=(t,s,a)=>Lm(t,s,a,u=>W_(u)||a0(u)),c0=(t,s,a)=>Lm(t,s,a,IO),Mr=(t,s,a,u,p,b)=>{let E;const I=t.getParent(a,te=>ME(te)||t.isBlock(te)),D=be(I)?I:s,$=(te,re,fe)=>{const Re=Ch(t),Ae=p?Re.backwards:Re.forwards;return ce.from(Ae(te,re,(_e,Qe)=>no(_e.parentNode)?-1:(E=_e,fe(p,_e,Qe)),D))};return $(a,u,Hv).bind(te=>b?$(te.container,te.offset+(p?-1:0),c0):ce.some(te)).orThunk(()=>E?ce.some({container:E,offset:p?0:E.length}):ce.none())},Fl=(t,s,a,u,p)=>{const b=u[p];gn(u)&&ec(u.data)&&b&&(u=b);const E=Sr(t,u);for(let I=0;I<E.length;I++)for(let D=0;D<s.length;D++){const $=s[D];if(!(be($.collapsed)&&$.collapsed!==a.collapsed)&&Fn($)&&t.is(E[I],$.selector))return E[I]}return u},$l=(t,s,a,u)=>{var p;let b=a;const E=t.getRoot(),I=s[0];if(Ge(I)&&(b=I.wrapper?null:t.getParent(a,I.block,E)),!b){const D=(p=t.getParent(a,"LI,TD,TH,SUMMARY"))!==null&&p!==void 0?p:E;b=t.getParent(gn(a)?a.parentNode:a,$=>$!==E&&ms(t.schema,$),D)}if(b&&Ge(I)&&I.wrapper&&(b=Sr(t,b,"ul,ol").reverse()[0]||b),!b)for(b=a;b&&b[u]&&!t.isBlock(b[u])&&(b=b[u],!C(b,"br")););return b||a},Nf=(t,s,a,u)=>{const p=a.parentNode;return be(a[u])?!1:p===s||De(p)||t.isBlock(p)?!0:Nf(t,s,p,u)},Ul=(t,s,a,u,p,b)=>{let E=a;const I=p?"previousSibling":"nextSibling",D=t.getRoot();if(gn(a)&&!Cr(a)&&(p?u>0:u<a.data.length))return a;for(;E;){if(ME(E))return a;if(!s[0].block_expand&&t.isBlock(E))return b?E:a;for(let $=E[I];$;$=$[I]){const J=gn($)&&!Nf(t,D,$,I);if(!no($)&&!_a($)&&!Cr($,J))return E}if(E===D||E.parentNode===D){a=E;break}E=E.parentNode}return a},Vg=t=>no(t.parentNode)||no(t),Fa=(t,s,a,u={})=>{const{includeTrailingSpace:p=!1,expandToBlock:b=!0}=u,E=t.getParent(s.commonAncestorContainer,fe=>ME(fe)),I=be(E)?E:t.getRoot();let{startContainer:D,startOffset:$,endContainer:J,endOffset:te}=s;const re=a[0];return vo(D)&&D.hasChildNodes()&&(D=Rg(D,$),gn(D)&&($=0)),vo(J)&&J.hasChildNodes()&&(J=Rg(J,s.collapsed?te:te-1),gn(J)&&(te=J.data.length)),D=ef(t,D),J=ef(t,J),Vg(D)&&(D=no(D)?D:D.parentNode,s.collapsed?D=D.previousSibling||D:D=D.nextSibling||D,gn(D)&&($=s.collapsed?D.length:0)),Vg(J)&&(J=no(J)?J:J.parentNode,s.collapsed?J=J.nextSibling||J:J=J.previousSibling||J,gn(J)&&(te=s.collapsed?0:J.length)),s.collapsed&&(Mr(t,I,D,$,!0,p).each(({container:Ae,offset:_e})=>{D=Ae,$=_e}),Mr(t,I,J,te,!1,p).each(({container:Ae,offset:_e})=>{J=Ae,te=_e})),(On(re)||re.block_expand)&&((!On(re)||!gn(D)||$===0)&&(D=Ul(t,a,D,$,!0,b)),(!On(re)||!gn(J)||te===J.data.length)&&(J=Ul(t,a,J,te,!1,b))),zt(re)&&(D=Fl(t,a,s,D,"previousSibling"),J=Fl(t,a,s,J,"nextSibling")),(Ge(re)||Fn(re))&&(D=$l(t,a,D,"previousSibling"),J=$l(t,a,J,"nextSibling"),Ge(re)&&(t.isBlock(D)||(D=Ul(t,a,D,$,!0,b),gn(D)&&($=0)),t.isBlock(J)||(J=Ul(t,a,J,te,!1,b),gn(J)&&(te=J.data.length)))),vo(D)&&D.parentNode&&($=t.nodeIndex(D),D=D.parentNode),vo(J)&&J.parentNode&&(te=t.nodeIndex(J)+1,J=J.parentNode),{startContainer:D,startOffset:$,endContainer:J,endOffset:te}},Fy=(t,s,a)=>{var u;const p=s.startOffset,b=Rg(s.startContainer,p),E=s.endOffset,I=Rg(s.endContainer,E-1),D=_e=>{const Qe=_e[0];gn(Qe)&&Qe===b&&p>=Qe.data.length&&_e.splice(0,1);const et=_e[_e.length-1];return E===0&&_e.length>0&&et===I&&gn(et)&&_e.splice(_e.length-1,1),_e},$=(_e,Qe,et)=>{const ut=[];for(;_e&&_e!==et;_e=_e[Qe])ut.push(_e);return ut},J=(_e,Qe)=>t.getParent(_e,et=>et.parentNode===Qe,Qe),te=(_e,Qe,et)=>{const ut=et?"nextSibling":"previousSibling";for(let _t=_e,Qt=_t.parentNode;_t&&_t!==Qe;_t=Qt){Qt=_t.parentNode;const Mn=$(_t===_e?_t:_t[ut],ut);Mn.length&&(et||Mn.reverse(),a(D(Mn)))}};if(b===I)return a(D([b]));const re=(u=t.findCommonAncestor(b,I))!==null&&u!==void 0?u:t.getRoot();if(t.isChildOf(b,I))return te(b,re,!0);if(t.isChildOf(I,b))return te(I,re);const fe=J(b,re)||b,Re=J(I,re)||I;te(b,fe,!0);const Ae=$(fe===b?fe:fe.nextSibling,"nextSibling",Re===I?Re.nextSibling:Re);Ae.length&&a(D(Ae)),te(I,Re)},YS=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]","div.mce-footnotes"],Hg=t=>dr(t)&&qc(t)===Va,jl=(t,s,a,u)=>Du(s).fold(()=>"skipping",p=>u==="br"||Hg(s)?"valid":g6(s)?"existing":Vu(s.dom)?"caret":Kt(YS,b=>Ls(s,b))?"valid-block":!Hy(t,a,u)||!Hy(t,Xo(p),a)?"invalid-child":"valid"),u3=(t,s)=>{const a=Fa(t.dom,s,[{inline:"span"}]);s.setStart(a.startContainer,a.startOffset),s.setEnd(a.endContainer,a.endOffset),t.selection.setRng(s)},ek=(t,s,a,u,p,b)=>{const{uid:E=s,...I}=a;au(t,xp()),_i(t,`${Sh()}`,E),_i(t,`${yh()}`,u);const{attributes:D={},classes:$=[]}=p(E,I);if(Ac(t,D),_b(t,$),b){$.length>0&&_i(t,`${Sm()}`,$.join(","));const J=Vt(D);J.length>0&&_i(t,`${Og()}`,J.join(","))}},So=t=>{oa(t,xp()),da(t,`${Sh()}`),da(t,`${yh()}`),da(t,`${Tv()}`);const s=id(t,`${Og()}`).map(u=>u.split(",")).getOr([]),a=id(t,`${Sm()}`).map(u=>u.split(",")).getOr([]);Ue(s,u=>da(t,u)),ry(t,a),da(t,`${Sm()}`),da(t,`${Og()}`)},Pf=(t,s,a,u,p)=>{const b=Me.fromTag("span",t);return ek(b,s,a,u,p,!1),b},d3=(t,s,a,u,p,b)=>{const E=[],I=Pf(t.getDoc(),a,b,u,p),D=yc(),$=()=>{D.clear()},J=()=>D.get().getOrThunk(()=>{const Re=pa(I);return E.push(Re),D.set(Re),Re}),te=Re=>{Ue(Re,re)},re=Re=>{switch(jl(t,Re,"span",Xo(Re))){case"invalid-child":{$();const _e=Oi(Re);te(_e),$();break}case"valid-block":{$(),ek(Re,a,b,u,p,!0);break}case"valid":{const _e=J();ku(Re,_e);break}}},fe=Re=>{const Ae=Ut(Re,Me.fromDom);te(Ae)};return Fy(t.dom,s,Re=>{$(),fe(Re)}),E},J_=(t,s,a,u)=>{t.undoManager.transact(()=>{const p=t.selection,b=p.getRng(),E=Vv(t).length>0,I=Xi("mce-annotation");if(b.collapsed&&!E&&u3(t,b),p.getRng().collapsed&&!E){const D=Pf(t.getDoc(),I,u,s,a.decorate);dh(D,ci),p.getRng().insertNode(D.dom),p.select(D.dom)}else KS(p,!1,()=>{MO(t,D=>{d3(t,D,I,s,a.decorate,u)})})})},tk=t=>{const s=Ov();JE(t,s);const a=kx(t,s),u=ua("span"),p=b=>{Ue(b,E=>{u(E)?ru(E):So(E)})};return{register:(b,E)=>{s.register(b,E)},annotate:(b,E)=>{s.lookup(b).each(I=>{J_(t,b,I,E)})},annotationChanged:(b,E)=>{a.addListener(b,E)},remove:b=>{kT(t,ce.some(b)).each(({elements:E})=>{const I=t.selection.getBookmark();p(E),t.selection.moveToBookmark(I)})},removeAll:b=>{const E=t.selection.getBookmark();wn(YE(t,b),(I,D)=>{p(I)}),t.selection.moveToBookmark(E)},getAll:b=>{const E=YE(t,b);return ko(E,I=>Ut(I,D=>D.dom))}}},Bm=t=>({getBookmark:$e(xc,t),moveToBookmark:$e(r3,t)});Bm.isBookmarkNode=hd;const R6=(t,s,a)=>a.collapsed?!1:Kt(a.getClientRects(),u=>LT(u,t,s)),f3=(t,s)=>{const a=dr(s)?qc(s).length:Oi(s).length+1;return t>a?a:t<0?0:t},x6=t=>mm.range(t.start,f3(t.soffset,t.start),t.finish,f3(t.foffset,t.finish)),nk=(t,s)=>!fT(s.dom)&&(ur(t,s)||eo(t,s)),ok=t=>s=>nk(t,s.start)&&nk(t,s.finish),p3=t=>t.inline||$s.browser.isFirefox(),MQ=t=>mm.range(Me.fromDom(t.startContainer),t.startOffset,Me.fromDom(t.endContainer),t.endOffset),NQ=t=>{const s=t.getSelection();return(!s||s.rangeCount===0?ce.none():ce.from(s.getRangeAt(0))).map(MQ)},PQ=t=>{const s=Cf(t);return NQ(s.dom).filter(ok(t))},LQ=(t,s)=>ce.from(s).filter(ok(t)).map(x6),h3=t=>{const s=document.createRange();try{return s.setStart(t.start.dom,t.soffset),s.setEnd(t.finish.dom,t.foffset),ce.some(s)}catch{return ce.none()}},HO=t=>{const s=p3(t)?PQ(Me.fromDom(t.getBody())):ce.none();t.bookmark=s.isSome()?s:t.bookmark},m3=t=>(t.bookmark?t.bookmark:ce.none()).bind(a=>LQ(Me.fromDom(t.getBody()),a)).bind(h3),D6=t=>{m3(t).each(s=>t.selection.setRng(s))},sk={isEditorUIElement:t=>{const s=t.className.toString();return s.indexOf("tox-")!==-1||s.indexOf("mce-")!==-1}},BQ=(t,s)=>(Ye(s)||(s=0),window.setTimeout(t,s)),VQ=(t,s)=>(Ye(s)||(s=0),window.setInterval(t,s)),kh={setEditorTimeout:(t,s,a)=>BQ(()=>{t.removed||s()},a),setEditorInterval:(t,s,a)=>{const u=VQ(()=>{t.removed?window.clearInterval(u):s()},a);return u}},k6=(t,s)=>t.view(s).fold(Be([]),u=>{const p=t.owner(u),b=k6(t,p);return[u].concat(b)}),HQ=(t,s)=>{const a=s.owner(t);return k6(s,a)};var N6=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?ce.none():ce.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(Me.fromDom)},owner:t=>$d(t)});const g3=t=>{const s=G1(),a=J1(s),u=HQ(t,N6),p=Eb(t),b=Bt(u,(E,I)=>{const D=Eb(I);return{left:E.left+D.left,top:E.top+D.top}},{left:0,top:0});return wf(b.left+p.left+a.left,b.top+p.top+a.top)},$Q=t=>t.type==="nodechange"&&t.selectionChange,UQ=(t,s)=>{const a=()=>{s.throttle()};Ir.DOM.bind(document,"mouseup",a),t.on("remove",()=>{Ir.DOM.unbind(document,"mouseup",a)})},jQ=(t,s)=>{t.on("mouseup touchend",a=>{s.throttle()})},rk=(t,s)=>{jQ(t,s),t.on("keyup NodeChange AfterSetSelectionRange",a=>{$Q(a)||HO(t)})},P6=t=>{const s=Hn(()=>{HO(t)},0);t.on("init",()=>{t.inline&&UQ(t,s),rk(t,s)}),t.on("remove",()=>{s.cancel()})};let JS;const v3=Ir.DOM,zQ=t=>vo(t)&&sk.isEditorUIElement(t),L6=t=>{const s=t.classList;return s!==void 0?s.contains("tox-edit-area")||s.contains("tox-edit-area__iframe")||s.contains("mce-content-body"):!1},b3=(t,s)=>{const a=Mv(t);return v3.getParent(s,p=>zQ(p)||(a?t.dom.is(p,a):!1))!==null},B6=t=>{try{const s=Wa(Me.fromDom(t.getElement()));return jd(s).fold(()=>document.body,a=>a.dom)}catch{return document.body}},WQ=(t,s)=>{const a=s.editor;P6(a);const u=(b,E)=>{if(L4(b)&&b.inline!==!0){const I=Me.fromDom(b.getContainer());E(I,"tox-edit-focus")}},p=b=>{if(!b.iframeElement)return;const I=Me.fromDom(b.iframeElement),D=g3(I),$=DE(window);(D.top<$.y||D.top>$.bottom-25)&&I.dom.scrollIntoView({block:"center"})};a.on("focusin",()=>{const b=t.focusedEditor;if(L6(B6(a))&&u(a,au),b!==a){b&&b.dispatch("blur",{focusedEditor:a}),t.setActive(a),t.focusedEditor=a,a.dispatch("focus",{blurredEditor:b}),a.focus(!0);const E=su().browser;a.inline!==!0&&(E.isSafari()||E.isChromium())&&p(a)}}),a.on("focusout",()=>{kh.setEditorTimeout(a,()=>{const b=t.focusedEditor;(!L6(B6(a))||b!==a)&&u(a,oa),!b3(a,B6(a))&&b===a&&(a.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),JS||(JS=b=>{const E=t.activeEditor;E&&z1(b).each(I=>{const D=I;D.ownerDocument===document&&D!==document.body&&!b3(E,D)&&t.focusedEditor===E&&(E.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})},v3.bind(document,"focusin",JS))},l0e=(t,s)=>{t.focusedEditor===s.editor&&(t.focusedEditor=null),!t.activeEditor&&JS&&(v3.unbind(document,"focusin",JS),JS=null)},GQ=t=>{t.on("AddEditor",$e(WQ,t)),t.on("RemoveEditor",$e(l0e,t))},qQ=(t,s)=>t.dom.getParent(s,a=>t.dom.getContentEditable(a)==="true"),u0e=(t,s)=>t.dom.getParent(s,a=>t.dom.getContentEditable(a)==="false")!==null,KQ=t=>t.collapsed?ce.from(Rg(t.startContainer,t.startOffset)).map(Me.fromDom):ce.none(),Mi=(t,s)=>KQ(s).bind(a=>mu(a)?ce.some(a):ur(t,a)?ce.none():ce.some(t)),ik=(t,s)=>{Mi(Me.fromDom(t.getBody()),s).bind(a=>Hl(a.dom)).fold(()=>{t.selection.normalize()},a=>t.selection.setRng(a.toRange()))},XS=t=>{if(t.setActive)try{t.setActive()}catch{t.focus()}else t.focus()},ak=t=>hp(t)||q1(t).isSome(),l0=t=>be(t.iframeElement)&&hp(Me.fromDom(t.iframeElement)),ck=t=>{const s=t.getBody();return s&&ak(Me.fromDom(s))},X_=t=>{const s=Wa(Me.fromDom(t.getElement()));return jd(s).filter(a=>!L6(a.dom)&&b3(t,a.dom)).isSome()},QS=t=>t.inline?ck(t):l0(t),y3=t=>QS(t)||X_(t),ZQ=t=>{const s=t.selection,a=t.getBody();let u=s.getRng();t.quirks.refreshContentEditable();const p=E=>{m3(E).each(I=>{E.selection.setRng(I),u=I})};!QS(t)&&t.hasEditableRoot()&&p(t);const b=qQ(t,s.getNode());if(b&&t.dom.isChildOf(b,a)){u0e(t,b)||XS(a),XS(b),t.hasEditableRoot()||p(t),ik(t,u),lk(t);return}t.inline||($s.browser.isOpera()||XS(a),t.getWin().focus()),($s.browser.isFirefox()||t.inline)&&(XS(a),ik(t,u)),lk(t)},lk=t=>t.editorManager.setActive(t),YQ=(t,s)=>{t.removed||(s?lk(t):ZQ(t))},qn={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||qn.metaKeyPressed(t),metaKeyPressed:t=>$s.os.isMacOS()||$s.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},Fv="data-mce-selected",$y="table,img,figure.image,hr,video,span.mce-preview-object,details",Uy=Math.abs,FO=Math.round,S3={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},JQ=t=>t.type==="longpress"||t.type.indexOf("touch")===0,V6=(t,s)=>{const a=s.dom,u=s.getDoc(),p=document,b=s.getBody();let E,I,D,$,J,te,re,fe,Re,Ae,_e,Qe,et,ut,_t;const Qt=Eo=>be(Eo)&&(gT(Eo)||a.is(Eo,"figure.image")),Mn=Eo=>Ep(Eo)||a.hasClass(Eo,"mce-preview-object"),bn=(Eo,Dn)=>{if(JQ(Eo)){const Xn=Eo.touches[0];return Qt(Eo.target)&&!R6(Xn.clientX,Xn.clientY,Dn)}else return Qt(Eo.target)&&!R6(Eo.clientX,Eo.clientY,Dn)},Wt=Eo=>{const Dn=Eo.target;bn(Eo,s.selection.getRng())&&!Eo.isDefaultPrevented()&&s.selection.select(Dn)},ct=Eo=>a.hasClass(Eo,"mce-preview-object")&&be(Eo.firstElementChild)?[Eo,Eo.firstElementChild]:a.is(Eo,"figure.image")?[Eo.querySelector("img")]:[Eo],ke=Eo=>{const Dn=iO(s);return!Dn||s.mode.isReadOnly()||Eo.getAttribute("data-mce-resize")==="false"||Eo===s.getBody()?!1:a.hasClass(Eo,"mce-preview-object")&&be(Eo.firstElementChild)?Ls(Me.fromDom(Eo.firstElementChild),Dn):Ls(Me.fromDom(Eo),Dn)},wt=(Eo,Dn)=>{if(Mn(Dn))return Eo.create("img",{src:$s.transparentSrc});if(gm(Dn)){const Go=$o($.name,"n")?It:Dt,rs=Dn.cloneNode(!0);return Go(Eo.select("tr",rs)).each(Nr=>{const ni=Eo.select("td,th",Nr);Eo.setStyle(Nr,"height",null),Ue(ni,jh=>Eo.setStyle(jh,"height",null))}),rs}else return Dn.cloneNode(!0)},vn=(Eo,Dn,Xn)=>{if(be(Xn)){const Go=ct(Eo);Ue(Go,rs=>{rs.style[Dn]||!s.schema.isValid(rs.nodeName.toLowerCase(),Dn)?a.setStyle(rs,Dn,Xn):a.setAttrib(rs,Dn,""+Xn)})}},Ao=(Eo,Dn,Xn)=>{vn(Eo,"width",Dn),vn(Eo,"height",Xn)},ss=Eo=>{let Dn,Xn,Go,rs,Nr;Dn=Eo.screenX-te,Xn=Eo.screenY-re,Qe=Dn*$[2]+fe,et=Xn*$[3]+Re,Qe=Qe<5?5:Qe,et=et<5?5:et,(Qt(E)||Mn(E))&&ir(s)!==!1?Go=!qn.modifierPressed(Eo):Go=qn.modifierPressed(Eo),Go&&(Uy(Dn)>Uy(Xn)?(et=FO(Qe*Ae),Qe=FO(et/Ae)):(Qe=FO(et/Ae),et=FO(Qe*Ae))),Ao(I,Qe,et),rs=$.startPos.x+Dn,Nr=$.startPos.y+Xn,rs=rs>0?rs:0,Nr=Nr>0?Nr:0,a.setStyles(D,{left:rs,top:Nr,display:"block"}),D.innerHTML=Qe+" &times; "+et,Dn=b.scrollWidth-ut,Xn=b.scrollHeight-_t,Dn+Xn!==0&&a.setStyles(D,{left:rs-Dn,top:Nr-Xn}),_e||(v4(s,E,fe,Re,"corner-"+$.name),_e=!0)},ks=()=>{const Eo=_e;_e=!1,Eo&&(vn(E,"width",Qe),vn(E,"height",et)),a.unbind(u,"mousemove",ss),a.unbind(u,"mouseup",ks),p!==u&&(a.unbind(p,"mousemove",ss),a.unbind(p,"mouseup",ks)),a.remove(I),a.remove(D),a.remove(J),Gs(E),Eo&&(JT(s,E,Qe,et,"corner-"+$.name),a.setAttrib(E,"style",a.getAttrib(E,"style"))),s.nodeChanged()},Gs=Eo=>{Io();const Dn=a.getPos(Eo,b),Xn=Dn.x,Go=Dn.y,rs=Eo.getBoundingClientRect(),Nr=rs.width||rs.right-rs.left,ni=rs.height||rs.bottom-rs.top;E!==Eo&&(Li(),E=Eo,Qe=et=0);const jh=s.dispatch("ObjectSelected",{target:Eo});ke(Eo)&&!jh.isDefaultPrevented()?wn(S3,(ql,Zg)=>{const Zm=Yf=>{const Yg=ct(E)[0];te=Yf.screenX,re=Yf.screenY,fe=Yg.clientWidth,Re=Yg.clientHeight,Ae=Re/fe,$=ql,$.name=Zg,$.startPos={x:Nr*ql[0]+Xn,y:ni*ql[1]+Go},ut=b.scrollWidth,_t=b.scrollHeight,J=a.add(b,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),a.setStyles(J,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),I=wt(a,E),a.addClass(I,"mce-clonedresizable"),a.setAttrib(I,"data-mce-bogus","all"),I.contentEditable="false",a.setStyles(I,{left:Xn,top:Go,margin:0}),Ao(I,Nr,ni),I.removeAttribute(Fv),b.appendChild(I),a.bind(u,"mousemove",ss),a.bind(u,"mouseup",ks),p!==u&&(a.bind(p,"mousemove",ss),a.bind(p,"mouseup",ks)),D=a.add(b,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},fe+" &times; "+Re)};let of=a.get("mceResizeHandle"+Zg);of&&a.remove(of),of=a.add(b,"div",{id:"mceResizeHandle"+Zg,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Zg+"-resize; margin:0; padding:0"}),a.bind(of,"mousedown",Yf=>{Yf.stopImmediatePropagation(),Yf.preventDefault(),Zm(Yf)}),ql.elm=of,a.setStyles(of,{left:Nr*ql[0]+Xn-of.offsetWidth/2,top:ni*ql[1]+Go-of.offsetHeight/2})}):Li(!1)},Pi=Hn(Gs,0),Li=(Eo=!0)=>{Pi.cancel(),Io(),E&&Eo&&E.removeAttribute(Fv),wn(S3,(Dn,Xn)=>{const Go=a.get("mceResizeHandle"+Xn);Go&&(a.unbind(Go),a.remove(Go))})},gl=(Eo,Dn)=>a.isChildOf(Eo,Dn),In=Eo=>{if(_e||s.removed||s.composing)return;const Dn=Eo.type==="mousedown"?Eo.target:t.getNode(),Xn=Kc(Me.fromDom(Dn),$y).map(rs=>rs.dom).filter(rs=>a.isEditable(rs.parentElement)||rs.nodeName==="IMG"&&a.isEditable(rs)).getOrUndefined(),Go=be(Xn)?a.getAttrib(Xn,Fv,"1"):"1";if(Ue(a.select(`img[${Fv}],hr[${Fv}]`),rs=>{rs.removeAttribute(Fv)}),be(Xn)&&gl(Xn,b)&&y3(s)){or();const rs=t.getStart(!0);if(gl(rs,Xn)&&gl(t.getEnd(!0),Xn)){a.setAttrib(Xn,Fv,Go),Pi.throttle(Xn);return}}Li()},Io=()=>{wn(S3,Eo=>{Eo.elm&&(a.unbind(Eo.elm),delete Eo.elm)})},or=()=>{try{s.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return s.on("init",()=>{or(),s.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",In),s.on("keyup compositionend",Eo=>{E&&E.nodeName==="TABLE"&&In(Eo)}),s.on("hide blur",Li),s.on("contextmenu longpress",Wt,!0)}),s.on("remove",Io),{isResizable:ke,showResizeRect:Gs,hideResizeRect:Li,updateResizeRect:In,destroy:()=>{Pi.cancel(),E=I=J=null}}},H6=(t,s,a)=>{const u=Cf(Me.fromDom(a));return bv(u.dom,t,s).map(p=>{const b=a.createRange();return b.setStart(p.start.dom,p.soffset),b.setEnd(p.finish.dom,p.foffset),b}).getOrUndefined()},C3=(t,s)=>be(t)&&be(s)&&t.startContainer===s.startContainer&&t.startOffset===s.startOffset&&t.endContainer===s.endContainer&&t.endOffset===s.endOffset,XQ=(t,s,a)=>{let u=t;for(;u&&u!==s;){if(a(u))return u;u=u.parentNode}return null},E3=(t,s,a)=>XQ(t,s,a)!==null,QQ=(t,s,a)=>E3(t,s,u=>u.nodeName===a),eee=(t,s)=>Ml(t)&&!E3(t,s,Vu),F6=(t,s,a)=>{const u=s.parentNode;if(u){const p=new Kr(s,t.getParent(u,t.isBlock)||t.getRoot());let b;for(;b=p[a?"prev":"next"]();)if(Ri(b))return!0}return!1},d0e=(t,s)=>{var a;return((a=t.previousSibling)===null||a===void 0?void 0:a.nodeName)===s},tee=(t,s)=>{let a=s;for(;a&&a!==t;){if(fi(a))return!0;a=a.parentNode}return!1},Dc=(t,s,a,u,p)=>{const b=t.getRoot(),E=t.schema.getNonEmptyElements(),I=p.parentNode;let D,$;if(!I)return ce.none();const J=t.getParent(I,t.isBlock)||b;if(u&&Ri(p)&&s&&t.isEmpty(J))return ce.some(Pt(I,t.nodeIndex(p)));const te=new Kr(p,J);for(;$=te[u?"prev":"next"]();){if(t.getContentEditableParent($)==="false"||eee($,b))return ce.none();if(gn($)&&$.data.length>0)return QQ($,b,"A")?ce.none():ce.some(Pt($,u?$.data.length:0));if(t.isBlock($)||E[$.nodeName.toLowerCase()])return ce.none();D=$}return Wi(D)?ce.none():a&&D?ce.some(Pt(D,0)):ce.none()},$O=(t,s,a,u)=>{const p=t.getRoot();let b,E=!1,I=a?u.startContainer:u.endContainer,D=a?u.startOffset:u.endOffset;const $=vo(I)&&D===I.childNodes.length,J=t.schema.getNonEmptyElements();let te=a;if(Ml(I))return ce.none();if(vo(I)&&D>I.childNodes.length-1&&(te=!1),xs(I)&&(I=p,D=0),I===p){if(te&&(b=I.childNodes[D>0?D-1:0],b&&(Ml(b)||J[b.nodeName]||gm(b))))return ce.none();if(I.hasChildNodes()){if(D=Math.min(!te&&D>0?D-1:D,I.childNodes.length-1),I=I.childNodes[D],D=gn(I)&&$?I.data.length:0,!s&&I===p.lastChild&&gm(I)||tee(p,I)||Ml(I)||PE(I))return ce.none();if(I.hasChildNodes()&&!gm(I)){b=I;const re=new Kr(I,p);do{if(fi(b)||Ml(b)){E=!1;break}if(gn(b)&&b.data.length>0){D=te?0:b.data.length,I=b,E=!0;break}if(J[b.nodeName.toLowerCase()]&&!vT(b)){D=t.nodeIndex(b),I=b.parentNode,te||D++,E=!0;break}}while(b=te?re.next():re.prev())}}}return s&&(gn(I)&&D===0&&Dc(t,$,s,!0,I).each(re=>{I=re.container(),D=re.offset(),E=!0}),vo(I)&&(b=I.childNodes[D],b||(b=I.childNodes[D-1]),b&&Ri(b)&&!d0e(b,"A")&&!F6(t,b,!1)&&!F6(t,b,!0)&&Dc(t,$,s,!0,b).each(re=>{I=re.container(),D=re.offset(),E=!0}))),te&&!s&&gn(I)&&D===I.data.length&&Dc(t,$,s,!1,I).each(re=>{I=re.container(),D=re.offset(),E=!0}),E&&I?ce.some(Pt(I,D)):ce.none()},kc=(t,s)=>{const a=s.collapsed,u=s.cloneRange(),p=Pt.fromRangeStart(s);return $O(t,a,!0,u).each(b=>{(!a||!Pt.isAbove(p,b))&&u.setStart(b.container(),b.offset())}),a||$O(t,a,!1,u).each(b=>{u.setEnd(b.container(),b.offset())}),a&&u.collapse(!0),C3(s,u)?ce.none():ce.some(u)},Lf=(t,s)=>t.splitText(s),uk=t=>{let s=t.startContainer,a=t.startOffset,u=t.endContainer,p=t.endOffset;if(s===u&&gn(s)){if(a>0&&a<s.data.length)if(u=Lf(s,a),s=u.previousSibling,p>a){p=p-a;const b=Lf(u,p).previousSibling;s=u=b,p=b.data.length,a=0}else p=0}else if(gn(s)&&a>0&&a<s.data.length&&(s=Lf(s,a),a=0),gn(u)&&p>0&&p<u.data.length){const b=Lf(u,p).previousSibling;u=b,p=b.data.length}return{startContainer:s,startOffset:a,endContainer:u,endOffset:p}},Fg=t=>({walk:(b,E)=>Fy(t,b,E),split:uk,expand:(b,E={type:"word"})=>{if(E.type==="word"){const I=Fa(t,b,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),D=t.createRng();return D.setStart(I.startContainer,I.startOffset),D.setEnd(I.endContainer,I.endOffset),D}return b},normalize:b=>kc(t,b).fold(Et,E=>(b.setStart(E.startContainer,E.startOffset),b.setEnd(E.endContainer,E.endOffset),!0))});Fg.compareRanges=C3,Fg.getCaretRangeFromPoint=H6,Fg.getSelectedNode=Dv,Fg.getNode=Rg;const _3=t=>Xo(t)==="textarea",w3=(t,s)=>t.dispatch("ScrollIntoView",s).isDefaultPrevented(),nee=(t,s)=>{t.dispatch("AfterScrollIntoView",s)},$6=(t,s)=>{const a=Oi(t);if(a.length===0||_3(t))return{element:t,offset:s};if(s<a.length&&!_3(a[s]))return{element:a[s],offset:0};{const u=a[a.length-1];return _3(u)?{element:t,offset:s}:Xo(u)==="img"?{element:u,offset:1}:dr(u)?{element:u,offset:qc(u).length}:{element:u,offset:Oi(u).length}}},U6=(t,s)=>{const a=Cb(t),u=sT(t);return{element:t,bottom:a.top+u,height:u,pos:a,cleanup:s}},oee=(t,s)=>{const a=$6(t,s),u=Me.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Va+"</span>");return wc(a.element,u),U6(u,()=>Vr(u))},see=t=>U6(Me.fromDom(t),Ze),Bf=(t,s,a,u)=>{A3(t,(p,b)=>f0e(t,s,a,u),a)},Hu=(t,s,a,u,p)=>{const b={elm:u.element.dom,alignToTop:p};if(w3(t,b))return;const E=J1(s).top;a(t,s,E,u,p),nee(t,b)},f0e=(t,s,a,u)=>{const p=Me.fromDom(t.getBody()),b=Me.fromDom(t.getDoc());Z1(p);const E=oee(Me.fromDom(a.startContainer),a.startOffset);Hu(t,b,s,E,u),E.cleanup()},Vm=(t,s,a,u)=>{const p=Me.fromDom(t.getDoc());Hu(t,p,a,see(s),u)},A3=(t,s,a)=>{const u=a.startContainer,p=a.startOffset,b=a.endContainer,E=a.endOffset;s(Me.fromDom(u),Me.fromDom(b));const I=t.dom.createRng();I.setStart(u,p),I.setEnd(b,E),t.selection.setRng(a)},T3=(t,s,a,u,p)=>{const b=s.pos,E=30;if(u)AE(b.left,Math.max(0,b.top-E),p);else{const I=b.top-a+s.height+E;AE(-t.getBody().getBoundingClientRect().left,I,p)}},j6=(t,s,a,u,p,b)=>{const E=u+a,I=p.pos.top,D=p.bottom,$=D-I>=u;I<a?T3(t,p,u,b!==!1,s):I>E?T3(t,p,u,$?b!==!1:b===!0,s):D>E&&!$&&T3(t,p,u,b===!0,s)},O3=(t,s,a,u,p)=>{const b=Cf(s).dom.innerHeight;j6(t,s,a,b,u,p)},z6=(t,s,a,u,p)=>{const b=Cf(s).dom.innerHeight;j6(t,s,a,b,u,p);const E=g3(u.element),I=DE(window);E.top<I.y?Wd(u.element,p!==!1):E.top>I.bottom&&Wd(u.element,p===!0)},W6=(t,s,a)=>Bf(t,O3,s,a),ree=(t,s,a)=>Vm(t,s,O3,a),I3=(t,s,a)=>Bf(t,z6,s,a),iee=(t,s,a)=>Vm(t,s,z6,a),aee=(t,s,a)=>{(t.inline?ree:iee)(t,s,a)},UO=(t,s,a)=>{(t.inline?W6:I3)(t,s,a)},G6=(t,s)=>s.collapsed?t.isEditable(s.startContainer):t.isEditable(s.startContainer)&&t.isEditable(s.endContainer),R3=(t,s,a,u,p)=>{const b=a?s.startContainer:s.endContainer,E=a?s.startOffset:s.endOffset;return ce.from(b).map(Me.fromDom).map(I=>!u||!s.collapsed?Ud(I,p(I,E)).getOr(I):I).bind(I=>ki(I)?ce.some(I):Rl(I).filter(ki)).map(I=>I.dom).getOr(t)},dk=(t,s,a=!1)=>R3(t,s,!0,a,(u,p)=>Math.min(cm(u),p)),x3=(t,s,a=!1)=>R3(t,s,!1,a,(u,p)=>p>0?p-1:p),fk=(t,s)=>{const a=t;for(;t&&gn(t)&&t.length===0;)t=s?t.nextSibling:t.previousSibling;return t||a},cee=(t,s)=>{if(!s)return t;let a=s.startContainer,u=s.endContainer;const p=s.startOffset,b=s.endOffset;let E=s.commonAncestorContainer;s.collapsed||(a===u&&b-p<2&&a.hasChildNodes()&&(E=a.childNodes[p]),gn(a)&&gn(u)&&(a.length===p?a=fk(a.nextSibling,!0):a=a.parentNode,b===0?u=fk(u.previousSibling,!1):u=u.parentNode,a&&a===u&&(E=a)));const I=gn(E)?E.parentNode:E;return di(I)?I:t},p0e=(t,s,a,u)=>{const p=[],b=t.getRoot(),E=t.getParent(a||dk(b,s,s.collapsed),t.isBlock),I=t.getParent(u||x3(b,s,s.collapsed),t.isBlock);if(E&&E!==b&&p.push(E),E&&I&&E!==I){let D;const $=new Kr(E,b);for(;(D=$.next())&&D!==I;)t.isBlock(D)&&p.push(D)}return I&&E!==I&&I!==b&&p.push(I),p},h0e=(t,s,a)=>ce.from(s).bind(u=>ce.from(u.parentNode).map(p=>{const b=t.nodeIndex(u),E=t.createRng();return E.setStart(p,b),E.setEnd(p,b+1),a&&(Z_(t,E,u,!0),Z_(t,E,u,!1)),E})),D3=(t,s)=>Ut(s,a=>{const u=t.dispatch("GetSelectionRange",{range:a});return u.range!==a?u.range:a}),q6={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},pk=(t,s,a)=>{const u=a?"lastChild":"firstChild",p=a?"prev":"next";if(t[u])return t[u];if(t!==s){let b=t[p];if(b)return b;for(let E=t.parent;E&&E!==s;E=E.parent)if(b=E[p],b)return b}},lee=t=>{var s;const a=(s=t.value)!==null&&s!==void 0?s:"";if(!yg(a))return!1;const u=t.parent;return!(u&&(u.name!=="span"||u.attr("style"))&&/^[ ]+$/.test(a))},K6=t=>{const s=t.name==="a"&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||s};class Fu{static create(s,a){const u=new Fu(s,q6[s]||1);return a&&wn(a,(p,b)=>{u.attr(b,p)}),u}constructor(s,a){this.name=s,this.type=a,a===1&&(this.attributes=[],this.attributes.map={})}replace(s){const a=this;return s.parent&&s.remove(),a.insert(s,a),a.remove(),a}attr(s,a){const u=this;if(!K(s))return be(s)&&wn(s,(b,E)=>{u.attr(E,b)}),u;const p=u.attributes;if(p){if(a!==void 0){if(a===null){if(s in p.map){delete p.map[s];let b=p.length;for(;b--;)if(p[b].name===s)return p.splice(b,1),u}return u}if(s in p.map){let b=p.length;for(;b--;)if(p[b].name===s){p[b].value=a;break}}else p.push({name:s,value:a});return p.map[s]=a,u}return p.map[s]}}clone(){const s=this,a=new Fu(s.name,s.type),u=s.attributes;if(u){const p=[];p.map={};for(let b=0,E=u.length;b<E;b++){const I=u[b];I.name!=="id"&&(p[p.length]={name:I.name,value:I.value},p.map[I.name]=I.value)}a.attributes=p}return a.value=s.value,a}wrap(s){const a=this;return a.parent&&(a.parent.insert(s,a),s.append(a)),a}unwrap(){const s=this;for(let a=s.firstChild;a;){const u=a.next;s.insert(a,s,!0),a=u}s.remove()}remove(){const s=this,a=s.parent,u=s.next,p=s.prev;return a&&(a.firstChild===s?(a.firstChild=u,u&&(u.prev=null)):p&&(p.next=u),a.lastChild===s?(a.lastChild=p,p&&(p.next=null)):u&&(u.prev=p),s.parent=s.next=s.prev=null),s}append(s){const a=this;s.parent&&s.remove();const u=a.lastChild;return u?(u.next=s,s.prev=u,a.lastChild=s):a.lastChild=a.firstChild=s,s.parent=a,s}insert(s,a,u){s.parent&&s.remove();const p=a.parent||this;return u?(a===p.firstChild?p.firstChild=s:a.prev&&(a.prev.next=s),s.prev=a.prev,s.next=a,a.prev=s):(a===p.lastChild?p.lastChild=s:a.next&&(a.next.prev=s),s.next=a.next,s.prev=a,a.next=s),s.parent=p,s}getAll(s){const a=this,u=[];for(let p=a.firstChild;p;p=pk(p,a))p.name===s&&u.push(p);return u}children(){const s=this,a=[];for(let u=s.firstChild;u;u=u.next)a.push(u);return a}empty(){const s=this;if(s.firstChild){const a=[];for(let p=s.firstChild;p;p=pk(p,s))a.push(p);let u=a.length;for(;u--;){const p=a[u];p.parent=p.firstChild=p.lastChild=p.next=p.prev=null}}return s.firstChild=s.lastChild=null,s}isEmpty(s,a={},u){var p;const b=this;let E=b.firstChild;if(K6(b))return!1;if(E)do{if(E.type===1){if(E.attr("data-mce-bogus"))continue;if(s[E.name]||K6(E))return!1}if(E.type===8||E.type===3&&!lee(E)||E.type===3&&E.parent&&a[E.parent.name]&&yg((p=E.value)!==null&&p!==void 0?p:"")||u&&u(E))return!1}while(E=pk(E,b));return!0}walk(s){return pk(this,null,s)}}const m0e=yn.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),k3=t=>K(t.nodeValue)&&t.nodeValue.includes(Va),M3=t=>`${t.length===0?"":`${Ut(t,s=>`[${s}]`).join(",")},`}[data-mce-bogus="all"]`,uee=(t,s)=>s.querySelectorAll(M3(t)),Z6=t=>document.createTreeWalker(t,NodeFilter.SHOW_COMMENT,s=>k3(s)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),Y6=t=>document.createTreeWalker(t,NodeFilter.SHOW_TEXT,s=>{if(k3(s)){const a=s.parentNode;return a&&ho(m0e,a.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),g0e=t=>Z6(t).nextNode()!==null,v0e=t=>Y6(t).nextNode()!==null,b0e=(t,s)=>s.querySelector(M3(t))!==null,dee=(t,s)=>{Ue(uee(t,s),a=>{const u=Me.fromDom(a);Xr(u,"data-mce-bogus")==="all"?Vr(u):Ue(t,p=>{li(u,p)&&da(u,p)})})},fee=t=>{let s=t.nextNode();for(;s!==null;)s.nodeValue=null,s=t.nextNode()},pee=z(fee,Z6),eC=z(fee,Y6),J6=(t,s)=>{const a=[{condition:$e(b0e,s),action:$e(dee,s)},{condition:g0e,action:pee},{condition:v0e,action:eC}];let u=t,p=!1;return Ue(a,({condition:b,action:E})=>{b(u)&&(p||(u=t.cloneNode(!0),p=!0),E(u))}),u},N3=t=>{const s=Ht(t,"[data-mce-bogus]");Ue(s,a=>{Xr(a,"data-mce-bogus")==="all"?Vr(a):Cm(a)?(wc(a,Me.fromText(Sc)),Vr(a)):ru(a)})},P3=t=>{const s=Ht(t,"input");Ue(s,a=>{da(a,"name")})},X6=(t,s)=>{const a=Qc(t),u=new RegExp(`^(<${a}[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/${a}>[\r
]*|<br \\/>[\r
]*)$`);return s.replace(u,"")},Q6=(t,s)=>{const a=t.getDoc(),u=Wa(Me.fromDom(t.getBody())),p=Me.fromTag("div",a);_i(p,"data-mce-bogus","all"),iu(p,{position:"fixed",left:"-9999999px",top:"0"}),dh(p,s.innerHTML),N3(p),P3(p);const b=EE(u);Qs(b,p);const E=Pu(p.dom.innerText);return Vr(p),E},L3=(t,s,a)=>{let u;return s.format==="raw"?u=yn.trim(Pu(J6(a,t.serializer.getTempAttrs()).innerHTML)):s.format==="text"?u=Q6(t,a):s.format==="tree"?u=t.serializer.serialize(a,s):u=X6(t,t.serializer.serialize(a,s)),s.format!=="text"&&!fd(Me.fromDom(a))&&K(u)?yn.trim(u):u},y0e=(t,s)=>ce.from(t.getBody()).fold(Be(s.format==="tree"?new Fu("body",11):""),a=>L3(t,s,a)),e8=yn.makeMap,hee=t=>{const s=[];t=t||{};const a=t.indent,u=e8(t.indent_before||""),p=e8(t.indent_after||""),b=Db.getEncodeFunc(t.entity_encoding||"raw",t.entities),E=t.element_format!=="xhtml";return{start:(I,D,$)=>{if(a&&u[I]&&s.length>0){const J=s[s.length-1];J.length>0&&J!==`
`&&s.push(`
`)}if(s.push("<",I),D)for(let J=0,te=D.length;J<te;J++){const re=D[J];s.push(" ",re.name,'="',b(re.value,!0),'"')}if(!$||E?s[s.length]=">":s[s.length]=" />",$&&a&&p[I]&&s.length>0){const J=s[s.length-1];J.length>0&&J!==`
`&&s.push(`
`)}},end:I=>{let D;s.push("</",I,">"),a&&p[I]&&s.length>0&&(D=s[s.length-1],D.length>0&&D!==`
`&&s.push(`
`))},text:(I,D)=>{I.length>0&&(s[s.length]=D?I:b(I))},cdata:I=>{s.push("<![CDATA[",I,"]]>")},comment:I=>{s.push("<!--",I,"-->")},pi:(I,D)=>{D?s.push("<?",I," ",b(D),"?>"):s.push("<?",I,"?>"),a&&s.push(`
`)},doctype:I=>{s.push("<!DOCTYPE",I,">",a?`
`:"")},reset:()=>{s.length=0},getContent:()=>s.join("").replace(/\n$/,"")}},jy=(t={},s=Op())=>{const a=hee(t);return t.validate="validate"in t?t.validate:!0,{serialize:p=>{const b=t.validate,E={3:D=>{var $;a.text(($=D.value)!==null&&$!==void 0?$:"",D.raw)},8:D=>{var $;a.comment(($=D.value)!==null&&$!==void 0?$:"")},7:D=>{a.pi(D.name,D.value)},10:D=>{var $;a.doctype(($=D.value)!==null&&$!==void 0?$:"")},4:D=>{var $;a.cdata(($=D.value)!==null&&$!==void 0?$:"")},11:D=>{let $=D;if($=$.firstChild)do I($);while($=$.next)}};a.reset();const I=D=>{var $;const J=E[D.type];if(J)J(D);else{const te=D.name,re=te in s.getVoidElements();let fe=D.attributes;if(b&&fe&&fe.length>1){const Re=[];Re.map={};const Ae=s.getElementRule(D.name);if(Ae){for(let _e=0,Qe=Ae.attributesOrder.length;_e<Qe;_e++){const et=Ae.attributesOrder[_e];if(et in fe.map){const ut=fe.map[et];Re.map[et]=ut,Re.push({name:et,value:ut})}}for(let _e=0,Qe=fe.length;_e<Qe;_e++){const et=fe[_e].name;if(!(et in Re.map)){const ut=fe.map[et];Re.map[et]=ut,Re.push({name:et,value:ut})}}fe=Re}}if(a.start(te,fe,re),du(te))K(D.value)&&a.text(D.value,!0),a.end(te);else if(!re){let Re=D.firstChild;if(Re){(te==="pre"||te==="textarea")&&Re.type===3&&(($=Re.value)===null||$===void 0?void 0:$[0])===`
`&&a.text(`
`,!0);do I(Re);while(Re=Re.next)}a.end(te)}}};return p.type===1&&!t.inner?I(p):p.type===3?E[3](p):E[11](p),a.getContent()}}},t8=new Set;Ue(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],s=>{t8.add(s)});const hk=new Set;Ue(["background-color"],s=>{hk.add(s)});const B3=["font","text-decoration","text-emphasis"],S0e=(t,s)=>t.parseStyle(t.getAttrib(s,"style")),jO=(t,s)=>Vt(S0e(t,s)),C0e=t=>t8.has(t),mee=t=>hk.has(t),gee=(t,s)=>Kt(jO(t,s),a=>C0e(a)),vee=(t,s)=>gee(t,s)&&Kt(jO(t,s),a=>mee(a)),n8=t=>Oe(t,s=>Kt(B3,a=>$o(s,a))),bee=(t,s,a)=>{const u=jO(t,s),p=jO(t,a),b=E=>{var I,D;const $=(I=t.getStyle(s,E))!==null&&I!==void 0?I:"",J=(D=t.getStyle(a,E))!==null&&D!==void 0?D:"";return Ar($)&&Ar(J)&&$!==J};return Kt(u,E=>{const I=D=>Kt(D,$=>$===E);if(!I(p)&&I(B3)){const D=n8(p);return Kt(D,b)}else return b(E)})},V3=(t,s,a)=>ce.from(a.container()).filter(gn).exists(u=>{const p=t?0:-1;return s(u.data.charAt(a.offset()+p))}),o8=$e(V3,!0,a0),H3=$e(V3,!1,a0),s8=t=>{const s=t.container();return gn(s)&&(s.data.length===0||o_(s.data)&&Bm.isBookmarkNode(s.parentNode))},zy=(t,s)=>a=>bO(t?0:-1,a).filter(s).isSome(),r8=t=>gT(t)&&zi(Me.fromDom(t),"display")==="block",i8=t=>fi(t)&&!sx(t),yee=zy(!0,r8),See=zy(!1,r8),zO=zy(!0,Ep),WO=zy(!1,Ep),a8=zy(!0,gm),F3=zy(!1,gm),Wy=zy(!0,i8),Gy=zy(!1,i8),Cee=t=>t.slice(0,-1),Eee=(t,s,a)=>ur(s,t)?Cee(Wc(t,u=>a(u)||eo(u,s))):[],c8=(t,s)=>Eee(t,s,Et),zn=(t,s)=>[t].concat(c8(t,s)),Hm=(t,s,a)=>TO(t,s,a,s8),E0e=t=>s=>t.isBlock(Xo(s)),l8=(t,s,a)=>gt(zn(Me.fromDom(s.container()),t),E0e(a)),mk=(t,s,a,u)=>Hm(t,s.dom,a).forall(p=>l8(s,a,u).fold(()=>!km(p,a,s.dom),b=>!km(p,a,s.dom)&&ur(b,Me.fromDom(p.container())))),$3=(t,s,a,u)=>l8(s,a,u).fold(()=>Hm(t,s.dom,a).forall(p=>!km(p,a,s.dom)),p=>Hm(t,p.dom,a).isNone()),gk=$e($3,!1),vk=$e($3,!0),_ee=$e(mk,!1),u8=$e(mk,!0),wee=t=>Ly(t).exists(Cm),bk=(t,s,a,u)=>{const p=Oe(zn(Me.fromDom(a.container()),s),E=>u.isBlock(Xo(E))),b=It(p).getOr(s);return Bl(t,b.dom,a).filter(wee)},U3=(t,s,a)=>Ly(s).exists(Cm)||bk(!0,t,s,a).isSome(),yk=(t,s,a)=>zS(s).exists(Cm)||bk(!1,t,s,a).isSome(),d8=$e(bk,!1),Sk=$e(bk,!0),f8=t=>Pt.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),p8=(t,s,a)=>{const u=Oe(zn(Me.fromDom(s.container()),t),p=>a.isBlock(Xo(p)));return It(u).getOr(t)},h8=(t,s,a)=>f8(s)?H3(s):H3(s)||gu(p8(t,s,a).dom,s).exists(H3),m8=(t,s,a)=>f8(s)?o8(s):o8(s)||Vl(p8(t,s,a).dom,s).exists(o8),Aee=t=>bt(["pre","pre-wrap"],t),Ck=t=>Ly(t).bind(s=>Rr(s,ki)).exists(s=>Aee(zi(s,"white-space"))),Ek=(t,s)=>gu(t.dom,s).isNone(),Tee=(t,s)=>Vl(t.dom,s).isNone(),Oee=(t,s,a)=>Ek(t,s)||Tee(t,s)||gk(t,s,a)||vk(t,s,a)||yk(t,s,a)||U3(t,s,a),Iee=t=>be(t)&&fi(t)&&VD(t),g8=(t,s)=>a=>Iee(new Kr(a,t)[s]()),Ree=(t,s)=>{const a=Vl(t.dom,s).getOr(s),u=g8(t.dom,"next");return s.isAtEnd()&&(u(s.container())||u(a.container()))},xee=(t,s)=>{const a=gu(t.dom,s).getOr(s),u=g8(t.dom,"prev");return s.isAtStart()&&(u(s.container())||u(a.container()))},v8=(t,s,a)=>Ck(s)?!1:Oee(t,s,a)||h8(t,s,a)||m8(t,s,a),GO=(t,s,a)=>Ck(s)?!1:gk(t,s,a)||_ee(t,s,a)||yk(t,s,a)||h8(t,s,a)||xee(t,s),Dee=t=>{const s=t.container(),a=t.offset();return gn(s)&&a<s.data.length?Pt(s,a+1):t},qO=(t,s,a)=>Ck(s)?!1:vk(t,s,a)||u8(t,s,a)||U3(t,s,a)||m8(t,s,a)||Ree(t,s),j3=(t,s,a)=>GO(t,s,a)||qO(t,Dee(s),a),b8=(t,s)=>W_(t.charAt(s)),y8=(t,s)=>a0(t.charAt(s)),kee=t=>{const s=t.container();return gn(s)&&ii(s.data,ci)},S8=t=>{const s=t.split("");return Ut(s,(a,u)=>W_(a)&&u>0&&u<s.length-1&&IO(s[u-1])&&IO(s[u+1])?" ":a).join("")},C8=(t,s,a,u)=>{const p=s.data,b=Pt(s,0);return!a&&b8(p,0)&&!j3(t,b,u)?(s.data=" "+p.slice(1),!0):a&&y8(p,0)&&GO(t,b,u)?(s.data=ci+p.slice(1),!0):!1},Mee=t=>{const s=t.data,a=S8(s);return a!==s?(t.data=a,!0):!1},KO=(t,s,a,u)=>{const p=s.data,b=Pt(s,p.length-1);return!a&&b8(p,p.length-1)&&!j3(t,b,u)?(s.data=p.slice(0,-1)+" ",!0):a&&y8(p,p.length-1)&&qO(t,b,u)?(s.data=p.slice(0,-1)+ci,!0):!1},tC=(t,s,a)=>{const u=s.container();if(!gn(u))return ce.none();if(kee(s)){const p=C8(t,u,!1,a)||Mee(u)||KO(t,u,!1,a);return bc(p,s)}else if(j3(t,s,a)){const p=C8(t,u,!0,a)||KO(t,u,!0,a);return bc(p,s)}else return ce.none()},_k=t=>{const s=Me.fromDom(t.getBody());t.selection.isCollapsed()&&tC(s,Pt.fromRangeStart(t.selection.getRng()),t.schema).each(a=>{t.selection.setRng(a.toRange())})},E8=(t,s,a,u)=>{if(a===0)return;const p=Me.fromDom(t),b=yp(p,$=>u.isBlock(Xo($))).getOr(p),E=t.data.slice(s,s+a),I=s+a>=t.data.length&&qO(b,Pt(t,t.data.length),u),D=s===0&&GO(b,Pt(t,0),u);t.replaceData(s,a,dT(E,4,D,I))},wk=(t,s,a)=>{const u=t.data.slice(s),p=u.length-ih(u).length;E8(t,s,p,a)},z3=(t,s,a)=>{const u=t.data.slice(0,s),p=u.length-ip(u).length;E8(t,s-p,p,a)},W3=(t,s,a,u,p=!0)=>{const b=ip(t.data).length,E=p?t:s,I=p?s:t;return p?E.appendData(I.data):E.insertData(0,I.data),Vr(Me.fromDom(I)),u&&wk(E,b,a),E},_8=(t,s)=>{const a=t.container(),u=t.offset();return!Pt.isTextPosition(t)&&a===s.parentNode&&u>Pt.before(s).offset()},Nee=(t,s)=>_8(s,t)?Pt(s.container(),s.offset()-1):s,Pee=t=>gn(t)?Pt(t,0):Pt.before(t),w8=t=>gn(t)?Pt(t,t.data.length):Pt.after(t),A8=t=>hi(t.previousSibling)?ce.some(w8(t.previousSibling)):t.previousSibling?Mp(t.previousSibling):ce.none(),G3=t=>hi(t.nextSibling)?ce.some(Pee(t.nextSibling)):t.nextSibling?Hl(t.nextSibling):ce.none(),Lee=(t,s)=>ce.from(s.previousSibling?s.previousSibling:s.parentNode).bind(a=>gu(t,Pt.before(a))).orThunk(()=>Vl(t,Pt.after(s))),Bee=(t,s)=>Vl(t,Pt.after(s)).orThunk(()=>gu(t,Pt.before(s))),Vee=(t,s)=>A8(s).orThunk(()=>G3(s)).orThunk(()=>Lee(t,s)),T8=(t,s)=>G3(s).orThunk(()=>A8(s)).orThunk(()=>Bee(t,s)),q3=(t,s,a)=>t?T8(s,a):Vee(s,a),O8=(t,s,a)=>q3(t,s,a).map($e(Nee,a)),I8=(t,s,a)=>{a.fold(()=>{t.focus()},u=>{t.selection.setRng(u.toRange(),s)})},Hee=t=>s=>s.dom===t,Ak=(t,s)=>s&&ho(t.schema.getBlockElements(),Xo(s)),Fee=(t,s,a)=>{if(uu(t,s)){const u=Me.fromHtml('<br data-mce-bogus="1">');return a?Ue(Oi(s),p=>{ls(p)||Vr(p)}):zd(s),Qs(s,u),ce.some(Pt.before(u.dom))}else return ce.none()},R8=(t,s,a,u)=>{const p=nd(t).filter(dr),b=xl(t).filter(dr);return Vr(t),ou(p,b,s,(E,I,D)=>{const $=E.dom,J=I.dom,te=$.data.length;return W3($,J,a,u),D.container()===J?Pt($,te):D}).orThunk(()=>(u&&(p.each(E=>z3(E.dom,E.dom.length,a)),b.each(E=>wk(E.dom,0,a))),s))},K3=(t,s)=>ho(t.schema.getTextInlineElements(),Xo(s)),u0=(t,s,a,u=!0,p=!1)=>{const b=O8(s,t.getBody(),a.dom),E=yp(a,$e(Ak,t),Hee(t.getBody())),I=R8(a,b,t.schema,K3(t,a));t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):E.bind(D=>Fee(t.schema,D,p)).fold(()=>{u&&I8(t,s,I)},D=>{u&&I8(t,s,ce.some(D))})},$ee=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Uee=t=>$ee.test(t),$v=(t,s)=>Ls(Me.fromDom(s),rO(t))&&!sn(t.schema,s)&&t.dom.isEditable(s),Z3=t=>{var s;return Ir.DOM.getStyle(t,"direction",!0)==="rtl"||Uee((s=t.textContent)!==null&&s!==void 0?s:"")},x8=(t,s,a)=>Oe(Ir.DOM.getParents(a.container(),"*",s),t),d0=(t,s,a)=>{const u=x8(t,s,a);return ce.from(u[u.length-1])},D8=(t,s,a)=>{const u=Dm(s,t),p=Dm(a,t);return be(u)&&u===p},k8=t=>r_(t)||mS(t),Np=(t,s)=>{const a=s.container(),u=s.offset();return t?fr(a)?gn(a.nextSibling)?Pt(a.nextSibling,0):Pt.after(a):r_(s)?Pt(a,u+1):s:fr(a)?gn(a.previousSibling)?Pt(a.previousSibling,a.previousSibling.data.length):Pt.before(a):mS(s)?Pt(a,u-1):s},Y3=$e(Np,!0),J3=$e(Np,!1),X3=(t,s)=>{const a=u=>u.stopImmediatePropagation();t.on("beforeinput input",a,!0),t.getDoc().execCommand(s),t.off("beforeinput input",a)},M8=t=>{t.execCommand("delete")},Tk=t=>X3(t,"Delete"),N8=t=>X3(t,"ForwardDelete"),jee=t=>s=>gr(Rl(s),t,eo),zee=t=>_y(t)||Em(t),Ok=(t,s)=>ur(t,s)?Rr(s,zee,jee(t)):ce.none(),Q3=(t,s=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!s})},P8=(t,s,a)=>Vi(Hl(a),Mp(a),(u,p)=>{const b=Np(!0,u),E=Np(!1,p),I=Np(!1,s);return t?Vl(a,I).exists(D=>D.isEqual(E)&&s.isEqual(b)):gu(a,I).exists(D=>D.isEqual(b)&&s.isEqual(E))}).getOr(!0),L8=t=>(ji(t)?nd(t):ea(t)).bind(L8).orThunk(()=>ce.some(t)),B8=(t,s,a,u=!0)=>{var p;s.deleteContents();const b=L8(a).getOr(a),E=Me.fromDom((p=t.dom.getParent(b.dom,t.dom.isBlock))!==null&&p!==void 0?p:a.dom);if(E.dom===t.getBody()?Q3(t,u):uu(t.schema,E,{checkRootAsContent:!1})&&(_m(E),u&&t.selection.setCursorLocation(E.dom,0)),!eo(a,E)){const I=gr(Rl(E),a)?[]:vr(E);Ue(I.concat(Oi(a)),D=>{!eo(D,E)&&!ur(D,E)&&uu(t.schema,D)&&Vr(D)})}},Wee=t=>s=>eo(t,s),Ik=t=>Ht(t,"td,th"),Gee=(t,s)=>Vy(Me.fromDom(t),s),_0e=t=>Vi(t.startTable,t.endTable,(s,a)=>{const u=cs(s,b=>eo(b,a)),p=cs(a,b=>eo(b,s));return!u&&!p?t:{...t,startTable:u?ce.none():t.startTable,endTable:p?ce.none():t.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(t),qee=t=>_0e(t),w0e=(t,s)=>{const a=Gee(t.startContainer,s),u=Gee(t.endContainer,s),p=a.isSome(),b=u.isSome(),E=Vi(a,u,eo).getOr(!1);return qee({startTable:a,endTable:u,isStartInTable:p,isEndInTable:b,isSameTable:E,isMultiTable:!E&&p&&b})},eB=(t,s)=>({start:t,end:s}),vu=(t,s,a)=>({rng:t,table:s,cells:a}),ZO=eu.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),tB=(t,s)=>Kc(Me.fromDom(t),"td,th",s),V8=t=>!eo(t.start,t.end),H8=(t,s)=>Vy(t.start,s).bind(a=>Vy(t.end,s).bind(u=>bc(eo(a,u),a))),Vf=(t,s)=>!V8(t)&&H8(t,s).exists(a=>{const u=a.dom.rows;return u.length===1&&u[0].cells.length===1}),A0e=(t,s)=>{const a=tB(t.startContainer,s),u=tB(t.endContainer,s);return Vi(a,u,eB)},Kee=t=>s=>Vy(s,t).bind(a=>Dt(Ik(a)).map(u=>eB(s,u))),T0e=t=>s=>Vy(s,t).bind(a=>It(Ik(a)).map(u=>eB(u,s))),nB=t=>s=>H8(s,t).map(a=>vu(s,a,Ik(a))),F8=(t,s,a,u)=>{if(a.collapsed||!t.forall(V8))return ce.none();if(s.isSameTable){const p=t.bind(nB(u));return ce.some({start:p,end:p})}else{const p=tB(a.startContainer,u),b=tB(a.endContainer,u),E=p.bind(Kee(u)).bind(nB(u)),I=b.bind(T0e(u)).bind(nB(u));return ce.some({start:E,end:I})}},Zee=(t,s)=>No(t,a=>eo(a,s)),oB=t=>Vi(Zee(t.cells,t.rng.start),Zee(t.cells,t.rng.end),(s,a)=>t.cells.slice(s,a+1)),Hf=(t,s,a)=>t.exists(u=>Vf(u,a)&&kO(u.start,s)),sB=(t,s)=>{const{startTable:a,endTable:u}=s,p=t.cloneRange();return a.each(b=>p.setStartAfter(b.dom)),u.each(b=>p.setEndBefore(b.dom)),p},$8=(t,s,a,u)=>F8(t,s,a,u).bind(({start:p,end:b})=>p.or(b)).bind(p=>{const{isSameTable:b}=s,E=oB(p).getOr([]);if(b&&p.cells.length===E.length)return ce.some(ZO.fullTable(p.table));if(E.length>0){if(b)return ce.some(ZO.partialTable(E,ce.none()));{const I=sB(a,s);return ce.some(ZO.partialTable(E,ce.some({...s,rng:I})))}}else return ce.none()}),Yee=(t,s,a,u)=>F8(t,s,a,u).bind(({start:p,end:b})=>{const E=p.bind(oB).getOr([]),I=b.bind(oB).getOr([]);if(E.length>0&&I.length>0){const D=sB(a,s);return ce.some(ZO.multiTable(E,I,D))}else return ce.none()}),Jee=(t,s)=>{const a=Wee(t),u=A0e(s,a),p=w0e(s,a);return Hf(u,s,a)?u.map(b=>ZO.singleCellTable(s,b.start)):p.isMultiTable?Yee(u,p,s,a):$8(u,p,s,a)},rB=t=>Ue(t,s=>{da(s,"contenteditable"),_m(s)}),U8=(t,s)=>ce.from(t.dom.getParent(s,t.dom.isBlock)).map(Me.fromDom),Xee=(t,s,a)=>{a.each(u=>{s?Vr(u):(_m(u),t.selection.setCursorLocation(u.dom,0))})},iB=(t,s,a,u)=>{const p=a.cloneRange();u?(p.setStart(a.startContainer,a.startOffset),p.setEndAfter(s.dom.lastChild)):(p.setStartBefore(s.dom.firstChild),p.setEnd(a.endContainer,a.endOffset)),aB(t,p,s,!1).each(b=>b())},j8=t=>{const s=Vv(t),a=Me.fromDom(t.selection.getNode());vm(a.dom)&&uu(t.schema,a)?t.selection.setCursorLocation(a.dom,0):t.selection.collapse(!0),s.length>1&&Kt(s,u=>eo(u,a))&&_i(a,"data-mce-selected","1")},z8=(t,s,a)=>ce.some(()=>{const u=t.selection.getRng(),p=a.bind(({rng:b,isStartInTable:E})=>{const I=U8(t,E?b.endContainer:b.startContainer);b.deleteContents(),Xee(t,E,I.filter($e(uu,t.schema)));const D=E?s[0]:s[s.length-1];return iB(t,D,u,E),uu(t.schema,D)?ce.none():ce.some(E?s.slice(1):s.slice(0,-1))}).getOr(s);rB(p),j8(t)}),W8=(t,s,a,u)=>ce.some(()=>{const p=t.selection.getRng(),b=s[0],E=a[a.length-1];iB(t,b,p,!0),iB(t,E,p,!1);const I=uu(t.schema,b)?s:s.slice(1),D=uu(t.schema,E)?a:a.slice(0,-1);rB(I.concat(D)),u.deleteContents(),j8(t)}),aB=(t,s,a,u=!0)=>ce.some(()=>{B8(t,s,a,u)}),G8=(t,s)=>ce.some(()=>u0(t,!1,s)),Qee=(t,s,a)=>Jee(s,a).bind(u=>u.fold($e(aB,t),$e(G8,t),$e(z8,t),$e(W8,t))),O0e=(t,s)=>qy(t,s),ete=(t,s,a,u)=>cB(s,u).fold(()=>Qee(t,s,a),p=>O0e(t,p)),tte=(t,s,a)=>{const u=Me.fromDom(t.getBody()),p=t.selection.getRng();return a.length!==0?z8(t,a,ce.none()):ete(t,u,p,s)},nte=(t,s)=>gt(zn(s,t),dd),cB=(t,s)=>gt(zn(s,t),ua("caption")),er=(t,s,a,u,p)=>r0(a,t.getBody(),p).bind(b=>nte(s,Me.fromDom(b.getNode())).bind(E=>eo(E,u)?ce.none():ce.some(Ze))),qy=(t,s)=>ce.some(()=>{_m(s),t.selection.setCursorLocation(s.dom,0)}),f0=(t,s,a,u)=>Hl(t.dom).bind(p=>Mp(t.dom).map(b=>s?a.isEqual(p)&&u.isEqual(b):a.isEqual(b)&&u.isEqual(p))).getOr(!0),nC=(t,s)=>qy(t,s),Rk=(t,s,a)=>cB(t,Me.fromDom(a.getNode())).fold(()=>ce.some(Ze),u=>bc(!eo(u,s),Ze)),lB=(t,s,a,u,p)=>r0(a,t.getBody(),p).fold(()=>ce.some(Ze),b=>f0(u,a,p,b)?nC(t,u):Rk(s,u,b)),uB=(t,s,a,u)=>{const p=Pt.fromRangeStart(t.selection.getRng());return nte(a,u).bind(b=>uu(t.schema,b,{checkRootAsContent:!1})?qy(t,b):er(t,a,s,b,p))},q8=(t,s,a,u)=>{const p=Pt.fromRangeStart(t.selection.getRng());return uu(t.schema,u)?qy(t,u):lB(t,a,s,u,p)},K8=(t,s)=>t?a8(s):F3(s),Z8=(t,s)=>{const a=Pt.fromRangeStart(t.selection.getRng());return K8(s,a)||Bl(s,t.getBody(),a).exists(u=>K8(s,u))},Y8=(t,s,a)=>{const u=Me.fromDom(t.getBody());return cB(u,a).fold(()=>uB(t,s,u,a).orThunk(()=>bc(Z8(t,s),Ze)),p=>q8(t,s,u,p))},dB=(t,s)=>{const a=Me.fromDom(t.selection.getStart(!0)),u=Vv(t);return t.selection.isCollapsed()&&u.length===0?Y8(t,s,a):tte(t,a,u)},oC=(t,s)=>{let a=s;for(;a&&a!==t;){if(lu(a)||fi(a))return a;a=a.parentNode}return null},ote=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],ste=yn.each,fB=t=>{const s=t.dom,a=new Set(t.serializer.getTempAttrs()),u=(b,E)=>{if(b.nodeName!==E.nodeName||b.nodeType!==E.nodeType)return!1;const I=$=>{const J={};return ste(s.getAttribs($),te=>{const re=te.nodeName.toLowerCase();re!=="style"&&!p(re)&&(J[re]=s.getAttrib($,re))}),J},D=($,J)=>{for(const te in $)if(ho($,te)){const re=J[te];if(Ne(re)||$[te]!==re)return!1;delete J[te]}for(const te in J)if(ho(J,te))return!1;return!0};return vo(b)&&vo(E)&&(!D(I(b),I(E))||!D(s.parseStyle(s.getAttrib(b,"style")),s.parseStyle(s.getAttrib(E,"style"))))?!1:!hd(b)&&!hd(E)},p=b=>Kt(ote,E=>$o(b,E))||a.has(b);return{compare:u,isAttributeInternal:p}},J8=(t,s)=>{if(gn(t))return{container:t,offset:s};const a=Fg.getNode(t,s);return gn(a)?{container:a,offset:s>=t.childNodes.length?a.data.length:0}:a.previousSibling&&gn(a.previousSibling)?{container:a.previousSibling,offset:a.previousSibling.data.length}:a.nextSibling&&gn(a.nextSibling)?{container:a.nextSibling,offset:0}:{container:t,offset:s}},X8=t=>{const s=t.cloneRange(),a=J8(t.startContainer,t.startOffset);s.setStart(a.container,a.offset);const u=J8(t.endContainer,t.endOffset);return s.setEnd(u.container,u.offset),s},Q_=Ir.DOM,I0e=()=>Q_.create("span",{"data-mce-type":"bookmark"}),rte=(t,s,a)=>{if(vo(t)){const u=a();return t.hasChildNodes()?s===t.childNodes.length?t.appendChild(u):t.insertBefore(u,t.childNodes[s]):t.appendChild(u),{container:u,offset:0}}else return{container:t,offset:s}},ite=(t,s)=>{const a=u=>{var p;let b=(p=u.parentNode)===null||p===void 0?void 0:p.firstChild,E=0;for(;b;){if(b===u)return E;(!vo(b)||b.getAttribute("data-mce-type")!=="bookmark")&&E++,b=b.nextSibling}return-1};if(vo(t)&&be(t.parentNode)){const u=t;s=a(t),t=t.parentNode,Q_.remove(u),!t.hasChildNodes()&&Q_.isBlock(t)&&t.appendChild(Q_.create("br"))}return{container:t,offset:s}},Q8=(t,s,a,u)=>{const p=Q_.createRng();return p.setStart(t,s),p.setEnd(a,u),X8(p)},Ky=(t,s=I0e)=>{const{container:a,offset:u}=rte(t.startContainer,t.startOffset,s);if(t.collapsed)return{startContainer:a,startOffset:u};{const{container:p,offset:b}=rte(t.endContainer,t.endOffset,s);return{startContainer:a,startOffset:u,endContainer:p,endOffset:b}}},Zy=t=>{const{container:s,offset:a}=ite(t.startContainer,t.startOffset);if(!Ne(t.endContainer)&&!Ne(t.endOffset)){const{container:u,offset:p}=ite(t.endContainer,t.endOffset);return Q8(s,a,u,p)}else return Q8(s,a,s,a)},e7=(t,s,a,u)=>{if(yn.each(a.styles,(p,b)=>{t.setStyle(s,b,g(p,u))}),a.styles){const p=t.getAttrib(s,"style");p&&t.setAttrib(s,"data-mce-style",p)}},ew=(t,s,a,u,p)=>{const b=t.dom;me(a.onformat)&&a.onformat(s,a,u,p),e7(b,s,a,u),yn.each(a.attributes,(E,I)=>{b.setAttrib(s,I,g(E,u))}),yn.each(a.classes,E=>{const I=g(E,u);b.hasClass(s,I)||b.addClass(s,I)})},R0e=t=>!le(t.attributes)&&!le(t.styles),pB=C,md=(t,s,a)=>{const u=t.formatter.get(a);if(u)for(let p=0;p<u.length;p++){const b=u[p];if(Fn(b)&&b.inherit===!1&&t.dom.is(s,b.selector))return!0}return!1},t7=(t,s,a,u,p)=>{const b=t.dom.getRoot();if(s===b)return!1;const E=t.dom.getParent(s,I=>md(t,I,a)?!0:I.parentNode===b||!!Fm(t,I,a,u,!0));return!!Fm(t,E,a,u,p)},xk=(t,s,a)=>On(a)&&pB(s,a.inline)||Ge(a)&&pB(s,a.block)?!0:Fn(a)?vo(s)&&t.is(s,a.selector):!1,hB=(t,s,a,u,p,b)=>{const E=a[u],I=u==="attributes";if(me(a.onmatch))return a.onmatch(s,a,u);if(E){if(gf(E)){for(let D=0;D<E.length;D++)if(I?t.getAttrib(s,E[D]):P(t,s,E[D]))return!0}else for(const D in E)if(ho(E,D)){const $=I?t.getAttrib(s,D):P(t,s,D),J=g(E[D],b),te=De($)||ec($);if(te&&De(J))continue;if(p&&te&&!a.exact||(!p||a.exact)&&!pB($,O(J,D)))return!1}}return!0},Fm=(t,s,a,u,p)=>{const b=t.formatter.get(a),E=t.dom;if(b&&vo(s))for(let I=0;I<b.length;I++){const D=b[I];if(xk(t.dom,s,D)&&hB(E,s,D,"attributes",p,u)&&hB(E,s,D,"styles",p,u)){const $=D.classes;if($){for(let J=0;J<$.length;J++)if(!t.dom.hasClass(s,g($[J],u)))return}return D}}},mB=(t,s,a,u,p)=>{if(u)return t7(t,u,s,a,p);if(u=t.selection.getNode(),t7(t,u,s,a,p))return!0;const b=t.selection.getStart();return!!(b!==u&&t7(t,b,s,a,p))},ate=(t,s,a)=>{const u=[],p={},b=t.selection.getStart();return t.dom.getParent(b,E=>{for(let I=0;I<s.length;I++){const D=s[I];!p[D]&&Fm(t,E,D,a)&&(p[D]=!0,u.push(D))}},t.dom.getRoot()),u},cte=(t,s)=>{const a=p=>eo(p,Me.fromDom(t.getBody())),u=(p,b)=>Fm(t,p.dom,b)?ce.some(b):ce.none();return ce.from(t.selection.getStart(!0)).bind(p=>Dl(Me.fromDom(p),b=>$n(s,E=>u(b,E)),a)).getOrNull()},gB=(t,s)=>{const a=t.formatter.get(s),u=t.dom;if(a&&t.selection.isEditable()){const p=t.selection.getStart(),b=ee(u,p);for(let E=a.length-1;E>=0;E--){const I=a[E];if(!Fn(I))return!0;for(let D=b.length-1;D>=0;D--)if(u.is(b[D],I.selector))return!0}}return!1},x0e=(t,s,a)=>tn(a,(u,p)=>{const b=ye(t,p);return t.formatter.matchNode(s,p,{},b)?u.concat([p]):u},[]),YO=Va,lte=(t,s)=>t.importNode(s,!0),qr=t=>{if(t){const s=new Kr(t,t);for(let a=s.current();a;a=s.next())if(gn(a))return a}return null},vB=t=>{const s=Me.fromTag("span");return Ac(s,{id:Lg,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&Qs(s,Me.fromText(YO)),s},ute=t=>{const s=qr(t);return s&&s.data.charAt(0)===YO&&s.deleteData(0,1),s},sC=(t,s,a)=>{const u=t.dom,p=t.selection;if(Bo(s))u0(t,!1,Me.fromDom(s),a,!0);else{const b=p.getRng(),E=u.getParent(s,u.isBlock),I=b.startContainer,D=b.startOffset,$=b.endContainer,J=b.endOffset,te=ute(s);u.remove(s,!0),I===te&&D>0&&b.setStart(te,D-1),$===te&&J>0&&b.setEnd(te,J-1),E&&u.isEmpty(E)&&_m(Me.fromDom(E)),p.setRng(b)}},Dk=(t,s,a)=>{const u=t.dom,p=t.selection;if(s)sC(t,s,a);else if(s=Pm(t.getBody(),p.getStart()),!s)for(;s=u.get(Lg);)sC(t,s,a)},dte=(t,s,a)=>{var u,p;const b=t.dom,E=b.getParent(a,$e(BO,t.schema));E&&b.isEmpty(E)?(u=a.parentNode)===null||u===void 0||u.replaceChild(s,a):(MT(Me.fromDom(a)),b.isEmpty(a)?(p=a.parentNode)===null||p===void 0||p.replaceChild(s,a):b.insertAfter(s,a))},n7=(t,s)=>(t.appendChild(s),s),o7=(t,s)=>{var a;const u=Bt(t,(b,E)=>n7(b,E.cloneNode(!1)),s),p=(a=u.ownerDocument)!==null&&a!==void 0?a:document;return n7(u,p.createTextNode(YO))},s7=(t,s,a,u,p,b)=>{const E=t.formatter,I=t.dom,D=Oe(Vt(E.get()),te=>te!==u&&!ii(te,"removeformat")),$=x0e(t,a,D);if(Oe($,te=>!xe(t,te,u)).length>0){const te=a.cloneNode(!1);return I.add(s,te),E.remove(u,p,te,b),I.remove(te),ce.some(te)}else return ce.none()},r7=t=>X1(t,qc(t).replace(new RegExp(`${ci}$`)," ")),fte=(t,s)=>{const a=()=>{s!==null&&!t.dom.isEmpty(s)&&nd(Me.fromDom(s)).each(u=>{dr(u)?r7(u):mv(u,p=>dr(p)).each(p=>{dr(p)&&r7(p)})})};t.once("input",u=>{u.data&&!a0(u.data)&&(u.isComposing?t.once("compositionend",()=>{a()}):a())})},D0e=(t,s,a)=>{let u;const p=t.selection,b=t.formatter.get(s);if(!b)return;const E=p.getRng();let I=E.startOffset;const $=E.startContainer.nodeValue;u=Pm(t.getBody(),p.getStart());const J=/[^\s\u00a0\u00ad\u200b\ufeff]/;if($&&I>0&&I<$.length&&J.test($.charAt(I))&&J.test($.charAt(I-1))){const te=p.getBookmark();E.collapse(!0);let re=Fa(t.dom,E,b);re=uk(re),t.formatter.apply(s,a,re),p.moveToBookmark(te)}else{let te=u?qr(u):null;(!u||(te==null?void 0:te.data)!==YO)&&(u=lte(t.getDoc(),vB(!0).dom),te=u.firstChild,E.insertNode(u),I=1,fte(t,u)),t.formatter.apply(s,a,u),p.setCursorLocation(te,I)}},pte=(t,s,a,u)=>{const p=t.dom,b=t.selection;let E=!1;const I=t.formatter.get(s);if(!I)return;const D=b.getRng(),$=D.startContainer,J=D.startOffset;let te=$;gn($)&&(J!==$.data.length&&(E=!0),te=te.parentNode);const re=[];let fe;for(;te;){if(Fm(t,te,s,a,u)){fe=te;break}te.nextSibling&&(E=!0),re.push(te),te=te.parentNode}if(fe)if(E){const Re=b.getBookmark();D.collapse(!0);let Ae=Fa(p,D,I,{includeTrailingSpace:!0});Ae=uk(Ae),t.formatter.remove(s,a,Ae,u),b.moveToBookmark(Re)}else{const Re=Pm(t.getBody(),fe),Ae=be(Re)?p.getParents(fe.parentNode,Jt,Re):[],_e=vB(!1).dom;dte(t,_e,Re??fe);const Qe=s7(t,_e,fe,s,a,u),et=o7([...re,...Qe.toArray(),...Ae],_e);Re&&sC(t,Re,be(Re)),b.setCursorLocation(et,1),fte(t,_e),p.isEmpty(fe)&&p.remove(fe)}},hte=(t,s,a)=>{const u=t.selection,p=t.getBody();Dk(t,null,a),(s===8||s===46)&&u.isCollapsed()&&u.getStart().innerHTML===YO&&Dk(t,Pm(p,u.getStart()),!0),(s===37||s===39)&&Dk(t,Pm(p,u.getStart()),!0)},mte=t=>gn(t)&&ai(t.data,ci),gte=t=>{t.on("mouseup keydown",s=>{hte(t,s.keyCode,mte(t.selection.getRng().endContainer))})},bB=t=>{const s=vB(!1),a=o7(t,s.dom);return{caretContainer:s,caretPosition:Pt(a,0)}},i7=(t,s)=>{const{caretContainer:a,caretPosition:u}=bB(s);return wc(Me.fromDom(t),a),Vr(Me.fromDom(t)),u},Vs=(t,s)=>{const{caretContainer:a,caretPosition:u}=bB(s);return t.insertNode(a.dom),u},yB=(t,s)=>{if(Vu(s.dom))return!1;const a=t.schema.getTextInlineElements();return ho(a,Xo(s))&&!Vu(s.dom)&&!Tb(s.dom)},tw=["fontWeight","fontStyle","color","fontSize","fontFamily"],JO=t=>se(t.styles)&&Kt(Vt(t.styles),s=>bt(tw,s)),XO=t=>gt(t,s=>On(s)&&s.inline==="span"&&JO(s)),nw=(t,s)=>{const a=t.get(s);return le(a)?XO(a):ce.none()},SB=(t,s)=>gu(s,Pt.fromRangeStart(t)).isNone(),vte=(t,s)=>Vl(s,Pt.fromRangeEnd(t)).exists(a=>!Ri(a.getNode())||Vl(s,a).isSome())===!1,bte=t=>s=>bT(s)&&t.isEditable(s),k0e=t=>{const s=t.getSelectedBlocks(),a=t.getRng();if(t.isCollapsed())return[];if(s.length===1)return SB(a,s[0])&&vte(a,s[0])?s:[];{const u=It(s).filter(E=>SB(a,E)).toArray(),p=Dt(s).filter(E=>vte(a,E)).toArray(),b=s.slice(1,-1);return u.concat(b).concat(p)}},M0e=t=>Oe(k0e(t),bte(t.dom)),a7=t=>Oe(t.getSelectedBlocks(),bte(t.dom)),c7=yn.each,CB=t=>vo(t)&&!hd(t)&&!Vu(t)&&!Tb(t),l7=(t,s)=>{for(let a=t;a;a=a[s]){if(gn(a)&&Ar(a.data))return t;if(vo(a)&&!hd(a))return a}return t},yte=(t,s,a)=>{const u=fB(t),p=di(s)&&t.dom.isEditable(s),b=di(a)&&t.dom.isEditable(a);if(p&&b){const E=l7(s,"previousSibling"),I=l7(a,"nextSibling");if(u.compare(E,I)){for(let D=E.nextSibling;D&&D!==I;){const $=D;D=D.nextSibling,E.appendChild($)}return t.dom.remove(I),yn.each(yn.grep(I.childNodes),D=>{E.appendChild(D)}),E}}return a},u7=(t,s,a,u)=>{var p;if(u&&s.merge_siblings!==!1){const b=(p=yte(t,JD(u),u))!==null&&p!==void 0?p:u;yte(t,b,JD(b,!0))}},vi=(t,s,a)=>{if(s.clear_child_styles){const u=s.links?"*:not(a)":"*";c7(t.select(u,a),p=>{CB(p)&&t.isEditable(p)&&c7(s.styles,(b,E)=>{t.setStyle(p,E,"")})})}},d7=(t,s,a)=>{c7(t.childNodes,u=>{CB(u)&&(s(u)&&a(u),u.hasChildNodes()&&d7(u,s,a))})},N0e=(t,s)=>{s.nodeName==="SPAN"&&t.getAttribs(s).length===0&&t.remove(s,!0)},f7=(t,s)=>a=>!!(a&&P(t,a,s)),ow=(t,s,a)=>u=>{t.setStyle(u,s,a),u.getAttribute("style")===""&&u.removeAttribute("style"),N0e(t,u)},rC=eu.generate([{keep:[]},{rename:["name"]},{removed:[]}]),Ste=/^(src|href|style)$/,$g=yn.each,tr=C,Mc=t=>/^(TR|TH|TD)$/.test(t.nodeName),Ug=(t,s,a)=>t.isChildOf(s,a)&&s!==a&&!t.isBlock(a),p7=(t,s,a)=>{let u=s[a?"startContainer":"endContainer"],p=s[a?"startOffset":"endOffset"];if(vo(u)){const b=u.childNodes.length-1;!a&&p&&p--,u=u.childNodes[p>b?b:p]}return gn(u)&&a&&p>=u.data.length&&(u=new Kr(u,t.getBody()).next()||u),gn(u)&&!a&&p===0&&(u=new Kr(u,t.getBody()).prev()||u),u},h7=(t,s)=>{const a=s?"firstChild":"lastChild",u=t[a];return Mc(t)&&u?t.nodeName==="TR"&&u[a]||u:t},EB=(t,s,a,u)=>{var p;const b=t.create(a,u);return(p=s.parentNode)===null||p===void 0||p.insertBefore(b,s),b.appendChild(s),b},m7=(t,s,a,u,p)=>{const b=Me.fromDom(s),E=Me.fromDom(t.create(u,p)),I=a?ja(b):rc(b);return rd(E,I),a?(wc(b,E),mp(E,b)):(sd(b,E),Qs(E,b)),E.dom},g7=(t,s)=>s.links&&t.nodeName==="A",sw=(t,s,a)=>{const u=s.parentNode;let p;const b=t.dom,E=Qc(t);Ge(a)&&u===b.getRoot()&&(!a.list_block||!tr(s,a.list_block))&&Ue(Nn(s.childNodes),I=>{Hy(t,E,I.nodeName.toLowerCase())?p?p.appendChild(I):(p=EB(b,I,E),b.setAttribs(p,Dy(t))):p=null}),!(Oo(a)&&!tr(a.inline,s))&&b.remove(s,!0)},_B=(t,s,a)=>Ye(t)?{name:s,value:null}:{name:t,value:g(s,a)},wB=(t,s)=>{t.getAttrib(s,"style")===""&&(s.removeAttribute("style"),s.removeAttribute("data-mce-style"))},v7=(t,s,a,u,p)=>{let b=!1;$g(a.styles,(E,I)=>{const{name:D,value:$}=_B(I,E,u),J=O($,D);(a.remove_similar||M($)||!vo(p)||tr(P(t,p,D),J))&&t.setStyle(s,D,""),b=!0}),b&&wB(t,s)},Cte=(t,s,a)=>{s==="removeformat"?Ue(a7(t.selection),u=>{Ue(tw,p=>t.dom.setStyle(u,p,"")),wB(t.dom,u)}):nw(t.formatter,s).each(u=>{Ue(a7(t.selection),p=>v7(t.dom,p,u,a,null))})},AB=(t,s,a,u,p)=>{const b=t.dom,E=fB(t),I=t.schema;if(On(s)&&fl(I,s.inline)&&sn(I,u)&&u.parentElement===t.getBody())return sw(t,u,s),rC.removed();if(!s.ceFalseOverride&&u&&b.getContentEditableParent(u)==="false"||u&&!xk(b,u,s)&&!g7(u,s))return rC.keep();const D=u,$=s.preserve_attributes;if(On(s)&&s.remove==="all"&&le($)){const J=Oe(b.getAttribs(D),te=>bt($,te.name.toLowerCase()));if(b.removeAllAttribs(D),Ue(J,te=>b.setAttrib(D,te.name,te.value)),J.length>0)return rC.rename("span")}if(s.remove!=="all"){v7(b,D,s,a,p),$g(s.attributes,(te,re)=>{const{name:fe,value:Re}=_B(re,te,a);if(s.remove_similar||M(Re)||!vo(p)||tr(b.getAttrib(p,fe),Re)){if(fe==="class"){const Ae=b.getAttrib(D,fe);if(Ae){let _e="";if(Ue(Ae.split(/\s+/),Qe=>{/mce\-\w+/.test(Qe)&&(_e+=(_e?" ":"")+Qe)}),_e){b.setAttrib(D,fe,_e);return}}}if(Ste.test(fe)&&D.removeAttribute("data-mce-"+fe),fe==="style"&&Oc(["li"])(D)&&b.getStyle(D,"list-style-type")==="none"){D.removeAttribute(fe),b.setStyle(D,"list-style-type","none");return}fe==="class"&&D.removeAttribute("className"),D.removeAttribute(fe)}}),$g(s.classes,te=>{te=g(te,a),(!vo(p)||b.hasClass(p,te))&&b.removeClass(D,te)});const J=b.getAttribs(D);for(let te=0;te<J.length;te++){const re=J[te].nodeName;if(!E.isAttributeInternal(re))return rC.keep()}}return s.remove!=="none"?(sw(t,D,s),rC.removed()):rC.keep()},b7=(t,s,a,u,p)=>{let b;return s.parentNode&&Ue(ee(t.dom,s.parentNode).reverse(),E=>{if(!b&&vo(E)&&E.id!=="_start"&&E.id!=="_end"){const I=Fm(t,E,a,u,p);I&&I.split!==!1&&(b=E)}}),b},Ete=(t,s,a,u)=>AB(t,s,a,u,u).fold(Be(u),p=>(t.dom.createFragment().appendChild(u),t.dom.rename(u,p)),Be(null)),_te=(t,s,a,u,p,b,E,I)=>{var D,$;let J,te;const re=t.dom;if(a){const fe=a.parentNode;for(let Re=u.parentNode;Re&&Re!==fe;Re=Re.parentNode){let Ae=re.clone(Re,!1);for(let _e=0;_e<s.length&&(Ae=Ete(t,s[_e],I,Ae),Ae!==null);_e++);Ae&&(J&&Ae.appendChild(J),te||(te=Ae),J=Ae)}(!E.mixed||!re.isBlock(a))&&(u=(D=re.split(a,u))!==null&&D!==void 0?D:u),J&&te&&(($=p.parentNode)===null||$===void 0||$.insertBefore(J,p),te.appendChild(p),On(E)&&u7(t,E,I,J))}return u},wte=(t,s,a,u,p)=>{const b=t.formatter.get(s),E=b[0],I=t.dom,D=t.selection,$=Ae=>{const _e=b7(t,Ae,s,a,p);return _te(t,b,_e,Ae,Ae,!0,E,a)},J=Ae=>hd(Ae)&&vo(Ae)&&(Ae.id==="_start"||Ae.id==="_end"),te=Ae=>Kt(b,_e=>rw(t,_e,a,Ae,Ae)),re=Ae=>{const _e=Nn(Ae.childNodes),et=te(Ae)||Kt(b,Qt=>xk(I,Ae,Qt)),ut=Ae.parentNode;if(!et&&be(ut)&&zt(E)&&te(ut),E.deep&&_e.length)for(let Qt=0;Qt<_e.length;Qt++)re(_e[Qt]);Ue(["underline","line-through","overline"],Qt=>{vo(Ae)&&t.dom.getStyle(Ae,"text-decoration")===Qt&&Ae.parentNode&&G(I,Ae.parentNode)===Qt&&rw(t,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Qt}},void 0,Ae)})},fe=Ae=>{const _e=I.get(Ae?"_start":"_end");if(_e){let Qe=_e[Ae?"firstChild":"lastChild"];return J(Qe)&&(Qe=Qe[Ae?"firstChild":"lastChild"]),gn(Qe)&&Qe.data.length===0&&(Qe=Ae?_e.previousSibling||_e.nextSibling:_e.nextSibling||_e.previousSibling),I.remove(_e,!0),Qe}else return null},Re=Ae=>{let _e,Qe,et=Fa(I,Ae,b,{includeTrailingSpace:Ae.collapsed});if(E.split){if(et=uk(et),_e=p7(t,et,!0),Qe=p7(t,et),_e!==Qe){if(_e=h7(_e,!0),Qe=h7(Qe,!1),Ug(I,_e,Qe)){const _t=ce.from(_e.firstChild).getOr(_e);$(m7(I,_t,!0,"span",{id:"_start","data-mce-type":"bookmark"})),fe(!0);return}if(Ug(I,Qe,_e)){const _t=ce.from(Qe.lastChild).getOr(Qe);$(m7(I,_t,!1,"span",{id:"_end","data-mce-type":"bookmark"})),fe(!1);return}_e=EB(I,_e,"span",{id:"_start","data-mce-type":"bookmark"}),Qe=EB(I,Qe,"span",{id:"_end","data-mce-type":"bookmark"});const ut=I.createRng();ut.setStartAfter(_e),ut.setEndBefore(Qe),Fy(I,ut,_t=>{Ue(_t,Qt=>{!hd(Qt)&&!hd(Qt.parentNode)&&$(Qt)})}),$(_e),$(Qe),_e=fe(!0),Qe=fe()}else _e=Qe=$(_e);et.startContainer=_e.parentNode?_e.parentNode:_e,et.startOffset=I.nodeIndex(_e),et.endContainer=Qe.parentNode?Qe.parentNode:Qe,et.endOffset=I.nodeIndex(Qe)+1}Fy(I,et,ut=>{Ue(ut,re)})};if(u){if(ZS(u)){const Ae=I.createRng();Ae.setStartBefore(u),Ae.setEndAfter(u),Re(Ae)}else Re(u);eD(t,s,u,a);return}!D.isCollapsed()||!On(E)||Vv(t).length?(Y_(t,()=>MO(t,Re),Ae=>On(E)&&mB(t,s,a,Ae)),t.nodeChanged()):pte(t,s,a,p),Cte(t,s,a),eD(t,s,u,a)},y7=(t,s,a,u,p)=>{(u||t.selection.isEditable())&&wte(t,s,a,u,p)},TB=(t,s,a,u)=>AB(t,s,a,u).fold(()=>ce.some(u),p=>ce.some(t.dom.rename(u,p)),ce.none),rw=(t,s,a,u,p)=>AB(t,s,a,u,p).fold(Et,b=>(t.dom.rename(u,b),!0),Jt),kk=["fontsize","subscript","superscript"],P0e=["strikethrough",...kk],zl=(t,s,a)=>be(t.matchNode(s.dom,a,{},a==="fontsize")),OB=(t,s)=>Kt(kk,a=>zl(t,s,a)),L0e=t=>bt(P0e,t),Ate=(t,s,a,u,p)=>{const b=Wc(s,t).filter(ki);return Ko(b,a).map(E=>{const I=b[E],D=u(I),$=[...p(pa(I)).toArray(),...Jn(b.slice(0,E),J=>a(J)?p(J).toArray():[pa(J)])];return{container:I,innerWrapper:D,outerWrappers:$}})},Tte=(t,s,a,u)=>{Ue(Oi(t),p=>{ki(p)&&a(p)&&u(p).isNone()&&ru(p)}),Ue(Oi(t),p=>Qs(s,p)),mp(t,s)},Ote=(t,s)=>{if(s.length>0){const a=s[s.length-1];wc(t,a);const u=tn(s.slice(0,s.length-1),(p,b)=>(Qs(p,b),b),a);Qs(u,t)}},Ite=(t,s,a,u,p)=>{const b=E=>eo(Me.fromDom(t.getRoot()),E)||t.isBlock(E.dom);Ue(s,E=>{Ate(b,E,a,u,p).each(({container:I,innerWrapper:D,outerWrappers:$})=>{t.split(I.dom,E.dom),Tte(E,D,a,p),Ote(E,$)})})},IB=(t,s,a)=>{const u=I=>be(Fm(t,I.dom,s)),p=I=>{const D=Me.fromTag(Xo(I)),$=Fm(t,I.dom,s,{});return be($)&&R0e($)&&ew(t,D.dom,$),D},b=I=>{const D=Fm(t,I.dom,s,{});return be(D)?TB(t,D,{},I.dom).map(Me.fromDom):ce.some(I)},E=Ky(t.selection.getRng());Ite(t.dom,a,u,p,b),t.selection.setRng(Zy(E))},QO=(t,s)=>Jn(s,a=>{const u=Ie(a,p=>OB(t,p));return OB(t,a)?[a,...u]:u}),Rte=(t,s,a)=>{if(L0e(s)){const u=QO(t.formatter,a);IB(t,"strikethrough",u)}},S7=(t,s)=>{const a=Oe(s,u=>OB(t.formatter,u));IB(t,"strikethrough",a)},C7=t=>["h1","h2","h3","h4","h5","h6"].includes(t.name),iC=t=>t.name==="summary",E7=(t,s)=>{let a=t;for(;a=a.walk();)s(a)},RB=(t,s,a,u)=>{const p=a.name;for(let b=0,E=t.length;b<E;b++){const I=t[b];if(I.name===p){const D=u.nodes[p];D?D.nodes.push(a):u.nodes[p]={filter:I,nodes:[a]}}}if(a.attributes)for(let b=0,E=s.length;b<E;b++){const I=s[b],D=I.name;if(D in a.attributes.map){const $=u.attributes[D];$?$.nodes.push(a):u.attributes[D]={filter:I,nodes:[a]}}}},_7=(t,s,a)=>{const u={nodes:{},attributes:{}};return a.firstChild&&E7(a,p=>{RB(t,s,p,u)}),u},xB=(t,s)=>{const a=(u,p)=>{wn(u,b=>{const E=Nn(b.nodes);Ue(b.filter.callbacks,I=>{for(let D=E.length-1;D>=0;D--){const $=E[D];(!(p?$.attr(b.filter.name)!==void 0:$.name===b.filter.name)||De($.parent))&&E.splice(D,1)}E.length>0&&I(E,b.filter.name,s)})})};a(t.nodes,!1),a(t.attributes,!0)},DB=(t,s,a,u={})=>{const p=_7(t,s,a);xB(p,u)},kB=(t,s,a,u)=>{if((t.pad_empty_with_br||s.insert)&&a(u)){const b=new Fu("br",1);s.insert&&b.attr("data-mce-bogus","1"),u.empty().append(b)}else u.empty().append(new Fu("#text",3)).value=ci},w7=t=>{var s;return A7(t,"#text")&&((s=t==null?void 0:t.firstChild)===null||s===void 0?void 0:s.value)===ci},A7=(t,s)=>{const a=t==null?void 0:t.firstChild;return be(a)&&a===t.lastChild&&a.name===s},xte=(t,s)=>{const a=t.getElementRule(s.name);return(a==null?void 0:a.paddEmpty)===!0},eI=(t,s,a,u)=>u.isEmpty(s,a,p=>xte(t,p)),Dte=(t,s)=>be(t)&&(s(t)||t.name==="br"),kte=t=>{let s;for(let a=t;a;a=a.parent){const u=a.attr("contenteditable");if(u==="false")break;u==="true"&&(s=a)}return ce.from(s)},B0e=t=>{const s=[];for(let a=t.firstChild;be(a);a=a.walk())s.push(a);return s},MB=(t,s,a=t.parent)=>{if(s.getSpecialElements()[t.name])t.empty().remove();else{const u=t.children();for(const p of u)a&&!s.isValidChild(a.name,p.name)&&MB(p,s,a);t.unwrap()}},T7=(t,s,a,u=Ze)=>{const p=s.getTextBlockElements(),b=s.getNonEmptyElements(),E=s.getWhitespaceElements(),I=yn.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),D=new Set,$=J=>J!==a&&!I[J.name];for(let J=0;J<t.length;J++){const te=t[J];let re,fe,Re;if(!te.parent||D.has(te))continue;if(p[te.name]&&te.parent.name==="li"){let _e=te.next;for(;_e&&p[_e.name];){_e.name="li",D.add(_e),te.parent.insert(_e,te.parent);_e=_e.next}te.unwrap();continue}const Ae=[te];for(re=te.parent;re&&!s.isValidChild(re.name,te.name)&&$(re);re=re.parent)Ae.push(re);if(re&&Ae.length>1)if(NB(s,te,re))MB(te,s);else{Ae.reverse(),fe=Ae[0].clone(),u(fe);let _e=fe;for(let Qe=0;Qe<Ae.length-1;Qe++){s.isValidChild(_e.name,Ae[Qe].name)&&Qe>0?(Re=Ae[Qe].clone(),u(Re),_e.append(Re)):Re=_e;for(let et=Ae[Qe].firstChild;et&&et!==Ae[Qe+1];){const ut=et.next;Re.append(et),et=ut}_e=Re}eI(s,b,E,fe)?re.insert(te,Ae[0],!0):(re.insert(fe,Ae[0],!0),re.insert(te,fe)),re=Ae[0],(eI(s,b,E,re)||A7(re,"br"))&&re.empty().remove()}else if(te.parent){if(te.name==="li"){let _e=te.prev;if(_e&&(_e.name==="ul"||_e.name==="ol")){_e.append(te);continue}if(_e=te.next,_e&&(_e.name==="ul"||_e.name==="ol")&&_e.firstChild){_e.insert(te,_e.firstChild,!0);continue}const Qe=new Fu("ul",1);u(Qe),te.wrap(Qe);continue}if(s.isValidChild(te.parent.name,"div")&&s.isValidChild("div",te.name)){const _e=new Fu("div",1);u(_e),te.wrap(_e)}else MB(te,s)}}},V0e=(t,s)=>{let a=t;for(;a;){if(a.name===s)return!0;a=a.parent}return!1},NB=(t,s,a=s.parent)=>a?t.children[s.name]&&!t.isValidChild(a.name,s.name)||s.name==="a"&&V0e(a,"a")?!0:iC(a)&&C7(s)?!((a==null?void 0:a.firstChild)===s&&(a==null?void 0:a.lastChild)===s):!1:!1,PB=(t,s,a,u)=>{const p=document.createRange();return p.setStart(t,s),p.setEnd(a,u),p},LB=t=>{const s=Pt.fromRangeStart(t),a=Pt.fromRangeEnd(t),u=t.commonAncestorContainer;return Bl(!1,u,a).map(p=>!km(s,a,u)&&km(s,p,u)?PB(s.container(),s.offset(),p.container(),p.offset()):t).getOr(t)},Mk=t=>t.collapsed?t:LB(t),Mte=yn.explode,O7=()=>{const t={};return{addFilter:(p,b)=>{Ue(Mte(p),E=>{ho(t,E)||(t[E]={name:E,callbacks:[]}),t[E].callbacks.push(b)})},getFilters:()=>Yr(t),removeFilter:(p,b)=>{Ue(Mte(p),E=>{if(ho(t,E))if(be(b)){const I=t[E],D=Oe(I.callbacks,$=>$!==b);D.length>0?I.callbacks=D:delete t[E]}else delete t[E]})}}},Nte=t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Pte=t=>t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),Lte=(t,s)=>{Ue(s,a=>{t.attr(a,null)})},Bte=(t,s,a)=>{t.addNodeFilter("font",u=>{Ue(u,p=>{const b=s.parse(p.attr("style")),E=p.attr("color"),I=p.attr("face"),D=p.attr("size");E&&(b.color=E),I&&(b["font-family"]=I),D&&im(D).each($=>{b["font-size"]=a[$-1]}),p.name="span",p.attr("style",s.serialize(b)),Lte(p,["color","face","size"])})})},Vte=(t,s,a)=>{t.addNodeFilter("strike",u=>{const p=s.type!=="html4";Ue(u,b=>{if(p)b.name="s";else{const E=a.parse(b.attr("style"));E["text-decoration"]="line-through",b.name="span",b.attr("style",a.serialize(E))}})})},Hte=(t,s,a)=>{var u;const p=Hb();s.convert_fonts_to_spans&&Bte(t,p,yn.explode((u=s.font_size_legacy_values)!==null&&u!==void 0?u:"")),Vte(t,a,p)},I7=(t,s,a)=>{s.inline_styles&&Hte(t,s,a)},Fte=t=>fetch(t).then(s=>s.ok?s.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${t} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),$te=t=>{const s=/([a-z0-9+\/=\s]+)/i.exec(t);return s?s[1]:""},p0=t=>{try{return decodeURIComponent(t)}catch{return t}},BB=t=>{const[s,...a]=t.split(","),u=a.join(","),p=/data:([^/]+\/[^;]+)(;.+)?/.exec(s);if(p){const b=p[2]===";base64",E=p0(u),I=b?$te(E):E;return ce.some({type:p[1],data:I,base64Encoded:b})}else return ce.none()},VB=(t,s,a=!0)=>{let u=s;if(a)try{u=atob(s)}catch{return ce.none()}const p=new Uint8Array(u.length);for(let b=0;b<p.length;b++)p[b]=u.charCodeAt(b);return ce.some(new Blob([p],{type:t}))},Ute=t=>new Promise((s,a)=>{BB(t).bind(({type:u,data:p,base64Encoded:b})=>VB(u,p,b)).fold(()=>a("Invalid data URI"),s)}),jte=t=>$o(t,"blob:")?Fte(t):$o(t,"data:")?Ute(t):Promise.reject("Unknown URI format"),HB=t=>new Promise((s,a)=>{const u=new FileReader;u.onloadend=()=>{s(u.result)},u.onerror=()=>{var p;a((p=u.error)===null||p===void 0?void 0:p.message)},u.readAsDataURL(t)});let R7=0;const x7=t=>"blobid"+R7++,FB=(t,s,a)=>BB(t).bind(({data:u,type:p,base64Encoded:b})=>{if(s&&!b)return ce.none();{const E=b?u:btoa(u);return a(E,p)}}),D7=(t,s,a)=>{const u=t.create(x7(),s,a);return t.add(u),u},k7=(t,s,a=!1)=>FB(s,a,(u,p)=>ce.from(t.getByData(u,p)).orThunk(()=>VB(p,u).map(b=>D7(t,b,u)))),zte=(t,s)=>{const a=()=>Promise.reject("Invalid data URI");if($o(s,"blob:")){const u=t.getByUri(s);return be(u)?Promise.resolve(u):jte(s).then(p=>HB(p).then(b=>FB(b,!1,E=>ce.some(D7(t,p,E))).getOrThunk(a)))}else return $o(s,"data:")?k7(t,s).fold(a,u=>Promise.resolve(u)):Promise.reject("Unknown image data format")},Wte=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,Gte=t=>ce.from(t.match(Wte)).bind(s=>ft(s,1)).map(s=>$o(s,"www.")?s.substring(4):s),Yy=(t,s)=>{ce.from(t.attr("src")).bind(Gte).forall(a=>!bt(s,a))&&t.attr("sandbox","")},Nk=(t,s)=>$o(t,`${s}/`),qte=t=>Ne(t)?"iframe":Nk(t,"image")?"img":Nk(t,"video")?"video":Nk(t,"audio")?"audio":"iframe",Kte=({type:t,src:s,width:a,height:u}={},p,b)=>{const E=qte(t),I=new Fu(E,1);return I.attr(E==="audio"?{src:s}:{src:s,width:a,height:u}),(E==="audio"||E==="video")&&I.attr("controls",""),E==="iframe"&&p&&Yy(I,b),I},$B=t=>be(t.attr("data-mce-bogus")),Zte=t=>t.attr("src")===$s.transparentSrc||be(t.attr("data-mce-placeholder")),UB=(t,s)=>{const{blob_cache:a}=s;if(a){const u=p=>{const b=p.attr("src");Zte(p)||$B(p)||De(b)||k7(a,b,!0).each(E=>{p.attr("src",E.blobUri())})};t.addAttributeFilter("src",p=>Ue(p,u))}},M7=(t,s)=>{var a,u;const p=t.schema;t.addAttributeFilter("href",D=>{let $=D.length;const J=re=>re.split(" ").filter(Re=>Re.length>0).concat(["noopener"]).sort().join(" "),te=re=>{const fe=re?yn.trim(re):"";return/\b(noopener)\b/g.test(fe)?fe:J(fe)};if(!s.allow_unsafe_link_target)for(;$--;){const re=D[$];re.name==="a"&&re.attr("target")==="_blank"&&re.attr("rel",te(re.attr("rel")))}}),s.allow_html_in_named_anchor||t.addAttributeFilter("id,name",D=>{let $=D.length,J,te,re,fe;for(;$--;)if(fe=D[$],fe.name==="a"&&fe.firstChild&&!fe.attr("href"))for(re=fe.parent,J=fe.lastChild;J&&re;)te=J.prev,re.insert(J,fe),J=te}),s.fix_list_elements&&t.addNodeFilter("ul,ol",D=>{let $=D.length,J,te;for(;$--;)if(J=D[$],te=J.parent,te&&(te.name==="ul"||te.name==="ol"))if(J.prev&&J.prev.name==="li")J.prev.append(J);else{const re=new Fu("li",1);re.attr("style","list-style-type: none"),J.wrap(re)}});const b=p.getValidClasses();s.validate&&b&&t.addAttributeFilter("class",D=>{var $;let J=D.length;for(;J--;){const te=D[J],re=($=te.attr("class"))!==null&&$!==void 0?$:"",fe=yn.explode(re," ");let Re="";for(let Ae=0;Ae<fe.length;Ae++){const _e=fe[Ae];let Qe=!1,et=b["*"];et&&et[_e]&&(Qe=!0),et=b[te.name],!Qe&&et&&et[_e]&&(Qe=!0),Qe&&(Re&&(Re+=" "),Re+=_e)}Re.length||(Re=null),te.attr("class",Re)}}),UB(t,s);const E=(a=s.sandbox_iframes)!==null&&a!==void 0?a:!1,I=lo((u=s.sandbox_iframes_exclusions)!==null&&u!==void 0?u:[]);s.convert_unsafe_embeds&&t.addNodeFilter("object,embed",D=>Ue(D,$=>{$.replace(Kte({type:$.attr("type"),src:$.name==="object"?$.attr("data"):$.attr("src"),width:$.attr("width"),height:$.attr("height")},E,I))})),E&&t.addNodeFilter("iframe",D=>Ue(D,$=>Yy($,I)))};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:N7,setPrototypeOf:P7,isFrozen:Pk,getPrototypeOf:Yte,getOwnPropertyDescriptor:L7}=Object;let{freeze:Ff,seal:Mh,create:jB}=Object,{apply:Lk,construct:zB}=typeof Reflect<"u"&&Reflect;Ff||(Ff=function(s){return s}),Mh||(Mh=function(s){return s}),Lk||(Lk=function(s,a,u){return s.apply(a,u)}),zB||(zB=function(s,a){return new s(...a)});const tI=Uf(Array.prototype.forEach),Jte=Uf(Array.prototype.lastIndexOf),B7=Uf(Array.prototype.pop),nI=Uf(Array.prototype.push),$f=Uf(Array.prototype.splice),oI=Uf(String.prototype.toLowerCase),WB=Uf(String.prototype.toString),GB=Uf(String.prototype.match),sI=Uf(String.prototype.replace),Xte=Uf(String.prototype.indexOf),Qte=Uf(String.prototype.trim),tf=Uf(Object.prototype.hasOwnProperty),Wl=Uf(RegExp.prototype.test),Bk=ene(TypeError);function Uf(t){return function(s){s instanceof RegExp&&(s.lastIndex=0);for(var a=arguments.length,u=new Array(a>1?a-1:0),p=1;p<a;p++)u[p-1]=arguments[p];return Lk(t,s,u)}}function ene(t){return function(){for(var s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];return zB(t,a)}}function pr(t,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oI;P7&&P7(t,null);let u=s.length;for(;u--;){let p=s[u];if(typeof p=="string"){const b=a(p);b!==p&&(Pk(s)||(s[u]=b),p=b)}t[p]=!0}return t}function tne(t){for(let s=0;s<t.length;s++)tf(t,s)||(t[s]=null);return t}function h0(t){const s=jB(null);for(const[a,u]of N7(t))tf(t,a)&&(Array.isArray(u)?s[a]=tne(u):u&&typeof u=="object"&&u.constructor===Object?s[a]=h0(u):s[a]=u);return s}function Jy(t,s){for(;t!==null;){const u=L7(t,s);if(u){if(u.get)return Uf(u.get);if(typeof u.value=="function")return Uf(u.value)}t=Yte(t)}function a(){return null}return a}const V7=Ff(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),rI=Ff(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),iI=Ff(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),H7=Ff(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),qB=Ff(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),H0e=Ff(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),m0=Ff(["#text"]),F7=Ff(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),KB=Ff(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),$7=Ff(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ws=Ff(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),nne=Mh(/\{\{[\w\W]*|[\w\W]*\}\}/gm),one=Mh(/<%[\w\W]*|[\w\W]*%>/gm),U7=Mh(/\$\{[\w\W]*/gm),sne=Mh(/^data-[\-\w.\u00B7-\uFFFF]+$/),rne=Mh(/^aria-[\-\w]+$/),ra=Mh(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ine=Mh(/^(?:\w+script|data):/i),ane=Mh(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),j7=Mh(/^html$/i),cne=Mh(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ni=Object.freeze({__proto__:null,ARIA_ATTR:rne,ATTR_WHITESPACE:ane,CUSTOM_ELEMENT:cne,DATA_ATTR:sne,DOCTYPE_NAME:j7,ERB_EXPR:one,IS_ALLOWED_URI:ra,IS_SCRIPT_OR_DATA:ine,MUSTACHE_EXPR:nne,TMPLIT_EXPR:U7});const iw={element:1,text:3,progressingInstruction:7,comment:8,document:9},z7=function(){return typeof window>"u"?null:window},lne=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let u=null;const p="data-tt-policy-suffix";a&&a.hasAttribute(p)&&(u=a.getAttribute(p));const b="dompurify"+(u?"#"+u:"");try{return s.createPolicy(b,{createHTML(E){return E},createScriptURL(E){return E}})}catch{return console.warn("TrustedTypes policy "+b+" could not be created."),null}},ZB=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function W7(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:z7();const s=Us=>W7(Us);if(s.version="3.2.6",s.removed=[],!t||!t.document||t.document.nodeType!==iw.document||!t.Element)return s.isSupported=!1,s;let{document:a}=t;const u=a,p=u.currentScript,{DocumentFragment:b,HTMLTemplateElement:E,Node:I,Element:D,NodeFilter:$,NamedNodeMap:J=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:te,DOMParser:re,trustedTypes:fe}=t,Re=D.prototype,Ae=Jy(Re,"cloneNode"),_e=Jy(Re,"remove"),Qe=Jy(Re,"nextSibling"),et=Jy(Re,"childNodes"),ut=Jy(Re,"parentNode");if(typeof E=="function"){const Us=a.createElement("template");Us.content&&Us.content.ownerDocument&&(a=Us.content.ownerDocument)}let _t,Qt="";const{implementation:Mn,createNodeIterator:bn,createDocumentFragment:Wt,getElementsByTagName:ct}=a,{importNode:ke}=u;let wt=ZB();s.isSupported=typeof N7=="function"&&typeof ut=="function"&&Mn&&Mn.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:vn,ERB_EXPR:Ao,TMPLIT_EXPR:ss,DATA_ATTR:ks,ARIA_ATTR:Gs,IS_SCRIPT_OR_DATA:Pi,ATTR_WHITESPACE:Li,CUSTOM_ELEMENT:gl}=Ni;let{IS_ALLOWED_URI:In}=Ni,Io=null;const or=pr({},[...V7,...rI,...iI,...qB,...m0]);let Er=null;const Eo=pr({},[...F7,...KB,...$7,...ws]);let Dn=Object.seal(jB(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Xn=null,Go=null,rs=!0,Nr=!0,ni=!1,jh=!0,ql=!1,Zg=!0,Zm=!1,of=!1,Yf=!1,Yg=!1,zw=!1,Ho=!1,sr=!0,Aa=!1;const el="user-content-";let vl=!0,Nc=!1,aa={},ca=null;const Jf=pr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Jv=null;const g1=pr({},["audio","video","img","source","image","track"]);let R0=null;const rP=pr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),iP="http://www.w3.org/1998/Math/MathML",TR="http://www.w3.org/2000/svg",Xv="http://www.w3.org/1999/xhtml";let Ww=Xv,Q$=!1,aP=null;const uye=pr({},[iP,TR,Xv],WB);let eU=pr({},["mi","mo","mn","ms","mtext"]),tU=pr({},["annotation-xml"]);const dye=pr({},["title","style","font","a","script"]);let cP=null;const Gw=["application/xhtml+xml","text/html"],uZ="text/html";let St=null,kt=null;const Gn=a.createElement("form"),Bn=function(Mt){return Mt instanceof RegExp||Mt instanceof Function},Zo=function(){let Mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(kt&&kt===Mt)){if((!Mt||typeof Mt!="object")&&(Mt={}),Mt=h0(Mt),cP=Gw.indexOf(Mt.PARSER_MEDIA_TYPE)===-1?uZ:Mt.PARSER_MEDIA_TYPE,St=cP==="application/xhtml+xml"?WB:oI,Io=tf(Mt,"ALLOWED_TAGS")?pr({},Mt.ALLOWED_TAGS,St):or,Er=tf(Mt,"ALLOWED_ATTR")?pr({},Mt.ALLOWED_ATTR,St):Eo,aP=tf(Mt,"ALLOWED_NAMESPACES")?pr({},Mt.ALLOWED_NAMESPACES,WB):uye,R0=tf(Mt,"ADD_URI_SAFE_ATTR")?pr(h0(rP),Mt.ADD_URI_SAFE_ATTR,St):rP,Jv=tf(Mt,"ADD_DATA_URI_TAGS")?pr(h0(g1),Mt.ADD_DATA_URI_TAGS,St):g1,ca=tf(Mt,"FORBID_CONTENTS")?pr({},Mt.FORBID_CONTENTS,St):Jf,Xn=tf(Mt,"FORBID_TAGS")?pr({},Mt.FORBID_TAGS,St):h0({}),Go=tf(Mt,"FORBID_ATTR")?pr({},Mt.FORBID_ATTR,St):h0({}),aa=tf(Mt,"USE_PROFILES")?Mt.USE_PROFILES:!1,rs=Mt.ALLOW_ARIA_ATTR!==!1,Nr=Mt.ALLOW_DATA_ATTR!==!1,ni=Mt.ALLOW_UNKNOWN_PROTOCOLS||!1,jh=Mt.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ql=Mt.SAFE_FOR_TEMPLATES||!1,Zg=Mt.SAFE_FOR_XML!==!1,Zm=Mt.WHOLE_DOCUMENT||!1,Yg=Mt.RETURN_DOM||!1,zw=Mt.RETURN_DOM_FRAGMENT||!1,Ho=Mt.RETURN_TRUSTED_TYPE||!1,Yf=Mt.FORCE_BODY||!1,sr=Mt.SANITIZE_DOM!==!1,Aa=Mt.SANITIZE_NAMED_PROPS||!1,vl=Mt.KEEP_CONTENT!==!1,Nc=Mt.IN_PLACE||!1,In=Mt.ALLOWED_URI_REGEXP||ra,Ww=Mt.NAMESPACE||Xv,eU=Mt.MATHML_TEXT_INTEGRATION_POINTS||eU,tU=Mt.HTML_INTEGRATION_POINTS||tU,Dn=Mt.CUSTOM_ELEMENT_HANDLING||{},Mt.CUSTOM_ELEMENT_HANDLING&&Bn(Mt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Dn.tagNameCheck=Mt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Mt.CUSTOM_ELEMENT_HANDLING&&Bn(Mt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Dn.attributeNameCheck=Mt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Mt.CUSTOM_ELEMENT_HANDLING&&typeof Mt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Dn.allowCustomizedBuiltInElements=Mt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ql&&(Nr=!1),zw&&(Yg=!0),aa&&(Io=pr({},m0),Er=[],aa.html===!0&&(pr(Io,V7),pr(Er,F7)),aa.svg===!0&&(pr(Io,rI),pr(Er,KB),pr(Er,ws)),aa.svgFilters===!0&&(pr(Io,iI),pr(Er,KB),pr(Er,ws)),aa.mathMl===!0&&(pr(Io,qB),pr(Er,$7),pr(Er,ws))),Mt.ADD_TAGS&&(Io===or&&(Io=h0(Io)),pr(Io,Mt.ADD_TAGS,St)),Mt.ADD_ATTR&&(Er===Eo&&(Er=h0(Er)),pr(Er,Mt.ADD_ATTR,St)),Mt.ADD_URI_SAFE_ATTR&&pr(R0,Mt.ADD_URI_SAFE_ATTR,St),Mt.FORBID_CONTENTS&&(ca===Jf&&(ca=h0(ca)),pr(ca,Mt.FORBID_CONTENTS,St)),vl&&(Io["#text"]=!0),Zm&&pr(Io,["html","head","body"]),Io.table&&(pr(Io,["tbody"]),delete Xn.tbody),Mt.TRUSTED_TYPES_POLICY){if(typeof Mt.TRUSTED_TYPES_POLICY.createHTML!="function")throw Bk('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Mt.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Bk('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');_t=Mt.TRUSTED_TYPES_POLICY,Qt=_t.createHTML("")}else _t===void 0&&(_t=lne(fe,p)),_t!==null&&typeof Qt=="string"&&(Qt=_t.createHTML(""));Ff&&Ff(Mt),kt=Mt}},hr=pr({},[...rI,...iI,...H7]),Ta=pr({},[...qB,...H0e]),x0=function(Mt){let Mo=ut(Mt);(!Mo||!Mo.tagName)&&(Mo={namespaceURI:Ww,tagName:"template"});const Ms=oI(Mt.tagName),tl=oI(Mo.tagName);return aP[Mt.namespaceURI]?Mt.namespaceURI===TR?Mo.namespaceURI===Xv?Ms==="svg":Mo.namespaceURI===iP?Ms==="svg"&&(tl==="annotation-xml"||eU[tl]):!!hr[Ms]:Mt.namespaceURI===iP?Mo.namespaceURI===Xv?Ms==="math":Mo.namespaceURI===TR?Ms==="math"&&tU[tl]:!!Ta[Ms]:Mt.namespaceURI===Xv?Mo.namespaceURI===TR&&!tU[tl]||Mo.namespaceURI===iP&&!eU[tl]?!1:!Ta[Ms]&&(dye[Ms]||!hr[Ms]):!!(cP==="application/xhtml+xml"&&aP[Mt.namespaceURI]):!1},Qv=function(Mt){nI(s.removed,{element:Mt});try{ut(Mt).removeChild(Mt)}catch{_e(Mt)}},lP=function(Mt,Mo){try{nI(s.removed,{attribute:Mo.getAttributeNode(Mt),from:Mo})}catch{nI(s.removed,{attribute:null,from:Mo})}if(Mo.removeAttribute(Mt),Mt==="is")if(Yg||zw)try{Qv(Mo)}catch{}else try{Mo.setAttribute(Mt,"")}catch{}},fye=function(Mt){let Mo=null,Ms=null;if(Yf)Mt="<remove></remove>"+Mt;else{const yd=GB(Mt,/^[\r\n\t ]+/);Ms=yd&&yd[0]}cP==="application/xhtml+xml"&&Ww===Xv&&(Mt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Mt+"</body></html>");const tl=_t?_t.createHTML(Mt):Mt;if(Ww===Xv)try{Mo=new re().parseFromString(tl,cP)}catch{}if(!Mo||!Mo.documentElement){Mo=Mn.createDocument(Ww,"template",null);try{Mo.documentElement.innerHTML=Q$?Qt:tl}catch{}}const $p=Mo.body||Mo.documentElement;return Mt&&Ms&&$p.insertBefore(a.createTextNode(Ms),$p.childNodes[0]||null),Ww===Xv?ct.call(Mo,Zm?"html":"body")[0]:Zm?Mo.documentElement:$p},pye=function(Mt){return bn.call(Mt.ownerDocument||Mt,Mt,$.SHOW_ELEMENT|$.SHOW_COMMENT|$.SHOW_TEXT|$.SHOW_PROCESSING_INSTRUCTION|$.SHOW_CDATA_SECTION,null)},Yde=function(Mt){return Mt instanceof te&&(typeof Mt.nodeName!="string"||typeof Mt.textContent!="string"||typeof Mt.removeChild!="function"||!(Mt.attributes instanceof J)||typeof Mt.removeAttribute!="function"||typeof Mt.setAttribute!="function"||typeof Mt.namespaceURI!="string"||typeof Mt.insertBefore!="function"||typeof Mt.hasChildNodes!="function")},hye=function(Mt){return typeof I=="function"&&Mt instanceof I};function BC(Us,Mt,Mo){tI(Us,Ms=>{Ms.call(s,Mt,Mo,kt)})}const mye=function(Mt){let Mo=null;if(BC(wt.beforeSanitizeElements,Mt,null),Yde(Mt))return Qv(Mt),!0;const Ms=St(Mt.nodeName);if(BC(wt.uponSanitizeElement,Mt,{tagName:Ms,allowedTags:Io}),Zg&&Mt.hasChildNodes()&&!hye(Mt.firstElementChild)&&Wl(/<[/\w!]/g,Mt.innerHTML)&&Wl(/<[/\w!]/g,Mt.textContent)||Mt.nodeType===iw.progressingInstruction||Zg&&Mt.nodeType===iw.comment&&Wl(/<[/\w]/g,Mt.data))return Qv(Mt),!0;if(!Io[Ms]||Xn[Ms]){if(!Xn[Ms]&&vye(Ms)&&(Dn.tagNameCheck instanceof RegExp&&Wl(Dn.tagNameCheck,Ms)||Dn.tagNameCheck instanceof Function&&Dn.tagNameCheck(Ms)))return!1;if(vl&&!ca[Ms]){const tl=ut(Mt)||Mt.parentNode,$p=et(Mt)||Mt.childNodes;if($p&&tl){const yd=$p.length;for(let Ym=yd-1;Ym>=0;--Ym){const VC=Ae($p[Ym],!0);VC.__removalCount=(Mt.__removalCount||0)+1,tl.insertBefore(VC,Qe(Mt))}}}return Qv(Mt),!0}return Mt instanceof D&&!x0(Mt)||(Ms==="noscript"||Ms==="noembed"||Ms==="noframes")&&Wl(/<\/no(script|embed|frames)/i,Mt.innerHTML)?(Qv(Mt),!0):(ql&&Mt.nodeType===iw.text&&(Mo=Mt.textContent,tI([vn,Ao,ss],tl=>{Mo=sI(Mo,tl," ")}),Mt.textContent!==Mo&&(nI(s.removed,{element:Mt.cloneNode()}),Mt.textContent=Mo)),BC(wt.afterSanitizeElements,Mt,null),!1)},gye=function(Mt,Mo,Ms){if(sr&&(Mo==="id"||Mo==="name")&&(Ms in a||Ms in Gn))return!1;if(!(Nr&&!Go[Mo]&&Wl(ks,Mo))){if(!(rs&&Wl(Gs,Mo))){if(!Er[Mo]||Go[Mo]){if(!(vye(Mt)&&(Dn.tagNameCheck instanceof RegExp&&Wl(Dn.tagNameCheck,Mt)||Dn.tagNameCheck instanceof Function&&Dn.tagNameCheck(Mt))&&(Dn.attributeNameCheck instanceof RegExp&&Wl(Dn.attributeNameCheck,Mo)||Dn.attributeNameCheck instanceof Function&&Dn.attributeNameCheck(Mo))||Mo==="is"&&Dn.allowCustomizedBuiltInElements&&(Dn.tagNameCheck instanceof RegExp&&Wl(Dn.tagNameCheck,Ms)||Dn.tagNameCheck instanceof Function&&Dn.tagNameCheck(Ms))))return!1}else if(!R0[Mo]){if(!Wl(In,sI(Ms,Li,""))){if(!((Mo==="src"||Mo==="xlink:href"||Mo==="href")&&Mt!=="script"&&Xte(Ms,"data:")===0&&Jv[Mt])){if(!(ni&&!Wl(Pi,sI(Ms,Li,"")))){if(Ms)return!1}}}}}}return!0},vye=function(Mt){return Mt!=="annotation-xml"&&GB(Mt,gl)},bye=function(Mt){BC(wt.beforeSanitizeAttributes,Mt,null);const{attributes:Mo}=Mt;if(!Mo||Yde(Mt))return;const Ms={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Er,forceKeepAttr:void 0};let tl=Mo.length;for(;tl--;){const $p=Mo[tl],{name:yd,namespaceURI:Ym,value:VC}=$p,nU=St(yd),Jde=VC;let Up=yd==="value"?Jde:Qte(Jde);if(Ms.attrName=nU,Ms.attrValue=Up,Ms.keepAttr=!0,Ms.forceKeepAttr=void 0,BC(wt.uponSanitizeAttribute,Mt,Ms),Up=Ms.attrValue,Aa&&(nU==="id"||nU==="name")&&(lP(yd,Mt),Up=el+Up),Zg&&Wl(/((--!?|])>)|<\/(style|title)/i,Up)){lP(yd,Mt);continue}if(Ms.forceKeepAttr)continue;if(!Ms.keepAttr){lP(yd,Mt);continue}if(!jh&&Wl(/\/>/i,Up)){lP(yd,Mt);continue}ql&&tI([vn,Ao,ss],Sye=>{Up=sI(Up,Sye," ")});const yye=St(Mt.nodeName);if(!gye(yye,nU,Up)){lP(yd,Mt);continue}if(_t&&typeof fe=="object"&&typeof fe.getAttributeType=="function"&&!Ym)switch(fe.getAttributeType(yye,nU)){case"TrustedHTML":{Up=_t.createHTML(Up);break}case"TrustedScriptURL":{Up=_t.createScriptURL(Up);break}}if(Up!==Jde)try{Ym?Mt.setAttributeNS(Ym,yd,Up):Mt.setAttribute(yd,Up),Yde(Mt)?Qv(Mt):B7(s.removed)}catch{lP(yd,Mt)}}BC(wt.afterSanitizeAttributes,Mt,null)},lLe=function Us(Mt){let Mo=null;const Ms=pye(Mt);for(BC(wt.beforeSanitizeShadowDOM,Mt,null);Mo=Ms.nextNode();)BC(wt.uponSanitizeShadowNode,Mo,null),mye(Mo),bye(Mo),Mo.content instanceof b&&Us(Mo.content);BC(wt.afterSanitizeShadowDOM,Mt,null)};return s.sanitize=function(Us){let Mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Mo=null,Ms=null,tl=null,$p=null;if(Q$=!Us,Q$&&(Us="<!-->"),typeof Us!="string"&&!hye(Us))if(typeof Us.toString=="function"){if(Us=Us.toString(),typeof Us!="string")throw Bk("dirty is not a string, aborting")}else throw Bk("toString is not a function");if(!s.isSupported)return Us;if(of||Zo(Mt),s.removed=[],typeof Us=="string"&&(Nc=!1),Nc){if(Us.nodeName){const VC=St(Us.nodeName);if(!Io[VC]||Xn[VC])throw Bk("root node is forbidden and cannot be sanitized in-place")}}else if(Us instanceof I)Mo=fye("<!---->"),Ms=Mo.ownerDocument.importNode(Us,!0),Ms.nodeType===iw.element&&Ms.nodeName==="BODY"||Ms.nodeName==="HTML"?Mo=Ms:Mo.appendChild(Ms);else{if(!Yg&&!ql&&!Zm&&Us.indexOf("<")===-1)return _t&&Ho?_t.createHTML(Us):Us;if(Mo=fye(Us),!Mo)return Yg?null:Ho?Qt:""}Mo&&Yf&&Qv(Mo.firstChild);const yd=pye(Nc?Us:Mo);for(;tl=yd.nextNode();)mye(tl),bye(tl),tl.content instanceof b&&lLe(tl.content);if(Nc)return Us;if(Yg){if(zw)for($p=Wt.call(Mo.ownerDocument);Mo.firstChild;)$p.appendChild(Mo.firstChild);else $p=Mo;return(Er.shadowroot||Er.shadowrootmode)&&($p=ke.call(u,$p,!0)),$p}let Ym=Zm?Mo.outerHTML:Mo.innerHTML;return Zm&&Io["!doctype"]&&Mo.ownerDocument&&Mo.ownerDocument.doctype&&Mo.ownerDocument.doctype.name&&Wl(j7,Mo.ownerDocument.doctype.name)&&(Ym="<!DOCTYPE "+Mo.ownerDocument.doctype.name+`>
`+Ym),ql&&tI([vn,Ao,ss],VC=>{Ym=sI(Ym,VC," ")}),_t&&Ho?_t.createHTML(Ym):Ym},s.setConfig=function(){let Us=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Zo(Us),of=!0},s.clearConfig=function(){kt=null,of=!1},s.isValidAttribute=function(Us,Mt,Mo){kt||Zo({});const Ms=St(Us),tl=St(Mt);return gye(Ms,tl,Mo)},s.addHook=function(Us,Mt){typeof Mt=="function"&&nI(wt[Us],Mt)},s.removeHook=function(Us,Mt){if(Mt!==void 0){const Mo=Jte(wt[Us],Mt);return Mo===-1?void 0:$f(wt[Us],Mo,1)[0]}return B7(wt[Us])},s.removeHooks=function(Us){wt[Us]=[]},s.removeAllHooks=function(){wt=ZB()},s}var jg=W7();const Vk=yn.each,une=yn.trim,dne=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],YB={ftp:21,http:80,https:443,mailto:25},fne=["img","video"],pne=(t,s)=>be(t)?!t:be(s)?!bt(fne,s):!0,dc=t=>{try{return decodeURIComponent(t)}catch{return unescape(t)}},G7=(t,s,a)=>{const u=dc(s).replace(/\s/g,"");return t.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(u)?!0:t.allow_html_data_urls?!1:/^data:image\//i.test(u)?pne(t.allow_svg_data_urls,a)&&/^data:image\/svg\+xml/i.test(u):/^data:/i.test(u)};class bu{static parseDataUri(s){let a;const u=decodeURIComponent(s).split(","),p=/data:([^;]+)/.exec(u[0]);return p&&(a=p[1]),{type:a,data:u[1]}}static isDomSafe(s,a,u={}){if(u.allow_script_urls)return!0;{const p=Db.decode(s).replace(/[\s\u0000-\u001F]+/g,"");return!G7(u,p,a)}}static getDocumentBaseUrl(s){var a;let u;return s.protocol.indexOf("http")!==0&&s.protocol!=="file:"?u=(a=s.href)!==null&&a!==void 0?a:"":u=s.protocol+"//"+s.host+s.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(u)&&(u=u.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(u)||(u+="/")),u}constructor(s,a={}){this.path="",this.directory="",s=une(s),this.settings=a;const u=a.base_uri,p=this;if(/^([\w\-]+):([^\/]{2})/i.test(s)||/^\s*#/.test(s)){p.source=s;return}const b=s.indexOf("//")===0;if(s.indexOf("/")===0&&!b&&(s=(u&&u.protocol||"http")+"://mce_host"+s),!/^[\w\-]*:?\/\//.test(s)){const I=u?u.path:new bu(document.location.href).directory;if((u==null?void 0:u.protocol)==="")s="//mce_host"+p.toAbsPath(I,s);else{const D=/([^#?]*)([#?]?.*)/.exec(s);D&&(s=(u&&u.protocol||"http")+"://mce_host"+p.toAbsPath(I,D[1])+D[2])}}s=s.replace(/@@/g,"(mce_at)");const E=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(s);E&&Vk(dne,(I,D)=>{let $=E[D];$&&($=$.replace(/\(mce_at\)/g,"@@")),p[I]=$}),u&&(p.protocol||(p.protocol=u.protocol),p.userInfo||(p.userInfo=u.userInfo),!p.port&&p.host==="mce_host"&&(p.port=u.port),(!p.host||p.host==="mce_host")&&(p.host=u.host),p.source=""),b&&(p.protocol="")}setPath(s){const a=/^(.*?)\/?(\w+)?$/.exec(s);a&&(this.path=a[0],this.directory=a[1],this.file=a[2]),this.source="",this.getURI()}toRelative(s){if(s==="./")return s;const a=new bu(s,{base_uri:this});if(a.host!=="mce_host"&&this.host!==a.host&&a.host||this.port!==a.port||this.protocol!==a.protocol&&a.protocol!=="")return a.getURI();const u=this.getURI(),p=a.getURI();if(u===p||u.charAt(u.length-1)==="/"&&u.substr(0,u.length-1)===p)return u;let b=this.toRelPath(this.path,a.path);return a.query&&(b+="?"+a.query),a.anchor&&(b+="#"+a.anchor),b}toAbsolute(s,a){const u=new bu(s,{base_uri:this});return u.getURI(a&&this.isSameOrigin(u))}isSameOrigin(s){if(this.host==s.host&&this.protocol==s.protocol){if(this.port==s.port)return!0;const a=this.protocol?YB[this.protocol]:null;if(a&&(this.port||a)==(s.port||a))return!0}return!1}toRelPath(s,a){let u=0,p="",b,E;const I=s.substring(0,s.lastIndexOf("/")).split("/"),D=a.split("/");if(I.length>=D.length){for(b=0,E=I.length;b<E;b++)if(b>=D.length||I[b]!==D[b]){u=b+1;break}}if(I.length<D.length){for(b=0,E=D.length;b<E;b++)if(b>=I.length||I[b]!==D[b]){u=b+1;break}}if(u===1)return a;for(b=0,E=I.length-(u-1);b<E;b++)p+="../";for(b=u-1,E=D.length;b<E;b++)b!==u-1?p+="/"+D[b]:p+=D[b];return p}toAbsPath(s,a){let u=0;const p=/\/$/.test(a)?"/":"",b=s.split("/"),E=a.split("/"),I=[];Vk(b,te=>{te&&I.push(te)});const D=[];for(let te=E.length-1;te>=0;te--)if(!(E[te].length===0||E[te]===".")){if(E[te]===".."){u++;continue}if(u>0){u--;continue}D.push(E[te])}const $=I.length-u;let J;return $<=0?J=ps(D).join("/"):J=I.slice(0,$).join("/")+"/"+ps(D).join("/"),J.indexOf("/")!==0&&(J="/"+J),p&&J.lastIndexOf("/")!==J.length-1&&(J+=p),J}getURI(s=!1){let a;return(!this.source||s)&&(a="",s||(this.protocol?a+=this.protocol+"://":a+="//",this.userInfo&&(a+=this.userInfo+"@"),this.host&&(a+=this.host),this.port&&(a+=":"+this.port)),this.path&&(a+=this.path),this.query&&(a+="?"+this.query),this.anchor&&(a+="#"+this.anchor),this.source=a),this.source}}const hne=yn.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),JB="data-mce-type";let q7=0;const K7=(t,s,a,u,p)=>{var b,E,I,D;const $=s.validate,J=a.getSpecialElements();t.nodeType===Sn&&(!s.allow_conditional_comments&&/^\[if/i.test((b=t.nodeValue)!==null&&b!==void 0?b:"")&&(t.nodeValue=" "+t.nodeValue),s.sanitize&&s.allow_html_in_comments&&K(t.nodeValue)&&(t.nodeValue=Nte(t.nodeValue)));const te=(E=p==null?void 0:p.tagName)!==null&&E!==void 0?E:t.nodeName.toLowerCase();if(u!=="html"&&a.isValid(u)){be(p)&&(p.allowedTags[te]=!0);return}if(t.nodeType!==ds||te==="body")return;const re=Me.fromDom(t),fe=li(re,JB),Re=Xr(re,"data-mce-bogus");if(!fe&&K(Re)){Re==="all"?Vr(re):ru(re);return}const Ae=a.getElementRule(te);if($&&!Ae){ho(J,te)?Vr(re):ru(re);return}else be(p)&&(p.allowedTags[te]=!0);if($&&Ae&&!fe){if(Ue((I=Ae.attributesForced)!==null&&I!==void 0?I:[],_e=>{_i(re,_e.name,_e.value==="{$uid}"?`mce_${q7++}`:_e.value)}),Ue((D=Ae.attributesDefault)!==null&&D!==void 0?D:[],_e=>{li(re,_e.name)||_i(re,_e.name,_e.value==="{$uid}"?`mce_${q7++}`:_e.value)}),Ae.attributesRequired&&!Kt(Ae.attributesRequired,_e=>li(re,_e))){ru(re);return}if(Ae.removeEmptyAttrs&&uv(re)){ru(re);return}Ae.outputName&&Ae.outputName!==te&&uh(re,Ae.outputName)}},mne=(t,s,a,u,p)=>{const b=t.tagName.toLowerCase(),{attrName:E,attrValue:I}=p;p.keepAttr=Z7(s,a,u,b,E,I),p.keepAttr?(p.allowedAttributes[E]=!0,J7(E,a)&&(p.attrValue=E),s.allow_svg_data_urls&&$o(I,"data:image/svg+xml")&&(p.forceKeepAttr=!0)):Y7(t,E)&&(p.forceKeepAttr=!0)},Z7=(t,s,a,u,p,b)=>a!=="html"&&!du(u)?!0:!(p in hne&&G7(t,b,u))&&(!t.validate||s.isValid(u,p)||$o(p,"data-")||$o(p,"aria-")),Y7=(t,s)=>t.hasAttribute(JB)&&(s==="id"||s==="class"||s==="style"),J7=(t,s)=>t in s.getBoolAttrs(),gne=(t,s,a,u)=>{const{attributes:p}=t;for(let b=p.length-1;b>=0;b--){const E=p[b],I=E.name,D=E.value;!Z7(s,a,u,t.tagName.toLowerCase(),I,D)&&!Y7(t,I)?t.removeAttribute(I):J7(I,a)&&t.setAttribute(I,I)}},Hk=(t,s,a)=>{const u=jg();return u.addHook("uponSanitizeElement",(p,b)=>{K7(p,t,s,a.track(p),b)}),u.addHook("uponSanitizeAttribute",(p,b)=>{mne(p,t,s,a.current(),b)}),u},vne=(t,s)=>{const u={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body","html"],ALLOWED_ATTR:[]}};return u.PARSER_MEDIA_TYPE=s,t.allow_script_urls?u.ALLOWED_URI_REGEXP=/.*/:t.allow_html_data_urls&&(u.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),u},bne=t=>{const s=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(u=>`xlink:${u}`),a={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:s};jg().sanitize(t,a)},F0e=(t,s)=>{const a={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},u=jg(),p=s.allow_mathml_annotation_encodings,b=le(p)&&p.length>0,E=D=>{const $=D.getAttribute("encoding");return b&&K($)&&bt(p,$)},I=(D,$)=>b&&$==="semantics"?ce.some(!0):$==="annotation"?ce.some(vo(D)&&E(D)):le(s.extended_mathml_elements)&&s.extended_mathml_elements.includes($)?ce.from(!0):ce.none();u.addHook("uponSanitizeElement",(D,$)=>{var J;const te=(J=$.tagName)!==null&&J!==void 0?J:D.nodeName.toLowerCase();I(D,te).each(fe=>{$.allowedTags[te]=fe,!fe&&s.sanitize&&vo(D)&&D.remove()})}),u.addHook("uponSanitizeAttribute",(D,$)=>{le(s.extended_mathml_attributes)&&s.extended_mathml_attributes.includes($.attrName)&&($.forceKeepAttr=!0)}),u.sanitize(t,a)},aI=t=>s=>{const a=ax(s);if(a==="svg")bne(s);else if(a==="math")F0e(s,t);else throw new Error("Not a namespace element")},yne=(t,s)=>{const a=BE();if(t.sanitize){const u=Hk(t,s,a);return{sanitizeHtmlElement:(b,E)=>{u.sanitize(b,vne(t,E)),u.removed=[],a.reset()},sanitizeNamespaceElement:aI(t)}}else return{sanitizeHtmlElement:(b,E)=>{const I=document.createNodeIterator(b,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let D;for(;D=I.nextNode();){const $=a.track(D);K7(D,t,s,$),vo(D)&&gne(D,t,s,$)}a.reset()},sanitizeNamespaceElement:Ze}},Fk=["script","style","template","param"],X7=yn.makeMap,Q7=yn.extend,ej=(t,s,a,u,p)=>{const b=t.name,E=b in a&&b!=="title"&&b!=="textarea"&&b!=="noscript",I=s.childNodes;for(let D=0,$=I.length;D<$;D++){const J=I[D],te=new Fu(J.nodeName.toLowerCase(),J.nodeType);if(vo(J)){const re=J.attributes;for(let fe=0,Re=re.length;fe<Re;fe++){const Ae=re[fe];te.attr(Ae.name,Ae.value)}du(te.name)&&(u(J),te.value=J.innerHTML)}else gn(J)?(te.value=J.data,E&&(te.raw=!0)):Wi(J)?te.value=p?Pte(J.data):J.data:(hT(J)||mT(J))&&(te.value=J.data);if(NE(J)){const re=Fu.create("#text");re.value=J.innerHTML,re.raw=!0,te.append(re)}else du(te.name)||ej(te,J,a,u,p);t.append(te)}},Sne=(t,s,a)=>{const u=[];for(let p=t,b=p;p;b=p,p=p.walk()){const E=p;Ue(s,I=>I(E)),De(E.parent)&&E!==t?p=b:u.push(E)}for(let p=u.length-1;p>=0;p--){const b=u[p];Ue(a,E=>E(b))}},aC=(t,s,a,u)=>{const p=a.validate,b=s.getNonEmptyElements(),E=s.getWhitespaceElements(),I=Q7(X7(Fk),s.getBlockElements()),D=gx(s),$=/[ \t\r\n]+/g,J=/^[ \t\r\n]+/,te=/[ \t\r\n]+$/,re=et=>{let ut=et.parent;for(;be(ut);){if(ut.name in E)return!0;ut=ut.parent}return!1},fe=et=>{let ut=et;for(;be(ut);){if(ut.name in D)return eI(s,b,E,ut);ut=ut.parent}return!1},Re=et=>et.name in I||sS(s,et)||du(et.name)&&et.parent===t,Ae=(et,ut)=>{const _t=ut?et.prev:et.next;return be(_t)||De(et.parent)?!1:Re(et.parent)&&(et.parent!==t||u.isRootContent===!0)};return[et=>{var ut;if(et.type===3&&!re(et)){let _t=(ut=et.value)!==null&&ut!==void 0?ut:"";_t=_t.replace($," "),(Dte(et.prev,Re)||Ae(et,!0))&&(_t=_t.replace(J,"")),_t.length===0||_t===" "&&et.prev&&et.prev.type===Sn&&et.next&&et.next.type===Sn?et.remove():et.value=_t}},et=>{var ut;if(et.type===1){const _t=s.getElementRule(et.name);if(p&&_t){const Qt=eI(s,b,E,et);_t.paddInEmptyBlock&&Qt&&fe(et)?kB(a,u,Re,et):_t.removeEmpty&&Qt?Re(et)?et.remove():et.unwrap():_t.paddEmpty&&(Qt||w7(et))&&kB(a,u,Re,et)}}else if(et.type===3&&!re(et)){let _t=(ut=et.value)!==null&&ut!==void 0?ut:"";(et.next&&Re(et.next)||Ae(et,!1))&&(_t=_t.replace(te,"")),_t.length===0?et.remove():et.value=_t}}]},cC=(t,s)=>{var a;const u=(a=s.forced_root_block)!==null&&a!==void 0?a:t.forced_root_block;return u===!1?"":u===!0?"p":u},cI=' xmlns="http://www.w3.org/1999/xhtml"',g0=(t={},s=Op())=>{const a=O7(),u=O7(),p={validate:!0,root_name:"body",sanitize:!0,allow_html_in_comments:!1,...t},b=new DOMParser,E=yne(p,s),I=(ut,_t,Qt="html",Mn=!1)=>{const bn=Qt==="xhtml",Wt=bn?"application/xhtml+xml":"text/html",ct=ho(s.getSpecialElements(),_t.toLowerCase()),ke=ct?`<${_t}>${ut}</${_t}>`:ut,wt=()=>/^[\s]*<head/i.test(ut)||/^[\s]*<html/i.test(ut)||/^[\s]*<!DOCTYPE/i.test(ut)?`<html${bn?cI:""}>${ke}</html>`:bn?`<html${cI}><head></head><body>${ke}</body></html>`:`<body>${ke}</body>`,vn=b.parseFromString(wt(),Wt),Ao=Mn?vn.documentElement:vn.body;return E.sanitizeHtmlElement(Ao,Wt),ct?Ao.firstChild:Ao},D=a.addFilter,$=a.getFilters,J=a.removeFilter,te=u.addFilter,re=u.getFilters,fe=u.removeFilter,Re=(ut,_t)=>{NB(s,ut)&&_t.push(ut)},Ae=(ut,_t)=>{const Qt=K(_t.attr(JB)),Mn=_t.type===1&&!ho(ut,_t.name)&&!sS(s,_t)&&!du(_t.name);return _t.type===3||Mn&&!Qt},_e=(ut,_t)=>{const Qt=Q7(X7(Fk),s.getBlockElements()),Mn=/^[ \t\r\n]+/,bn=/[ \t\r\n]+$/;let Wt=ut.firstChild,ct=null;const ke=wt=>{var vn,Ao;wt&&(Wt=wt.firstChild,Wt&&Wt.type===3&&(Wt.value=(vn=Wt.value)===null||vn===void 0?void 0:vn.replace(Mn,"")),Wt=wt.lastChild,Wt&&Wt.type===3&&(Wt.value=(Ao=Wt.value)===null||Ao===void 0?void 0:Ao.replace(bn,"")))};if(s.isValidChild(ut.name,_t.toLowerCase())){for(;Wt;){const wt=Wt.next;Ae(Qt,Wt)?(ct||(ct=new Fu(_t,1),ct.attr(p.forced_root_block_attrs),ut.insert(ct,Wt)),ct.append(Wt)):(ke(ct),ct=null),Wt=wt}ke(ct)}},et={schema:s,addAttributeFilter:te,getAttributeFilters:re,removeAttributeFilter:fe,addNodeFilter:D,getNodeFilters:$,removeNodeFilter:J,parse:(ut,_t={})=>{var Qt,Mn;const bn=p.validate,Wt=((Qt=_t.context)!==null&&Qt!==void 0?Qt:p.root_name)==="#document",ct=(Mn=_t.context)!==null&&Mn!==void 0?Mn:Wt?"html":p.root_name,ke=I(ut,ct,_t.format,Wt);Cv(s,ke);const wt=new Fu(ct,11);ej(wt,ke,s.getSpecialElements(),E.sanitizeNamespaceElement,p.sanitize&&p.allow_html_in_comments),ke.innerHTML="";const[vn,Ao]=aC(wt,s,p,_t),ss=[],ks=bn?gl=>Re(gl,ss):Ze,Gs={nodes:{},attributes:{}},Pi=gl=>RB($(),re(),gl,Gs);Sne(wt,[vn,Pi],[Ao,ks]),ss.reverse(),bn&&ss.length>0&&(_t.context?_t.invalid=!0:T7(ss,s,wt,Pi));const Li=cC(p,_t);return Li&&(wt.name==="body"||_t.isRootContent)&&_e(wt,Li),_t.invalid||xB(Gs,_t),wt}};return M7(et,p),I7(et,p,s),et},Uv=t=>t instanceof Fu,lC=t=>Uv(t)?jy({validate:!1}).serialize(t):t,lI=(t,s,a)=>{const u=lC(t),p=s(u);if(p.isDefaultPrevented())return p;if(Uv(t))if(p.content!==u){const b=g0({validate:!1,forced_root_block:!1,...a}).parse(p.content,{context:t.name});return{...p,content:b}}else return{...p,content:t};else return p},uI=t=>({sanitize:pO(t),sandbox_iframes:k_(t),sandbox_iframes_exclusions:HS(t)}),XB=(t,s)=>{if(s.no_events)return xa.value(s);{const a=nD(t,s);return a.isDefaultPrevented()?xa.error(oD(t,{content:"",...a}).content):xa.value(a)}},$k=(t,s,a)=>a.no_events?s:lI(s,p=>oD(t,{...a,content:p}),uI(t)).content,dI=(t,s)=>{if(s.no_events)return xa.value(s);{const a=lI(s.content,u=>Rc(t,{...s,content:u}),uI(t));return a.isDefaultPrevented()?(tD(t,a),xa.error(void 0)):xa.value(a)}},Uk=(t,s,a)=>{a.no_events||tD(t,{...a,content:s})},tj="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),aw=["content_css_cors"],nj="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),QB=[{name:"export",replacedWith:"Export to PDF"}],eV=(t,s)=>{const a=Oe(s,u=>ho(t,u));return st(a)},jk=t=>{const s=eV(t,tj),a=t.forced_root_block;return(a===!1||a==="")&&s.push("forced_root_block (false only)"),st(s)},oj=t=>eV(t,aw),tV=(t,s)=>{const a=yn.makeMap(t.plugins," "),p=Oe(s,b=>ho(a,b));return st(p)},sj=t=>tV(t,nj),rj=t=>tV(t,QB.map(s=>s.name)),v0=(t,s)=>{const a=jk(t),u=sj(s),p=u.length>0,b=a.length>0,E=s.theme==="mobile";if(p||b||E){const D=E?`

Themes:
- mobile`:"",$=p?`

Plugins:
- ${u.join(`
- `)}`:"",J=b?`

Options:
- ${a.join(`
- `)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 8.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/8/migration-from-7x/ for more information."+D+$+J)}},Xy=t=>gt(QB,s=>s.name===t).fold(()=>t,s=>s.replacedWith?`${t}, replaced by ${s.replacedWith}`:t),$m=(t,s)=>{const a=oj(t),u=rj(s),p=u.length>0,b=a.length>0;if(p||b){const I=p?`

Plugins:
- ${u.map(Xy).join(`
- `)}`:"",D=b?`

Options:
- ${a.join(`
- `)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+I+D)}},Cne=(t,s)=>{v0(t,s),$m(t,s)},Ene={fire:'The "fire" event api has been deprecated and will be removed in TinyMCE 9. Use "dispatch" instead.',selectionSetContent:'The "editor.selection.setContent" method has been deprecated and will be removed in TinyMCE 9. Use "editor.insertContent" instead.'},ij=t=>{console.warn(Ene[t],new Error().stack)},aj=t=>t.dom.length===0?(Vr(t),ce.none()):ce.some(t),_ne=(t,s)=>t.filter(a=>Bm.isBookmarkNode(a.dom)).bind(s?xl:nd),wne=(t,s,a,u,p)=>{const b=t.dom,E=s.dom,I=u?b.length:E.length;u?(W3(b,E,p,!1,!u),a.setStart(E,I)):(W3(E,b,p,!1,!u),a.setEnd(E,I))},Ane=(t,s,a)=>{Rl(t).each(u=>{const p=t.dom;s&&GO(u,Pt(p,0),a)?wk(p,0,a):!s&&qO(u,Pt(p,p.length),a)&&z3(p,p.length,a)})},cj=(t,s,a,u,p)=>{t.bind(b=>((u?z3:wk)(b.dom,u?b.dom.length:0,p),s.filter(dr).map(I=>wne(b,I,a,u,p)))).orThunk(()=>_ne(s,u).or(s).filter(dr).map(E=>Ane(E,u,p)))},Tne=(t,s,a)=>{const u=ce.from(s.firstChild).map(Me.fromDom),p=ce.from(s.lastChild).map(Me.fromDom);t.deleteContents(),t.insertNode(s);const b=u.bind(nd).filter(dr).bind(aj),E=p.bind(xl).filter(dr).bind(aj);cj(b,u,t,!0,a),cj(E,p,t,!1,a),t.collapse(!1)},One=(t,s)=>({format:"html",...t,set:!0,selection:!0,content:s}),Ine=(t,s)=>{if(s.format!=="raw"){const a=t.selection.getRng(),u=t.dom.getParent(a.commonAncestorContainer,t.dom.isBlock),p=u?{context:u.nodeName.toLowerCase()}:{},b=t.parser.parse(s.content,{forced_root_block:!1,...p,...s});return jy({validate:!1},t.schema).serialize(b)}else return s.content},zk=(t,s,a={})=>{const u=One(a,s);dI(t,u).each(p=>{const b=Ine(t,p),E=t.selection.getRng();Tne(E,E.createContextualFragment(b),t.schema),t.selection.setRng(E),UO(t,E),Uk(t,b,p)})},nV=(t,s,a={})=>{ij("selectionSetContent"),zk(t,s,a)},oV=t=>be(t.firstChild)&&t.firstChild===t.lastChild,lj=t=>t.name==="br"||t.value===ci,Rne=(t,s)=>t.getBlockElements()[s.name]&&oV(s)&&lj(s.firstChild),xne=(t,s)=>{const a=t.getNonEmptyElements();return be(s)&&(s.isEmpty(a)||Rne(t,s))},uj=(t,s)=>{let a=s.firstChild,u=s.lastChild;return a&&a.name==="meta"&&(a=a.next),u&&u.attr("id")==="mce_marker"&&(u=u.prev),xne(t,u)&&(u=u==null?void 0:u.prev),!a||a!==u?!1:a.name==="ul"||a.name==="ol"},dj=t=>{var s,a;const u=t.firstChild,p=t.lastChild;return u&&u.nodeName==="META"&&((s=u.parentNode)===null||s===void 0||s.removeChild(u)),p&&p.id==="mce_marker"&&((a=p.parentNode)===null||a===void 0||a.removeChild(p)),t},sV=(t,s,a)=>{const u=s.serialize(a),p=t.createFragment(u);return dj(p)},fj=t=>{var s;return Oe((s=t==null?void 0:t.childNodes)!==null&&s!==void 0?s:[],a=>a.nodeName==="LI")},pj=t=>t.data===ci||Ri(t),rV=t=>be(t==null?void 0:t.firstChild)&&t.firstChild===t.lastChild&&pj(t.firstChild),Dne=t=>!t.firstChild||rV(t),kne=t=>t.length>0&&Dne(t[t.length-1])?t.slice(0,-1):t,Um=(t,s)=>{const a=t.getParent(s,t.isBlock);return a&&a.nodeName==="LI"?a:null},jm=(t,s)=>!!Um(t,s),Wk=(t,s)=>{const a=s.cloneRange(),u=s.cloneRange();return a.setStartBefore(t),u.setEndAfter(t),[a.cloneContents(),u.cloneContents()]},hj=(t,s)=>{const a=Pt.before(t),p=Dh(s).next(a);return p?p.toRange():null},fI=(t,s)=>{const a=Pt.after(t),p=Dh(s).prev(a);return p?p.toRange():null},mj=(t,s,a,u)=>{const p=Wk(t,u),b=t.parentNode;return b&&(b.insertBefore(p[0],t),yn.each(s,E=>{b.insertBefore(E,t)}),b.insertBefore(p[1],t),b.removeChild(t)),fI(s[s.length-1],a)},gj=(t,s,a)=>{const u=t.parentNode;return u&&yn.each(s,p=>{u.insertBefore(p,t)}),hj(t,a)},vj=(t,s,a,u)=>(u.insertAfter(s.reverse(),t),fI(s[0],a)),bj=(t,s,a,u)=>{const p=sV(s,t,u),b=Um(s,a.startContainer),E=kne(fj(p.firstChild)),I=1,D=2,$=s.getRoot(),J=te=>{const re=Pt.fromRangeStart(a),fe=Dh(s.getRoot()),Re=te===I?fe.prev(re):fe.next(re),Ae=Re==null?void 0:Re.getNode();return Ae?Um(s,Ae)!==b:!0};return b?J(I)?gj(b,E,$):J(D)?vj(b,E,$,s):mj(b,E,$,a):null},yj=["pre"],Sj=(t,s,a,u)=>{var p;const b=s.firstChild,E=s.lastChild,I=E.attr("data-mce-type")==="bookmark"?E.prev:E,D=b===I,$=bt(yj,b.name);if(D&&$){const J=b.attr("contenteditable")!=="false",te=((p=t.getParent(a,t.isBlock))===null||p===void 0?void 0:p.nodeName.toLowerCase())===b.name,re=ce.from(oC(u,a)).forall(lu);return J&&te&&re}else return!1},cw=vm,iV=(t,s,a)=>{if(be(a)){const u=t.getParent(s.endContainer,cw);return a===u&&kO(Me.fromDom(a),s)}else return!1},Mne=(t,s)=>{if(t.isBlock(s)&&t.isEditable(s)){const a=s.childNodes;return a.length===1&&Ri(a[0])||a.length===0}else return!1},Nne=(t,s,a)=>{var u;a.getAttribute("data-mce-bogus")==="all"?(u=a.parentNode)===null||u===void 0||u.insertBefore(t.dom.createFragment(s),a):Mne(t.dom,a)?t.dom.setHTML(a,s):zk(t,s,{no_events:!0})},Pne=(t,s,a)=>{ce.from(t.getParent(s,"td,th")).map(Me.fromDom).each(u=>p4(u,a))},Lne=(t,s)=>{const a=t.schema.getTextInlineElements(),u=t.dom;if(s){const p=t.getBody(),b=fB(t),E="*[data-mce-fragment]",I=u.select(E);yn.each(I,D=>{const $=re=>be(a[re.nodeName.toLowerCase()]),J=re=>re.childNodes.length===1;if((re=>!(gee(u,re)||vee(u,re)))(D)&&$(D)&&J(D)){const re=jO(u,D),fe=(Qe,et)=>ys(Qe,ut=>bt(et,ut)),Re=Qe=>J(D)&&u.is(Qe,E)&&$(Qe)&&(Qe.nodeName===D.nodeName&&fe(re,jO(u,Qe))||Re(Qe.children[0])),Ae=Qe=>be(Qe)&&Qe!==p&&(b.compare(D,Qe)||Ae(Qe.parentElement)),_e=Qe=>be(Qe)&&Qe!==p&&u.is(Qe,E)&&(bee(u,D,Qe)||_e(Qe.parentElement));(Re(D.children[0])||Ae(D.parentElement)&&!_e(D.parentElement))&&u.remove(D,!0)}}),S7(t,dm(I))}},Cj=t=>{let s=t;for(;s=s.walk();)s.type===1&&s.attr("data-mce-fragment","1")},Bne=t=>{yn.each(t.getElementsByTagName("*"),s=>{s.removeAttribute("data-mce-fragment")})},Vne=t=>!!t.getAttribute("data-mce-fragment"),aV=(t,s)=>be(s)&&!t.schema.getVoidElements()[s.nodeName],Hne=(t,s)=>{var a,u,p;let b;const E=t.dom,I=t.selection;if(!s)return;I.scrollIntoView(s);const D=oC(t.getBody(),s);if(D&&E.getContentEditable(D)==="false"){E.remove(s),I.select(D);return}let $=E.createRng();const J=s.previousSibling;if(gn(J)){$.setStart(J,(u=(a=J.nodeValue)===null||a===void 0?void 0:a.length)!==null&&u!==void 0?u:0);const fe=s.nextSibling;gn(fe)&&(J.appendData(fe.data),(p=fe.parentNode)===null||p===void 0||p.removeChild(fe))}else $.setStartBefore(s),$.setEndBefore(s);const te=fe=>{let Re=Pt.fromRangeStart(fe);return Re=Dh(t.getBody()).next(Re),Re==null?void 0:Re.toRange()},re=E.getParent(s,E.isBlock);if(E.remove(s),re&&E.isEmpty(re)){const fe=cw(re);zd(Me.fromDom(re)),$.setStart(re,0),$.setEnd(re,0),!fe&&!Vne(re)&&(b=te($))?($=b,E.remove(re)):E.add(re,E.create("br",fe?{}:{"data-mce-bogus":"1"}))}I.setRng($)},Fne=t=>{const s=t.dom,a=Mk(t.selection.getRng());t.selection.setRng(a);const u=s.getParent(a.startContainer,cw);iV(s,a,u)?aB(t,a,Me.fromDom(u)):PO(a)||c3(a)?a.deleteContents():t.getDoc().execCommand("Delete",!1)},$ne=t=>{for(let s=t;s;s=s.walk())if(s.attr("id")==="mce_marker")return ce.some(s);return ce.none()},Une=(t,s,a)=>{var u;return Kt(a.children(),C7)&&((u=t.getParent(s,t.isBlock))===null||u===void 0?void 0:u.nodeName)==="SUMMARY"},jne=(t,s,a)=>{var u;const p=t.selection,b=t.dom,E=t.parser,I=a.merge,D=jy({validate:!0},t.schema),$='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';a.preserve_zwsp||(s=Pu(s)),s.indexOf("{$caret}")===-1&&(s+="{$caret}"),s=s.replace(/\{\$caret\}/,$);let J=p.getRng();const te=J.startContainer,re=t.getBody();te===re&&p.isCollapsed()&&b.isBlock(re.firstChild)&&aV(t,re.firstChild)&&b.isEmpty(re.firstChild)&&(J=b.createRng(),J.setStart(re.firstChild,0),J.setEnd(re.firstChild,0),p.setRng(J)),p.isCollapsed()||Fne(t);const fe=p.getNode(),Re={context:fe.nodeName.toLowerCase(),data:a.data,insert:!0},Ae=E.parse(s,Re);if(a.paste===!0&&uj(t.schema,Ae)&&jm(b,fe))return J=bj(D,b,p.getRng(),Ae),J&&p.setRng(J),s;a.paste===!0&&Sj(b,Ae,fe,t.getBody())&&((u=Ae.firstChild)===null||u===void 0||u.unwrap()),Cj(Ae);let _e=Ae.lastChild;if(_e&&_e.attr("id")==="mce_marker"){const Qe=_e;for(_e=_e.prev;_e&&_e.name!=="table";_e=_e.walk(!0))if(_e.type===3||!b.isBlock(_e.name)){_e.parent&&t.schema.isValidChild(_e.parent.name,"span")&&_e.parent.insert(Qe,_e,_e.name==="br");break}}if(t._selectionOverrides.showBlockCaretContainer(fe),!Re.invalid&&!Une(b,fe,Ae))s=D.serialize(Ae),Nne(t,s,fe);else{zk(t,$);let Qe=p.getNode(),et;const ut=t.getBody();for(xs(Qe)?Qe=et=ut:et=Qe;et&&et!==ut;)Qe=et,et=et.parentNode;s=Qe===ut?ut.innerHTML:b.getOuterHTML(Qe);const _t=E.parse(s),Qt=$ne(_t),Mn=Qt.bind(kte).getOr(_t);Qt.each(ct=>ct.replace(Ae));const bn=B0e(Ae);Ae.unwrap();const Wt=Oe(bn,ct=>NB(t.schema,ct));T7(Wt,t.schema,Mn),DB(E.getNodeFilters(),E.getAttributeFilters(),_t),s=D.serialize(_t),Qe===ut?b.setHTML(ut,s):b.setOuterHTML(Qe,s)}return Lne(t,I),Hne(t,b.get("mce_marker")),Bne(t.getBody()),Pne(b,p.getStart(),t.schema),xb(t.schema,t.getBody(),p.getStart()),s},zne=t=>{QS(t)&&Hl(t.getBody()).each(s=>{const a=s.getNode(),u=gm(a)?Hl(a).getOr(s):s;t.selection.setRng(u.toRange())})},cV=(t,s,a)=>{t.dom.setHTML(t.getBody(),s),a!==!0&&zne(t)},Gk=(t,s,a,u)=>{if(a=Pu(a),a.length===0||/^\s+$/.test(a)){const p='<br data-mce-bogus="1">';s.nodeName==="TABLE"?a="<tr><td>"+p+"</td></tr>":/^(UL|OL)$/.test(s.nodeName)&&(a="<li>"+p+"</li>");const b=Qc(t);return t.schema.isValidChild(s.nodeName.toLowerCase(),b.toLowerCase())?(a=p,a=t.dom.createHTML(b,Dy(t),a)):a||(a=p),cV(t,a,u.no_selection),{content:a,html:a}}else{u.format!=="raw"&&(a=jy({validate:!1},t.schema).serialize(t.parser.parse(a,{isRootContent:!0,insert:!0})));const p=fd(Me.fromDom(s))?a:yn.trim(a);return cV(t,p,u.no_selection),{content:p,html:p}}},lV=(t,s,a,u)=>{DB(t.parser.getNodeFilters(),t.parser.getAttributeFilters(),a);const p=jy({validate:!1},t.schema).serialize(a),b=Pu(fd(Me.fromDom(s))?p:yn.trim(p));return cV(t,b,u.no_selection),{content:a,html:b}},Wne=(t,s,a)=>ce.from(t.getBody()).map(u=>Uv(s)?lV(t,u,s,a):Gk(t,u,s,a)).getOr({content:s,html:Uv(a.content)?"":a.content}),pI={},Ej=Oc(["pre"]),Gne=(t,s)=>{pI[t]||(pI[t]=[]),pI[t].push(s)},_j=(t,s)=>{ho(pI,t)&&Ue(pI[t],a=>{a(s)})};Gne("pre",t=>{const s=t.selection.getRng(),a=p=>b=>{const E=b.previousSibling;return Ej(E)&&bt(p,E)},u=(p,b)=>{const E=Me.fromDom(b),I=$d(E).dom;Vr(E),rd(Me.fromDom(p),[Me.fromTag("br",I),Me.fromTag("br",I),...Oi(E)])};if(!s.collapsed){const p=t.selection.getSelectedBlocks(),b=Oe(Oe(p,Ej),a(p));Ue(b,E=>{u(E.previousSibling,E)})}});const wj=yn.each,qne=(t,s,a,u)=>{const p=b=>{if(di(b)&&vo(b.parentNode)&&t.isEditable(b)){const E=G(t,b.parentNode);t.getStyle(b,"color")&&E?t.setStyle(b,"text-decoration",E):t.getStyle(b,"text-decoration")===E&&t.setStyle(b,"text-decoration",null)}};s.styles&&(s.styles.color||s.styles.textDecoration)&&(yn.walk(u,p,"childNodes"),p(u))},uV=(t,s,a,u)=>{if(s.styles&&s.styles.backgroundColor){const p=f7(t,"fontSize");d7(u,b=>p(b)&&t.isEditable(b),ow(t,"backgroundColor",g(s.styles.backgroundColor,a)))}},Kne=(t,s,a,u)=>{if(On(s)&&(s.inline==="sub"||s.inline==="sup")){const p=f7(t,"fontSize");d7(u,E=>p(E)&&t.isEditable(E),ow(t,"fontSize",""));const b=Oe(t.select(s.inline==="sup"?"sub":"sup",u),t.isEditable);t.remove(b,!0)}},Zne=(t,s,a,u)=>{wj(s,p=>{On(p)&&wj(t.dom.select(p.inline,u),b=>{CB(b)&&rw(t,p,a,b,p.exact?b:null)}),vi(t.dom,p,u)})},Yne=(t,s,a,u,p)=>{const b=p.parentNode;Fm(t,b,a,u)&&rw(t,s,u,p)||s.merge_with_parents&&b&&t.dom.getParent(b,E=>Fm(t,E,a,u)?(rw(t,s,u,p),!0):!1)},Jne=yn.each,Xne=(t,s,a,u)=>{if(kS(t)&&On(s)&&a.parentNode){const p=gx(t.schema),b=yo(Me.fromDom(a),E=>Vu(E.dom));return Os(p,u)&&Tf(t.schema,a.parentNode,{skipBogus:!1,includeZwsp:!0})&&!b}else return!1},Qne=(t,s,a,u)=>{const p=t.formatter.get(s),b=p[0],E=!u&&t.selection.isCollapsed(),I=t.dom,D=t.selection,$=(fe,Re)=>{let Ae=!1;return Jne(fe,_e=>Fn(_e)?I.getContentEditable(Re)==="false"&&!_e.ceFalseOverride||be(_e.collapsed)&&_e.collapsed!==E?!0:I.is(Re,_e.selector)&&!Vu(Re)?(ew(t,Re,_e,a,Re),Ae=!0,!1):!0:!1),Ae},J=fe=>{if(K(fe)){const Re=I.create(fe);return ew(t,Re,b,a,u),Re}else return null},te=(fe,Re,Ae)=>{const _e=[];let Qe=!0;const et=b.inline||b.block,ut=J(et),_t=bn=>vt(b)&&Fm(t,bn,s,a),Qt=(bn,Wt,ct)=>{const ke=ln(b)&&BO(t.schema,bn)&&Hy(t,Wt,et);return ct&&ke},Mn=(bn,Wt,ct,ke)=>{const wt=bn.nodeName.toLowerCase(),vn=Hy(t,et,wt)&&Hy(t,Wt,et),Ao=!Ae&&gn(bn)&&o_(bn.data),ss=Vu(bn),ks=!On(b)||!fe.isBlock(bn);return(ct||ke)&&vn&&!Ao&&!ss&&ks};Fy(fe,Re,bn=>{let Wt;const ct=ke=>{let wt=!1,vn=Qe,Ao=!1;const ss=ke.parentNode,ks=ss.nodeName.toLowerCase(),Gs=fe.getContentEditable(ke);be(Gs)&&(vn=Qe,Qe=Gs==="true",wt=!0,Ao=QD(t,ke));const Pi=Qe&&!wt;if(Ri(ke)&&!Xne(t,b,ke,ks)){Wt=null,Ge(b)&&fe.remove(ke);return}if(_t(ke)){Wt=null;return}if(Qt(ke,ks,Pi)){const Li=fe.rename(ke,et);ew(t,Li,b,a,ke),_e.push(Li),Wt=null;return}if(Fn(b)){let Li=$(p,ke);if(!Li&&be(ss)&&zt(b)&&(Li=$(p,ss)),!On(b)||Li){Wt=null;return}}be(ut)&&Mn(ke,ks,Pi,Ao)?(Wt||(Wt=fe.clone(ut,!1),ss.insertBefore(Wt,ke),_e.push(Wt)),Ao&&wt&&(Qe=vn),Wt.appendChild(ke)):(Wt=null,Ue(Nn(ke.childNodes),ct),wt&&(Qe=vn),Wt=null)};Ue(bn,ct)}),b.links===!0&&Ue(_e,bn=>{const Wt=ct=>{ct.nodeName==="A"&&ew(t,ct,b,a,u),Ue(Nn(ct.childNodes),Wt)};Wt(bn)}),Rte(t,s,dm(_e)),Ue(_e,bn=>{const Wt=wt=>{let vn=0;return Ue(wt.childNodes,Ao=>{!gi(Ao)&&!hd(Ao)&&vn++}),vn},ct=wt=>gt(wt.childNodes,LO).filter(Ao=>fe.getContentEditable(Ao)!=="false"&&xk(fe,Ao,b)).map(Ao=>{const ss=fe.clone(Ao,!1);return ew(t,ss,b,a,wt),fe.replace(ss,wt,!0),fe.remove(Ao,!0),ss}).getOr(wt),ke=Wt(bn);if((_e.length>1||!fe.isBlock(bn))&&ke===0){fe.remove(bn,!0);return}(On(b)||Ge(b)&&b.wrapper)&&(!b.exact&&ke===1&&(bn=ct(bn)),Zne(t,p,a,bn),Yne(t,b,s,a,bn),uV(fe,b,a,bn),qne(fe,b,a,bn),Kne(fe,b,a,bn),u7(t,b,a,bn))})},re=ZS(u)?u:D.getNode();if(I.getContentEditable(re)==="false"&&!QD(t,re)){u=re,$(p,u),Tn(t,s,u,a);return}if(b){if(u)if(ZS(u)){if(!$(p,u)){const fe=I.createRng();fe.setStartBefore(u),fe.setEndAfter(u),te(I,Fa(I,fe,p),!0)}}else te(I,u,!0);else!E||!On(b)||Vv(t).length?(D.setRng(Mk(D.getRng())),Y_(t,()=>{MO(t,(fe,Re)=>{const Ae=Re?fe:Fa(I,fe,p);te(I,Ae,!1)})},Jt),t.nodeChanged()):D0e(t,s,a),nw(t.formatter,s).each(fe=>{Ue(M0e(t.selection),Re=>e7(I,Re,fe,a))});_j(s,t)}Tn(t,s,u,a)},Aj=(t,s,a,u)=>{(u||t.selection.isEditable())&&Qne(t,s,a,u)},hI=t=>ho(t,"vars"),qk=(t,s)=>{t.set({}),s.on("NodeChange",a=>{Ij(s,a.element,t.get())}),s.on("FormatApply FormatRemove",a=>{const u=ce.from(a.node).map(p=>ZS(p)?p:p.startContainer).bind(p=>vo(p)?ce.some(p):ce.from(p.parentElement)).getOrThunk(()=>Tj(s));Ij(s,u,t.get())})},Tj=t=>t.selection.getStart(),Oj=(t,s,a,u,p)=>ht(s,I=>{const D=t.formatter.matchNode(I,a,p??{},u);return!Ne(D)},I=>md(t,I,a)?!0:u?!1:be(t.formatter.matchNode(I,a,p,!0))),mI=(t,s)=>{const a=s??Tj(t);return Oe(ee(t.dom,a),u=>vo(u)&&!Tb(u))},Ij=(t,s,a)=>{const u=mI(t,s);wn(a,(p,b)=>{const E=I=>{const D=Oj(t,u,b,I.similar,hI(I)?I.vars:void 0),$=D.isSome();if(I.state.get()!==$){I.state.set($);const J=D.getOr(s);hI(I)?I.callback($,{node:J,format:b,parents:u}):Ue(I.callbacks,te=>te($,{node:J,format:b,parents:u}))}};Ue([p.withSimilar,p.withoutSimilar],E),Ue(p.withVars,E)})},eoe=(t,s,a,u,p,b)=>{const E=s.get();Ue(a.split(","),I=>{const D=Ts(E,I).getOrThunk(()=>{const J={withSimilar:{state:fo(!1),similar:!0,callbacks:[]},withoutSimilar:{state:fo(!1),similar:!1,callbacks:[]},withVars:[]};return E[I]=J,J}),$=()=>{const J=mI(t);return Oj(t,J,I,p,b).isSome()};if(Ne(b)){const J=p?D.withSimilar:D.withoutSimilar;J.callbacks.push(u),J.callbacks.length===1&&J.state.set($())}else D.withVars.push({state:fo($()),similar:p,vars:b,callback:u})}),s.set(E)},toe=(t,s,a)=>{const u=t.get();Ue(s.split(","),p=>Ts(u,p).each(b=>{u[p]={withSimilar:{...b.withSimilar,callbacks:Oe(b.withSimilar.callbacks,E=>E!==a)},withoutSimilar:{...b.withoutSimilar,callbacks:Oe(b.withoutSimilar.callbacks,E=>E!==a)},withVars:Oe(b.withVars,E=>E.callback!==a)}})),t.set(u)},noe=(t,s,a,u,p,b)=>(eoe(t,s,a,u,p,b),{unbind:()=>toe(s,a,u)}),ooe=(t,s,a,u)=>{const p=t.formatter.get(s);p&&(mB(t,s,a,u)&&(!("toggle"in p[0])||p[0].toggle)?y7(t,s,a,u):Aj(t,s,a,u))},dV=(t,s,a)=>({element:t,width:s,rows:a}),Rj=(t,s)=>({element:t,cells:s}),soe=(t,s)=>({x:t,y:s}),xj=(t,s)=>id(t,s).bind(im).getOr(1),roe=(t,s,a,u,p)=>{const b=xj(p,"rowspan"),E=xj(p,"colspan"),I=t.rows;for(let D=a;D<a+b;D++){I[D]||(I[D]=Rj(gp(u),[]));for(let $=s;$<s+E;$++){const J=I[D].cells;J[$]=D===a&&$===s?p:pa(p)}}},ioe=(t,s,a)=>{const u=t.rows;return!!(u[a]?u[a].cells:[])[s]},$0e=(t,s,a)=>{for(;ioe(t,s,a);)s++;return s},Nh=t=>tn(t,(s,a)=>a.cells.length>s?a.cells.length:s,0),fV=(t,s)=>{const a=t.rows;for(let u=0;u<a.length;u++){const p=a[u].cells;for(let b=0;b<p.length;b++)if(eo(p[b],s))return ce.some(soe(b,u))}return ce.none()},Dj=(t,s,a,u,p)=>{const b=[],E=t.rows;for(let I=a;I<=p;I++){const D=E[I].cells,$=s<u?D.slice(s,u+1):D.slice(u,s+1);b.push(Rj(E[I].element,$))}return b},kj=(t,s,a)=>{const u=s.x,p=s.y,b=a.x,E=a.y,I=p<E?Dj(t,u,p,b,E):Dj(t,u,E,b,p);return dV(t.element,Nh(I),I)},aoe=(t,s)=>{const a=pa(t.element),u=Me.fromTag("tbody");return rd(u,s),Qs(a,u),a},coe=t=>Ut(t.rows,s=>{const a=Ut(s.cells,p=>{const b=gp(p);return da(b,"colspan"),da(b,"rowspan"),b}),u=pa(s.element);return rd(u,a),u}),U0e=t=>{const s=dV(pa(t),0,[]);return Ue(Ht(t,"tr"),(a,u)=>{Ue(Ht(a,"td,th"),(p,b)=>{roe(s,$0e(s,b,u),u,a,p)})}),dV(s.element,Nh(s.rows),s.rows)},yu=t=>aoe(t,coe(t)),loe=(t,s,a)=>fV(t,s).bind(u=>fV(t,a).map(p=>kj(t,u,p))),pV=t=>gt(t,s=>Xo(s)==="ul"||Xo(s)==="ol"),Mj=(t,s)=>gt(t,a=>Xo(a)==="li"&&kO(a,s)).fold(Be([]),a=>pV(t).map(u=>{const p=Me.fromTag(Xo(u)),b=Yi(pv(u),(E,I)=>$o(I,"list-style"));return iu(p,b),[Me.fromTag("li"),p]}).getOr([])),Kk=(t,s)=>{const a=tn(s,(u,p)=>(Qs(p,u),p),t);return s.length>0?pm([a]):a},uoe=t=>Em(t)?Rl(t).filter(t_).fold(Be([]),s=>[t,s]):t_(t)?[t]:[],doe=(t,s,a)=>{const u=Me.fromDom(s.commonAncestorContainer),p=zn(u,t),b=Oe(p,D=>a.isWrapper(Xo(D))),E=Mj(p,s),I=b.concat(E.length?E:uoe(u));return Ut(I,pa)},Nj=()=>pm([]),foe=(t,s,a)=>Kk(Me.fromDom(s.cloneContents()),doe(t,s,a)),poe=(t,s)=>na(s,"table",$e(eo,t)),Pj=(t,s)=>poe(t,s[0]).bind(a=>{const u=s[0],p=s[s.length-1],b=U0e(a);return loe(b,u,p).map(E=>pm([yu(E)]))}).getOrThunk(Nj),hoe=(t,s,a)=>s.length>0&&s[0].collapsed?Nj():foe(t,s[0],a),Lj=(t,s,a)=>{const u=q_(s,t);return u.length>0?Pj(t,u):hoe(t,s,a)},gI=(t,s)=>s>=0&&s<t.length&&a0(t.charAt(s)),Bj=t=>Pu(t.innerText),moe=t=>t.map(s=>s.nodeName).getOr("div").toLowerCase(),goe=t=>ce.from(t.selection.getRng()).map(s=>{var a;const u=ce.from(t.dom.getParent(s.commonAncestorContainer,t.dom.isBlock)),p=t.getBody(),b=moe(u),E=Me.fromDom(s.cloneContents());N3(E),P3(E);const I=t.dom.add(p,b,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},E.dom),D=Bj(I),$=Pu((a=I.textContent)!==null&&a!==void 0?a:"");if(t.dom.remove(I),gI($,0)||gI($,$.length-1)){const J=u.getOr(p),te=Bj(J),re=te.indexOf(D);if(re===-1)return D;{const fe=gI(te,re-1),Re=gI(te,re+D.length);return(fe?" ":"")+D+(Re?" ":"")}}else return D}).getOr(""),voe=(t,s)=>{const a=t.selection.getRng(),u=t.dom.create("body"),p=t.selection.getSel(),b=D3(t,RO(p)),E=s.contextual?Lj(Me.fromDom(t.getBody()),b,t.schema).dom:a.cloneContents();return E&&u.appendChild(E),t.selection.serializer.serialize(u,s)},boe=(t,s)=>{if(s.format==="text")return goe(t);{const a=voe(t,s);return s.format==="tree"?a:t.selection.isCollapsed()?"":a}},Zk=(t,s)=>({...t,format:s,get:!0,selection:!0,getInner:!0}),Vj=(t,s,a={})=>{const u=Zk(a,s);return XB(t,u).fold(at,p=>{const b=boe(t,p);return $k(t,b,p)})},Yk=0,Hj=1,hV=2,yoe=(t,s)=>{const a=t.length+s.length+2,u=new Array(a),p=new Array(a),b=(J,te,re)=>({start:J,end:te,diag:re}),E=(J,te,re,fe,Re)=>{const Ae=D(J,te,re,fe);if(Ae===null||Ae.start===te&&Ae.diag===te-fe||Ae.end===J&&Ae.diag===J-re){let _e=J,Qe=re;for(;_e<te||Qe<fe;)_e<te&&Qe<fe&&t[_e]===s[Qe]?(Re.push([Yk,t[_e]]),++_e,++Qe):te-J>fe-re?(Re.push([hV,t[_e]]),++_e):(Re.push([Hj,s[Qe]]),++Qe)}else{E(J,Ae.start,re,Ae.start-Ae.diag,Re);for(let _e=Ae.start;_e<Ae.end;++_e)Re.push([Yk,t[_e]]);E(Ae.end,te,Ae.end-Ae.diag,fe,Re)}},I=(J,te,re,fe)=>{let Re=J;for(;Re-te<fe&&Re<re&&t[Re]===s[Re-te];)++Re;return b(J,Re,te)},D=(J,te,re,fe)=>{const Re=te-J,Ae=fe-re;if(Re===0||Ae===0)return null;const _e=Re-Ae,Qe=Ae+Re,et=(Qe%2===0?Qe:Qe+1)/2;u[1+et]=J,p[1+et]=te+1;let ut,_t,Qt,Mn,bn;for(ut=0;ut<=et;++ut){for(_t=-ut;_t<=ut;_t+=2){for(Qt=_t+et,_t===-ut||_t!==ut&&u[Qt-1]<u[Qt+1]?u[Qt]=u[Qt+1]:u[Qt]=u[Qt-1]+1,Mn=u[Qt],bn=Mn-J+re-_t;Mn<te&&bn<fe&&t[Mn]===s[bn];)u[Qt]=++Mn,++bn;if(_e%2!==0&&_e-ut<=_t&&_t<=_e+ut&&p[Qt-_e]<=u[Qt])return I(p[Qt-_e],_t+J-re,te,fe)}for(_t=_e-ut;_t<=_e+ut;_t+=2){for(Qt=_t+et-_e,_t===_e-ut||_t!==_e+ut&&p[Qt+1]<=p[Qt-1]?p[Qt]=p[Qt+1]-1:p[Qt]=p[Qt-1],Mn=p[Qt]-1,bn=Mn-J+re-_t;Mn>=J&&bn>=re&&t[Mn]===s[bn];)p[Qt]=Mn--,bn--;if(_e%2===0&&-ut<=_t&&_t<=ut&&p[Qt]<=u[Qt+_e])return I(p[Qt],_t+J-re,te,fe)}}return null},$=[];return E(0,t.length,0,s.length,$),$},Fj=t=>vo(t)?t.outerHTML:gn(t)?Db.encodeRaw(t.data,!1):Wi(t)?"<!--"+t.data+"-->":"",Soe=t=>{let s;const a=document.createElement("div"),u=document.createDocumentFragment();for(t&&(a.innerHTML=t);s=a.firstChild;)u.appendChild(s);return u},mV=(t,s,a)=>{const u=Soe(s);if(t.hasChildNodes()&&a<t.childNodes.length){const p=t.childNodes[a];t.insertBefore(u,p)}else t.appendChild(u)},gV=(t,s)=>{if(t.hasChildNodes()&&s<t.childNodes.length){const a=t.childNodes[s];t.removeChild(a)}},Coe=(t,s)=>{let a=0;Ue(t,u=>{u[0]===Yk?a++:u[0]===Hj?(mV(s,u[1],a),a++):u[0]===hV&&gV(s,a)})},vV=(t,s)=>Oe(Ut(Nn(t.childNodes),z(Pu,Fj)),a=>a.length>0),Eoe=(t,s)=>{const a=Ut(Nn(s.childNodes),Fj);return Coe(yoe(a,t),s),s},_oe=ka(()=>document.implementation.createHTMLDocument("undo")),woe=t=>t.querySelector("iframe")!==null,Aoe=t=>({type:"fragmented",fragments:t,content:"",bookmark:null,beforeBookmark:null}),Toe=t=>({type:"complete",fragments:null,content:t,bookmark:null,beforeBookmark:null}),Jk=t=>{const s=t.serializer.getTempAttrs(),a=J6(t.getBody(),s);return woe(a)?Aoe(vV(a)):Toe(Pu(a.innerHTML))},Xk=(t,s,a)=>{const u=a?s.beforeBookmark:s.bookmark;s.type==="fragmented"?Eoe(s.fragments,t.getBody()):t.setContent(s.content,{format:"raw",no_selection:be(u)&&U_(u)?!u.isFakeCaret:!0}),u&&(t.selection.moveToBookmark(u),t.selection.scrollIntoView())},bV=t=>t.type==="fragmented"?t.fragments.join(""):t.content,$j=t=>{const s=Me.fromTag("body",_oe());return dh(s,bV(t)),Ue(Ht(s,"*[data-mce-bogus]"),ru),Tc(s)},Ooe=(t,s)=>bV(t)===bV(s),Ioe=(t,s)=>$j(t)===$j(s),yV=(t,s)=>!t||!s?!1:Ooe(t,s)?!0:Ioe(t,s),SV=t=>t.get()===0,Qk=(t,s,a)=>{SV(a)&&(t.typing=s)},uC=(t,s)=>{t.typing&&(Qk(t,!1,s),t.add())},eM=t=>{t.typing&&(t.typing=!1,t.add())},Uj=(t,s,a)=>{SV(s)&&a.set(wS(t.selection))},jj=(t,s,a,u,p,b,E)=>{const I=Jk(t),D=yn.extend(b||{},I);if(!SV(u)||t.removed)return null;const $=s.data[a.get()];if(t.dispatch("BeforeAddUndo",{level:D,lastLevel:$,originalEvent:E}).isDefaultPrevented()||$&&yV($,D))return null;s.data[a.get()]&&p.get().each(re=>{s.data[a.get()].beforeBookmark=re});const J=gD(t);if(J&&s.data.length>J){for(let re=0;re<s.data.length-1;re++)s.data[re]=s.data[re+1];s.data.length--,a.set(s.data.length)}D.bookmark=wS(t.selection),a.get()<s.data.length-1&&(s.data.length=a.get()+1),s.data.push(D),a.set(s.data.length-1);const te={level:D,lastLevel:$,originalEvent:E};return a.get()>0?(t.setDirty(!0),t.dispatch("AddUndo",te),t.dispatch("change",te)):t.dispatch("AddUndo",te),D},Roe=(t,s,a)=>{s.data=[],a.set(0),s.typing=!1,t.dispatch("ClearUndos")},xoe=(t,s,a,u,p)=>{if(s.transact(u)){const b=s.data[a.get()].bookmark,E=s.data[a.get()-1];Xk(t,E,!0),s.transact(p)&&(s.data[a.get()-1].beforeBookmark=b)}},CV=(t,s,a)=>{let u;return s.get()<a.length-1&&(s.set(s.get()+1),u=a[s.get()],Xk(t,u,!1),t.setDirty(!0),t.dispatch("Redo",{level:u})),u},Doe=(t,s,a,u)=>{let p;return s.typing&&(s.add(),s.typing=!1,Qk(s,!1,a)),u.get()>0&&(u.set(u.get()-1),p=s.data[u.get()],Xk(t,p,!0),t.setDirty(!0),t.dispatch("Undo",{level:p})),p},koe=t=>{t.clear(),t.add()},Moe=(t,s,a)=>a.get()>0||s.typing&&s.data[0]&&!yV(Jk(t),s.data[0]),Noe=(t,s)=>s.get()<t.data.length-1&&!t.typing,Poe=(t,s,a)=>(uC(t,s),t.beforeChange(),t.ignore(a),t.add()),tM=(t,s)=>{try{t.set(t.get()+1),s()}finally{t.set(t.get()-1)}},vI=(t,s)=>{const a=t.dom,u=be(s)?s:t.getBody();Ue(a.select("table,a",u),p=>{switch(p.nodeName){case"TABLE":const b=BS(t),E=a.getAttrib(p,"border");(!E||E==="0")&&t.hasVisual?a.addClass(p,b):a.removeClass(p,b);break;case"A":if(!a.getAttrib(p,"href")){const I=a.getAttrib(p,"name")||p.id,D=lO(t);I&&t.hasVisual?a.addClass(p,D):a.removeClass(p,D)}break}}),t.dispatch("VisualAid",{element:s,hasVisual:t.hasVisual})},zj=t=>({init:{bindEvents:Ze},undoManager:{beforeChange:(s,a)=>Uj(t,s,a),add:(s,a,u,p,b,E)=>jj(t,s,a,u,p,b,E),undo:(s,a,u)=>Doe(t,s,a,u),redo:(s,a)=>CV(t,s,a),clear:(s,a)=>Roe(t,s,a),reset:s=>koe(s),hasUndo:(s,a)=>Moe(t,s,a),hasRedo:(s,a)=>Noe(s,a),transact:(s,a,u)=>Poe(s,a,u),ignore:(s,a)=>tM(s,a),extra:(s,a,u,p)=>xoe(t,s,a,u,p)},formatter:{match:(s,a,u,p)=>mB(t,s,a,u,p),matchAll:(s,a)=>ate(t,s,a),matchNode:(s,a,u,p)=>Fm(t,s,a,u,p),canApply:s=>gB(t,s),closest:s=>cte(t,s),apply:(s,a,u)=>Aj(t,s,a,u),remove:(s,a,u,p)=>y7(t,s,a,u,p),toggle:(s,a,u)=>ooe(t,s,a,u),formatChanged:(s,a,u,p,b)=>noe(t,s,a,u,p,b)},editor:{getContent:s=>y0e(t,s),setContent:(s,a)=>Wne(t,s,a),insertContent:(s,a)=>jne(t,s,a),addVisual:s=>vI(t,s)},selection:{getContent:(s,a)=>Vj(t,s,a)},autocompleter:{addDecoration:Ze,removeDecoration:Ze},raw:{getModel:()=>ce.none()}}),lw=t=>{const s=$=>se($)?$:{},{init:a,undoManager:u,formatter:p,editor:b,selection:E,autocompleter:I,raw:D}=t;return{init:{bindEvents:a.bindEvents},undoManager:{beforeChange:u.beforeChange,add:u.add,undo:u.undo,redo:u.redo,clear:u.clear,reset:u.reset,hasUndo:u.hasUndo,hasRedo:u.hasRedo,transact:($,J,te)=>u.transact(te),ignore:($,J)=>u.ignore(J),extra:($,J,te,re)=>u.extra(te,re)},formatter:{match:($,J,te,re)=>p.match($,s(J),re),matchAll:p.matchAll,matchNode:p.matchNode,canApply:$=>p.canApply($),closest:$=>p.closest($),apply:($,J,te)=>p.apply($,s(J)),remove:($,J,te,re)=>p.remove($,s(J)),toggle:($,J,te)=>p.toggle($,s(J)),formatChanged:($,J,te,re,fe)=>p.formatChanged(J,te,re,fe)},editor:{getContent:$=>b.getContent($),setContent:($,J)=>({content:b.setContent($,J),html:""}),insertContent:($,J)=>(b.insertContent($),""),addVisual:b.addVisual},selection:{getContent:($,J)=>E.getContent(J)},autocompleter:{addDecoration:I.addDecoration,removeDecoration:I.removeDecoration},raw:{getModel:()=>ce.some(D.getRawModel())}}},Pp=()=>{const t=Be(null),s=Be("");return{init:{bindEvents:Ze},undoManager:{beforeChange:Ze,add:t,undo:t,redo:t,clear:Ze,reset:Ze,hasUndo:Et,hasRedo:Et,transact:t,ignore:Ze,extra:Ze},formatter:{match:Et,matchAll:Be([]),matchNode:Be(void 0),canApply:Et,closest:s,apply:Ze,remove:Ze,toggle:Ze,formatChanged:Be({unbind:Ze})},editor:{getContent:s,setContent:Be({content:"",html:""}),insertContent:Be(""),addVisual:Ze},selection:{getContent:s},autocompleter:{addDecoration:Ze,removeDecoration:Ze},raw:{getModel:Be(ce.none())}}},Lp=t=>ho(t.plugins,"rtc"),Fr=t=>Ts(t.plugins,"rtc").bind(s=>ce.from(s.setup)),bI=t=>{const s=t;return Fr(t).fold(()=>(s.rtcInstance=zj(t),ce.none()),a=>(s.rtcInstance=Pp(),ce.some(()=>a().then(u=>(s.rtcInstance=lw(u),u.rtc.isRemote)))))},nM=t=>t.rtcInstance?t.rtcInstance:zj(t),fc=t=>{const s=t.rtcInstance;if(s)return s;throw new Error("Failed to get RTC instance not yet initialized.")},oM=(t,s,a)=>{fc(t).undoManager.beforeChange(s,a)},EV=(t,s,a,u,p,b,E)=>fc(t).undoManager.add(s,a,u,p,b,E),_V=(t,s,a,u)=>fc(t).undoManager.undo(s,a,u),wV=(t,s,a)=>fc(t).undoManager.redo(s,a),AV=(t,s,a)=>{fc(t).undoManager.clear(s,a)},sM=(t,s)=>{fc(t).undoManager.reset(s)},TV=(t,s,a)=>fc(t).undoManager.hasUndo(s,a),Wj=(t,s,a)=>fc(t).undoManager.hasRedo(s,a),Gj=(t,s,a,u)=>fc(t).undoManager.transact(s,a,u),qj=(t,s,a)=>{fc(t).undoManager.ignore(s,a)},Kj=(t,s,a,u,p)=>{fc(t).undoManager.extra(s,a,u,p)},Zj=(t,s,a,u,p)=>fc(t).formatter.match(s,a,u,p),dC=(t,s,a)=>fc(t).formatter.matchAll(s,a),Yj=(t,s,a,u,p)=>fc(t).formatter.matchNode(s,a,u,p),OV=(t,s)=>fc(t).formatter.canApply(s),Loe=(t,s)=>fc(t).formatter.closest(s),Boe=(t,s,a,u)=>{fc(t).formatter.apply(s,a,u)},Jj=(t,s,a,u,p)=>{fc(t).formatter.remove(s,a,u,p)},Xj=(t,s,a,u)=>{fc(t).formatter.toggle(s,a,u)},Qj=(t,s,a,u,p,b)=>fc(t).formatter.formatChanged(s,a,u,p,b),rM=(t,s)=>nM(t).editor.getContent(s),ez=(t,s,a)=>nM(t).editor.setContent(s,a),tz=(t,s,a)=>nM(t).editor.insertContent(s,a),nz=(t,s,a)=>fc(t).selection.getContent(s,a),oz=(t,s)=>fc(t).editor.addVisual(s),IV=t=>fc(t).init.bindEvents(),sz=(t,s={})=>{const a=s.format?s.format:"html";return nz(t,a,s)},RV=(t,s,a)=>{if(ho(t,s)){const u=Oe(t[s],p=>p!==a);u.length===0?delete t[s]:t[s]=u}};var rz=(t,s)=>{let a,u;const p=(I,D)=>gt(D,$=>t.is($,I)),b=I=>t.getParents(I,void 0,t.getRoot()),E=()=>{a={},u={},s.on("NodeChange",I=>{const D=I.element,$=b(D),J={};wn(a,(te,re)=>{p(re,$).each(fe=>{u[re]||(Ue(te,Re=>{Re(!0,{node:fe,selector:re,parents:$})}),u[re]=te),J[re]=te})}),wn(u,(te,re)=>{J[re]||(delete u[re],Ue(te,fe=>{fe(!1,{node:D,selector:re,parents:$})}))})})};return{selectorChangedWithUnbind:(I,D)=>(a||E(),a[I]||(a[I]=[]),a[I].push(D),p(I,b(s.selection.getStart())).each(()=>{u[I]=a[I]}),{unbind:()=>{RV(a,I,D),RV(u,I,D)}})}};const xV=t=>!!(t&&t.ownerDocument)&&ur(Me.fromDom(t.ownerDocument),Me.fromDom(t)),iz=t=>t?xV(t.startContainer)&&xV(t.endContainer):!1,iM=(t,s,a,u)=>{let p,b;const{selectorChangedWithUnbind:E}=rz(t,u),I=(In,Io)=>{const or=t.createRng();be(In)&&be(Io)?(or.setStart(In,Io),or.setEnd(In,Io),_t(or),Qe(!1)):(Z_(t,or,u.getBody(),!0),_t(or))},D=In=>sz(u,In),$=(In,Io)=>nV(u,In,Io),J=In=>dk(u.getBody(),ut(),In),te=In=>x3(u.getBody(),ut(),In),re=(In,Io)=>Li.getBookmark(In,Io),fe=In=>Li.moveToBookmark(In),Re=(In,Io)=>(h0e(t,In,Io).each(_t),In),Ae=()=>{const In=ut(),Io=et();return!In||In.item?!1:In.compareEndPoints?In.compareEndPoints("StartToEnd",In)===0:!Io||In.collapsed},_e=()=>{if(u.mode.isReadOnly())return!1;const In=ut(),Io=u.getBody().querySelectorAll('[data-mce-selected="1"]');return Io.length>0?ys(Io,or=>t.isEditable(or.parentElement)):G6(t,In)},Qe=In=>{const Io=ut();Io.collapse(!!In),_t(Io)},et=()=>s.getSelection?s.getSelection():s.document.selection,ut=()=>{let In;const Io=(Er,Eo,Dn)=>{try{return Eo.compareBoundaryPoints(Er,Dn)}catch{return-1}},or=s.document;if(be(u.bookmark)&&!QS(u)){const Er=m3(u);if(Er.isSome())return Er.map(Eo=>D3(u,[Eo])[0]).getOr(or.createRange())}try{const Er=et();Er&&!fT(Er.anchorNode)&&(Er.rangeCount>0?In=Er.getRangeAt(0):In=or.createRange(),In=D3(u,[In])[0])}catch{}if(In||(In=or.createRange()),xs(In.startContainer)&&In.collapsed){const Er=t.getRoot();In.setStart(Er,0),In.setEnd(Er,0)}return p&&b&&(Io(In.START_TO_START,In,p)===0&&Io(In.END_TO_END,In,p)===0?In=b:(p=null,b=null)),In},_t=(In,Io)=>{if(!iz(In))return;const or=et();if(In=u.dispatch("SetSelectionRange",{range:In,forward:Io}).range,or){b=In;try{or.removeAllRanges(),or.addRange(In)}catch{}Io===!1&&or.extend&&(or.collapse(In.endContainer,In.endOffset),or.extend(In.startContainer,In.startOffset)),p=or.rangeCount>0?or.getRangeAt(0):null}if(!In.collapsed&&In.startContainer===In.endContainer&&(or!=null&&or.setBaseAndExtent)&&In.endOffset-In.startOffset<2&&In.startContainer.hasChildNodes()){const Eo=In.startContainer.childNodes[In.startOffset];Eo&&Eo.nodeName==="IMG"&&(or.setBaseAndExtent(In.startContainer,In.startOffset,In.endContainer,In.endOffset),(or.anchorNode!==In.startContainer||or.focusNode!==In.endContainer)&&or.setBaseAndExtent(Eo,0,Eo,1))}u.dispatch("AfterSetSelectionRange",{range:In,forward:Io})},Qt=In=>(zk(u,t.getOuterHTML(In)),In),Mn=()=>cee(u.getBody(),ut()),bn=(In,Io)=>p0e(t,ut(),In,Io),Wt=()=>{const In=et(),Io=In==null?void 0:In.anchorNode,or=In==null?void 0:In.focusNode;if(!In||!Io||!or||fT(Io)||fT(or))return!0;const Er=t.createRng(),Eo=t.createRng();try{Er.setStart(Io,In.anchorOffset),Er.collapse(!0),Eo.setStart(or,In.focusOffset),Eo.collapse(!0)}catch{return!0}return Er.compareBoundaryPoints(Er.START_TO_START,Eo)<=0},Pi={dom:t,win:s,serializer:a,editor:u,expand:(In={type:"word"})=>_t(Fg(t).expand(ut(),In)),collapse:Qe,setCursorLocation:I,getContent:D,setContent:$,getBookmark:re,moveToBookmark:fe,select:Re,isCollapsed:Ae,isEditable:_e,isForward:Wt,setNode:Qt,getNode:Mn,getSel:et,setRng:_t,getRng:ut,getStart:J,getEnd:te,getSelectedBlocks:bn,normalize:()=>{const In=ut(),Io=et();if(!i3(Io)&&qS(u)){const or=kc(t,In);return or.each(Er=>{_t(Er,Wt())}),or.getOr(In)}return In},selectorChanged:(In,Io)=>(E(In,Io),Pi),selectorChangedWithUnbind:E,getScrollContainer:()=>{let In,Io=t.getRoot();for(;Io&&Io.nodeName!=="BODY";){if(Io.scrollHeight>Io.clientHeight){In=Io;break}Io=Io.parentNode}return In},scrollIntoView:(In,Io)=>{be(In)?aee(u,In,Io):UO(u,ut(),Io)},placeCaretAt:(In,Io)=>_t(H6(In,Io,u.getDoc())),getBoundingClientRect:()=>{const In=ut();return In.collapsed?Pt.fromRangeStart(In).getClientRects()[0]:In.getBoundingClientRect()},destroy:()=>{s=p=b=null,gl.destroy()}},Li=Bm(Pi),gl=V6(Pi,u);return Pi.bookmarkManager=Li,Pi.controlSelection=gl,Pi},az=(t,s,a)=>{s.addNodeFilter("br",(u,p,b)=>{const E=yn.extend({},a.getBlockElements()),I=a.getNonEmptyElements(),D=a.getWhitespaceElements();E.body=1;const $=J=>J.name in E||sS(a,J);for(let J=0,te=u.length;J<te;J++){let re=u[J],fe=re.parent;if(fe&&$(fe)&&re===fe.lastChild){let Re=re.prev;for(;Re;){const Ae=Re.name;if(Ae!=="span"||Re.attr("data-mce-type")!=="bookmark"){Ae==="br"&&(re=null);break}Re=Re.prev}if(re&&(re.remove(),eI(a,I,D,fe))){const Ae=a.getElementRule(fe.name);Ae&&(Ae.removeEmpty?fe.remove():Ae.paddEmpty&&kB(t,b,$,fe))}}else{let Re=re;for(;fe&&fe.firstChild===Re&&fe.lastChild===Re&&(Re=fe,!E[fe.name]);)fe=fe.parent;if(Re===fe){const Ae=new Fu("#text",3);Ae.value=ci,re.replace(Ae)}}}})},cz=(t,s,a)=>{t.addAttributeFilter("data-mce-tabindex",(u,p)=>{let b=u.length;for(;b--;){const E=u[b];E.attr("tabindex",E.attr("data-mce-tabindex")),E.attr(p,null)}}),t.addAttributeFilter("src,href,style",(u,p)=>{const b="data-mce-"+p,E=s.url_converter,I=s.url_converter_scope;let D=u.length;for(;D--;){const $=u[D];let J=$.attr(b);J!==void 0?($.attr(p,J.length>0?J:null),$.attr(b,null)):(J=$.attr(p),p==="style"?J=a.serializeStyle(a.parseStyle(J),$.name):E&&(J=E.call(I,J,p,$.name)),$.attr(p,J.length>0?J:null))}}),t.addAttributeFilter("class",u=>{let p=u.length;for(;p--;){const b=u[p];let E=b.attr("class");E&&(E=E.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),b.attr("class",E.length>0?E:null))}}),t.addAttributeFilter("data-mce-type",(u,p,b)=>{let E=u.length;for(;E--;){const I=u[E];I.attr("data-mce-type")==="bookmark"&&!b.cleanup&&(ce.from(I.firstChild).exists($=>{var J;return!o_((J=$.value)!==null&&J!==void 0?J:"")})?I.unwrap():I.remove())}}),t.addNodeFilter("script,style",(u,p)=>{var b;const E=D=>D.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let I=u.length;for(;I--;){const D=u[I],$=D.firstChild,J=(b=$==null?void 0:$.value)!==null&&b!==void 0?b:"";if(p==="script"){const te=D.attr("type");te&&D.attr("type",te==="mce-no/type"?null:te.replace(/^mce\-/,"")),s.element_format==="xhtml"&&$&&J.length>0&&($.value=`// <![CDATA[
`+E(J)+`
// ]]>`)}else s.element_format==="xhtml"&&$&&J.length>0&&($.value=`<!--
`+E(J)+`
-->`)}}),t.addNodeFilter("#comment",u=>{let p=u.length;for(;p--;){const b=u[p],E=b.value;s.preserve_cdata&&(E==null?void 0:E.indexOf("[CDATA["))===0?(b.name="#cdata",b.type=4,b.value=a.decode(E.replace(/^\[CDATA\[|\]\]$/g,""))):(E==null?void 0:E.indexOf("mce:protected "))===0&&(b.name="#text",b.type=3,b.raw=!0,b.value=unescape(E).substr(14))}}),t.addNodeFilter("xml:namespace,input",(u,p)=>{let b=u.length;for(;b--;){const E=u[b];E.type===7?E.remove():E.type===1&&p==="input"&&!E.attr("type")&&E.attr("type","text")}}),t.addAttributeFilter("data-mce-type",u=>{Ue(u,p=>{p.attr("data-mce-type")==="format-caret"&&(p.isEmpty(t.schema.getNonEmptyElements())?p.remove():p.unwrap())})}),t.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(u,p)=>{let b=u.length;for(;b--;)u[b].attr(p,null)}),s.remove_trailing_brs&&az(s,t,t.schema)},lz=t=>{const s=u=>(u==null?void 0:u.name)==="br",a=t.lastChild;if(s(a)){const u=a.prev;s(u)&&(a.remove(),u.remove())}},uz=(t,s,a)=>{let u;const p=t.dom;let b=s.cloneNode(!0);const E=document.implementation;if(E.createHTMLDocument){const I=E.createHTMLDocument("");yn.each(b.nodeName==="BODY"?b.childNodes:[b],D=>{I.body.appendChild(I.importNode(D,!0))}),b.nodeName!=="BODY"?b=I.body.firstChild:b=I.body,u=p.doc,p.doc=I}return Ah(t,{...a,node:b}),u&&(p.doc=u),b},dz=(t,s)=>be(t)&&t.hasEventListeners("PreProcess")&&!s.no_events,fz=(t,s,a)=>dz(t,a)?uz(t,s,a):s,pz=(t,s,a)=>{yn.inArray(s,a)===-1&&(t.addAttributeFilter(a,(u,p)=>{let b=u.length;for(;b--;)u[b].attr(p,null)}),s.push(a))},DV=(t,s,a)=>!s.no_events&&t?Qx(t,{...s,content:a}).content:a,aM=(t,s,a)=>{const u=Pu(a.getInner?s.innerHTML:t.getOuterHTML(s));return a.selection||fd(Me.fromDom(s))?u:yn.trim(u)},hz=(t,s,a)=>{const u=a.selection?{forced_root_block:!1,...a}:a,p=t.parse(s,u);return lz(p),p},Voe=(t,s,a)=>jy(t,s).serialize(a),mz=(t,s,a,u,p)=>{const b=Voe(s,a,u);return DV(t,p,b)},cM=(t,s)=>{const a=["data-mce-selected"],u={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...t},p=s&&s.dom?s.dom:Ir.DOM,b=s&&s.schema?s.schema:Op(u),E=g0(u,b);cz(E,u,p);const I=(D,$={})=>{const{indent:J,entity_encoding:te,...re}=$,fe={format:"html",...re},Re=fz(s,D,fe),Ae=aM(p,Re,fe),_e=hz(E,Ae,fe);if(fe.format==="tree")return _e;const Qe={...u,...be(J)?{indent:J}:{},...be(te)?{entity_encoding:te}:{}};return mz(s,Qe,b,_e,fe)};return{schema:b,addNodeFilter:E.addNodeFilter,addAttributeFilter:E.addAttributeFilter,serialize:I,addRules:b.addValidElements,setRules:b.setValidElements,addTempAttr:$e(pz,E,a),getTempAttrs:Be(a),getNodeFilters:E.getNodeFilters,getAttributeFilters:E.getAttributeFilters,removeNodeFilter:E.removeNodeFilter,removeAttributeFilter:E.removeAttributeFilter}},lM=(t,s)=>{const a=cM(t,s);return{schema:a.schema,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:a.serialize,addRules:a.addRules,setRules:a.setRules,addTempAttr:a.addTempAttr,getTempAttrs:a.getTempAttrs,getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter}},yI="html",kV=(t,s)=>({...t,format:s,get:!0,getInner:!0}),gz=(t,s={})=>{const a=s.format?s.format:yI,u=kV(s,a);return XB(t,u).fold(at,p=>{const b=rM(t,p);return $k(t,b,p)})},uw="html",MV=(t,s)=>({format:uw,...t,set:!0,content:s}),SI=(t,s,a={})=>{const u=MV(a,s);dI(t,u).each(p=>{const b=ez(t,p.content,p);Uk(t,b.html,p)})},b0=Ir.DOM,Qy=t=>{b0.setStyle(t.id,"display",t.orgDisplay)},CI=t=>ce.from(t).each(s=>s.destroy()),Hoe=t=>{const s=t;s.contentAreaContainer=s.formElement=s.container=s.editorContainer=null,s.bodyElement=s.contentDocument=s.contentWindow=null,s.iframeElement=s.targetElm=null;const a=t.selection;if(a){const u=a.dom;s.selection=a.win=a.dom=u.doc=null}},Foe=t=>{const s=t.formElement;s&&(s._mceOldSubmit&&(s.submit=s._mceOldSubmit,delete s._mceOldSubmit),b0.unbind(s,"submit reset",t.formEventDelegate))},vz=t=>{if(!t.removed){const{_selectionOverrides:s,editorUpload:a}=t,u=t.getBody(),p=t.getElement();u&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&be(p==null?void 0:p.nextSibling)&&b0.remove(p.nextSibling),Dg(t),t.editorManager.remove(t),!t.inline&&u&&Qy(t),kp(t),b0.remove(t.getContainer()),CI(s),CI(a),t.destroy()}},bz=(t,s)=>{const{selection:a,dom:u}=t;if(!t.destroyed){if(!s&&!t.removed){t.remove();return}s||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),CI(a),CI(u)),Foe(t),Hoe(t),t.destroyed=!0}},uM=(()=>{const t={};return{add:(p,b)=>{t[p]=b},get:p=>t[p]?t[p]:{icons:{}},has:p=>ho(t,p)}})(),Ph=pl.ModelManager,e1=(t,s)=>s.dom[t],NV=(t,s)=>parseInt(zi(s,t),10),yz=$e(e1,"clientWidth"),Uoe=$e(e1,"clientHeight"),joe=$e(NV,"margin-top"),zoe=$e(NV,"margin-left"),jf=t=>t.dom.getBoundingClientRect(),zm=(t,s,a)=>{const u=yz(t),p=Uoe(t);return s>=0&&a>=0&&s<=u&&a<=p},Sz=(t,s,a,u)=>{const p=jf(s),b=t?p.left+s.dom.clientLeft+zoe(s):0,E=t?p.top+s.dom.clientTop+joe(s):0,I=a-b,D=u-E;return{x:I,y:D}},PV=(t,s,a)=>{const u=Me.fromDom(t.getBody()),p=t.inline?u:ya(u),b=Sz(t.inline,p,s,a);return zm(p,b.x,b.y)},LV=t=>ce.from(t).map(Me.fromDom),dM=t=>{const s=t.inline?t.getBody():t.getContentAreaContainer();return LV(s).map(br).getOr(!1)};var Woe=()=>{const t=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:t,close:t,getArgs:t}};const BV=t=>{const s=[],a=()=>{const re=t.theme;return re&&re.getNotificationManagerImpl?re.getNotificationManagerImpl():Woe()},u=()=>ce.from(s[0]),p=(re,fe)=>re.type===fe.type&&re.text===fe.text&&!re.progressBar&&!re.timeout&&!fe.progressBar&&!fe.timeout,b=()=>{u().each(re=>{re.reposition()})},E=re=>{s.push(re)},I=re=>{No(s,fe=>fe===re).each(fe=>{s.splice(fe,1)})},D=(re,fe=!0)=>t.removed||!dM(t)?{}:(fe&&t.dispatch("BeforeOpenNotification",{notification:re}),gt(s,Re=>p(a().getArgs(Re),re)).getOrThunk(()=>{t.editorManager.setActive(t);const Re=a().open(re,()=>{I(Re)},()=>y3(t));return E(Re),b(),t.dispatch("OpenNotification",{notification:{...Re}}),Re})),$=()=>{u().each(re=>{a().close(re),I(re),b()})},J=Be(s);return(re=>{re.on("SkinLoaded",()=>{const fe=aO(re);fe&&D({text:fe,type:"warning",timeout:0},!1),b()}),re.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(b)}),re.on("remove",()=>{Ue(s.slice(),fe=>{a().close(fe)})}),re.on("keydown",fe=>{var Re;const Ae=((Re=fe.key)===null||Re===void 0?void 0:Re.toLowerCase())==="f12"||fe.keyCode===123;fe.altKey&&Ae&&(fe.preventDefault(),u().map(_e=>Me.fromDom(_e.getEl())).each(_e=>yb(_e)))})})(t),{open:D,close:$,getNotifications:J}},jv=pl.PluginManager,fC=pl.ThemeManager;var fM=()=>{const t=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:t,openUrl:t,alert:t,confirm:t,close:t}};const pM=t=>{let s=[];const a=()=>{const _e=t.theme;return _e&&_e.getWindowManagerImpl?_e.getWindowManagerImpl():fM()},u=(_e,Qe)=>(...et)=>Qe?Qe.apply(_e,et):void 0,p=_e=>{t.dispatch("OpenWindow",{dialog:_e})},b=_e=>{t.dispatch("CloseWindow",{dialog:_e})},E=(_e,Qe)=>{s.push({instanceApi:_e,triggerElement:Qe}),p(_e)},I=_e=>{b(_e);const Qe=$n(s,({instanceApi:et,triggerElement:ut})=>et===_e?ut:ce.none());s=Oe(s,({instanceApi:et})=>et!==_e),s.length===0?t.focus():Qe.filter(br).each(yb)},D=()=>ce.from(s[s.length-1]),$=_e=>{t.editorManager.setActive(t),HO(t);const Qe=jd();t.ui.show();const et=_e();return E(et,Qe),et},J=(_e,Qe)=>$(()=>a().open(_e,Qe,I)),te=_e=>$(()=>a().openUrl(_e,I)),re=_e=>{s.length!==0&&_e.each(Qe=>yb(Qe))},fe=(_e,Qe,et)=>{const ut=jd(),_t=a();_t.alert(_e,u(et||_t,()=>{re(ut),Qe==null||Qe()}))},Re=(_e,Qe,et)=>{const ut=jd(),_t=a();_t.confirm(_e,u(et||_t,Qt=>{re(ut),Qe==null||Qe(Qt)}))},Ae=()=>{D().each(({instanceApi:_e})=>{a().close(_e),I(_e)})};return t.on("remove",()=>{Ue(s,({instanceApi:_e})=>{a().close(_e)})}),{open:J,openUrl:te,alert:fe,confirm:Re,close:Ae}},VV=(t,s)=>{t.notificationManager.open({type:"error",text:s})},t1=(t,s)=>{t._skinLoaded?VV(t,s):t.on("SkinLoaded",()=>{VV(t,s)})},Goe=(t,s)=>{t1(t,Rp.translate(["Failed to upload image: {0}",s]))},dw=(t,s,a)=>{XT(t,s,{message:a}),console.error(a)},nf=(t,s,a)=>a?`Failed to load ${t}: ${a} from url ${s}`:`Failed to load ${t} url: ${s}`,zf=(t,s,a)=>{dw(t,"PluginLoadError",nf("plugin",s,a))},EI=(t,s,a)=>{dw(t,"IconsLoadError",nf("icons",s,a))},Wf=(t,s,a)=>{dw(t,"LanguageLoadError",nf("language",s,a))},qoe=(t,s,a)=>{dw(t,"ThemeLoadError",nf("theme",s,a))},ei=(t,s,a)=>{dw(t,"ModelLoadError",nf("model",s,a))},Koe=(t,s)=>{dw(t,"LicenseKeyManagerLoadError",nf("license key manager",s))},y0=(t,s,a)=>{const u=Rp.translate(["Failed to initialize plugin: {0}",s]);XT(t,"PluginLoadError",{message:u}),n1(u,a),t1(t,u)},n1=(t,...s)=>{const a=window.console;a&&(a.error?a.error(t,...s):a.log(t,...s))},HV=new WeakMap,FV=t=>{if(HV.has(t))return;HV.set(t,!0);const s=()=>{t.on("SwitchMode",u=>{const{mode:p}=u;p!=="readonly"&&t.mode.set("readonly")})},a=()=>{t.on("DisabledStateChange",u=>{const{state:p}=u;p||u.preventDefault()},!0)};t.initialized?(t.removed||t.mode.set("readonly"),t.options.set("disabled",!0)):t.on("init",()=>{t.removed||t.mode.set("readonly"),t.options.set("disabled",!0)}),a(),s()},hM=(t,s)=>{const{type:a,message:u}=s;t.notificationManager.open({type:a,text:u})},Zoe=t=>{switch(t){case"error":return console.error;case"info":return console.info;case"warn":return console.warn;case"log":default:return console.log}},$V=t=>{Zoe(t.type)(t.message)},UV=(t,s)=>{const{console:a,editor:u}=s;be(u)&&(t._skinLoaded?hM(t,u):t.on("SkinLoaded",()=>{hM(t,u)})),be(a)&&$V(a)},mM="Read more: https://www.tiny.cloud/docs/tinymce/latest/license-key/",jV="Make sure to provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms.",Cz=t=>{const s="The editor is disabled because a TinyMCE license key has not been provided.";UV(t,{console:{type:"error",message:[`${s}`,jV,mM].join(" ")},editor:{type:"warning",message:`${s}`}})},gM=(t,s)=>{const a=`${s==="online"?"API":"license"} key`,u=`The editor is disabled because the TinyMCE ${a} could not be validated.`;UV(t,{console:{type:"error",message:[`${u}`,`The TinyMCE Commercial License Key Manager plugin is required for the provided ${a} to be validated but could not be loaded.`,mM].join(" ")},editor:{type:"warning",message:`${u}`}})},Ez=(t,s)=>{const a=`The "${s}" plugin requires a valid TinyMCE license key.`;UV(t,{console:{type:"error",message:[`${a}`,mM].join(" ")}})},_z="licensekeymanager",Joe=t=>K(xD(t))?"online":"offline",Xoe=t=>{var s;const a=(s=FS(t))===null||s===void 0?void 0:s.toLowerCase();return a==="gpl"?"gpl":De(a)?"no_key":"non_gpl"},wz=t=>{const s=Joe(t),a=Xoe(t),u=new Set(Qb(t)).has(_z);return a!=="gpl"||s==="online"||u?{type:"use_plugin",onlineStatus:s,licenseKeyType:a,forcePlugin:u}:{type:"use_gpl",onlineStatus:s,licenseKeyType:a,forcePlugin:u}},Az=t=>({validate:s=>{const{plugin:a}=s;return K(a)&&Ez(t,a),Promise.resolve(!1)}}),Qoe=t=>({validate:s=>{const{plugin:a}=s,u=K(a);return u&&Ez(t,a),Promise.resolve(!u)}}),vM="manager",Tz=_z,bM=(()=>{const t=pl();return{load:(p,b)=>{if(wz(p).type==="use_plugin"){const I=`plugins/${Tz}/plugin${b}.js`;t.load(vM,I).catch(()=>{Koe(p,I)})}},add:p=>{t.add(vM,p)},init:p=>{const b=D=>{Object.defineProperty(p,"licenseKeyManager",{value:D,writable:!1,configurable:!1,enumerable:!0})},E=wz(p),I=t.get(vM);if(be(I)){const D=I(p,t.urls[vM]);b(D)}else switch(E.type){case"use_gpl":{b(Qoe(p));break}case"use_plugin":{FV(p),b(Az(p)),E.onlineStatus==="offline"&&E.licenseKeyType==="no_key"?Cz(p):gM(p,E.onlineStatus);break}}p.licenseKeyManager.validate({})}}})(),_I=t=>{ce.from(t.selection.getNode()).each(s=>{s.removeAttribute("data-mce-selected")})},zV=(t,s,a)=>{try{t.getDoc().execCommand(s,!1,String(a))}catch{}},ese=(t,s)=>{zV(t,"StyleWithCSS",s),zV(t,"enableInlineTableEditing",s),zV(t,"enableObjectResizing",s)},Oz=t=>{t.selection.setRng(t.selection.getRng())},WV=(t,s,a)=>{sy(t,s)&&!a?oa(t,s):a&&au(t,s)},Iz=t=>{const s=Me.fromDom(t.getBody());WV(s,"mce-content-readonly",!0),t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),_I(t)},GV=t=>{const s=Me.fromDom(t.getBody());WV(s,"mce-content-readonly",!1),t.hasEditableRoot()&&j(s,!0),ese(t,!1),y3(t)&&t.focus(),Oz(t),t.nodeChanged()},wa=t=>$S(t),pC="data-mce-contenteditable",Rz=t=>{Ue(Ht(t,'*[contenteditable="true"]'),s=>{_i(s,pC,"true"),j(s,!1)})},qV=t=>{Ue(Ht(t,`*[${pC}="true"]`),s=>{da(s,pC),j(s,!0)})},yM=(t,s)=>{const a=Me.fromDom(t.getBody());s?(Iz(t),j(a,!1),Rz(a)):(qV(a),GV(t))},xz=t=>{t.serializer?KV(t):t.on("PreInit",()=>{KV(t)})},KV=t=>{t.parser.addAttributeFilter("contenteditable",s=>{wa(t)&&Ue(s,a=>{a.attr(pC,a.attr("contenteditable")),a.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(pC,s=>{wa(t)&&Ue(s,a=>{a.attr("contenteditable",a.attr(pC))})}),t.serializer.addTempAttr(pC)},tse=t=>t.type==="click",nse=["copy"],Dz=t=>bt(nse,t.type),kz=(t,s)=>Kc(s,"a",u=>eo(u,Me.fromDom(t.getBody()))).bind(u=>id(u,"href")),Bp=(t,s)=>{if(tse(s)&&!qn.metaKeyPressed(s)){const a=Me.fromDom(s.target);kz(t,a).each(u=>{if(s.preventDefault(),/^#/.test(u)){const p=t.dom.select(`${u},[name="${rh(u,"#")}"]`);p.length&&t.selection.scrollIntoView(p[0],!0)}else window.open(u,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else Dz(s)&&t.dispatch(s.type,s)},ose=t=>{t.on("ShowCaret ObjectSelected",s=>{wa(t)&&s.preventDefault()}),t.on("DisabledStateChange",s=>{s.isDefaultPrevented()||yM(t,s.state)})},sse=t=>{xz(t),ose(t)},z0e=t=>/^[a-z0-9\-]+$/i.test(t),wI=t=>"content/"+t+"/content.css",rse=t=>tinymce.Resource.has(wI(t)),W0e=t=>SM(t,sO(t)),ise=t=>SM(t,uD(t)),SM=(t,s)=>{const a=t.editorManager.baseURL+"/skins/content",p=`content${t.editorManager.suffix}.css`;return Ut(s,b=>rse(b)?b:z0e(b)&&!t.inline?`${a}/${b}/${p}`:t.documentBaseURI.toAbsolute(b))},Wm=t=>{t.contentCSS=t.contentCSS.concat(W0e(t),ise(t))},ZV=t=>t?Nn(t.getElementsByTagName("img")):[],CM=(t,s)=>{const a={};return{findAll:(p,b=Jt)=>{const E=Oe(ZV(p),D=>{const $=D.src;return D.hasAttribute("data-mce-bogus")||D.hasAttribute("data-mce-placeholder")||!$||$===$s.transparentSrc?!1:$o($,"blob:")?!t.isUploaded($)&&b(D):$o($,"data:")?b(D):!1}),I=Ut(E,D=>{const $=D.src;if(ho(a,$))return a[$].then(J=>K(J)?J:{image:D,blobInfo:J.blobInfo});{const J=zte(s,$).then(te=>(delete a[$],{image:D,blobInfo:te})).catch(te=>(delete a[$],te));return a[$]=J,J}});return Promise.all(I)}}},EM=()=>{let a={};const u=(re,fe)=>({status:re,resultUri:fe}),p=re=>re in a;return{hasBlobUri:p,getResultUri:re=>{const fe=a[re];return fe?fe.resultUri:null},isPending:re=>p(re)?a[re].status===1:!1,isUploaded:re=>p(re)?a[re].status===2:!1,markPending:re=>{a[re]=u(1,null)},markUploaded:(re,fe)=>{a[re]=u(2,fe)},removeFailed:re=>{delete a[re]},destroy:()=>{a={}}}};let ase=0;const YV=()=>{const t=()=>Math.round(tu()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+t()+t()+t()},cse=t=>t+ase+++YV(),Mz=()=>{let t=[];const s=te=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[te.toLowerCase()]||"dat",a=(te,re,fe,Re,Ae)=>{if(K(te))return u({id:te,name:Re,filename:Ae,blob:re,base64:fe});if(se(te))return u(te);throw new Error("Unknown input type")},u=te=>{if(!te.blob||!te.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const re=te.id||cse("blobid"),fe=te.name||re,Re=te.blob;return{id:Be(re),name:Be(fe),filename:Be(te.filename||fe+"."+s(Re.type)),blob:Be(Re),base64:Be(te.base64),blobUri:Be(te.blobUri||URL.createObjectURL(Re)),uri:Be(te.uri)}},p=te=>{E(te.id())||t.push(te)},b=te=>gt(t,te).getOrUndefined(),E=te=>b(re=>re.id()===te);return{create:a,add:p,get:E,getByUri:te=>b(re=>re.blobUri()===te),getByData:(te,re)=>b(fe=>fe.base64()===te&&fe.blob().type===re),findFirst:b,removeByUri:te=>{t=Oe(t,re=>re.blobUri()===te?(URL.revokeObjectURL(re.blobUri()),!1):!0)},destroy:()=>{Ue(t,te=>{URL.revokeObjectURL(te.blobUri())}),t=[]}}},lse=(t,s)=>{const a={},u=(Ae,_e)=>Ae?Ae.replace(/\/$/,"")+"/"+_e.replace(/^\//,""):_e,p=(Ae,_e)=>new Promise((Qe,et)=>{const ut=new XMLHttpRequest;ut.open("POST",s.url),ut.withCredentials=s.credentials,ut.upload.onprogress=Qt=>{_e(Qt.loaded/Qt.total*100)},ut.onerror=()=>{et("Image upload failed due to a XHR Transport error. Code: "+ut.status)},ut.onload=()=>{if(ut.status<200||ut.status>=300){et("HTTP Error: "+ut.status);return}const Qt=JSON.parse(ut.responseText);if(!Qt||!K(Qt.location)){et("Invalid JSON: "+ut.responseText);return}Qe(u(s.basePath,Qt.location))};const _t=new FormData;_t.append("file",Ae.blob(),Ae.filename()),ut.send(_t)}),b=me(s.handler)?s.handler:p,E=()=>new Promise(Ae=>{Ae([])}),I=(Ae,_e)=>({url:_e,blobInfo:Ae,status:!0}),D=(Ae,_e)=>({url:"",blobInfo:Ae,status:!1,error:_e}),$=(Ae,_e)=>{yn.each(a[Ae],Qe=>{Qe(_e)}),delete a[Ae]},J=(Ae,_e,Qe)=>(t.markPending(Ae.blobUri()),new Promise(et=>{let ut,_t;try{const Qt=()=>{ut&&(ut.close(),_t=Ze)},Mn=Wt=>{Qt(),t.markUploaded(Ae.blobUri(),Wt),$(Ae.blobUri(),I(Ae,Wt)),et(I(Ae,Wt))},bn=Wt=>{Qt(),t.removeFailed(Ae.blobUri()),$(Ae.blobUri(),D(Ae,Wt)),et(D(Ae,Wt))};_t=Wt=>{Wt<0||Wt>100||ce.from(ut).orThunk(()=>ce.from(Qe).map(En)).each(ct=>{ut=ct,ct.progressBar.value(Wt)})},_e(Ae,_t).then(Mn,Wt=>{bn(K(Wt)?{message:Wt}:Wt)})}catch(Qt){et(D(Ae,Qt))}})),te=Ae=>Ae===p,re=Ae=>{const _e=Ae.blobUri();return new Promise(Qe=>{a[_e]=a[_e]||[],a[_e].push(Qe)})},fe=(Ae,_e)=>(Ae=yn.grep(Ae,Qe=>!t.isUploaded(Qe.blobUri())),Promise.all(yn.map(Ae,Qe=>t.isPending(Qe.blobUri())?re(Qe):J(Qe,b,_e))));return{upload:(Ae,_e)=>!s.url&&te(b)?E():fe(Ae,_e)}},Nz=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),_M=(t,s)=>lse(s,{url:E6(t),basePath:IS(t),credentials:O4(t),handler:_6(t)}),use=t=>{const s=EM(),a=_M(t,s);return{upload:(u,p=!0)=>a.upload(u,p?Nz(t):void 0)}},Pz=(t,s)=>t.dom.isEmpty(s.dom)&&be(t.schema.getTextBlockElements()[Xo(s)]),dse=t=>s=>{Pz(t,s)&&Qs(s,Me.fromHtml('<br data-mce-bogus="1" />'))},hC=t=>{const s=Mz();let a,u;const p=EM(),b=[],E=ut=>_t=>t.selection?ut(_t):[],I=ut=>ut+(ut.indexOf("?")===-1?"?":"&")+new Date().getTime(),D=(ut,_t,Qt)=>{let Mn=0;do Mn=ut.indexOf(_t,Mn),Mn!==-1&&(ut=ut.substring(0,Mn)+Qt+ut.substr(Mn+_t.length),Mn+=Qt.length-_t.length+1);while(Mn!==-1);return ut},$=(ut,_t,Qt)=>{const Mn=`src="${Qt}"${Qt===$s.transparentSrc?' data-mce-placeholder="1"':""}`;return ut=D(ut,`src="${_t}"`,Mn),ut=D(ut,'data-mce-src="'+_t+'"','data-mce-src="'+Qt+'"'),ut},J=(ut,_t)=>{Ue(t.undoManager.data,Qt=>{Qt.type==="fragmented"?Qt.fragments=Ut(Qt.fragments,Mn=>$(Mn,ut,_t)):Qt.content=$(Qt.content,ut,_t)})},te=(ut,_t)=>{const Qt=t.convertURL(_t,"src");J(ut.src,_t),Ac(Me.fromDom(ut),{src:Ws(t)?I(_t):_t,"data-mce-src":Qt})},re=()=>(a||(a=_M(t,p)),_e().then(E(ut=>{const _t=Ut(ut,Qt=>Qt.blobInfo);return a.upload(_t,Nz(t)).then(E(Qt=>{const Mn=[];let bn=!1;const Wt=Ut(Qt,(ct,ke)=>{const{blobInfo:wt,image:vn}=ut[ke];let Ao=!1;return ct.status&&S6(t)?(ct.url&&!ii(vn.src,ct.url)&&(bn=!0),s.removeByUri(vn.src),Lp(t)||te(vn,ct.url)):ct.error&&(ct.error.remove&&(J(vn.src,$s.transparentSrc),Mn.push(vn),Ao=!0),Goe(t,ct.error.message)),{element:vn,status:ct.status,uploadUri:ct.url,blobInfo:wt,removed:Ao}});return Mn.length>0&&!Lp(t)?t.undoManager.transact(()=>{Ue(dm(Mn),ct=>{const ke=Rl(ct);Vr(ct),ke.each(dse(t)),s.removeByUri(ct.dom.src)})}):bn&&t.undoManager.dispatchChange(),Wt}))}))),fe=()=>Xb(t)?re():Promise.resolve([]),Re=ut=>ys(b,_t=>_t(ut)),Ae=ut=>{b.push(ut)},_e=()=>(u||(u=CM(p,s)),u.findAll(t.getBody(),Re).then(E(ut=>{const _t=Oe(ut,Qt=>K(Qt)?(t1(t,Qt),!1):Qt.uriType!=="blob");return Lp(t)||Ue(_t,Qt=>{J(Qt.image.src,Qt.blobInfo.blobUri()),Qt.image.src=Qt.blobInfo.blobUri(),Qt.image.removeAttribute("data-mce-src")}),_t}))),Qe=()=>{s.destroy(),p.destroy(),u=a=null},et=ut=>ut.replace(/src="(blob:[^"]+)"/g,(_t,Qt)=>{const Mn=p.getResultUri(Qt);if(Mn)return'src="'+Mn+'"';let bn=s.getByUri(Qt);return bn||(bn=tn(t.editorManager.get(),(Wt,ct)=>Wt||ct.editorUpload&&ct.editorUpload.blobCache.getByUri(Qt),void 0)),bn?'src="data:'+bn.blob().type+";base64,"+bn.base64()+'"':_t});return t.on("SetContent",()=>{Xb(t)?fe():_e()}),t.on("RawSaveContent",ut=>{ut.content=et(ut.content)}),t.on("GetContent",ut=>{ut.source_view||ut.format==="raw"||ut.format==="tree"||(ut.content=et(ut.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",ut=>{Ue(ut,_t=>{const Qt=_t.attr("src");if(!Qt||s.getByUri(Qt))return;const Mn=p.getResultUri(Qt);Mn&&_t.attr("src",Mn)})})}),{blobCache:s,addFilter:Ae,uploadImages:re,uploadImagesAuto:fe,scanForImages:_e,destroy:Qe}},Lz=t=>{const s=t.dom,a=t.schema.type,u={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:p=>{s.setStyle(p,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:p=>{s.setStyle(p,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const p={inline:"span",styles:{textDecoration:"line-through"},exact:!0},b={inline:"strike",remove:"all",preserve_attributes:["class","style"]},E={inline:"s",remove:"all",preserve_attributes:["class","style"]};return a!=="html4"?[E,p,b]:[p,E,b]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(p,b,E)=>vo(p)&&p.hasAttribute("href"),onformat:(p,b,E)=>{yn.each(E,(I,D)=>{s.setAttrib(p,D,I)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":p=>{var b;return(b=p==null?void 0:p.customValue)!==null&&b!==void 0?b:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return yn.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),p=>{u[p]={block:p,remove:"all"}}),u},Bz={remove_similar:!0,inherit:!1},mC={selector:"td,th",...Bz},fse={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...mC},tablecellverticalalign:{styles:{"vertical-align":"%value"},...mC},tablecellbordercolor:{styles:{borderColor:"%value"},...mC},tablecellclass:{classes:["%value"],...mC},tableclass:{selector:"table",classes:["%value"],...Bz},tablecellborderstyle:{styles:{borderStyle:"%value"},...mC},tablecellborderwidth:{styles:{borderWidth:"%value"},...mC}},pse=Be(fse),hse=t=>{const s={},a=E=>be(E)?s[E]:s,u=E=>ho(s,E),p=(E,I)=>{E&&(K(E)?(le(I)||(I=[I]),Ue(I,D=>{Ne(D.deep)&&(D.deep=!Fn(D)),Ne(D.split)&&(D.split=!Fn(D)||On(D)),Ne(D.remove)&&Fn(D)&&!On(D)&&(D.remove="none"),Fn(D)&&On(D)&&(D.mixed=!0,D.block_expand=!0),K(D.classes)&&(D.classes=D.classes.split(/\s+/))}),s[E]=I):wn(E,(D,$)=>{p($,D)}))},b=E=>(E&&s[E]&&delete s[E],s);return p(Lz(t)),p(pse()),p(x4(t)),{get:a,has:u,register:p,unregister:b}},wM=yn.each,Lh=Ir.DOM,AM=t=>be(t)&&se(t),Vz=(t,s)=>{const a=s&&s.schema||Op({}),u=(D,$)=>{$.classes.length>0&&Lh.addClass(D,$.classes.join(" ")),Lh.setAttribs(D,$.attrs)},p=D=>{const $=K(D)?{name:D,classes:[],attrs:{}}:D,J=Lh.create($.name);return u(J,$),J},b=(D,$)=>{const J=a.getElementRule(D.nodeName.toLowerCase()),te=J==null?void 0:J.parentsRequired;return te&&te.length?$&&bt(te,$)?$:te[0]:!1},E=(D,$,J)=>{let te;const re=$[0],fe=AM(re)?re.name:void 0,Re=b(D,fe);if(Re)fe===Re?(te=re,$=$.slice(1)):te=Re;else if(re)te=re,$=$.slice(1);else if(!J)return D;const Ae=te?p(te):Lh.create("div");Ae.appendChild(D),J&&yn.each(J,Qe=>{const et=p(Qe);Ae.insertBefore(et,D)});const _e=AM(te)?te.siblings:void 0;return E(Ae,$,_e)},I=Lh.create("div");if(t.length>0){const D=t[0],$=p(D),J=AM(D)?D.siblings:void 0;I.appendChild(E($,t.slice(1),J))}return I},JV=t=>{t=yn.trim(t);let s="div";const a={name:s,classes:[],attrs:{},selector:t};return t!=="*"&&(s=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(u,p,b,E,I)=>{switch(p){case"#":a.attrs.id=b;break;case".":a.classes.push(b);break;case":":yn.inArray("checked disabled enabled read-only required".split(" "),b)!==-1&&(a.attrs[b]=b);break}if(E==="["){const D=I.match(/([\w\-]+)(?:\=\"([^\"]+))?/);D&&(a.attrs[D[1]]=D[2])}return""})),a.name=s||"div",a},o1=t=>K(t)?(t=t.split(/\s*,\s*/)[0],t=t.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),yn.map(t.split(/(?:>|\s+(?![^\[\]]+\]))/),s=>{const a=yn.map(s.split(/(?:~\+|~|\+)/),JV),u=a.pop();return a.length&&(u.siblings=a),u}).reverse()):[],mse=(t,s)=>{let a="",u=DS(t);if(u==="")return"";const p=re=>K(re)?re.replace(/%(\w+)/g,""):"",b=(re,fe)=>Lh.getStyle(fe??t.getBody(),re,!0);if(K(s)){const re=t.formatter.get(s);if(!re)return"";s=re[0]}if("preview"in s){const re=s.preview;if(re===!1)return"";u=re||u}let E=s.block||s.inline||"span",I;const D=o1(s.selector);D.length>0?(D[0].name||(D[0].name=E),E=s.selector,I=Vz(D,t)):I=Vz([E],t);const $=Lh.select(E,I)[0]||I.firstChild;wM(s.styles,(re,fe)=>{const Re=p(re);Re&&Lh.setStyle($,fe,Re)}),wM(s.attributes,(re,fe)=>{const Re=p(re);Re&&Lh.setAttrib($,fe,Re)}),wM(s.classes,re=>{const fe=p(re);Lh.hasClass($,fe)||Lh.addClass($,fe)}),t.dispatch("PreviewFormats"),Lh.setStyles(I,{position:"absolute",left:-65535}),t.getBody().appendChild(I);const J=b("fontSize"),te=/px$/.test(J)?parseInt(J,10):0;return wM(u.split(" "),re=>{let fe=b(re,$);if(!(re==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(fe)&&(fe=b(re),Vb(fe).toLowerCase()==="#ffffff"))&&!(re==="color"&&Vb(fe).toLowerCase()==="#000000")){if(re==="font-size"&&/em|%$/.test(fe)){if(te===0)return;fe=parseFloat(fe)/(/%$/.test(fe)?100:1)*te+"px"}re==="border"&&fe&&(a+="padding:0 2px;"),a+=re+":"+fe+";"}}),t.dispatch("AfterPreviewFormats"),Lh.remove(I),a},gse=t=>{t.addShortcut("meta+b","","Bold"),t.addShortcut("meta+i","","Italic"),t.addShortcut("meta+u","","Underline");for(let s=1;s<=6;s++)t.addShortcut("access+"+s,"",["FormatBlock",!1,"h"+s]);t.addShortcut("access+7","",["FormatBlock",!1,"p"]),t.addShortcut("access+8","",["FormatBlock",!1,"div"]),t.addShortcut("access+9","",["FormatBlock",!1,"address"])},fw=t=>{const s=hse(t),a=fo({});return gse(t),gte(t),Lp(t)||qk(a,t),{get:s.get,has:s.has,register:s.register,unregister:s.unregister,apply:(u,p,b)=>{Boe(t,u,p,b)},remove:(u,p,b,E)=>{Jj(t,u,p,b,E)},toggle:(u,p,b)=>{Xj(t,u,p,b)},match:(u,p,b,E)=>Zj(t,u,p,b,E),closest:u=>Loe(t,u),matchAll:(u,p)=>dC(t,u,p),matchNode:(u,p,b,E)=>Yj(t,u,p,b,E),canApply:u=>OV(t,u),formatChanged:(u,p,b,E)=>Qj(t,a,u,p,b,E),getCssText:$e(mse,t)}},XV=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},Hz=(t,s,a)=>{const u=fo(!1),p=D=>{Qk(s,!1,a),s.add({},D)};t.on("init",()=>{s.add()}),t.on("BeforeExecCommand",D=>{const $=D.command;XV($)||(uC(s,a),s.beforeChange())}),t.on("ExecCommand",D=>{const $=D.command;XV($)||p(D)}),t.on("ObjectResizeStart cut",()=>{s.beforeChange()}),t.on("SaveContent ObjectResized blur",p),t.on("dragend",p),t.on("keyup",D=>{const $=D.keyCode;if(D.isDefaultPrevented())return;const J=$s.os.isMacOS()&&D.key==="Meta";($>=33&&$<=36||$>=37&&$<=40||$===45||D.ctrlKey||J)&&(p(),t.nodeChanged()),($===46||$===8)&&t.nodeChanged(),u.get()&&s.typing&&!yV(Jk(t),s.data[0])&&(t.isDirty()||t.setDirty(!0),t.dispatch("TypingUndo"),u.set(!1),t.nodeChanged())}),t.on("keydown",D=>{const $=D.keyCode;if(D.isDefaultPrevented())return;if($>=33&&$<=36||$>=37&&$<=40||$===45){s.typing&&p(D);return}const J=D.ctrlKey&&!D.altKey||D.metaKey;if(($<16||$>20)&&$!==224&&$!==91&&!s.typing&&!J){s.beforeChange(),Qk(s,!0,a),s.add({},D),u.set(!0);return}($s.os.isMacOS()?D.metaKey:D.ctrlKey&&!D.altKey)&&s.beforeChange()}),t.on("mousedown",D=>{s.typing&&p(D)});const b=D=>D.inputType==="insertReplacementText",E=D=>D.inputType==="insertText"&&D.data===null,I=D=>D.inputType==="insertFromPaste"||D.inputType==="insertFromDrop";t.on("input",D=>{D.inputType&&(b(D)||E(D)||I(D))&&p(D)}),t.on("AddUndo Undo Redo ClearUndos",D=>{D.isDefaultPrevented()||t.nodeChanged()})},Fz=t=>{t.addShortcut("meta+z","","Undo"),t.addShortcut("meta+y,meta+shift+z","","Redo")},AI=t=>{const s=yc(),a=fo(0),u=fo(0),p={data:[],typing:!1,beforeChange:()=>{oM(t,a,s)},add:(b,E)=>EV(t,p,u,a,s,b,E),dispatchChange:()=>{t.setDirty(!0);const b=Jk(t);b.bookmark=wS(t.selection),t.dispatch("change",{level:b,lastLevel:ft(p.data,u.get()).getOrUndefined()})},undo:()=>_V(t,p,a,u),redo:()=>wV(t,u,p.data),clear:()=>{AV(t,p,u)},reset:()=>{sM(t,p)},hasUndo:()=>TV(t,p,u),hasRedo:()=>Wj(t,p,u),transact:b=>Gj(t,p,a,b),ignore:b=>{qj(t,a,b)},extra:(b,E)=>{Kj(t,p,u,b,E)}};return Lp(t)||Hz(t,p,a),Fz(t),p},$z=[9,27,qn.HOME,qn.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,qn.DOWN,qn.UP,qn.LEFT,qn.RIGHT].concat($s.browser.isFirefox()?[224]:[]),Uz="data-mce-placeholder",QV=t=>t.type==="keydown"||t.type==="keyup",jz=t=>{const s=t.keyCode;return s===qn.BACKSPACE||s===qn.DELETE},vse=t=>{if(QV(t)){const s=t.keyCode;return!jz(t)&&(qn.metaKeyPressed(t)||t.altKey||s>=112&&s<=123||bt($z,s))}else return!1},TM=t=>QV(t)&&!(jz(t)||t.type==="keyup"&&t.keyCode===229),zz=(t,s,a)=>{if(t.isEmpty(s,void 0,{skipBogus:!1,includeZwsp:!0})){const u=s.firstElementChild;return u?t.getStyle(s.firstElementChild,"padding-left")||t.getStyle(s.firstElementChild,"padding-right")?!1:a===u.nodeName.toLowerCase():!0}else return!1},Wz=t=>{var s;const a=t.dom,u=Qc(t),p=(s=fD(t))!==null&&s!==void 0?s:"",b=(E,I)=>{if(vse(E))return;const D=t.getBody(),$=TM(E)?!1:zz(a,D,u);(a.getAttrib(D,Uz)!==""!==$||I)&&(a.setAttrib(D,Uz,$?p:null),C4(t,$),t.on($?"keydown":"keyup",b),t.off($?"keyup":"keydown",b))};Ar(p)&&t.on("init",E=>{b(E,!0),t.on("change SetContent ExecCommand",b),t.on("paste",I=>kh.setEditorTimeout(t,()=>b(I)))})},OM=t=>s=>be(s)&&s.nodeName.toLowerCase()===t,IM=t=>s=>be(s)&&t.test(s.nodeName),zv=t=>be(t)&&t.nodeType===3,Gz=t=>be(t)&&t.nodeType===1,Vp=IM(/^(OL|UL|DL)$/),eH=IM(/^(OL|UL)$/),RM=IM(/^(LI|DT|DD)$/),qz=IM(/^(DT|DD)$/),gC=OM("br"),bse=t=>{var s;return((s=t.parentNode)===null||s===void 0?void 0:s.firstChild)===t},tH=(t,s)=>be(s)&&s.nodeName in t.schema.getTextBlockElements(),vC=(t,s)=>be(t)&&t.nodeName in s,zg=(t,s)=>be(s)&&s.nodeName in t.schema.getVoidElements(),yse=(t,s)=>gC(s)?t.isBlock(s.nextSibling)&&!gC(s.previousSibling):!1,S0=(t,s,a)=>{const u=t.isEmpty(s);return a&&t.select("span[data-mce-type=bookmark]",s).length>0?!1:u},Ki=(t,s)=>t.isChildOf(s,t.getRoot()),xM=Ir.DOM,DM=(t,s)=>{const a=s.parentElement;if(a&&a.nodeName==="LI"&&a.firstChild===s){const u=a.previousSibling;u&&u.nodeName==="LI"?(u.appendChild(s),S0(t,a)&&xM.remove(a)):xM.setStyle(a,"listStyleType","none")}if(Vp(a)){const u=a.previousSibling;u&&u.nodeName==="LI"&&u.appendChild(s)}},Wg=(t,s)=>{const a=yn.grep(t.select("ol,ul",s));yn.each(a,u=>{DM(t,u)})},nH=(t,s)=>{if(zv(t))return{container:t,offset:s};const a=Fg.getNode(t,s);return zv(a)?{container:a,offset:s>=t.childNodes.length?a.data.length:0}:a.previousSibling&&zv(a.previousSibling)?{container:a.previousSibling,offset:a.previousSibling.data.length}:a.nextSibling&&zv(a.nextSibling)?{container:a.nextSibling,offset:0}:{container:t,offset:s}},TI=t=>{const s=t.cloneRange(),a=nH(t.startContainer,t.startOffset);s.setStart(a.container,a.offset);const u=nH(t.endContainer,t.endOffset);return s.setEnd(u.container,u.offset),s},Kz=["OL","UL","DL"],bC=Kz.join(","),OI=(t,s)=>{const a=t.selection.getStart(!0);return t.dom.getParent(a,bC,Gg(t,a))},Sse=(t,s)=>be(t)&&s.length===1&&s[0]===t,pw=t=>Oe(t.querySelectorAll(bC),Vp),Cse=t=>{const s=OI(t),a=t.selection.getSelectedBlocks();return Sse(s,a)?pw(s):Oe(a,u=>Vp(u)&&s!==u)},yC=(t,s)=>{const a=yn.map(s,u=>{const p=t.dom.getParent(u,"li,dd,dt",Gg(t,u));return p||u});return lo(a)},oH=t=>{const s=t.selection.getSelectedBlocks();return Oe(yC(t,s),RM)},s1=t=>Oe(oH(t),qz),sH=(t,s)=>{const a=t.dom.getParents(s,"TD,TH");return a.length>0?a[0]:t.getBody()},Bh=(t,s)=>!Vp(s)&&!RM(s)&&Kt(Kz,a=>t.isValidChild(s.nodeName,a)),Gg=(t,s)=>{const a=t.dom.getParents(s,t.dom.isBlock),u=b=>b.nodeName.toLowerCase()!==Qc(t);return gt(a,b=>u(b)&&Bh(t.schema,b)).getOr(t.getBody())},Ese=t=>Rl(t).exists(s=>RM(s.dom)&&za(s).exists(a=>!Vp(a.dom))&&ea(s).exists(a=>!Vp(a.dom))),hw=(t,s)=>{const a=t.dom.getParents(s,"ol,ul",Gg(t,s));return Dt(a)},rH=t=>{const s=hw(t,t.selection.getStart()),a=Oe(t.selection.getSelectedBlocks(),eH);return s.toArray().concat(a)},_se=t=>{const s=t.selection.getStart();return t.dom.getParents(s,"ol,ul",Gg(t,s))},mw=t=>{const s=rH(t),a=_se(t);return gt(a,u=>Ese(Me.fromDom(u))).fold(()=>wse(t,s),u=>[u])},wse=(t,s)=>{const a=Ut(s,u=>hw(t,u).getOr(u));return lo(a)},Gf=t=>/\btox\-/.test(t.className),II=(t,s)=>s!==null&&!t.dom.isEditable(s),Zz=t=>{const s=OI(t);return II(t,s)||!t.selection.isEditable()},RI=(t,s)=>{const a=t.dom.getParent(s,"ol,ul,dl");return II(t,a)||!t.selection.isEditable()},C0=(t,s,a)=>t.dispatch("ListMutation",{action:s,element:a}),r1=(t,s,a={})=>{const u=t.dom,p=t.schema.getBlockElements(),b=u.createFragment(),E=Qc(t),I=Dy(t);let D,$,J=!1;for($=u.create(E,{...I,...a.style?{style:a.style}:{}}),vC(s.firstChild,p)||b.appendChild($);D=s.firstChild;){const te=D.nodeName;!J&&(te!=="SPAN"||D.getAttribute("data-mce-type")!=="bookmark")&&(J=!0),vC(D,p)?(b.appendChild(D),$=null):($||($=u.create(E,I),b.appendChild($)),$.appendChild(D))}return!J&&$&&$.appendChild(u.create("br",{"data-mce-bogus":"1"})),b},SC=t=>Ua(t,"OL,UL"),Ase=t=>Ua(t,"LI"),Yz=t=>za(t).exists(SC),Tse=t=>ea(t).exists(SC),Ose=(t,s)=>DD(t).map(a=>a>=s).getOr(!0),CC=t=>"listAttributes"in t,Jz=t=>"isComment"in t,gw=t=>"isFragment"in t,Gm=t=>t.depth>0,Ise=t=>t.isSelected,Rse=t=>{const s=Oi(t),a=Tse(t)?s.slice(0,-1):s;return Ut(a,gp)},xse=(t,s,a)=>Rl(t).filter(ki).map(u=>({depth:s,dirty:!1,isSelected:a,content:Rse(t),itemAttributes:Ds(t),listAttributes:Ds(u),listType:Xo(u),isInPreviousLi:!1})),Xz=(t,s)=>{Qs(t.item,s.list)},Dse=t=>{for(let s=1;s<t.length;s++)Xz(t[s-1],t[s])},kse=(t,s)=>{Vi(Dt(t),It(s),Xz)},Mse=(t,s)=>{const a={list:Me.fromTag(s,t),item:Me.fromTag("li",t)};return Qs(a.list,a.item),a},Nse=(t,s,a)=>{const u=[];for(let p=0;p<a;p++)u.push(Mse(t,CC(s)?s.listType:s.parentListType));return u},Pse=(t,s)=>{for(let a=0;a<t.length-1;a++)Gc(t[a].item,"list-style-type","none");Dt(t).each(a=>{CC(s)&&(Ac(a.list,s.listAttributes),Ac(a.item,s.itemAttributes)),rd(a.item,s.content)})},G0e=(t,s)=>{Xo(t.list)!==s.listType&&(t.list=uh(t.list,s.listType)),Ac(t.list,s.listAttributes)},Lse=(t,s,a)=>{const u=Me.fromTag("li",t);return Ac(u,s),rd(u,a),u},Bse=(t,s)=>{Qs(t.list,s),t.item=s},Qz=(t,s,a)=>{const u=s.slice(0,a.depth);return Dt(u).each(p=>{if(CC(a)){const b=Lse(t,a.itemAttributes,a.content);Bse(p,b),G0e(p,a)}else if(gw(a))rd(p.item,a.content);else{const b=Me.fromHtml(`<!--${a.content}-->`);Qs(p.list,b)}}),u},Vse=(t,s,a)=>{const u=Nse(t,a,a.depth-s.length);return Dse(u),Pse(u,a),kse(s,u),s.concat(u)},Hse=(t,s)=>{let a=ce.none();const u=tn(s,(p,b,E)=>Jz(b)?E===0?(a=ce.some(b),p):Qz(t,p,b):b.depth>p.length?Vse(t,p,b):Qz(t,p,b),[]);return a.each(p=>{const b=Me.fromHtml(`<!--${p.content}-->`);It(u).each(E=>{mp(E.list,b)})}),It(u).map(p=>p.list)},Fse=(t,s,a)=>{switch(s){case"Indent":if(Ose(t,a.depth))a.depth++;else return;break;case"Outdent":a.depth--;break;case"Flatten":a.depth=0}a.dirty=!0},i1=(t,s)=>{CC(t)&&CC(s)&&(t.listType=s.listType,t.listAttributes={...s.listAttributes})},$se=t=>{t.listAttributes=Yi(t.listAttributes,(s,a)=>a!=="start")},Use=(t,s)=>{const a=t[s].depth,u=b=>b.depth===a&&!b.dirty,p=b=>b.depth<a;return ht(ps(t.slice(0,s)),u,p).orThunk(()=>ht(t.slice(s+1),u,p))},kM=t=>(Ue(t,(s,a)=>{Use(t,a).fold(()=>{s.dirty&&CC(s)&&$se(s)},u=>i1(s,u))}),t),iH=(t,s,a,u)=>{var p;if(ji(u))return[{depth:t+1,content:(p=u.dom.nodeValue)!==null&&p!==void 0?p:"",dirty:!1,isSelected:!1,isComment:!0}];s.each(I=>{eo(I.start,u)&&a.set(!0)});const b=xse(u,t,a.get());s.each(I=>{eo(I.end,u)&&a.set(!1)});const E=ea(u).filter(SC).map(I=>MM(t,s,a,I)).getOr([]);return b.toArray().concat(E)},aH=(t,s,a,u)=>za(u).filter(SC).fold(()=>iH(t,s,a,u),p=>{const b=tn(Oi(u),(E,I,D)=>{if(D===0)return E;if(Ase(I))return E.concat(iH(t,s,a,I));{const $={isFragment:!0,depth:t,content:[I],isSelected:!1,dirty:!1,parentListType:Xo(p)};return E.concat($)}},[]);return MM(t,s,a,p).concat(b)}),MM=(t,s,a,u)=>Jn(Oi(u),p=>{const b=SC(p)?MM:aH,E=t+1;return b(E,s,a,p)}),jse=(t,s)=>{const a=fo(!1),u=0;return Ut(t,p=>({sourceList:p,entries:MM(u,s,a,p)}))},zse=(t,s)=>{const a=kM(s);return Ut(a,u=>{const p=Jz(u)?pm([Me.fromHtml(`<!--${u.content}-->`)]):pm(u.content),b=CC(u)?u.itemAttributes:{};return Me.fromDom(r1(t,p.dom,b))})},Wse=(t,s)=>{const a=kM(s);return Hse(t.contentDocument,a).toArray()},Gse=(t,s)=>Jn(pt(s,Gm),a=>It(a).exists(Gm)?Wse(t,a):zse(t,a)),qse=(t,s,a)=>{Ue(Oe(s,Ise),u=>Fse(t,a,u))},Kse=t=>{const s=Ut(oH(t),Me.fromDom);return Vi(gt(s,qt(Yz)),gt(ps(s),qt(Yz)),(a,u)=>({start:a,end:u}))},Zse=(t,s,a)=>{const u=jse(s,Kse(t));Ue(u,p=>{qse(t,p.entries,a);const b=Gse(t,p.entries);Ue(b,E=>{C0(t,a==="Indent"?"IndentList":"OutdentList",E.dom)}),_E(p.sourceList,b),Vr(p.sourceList)})},Yse=t=>DD(t).forall(s=>{const a=t.selection.getSelectedBlocks();return Kt(a,u=>Kc(Me.fromDom(u),"li").forall(p=>Xe(p,"ol,ul").length<=s))}),a1=Ir.DOM,Jse=(t,s,a)=>{const u=$=>{const J=$.parentNode;J&&yn.each(p,te=>{J.insertBefore(te,a.parentNode)}),a1.remove($)},p=a1.select('span[data-mce-type="bookmark"]',s),b=r1(t,a),E=a1.createRng();E.setStartAfter(a),E.setEndAfter(s);const I=E.extractContents();for(let $=I.firstChild;$;$=$.firstChild)if($.nodeName==="LI"&&t.dom.isEmpty($)){a1.remove($);break}t.dom.isEmpty(I)||a1.insertAfter(I,s),a1.insertAfter(b,s);const D=a.parentElement;D&&S0(t.dom,D)&&u(D),a1.remove(a),S0(t.dom,s)&&a1.remove(s)},Xse=ua("dd"),eW=ua("dt"),Qse=(t,s)=>{Xse(s)?uh(s,"dt"):eW(s)&&Du(s).each(a=>Jse(t,a.dom,s.dom))},ere=t=>{eW(t)&&uh(t,"dd")},tre=(t,s,a)=>{s==="Indent"?Ue(a,ere):Ue(a,u=>Qse(t,u))},nre=(t,s)=>{const a=dm(mw(t)),u=dm(s1(t));let p=!1;if(a.length||u.length){const b=t.selection.getBookmark();Zse(t,a,s),tre(t,s,u),t.selection.moveToBookmark(b),t.selection.setRng(TI(t.selection.getRng())),t.nodeChanged(),p=!0}return p},cH=(t,s)=>!Zz(t)&&nre(t,s),tW=t=>cH(t,"Indent"),lH=t=>cH(t,"Outdent"),xI=t=>cH(t,"Flatten"),vw=t=>{switch(t){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},ore=(t,s,a)=>{const u=a["list-style-type"]?a["list-style-type"]:null;t.setStyle(s,"list-style-type",u)},nW=(t,s)=>{yn.each(s,(a,u)=>{t.setAttribute(u,a)})},sre=(t,s,a)=>{nW(s,a["list-attributes"]),yn.each(t.select("li",s),u=>{nW(u,a["list-item-attributes"])})},bw=(t,s,a)=>{ore(t,s,a),sre(t,s,a)},rre=(t,s,a)=>{yn.each(a,u=>t.setStyle(s,u,""))},NM=(t,s)=>be(s)&&!vC(s,t.schema.getBlockElements()),uH=(t,s,a,u)=>{let p=s[a?"startContainer":"endContainer"];const b=s[a?"startOffset":"endOffset"];Gz(p)&&(p=p.childNodes[Math.min(b,p.childNodes.length-1)]||p),!a&&gC(p.nextSibling)&&(p=p.nextSibling);const E=D=>{for(;!t.dom.isBlock(D)&&D.parentNode&&u!==D;)D=D.parentNode;return D},I=(D,$)=>{var J;const te=new Kr(D,E(D)),re=$?"next":"prev";let fe;for(;fe=te[re]();)if(!(zg(t,fe)||Cc(fe.textContent)||((J=fe.textContent)===null||J===void 0?void 0:J.length)===0))return ce.some(fe);return ce.none()};if(a&&zv(p))if(Cc(p.textContent))p=I(p,!1).getOr(p);else for(p.parentNode!==null&&NM(t,p.parentNode)&&(p=p.parentNode);p.previousSibling!==null&&(NM(t,p.previousSibling)||zv(p.previousSibling));)p=p.previousSibling;if(!a&&zv(p))if(Cc(p.textContent))p=I(p,!0).getOr(p);else for(p.parentNode!==null&&NM(t,p.parentNode)&&(p=p.parentNode);p.nextSibling!==null&&(NM(t,p.nextSibling)||zv(p.nextSibling));)p=p.nextSibling;for(;p.parentNode!==u;){const D=p.parentNode;if(tH(t,p)||/^(TD|TH)$/.test(D.nodeName))return p;p=D}return p},oW=(t,s,a)=>{const u=[],p=t.dom,b=uH(t,s,!0,a),E=uH(t,s,!1,a);let I;const D=[];for(let $=b;$&&(D.push($),$!==E);$=$.nextSibling);return yn.each(D,$=>{var J;if(tH(t,$)){u.push($),I=null;return}if(p.isBlock($)||gC($)){gC($)&&p.remove($),I=null;return}const te=$.nextSibling;if(Bm.isBookmarkNode($)&&(Vp(te)||tH(t,te)||!te&&$.parentNode===a)){I=null;return}I||(I=p.create("p"),(J=$.parentNode)===null||J===void 0||J.insertBefore(I,$),u.push(I)),I.appendChild($)}),u},ire=(t,s,a)=>{const u=t.getStyle(s,"list-style-type");let p=a?a["list-style-type"]:"";return p=p===null?"":p,u===p},are=(t,s)=>{const a=t.selection.getStart(!0),u=uH(t,s,!0,t.getBody());return _s(Me.fromDom(u),Me.fromDom(s.commonAncestorContainer))?s.commonAncestorContainer:a},dH=(t,s,a)=>{const u=t.selection.getRng();let p="LI";const b=Gg(t,are(t,u)),E=t.dom;if(E.getContentEditable(t.selection.getNode())==="false")return;s=s.toUpperCase(),s==="DL"&&(p="DT");const I=Ky(u),D=Oe(oW(t,u,b),t.dom.isEditable);yn.each(D,$=>{let J;const te=$.previousSibling,re=$.parentNode;RM(re)||(te&&Vp(te)&&te.nodeName===s&&ire(E,te,a)?(J=te,$=E.rename($,p),te.appendChild($)):(J=E.create(s),re.insertBefore(J,$),J.appendChild($),$=E.rename($,p)),rre(E,$,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),bw(E,J,a),fH(t.dom,J))}),t.selection.setRng(Zy(I))},cre=(t,s)=>Vp(t)&&t.nodeName===(s==null?void 0:s.nodeName),lre=(t,s,a)=>{const u=t.getStyle(s,"list-style-type",!0),p=t.getStyle(a,"list-style-type",!0);return u===p},ure=(t,s)=>t.className===s.className,sW=(t,s,a)=>cre(s,a)&&lre(t,s,a)&&ure(s,a),fH=(t,s)=>{let a,u=s.nextSibling;if(sW(t,s,u)){const p=u;for(;a=p.firstChild;)s.appendChild(a);t.remove(p)}if(u=s.previousSibling,sW(t,s,u)){const p=u;for(;a=p.lastChild;)s.insertBefore(a,s.firstChild);t.remove(p)}},dre=(t,s,a,u)=>{if(s.nodeName!==a){const p=t.dom.rename(s,a);bw(t.dom,p,u),C0(t,vw(a),p)}else bw(t.dom,s,u),C0(t,vw(a),s)},rW=(t,s,a,u)=>{if(s.classList.forEach((p,b,E)=>{p.startsWith("tox-")&&(E.remove(p),E.length===0&&s.removeAttribute("class"))}),s.nodeName!==a){const p=t.dom.rename(s,a);bw(t.dom,p,u),C0(t,vw(a),p)}else bw(t.dom,s,u),C0(t,vw(a),s)},iW=(t,s,a,u,p)=>{const b=Vp(s);if(b&&s.nodeName===u&&!pH(p)&&!Gf(s))xI(t);else{dH(t,u,p);const E=Ky(t.selection.getRng()),I=b?[s,...a]:a,D=b&&Gf(s)?rW:dre;yn.each(I,$=>{D(t,$,u,p)}),t.selection.setRng(Zy(E))}},pH=t=>"list-style-type"in t,q0e=(t,s,a,u)=>{if(s!==t.getBody())if(s)if(s.nodeName===a&&!pH(u)&&!Gf(s))xI(t);else{const p=Ky(t.selection.getRng());Gf(s)&&s.classList.forEach((E,I,D)=>{E.startsWith("tox-")&&(D.remove(E),D.length===0&&s.removeAttribute("class"))}),bw(t.dom,s,u);const b=t.dom.rename(s,a);fH(t.dom,b),t.selection.setRng(Zy(p)),dH(t,a,u),C0(t,vw(a),b)}else dH(t,a,u),C0(t,vw(a),s)},PM=(t,s,a)=>{const u=OI(t);if(RI(t,u))return;const p=Cse(t),b=se(a)?a:{};p.length>0?iW(t,u,p,s,b):q0e(t,u,s,b)},aW=(t,s,a,u)=>{let p=s.startContainer;const b=s.startOffset;if(zv(p)&&(a?b<p.data.length:b>0))return p;const E=t.schema.getNonEmptyElements();Gz(p)&&(p=Fg.getNode(p,b));const I=new Kr(p,u);a&&yse(t.dom,p)&&I.next();const D=a?I.next.bind(I):I.prev2.bind(I);for(;p=D();)if(p.nodeName==="LI"&&!p.hasChildNodes()||E[p.nodeName]||zv(p)&&p.data.length>0)return p;return null},hH=(t,s)=>{const a=s.childNodes;return a.length===1&&!Vp(a[0])&&t.isBlock(a[0])},fre=t=>ce.from(t).map(Me.fromDom).filter(Sf).exists(s=>Gd(s)&&!bt(["details"],Xo(s))),pre=(t,s)=>{hH(t,s)&&fre(s.firstChild)&&t.remove(s.firstChild,!0)},cW=(t,s,a)=>{let u;const p=hH(t,a)?a.firstChild:a;if(pre(t,s),!S0(t,s,!0))for(;u=s.firstChild;)p.appendChild(u)},mH=(t,s,a)=>{let u;const p=s.parentNode;if(!Ki(t,s)||!Ki(t,a))return;Vp(a.lastChild)&&(u=a.lastChild),p===a.lastChild&&gC(p.previousSibling)&&t.remove(p.previousSibling);const b=a.lastChild;b&&gC(b)&&s.hasChildNodes()&&t.remove(b),S0(t,a,!0)&&zd(Me.fromDom(a)),cW(t,s,a),u&&a.appendChild(u);const I=ur(Me.fromDom(a),Me.fromDom(s))?t.getParents(s,Vp,a):[];t.remove(s),Ue(I,D=>{S0(t,D)&&D!==t.getRoot()&&t.remove(D)})},hre=(t,s,a)=>{zd(Me.fromDom(a)),mH(t.dom,s,a),t.selection.setCursorLocation(a,0)},mre=(t,s,a,u)=>{const p=t.dom;if(p.isEmpty(u))hre(t,a,u);else{const b=Ky(s);mH(p,a,u),t.selection.setRng(Zy(b))}},gH=(t,s,a,u)=>{const p=Ky(s);mH(t.dom,a,u);const b=Zy(p);t.selection.setRng(b)},vH=(t,s)=>{const a=t.dom,u=t.selection,p=u.getStart(),b=sH(t,p),E=a.getParent(u.getStart(),"LI",b);if(E){const I=E.parentElement;if(I===t.getBody()&&S0(a,I))return!0;const D=TI(u.getRng()),$=a.getParent(aW(t,D,s,b),"LI",b),J=$&&(s?a.isChildOf(E,$):a.isChildOf($,E));if($&&$!==E&&!J)return t.undoManager.transact(()=>{s?mre(t,D,$,E):bse(E)?lH(t):gH(t,D,E,$)}),!0;if(J&&!s&&$!==E){const te=D.commonAncestorContainer.parentElement;return!te||a.isChildOf($,te)?!1:(t.undoManager.transact(()=>{const re=Ky(D);cW(a,te,$),te.remove();const fe=Zy(re);t.selection.setRng(fe)}),!0)}else if(!$&&!s&&D.startOffset===0&&D.endOffset===0)return t.undoManager.transact(()=>{xI(t)}),!0}return!1},gre=(t,s,a)=>{const u=t.getParent(s.parentNode,t.isBlock,a);t.remove(s),u&&t.isEmpty(u)&&t.remove(u)},lW=(t,s)=>{const a=t.dom,u=t.selection.getStart(),p=sH(t,u),b=a.getParent(u,a.isBlock,p);if(b&&a.isEmpty(b,void 0,{checkRootAsContent:!0})){const E=TI(t.selection.getRng()),I=aW(t,E,s,p),D=a.getParent(I,"LI",p);if(I&&D){const $=fe=>bt(["td","th","caption"],Xo(fe)),J=fe=>fe.dom===p,te=Rr(Me.fromDom(D),$,J),re=Rr(Me.fromDom(E.startContainer),$,J);return sh(te,re,eo)?(t.undoManager.transact(()=>{const fe=D.parentNode;gre(a,b,p),fH(a,fe),t.selection.select(I,!0),t.selection.collapse(s)}),!0):!1}}return!1},vre=(t,s)=>vH(t,s)||lW(t,s),bH=t=>{const s=t.selection.getStart(),a=sH(t,s),u=t.dom.getParent(s,"LI,DT,DD",a);return be(u)||oH(t).length>0},bre=t=>bH(t)?(t.undoManager.transact(()=>{let s=!0;const a=()=>s=!1;t.on("input",a),t.execCommand("Delete"),t.off("input",a),s&&t.dispatch("input"),Wg(t.dom,t.getBody())}),!0):!1,yH=(t,s)=>{const a=t.selection;return!RI(t,a.getNode())&&(a.isCollapsed()?vre(t,s):bre(t))},yre=(t,s)=>({block:t,position:s}),Sre=(t,s)=>({from:t,to:s}),SH=(t,s)=>{const a=Me.fromDom(t),u=Me.fromDom(s.container());return Ok(a,u).map(p=>yre(p,s))},Cre=t=>!(ur(t.to.block,t.from.block)||ur(t.from.block,t.to.block)),Ere=t=>!eo(t.from.block,t.to.block),uW=(t,s)=>Rr(s,p=>dd(p)||lu(p.dom),p=>eo(p,t)).filter(ki).getOr(t),CH=(t,s)=>{const a=Me.fromDom(t);return eo(uW(a,s.from.block),uW(a,s.to.block))},_re=t=>fi(t.from.block.dom)===!1&&fi(t.to.block.dom)===!1,wre=t=>{const s=a=>_y(a)||cc(a.dom)||Em(a);return s(t.from.block)&&s(t.to.block)},Are=(t,s,a,u)=>Ri(u.position.getNode())&&!uu(t,u.block)?Bv(!1,u.block.dom).bind(p=>p.isEqual(u.position)?Bl(a,s,p).bind(b=>SH(s,b)):ce.some(u)).getOr(u):u,Tre=(t,s,a,u)=>{const p=SH(s,Pt.fromRangeStart(u)),b=p.bind(E=>Bl(a,s,E.position).bind(I=>SH(s,I).map(D=>Are(t,s,a,D))));return Vi(p,b,Sre).filter(E=>Ere(E)&&CH(s,E)&&_re(E)&&wre(E)&&Cre(E))},Ore=(t,s,a,u)=>u.collapsed?Tre(t,s,a,u):ce.none(),dW=(t,s)=>{const a=Oi(t);return No(a,u=>s.isBlock(Xo(u))).fold(Be(a),u=>a.slice(0,u))},c1=(t,s)=>{const a=dW(t,s);return Ue(a,Vr),a},EH=(t,s,a)=>{const u=zn(a,s);return gt(u.reverse(),p=>uu(t,p)).each(Vr)},Ire=(t,s)=>Oe(rc(s),a=>!uu(t,a)).length===0,Rre=(t,s,a,u,p)=>{if(uu(u,a))return _m(a),Hl(a.dom);Ire(u,p)&&uu(u,s)&&wc(p,Me.fromTag("br"));const b=gu(a.dom,Pt.before(p.dom));return Ue(c1(s,u),E=>{wc(p,E)}),EH(u,t,s),b},xre=(t,s)=>t.isInline(Xo(s)),Dre=(t,s,a,u)=>{if(uu(u,a)){if(uu(u,s)){const E=Bt((I=>{const D=($,J)=>za($).fold(()=>J,te=>xre(u,te)?D(te,J.concat(pa(te))):J);return D(I,[])})(a),(I,D)=>(ku(I,D),D),wy());zd(s),Qs(s,E)}return Vr(a),Hl(s.dom)}const p=Mp(a.dom);return Ue(c1(s,u),b=>{Qs(a,b)}),EH(u,t,s),p},yw=(t,s)=>{const a=zn(s,t);return ce.from(a[a.length-1])},kre=(t,s)=>ur(s,t)?yw(s,t):ce.none(),LM=(t,s)=>{Bv(t,s.dom).bind(a=>ce.from(a.getNode())).map(Me.fromDom).filter(Cm).each(Vr)},BM=(t,s,a,u)=>(LM(!0,s),LM(!1,a),kre(s,a).fold($e(Dre,t,s,a,u),$e(Rre,t,s,a,u))),fW=(t,s,a,u,p)=>s?BM(t,u,a,p):BM(t,a,u,p),VM=(t,s)=>{const a=Me.fromDom(t.getBody());return Ore(t.schema,a.dom,s,t.selection.getRng()).map(p=>()=>{fW(a,s,p.from.block,p.to.block,t.schema).each(b=>{t.selection.setRng(b.toRange())})})},HM=(t,s,a)=>{const u=s.getRng();return Vi(Ok(t,Me.fromDom(u.startContainer)),Ok(t,Me.fromDom(u.endContainer)),(p,b)=>eo(p,b)?ce.none():ce.some(()=>{u.deleteContents(),fW(t,!0,p,b,a).each(E=>{s.setRng(E.toRange())})})).getOr(ce.none())},pW=(t,s)=>{const a=Me.fromDom(s),u=$e(eo,t);return yp(a,dd,u).isSome()},Mre=(t,s)=>pW(t,s.startContainer)||pW(t,s.endContainer),Nre=(t,s)=>{const a=gu(t.dom,Pt.fromRangeStart(s)).isNone(),u=Vl(t.dom,Pt.fromRangeEnd(s)).isNone();return!Mre(t,s)&&a&&u},Pre=t=>ce.some(()=>{t.setContent(""),t.selection.setCursorLocation()}),Lre=t=>{const s=Me.fromDom(t.getBody()),a=t.selection.getRng();return Nre(s,a)?Pre(t):HM(s,t.selection,t.schema)},DI=(t,s)=>t.selection.isCollapsed()?ce.none():Lre(t),E0=(t,s,a,u,p)=>ce.from(s._selectionOverrides.showCaret(t,a,u,p)),Bre=t=>{const s=t.ownerDocument.createRange();return s.selectNode(t),s},kI=(t,s)=>t.dispatch("BeforeObjectSelected",{target:s}).isDefaultPrevented()?ce.none():ce.some(Bre(s)),Vre=(t,s,a)=>{const u=yO(1,t.getBody(),s),p=Pt.fromRangeStart(u),b=p.getNode();if(Oh(b))return E0(1,t,b,!p.isAtEnd(),!1);const E=p.getNode(!0);if(Oh(E))return E0(1,t,E,!1,!1);const I=oC(t.dom.getRoot(),p.getNode());return Oh(I)?E0(1,t,I,!1,a):ce.none()},_H=(t,s,a)=>s.collapsed?Vre(t,s,a).getOr(s):s,Hre=t=>Wy(t)||zO(t),Fre=t=>Gy(t)||WO(t),$re=(t,s)=>{gn(s)&&s.data.length===0&&t.remove(s)},hW=(t,s,a,u,p,b)=>{E0(u,t,b.getNode(!p),p,!0).each(E=>{if(s.collapsed){const I=s.cloneRange();p?I.setEnd(E.startContainer,E.startOffset):I.setStart(E.endContainer,E.endOffset),I.deleteContents()}else s.deleteContents();t.selection.setRng(E)}),$re(t.dom,a)},Ure=(t,s)=>{const a=t.selection.getRng();if(!gn(a.commonAncestorContainer))return ce.none();const u=s?1:-1,p=Dh(t.getBody()),b=$e(Pv,s?p.next:p.prev),E=s?Hre:Fre,I=Pg(u,t.getBody(),a),D=b(I),$=D&&Np(s,D);if(!$||!By(I,$))return ce.none();if(E($))return ce.some(()=>hW(t,a,I.getNode(),u,s,$));const J=b($);return J&&E(J)&&By($,J)?ce.some(()=>hW(t,a,I.getNode(),u,s,J)):ce.none()},wH=(t,s)=>Ure(t,s),AH=(t,s)=>{const a=t.getBody();return s?Hl(a).filter(Wy):Mp(a).filter(Gy)},TH=t=>{const s=t.selection.getRng();return!s.collapsed&&(AH(t,!0).exists(a=>a.isEqual(Pt.fromRangeStart(s)))||AH(t,!1).exists(a=>a.isEqual(Pt.fromRangeEnd(s))))},jre=t=>be(t)&&(dd(Me.fromDom(t))||Em(Me.fromDom(t))),qf=eu.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),zre=(t,s)=>{const a=s.getNode(!t),u=t?"after":"before";return vo(a)&&a.getAttribute("data-mce-caret")===u},Wre=(t,s,a,u,p)=>{const b=E=>p.isInline(E.nodeName.toLowerCase())&&!km(a,u,t);return F_(!s,a).fold(()=>F_(s,u).fold(Et,b),b)},mW=(t,s,a,u,p)=>{const b=p.getNode(!a);return Ok(Me.fromDom(s),Me.fromDom(u.getNode())).map(E=>uu(t,E)?qf.remove(E.dom):qf.moveToElement(b)).orThunk(()=>ce.some(qf.moveToElement(b)))},gW=(t,s,a,u)=>Bl(s,t,a).bind(p=>jre(p.getNode())||Wre(t,s,a,p,u)?ce.none():s&&fi(p.getNode())||!s&&fi(p.getNode(!0))?mW(u,t,s,a,p):s&&Gy(a)||!s&&Wy(a)?ce.some(qf.moveToPosition(p)):ce.none()),Gre=(t,s)=>De(s)?ce.none():t&&fi(s.nextSibling)?ce.some(qf.moveToElement(s.nextSibling)):!t&&fi(s.previousSibling)?ce.some(qf.moveToElement(s.previousSibling)):ce.none(),OH=(t,s,a)=>a.fold(u=>ce.some(qf.remove(u)),u=>ce.some(qf.moveToElement(u)),u=>km(s,u,t)?ce.none():ce.some(qf.moveToPosition(u))),qre=(t,s,a,u)=>zre(s,a)?Gre(s,a.getNode(!s)).orThunk(()=>gW(t,s,a,u)):gW(t,s,a,u).bind(p=>OH(t,a,p)),Kre=(t,s,a,u)=>{const p=yO(s?1:-1,t,a),b=Pt.fromRangeStart(p),E=Me.fromDom(t);return!s&&Gy(b)?ce.some(qf.remove(b.getNode(!0))):s&&Wy(b)?ce.some(qf.remove(b.getNode())):!s&&Wy(b)&&yk(E,b,u)?d8(E,b,u).map(I=>qf.remove(I.getNode())):s&&Gy(b)&&U3(E,b,u)?Sk(E,b,u).map(I=>qf.remove(I.getNode())):qre(t,s,b,u)},Zre=(t,s)=>a=>(t._selectionOverrides.hideFakeCaret(),u0(t,s,Me.fromDom(a)),!0),Yre=(t,s)=>a=>{const u=s?Pt.before(a):Pt.after(a);return t.selection.setRng(u.toRange()),!0},Jre=t=>s=>(t.selection.setRng(s.toRange()),!0),vW=(t,s)=>ce.from(oC(t.getBody(),s)),Xre=(t,s)=>{const a=t.selection.getNode();return vW(t,a).filter(fi).fold(()=>Kre(t.getBody(),s,t.selection.getRng(),t.schema).map(u=>()=>u.fold(Zre(t,s),Yre(t,s),Jre(t))),()=>ce.some(Ze))},Qre=t=>{Ue(Ht(t,".mce-offscreen-selection"),Vr)},eie=(t,s)=>{const a=t.selection.getNode();return fi(a)&&!vm(a)?vW(t,a.parentNode).filter(fi).fold(()=>ce.some(()=>{Qre(Me.fromDom(t.getBody())),u0(t,s,Me.fromDom(t.selection.getNode())),Q3(t)}),()=>ce.some(Ze)):TH(t)?ce.some(()=>{B8(t,t.selection.getRng(),Me.fromDom(t.getBody()))}):ce.none()},bW=t=>{const s=t.dom,a=t.selection,u=oC(t.getBody(),a.getNode());if(lu(u)&&s.isBlock(u)&&s.isEmpty(u)){const p=s.create("br",{"data-mce-bogus":"1"});s.setHTML(u,""),u.appendChild(p),a.setRng(Pt.before(p).toRange())}return!0},IH=(t,s)=>t.selection.isCollapsed()?Xre(t,s):eie(t,s),RH=(t,s)=>{var a;const u=t.dom,p=u.getParent(t.selection.getStart(),u.isBlock),b=u.getParent(t.selection.getEnd(),u.isBlock),E=t.getBody();if(((a=p==null?void 0:p.nodeName)===null||a===void 0?void 0:a.toLowerCase())==="div"&&p&&b&&p===E.firstChild&&b===E.lastChild&&!u.isEmpty(E)){const D=p.cloneNode(!1),$=()=>{if(s?N8(t):Tk(t),E.firstChild!==p){const J=Ky(t.selection.getRng(),()=>document.createElement("span"));Array.from(E.childNodes).forEach(te=>D.appendChild(te)),E.appendChild(D),t.selection.setRng(Zy(J))}};return ce.some($)}return ce.none()},tie=(t,s)=>{const a=Pt.fromRangeStart(t.selection.getRng());return Bl(s,t.getBody(),a).filter(u=>s?yee(u):See(u)).bind(u=>bO(s?0:-1,u)).map(u=>()=>t.selection.select(u))},xH=(t,s)=>t.selection.isCollapsed()?tie(t,s):ce.none(),Sw=gn,yW=t=>Sw(t)&&t.data[0]===Va,SW=t=>Sw(t)&&t.data[t.data.length-1]===Va,CW=t=>{var s;return((s=t.ownerDocument)!==null&&s!==void 0?s:document).createTextNode(Va)},nie=t=>{var s;if(Sw(t.previousSibling))return SW(t.previousSibling)||t.previousSibling.appendData(Va),t.previousSibling;if(Sw(t))return yW(t)||t.insertData(0,Va),t;{const a=CW(t);return(s=t.parentNode)===null||s===void 0||s.insertBefore(a,t),a}},oie=t=>{var s,a;if(Sw(t.nextSibling))return yW(t.nextSibling)||t.nextSibling.insertData(0,Va),t.nextSibling;if(Sw(t))return SW(t)||t.appendData(Va),t;{const u=CW(t);return t.nextSibling?(s=t.parentNode)===null||s===void 0||s.insertBefore(u,t.nextSibling):(a=t.parentNode)===null||a===void 0||a.appendChild(u),u}},FM=(t,s)=>t?nie(s):oie(s),EW=$e(FM,!0),sie=$e(FM,!1),_W=(t,s)=>gn(t.container())?FM(s,t.container()):FM(s,t.getNode()),DH=(t,s)=>{const a=s.get();return a&&t.container()===a&&fr(a)},kH=(t,s)=>s.fold(a=>{Rm(t.get());const u=EW(a);return t.set(u),ce.some(Pt(u,u.length-1))},a=>Hl(a).map(u=>{if(DH(u,t)){const p=t.get();return Pt(p,1)}else{Rm(t.get());const p=_W(u,!0);return t.set(p),Pt(p,1)}}),a=>Mp(a).map(u=>{if(DH(u,t)){const p=t.get();return Pt(p,p.length-1)}else{Rm(t.get());const p=_W(u,!1);return t.set(p),Pt(p,p.length-1)}}),a=>{Rm(t.get());const u=sie(a);return t.set(u),ce.some(Pt(u,1))}),wW=(t,s)=>{for(let a=0;a<t.length;a++){const u=t[a].apply(null,s);if(u.isSome())return u}return ce.none()},gd=eu.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),AW=(t,s)=>{const a=Dm(s,t);return a||t},MH=(t,s,a)=>{const u=Y3(a),p=AW(s,u.container());return d0(t,p,u).fold(()=>Vl(p,u).bind($e(d0,t,p)).map(b=>gd.before(b)),ce.none)},TW=(t,s)=>Pm(t,s)===null,rie=(t,s,a)=>d0(t,s,a).filter($e(TW,s)),MI=(t,s,a)=>{const u=J3(a);return rie(t,s,u).bind(p=>gu(p,u).isNone()?ce.some(gd.start(p)):ce.none())},K0e=(t,s,a)=>{const u=Y3(a);return rie(t,s,u).bind(p=>Vl(p,u).isNone()?ce.some(gd.end(p)):ce.none())},Z0e=(t,s,a)=>{const u=J3(a),p=AW(s,u.container());return d0(t,p,u).fold(()=>gu(p,u).bind($e(d0,t,p)).map(b=>gd.after(b)),ce.none)},iie=t=>!Z3(Hp(t)),_0=(t,s,a)=>wW([MH,MI,K0e,Z0e],[t,s,a]).filter(iie),Hp=t=>t.fold(at,at,at,at),Cw=t=>t.fold(Be("before"),Be("start"),Be("end"),Be("after")),Fp=t=>t.fold(gd.before,gd.before,gd.after,gd.after),w0=t=>t.fold(gd.start,gd.start,gd.end,gd.end),NH=(t,s)=>Cw(t)===Cw(s)&&Hp(t)===Hp(s),OW=(t,s,a,u,p,b)=>Vi(d0(s,a,u),d0(s,a,p),(E,I)=>E!==I&&D8(a,E,I)?gd.after(t?E:I):b).getOr(b),NI=(t,s)=>t.fold(Jt,a=>!NH(a,s)),aie=(t,s,a,u,p)=>{const b=Np(t,p);return Bl(t,a,b).map($e(Np,t)).fold(()=>u.map(Fp),D=>_0(s,a,D).map($e(OW,t,s,a,b,D)).filter($e(NI,u))).filter(iie)},IW=(t,s)=>t?s.fold(z(ce.some,gd.start),ce.none,z(ce.some,gd.after),ce.none):s.fold(ce.none,z(ce.some,gd.before),ce.none,z(ce.some,gd.end)),Y0e=(t,s,a,u)=>{const p=Np(t,u),b=_0(s,a,p);return _0(s,a,p).bind($e(IW,t)).orThunk(()=>aie(t,s,a,b,u))},cie=t=>me(t.selection.getSel().modify),Ew=(t,s,a)=>{const u=t?1:-1;return s.setRng(Pt(a.container(),a.offset()+u).toRange()),s.getSel().modify("move",t?"forward":"backward","word"),!0},RW=(t,s)=>{const a=s.selection.getRng(),u=t?Pt.fromRangeEnd(a):Pt.fromRangeStart(a);return cie(s)?t&&r_(u)?Ew(!0,s.selection,u):!t&&mS(u)?Ew(!1,s.selection,u):!1:!1};var bi;(function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"})(bi||(bi={}));const $M=(t,s)=>t===-1?ps(s):s,lie=(t,s,a)=>t===1?s.next(a):s.prev(a),_w=(t,s,a,u)=>Ri(u.getNode(s===1))?bi.Br:km(a,u)===!1?bi.Block:bi.Wrap,l1=(t,s,a,u)=>{const p=Dh(a);let b=u;const E=[];for(;b;){const I=lie(s,p,b);if(!I)break;if(Ri(I.getNode(!1)))return s===1?{positions:$M(s,E).concat([I]),breakType:bi.Br,breakAt:ce.some(I)}:{positions:$M(s,E),breakType:bi.Br,breakAt:ce.some(I)};if(!I.isVisible()){b=I;continue}if(t(b,I)){const D=_w(a,s,b,I);return{positions:$M(s,E),breakType:D,breakAt:ce.some(I)}}E.push(I),b=I}return{positions:$M(s,E),breakType:bi.Eol,breakAt:ce.none()}},u1=(t,s,a,u)=>s(a,u).breakAt.map(p=>{const b=s(a,p).positions;return t===-1?b.concat(p):[p].concat(b)}).getOr([]),PH=(t,s)=>tn(t,(a,u)=>a.fold(()=>ce.some(u),p=>Vi(It(p.getClientRects()),It(u.getClientRects()),(b,E)=>{const I=Math.abs(s-b.left);return Math.abs(s-E.left)<=I?u:p}).or(a)),ce.none()),UM=(t,s)=>It(s.getClientRects()).bind(a=>PH(t,a.left)),EC=$e(l1,Pt.isAbove,-1),_C=$e(l1,Pt.isBelow,1),LH=$e(u1,-1,EC),BH=$e(u1,1,_C),VH=(t,s)=>EC(t,s).breakAt.isNone(),HH=(t,s)=>_C(t,s).breakAt.isNone(),FH=t=>Hl(t).map(s=>[s].concat(_C(t,s).positions)).getOr([]),uie=t=>Mp(t).map(s=>EC(t,s).positions.concat(s)).getOr([]),xW=(t,s)=>UM(LH(t,s),s),DW=(t,s)=>UM(BH(t,s),s),die=fi,kW=(t,s)=>Math.abs(t.left-s),jM=(t,s)=>Math.abs(t.right-s),MW=t=>Os(t,"node"),NW=(t,s)=>Ld(t,(a,u)=>{const p=Math.min(kW(a,s),jM(a,s)),b=Math.min(kW(u,s),jM(u,s));return b===p&&MW(u)&&die(u.node)||b<p?u:a}),fie=t=>{const s=a=>Ut(a,u=>{const p=Lu(u);return p.node=t,p});if(vo(t))return s(t.getClientRects());if(gn(t)){const a=t.ownerDocument.createRange();return a.setStart(t,0),a.setEnd(t,t.data.length),s(a.getClientRects())}else return[]},wC=t=>Jn(t,fie);var d1;(function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"})(d1||(d1={}));const pie=(t,s,a,u)=>{let p=u;for(;p=jS(p,t,l_,s);)if(a(p))return},$H=(t,s,a,u,p,b)=>{let E=0;const I=[],D=te=>{let re=wC([te]);t===d1.Up&&(re=re.reverse());for(let fe=0;fe<re.length;fe++){const Re=re[fe];if(!a(Re,$)){if(I.length>0&&s(Re,ve(I))&&E++,Re.line=E,p(Re))return!0;I.push(Re)}}return!1},$=ve(b.getClientRects());if(!$)return I;const J=b.getNode();return J&&(D(J),pie(t,u,D,J)),I},hie=(t,s)=>s.line>t,PW=(t,s)=>s.line===t,mie=$e($H,d1.Up,xv,jb),LW=$e($H,d1.Down,jb,xv),UH=t=>ve(t.getClientRects()),BW=(t,s,a,u)=>{const p=Dh(s);let b,E,I,D;const $=[];let J=0;t===d1.Down?(b=p.next,E=jb,I=xv,D=Pt.after(u)):(b=p.prev,E=xv,I=jb,D=Pt.before(u));const te=UH(D);do{if(!D.isVisible())continue;const re=UH(D);if(I(re,te))continue;$.length>0&&E(re,ve($))&&J++;const fe=Lu(re);if(fe.position=D,fe.line=J,a(fe))return $;$.push(fe)}while(D=b(D));return $},jH=t=>s=>hie(t,s),zM=t=>s=>PW(t,s),qg=(t,s)=>{t.selection.setRng(s),UO(t,t.selection.getRng())},zH=(t,s,a)=>ce.some(_H(t,s,a)),VW=(t,s,a,u,p,b)=>{const E=s===1,I=Dh(t.getBody()),D=$e(Pv,E?I.next:I.prev),$=E?u:p;if(!a.collapsed){const Re=Dv(a);if(b(Re))return E0(s,t,Re,s===-1,!1);if(TH(t)){const Ae=a.cloneRange();return Ae.collapse(s===-1),ce.from(Ae)}}const J=Pg(s,t.getBody(),a);if($(J))return kI(t,J.getNode(!E));let te=D(J);const re=Ay(a);if(te)te=Np(E,te);else return re?ce.some(a):ce.none();if($(te))return E0(s,t,te.getNode(!E),E,!1);const fe=D(te);return fe&&$(fe)&&By(te,fe)?E0(s,t,fe.getNode(!E),E,!1):re?zH(t,te.toRange(),!1):ce.none()},HW=(t,s,a,u,p,b)=>{const E=Pg(s,t.getBody(),a),I=ve(E.getClientRects()),D=s===d1.Down,$=t.getBody();if(!I)return ce.none();if(TH(t)){const _e=D?Pt.fromRangeEnd(a):Pt.fromRangeStart(a);return(D?DW:xW)($,_e).orThunk(()=>ce.from(_e)).map(et=>et.toRange())}const te=(D?LW:mie)($,jH(1),E),re=Oe(te,zM(1)),fe=I.left,Re=NW(re,fe);if(Re&&b(Re.node)){const _e=Math.abs(fe-Re.left),Qe=Math.abs(fe-Re.right);return E0(s,t,Re.node,_e<Qe,!1)}let Ae;if(u(E)?Ae=E.getNode():p(E)?Ae=E.getNode(!0):Ae=Dv(a),Ae){const _e=BW(s,$,jH(1),Ae);let Qe=NW(Oe(_e,zM(1)),fe);if(Qe||(Qe=ve(Oe(_e,zM(0))),Qe))return zH(t,Qe.position.toRange(),!1)}return re.length===0?PI(t,D).filter(D?p:u).map(_e=>_H(t,_e.toRange(),!1)):ce.none()},PI=(t,s)=>{const a=t.selection.getRng(),u=s?Pt.fromRangeEnd(a):Pt.fromRangeStart(a),p=FD(u.container(),t.getBody());if(s){const b=_C(p,u);return Dt(b.positions)}else{const b=EC(p,u);return It(b.positions)}},ww=(t,s,a)=>PI(t,s).filter(a).exists(u=>(t.selection.setRng(u.toRange()),!0)),f1=(t,s)=>{const a=t.dom.createRng();a.setStart(s.container(),s.offset()),a.setEnd(s.container(),s.offset()),t.selection.setRng(a)},WM=(t,s)=>{t?s.setAttribute("data-mce-selected","inline-boundary"):s.removeAttribute("data-mce-selected")},WH=(t,s,a)=>kH(s,a).map(u=>(f1(t,u),a)),FW=(t,s,a)=>{const u=Pt.fromRangeStart(t);if(t.collapsed)return u;{const p=Pt.fromRangeEnd(t);return a?gu(s,p).getOr(p):Vl(s,u).getOr(u)}},GM=(t,s,a)=>{const u=t.getBody(),p=FW(t.selection.getRng(),u,a),b=$e($v,t);return Y0e(a,b,u,p).bind(I=>WH(t,s,I))},gie=(t,s,a)=>{const u=Ut(Ht(Me.fromDom(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),E=>E.dom),p=Oe(u,t),b=Oe(a,t);Ue(es(p,b),$e(WM,!1)),Ue(es(b,p),$e(WM,!0))},vie=(t,s)=>{const a=s.get();if(t.selection.isCollapsed()&&!t.composing&&a){const u=Pt.fromRangeStart(t.selection.getRng());Pt.isTextPosition(u)&&!k8(u)&&(f1(t,B_(a,u)),s.set(null))}},AC=(t,s,a,u)=>{if(s.selection.isCollapsed()){const p=Oe(u,t);Ue(p,b=>{const E=Pt.fromRangeStart(s.selection.getRng());_0(t,s.getBody(),E).bind(I=>WH(s,a,I))})}},qM=(t,s,a)=>Im(t)?GM(t,s,a).isSome():!1,GH=(t,s,a)=>Im(s)?RW(t,s):!1,LI=t=>{const s=fo(null),a=$e($v,t);return t.on("NodeChange",u=>{Im(t)&&(gie(a,t.dom,u.parents),vie(t,s),AC(a,t,s,u.parents))}),s},$W=$e(GH,!0),qH=$e(GH,!1),BI=(t,s,a)=>{if(Im(t)){const u=PI(t,s).getOrThunk(()=>{const p=t.selection.getRng();return s?Pt.fromRangeEnd(p):Pt.fromRangeStart(p)});return _0($e($v,t),t.getBody(),u).exists(p=>{const b=Fp(p);return kH(a,b).exists(E=>(f1(t,E),!0))})}else return!1},UW=(t,s)=>{const a=document.createRange();return a.setStart(t.container(),t.offset()),a.setEnd(s.container(),s.offset()),a},bie=t=>Vi(Hl(t),Mp(t),(s,a)=>{const u=Np(!0,s),p=Np(!1,a);return Vl(t,u).forall(b=>b.isEqual(p))}).getOr(!0),KH=(t,s)=>a=>kH(s,a).map(u=>()=>f1(t,u)),jW=(t,s,a,u)=>{const p=t.getBody(),b=$e($v,t);t.undoManager.ignore(()=>{t.selection.setRng(UW(a,u)),Tk(t),_0(b,p,Pt.fromRangeStart(t.selection.getRng())).map(w0).bind(KH(t,s)).each(Zn)}),t.nodeChanged()},yie=(t,s)=>{const a=Dm(s,t);return a||t},Sie=(t,s,a,u)=>{const p=yie(t.getBody(),u.container()),b=$e($v,t),E=_0(b,p,u);return E.bind(D=>a?D.fold(Be(ce.some(w0(D))),ce.none,Be(ce.some(Fp(D))),ce.none):D.fold(ce.none,Be(ce.some(Fp(D))),ce.none,Be(ce.some(w0(D))))).map(KH(t,s)).getOrThunk(()=>{const D=r0(a,p,u),$=D.bind(J=>_0(b,p,J));return Vi(E,$,()=>d0(b,p,u).bind(J=>bie(J)?ce.some(()=>{u0(t,a,Me.fromDom(J))}):ce.none())).getOrThunk(()=>$.bind(()=>D.map(J=>()=>{a?jW(t,s,u,J):jW(t,s,J,u)})))})},ZH=(t,s,a)=>{if(t.selection.isCollapsed()&&Im(t)){const u=Pt.fromRangeStart(t.selection.getRng());return Sie(t,s,a,u)}return ce.none()},YH=t=>cm(t)>1,zW=(t,s)=>{const a=Me.fromDom(t.getBody()),u=Me.fromDom(t.selection.getStart()),p=zn(u,a);return No(p,s).fold(Be(p),b=>p.slice(0,b))},WW=t=>cm(t)===1,Cie=t=>zW(t,s=>t.schema.isBlock(Xo(s))||YH(s)),Eie=t=>zW(t,s=>t.schema.isBlock(Xo(s))),GW=(t,s)=>{const a=$e(yB,t);return Jn(s,u=>a(u)?[u.dom]:[])},JH=t=>{const s=Eie(t);return GW(t,s)},_ie=(t,s,a,u)=>{const p=GW(s,u);if(p.length===0)u0(s,t,a);else{const b=i7(a.dom,p);s.selection.setRng(b.toRange())}},wie=(t,s)=>{const a=Oe(Cie(t),WW);return Dt(a).bind(u=>{const p=Pt.fromRangeStart(t.selection.getRng());return P8(s,p,u.dom)&&!ls(u)?ce.some(()=>_ie(s,t,u,a)):ce.none()})},Aie=(t,s)=>{const a=s.parentElement;return Ri(s)&&!M(a)&&t.dom.isEmpty(a)},Tie=t=>ls(Me.fromDom(t)),qW=(t,s)=>{const a=t.selection.getStart(),u=Aie(t,a)||Tie(a)?i7(a,s):Vs(t.selection.getRng(),s);t.selection.setRng(u.toRange())},KW=(t,s)=>{const a=es(s,JH(t));a.length>0&&qW(t,a)},ZW=t=>gn(t.startContainer),YW=t=>t.startOffset===0&&ZW(t),Oie=(t,s)=>{const a=s.startContainer.parentElement;return!M(a)&&yB(t,Me.fromDom(a))},KM=t=>{const s=t.startContainer.parentNode,a=t.endContainer.parentNode;return!M(s)&&!M(a)&&s.isEqualNode(a)},$u=t=>{const s=t.endContainer;return t.endOffset===(gn(s)?s.length:s.childNodes.length)},Iie=t=>KM(t)&&$u(t),ZM=t=>!t.endContainer.isEqualNode(t.commonAncestorContainer),TC=t=>Iie(t)||ZM(t),JW=t=>{const s=t.selection.getRng();return YW(s)&&Oie(t,s)&&TC(s)},Kf=t=>{if(JW(t)){const s=JH(t);return ce.some(()=>{Tk(t),KW(t,s)})}else return ce.none()},A0=(t,s)=>t.selection.isCollapsed()?wie(t,s):Kf(t),XW=(t,s)=>Vn(t,a=>Vu(a.dom),a=>s.isBlock(Xo(a))),Rie=t=>XW(Me.fromDom(t.selection.getStart()),t.schema),QW=t=>{const s=t.selection.getRng();return s.collapsed&&(ZW(s)||t.dom.isEmpty(s.startContainer))&&!Rie(t)},VI=t=>(QW(t)&&qW(t,[]),!0),YM=(t,s,a)=>be(a)?ce.some(()=>{t._selectionOverrides.hideFakeCaret(),u0(t,s,Me.fromDom(a))}):ce.none(),XH=(t,s)=>{const a=s?zO:WO,p=Pg(s?1:-1,t.getBody(),t.selection.getRng());return a(p)?YM(t,s,p.getNode(!s)):ce.from(Np(s,p)).filter(b=>a(b)&&By(p,b)).bind(b=>YM(t,s,b.getNode(!s)))},QH=(t,s)=>{const a=t.selection.getNode();return Ep(a)?YM(t,s,a):ce.none()},eF=(t,s)=>t.selection.isCollapsed()?XH(t,s):QH(t,s),xie=t=>Rr(t,s=>lu(s.dom)||fi(s.dom)).exists(s=>lu(s.dom)),JM=t=>im(t??"").getOr(0),qm=(t,s)=>{const a=t||Nx(s)?"margin":"padding",u=zi(s,"direction")==="rtl"?"-right":"-left";return a+u},tF=(t,s,a,u,p,b)=>{const E=qm(a,Me.fromDom(b)),I=JM(t.getStyle(b,E));if(s==="outdent"){const D=Math.max(0,I-u);t.setStyle(b,E,D?D+p:"")}else{const D=I+u+p;t.setStyle(b,E,D)}},Die=(t,s)=>ys(s,a=>{const u=qm(xS(t),a),p=ta(a,u).map(JM).getOr(0);return t.dom.getContentEditable(a.dom)!=="false"&&p>0}),HI=t=>{const s=sF(t);return!t.mode.isReadOnly()&&(s.length>1||Die(t,s))},nF=t=>!t.mode.isReadOnly()&&Yse(t),oF=t=>t_(t)||Em(t),e9=t=>Rl(t).exists(oF),sF=t=>Oe(dm(t.selection.getSelectedBlocks()),s=>!oF(s)&&!e9(s)&&xie(s)),t9=(t,s)=>{var a,u;if(t.mode.isReadOnly())return;const{dom:p}=t,b=oO(t),E=(u=(a=/[a-z%]+$/i.exec(b))===null||a===void 0?void 0:a[0])!==null&&u!==void 0?u:"px",I=JM(b),D=xS(t);Ue(sF(t),$=>{tF(p,s,D,I,E,$.dom)}),s==="indent"?tW(t):lH(t)},kie=t=>t9(t,"indent"),n9=t=>t9(t,"outdent"),o9=t=>{if(t.selection.isCollapsed()&&HI(t)){const s=t.dom,a=t.selection.getRng(),u=Pt.fromRangeStart(a),p=s.getParent(a.startContainer,s.isBlock);if(p!==null&&gk(Me.fromDom(p),u,t.schema))return ce.some(()=>n9(t))}return ce.none()},Mie=(t,s)=>{const a=Mk(t.selection.getRng());return a3(a)?ce.some(()=>u0(t,s,Me.fromDom(t.selection.getNode()))):ce.none()},XM=(t,s)=>t.selection.isCollapsed()?ce.none():Mie(t,s),s9=(t,s,a)=>$n([o9,IH,wH,(u,p)=>ZH(u,s,p),VM,dB,xH,eF,DI,A0,RH,XM],u=>u(t,a)).filter(u=>t.selection.isEditable()),rF=(t,s)=>{s9(t,s,!1).fold(()=>{t.selection.isEditable()&&(Tk(t),Q3(t))},Zn),bH(t)&&Wg(t.dom,t.getBody())},Nie=(t,s)=>{s9(t,s,!0).fold(()=>{t.selection.isEditable()&&N8(t)},Zn),bH(t)&&Wg(t.dom,t.getBody())},r9=(t,s)=>{t.addCommand("delete",()=>{rF(t,s)}),t.addCommand("forwardDelete",()=>{Nie(t,s)})},QM=5,iF=400,aF=t=>t.touches===void 0||t.touches.length!==1?ce.none():ce.some(t.touches[0]),cF=(t,s)=>{const a=Math.abs(t.clientX-s.x),u=Math.abs(t.clientY-s.y);return a>QM||u>QM},i9=t=>{const s=yc(),a=fo(!1),u=Il(p=>{t.dispatch("longpress",{...p,type:"longpress"}),a.set(!0)},iF);t.on("touchstart",p=>{aF(p).each(b=>{u.cancel();const E={x:b.clientX,y:b.clientY,target:p.target};u.throttle(p),a.set(!1),s.set(E)})},!0),t.on("touchmove",p=>{u.cancel(),aF(p).each(b=>{s.on(E=>{cF(b,E)&&(s.clear(),a.set(!1),t.dispatch("longpresscancel"))})})},!0),t.on("touchend touchcancel",p=>{u.cancel(),p.type!=="touchcancel"&&s.get().filter(b=>b.target.isEqualNode(p.target)).each(()=>{a.get()?p.preventDefault():t.dispatch("tap",{...p,type:"tap"})})},!0)},eN=(t,s)=>ho(t,s.nodeName),lF=(t,s)=>gn(s)?!0:vo(s)?!eN(t.getBlockElements(),s)&&!hd(s)&&!sn(t,s)&&!Ib(s)&&!NE(s):!1,a9=(t,s,a)=>Kt(c8(Me.fromDom(a),Me.fromDom(s)),u=>eN(t,u.dom)),c9=(t,s)=>{if(gn(s)){if(s.data.length===0)return!0;if(/^\s+$/.test(s.data))return!s.nextSibling||eN(t,s.nextSibling)||Ib(s.nextSibling)}return!1},tN=t=>t.dom.create(Qc(t),Dy(t)),Pie=t=>{const s=t.dom,a=t.selection,u=t.schema,p=u.getBlockElements(),b=a.getStart(),E=t.getBody();let I,D,$=null;const J=Qc(t);if(!b||!vo(b))return;const te=E.nodeName.toLowerCase();if(!u.isValidChild(te,J.toLowerCase())||a9(p,E,b))return;if(E.firstChild===E.lastChild&&Ri(E.firstChild)){I=tN(t),I.appendChild(wy().dom),E.replaceChild(I,E.firstChild),t.selection.setCursorLocation(I,0),t.nodeChanged();return}let re=E.firstChild;for(;re;)if(vo(re)&&fu(u,re),lF(u,re)){if(c9(p,re)){D=re,re=re.nextSibling,s.remove(D);continue}if(!I){if(!$&&t.hasFocus()&&($=Ky(t.selection.getRng(),()=>document.createElement("span"))),!re.parentNode){re=null;break}I=tN(t),E.insertBefore(I,re)}D=re,re=re.nextSibling,I.appendChild(D)}else I=null,re=re.nextSibling;$&&(t.selection.setRng(Zy($)),t.nodeChanged())},l9=(t,s,a)=>{const u=Me.fromDom(tN(t)),p=wy();Qs(u,p),a(s,u);const b=document.createRange();return b.setStartBefore(p.dom),b.setEndBefore(p.dom),b},nN=t=>{t.on("NodeChange",()=>Pie(t))},u9=t=>s=>(" "+s.attr("class")+" ").indexOf(t)!==-1,FI=(t,s,a)=>function(u){const p=arguments,b=p[p.length-2],E=b>0?s.charAt(b-1):"";if(E==='"')return u;if(E===">"){const I=s.lastIndexOf("<",b);if(I!==-1&&s.substring(I,b).indexOf('contenteditable="false"')!==-1)return u}return'<span class="'+a+'" data-mce-content="'+t.dom.encode(p[0])+'">'+t.dom.encode(typeof p[1]=="string"?p[1]:p[0])+"</span>"},Lie=(t,s,a)=>{let u=s.length,p=a.content;if(a.format!=="raw"){for(;u--;)p=p.replace(s[u],FI(t,p,fO(t)));a.content=p}},Bie=(t,s)=>ys(t,a=>{const u=s.match(a);return u!==null&&u[0].length===s.length}),Vie=t=>{const s="contenteditable",a=" "+yn.trim(TD(t))+" ",u=" "+yn.trim(fO(t))+" ",p=u9(a),b=u9(u),E=OD(t);E.length>0&&t.on("BeforeSetContent",I=>{Lie(t,E,I)}),t.parser.addAttributeFilter("class",I=>{let D=I.length;for(;D--;){const $=I[D];p($)?$.attr(s,"true"):b($)&&$.attr(s,"false")}}),t.serializer.addAttributeFilter(s,I=>{let D=I.length;for(;D--;){const $=I[D];if(!p($)&&!b($))continue;const J=$.attr("data-mce-content");E.length>0&&J?Bie(E,J)?($.name="#text",$.type=3,$.raw=!0,$.value=J):$.remove():$.attr(s,null)}})},Hie=t=>Sp(Me.fromDom(t.getBody()),"*[data-mce-caret]").map(s=>s.dom).getOrNull(),uF=(t,s)=>{s.hasAttribute("data-mce-caret")&&(Xd(s),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(s))},d9=(t,s)=>{const a=Hie(t);if(a){if(s.type==="compositionstart"){s.preventDefault(),s.stopPropagation(),uF(t,a);return}hS(a)&&(uF(t,a),t.undoManager.add())}},Fie=t=>{t.on("keyup compositionstart",$e(d9,t))},f9=fi,$ie=(t,s,a)=>VW(s,t,a,Wy,Gy,f9),Uie=(t,s,a)=>HW(s,t,a,b=>Wy(b)||a8(b),b=>Gy(b)||F3(b),f9),jie=t=>{const s=t.dom.create(Qc(t));return s.innerHTML='<br data-mce-bogus="1">',s},dF=(t,s,a)=>{const u=Dh(t.getBody()),p=$e(Pv,s===1?u.next:u.prev);if(a.collapsed){const b=t.dom.getParent(a.startContainer,"PRE");if(!b)return;if(!p(Pt.fromRangeStart(a))){const I=Me.fromDom(jie(t));s===1?sd(Me.fromDom(b),I):wc(Me.fromDom(b),I),t.selection.select(I.dom,!0),t.selection.collapse()}}},J0e=(t,s)=>{const a=s?1:-1,u=t.selection.getRng();return $ie(a,t,u).orThunk(()=>(dF(t,a,u),ce.none()))},zie=(t,s)=>{const a=s?1:-1,u=t.selection.getRng();return Uie(a,t,u).orThunk(()=>(dF(t,a,u),ce.none()))},Wie=(t,s)=>{const a=s?t.getEnd(!0):t.getStart(!0);return Z3(a)?!s:s},p9=(t,s)=>J0e(t,Wie(t.selection,s)).exists(a=>(qg(t,a),!0)),h9=(t,s)=>zie(t,s).exists(a=>(qg(t,a),!0)),m9=(t,s)=>ww(t,s,s?Gy:Wy),oN=(t,s)=>AH(t,!s).map(a=>{const u=a.toRange(),p=t.selection.getRng();return s?u.setStart(p.startContainer,p.startOffset):u.setEnd(p.endContainer,p.endOffset),u}).exists(a=>(qg(t,a),!0)),g9=(t,s)=>{const a=E=>eo(E,s),u=E=>lu(E.dom),p=Me.fromDom(t.container());return Rr(p,u,a).filter(E=>!a(E))},v9=(t,s,a)=>(a?DW:xW)(t.getBody(),s).map(p=>p.toRange()),Gie=(t,s)=>{const a=Pt.fromRangeStart(t.selection.getRng()),u=Pt.fromRangeEnd(t.selection.getRng()),p=Me.fromDom(t.getBody());return Pd(Vi(g9(a,p),g9(u,p),(E,I)=>eo(E,I)?ce.some(E):ce.none())).fold(Et,E=>s&&HH(E.dom,u)||!s&&VH(E.dom,a)?v9(t,s?u:a,s).exists(I=>(qg(t,I),!0)):!1)},b9=(t,s)=>Gie(t,s),qie=t=>bt(["figcaption"],Xo(t)),Kie=(t,s,a)=>{const u=$e(eo,s);return Rr(Me.fromDom(t.container()),p=>a.isBlock(Xo(p)),u).filter(qie)},Zie=(t,s,a)=>s?HH(t.dom,a):VH(t.dom,a),Yie=(t,s)=>{const a=Me.fromDom(t.getBody()),u=Pt.fromRangeStart(t.selection.getRng());return Kie(u,a,t.schema).exists(()=>{if(Zie(a,s,u)){const b=l9(t,a,s?Qs:mp);return t.selection.setRng(b),!0}else return!1})},y9=(t,s)=>t.selection.isCollapsed()?Yie(t,s):!1,Jie=(t,s,a)=>{const u=t.selection.getRng(),p=Pt.fromRangeStart(u);return t.getBody().firstChild===s&&VH(a,p)?(t.execCommand("InsertNewBlockBefore"),!0):!1},Xie=(t,s)=>{const a=t.selection.getRng(),u=Pt.fromRangeStart(a);return t.getBody().lastChild===s&&HH(s,u)?(t.execCommand("InsertNewBlockAfter"),!0):!1},Qie=(t,s)=>s?ce.from(t.dom.getParent(t.selection.getNode(),"details")).map(a=>Xie(t,a)).getOr(!1):ce.from(t.dom.getParent(t.selection.getNode(),"summary")).bind(a=>ce.from(t.dom.getParent(a,"details")).map(u=>Jie(t,u,a))).getOr(!1),fF=(t,s)=>Qie(t,s),S9={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},eae=t=>Ut(t,s=>({...S9,...s})),tae=t=>Ut(t,s=>({...S9,...s})),$I=(t,s)=>s.keyCode===t.keyCode&&s.shiftKey===t.shiftKey&&s.altKey===t.altKey&&s.ctrlKey===t.ctrlKey&&s.metaKey===t.metaKey,nae=(t,s)=>Jn(eae(t),a=>$I(a,s)?[a]:[]),oae=(t,s)=>Jn(tae(t),a=>$I(a,s)?[a]:[]),Jo=(t,...s)=>()=>t.apply(null,s),OC=(t,s)=>gt(nae(t,s),a=>a.action()),C9=(t,s)=>$n(oae(t,s),a=>a.action()),E9=(t,s)=>{const a=s?1:-1,u=t.selection.getRng();return VW(t,a,u,zO,WO,Ep).exists(p=>(qg(t,p),!0))},sae=(t,s)=>{const a=s?1:-1,u=t.selection.getRng();return HW(t,a,u,zO,WO,Ep).exists(p=>(qg(t,p),!0))},_9=(t,s)=>ww(t,s,s?WO:zO),rae=(t,s)=>w9(t,s,Jt),w9=(t,s,a)=>Jn(Oi(t),u=>Ls(u,s)?a(u)?[u]:[]:w9(u,s,a)),UI=(t,s,a=Et)=>{if(a(s))return ce.none();if(bt(t,Xo(s)))return ce.some(s);const u=p=>Ls(p,"table")||a(p);return na(s,t.join(","),u)},iae=(t,s)=>UI(["td","th"],t,s),aae=t=>rae(t,"th,td"),A9=(t,s)=>Kc(t,"table",s),pF=eu.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Gl={...pF,none:t=>pF.none(t)},sN=(t,s,a,u,p=Jt)=>{const b=u===1;if(!b&&a<=0)return Gl.first(t[0]);if(b&&a>=t.length-1)return Gl.last(t[t.length-1]);{const E=a+u,I=t[E];return p(I)?Gl.middle(s,I):sN(t,s,E,u,p)}},Aw=(t,s)=>A9(t,s).bind(a=>{const u=aae(a);return No(u,b=>eo(t,b)).map(b=>({index:b,all:u}))}),p1=(t,s,a)=>Aw(t,a).fold(()=>Gl.none(t),p=>sN(p.all,t,p.index,1,s)),Wv=(t,s,a)=>Aw(t,a).fold(()=>Gl.none(),p=>sN(p.all,t,p.index,-1,s));var jI=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],hF=()=>{const t=$=>Me.fromDom($.dom.cloneNode(!1)),s=$=>$d($).dom,a=$=>ki($)?Xo($)==="body"?!0:bt(jI,Xo($)):!1,u=$=>ki($)?bt(["br","img","hr","input"],Xo($)):!1,p=$=>ki($)&&Xr($,"contenteditable")==="false",b=($,J)=>$.dom.compareDocumentPosition(J.dom),E=($,J)=>{const te=Ds($);Ac(J,te)},I=$=>{const J=Xo($);return bt(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],J)},D=$=>ki($)?id($,"lang"):ce.none();return{up:Be({selector:na,closest:Kc,predicate:yp,all:Wc}),down:Be({selector:Ht,predicate:Ie}),styles:Be({get:zi,getRaw:ta,set:Gc,remove:ny}),attrs:Be({get:Xr,set:_i,remove:da,copyTo:E}),insert:Be({before:wc,after:sd,afterAll:Sb,append:Qs,appendAll:rd,prepend:mp,wrap:ku}),remove:Be({unwrap:ru,remove:Vr}),create:Be({nu:Me.fromTag,clone:t,text:Me.fromText}),query:Be({comparePosition:b,prevSibling:nd,nextSibling:xl}),property:Be({children:Oi,name:Xo,parent:Rl,document:s,isText:dr,isComment:ji,isElement:ki,isSpecial:I,getLanguage:D,getText:qc,setText:X1,isBoundary:a,isEmptyTag:u,isNonEditable:p}),eq:eo,is:Ua}};const zI=(t,s)=>({element:t,offset:s}),mF=(t,s)=>{if(t.property().isText(s))return zI(s,t.property().getText(s).length);{const a=t.property().children(s);return a.length>0?mF(t,a[a.length-1]):zI(s,a.length)}},gF=(t,s,a)=>{const u=t.property().children(s);return u.length>0&&a<u.length?gF(t,u[a],0):u.length>0&&t.property().isElement(s)&&u.length===a?mF(t,u[u.length-1]):zI(s,a)},cae=gF,lae=hF(),T9=(t,s)=>cae(lae,t,s),vF=Xi("image"),O9=t=>{const s=t;return ce.from(s[vF])},uae=(t,s)=>{const a=t;a[vF]=s},I9=Xi("event"),X0e=t=>{const s=t;return ce.from(s[I9])},bF=t=>s=>{const a=s;a[I9]=t},Km=(t,s)=>bF(s)(t),R9=bF(0),dae=bF(2),RC=bF(1),pae=(t=>s=>{const a=s;return ce.from(a[I9]).exists(u=>u===t)})(0),rN=()=>Object.freeze({length:0,item:t=>null}),WI=Xi("mode"),x9=t=>{const s=t;return ce.from(s[WI])},GI=t=>s=>{const a=s;a[WI]=t},D9=(t,s)=>GI(s)(t),yF=GI(0),iN=GI(2),k9=GI(1),aN=t=>s=>{const a=s;return ce.from(a[WI]).exists(u=>u===t)},Tw=aN(0),M9=aN(1),hae=(t,s)=>({...s,get length(){return s.length},add:(a,u)=>{if(Tw(t))if(K(a)){if(!Ne(u))return s.add(a,u)}else return s.add(a);return null},remove:a=>{Tw(t)&&s.remove(a)},clear:()=>{Tw(t)&&s.clear()}}),mae=["none","copy","link","move"],gae=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],SF=()=>{const t=new window.DataTransfer;let s="move",a="all";const u={get dropEffect(){return s},set dropEffect(p){bt(mae,p)&&(s=p)},get effectAllowed(){return a},set effectAllowed(p){pae(u)&&bt(gae,p)&&(a=p)},get items(){return hae(u,t.items)},get files(){return M9(u)?rN():t.files},get types(){return t.types},setDragImage:(p,b,E)=>{Tw(u)&&(uae(u,{image:p,x:b,y:E}),t.setDragImage(p,b,E))},getData:p=>M9(u)?"":t.getData(p),setData:(p,b)=>{Tw(u)&&t.setData(p,b)},clearData:p=>{Tw(u)&&t.clearData(p)}};return yF(u),u},vae=t=>{const s=SF(),a=x9(t);return iN(t),R9(s),s.dropEffect=t.dropEffect,s.effectAllowed=t.effectAllowed,O9(t).each(u=>s.setDragImage(u.image,u.x,u.y)),Ue(t.types,u=>{u!=="Files"&&s.setData(u,t.getData(u))}),Ue(t.files,u=>s.items.add(u)),X0e(t).each(u=>{Km(s,u)}),a.each(u=>{D9(t,u),D9(s,u)}),s},bae=t=>{const s=t.getData("text/html");return s===""?ce.none():ce.some(s)},CF=(t,s)=>t.setData("text/html",s),yae=(t,s)=>({left:t.left-s,top:t.top-s,right:t.right+s*2,bottom:t.bottom+s*2,width:t.width+s,height:t.height+s}),T0=(t,s)=>Jn(s,a=>{const u=yae(Lu(a.getBoundingClientRect()),-1);return[{x:u.left,y:t(u),cell:a},{x:u.right,y:t(u),cell:a}]}),EF=(t,s,a)=>tn(t,(u,p)=>u.fold(()=>ce.some(p),b=>{const E=Math.sqrt(Math.abs(b.x-s)+Math.abs(b.y-a)),I=Math.sqrt(Math.abs(p.x-s)+Math.abs(p.y-a));return ce.some(I<E?p:b)}),ce.none()),N9=(t,s,a,u,p)=>{const b=Ht(Me.fromDom(a),"td,th,caption").map(I=>I.dom),E=Oe(T0(t,b),I=>s(I,p));return EF(E,u,p).map(I=>I.cell)},Sae=t=>t.bottom,Cae=t=>t.top,_F=(t,s)=>t.y<s,wF=(t,s)=>t.y>s,P9=$e(N9,Sae,_F),L9=$e(N9,Cae,wF),B9=(t,s)=>It(s.getClientRects()).bind(a=>P9(t,a.left,a.top)).bind(a=>UM(uie(a),s)),Eae=(t,s)=>Dt(s.getClientRects()).bind(a=>L9(t,a.left,a.top)).bind(a=>UM(FH(a),s)),qI=(t,s,a)=>a.breakAt.exists(u=>t(s,u).breakAt.isSome()),cN=t=>t.breakType===bi.Wrap&&t.positions.length===0,V9=t=>t.breakType===bi.Br&&t.positions.length===1,AF=(t,s,a)=>{const u=t(s,a);return cN(u)||!Ri(a.getNode())&&V9(u)?!qI(t,s,u):u.breakAt.isNone()},H9=$e(AF,EC),F9=$e(AF,_C),lN=(t,s,a)=>{const u=Pt.fromRangeStart(s);return Bv(!t,a).exists(p=>p.isEqual(u))},TF=(t,s,a,u)=>{const p=t.selection.getRng(),b=s?1:-1;return V_()&&lN(s,p,a)?(E0(b,t,a,!s,!1).each(E=>{qg(t,E)}),!0):!1},KI=(t,s,a)=>B9(s,a).orThunk(()=>It(a.getClientRects()).bind(u=>PH(LH(t,Pt.before(s)),u.left))).getOr(Pt.before(s)),_ae=(t,s,a)=>Eae(s,a).orThunk(()=>It(a.getClientRects()).bind(u=>PH(BH(t,Pt.after(s)),u.left))).getOr(Pt.after(s)),OF=(t,s)=>{const a=s.getNode(t);return gm(a)?ce.some(a):ce.none()},wae=(t,s,a)=>{s.undoManager.transact(()=>{const u=t?sd:wc,p=l9(s,Me.fromDom(a),u);qg(s,p)})},$9=(t,s,a)=>{const u=OF(!!s,a),p=s===!1;u.fold(()=>qg(t,a.toRange()),b=>Bv(p,t.getBody()).filter(E=>E.isEqual(a)).fold(()=>qg(t,a.toRange()),E=>wae(s,t,b)))},U9=(t,s,a,u)=>{const p=t.selection.getRng(),b=Pt.fromRangeStart(p),E=t.getBody();if(!s&&H9(u,b)){const I=KI(E,a,b);return $9(t,s,I),!0}else if(s&&F9(u,b)){const I=_ae(E,a,b);return $9(t,s,I),!0}else return!1},j9=(t,s,a)=>ce.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(u=>ce.from(t.dom.getParent(u,"table")).map(p=>a(t,s,p,u))).getOr(!1),IF=(t,s)=>j9(t,s,TF),z9=(t,s)=>j9(t,s,U9),Aae=t=>{const s=mm.exact(t,0,t,0);return uT(s)},Tae=t=>uN(t)||vr(t).some(s=>Sf(s)&&uN(s)),W9=(t,s,a)=>a.fold(ce.none,ce.none,(u,p)=>gv(p).map(b=>Aae(b)),u=>t.mode.isReadOnly()||!Oae(u)||!Tae(u)?ce.none():(t.execCommand("mceTableInsertRowAfter"),G9(t,s,u))),Oae=t=>Rr(t,ua("table")).exists(Gd),G9=(t,s,a)=>W9(t,s,p1(a,uN)),Iae=(t,s,a)=>W9(t,s,Wv(a,uN)),uN=t=>Gd(t)||cs(t,RF),RF=t=>Sf(t)&&Gd(t),q9=(t,s)=>{const a=["table","li","dl"],u=Me.fromDom(t.getBody()),p=I=>{const D=Xo(I);return eo(I,u)||bt(a,D)},b=t.selection.getRng(),E=Me.fromDom(s?b.endContainer:b.startContainer);return iae(E,p).map(I=>(A9(I,p).each(J=>{t.model.table.clearSelectedCells(J.dom)}),t.selection.collapse(!s),(s?G9:Iae)(t,p,I).each(J=>{t.selection.setRng(J)}),!0)).getOr(!1)},h1=(t,s,a)=>{const u=$s.os.isMacOS()||$s.os.isiOS(),p=$s.browser.isFirefox();OC([{keyCode:qn.RIGHT,action:Jo(p9,t,!0)},{keyCode:qn.LEFT,action:Jo(p9,t,!1)},{keyCode:qn.UP,action:Jo(h9,t,!1)},{keyCode:qn.DOWN,action:Jo(h9,t,!0)},...u?[{keyCode:qn.UP,action:Jo(oN,t,!1),metaKey:!0,shiftKey:!0},{keyCode:qn.DOWN,action:Jo(oN,t,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:qn.RIGHT,action:Jo(IF,t,!0)},{keyCode:qn.LEFT,action:Jo(IF,t,!1)},{keyCode:qn.UP,action:Jo(z9,t,!1)},{keyCode:qn.DOWN,action:Jo(z9,t,!0)},{keyCode:qn.UP,action:Jo(z9,t,!1)},{keyCode:qn.UP,action:Jo(fF,t,!1)},{keyCode:qn.DOWN,action:Jo(fF,t,!0)},{keyCode:qn.RIGHT,action:Jo(E9,t,!0)},{keyCode:qn.LEFT,action:Jo(E9,t,!1)},{keyCode:qn.UP,action:Jo(sae,t,!1)},{keyCode:qn.DOWN,action:Jo(sae,t,!0)},{keyCode:qn.RIGHT,action:Jo(qM,t,s,!0)},{keyCode:qn.LEFT,action:Jo(qM,t,s,!1)},{keyCode:qn.RIGHT,ctrlKey:!u,altKey:u,action:Jo($W,t,s)},{keyCode:qn.LEFT,ctrlKey:!u,altKey:u,action:Jo(qH,t,s)},{keyCode:qn.UP,action:Jo(y9,t,!1)},{keyCode:qn.DOWN,action:Jo(y9,t,!0)},...p?[{keyCode:qn.UP,action:Jo(b9,t,!1)},{keyCode:qn.DOWN,action:Jo(b9,t,!0)}]:[]],a).each(b=>{a.preventDefault()})},K9=(t,s)=>{t.on("keydown",a=>{a.isDefaultPrevented()||h1(t,s,a)})},Vh=(t,s)=>({container:t,offset:s}),ZI=Ir.DOM,Ow=t=>s=>t===s?-1:0,m1=t=>s=>t.isBlock(s)||bt(["BR","IMG","HR","INPUT"],s.nodeName)||t.getContentEditable(s)==="false",dN=(t,s,a)=>{if(gn(t)&&s>=0)return ce.some(Vh(t,s));{const u=Ch(ZI);return ce.from(u.backwards(t,s,Ow(t),a)).map(p=>Vh(p.container,p.container.data.length))}},Hh=(t,s,a)=>{if(gn(t)&&s>=t.length)return ce.some(Vh(t,s));{const u=Ch(ZI);return ce.from(u.forwards(t,s,Ow(t),a)).map(p=>Vh(p.container,0))}},O0=(t,s,a)=>{if(!gn(t))return ce.none();const u=t.data;if(s>=0&&s<=u.length)return ce.some(Vh(t,s));{const p=Ch(ZI);return ce.from(p.backwards(t,s,Ow(t),a)).bind(b=>{const E=b.container.data;return O0(b.container,s+E.length,a)})}},xF=(t,s,a)=>{if(!gn(t))return ce.none();const u=t.data;if(s<=u.length)return ce.some(Vh(t,s));{const p=Ch(ZI);return ce.from(p.forwards(t,s,Ow(t),a)).bind(b=>xF(b.container,s-u.length,a))}},YI=(t,s,a,u,p)=>{const b=Ch(t,m1(t));return ce.from(b.backwards(s,a,u,p))},Rae=t=>t.collapsed&&gn(t.startContainer),Z9=t=>Pu(t.toString().replace(/\u00A0/g," ")),Y9=t=>t!==""&&` \uFEFF\f
\r	\v`.indexOf(t)!==-1,xae=(t,s)=>t.substring(s.length),Dae=(t,s,a,u=!1)=>{let p;const b=a.charAt(0);for(p=s-1;p>=0;p--){const E=t.charAt(p);if(!u&&Y9(E))return ce.none();if(b===E&&ii(t,a,p,s))break}return ce.some(p)},DF=(t,s,a,u=!1)=>{if(!Rae(s))return ce.none();const p={text:"",offset:0},b=(I,D,$)=>(p.text=$+p.text,p.offset+=D,Dae(p.text,p.offset,a,u).getOr(D)),E=t.getParent(s.startContainer,t.isBlock)||t.getRoot();return YI(t,s.startContainer,s.startOffset,b,E).bind(I=>{const D=s.cloneRange();if(D.setStart(I.container,I.offset),D.setEnd(s.endContainer,s.endOffset),D.collapsed)return ce.none();const $=Z9(D);return $.lastIndexOf(a)!==0?ce.none():ce.some({text:xae($,a),range:D,trigger:a})})},kae=t=>t.nodeType===qo,J9=t=>t.nodeType===ds,X9=t=>{if(kae(t))return Vh(t,t.data.length);{const s=t.childNodes;return s.length>0?X9(s[s.length-1]):Vh(t,s.length)}},Q9=(t,s)=>{const a=t.childNodes;return a.length>0&&s<a.length?Q9(a[s],0):a.length>0&&J9(t)&&a.length===s?X9(a[a.length-1]):Vh(t,s)},Iw=(t,s)=>{var a;const u=(a=t.getParent(s.container,t.isBlock))!==null&&a!==void 0?a:t.getRoot();return YI(t,s.container,s.offset,(p,b)=>b===0?-1:b,u).filter(p=>{const b=p.container.data.charAt(p.offset-1);return!Y9(b)}).isSome()},fN=t=>s=>{const a=Q9(s.startContainer,s.startOffset);return!Iw(t,a)},eG=(t,s,a)=>$n(a.triggers,u=>DF(t,s,u)),tG=(t,s)=>{const a=s(),u=t.selection.getRng();return eG(t.dom,u,a).bind(p=>pN(t,s,p))},pN=(t,s,a,u={})=>{var p;const b=s(),I=(p=t.selection.getRng().startContainer.nodeValue)!==null&&p!==void 0?p:"",D=Oe(b.lookupByTrigger(a.trigger),J=>a.text.length>=J.minChars&&J.matches.getOrThunk(()=>fN(t.dom))(a.range,I,a.text));if(D.length===0)return ce.none();const $=Promise.all(Ut(D,J=>J.fetch(a.text,J.maxResults,u).then(re=>({matchText:a.text,items:re,columns:J.columns,onAction:J.onAction,highlightOn:J.highlightOn}))));return ce.some({lookupData:$,context:a})};var Kg;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Kg||(Kg={}));const kF=(t,s,a)=>t.stype===Kg.Error?s(t.serror):a(t.svalue),Mae=t=>{const s=[],a=[];return Ue(t,u=>{kF(u,p=>a.push(p),p=>s.push(p))}),{values:s,errors:a}},nG=(t,s)=>t.stype===Kg.Error?{stype:Kg.Error,serror:s(t.serror)}:t,hN=(t,s)=>t.stype===Kg.Value?{stype:Kg.Value,svalue:s(t.svalue)}:t,oG=(t,s)=>t.stype===Kg.Value?s(t.svalue):t,mN=(t,s)=>t.stype===Kg.Error?s(t.serror):t,sG=t=>({stype:Kg.Value,svalue:t}),MF=t=>({stype:Kg.Error,serror:t}),vd={fromResult:t=>t.fold(MF,sG),toResult:t=>kF(t,xa.error,xa.value),svalue:sG,partition:Mae,serror:MF,bind:oG,bindError:mN,map:hN,mapError:nG,fold:kF},NF=t=>se(t)&&Vt(t).length>100?" removed due to size":JSON.stringify(t,null,2),Nae=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:Be("... (only showing first ten failures)")}]):t;return Ut(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},rG=(t,s)=>vd.serror([{path:t,getErrorInfo:s}]),iG=(t,s,a)=>rG(t,()=>'Could not find valid *required* value for "'+s+'" in '+NF(a)),JI=(t,s)=>rG(t,Be(s)),aG=t=>{const s=(u,p)=>vd.bindError(t(p),b=>JI(u,b)),a=Be("val");return{extract:s,toString:a}},cG=aG(vd.svalue),gN=Be(cG),vN=(t,s)=>aG(a=>{const u=typeof a;return t(a)?vd.svalue(a):vd.serror(`Expected type: ${s} but got: ${u}`)}),PF=vN(Ye,"number"),bN=vN(K,"string"),lG=vN(me,"function"),LF=()=>({tag:"required",process:{}}),Pae=t=>({tag:"defaultedThunk",process:t}),uG=t=>Pae(Be(t)),dG=()=>({tag:"option",process:{}}),BF=(t,s,a,u)=>({tag:"field",key:t,newKey:s,presence:a,prop:u}),fG=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},Lae=(t,s)=>vd.svalue(Md(s,Nd.apply(void 0,t))),XI=t=>z(vd.serror,Wo)(t),hG={consolidateObj:(t,s)=>{const a=vd.partition(t);return a.errors.length>0?XI(a.errors):Lae(a.values,s)},consolidateArr:t=>{const s=vd.partition(t);return s.errors.length>0?XI(s.errors):vd.svalue(s.values)}},mG=(t,s,a,u)=>Ts(s,a).fold(()=>iG(t,a,s),u),VF=(t,s,a,u)=>{const p=Ts(t,s).getOrThunk(()=>a(t));return u(p)},Bae=(t,s,a)=>a(Ts(t,s)),Vae=(t,s,a,u)=>{const p=Ts(t,s).map(b=>b===!0?a(t):b);return u(p)},Hae=(t,s,a,u,p)=>{const b=I=>p.extract(s.concat([u]),I),E=I=>I.fold(()=>vd.svalue(ce.none()),D=>{const $=p.extract(s.concat([u]),D);return vd.map($,ce.some)});switch(t.tag){case"required":return mG(s,a,u,b);case"defaultedThunk":return VF(a,u,t.process,b);case"option":return Bae(a,u,E);case"defaultedOptionThunk":return Vae(a,u,t.process,E);case"mergeWithThunk":return VF(a,u,Be({}),I=>{const D=Md(t.process(a),I);return b(D)})}},Fae=(t,s,a)=>{const u={},p=[];for(const b of a)fG(b,(E,I,D,$)=>{const J=Hae(D,t,s,E,$);vd.fold(J,te=>{p.push(...te)},te=>{u[I]=te})},(E,I)=>{u[E]=I(s)});return p.length>0?vd.serror(p):vd.svalue(u)},QI=t=>({extract:(u,p)=>Fae(u,p,t),toString:()=>`obj{
`+Ut(t,p=>fG(p,(b,E,I,D)=>b+" -> "+D.toString(),(b,E)=>"state("+b+")")).join(`
`)+"}"}),$ae=t=>({extract:(u,p)=>{const b=Ut(p,(E,I)=>t.extract(u.concat(["["+I+"]"]),E));return hG.consolidateArr(b)},toString:()=>"array("+t.toString()+")"}),Uae=(t,s,a)=>{const u=s.extract([t],a);return vd.mapError(u,p=>({input:a,errors:p}))},gG=(t,s,a)=>vd.toResult(Uae(t,s,a)),yN=t=>`Errors: 
`+Nae(t.errors).join(`
`)+`

Input object: `+NF(t.input),Rw=BF,jae=t=>Rw(t,t,LF(),gN()),HF=(t,s)=>Rw(t,t,LF(),s),vG=t=>HF(t,bN),bG=t=>HF(t,lG),zae=t=>Rw(t,t,dG(),gN()),yG=(t,s)=>Rw(t,t,dG(),s),SG=t=>yG(t,bN),Wae=t=>yG(t,lG),FF=(t,s)=>Rw(t,t,uG(s),gN()),CG=(t,s,a)=>Rw(t,t,uG(s),a),$F=(t,s)=>CG(t,s,PF),Gae=(t,s,a)=>CG(t,s,$ae(a)),qae=vG("type"),Kae=bG("fetch"),Zae=bG("onAction"),pc=t=>FF("columns",t),Yae=QI([qae,vG("trigger"),$F("minChars",1),pc(1),$F("maxResults",10),Wae("matches"),Kae,Zae,Gae("highlightOn",[],bN)]),Jae=t=>gG("Autocompleter",Yae,t),Xae=()=>{const t={},s={},a={},u={},p={},b={},E={},I={},D={},$=(fe,Re)=>(Ae,_e)=>{fe[Ae.toLowerCase()]={..._e,type:Re}},J=(fe,Re)=>(Ae,_e)=>{fe[Ae.toLowerCase()]={type:Re,..._e}},te=(fe,Re)=>u[fe.toLowerCase()]=Re,re=(fe,Re)=>E[fe.toLowerCase()]=Re;return{addButton:$(t,"button"),addGroupToolbarButton:$(t,"grouptoolbarbutton"),addToggleButton:$(t,"togglebutton"),addMenuButton:$(t,"menubutton"),addSplitButton:$(t,"splitbutton"),addMenuItem:$(s,"menuitem"),addNestedMenuItem:$(s,"nestedmenuitem"),addToggleMenuItem:$(s,"togglemenuitem"),addAutocompleter:$(a,"autocompleter"),addContextMenu:$(p,"contextmenu"),addContextToolbar:$(b,"contexttoolbar"),addContextForm:J(b,"contextform"),addSidebar:$(I,"sidebar"),addView:$(D,"views"),addIcon:te,addContext:re,getAll:()=>({buttons:t,menuItems:s,icons:u,popups:a,contextMenus:p,contextToolbars:b,sidebars:I,views:D,contexts:E})}},EG=t=>{const s=t.ui.registry.getAll().popups,a=ko(s,E=>Jae(E).fold(I=>{throw new Error(yN(I))},at)),u=ap(Si(a,E=>E.trigger)),p=Yr(a);return{dataset:a,triggers:u,lookupByTrigger:E=>Oe(p,I=>I.trigger===E)}},UF=(t,s)=>{const a=Il(s.load,50);t.on("input",u=>{u.inputType==="insertCompositionText"&&!t.composing||a.throttle()}),t.on("keydown",u=>{const p=u.which;p===8?a.throttle():p===27?(a.cancel(),s.cancelIfNecessary()):(p===38||p===40)&&a.cancel()},!0),t.on("remove",a.cancel)},_G=t=>{const s=yc(),a=fo(!1),u=s.isSet,p=()=>{u()&&(sD(t),a.set(!1),s.clear())},b=te=>{u()||s.set({trigger:te.trigger,matchLength:te.text.length})},E=ka(()=>EG(t)),I=te=>s.get().map(re=>DF(t.dom,t.selection.getRng(),re.trigger,!0).bind(fe=>pN(t,E,fe,te))).getOrThunk(()=>tG(t,E)),D=te=>{I(te).fold(p,re=>{b(re.context),re.lookupData.then(fe=>{s.get().map(Re=>{const Ae=re.context;Re.trigger===Ae.trigger&&(s.set({...Re,matchLength:Ae.text.length}),a.get()?(QT(t,{range:Ae.range}),Qo(t,{lookupData:fe})):(a.set(!0),QT(t,{range:Ae.range}),E4(t,{lookupData:fe})))})})})},$=(te,re)=>{const fe=te.compareBoundaryPoints(window.Range.START_TO_START,re),Re=te.compareBoundaryPoints(window.Range.END_TO_END,re);return fe>=0&&Re<=0},J=()=>s.get().bind(({trigger:te})=>{const re=t.selection.getRng();return DF(t.dom,re,te,a.get()).filter(({range:fe})=>$(re,fe)).map(({range:fe})=>fe)});t.addCommand("mceAutocompleterReload",(te,re)=>{const fe=se(re)?re.fetchOptions:{};D(fe)}),t.addCommand("mceAutocompleterClose",p),t.addCommand("mceAutocompleterRefreshActiveRange",()=>{J().each(te=>{QT(t,{range:te})})}),t.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>J().isSome()),UF(t,{cancelIfNecessary:p,load:D})},Qae=su().browser.isSafari(),wG=t=>_m(Me.fromDom(t)),AG=(t,s)=>{var a;return t.startOffset===0&&t.endOffset===((a=s.textContent)===null||a===void 0?void 0:a.length)},CN=(t,s)=>ce.from(t.getParent(s.container(),"details")),TG=(t,s)=>CN(t,s).isSome(),ece=(t,s)=>{const a=ce.from(t.getParent(s.startContainer,"details")),u=ce.from(t.getParent(s.endContainer,"details"));if(a.isSome()||u.isSome()){const p=a.bind(b=>ce.from(t.select("summary",b)[0]));return ce.some({startSummary:p,startDetails:a,endDetails:u})}else return ce.none()},tce=(t,s)=>Hl(s).exists(a=>a.isEqual(t)),nce=(t,s)=>Mp(s).exists(a=>Ri(a.getNode())&&gu(s,a).exists(u=>u.isEqual(t))||a.isEqual(t)),oce=(t,s)=>s.startSummary.exists(a=>tce(t,a)),sce=(t,s)=>s.startSummary.exists(a=>nce(t,a)),rce=(t,s)=>s.startDetails.exists(a=>gu(a,t).forall(u=>s.startSummary.exists(p=>!p.contains(t.container())&&p.contains(u.container())))),ice=(t,s,a)=>a.startDetails.exists(u=>Vl(t,s).forall(p=>!u.contains(p.container()))),OG=(t,s)=>{const a=s.getNode();Ne(a)||t.selection.setCursorLocation(a,s.offset())},IG=(t,s,a)=>{const u=t.dom.getParent(s.container(),"details");if(u&&!u.open){const p=t.dom.select("summary",u)[0];p&&(a?Hl(p):Mp(p)).each(E=>OG(t,E))}else OG(t,s)},RG=(t,s)=>{const a=D=>D.contains(t.startContainer),u=D=>D.contains(t.endContainer),p=s.startSummary.exists(a),b=s.startSummary.exists(u),E=s.startDetails.forall(D=>s.endDetails.forall($=>D!==$));return(p||b)&&!(p&&b)||E},jF=(t,s,a)=>{const{dom:u,selection:p}=t,b=t.getBody();if(a==="character"){const E=Pt.fromRangeStart(p.getRng()),I=u.getParent(E.container(),u.isBlock),D=CN(u,E),$=I&&u.isEmpty(I),J=M(I==null?void 0:I.previousSibling),te=M(I==null?void 0:I.nextSibling);return $&&(s?te:J)&&r0(!s,b,E).exists(Re=>TG(u,Re)&&!sh(D,CN(u,Re)))?!0:r0(s,b,E).fold(Et,re=>{const fe=CN(u,re);if(TG(u,re)&&!sh(D,fe)){if(s||IG(t,re,!1),I&&$){if(s&&J)return!0;if(!s&&te)return!0;IG(t,re,s),t.dom.remove(I)}return!0}else return!1})}else return!1},xG=(t,s,a,u)=>{const b=t.selection.getRng(),E=Pt.fromRangeStart(b),I=t.getBody();return u==="selection"?RG(b,s):a?sce(E,s)||ice(I,E,s):oce(E,s)||rce(E,s)},ace=(t,s,a)=>ece(t.dom,t.selection.getRng()).fold(()=>jF(t,s,a),u=>xG(t,u,s,a)||jF(t,s,a)),cce=(t,s,a)=>{const u=t.selection,p=u.getNode(),b=u.getRng(),E=Pt.fromRangeStart(b);return yT(p)?(a==="selection"&&AG(b,p)||P8(s,E,p)?wG(p):t.undoManager.transact(()=>{const I=u.getSel();let{anchorNode:D,anchorOffset:$,focusNode:J,focusOffset:te}=I??{};const re=()=>{be(D)&&be($)&&be(J)&&be(te)&&(I==null||I.setBaseAndExtent(D,$,J,te))},fe=()=>{D=I==null?void 0:I.anchorNode,$=I==null?void 0:I.anchorOffset,J=I==null?void 0:I.focusNode,te=I==null?void 0:I.focusOffset},Re=(_e,Qe)=>{Ue(_e.childNodes,et=>{ZS(et)&&Qe.appendChild(et)})},Ae=t.dom.create("span",{"data-mce-bogus":"1"});Re(p,Ae),p.appendChild(Ae),re(),(a==="word"||a==="line")&&(I==null||I.modify("extend",s?"right":"left",a)),!u.isCollapsed()&&AG(u.getRng(),Ae)?wG(p):(t.execCommand(s?"ForwardDelete":"Delete"),fe(),Re(Ae,p),re()),t.dom.remove(Ae)}),!0):!1},xC=(t,s,a)=>ace(t,s,a)||Qae&&cce(t,s,a)?ce.some(Ze):ce.none(),DG=t=>(s,a,u={})=>{const p=s.getBody(),b={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:p,currentTarget:p,eventPhase:Event.AT_TARGET,originalTarget:p,explicitOriginalTarget:p,isTrusted:!1,srcElement:p,cancelable:!1,preventDefault:Ze,inputType:a},E=cS(new InputEvent(t));return s.dispatch(t,{...E,...b,...u})},xw=DG("input"),EN=DG("beforeinput"),zF=su(),kG=zF.os,WF=kG.isMacOS()||kG.isiOS(),uce=zF.browser.isFirefox(),dce=(t,s,a)=>{const u=a.keyCode===qn.BACKSPACE?"deleteContentBackward":"deleteContentForward",p=t.selection.isCollapsed(),b=p?"character":"selection",E=I=>p?I?"word":"line":"selection";C9([{keyCode:qn.BACKSPACE,action:Jo(o9,t)},{keyCode:qn.BACKSPACE,action:Jo(IH,t,!1)},{keyCode:qn.DELETE,action:Jo(IH,t,!0)},{keyCode:qn.BACKSPACE,action:Jo(wH,t,!1)},{keyCode:qn.DELETE,action:Jo(wH,t,!0)},{keyCode:qn.BACKSPACE,action:Jo(ZH,t,s,!1)},{keyCode:qn.DELETE,action:Jo(ZH,t,s,!0)},{keyCode:qn.BACKSPACE,action:Jo(dB,t,!1)},{keyCode:qn.DELETE,action:Jo(dB,t,!0)},{keyCode:qn.BACKSPACE,action:Jo(xC,t,!1,b)},{keyCode:qn.DELETE,action:Jo(xC,t,!0,b)},...WF?[{keyCode:qn.BACKSPACE,altKey:!0,action:Jo(xC,t,!1,E(!0))},{keyCode:qn.DELETE,altKey:!0,action:Jo(xC,t,!0,E(!0))},{keyCode:qn.BACKSPACE,metaKey:!0,action:Jo(xC,t,!1,E(!1))}]:[{keyCode:qn.BACKSPACE,ctrlKey:!0,action:Jo(xC,t,!1,E(!0))},{keyCode:qn.DELETE,ctrlKey:!0,action:Jo(xC,t,!0,E(!0))}],{keyCode:qn.BACKSPACE,action:Jo(xH,t,!1)},{keyCode:qn.DELETE,action:Jo(xH,t,!0)},{keyCode:qn.BACKSPACE,action:Jo(eF,t,!1)},{keyCode:qn.DELETE,action:Jo(eF,t,!0)},{keyCode:qn.BACKSPACE,action:Jo(DI,t,!1)},{keyCode:qn.DELETE,action:Jo(DI,t,!0)},{keyCode:qn.BACKSPACE,action:Jo(VM,t,!1)},{keyCode:qn.DELETE,action:Jo(VM,t,!0)},{keyCode:qn.BACKSPACE,action:Jo(A0,t,!1)},{keyCode:qn.DELETE,action:Jo(A0,t,!0)},{keyCode:qn.BACKSPACE,action:Jo(RH,t,!1)},{keyCode:qn.DELETE,action:Jo(RH,t,!0)},{keyCode:qn.BACKSPACE,action:Jo(XM,t,!1)},{keyCode:qn.DELETE,action:Jo(XM,t,!0)}],a).filter(I=>t.selection.isEditable()).each(I=>{a.preventDefault(),EN(t,u).isDefaultPrevented()||(I(),xw(t,u))})},fce=(t,s,a,u)=>OC([{keyCode:qn.BACKSPACE,action:Jo(bW,t)},{keyCode:qn.DELETE,action:Jo(bW,t)},...WF?[{keyCode:qn.BACKSPACE,altKey:!0,action:Jo(VI,t)},{keyCode:qn.DELETE,altKey:!0,action:Jo(VI,t)},...a?[{keyCode:uce?224:91,action:Jo(()=>(KW(t,u),VI(t)))}]:[]]:[{keyCode:qn.BACKSPACE,ctrlKey:!0,action:Jo(VI,t)},{keyCode:qn.DELETE,ctrlKey:!0,action:Jo(VI,t)}]],s),pce=(t,s)=>{let a=!1,u=[];t.on("keydown",p=>{a=p.keyCode===qn.BACKSPACE,u=JH(t),p.isDefaultPrevented()||dce(t,s,p)}),t.on("keyup",p=>{p.isDefaultPrevented()||(fce(t,p,a,u),u.length=0),a=!1})},MG=(t,s)=>{const a=Me.fromDom(t),u=Me.fromDom(s),p=ua("span"),b=$e(eo,a),E=D=>ki(D)&&ta(D,"font-size").isSome(),I=[...E(u)?[u]:[],...Z(u,E,b)];Ue(I.slice(1),D=>{ny(D,"font-size"),da(D,"data-mce-style"),p(D)&&uv(D)&&ru(D)})},hce=t=>{for(;t;){if(vo(t)||gn(t)&&t.data&&/[\r\n\s]/.test(t.data))return ce.from(Me.fromDom(t));t=t.nextSibling}return ce.none()},Dw=(t,s)=>{const a=t.dom,u=t.schema.getMoveCaretBeforeOnEnterElements();if(!s)return;if(/^(LI|DT|DD)$/.test(s.nodeName)){const b=D=>/^(ul|ol|dl)$/.test(Xo(D)),E=D=>b(D)?ce.from(D):mv(D,b),I=D=>a.isEmpty(D.dom);hce(s.firstChild).each(D=>{E(D).fold(()=>{if(I(D)){const $=T9(D,0).element;ki($)&&!Cm($)&&Qs($,Me.fromText(ci))}},$=>{wc($,Me.fromText(ci))})})}const p=a.createRng();if(s.normalize(),s.hasChildNodes()){const b=new Kr(s,s);let E=s,I;for(;I=b.current();){if(gn(I)){p.setStart(I,0),p.setEnd(I,0);break}if(u[I.nodeName.toLowerCase()]){p.setStartBefore(I),p.setEndBefore(I);break}E=I,I=b.next()}I||(p.setStart(E,0),p.setEnd(E,0))}else Ri(s)?s.nextSibling&&a.isBlock(s.nextSibling)?(p.setStartBefore(s),p.setEndBefore(s)):(p.setStartAfter(s),p.setEndAfter(s)):(p.setStart(s,0),p.setEnd(s,0));t.selection.setRng(p),UO(t,p)},kw=(t,s)=>{const a=t.getRoot();let u,p=s;for(;p!==a&&p&&t.getContentEditable(p)!=="false";){if(t.getContentEditable(p)==="true"){u=p;break}p=p.parentNode}return p!==a?u:a},GF=t=>ce.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),mce=t=>GF(t).fold(Be(""),s=>s.nodeName.toUpperCase()),NG=t=>GF(t).filter(s=>Em(Me.fromDom(s))).isSome(),qF=t=>{t.innerHTML='<br data-mce-bogus="1">'},gce=(t,s,a)=>{const u=t.dom;ce.from(a.style).map(u.parseStyle).each(D=>{const J={...pv(Me.fromDom(s)),...D};u.setStyles(s,J)});const p=ce.from(a.class).map(D=>D.split(/\s+/)),b=ce.from(s.className).map(D=>Oe(D.split(/\s+/),$=>$!==""));Vi(p,b,(D,$)=>{const J=Oe($,re=>!bt(D,re)),te=[...D,...J];u.setAttrib(s,"class",te.join(" "))});const E=["style","class"],I=Yi(a,(D,$)=>!bt(E,$));u.setAttribs(s,I)},eR=(t,s)=>{if(Qc(t).toLowerCase()===s.tagName.toLowerCase()){const u=Dy(t);gce(t,s,u)}},KF=(t,s,a,u,p=!0,b,E)=>{const I=t.dom,D=t.schema,$=Qc(t),J=a?a.nodeName.toUpperCase():"";let te=s;const re=D.getTextInlineElements();let fe;b||J==="TABLE"||J==="HR"?fe=I.create(b||$,E||{}):fe=a.cloneNode(!1);let Re=fe;if(!p)I.setAttrib(fe,"style",null),I.setAttrib(fe,"class",null);else{do if(re[te.nodeName]){if(Vu(te)||hd(te))continue;const Ae=te.cloneNode(!1);I.setAttrib(Ae,"id",""),fe.hasChildNodes()?(Ae.appendChild(fe.firstChild),fe.appendChild(Ae)):(Re=Ae,fe.appendChild(Ae))}while((te=te.parentNode)&&te!==u);MG(fe,Re)}return eR(t,fe),qF(Re),fe},PG=(t,s)=>t.dom.getParent(s,PE),vce=(t,s,a)=>{let u=s;for(;u&&u!==t&&M(u.nextSibling);){const p=u.parentElement;if(!p||!a(p))return PE(p);u=p}return!1},bce=(t,s,a)=>!s&&a.nodeName.toLowerCase()===Qc(t)&&t.dom.isEmpty(a)&&vce(t.getBody(),a,u=>ho(t.schema.getTextBlockElements(),u.nodeName.toLowerCase())),yce=(t,s,a)=>{var u,p,b;const E=s(Qc(t)),I=PG(t,a);I&&(t.dom.insertAfter(E,I),Dw(t,E),((b=(p=(u=a.parentElement)===null||u===void 0?void 0:u.childNodes)===null||p===void 0?void 0:p.length)!==null&&b!==void 0?b:0)>1&&t.dom.remove(a))},Sce=(t,s)=>t.firstChild&&t.firstChild.nodeName===s,Cce=t=>{var s;return((s=t.parentNode)===null||s===void 0?void 0:s.firstChild)===t},LG=(t,s)=>{const a=t==null?void 0:t.parentNode;return be(a)&&a.nodeName===s},BG=t=>be(t)&&/^(OL|UL|LI)$/.test(t.nodeName),ZF=t=>be(t)&&/^(LI|DT|DD)$/.test(t.nodeName),nye=t=>BG(t)&&BG(t.parentNode),_N=t=>{const s=t.parentNode;return ZF(s)?s:t},DC=(t,s,a)=>{let u=t[a?"firstChild":"lastChild"];for(;u&&!vo(u);)u=u[a?"nextSibling":"previousSibling"];return u===s},YF=t=>tn(Si(pv(Me.fromDom(t)),(s,a)=>`${a}: ${s};`),(s,a)=>s+a,""),VG=(t,s,a,u,p)=>{const b=t.dom,E=t.selection.getRng(),I=a.parentNode;if(a===t.getBody()||!I)return;nye(a)&&(p="LI");const D=ZF(u)?YF(u):void 0;let $=ZF(u)&&D?s(p,{style:YF(u)}):s(p);if(DC(a,u,!0)&&DC(a,u,!1))if(LG(a,"LI")){const J=_N(a);b.insertAfter($,J),Cce(a)?b.remove(J):b.remove(a)}else b.replace($,a);else if(DC(a,u,!0))LG(a,"LI")?(b.insertAfter($,_N(a)),$.appendChild(b.doc.createTextNode(" ")),$.appendChild(a)):I.insertBefore($,a),b.remove(u);else if(DC(a,u,!1))b.insertAfter($,_N(a)),b.remove(u);else{a=_N(a);const J=E.cloneRange();J.setStartAfter(u),J.setEndAfter(a);const te=J.extractContents();if(p==="LI"&&Sce(te,"LI")){const re=Oe(Ut($.children,Me.fromDom),qt(ua("br")));$=te.firstChild,b.insertAfter(te,a),Ue(re,fe=>mp(Me.fromDom($),fe)),D&&$.setAttribute("style",D)}else b.insertAfter(te,a),b.insertAfter($,a);b.remove(u)}Dw(t,$)},Ece=t=>{Ue(Ie(Me.fromDom(t),dr),s=>{const a=s.dom;a.nodeValue=Pu(a.data)})},HG=(t,s)=>{const a=t.dom.getParent(s,"ol,ul,dl");return a!==null&&t.dom.getContentEditableParent(a)==="false"},FG=(t,s)=>s&&s.nodeName==="A"&&t.isEmpty(s),JF=(t,s)=>t.nodeName===s||t.previousSibling&&t.previousSibling.nodeName===s,_ce=(t,s)=>t.nodeName===s||t.nextSibling&&t.nextSibling.nodeName===s,XF=(t,s)=>be(s)&&t.isBlock(s)&&!/^(TD|TH|CAPTION|FORM)$/.test(s.nodeName)&&!/^(fixed|absolute)/i.test(s.style.position)&&t.isEditable(s.parentNode)&&t.getContentEditable(s)!=="false",$G=(t,s,a)=>{var u;const p=[];if(!a)return;let b=a;for(;b=b.firstChild;){if(t.isBlock(b))return;vo(b)&&!s[b.nodeName.toLowerCase()]&&p.push(b)}let E=p.length;for(;E--;)b=p[E],(!b.hasChildNodes()||b.firstChild===b.lastChild&&((u=b.firstChild)===null||u===void 0?void 0:u.nodeValue)===""||FG(t,b))&&t.remove(b)},QF=(t,s,a)=>gn(s)?t?a===1&&s.data.charAt(a-1)===Va?0:a:a===s.data.length-1&&s.data.charAt(a)===Va?s.data.length:a:a,e$=t=>{const s=t.cloneRange();return s.setStart(t.startContainer,QF(!0,t.startContainer,t.startOffset)),s.setEnd(t.endContainer,QF(!1,t.endContainer,t.endOffset)),s},wce=t=>{let s=t;do gn(s)&&(s.data=s.data.replace(/^[\r\n]+/,"")),s=s.firstChild;while(s)},Ace=(t,s,a,u,p)=>{var b,E;const I=t.dom,D=(b=kw(I,u))!==null&&b!==void 0?b:I.getRoot();let $=I.getParent(u,I.isBlock);if(!$||!XF(I,$)){if($=$||D,!$.hasChildNodes()){const fe=I.create(s);return eR(t,fe),$.appendChild(fe),a.setStart(fe,0),a.setEnd(fe,0),fe}let J=u;for(;J&&J.parentNode!==$;)J=J.parentNode;let te;for(;J&&!I.isBlock(J);)te=J,J=J.previousSibling;const re=(E=te==null?void 0:te.parentElement)===null||E===void 0?void 0:E.nodeName;if(te&&re&&t.schema.isValidChild(re,s.toLowerCase())){const fe=te.parentNode,Re=I.create(s);for(eR(t,Re),fe.insertBefore(Re,te),J=te;J&&!I.isBlock(J);){const Ae=J.nextSibling;Re.appendChild(J),J=Ae}a.setStart(u,p),a.setEnd(u,p)}}return u},Tce=(t,s)=>{s.normalize();const a=s.lastChild;(!a||vo(a)&&/^(left|right)$/gi.test(t.getStyle(a,"float",!0)))&&t.add(s,"br")},UG=(t,s)=>{const a=y6(t);return De(s)?!1:K(a)?bt(yn.explode(a),s.nodeName.toLowerCase()):a},jG={insert:(t,s)=>{let a,u,p,b,E=!1;const I=t.dom,D=t.schema,$=D.getNonEmptyElements(),J=t.selection.getRng(),te=Qc(t),re=Me.fromDom(J.startContainer),fe=Ud(re,J.startOffset),Re=fe.exists(ke=>Sf(ke)&&!Gd(ke)),Ae=J.collapsed&&Re,_e=(ke,wt)=>KF(t,a,Mn,Qt,Jb(t),ke,wt),Qe=ke=>{const wt=QF(ke,a,u);if(gn(a)&&(ke?wt>0:wt<a.data.length))return!1;if((a.parentNode===Mn||a===Mn)&&E&&!ke||ke&&vo(a)&&a===Mn.firstChild)return!0;if(JF(a,"TABLE")||JF(a,"HR"))return _ce(a,"BR")?!ke:E&&!ke||!E&&ke;const vn=new Kr(a,Mn);gn(a)&&(ke&&wt===0?vn.prev():!ke&&wt===a.data.length&&vn.next());let Ao;for(;Ao=vn.current();){if(vo(Ao)){if(!Ao.getAttribute("data-mce-bogus")){const ss=Ao.nodeName.toLowerCase();if($[ss]&&ss!=="br")return!1}}else if(gn(Ao)&&!yg(Ao.data))return!1;ke?vn.prev():vn.next()}return!0},et=()=>{let ke;return/^(H[1-6]|PRE|FIGURE)$/.test(p)&&bn!=="HGROUP"?ke=_e(te):ke=_e(),UG(t,b)&&XF(I,b)&&I.isEmpty(Mn,void 0,{includeZwsp:!0})?ke=I.split(b,Mn):I.insertAfter(ke,Mn),Dw(t,ke),ke};kc(I,J).each(ke=>{J.setStart(ke.startContainer,ke.startOffset),J.setEnd(ke.endContainer,ke.endOffset)}),a=J.startContainer,u=J.startOffset;const ut=!!(s&&s.shiftKey),_t=!!(s&&s.ctrlKey);vo(a)&&a.hasChildNodes()&&!Ae&&(E=u>a.childNodes.length-1,a=a.childNodes[Math.min(u,a.childNodes.length-1)]||a,E&&gn(a)?u=a.data.length:u=0);const Qt=kw(I,a);if(!Qt||HG(t,a))return;ut||(a=Ace(t,te,J,a,u));let Mn=I.getParent(a,I.isBlock)||I.getRoot();b=be(Mn==null?void 0:Mn.parentNode)?I.getParent(Mn.parentNode,I.isBlock):null,p=Mn?Mn.nodeName.toUpperCase():"";const bn=b?b.nodeName.toUpperCase():"";if(bn==="LI"&&!_t){const ke=b;Mn=ke,b=ke.parentNode,p=bn}if(vo(b)&&bce(t,ut,Mn))return yce(t,_e,Mn);if(/^(LI|DT|DD)$/.test(p)&&vo(b)&&I.isEmpty(Mn)){VG(t,_e,b,Mn,te);return}if(!Ae&&(Mn===t.getBody()||!XF(I,Mn)))return;const Wt=Mn.parentNode;let ct;if(Ae)ct=_e(te),fe.fold(()=>{Qs(re,Me.fromDom(ct))},ke=>{wc(ke,Me.fromDom(ct))}),t.selection.setCursorLocation(ct,0);else if(Ig(Mn))ct=Xd(Mn),I.isEmpty(Mn)&&qF(Mn),eR(t,ct),Dw(t,ct);else if(Qe(!1))ct=et();else if(Qe(!0)&&Wt){const ke=Pt.fromRangeStart(J),wt=F3(ke),vn=Me.fromDom(Mn),ss=yk(vn,ke,t.schema)?d8(vn,ke,t.schema).bind(Gs=>ce.from(Gs.getNode())):ce.none();ct=Wt.insertBefore(_e(),Mn);const ks=JF(Mn,"HR")||wt?ct:ss.getOr(Mn);Dw(t,ks)}else{const ke=e$(J).cloneRange();ke.setEndAfter(Mn);const wt=ke.extractContents();Ece(wt),wce(wt),ct=wt.firstChild,Mn===ct?be(Wt)&&I.insertAfter(wt,Wt):I.insertAfter(wt,Mn),$G(I,$,ct),Tce(I,Mn),I.isEmpty(Mn)&&qF(Mn),ct.normalize(),I.isEmpty(ct)?(I.remove(ct),et()):(eR(t,ct),Dw(t,ct))}I.setAttrib(ct,"id",""),t.dispatch("NewBlock",{newBlock:ct})},fakeEventName:"insertParagraph"},Oce=(t,s,a)=>{const u=new Kr(s,a);let p;const b=t.getNonEmptyElements();for(;p=u.next();)if(b[p.nodeName.toLowerCase()]||gn(p)&&p.length>0)return!0;return!1},Ice=(t,s,a)=>{const u=t.dom.createRng();a?(u.setStartBefore(s),u.setEndBefore(s)):(u.setStartAfter(s),u.setEndAfter(s)),t.selection.setRng(u),UO(t,u)},Rce=(t,s)=>{const a=t.selection,u=t.dom,p=a.getRng();let b,E=!1;kc(u,p).each(fe=>{p.setStart(fe.startContainer,fe.startOffset),p.setEnd(fe.endContainer,fe.endOffset)});let I=p.startOffset,D=p.startContainer;if(vo(D)&&D.hasChildNodes()){const fe=I>D.childNodes.length-1;D=D.childNodes[Math.min(I,D.childNodes.length-1)]||D,fe&&gn(D)?I=D.data.length:I=0}let $=u.getParent(D,u.isBlock);const J=$&&$.parentNode?u.getParent($.parentNode,u.isBlock):null,te=J?J.nodeName.toUpperCase():"",re=!!(s&&s.ctrlKey);te==="LI"&&!re&&($=J),gn(D)&&I>=D.data.length&&(Oce(t.schema,D,$||u.getRoot())||(b=u.create("br"),p.insertNode(b),p.setStartAfter(b),p.setEndAfter(b),E=!0)),b=u.create("br"),m_(u,p,b),Ice(t,b,E),t.undoManager.add()},xce=(t,s)=>{const a=Me.fromTag("br");wc(Me.fromDom(s),a),t.undoManager.add()},Dce=(t,s)=>{Mce(t.getBody(),s)||sd(Me.fromDom(s),Me.fromTag("br"));const a=Me.fromTag("br");sd(Me.fromDom(s),a),Ice(t,a.dom,!1),t.undoManager.add()},kce=t=>Ri(t.getNode()),Mce=(t,s)=>kce(Pt.after(s))?!0:Vl(t,Pt.after(s)).map(a=>Ri(a.getNode())).getOr(!1),t$=t=>t&&t.nodeName==="A"&&"href"in t,Nce=t=>t.fold(Et,t$,t$,Et),n$=t=>{const s=$e($v,t),a=Pt.fromRangeStart(t.selection.getRng());return _0(s,t.getBody(),a).filter(Nce)},Gv=(t,s)=>{s.fold(Ze,$e(xce,t),$e(Dce,t),Ze)},zG={insert:(t,s)=>{const a=n$(t);a.isSome()?a.each($e(Gv,t)):Rce(t,s)},fakeEventName:"insertLineBreak"},tR=(t,s)=>GF(t).filter(a=>s.length>0&&Ls(Me.fromDom(a),s)).isSome(),o$=t=>tR(t,js(t)),WG=t=>tR(t,Th(t)),Zf=eu.generate([{br:[]},{block:[]},{none:[]}]),Bce=(t,s)=>WG(t),GG=t=>(s,a)=>NG(s)===t,qG=(t,s)=>(a,u)=>mce(a)===t.toUpperCase()===s,Vce=t=>{const s=kw(t.dom,t.selection.getStart());return De(s)},nR=t=>qG("pre",t),KG=()=>qG("summary",!0),wN=t=>(s,a)=>A4(s)===t,Hce=(t,s)=>o$(t),s$=(t,s)=>s,r$=t=>{const s=Qc(t),a=kw(t.dom,t.selection.getStart());return be(a)&&t.schema.isValidChild(a.nodeName,s)},Fce=t=>{const s=t.selection.getRng(),a=Me.fromDom(s.startContainer),p=Ud(a,s.startOffset).map(b=>Sf(b)&&!Gd(b));return s.collapsed&&p.getOr(!0)},Fh=(t,s)=>(a,u)=>tn(t,(b,E)=>b&&E(a,u),!0)?ce.some(s):ce.none(),$ce=(t,s)=>wW([Fh([Bce],Zf.none()),Fh([nR(!0),Vce],Zf.none()),Fh([KG()],Zf.br()),Fh([nR(!0),wN(!1),s$],Zf.br()),Fh([nR(!0),wN(!1)],Zf.block()),Fh([nR(!0),wN(!0),s$],Zf.block()),Fh([nR(!0),wN(!0)],Zf.br()),Fh([GG(!0),s$],Zf.br()),Fh([GG(!0)],Zf.block()),Fh([Hce],Zf.br()),Fh([s$],Zf.br()),Fh([r$],Zf.block()),Fh([Fce],Zf.block())],[t,!!(s&&s.shiftKey)]).getOr(Zf.none()),AN=(t,s,a)=>{s.mode.isReadOnly()||(s.selection.isCollapsed()||M8(s),!(be(a)&&EN(s,t.fakeEventName).isDefaultPrevented())&&(t.insert(s,a),be(a)&&xw(s,t.fakeEventName)))},ZG=(t,s)=>{if(t.mode.isReadOnly())return;const a=()=>AN(zG,t,s),u=()=>AN(jG,t,s),p=$ce(t,s);switch(T4(t)){case"linebreak":p.fold(a,a,Ze);break;case"block":p.fold(u,u,Ze);break;case"invert":p.fold(u,a,Ze);break;default:p.fold(a,u,Ze);break}},YG=su(),Uce=YG.os.isiOS()&&YG.browser.isSafari(),JG=(t,s)=>{s.isDefaultPrevented()||(s.preventDefault(),eM(t.undoManager),t.undoManager.transact(()=>{ZG(t,s)}))},TN=t=>{if(!t.collapsed)return!1;const s=t.startContainer;if(gn(s)){const a=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,u=s.data.charAt(t.startOffset-1);return a.test(u)}else return!1},jce=t=>{let s=ce.none();const a=p=>{s=ce.some(p.selection.getBookmark()),p.undoManager.add()},u=(p,b)=>{p.undoManager.undo(),s.fold(Ze,E=>p.selection.moveToBookmark(E)),JG(p,b),s=ce.none()};t.on("keydown",p=>{p.keyCode===qn.ENTER&&(Uce&&TN(t.selection.getRng())?a(t):JG(t,p))}),t.on("keyup",p=>{p.keyCode===qn.ENTER&&s.each(()=>u(t,p))})},zce=(t,s,a)=>{const u=$s.os.isMacOS()||$s.os.isiOS();OC([{keyCode:qn.END,action:Jo(m9,t,!0)},{keyCode:qn.HOME,action:Jo(m9,t,!1)},...u?[]:[{keyCode:qn.HOME,action:Jo(oN,t,!1),ctrlKey:!0,shiftKey:!0},{keyCode:qn.END,action:Jo(oN,t,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:qn.END,action:Jo(_9,t,!0)},{keyCode:qn.HOME,action:Jo(_9,t,!1)},{keyCode:qn.END,action:Jo(BI,t,!0,s)},{keyCode:qn.HOME,action:Jo(BI,t,!1,s)}],a).each(p=>{a.preventDefault()})},i$=(t,s)=>{t.on("keydown",a=>{a.isDefaultPrevented()||zce(t,s,a)})},a$=t=>{t.on("input",s=>{s.isComposing||_k(t)})},Wce=su(),Gce=(t,s,a)=>{OC([{keyCode:qn.PAGE_UP,action:Jo(BI,t,!1,s)},{keyCode:qn.PAGE_DOWN,action:Jo(BI,t,!0,s)}],a)},c$=t=>t.stopImmediatePropagation(),XG=t=>t.keyCode===qn.PAGE_UP||t.keyCode===qn.PAGE_DOWN,QG=(t,s,a)=>{a&&!t.get()?s.on("NodeChange",c$,!0):!a&&t.get()&&s.off("NodeChange",c$),t.set(a)},qce=(t,s)=>{if(Wce.os.isMacOS())return;const a=fo(!1);t.on("keydown",u=>{XG(u)&&QG(a,t,!0)}),t.on("keyup",u=>{u.isDefaultPrevented()||Gce(t,s,u),XG(u)&&a.get()&&(QG(a,t,!1),t.nodeChanged())})},eq=(t,s)=>t===s||t.contains(s),Kce=(t,s)=>!eq(t.getBody(),s.startContainer)||!eq(t.getBody(),s.endContainer)?!0:G6(t.dom,s),Zce=t=>{t.on("beforeinput",s=>{(!t.selection.isEditable()||Kt(s.getTargetRanges(),a=>!Kce(t,a)))&&s.preventDefault()})},l$=(t,s)=>{const a=s.container(),u=s.offset();return gn(a)?(a.insertData(u,t),ce.some(Pt(a,u+t.length))):Ly(s).map(p=>{const b=Me.fromText(t);return s.isAtEnd()?sd(p,b):wc(p,b),Pt(b.dom,t.length)})},oR=$e(l$,ci),u$=$e(l$," "),tq=(t,s,a)=>v8(t,s,a)?oR(s):u$(s),Yce=t=>s=>s.fold(a=>gu(t.dom,Pt.before(a)),a=>Hl(a),a=>Mp(a),a=>Vl(t.dom,Pt.after(a))),Jce=(t,s,a)=>u=>v8(t,u,a)?oR(s):u$(s),sR=t=>s=>{t.selection.setRng(s.toRange()),t.nodeChanged()},Xce=(t,s)=>t.isEditable(t.getParent(s,"summary")),nq=t=>{const s=Pt.fromRangeStart(t.selection.getRng()),a=Me.fromDom(t.getBody());if(t.selection.isCollapsed()){const u=$e($v,t),p=Pt.fromRangeStart(t.selection.getRng());return _0(u,t.getBody(),p).bind(Yce(a)).map(b=>()=>Jce(a,s,t.schema)(b).each(sR(t)))}else return ce.none()},Qce=t=>{const s=()=>{const a=Me.fromDom(t.getBody());t.selection.isCollapsed()||t.getDoc().execCommand("Delete");const u=Pt.fromRangeStart(t.selection.getRng());tq(a,u,t.schema).each(sR(t))};return bc($s.browser.isFirefox()&&t.selection.isEditable()&&Xce(t.dom,t.selection.getRng().startContainer),s)},oq=(t,s)=>{C9([{keyCode:qn.SPACEBAR,action:Jo(nq,t)},{keyCode:qn.SPACEBAR,action:Jo(Qce,t)}],s).each(a=>{s.preventDefault(),EN(t,"insertText",{data:" "}).isDefaultPrevented()||(a(),xw(t,"insertText",{data:" "}))})},ele=t=>{t.on("keydown",s=>{s.isDefaultPrevented()||oq(t,s)})},tle=t=>H4(t)?[{keyCode:qn.TAB,action:Jo(q9,t,!0)},{keyCode:qn.TAB,shiftKey:!0,action:Jo(q9,t,!1)}]:[],nle=(t,s)=>{OC([...tle(t)],s).each(a=>{s.preventDefault()})},ole=t=>{t.on("keydown",s=>{s.isDefaultPrevented()||nle(t,s)})},sle=t=>{if(t.addShortcut("Meta+P","","mcePrint"),_G(t),Lp(t))return fo(null);{const s=LI(t);return Zce(t),Fie(t),K9(t,s),pce(t,s),jce(t),ele(t),a$(t),ole(t),i$(t,s),qce(t,s),s}},Mw=(t,s)=>{const a=OI(t);a===null||RI(t,a)||t.undoManager.transact(()=>{se(s.styles)&&t.dom.setStyles(a,s.styles),se(s.attrs)&&wn(s.attrs,(u,p)=>t.dom.setAttrib(a,p,u))})},d$=(t,s)=>()=>{const a=OI(t);return be(a)&&a.nodeName===s},rle=t=>{t.addCommand("InsertUnorderedList",(s,a)=>{PM(t,"UL",a)}),t.addCommand("InsertOrderedList",(s,a)=>{PM(t,"OL",a)}),t.addCommand("InsertDefinitionList",(s,a)=>{PM(t,"DL",a)}),t.addCommand("RemoveList",()=>{xI(t)}),t.addCommand("mceListUpdate",(s,a)=>{se(a)&&Mw(t,a)}),t.addCommand("mceListBackspaceDelete",(s,a)=>{yH(t,a)}),t.addQueryStateHandler("InsertUnorderedList",d$(t,"UL")),t.addQueryStateHandler("InsertOrderedList",d$(t,"OL")),t.addQueryStateHandler("InsertDefinitionList",d$(t,"DL"))},sq=t=>{t.on("keydown",s=>{s.keyCode===qn.BACKSPACE?yH(t,!1)&&s.preventDefault():s.keyCode===qn.DELETE&&yH(t,!0)&&s.preventDefault()})},rq=t=>t.type===3,iq=t=>t.length===0,ile=t=>{const s=(p,b)=>{const E=Fu.create("li");Ue(p,I=>E.append(I)),b?t.insert(E,b,!0):t.append(E)},a=(p,b)=>rq(b)?[...p,b]:!iq(p)&&!rq(b)?(s(p,b),[]):p,u=tn(t.children(),a,[]);iq(u)||s(u)},aq=t=>{t.on("PreInit",()=>{const{parser:s}=t;s.addNodeFilter("ul,ol",a=>Ue(a,ile))})},ale=t=>{t.on("keydown",s=>{s.keyCode!==qn.TAB||qn.metaKeyPressed(s)||t.undoManager.transact(()=>{(s.shiftKey?lH(t):tW(t))&&s.preventDefault()})})},cle=t=>{j4(t)&&ale(t)},rye=t=>{sq(t),rle(t),aq(t),cle(t)};class ON{constructor(s){this.lastPath=[],this.editor=s;let a;const u=this;"onselectionchange"in s.getDoc()||s.on("NodeChange click mouseup keyup focus",p=>{const b=s.selection.getRng(),E={startContainer:b.startContainer,startOffset:b.startOffset,endContainer:b.endContainer,endOffset:b.endOffset};(p.type==="nodechange"||!C3(E,a))&&s.dispatch("SelectionChange"),a=E}),s.on("contextmenu",()=>{HO(s),s.dispatch("SelectionChange")}),s.on("SelectionChange",()=>{const p=s.selection.getStart(!0);p&&qS(s)&&!u.isSameElementPath(p)&&s.dom.isChildOf(p,s.getBody())&&s.nodeChanged({selectionChange:!0})}),s.on("mouseup",p=>{!p.isDefaultPrevented()&&qS(s)&&(s.selection.getNode().nodeName==="IMG"?kh.setEditorTimeout(s,()=>{s.nodeChanged()}):s.nodeChanged())})}nodeChanged(s={}){const a=this.editor,u=a.selection;let p;if(a.initialized&&u&&!vD(a)&&!$S(a)){const b=a.getBody();p=u.getStart(!0)||b,(p.ownerDocument!==a.getDoc()||!a.dom.isChildOf(p,b))&&(p=b);const E=[];a.dom.getParent(p,I=>I===b?!0:(E.push(I),!1)),a.dispatch("NodeChange",{...s,element:p,parents:E})}}isSameElementPath(s){let a;const u=this.editor,p=ps(u.dom.getParents(s,Jt,u.getBody()));if(p.length===this.lastPath.length){for(a=p.length;a>=0&&p[a]===this.lastPath[a];a--);if(a===-1)return this.lastPath=p,!0}return this.lastPath=p,!1}}const cq="x-tinymce/html",IN=Be(cq),f$="<!-- "+cq+" -->",lle=t=>f$+t,ule=t=>t.replace(f$,""),lq=t=>t.indexOf(f$)!==-1,dle=t=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(t),fle=(t,s)=>{let a="<"+t;const u=Si(s,(p,b)=>b+'="'+Db.encodeAllRaw(p)+'"');return u.length&&(a+=" "+u.join(" ")),a+">"},ple=(t,s,a)=>{const u=t.split(/\n\n/),p=fle(s,a),b="</"+s+">",E=Ut(u,D=>D.split(/\n/).join("<br />")),I=D=>p+D+b;return E.length===1?E[0]:Ut(E,I).join("")},uq="%MCEPASTEBIN%",hle=(t,s)=>{const{dom:a,selection:u}=t,p=t.getBody();s.set(u.getRng());const b=a.add(t.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},uq);$s.browser.isFirefox()&&a.setStyle(b,"left",a.getStyle(p,"direction",!0)==="rtl"?65535:-65535),a.bind(b,"beforedeactivate focusin focusout",E=>{E.stopPropagation()}),b.focus(),u.select(b,!0)},mle=(t,s)=>{const a=t.dom;if(p$(t)){let u;const p=s.get();for(;u=p$(t);)a.remove(u),a.unbind(u);p&&t.selection.setRng(p)}s.set(null)},p$=t=>t.dom.get("mcepastebin"),$r=t=>be(t)&&t.id==="mcepastebin",gle=t=>{const s=t.dom,a=(E,I)=>{E.appendChild(I),s.remove(I,!0)},[u,...p]=Oe(t.getBody().childNodes,$r);Ue(p,E=>{a(u,E)});const b=s.select("div[id=mcepastebin]",u);for(let E=b.length-1;E>=0;E--){const I=s.create("div");u.insertBefore(I,b[E]),a(I,b[E])}return u?u.innerHTML:""},h$=t=>t===uq,vle=t=>{const s=fo(null);return{create:()=>hle(t,s),remove:()=>mle(t,s),getEl:()=>p$(t),getHtml:()=>gle(t),getLastRng:s.get}},RN=(t,s)=>(yn.each(s,a=>{Y(a,RegExp)?t=t.replace(a,""):t=t.replace(a[0],a[1])}),t),dq=t=>{const s=Op(),a=g0({},s);let u="";const p=s.getVoidElements(),b=yn.makeMap("script noscript style textarea video audio iframe object"," "),E=s.getBlockElements(),I=D=>{const $=D.name,J=D;if($==="br"){u+=`
`;return}if($!=="wbr"){if(p[$]&&(u+=" "),b[$]){u+=" ";return}if(D.type===3&&(u+=D.value),!(D.name in s.getVoidElements())){let te=D.firstChild;if(te)do I(te);while(te=te.next)}E[$]&&J.next&&(u+=`
`,$==="p"&&(u+=`
`))}};return t=RN(t,[/<!\[[^\]]+\]>/g]),I(a.parse(t)),u},fq=t=>(t=RN(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(a,u,p)=>!u&&!p?" ":ci],/<br class="Apple-interchange-newline">/g,/<br>$/i]),t),ble=t=>{let s=0;return()=>t+s++},yle=t=>{const s=t.toLowerCase(),a={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return yn.hasOwn(a,s)?"image/"+a[s]:"image/"+s},pq=(t,s)=>{const a=g0({sanitize:pO(t),sandbox_iframes:k_(t),sandbox_iframes_exclusions:HS(t),convert_unsafe_embeds:mO(t)},t.schema);a.addNodeFilter("meta",p=>{yn.each(p,b=>{b.remove()})});const u=a.parse(s,{forced_root_block:!1,isRootContent:!0});return jy({validate:!0},t.schema).serialize(u)},rR=(t,s)=>({content:t,cancelled:s}),Sle=(t,s,a)=>{const u=t.dom.create("div",{style:"display:none"},s),p=_4(t,u,a);return rR(p.node.innerHTML,p.isDefaultPrevented())},Cle=(t,s,a)=>{const u=v6(t,s,a),p=pq(t,u.content);return t.hasEventListeners("PastePostProcess")&&!u.isDefaultPrevented()?Sle(t,p,a):rR(p,u.isDefaultPrevented())},m$=(t,s,a)=>Cle(t,s,a),g$=(t,s)=>(t.insertContent(s,{merge:N4(t),paste:!0}),!0),v$=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),Ele=(t,s)=>v$(s)&&Kt(RD(t),a=>ai(s.toLowerCase(),`.${a.toLowerCase()}`)),_le=(t,s,a)=>(t.undoManager.extra(()=>{a(t,s)},()=>{t.insertContent('<img src="'+s+'">')}),!0),hq=(t,s,a)=>(t.undoManager.extra(()=>{a(t,s)},()=>{t.execCommand("mceInsertLink",!1,s)}),!0),wle=(t,s,a)=>!t.selection.isCollapsed()&&v$(s)?hq(t,s,a):!1,Ale=(t,s,a)=>Ele(t,s)?_le(t,s,a):!1,mq=(t,s)=>{yn.each([wle,Ale,g$],a=>!a(t,s,g$))},Tle=(t,s,a)=>{a||!AD(t)?g$(t,s):mq(t,s)},Ole=ble("mceclip"),Ile=t=>{const s=SF();return CF(s,t),iN(s),s},iR=(t,s,a,u,p)=>{const b=m$(t,s,a);if(!b.cancelled){const E=b.content,I=()=>Tle(t,E,u);p?EN(t,"insertFromPaste",{dataTransfer:Ile(E)}).isDefaultPrevented()||(I(),xw(t,"insertFromPaste")):I()}},xN=(t,s,a,u)=>{const p=a||lq(s);iR(t,ule(s),p,!1,u)},DN=(t,s,a)=>{const u=t.dom.encode(s).replace(/\r\n/g,`
`),p=dT(u,uO(t)),b=ple(p,Qc(t),Dy(t));iR(t,b,!1,!0,a)},gq=t=>{const s={};if(t&&t.types)for(let a=0;a<t.types.length;a++){const u=t.types[a];try{s[u]=t.getData(u)}catch{s[u]=""}}return s},qv=(t,s)=>s in t&&t[s].length>0,vq=t=>qv(t,"text/html")||qv(t,"text/plain"),bq=(t,s)=>{const a=s.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return be(a)?t.dom.encode(a[1]):void 0},Rle=(t,s,a,u)=>{const p=Ole(),b=Ws(t)&&be(a.name),E=b?bq(t,a.name):p,I=b?a.name:void 0,D=s.create(p,a,u,E,I);return s.add(D),D},xle=(t,s)=>{BB(s.uri).each(({data:a,type:u,base64Encoded:p})=>{const b=p?a:btoa(a),E=s.file,I=t.editorUpload.blobCache,D=I.getByData(b,u),$=D??Rle(t,I,E,b);xN(t,`<img src="${$.blobUri()}">`,!1,!0)})},Dle=t=>t.type==="paste",kle=t=>Promise.all(Ut(t,s=>HB(s).then(a=>({file:s,uri:a})))),yq=t=>{const s=RD(t);return a=>$o(a.type,"image/")&&Kt(s,u=>yle(u)===a.type)},Mle=(t,s)=>{const a=s.items?Jn(Nn(s.items),p=>p.kind==="file"?[p.getAsFile()]:[]):[],u=s.files?Nn(s.files):[];return Oe(a.length>0?a:u,yq(t))},b$=(t,s,a)=>{const u=Dle(s)?s.clipboardData:s.dataTransfer;if(t0(t)&&u){const p=Mle(t,u);if(p.length>0)return s.preventDefault(),kle(p).then(b=>{a&&t.selection.setRng(a),Ue(b,E=>{xle(t,E)})}),!0}return!1},kN=t=>{var s,a;return $s.os.isAndroid()&&((a=(s=t.clipboardData)===null||s===void 0?void 0:s.items)===null||a===void 0?void 0:a.length)===0},y$=t=>qn.metaKeyPressed(t)&&t.keyCode===86||t.shiftKey&&t.keyCode===45,aR=(t,s,a,u,p)=>{let b=fq(a);const E=qv(s,IN())||lq(a),I=!E&&dle(b),D=v$(b);(h$(b)||!b.length||I&&!D)&&(u=!0),(u||D)&&(qv(s,"text/plain")&&I?b=s["text/plain"]:b=dq(b)),!h$(b)&&(u?DN(t,b,p):xN(t,b,E,p))},Nle=(t,s,a)=>{let u;const p=()=>s.getLastRng()||t.selection.getRng();t.on("keydown",b=>{y$(b)&&!b.isDefaultPrevented()&&(u=b.shiftKey&&b.keyCode===86)}),t.on("paste",b=>{if(b.isDefaultPrevented()||kN(b))return;const E=a.get()==="text"||u;u=!1;const I=gq(b.clipboardData);!vq(I)&&b$(t,b,p())||(qv(I,"text/html")?(b.preventDefault(),aR(t,I,I["text/html"],E,!0)):qv(I,"text/plain")&&qv(I,"text/uri-list")?(b.preventDefault(),aR(t,I,I["text/plain"],E,!0)):(s.create(),kh.setEditorTimeout(t,()=>{const D=s.getHtml();s.remove(),aR(t,I,D,E,!1)},0)))})},Ple=t=>{const s=p=>$o(p,"webkit-fake-url"),a=p=>$o(p,"data:"),u=p=>{var b;return((b=p.data)===null||b===void 0?void 0:b.paste)===!0};t.parser.addNodeFilter("img",(p,b,E)=>{if(!t0(t)&&u(E))for(const I of p){const D=I.attr("src");K(D)&&!I.attr("data-mce-object")&&D!==$s.transparentSrc&&(s(D)||!D_(t)&&a(D))&&I.remove()}})},Nw=(t,s,a)=>{Nle(t,s,a),Ple(t)},Lle=(t,s)=>{s.get()==="text"?(s.set("html"),rD(t,!1)):(s.set("text"),rD(t,!0)),t.focus()},Pw=(t,s)=>{t.addCommand("mceTogglePlainTextPaste",()=>{Lle(t,s)}),t.addCommand("mceInsertClipboardContent",(a,u)=>{u.html&&xN(t,u.html,u.internal,!1),u.text&&DN(t,u.text,!1)})},cR=(t,s,a)=>{if(t)try{return t.clearData(),t.setData("text/html",s),t.setData("text/plain",a),t.setData(IN(),s),!0}catch{return!1}else return!1},Sq=(t,s,a,u)=>{cR(t.clipboardData,s.html,s.text)?(t.preventDefault(),u()):a(s.html,u)},Cq=t=>(s,a)=>{const{dom:u,selection:p}=t,b=u.create("div",{contenteditable:"false","data-mce-bogus":"all"}),E=u.create("div",{contenteditable:"true"},s);u.setStyles(b,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),b.appendChild(E),u.add(t.getBody(),b);const I=p.getRng();E.focus();const D=u.createRng();D.selectNodeContents(E),p.setRng(D),kh.setEditorTimeout(t,()=>{p.setRng(I),u.remove(b),a()},0)},kC=t=>({html:lle(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),Ble=t=>!!t.dom.getParent(t.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",t.getBody()),MN=t=>!t.selection.isCollapsed()||Ble(t),Vle=(t,s)=>a=>{!a.isDefaultPrevented()&&MN(t)&&t.selection.isEditable()&&Sq(a,kC(t),Cq(t),()=>{if($s.browser.isChromium()||$s.browser.isFirefox()){const u=t.selection.getRng();kh.setEditorTimeout(t,()=>{t.selection.setRng(u),rF(t,s)},0)}else rF(t,s)})},Eq=t=>s=>{!s.isDefaultPrevented()&&MN(t)&&Sq(s,kC(t),Cq(t),Ze)},_q=(t,s)=>{t.on("cut",Vle(t,s)),t.on("copy",Eq(t))},NN=(t,s)=>{var a,u;return Fg.getCaretRangeFromPoint((a=s.clientX)!==null&&a!==void 0?a:0,(u=s.clientY)!==null&&u!==void 0?u:0,t.getDoc())},wq=t=>{const s=t["text/plain"];return s?s.indexOf("file://")===0:!1},Aq=(t,s)=>{t.focus(),s&&t.selection.setRng(s)},Hle=t=>Kt(t.files,s=>/^image\//.test(s.type)),Tq=(t,s,a,u)=>{const p=t.getParent(a,E=>sn(s,E));if(!M(t.getParent(a,"summary")))return!0;if(p&&ho(u,"text/html")){const E=new DOMParser().parseFromString(u["text/html"],"text/html").body;return!M(E.querySelector(p.nodeName.toLowerCase()))}else return!1},Fle=t=>{t.on("input",s=>{const a=u=>M(u.querySelector("summary"));if(s.inputType==="deleteByDrag"){const u=Oe(t.dom.select("details"),a);Ue(u,p=>{Ri(p.firstChild)&&p.firstChild.remove();const b=t.dom.create("summary");b.appendChild(wy().dom),p.prepend(b)})}})},Oq=(t,s)=>{e0(t)&&t.on("dragend dragover draggesture dragdrop drop drag",a=>{a.preventDefault(),a.stopPropagation()}),t0(t)||t.on("drop",a=>{const u=a.dataTransfer;u&&Hle(u)&&a.preventDefault()}),t.on("drop",a=>{if(a.isDefaultPrevented())return;const u=NN(t,a);if(De(u))return;const p=gq(a.dataTransfer),b=qv(p,IN());if((!vq(p)||wq(p))&&b$(t,a,u))return;const E=p[IN()],I=E||p["text/html"]||p["text/plain"],D=Tq(t.dom,t.schema,u.startContainer,p),$=s.get();$&&!D||I&&(a.preventDefault(),kh.setEditorTimeout(t,()=>{t.undoManager.transact(()=>{(E||$&&D)&&t.execCommand("Delete"),Aq(t,u);const J=fq(I);p["text/html"]?xN(t,J,b,!0):DN(t,J,!0)})}))}),t.on("dragstart",a=>{s.set(!0)}),t.on("dragover dragend",a=>{t0(t)&&!s.get()&&(a.preventDefault(),Aq(t,NN(t,a))),a.type==="dragend"&&s.set(!1)}),Fle(t)},S$=t=>{const s=p=>b=>{p(t,b)},a=CD(t);me(a)&&t.on("PastePreProcess",s(a));const u=ED(t);me(u)&&t.on("PastePostProcess",s(u))},Iq=(t,s)=>{t.on("PastePreProcess",a=>{a.content=s(t,a.content,a.internal)})},$le=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,Rq=t=>yn.trim(t).replace($le,Vb).toLowerCase(),Ule=(t,s,a)=>{const u=R_(t);if(a||u==="all"||!wD(t))return s;const p=u?u.split(/[, ]/):[];if(p&&u!=="none"){const b=t.dom,E=t.selection.getNode();s=s.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(I,D,$,J)=>{const te=b.parseStyle(b.decode($)),re={};for(let Re=0;Re<p.length;Re++){const Ae=te[p[Re]];let _e=Ae,Qe=b.getStyle(E,p[Re],!0);/color/.test(p[Re])&&(_e=Rq(_e),Qe=Rq(Qe)),Qe!==_e&&(re[p[Re]]=Ae)}const fe=b.serializeStyle(re,"span");return fe?D+' style="'+fe+'"'+J:D+J})}else s=s.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return s=s.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(b,E,I,D)=>E+' style="'+I+'"'+D),s},xq=t=>{($s.browser.isChromium()||$s.browser.isSafari())&&Iq(t,Ule)},C$=(t,s)=>{const a=fo(!1),u=fo(x_(t)?"text":"html"),p=vle(t);xq(t),Pw(t,u),S$(t),t.addQueryStateHandler("mceTogglePlainTextPaste",()=>u.get()==="text"),t.on("PreInit",()=>{_q(t,s),Oq(t,a),Nw(t,p,u)})},jle=t=>{t.on("click",s=>{t.dom.getParent(s.target,"details")&&s.preventDefault()})},Dq=t=>{t.parser.addNodeFilter("details",s=>{const a=F4(t);Ue(s,u=>{a==="expanded"?u.attr("open","open"):a==="collapsed"&&u.attr("open",null)})}),t.serializer.addNodeFilter("details",s=>{const a=$4(t);Ue(s,u=>{a==="expanded"?u.attr("open","open"):a==="collapsed"&&u.attr("open",null)})})},kq=t=>{jle(t),Dq(t)},zle=Ri,E$=gn,Wle=t=>fi(t.dom),Gle=t=>lu(t.dom),lR=t=>s=>eo(Me.fromDom(t),s),qle=(t,s,a)=>Rr(Me.fromDom(t),u=>Gle(u)||a.isBlock(Xo(u)),lR(s)).getOr(Me.fromDom(s)).dom,Mq=(t,s)=>Rr(Me.fromDom(t),Wle,lR(s)),_$=(t,s,a)=>{const u=new Kr(t,s),p=a?u.next.bind(u):u.prev.bind(u);let b=t;for(let E=a?t:p();E&&!zle(E);E=p())hi(E)&&(b=E);return b},Nq=(t,s,a)=>{const p=Pt.fromRangeStart(t).getNode(),b=qle(p,s,a),E=_$(p,b,!1),I=_$(p,b,!0),D=document.createRange();return Mq(E,b).fold(()=>{E$(E)?D.setStart(E,0):D.setStartBefore(E)},$=>D.setStartBefore($.dom)),Mq(I,b).fold(()=>{E$(I)?D.setEnd(I,I.data.length):D.setEndAfter(I)},$=>D.setEndAfter($.dom)),D},Kle=t=>{const s=Nq(t.selection.getRng(),t.getBody(),t.schema);t.selection.setRng(Mk(s))},Zle=t=>{t.on("mousedown",s=>{s.detail>=3&&(s.preventDefault(),Kle(t))})};var Lw;(function(t){t.Before="before",t.After="after"})(Lw||(Lw={}));const Yle=(t,s)=>Math.abs(t.left-s),Jle=(t,s)=>Math.abs(t.right-s),Pq=(t,s)=>t>=s.top&&t<=s.bottom,Xle=(t,s)=>t.top<s.bottom&&t.bottom>s.top,Qle=(t,s)=>{const a=VT(t,s)/Math.min(t.height,s.height);return Xle(t,s)&&a>.5},eue=(t,s)=>{const a=Oe(t,u=>Pq(s,u));return BT(a).fold(()=>[[],t],u=>{const{pass:p,fail:b}=Ot(t,E=>Qle(E,u));return[p,b]})},tue=(t,s)=>({node:t.node,position:Yle(t,s)<Jle(t,s)?Lw.Before:Lw.After}),nue=(t,s,a)=>s>t.left&&s<t.right?0:Math.min(Math.abs(t.left-s),Math.abs(t.right-s)),w$=(t,s,a,u)=>{const p=te=>hi(te.node)?ce.some(te):vo(te.node)?w$(Nn(te.node.childNodes),s,a,!1):ce.none(),b=(te,re,fe)=>p(re).filter(Re=>Math.abs(fe(te,s,a)-fe(Re,s,a))<2&&gn(Re.node)),E=(te,re)=>{const fe=st(te,(Re,Ae)=>re(Re,s,a)-re(Ae,s,a));return $n(fe,p).map(Re=>u&&!gn(Re.node)&&fe.length>1?b(Re,fe[1],re).getOr(Re):Re)},[I,D]=eue(wC(t),a),{pass:$,fail:J}=Ot(D,te=>te.top<a);return E(I,nue).orThunk(()=>E(J,gS)).orThunk(()=>E($,gS))},oue=(t,s,a,u)=>{const p=(b,E)=>{const I=$=>vo($)&&$.classList.contains("mce-drag-container"),D=Oe(b.dom.childNodes,qt(I));return E.fold(()=>w$(D,a,u,!0),$=>{const J=Oe(D,te=>te!==$.dom);return w$(J,a,u,!0)}).orThunk(()=>(eo(b,t)?ce.none():Du(b)).bind(J=>p(J,ce.some(b))))};return p(s,ce.none())},sue=(t,s,a)=>{const u=Me.fromDom(t),p=$d(u),E=Me.fromPoint(p,s,a).filter(I=>ur(u,I)).getOr(u);return oue(u,E,s,a)},A$=(t,s,a)=>sue(t,s,a).filter(u=>US(u.node)).map(u=>tue(u,s)),T$=t=>{var s,a;const u=t.getBoundingClientRect(),p=t.ownerDocument,b=p.documentElement,E=p.defaultView;return{top:u.top+((s=E==null?void 0:E.scrollY)!==null&&s!==void 0?s:0)-b.clientTop,left:u.left+((a=E==null?void 0:E.scrollX)!==null&&a!==void 0?a:0)-b.clientLeft}},rue=t=>t.inline?T$(t.getBody()):{left:0,top:0},iue=t=>{const s=t.getBody();return t.inline?{left:s.scrollLeft,top:s.scrollTop}:{left:0,top:0}},aue=t=>{const s=t.getBody(),a=t.getDoc().documentElement,u={left:s.scrollLeft,top:s.scrollTop},p={left:s.scrollLeft||a.scrollLeft,top:s.scrollTop||a.scrollTop};return t.inline?u:p},uR=(t,s)=>{if(s.target.ownerDocument!==t.getDoc()){const a=T$(t.getContentAreaContainer()),u=aue(t);return{left:s.pageX-a.left+u.left,top:s.pageY-a.top+u.top}}return{left:s.pageX,top:s.pageY}},cue=(t,s,a)=>({pageX:a.left-t.left+s.left,pageY:a.top-t.top+s.top}),lue=(t,s)=>cue(rue(t),iue(t),uR(t,s)),O$=t=>({target:t,srcElement:t}),uue=(t,s,a,u)=>({...s,dataTransfer:u,type:t,...O$(a)}),due=(t,s,a)=>{const u=io("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:t,composedPath:u,initEvent:u,preventDefault:Ze,stopImmediatePropagation:Ze,stopPropagation:Ze,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:u,initMouseEvent:u,getModifierState:u,dataTransfer:a,...O$(s)}},fue=(t,s)=>{const a=vae(t);return s==="dragstart"?(R9(a),yF(a)):s==="drop"?(dae(a),iN(a)):(RC(a),k9(a)),a},pue=(t,s,a,u)=>{const p=fue(a,t);return Ne(u)?due(t,s,p):uue(t,u,s,p)},PN=32,LN=100,dR=8,fR=16,Lq=fi,hue=kv(Lq,lu),mue=(t,s,a)=>Lq(a)&&a!==s&&t.isEditable(a.parentElement),iye=(t,s,a)=>De(s)||s===a||t.dom.isChildOf(s,a)?!1:t.dom.isEditable(s),gue=(t,s,a,u)=>{const p=t.dom,b=s.cloneNode(!0);p.setStyles(b,{width:a,height:u}),p.setAttrib(b,"data-mce-selected",null);const E=p.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return p.setStyles(E,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:a,height:u}),p.setStyles(b,{margin:0,boxSizing:"border-box"}),E.appendChild(b),E},vue=(t,s)=>{t.parentNode!==s&&s.appendChild(t)},Bw=(t,s)=>a=>()=>{const u=t==="left"?a.scrollX:a.scrollY;a.scroll({[t]:u+s,behavior:"smooth"})},pR=Bw("left",-PN),Bq=Bw("left",PN),Vq=Bw("top",-PN),Hq=Bw("top",PN),Fq=(t,s,a,u,p,b,E,I,D,$,J,te)=>{let re=0,fe=0;t.style.left=s.pageX+"px",t.style.top=s.pageY+"px",s.pageX+a>p&&(re=s.pageX+a-p),s.pageY+u>b&&(fe=s.pageY+u-b),t.style.width=a-re+"px",t.style.height=u-fe+"px";const Re=D.clientHeight,Ae=D.clientWidth,_e=E+D.getBoundingClientRect().top,Qe=I+D.getBoundingClientRect().left;J.on(et=>{et.intervalId.clear(),et.dragging&&te&&(E+dR>=Re?et.intervalId.set(Hq($)):E-dR<=0?et.intervalId.set(Vq($)):I+dR>=Ae?et.intervalId.set(Bq($)):I-dR<=0?et.intervalId.set(pR($)):_e+fR>=window.innerHeight?et.intervalId.set(Hq(window)):_e-fR<=0?et.intervalId.set(Vq(window)):Qe+fR>=window.innerWidth?et.intervalId.set(Bq(window)):Qe-fR<=0&&et.intervalId.set(pR(window)))})},$q=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},I$=(t,s)=>{const a=t.getParent(s.parentNode,t.isBlock);$q(s),a&&a!==t.getRoot()&&t.isEmpty(a)&&_m(Me.fromDom(a))},Uq=t=>t.button===0,bue=(t,s)=>({pageX:s.pageX-t.relX,pageY:s.pageY+5}),yue=(t,s)=>a=>{if(Uq(a)){const u=gt(s.dom.getParents(a.target),hue).getOr(null);if(be(u)&&mue(s.dom,s.getBody(),u)){const p=s.dom.getPos(u),b=s.getBody(),E=s.getDoc().documentElement;t.set({element:u,dataTransfer:SF(),dragging:!1,screenX:a.screenX,screenY:a.screenY,maxX:(s.inline?b.scrollWidth:E.offsetWidth)-2,maxY:(s.inline?b.scrollHeight:E.offsetHeight)-2,relX:a.pageX-p.x,relY:a.pageY-p.y,width:u.offsetWidth,height:u.offsetHeight,ghost:gue(s,u,u.offsetWidth,u.offsetHeight),intervalId:rm(LN)})}}},jq=(t,s,a)=>{t._selectionOverrides.hideFakeCaret(),A$(t.getBody(),s,a).fold(()=>t.selection.placeCaretAt(s,a),u=>{const p=t._selectionOverrides.showCaret(1,u.node,u.position===Lw.Before,!1);p?t.selection.setRng(p):t.selection.placeCaretAt(s,a)})},hR=(t,s,a,u,p)=>{s==="dragstart"&&CF(u,t.dom.getOuterHTML(a));const b=pue(s,a,u,p);return t.dispatch(s,b)},aye=(t,s)=>{const a=Hn((p,b)=>jq(s,p,b),0);s.on("remove",a.cancel);const u=t;return p=>t.on(b=>{const E=Math.max(Math.abs(p.screenX-b.screenX),Math.abs(p.screenY-b.screenY));if(!b.dragging&&E>10){const I=hR(s,"dragstart",b.element,b.dataTransfer,p);if(be(I.dataTransfer)&&(b.dataTransfer=I.dataTransfer),I.isDefaultPrevented())return;b.dragging=!0,s.focus()}if(b.dragging){const I=p.currentTarget===s.getDoc().documentElement,D=bue(b,lue(s,p));vue(b.ghost,s.getBody()),Fq(b.ghost,D,b.width,b.height,b.maxX,b.maxY,p.clientY,p.clientX,s.getContentAreaContainer(),s.getWin(),u,I),a.throttle(p.clientX,p.clientY)}})},Sue=t=>{const s=t.getSel();if(be(s)){const u=s.getRangeAt(0).startContainer;return gn(u)?u.parentNode:u}else return null},Cue=(t,s)=>a=>{t.on(u=>{var p;if(u.intervalId.clear(),u.dragging){if(iye(s,Sue(s.selection),u.element)){const b=(p=s.getDoc().elementFromPoint(a.clientX,a.clientY))!==null&&p!==void 0?p:s.getBody();hR(s,"drop",b,u.dataTransfer,a).isDefaultPrevented()||s.undoManager.transact(()=>{I$(s.dom,u.element),bae(u.dataTransfer).each(I=>s.insertContent(I)),s._selectionOverrides.hideFakeCaret()})}hR(s,"dragend",s.getBody(),u.dataTransfer,a)}}),BN(t)},zq=(t,s,a)=>{t.on(u=>{u.intervalId.clear(),u.dragging&&a.fold(()=>hR(s,"dragend",u.element,u.dataTransfer),p=>hR(s,"dragend",u.element,u.dataTransfer,p))}),BN(t)},Wq=(t,s)=>a=>zq(t,s,ce.some(a)),BN=t=>{t.on(s=>{s.intervalId.clear(),$q(s.ghost)}),t.clear()},VN=t=>{const s=yc(),a=Ir.DOM,u=document,p=yue(s,t),b=aye(s,t),E=Cue(s,t),I=Wq(s,t);t.on("mousedown",p),t.on("mousemove",b),t.on("mouseup",E),a.bind(u,"mousemove",b),a.bind(u,"mouseup",I),t.on("remove",()=>{a.unbind(u,"mousemove",b),a.unbind(u,"mouseup",I)}),t.on("keydown",D=>{D.keyCode===qn.ESC&&zq(s,t,ce.none())})},Gq=t=>{const s=p=>{if(!p.isDefaultPrevented()){const b=p.dataTransfer;b&&(bt(b.types,"Files")||b.files.length>0)&&(p.preventDefault(),p.type==="drop"&&t1(t,"Dropped file type is not supported"))}},a=p=>{b3(t,p.target)&&s(p)},u=()=>{const p=Ir.DOM,b=t.dom,E=document,I=t.inline?t.getBody():t.getDoc(),D=["drop","dragover"];Ue(D,$=>{p.bind(E,$,a),b.bind(I,$,s)}),t.on("remove",()=>{Ue(D,$=>{p.unbind(E,$,a),b.unbind(I,$,s)})})};t.on("init",()=>{kh.setEditorTimeout(t,u,0)})},Eue=t=>{VN(t),LS(t)&&Gq(t)},_ue=t=>{const s=Hn(()=>{if(!t.removed&&t.getBody().contains(document.activeElement)){const a=t.selection.getRng();if(a.collapsed){const u=_H(t,a,!1);t.selection.setRng(u)}}},0);t.on("focus",()=>{s.throttle()}),t.on("blur",()=>{s.cancel()})},wue=t=>{t.on("init",()=>{t.on("focusin",s=>{const a=s.target;if(Ep(a)){const u=oC(t.getBody(),a),p=fi(u)?u:a;t.selection.getNode()!==p&&kI(t,p).each(b=>t.selection.setRng(b))}})})},mR=fi,R$=(t,s)=>oC(t.getBody(),s),Aue=t=>{const s=t.selection,a=t.dom,u=t.getBody(),p=gO(t,u,a.isBlock,()=>QS(t)),b="sel-"+a.uniqueId(),E="data-mce-selected";let I;const D=bn=>be(bn)&&a.hasClass(bn,"mce-offscreen-selection"),$=bn=>bn!==u&&(mR(bn)||Ep(bn))&&a.isChildOf(bn,u)&&a.isEditable(bn.parentNode),J=bn=>{bn&&s.setRng(bn)},te=(bn,Wt,ct,ke=!0)=>t.dispatch("ShowCaret",{target:Wt,direction:bn,before:ct}).isDefaultPrevented()?null:(ke&&s.scrollIntoView(Wt,bn===-1),p.show(ct,Wt)),re=bn=>{bn.hasAttribute("data-mce-caret")&&(Xd(bn),s.scrollIntoView(bn))},fe=()=>{t.on("click",Wt=>{a.isEditable(Wt.target)||(Wt.preventDefault(),t.focus())}),t.on("blur NewBlock",_t),t.on("ResizeWindow FullscreenStateChanged",p.reposition),t.on("tap",Wt=>{const ct=Wt.target,ke=R$(t,ct);mR(ke)?(Wt.preventDefault(),kI(t,ke).each(ut)):$(ct)&&kI(t,ct).each(ut)},!0),t.on("mousedown",Wt=>{const ct=Wt.target;if(ct!==u&&ct.nodeName!=="HTML"&&!a.isChildOf(ct,u)||!PV(t,Wt.clientX,Wt.clientY))return;_t(),Mn();const ke=R$(t,ct);mR(ke)?(Wt.preventDefault(),kI(t,ke).each(ut)):A$(u,Wt.clientX,Wt.clientY).each(wt=>{Wt.preventDefault();const vn=te(1,wt.node,wt.position===Lw.Before,!1);J(vn),di(ke)?ke.focus():t.getBody().focus()})}),t.on("keypress",Wt=>{qn.modifierPressed(Wt)||mR(s.getNode())&&Wt.preventDefault()}),t.on("GetSelectionRange",Wt=>{let ct=Wt.range;if(I){if(!I.parentNode){I=null;return}ct=ct.cloneRange(),ct.selectNode(I),Wt.range=ct}}),t.on("focusin",Wt=>{if(!Ep(Wt.target)&&t.getBody().contains(Wt.target)&&Wt.target!==t.getBody()&&!t.dom.isEditable(Wt.target.parentNode)){p.isShowing()&&p.hide(),Wt.target.contains(t.selection.getNode())||(t.selection.select(Wt.target,!0),t.selection.collapse(!0));const ct=ut(t.selection.getRng(),!0);ct&&t.selection.setRng(ct)}}),t.on("SetSelectionRange",Wt=>{Wt.range=_e(Wt.range);const ct=ut(Wt.range,Wt.forward);ct&&(Wt.range=ct)});const bn=Wt=>vo(Wt)&&Wt.id==="mcepastebin";t.on("AfterSetSelectionRange",Wt=>{const ct=Wt.range,ke=ct.startContainer.parentElement;!Ae(ct)&&!bn(ke)&&Mn(),D(ke)||_t()}),Eue(t),_ue(t),wue(t)},Re=bn=>Ml(bn)||wm(bn)||Rv(bn),Ae=bn=>Re(bn.startContainer)||Re(bn.endContainer),_e=bn=>{const Wt=t.schema.getVoidElements(),ct=a.createRng(),ke=bn.startContainer,wt=bn.startOffset,vn=bn.endContainer,Ao=bn.endOffset;return ho(Wt,ke.nodeName.toLowerCase())?wt===0?ct.setStartBefore(ke):ct.setStartAfter(ke):ct.setStart(ke,wt),ho(Wt,vn.nodeName.toLowerCase())?Ao===0?ct.setEndBefore(vn):ct.setEndAfter(vn):ct.setEnd(vn,Ao),ct},Qe=(bn,Wt)=>{const ct=Me.fromDom(t.getBody()),ke=t.getDoc(),wt=Sp(ct,"#"+b).getOrThunk(()=>{const ss=Me.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',ke);return _i(ss,"id",b),Qs(ct,ss),ss}),vn=a.createRng();zd(wt),rd(wt,[Me.fromText(ci,ke),Me.fromDom(Wt),Me.fromText(ci,ke)]),vn.setStart(wt.dom.firstChild,1),vn.setEnd(wt.dom.lastChild,0),iu(wt,{top:a.getPos(bn,t.getBody()).y+"px"}),yb(wt);const Ao=s.getSel();return Ao&&(Ao.removeAllRanges(),Ao.addRange(vn)),vn},et=bn=>{const Wt=bn.cloneNode(!0),ct=t.dispatch("ObjectSelected",{target:bn,targetClone:Wt});if(ct.isDefaultPrevented())return null;const ke=Qe(bn,ct.targetClone),wt=Me.fromDom(bn);return Ue(Ht(Me.fromDom(t.getBody()),`*[${E}]`),vn=>{eo(wt,vn)||da(vn,E)}),a.getAttrib(bn,E)||bn.setAttribute(E,"1"),I=bn,Mn(),ke},ut=(bn,Wt)=>{if(!bn)return null;if(bn.collapsed){if(!Ae(bn)){const vn=Wt?1:-1,Ao=Pg(vn,u,bn),ss=Ao.getNode(!Wt);if(be(ss)){if(US(ss))return te(vn,ss,Wt?!Ao.isAtEnd():!1,!1);if(fr(ss)&&fi(ss.nextSibling)){const Gs=a.createRng();return Gs.setStart(ss,0),Gs.setEnd(ss,0),Gs}}const ks=Ao.getNode(Wt);if(be(ks)){if(US(ks))return te(vn,ks,Wt?!1:!Ao.isAtEnd(),!1);if(fr(ks)&&fi(ks.previousSibling)){const Gs=a.createRng();return Gs.setStart(ks,1),Gs.setEnd(ks,1),Gs}}}return null}let ct=bn.startContainer,ke=bn.startOffset;const wt=bn.endOffset;if(gn(ct)&&ke===0&&mR(ct.parentNode)&&(ct=ct.parentNode,ke=a.nodeIndex(ct),ct=ct.parentNode),!vo(ct))return null;if(wt===ke+1&&ct===bn.endContainer){const vn=ct.childNodes[ke];if($(vn))return et(vn)}return null},_t=()=>{I&&I.removeAttribute(E),Sp(Me.fromDom(t.getBody()),"#"+b).each(Vr),I=null},Qt=()=>{p.destroy(),I=null},Mn=()=>{p.hide()};return Lp(t)||fe(),{showCaret:te,showBlockCaretContainer:re,hideFakeCaret:Mn,destroy:Qt}},qq=(t,s)=>{let a=s;for(let u=t.previousSibling;gn(u);u=u.previousSibling)a+=u.data.length;return a},Kq=(t,s,a,u,p)=>{if(gn(a)&&(u<0||u>a.data.length))return[];const b=p&&gn(a)?[qq(a,u)]:[u];let E=a;for(;E!==s&&E.parentNode;)b.push(t.nodeIndex(E,p)),E=E.parentNode;return E===s?b.reverse():[]},x$=(t,s,a,u,p,b,E=!1)=>{const I=Kq(t,s,a,u,E),D=Kq(t,s,p,b,E);return{start:I,end:D}},HN=(t,s)=>{const a=s.slice(),u=a.pop();return Ye(u)?tn(a,(b,E)=>b.bind(I=>ce.from(I.childNodes[E])),ce.some(t)).bind(b=>gn(b)&&(u<0||u>b.data.length)?ce.none():ce.some({node:b,offset:u})):ce.none()},D$=(t,s)=>HN(t,s.start).bind(({node:a,offset:u})=>HN(t,s.end).map(({node:p,offset:b})=>{const E=document.createRange();return E.setStart(a,u),E.setEnd(p,b),E})),cye=(t,s,a,u=!1)=>x$(t,s,a.startContainer,a.startOffset,a.endContainer,a.endOffset,u),Vw=(t,s,a)=>{if(s&&t.isEmpty(s)&&!a(s)){const u=s.parentNode;t.remove(s,gn(s.firstChild)&&yg(s.firstChild.data)),Vw(t,u,a)}},gR=(t,s,a,u=!0)=>{const p=s.startContainer.parentNode,b=s.endContainer.parentNode;s.deleteContents(),u&&!a(s.startContainer)&&(gn(s.startContainer)&&s.startContainer.data.length===0&&t.remove(s.startContainer),gn(s.endContainer)&&s.endContainer.data.length===0&&t.remove(s.endContainer),Vw(t,p,a),p!==b&&Vw(t,b,a))},FN=(t,s)=>ce.from(t.dom.getParent(s.startContainer,t.dom.isBlock)),vR=(t,s,a)=>{const u=t.dynamicPatternsLookup({text:a,block:s});return{...t,blockPatterns:xg(u).concat(t.blockPatterns),inlinePatterns:Kb(u).concat(t.inlinePatterns)}},k$=(t,s,a,u)=>{const p=t.createRng();return p.setStart(s,0),p.setEnd(a,u),p.toString()},Zq=(t,s)=>t.create("span",{"data-mce-type":"bookmark",id:s}),$N=(t,s)=>{const a=t.createRng();return a.setStartAfter(s.start),a.setEndBefore(s.end),a},M$=(t,s,a)=>{const u=D$(t.getRoot(),a).getOrDie("Unable to resolve path range"),p=u.startContainer,b=u.endContainer,E=u.endOffset===0?b:b.splitText(u.endOffset),I=u.startOffset===0?p:p.splitText(u.startOffset),D=I.parentNode,$=E.parentNode;return{prefix:s,end:$.insertBefore(Zq(t,s+"-end"),E),start:D.insertBefore(Zq(t,s+"-start"),I)}},bR=(t,s,a)=>{Vw(t,t.get(s.prefix+"-end"),a),Vw(t,t.get(s.prefix+"-start"),a)},UN=t=>t.start.length===0,Yq=t=>(s,a)=>{const p=s.data.substring(0,a),b=p.lastIndexOf(t.charAt(t.length-1)),E=p.lastIndexOf(t);return E!==-1?E+t.length:b!==-1?b+1:-1},Jq=(t,s,a,u)=>{const p=s.start;return YI(t,u.container,u.offset,Yq(p),a).bind(E=>{var I,D;const $=(D=(I=a.textContent)===null||I===void 0?void 0:I.indexOf(p))!==null&&D!==void 0?D:-1;if($!==-1&&E.offset>=$+p.length){const te=t.createRng();return te.setStart(E.container,E.offset-p.length),te.setEnd(E.container,E.offset),ce.some(te)}else{const te=E.offset-p.length;return O0(E.container,te,a).map(re=>{const fe=t.createRng();return fe.setStart(re.container,re.offset),fe.setEnd(E.container,E.offset),fe}).filter(re=>re.toString()===p).orThunk(()=>Jq(t,s,a,Vh(E.container,0)))}})},Tue=(t,s,a,u,p,b=!1)=>{if(s.start.length===0&&!b){const E=t.createRng();return E.setStart(a,u),E.setEnd(a,u),ce.some(E)}return dN(a,u,p).bind(E=>Jq(t,s,p,E).bind(D=>{var $;if(b){if(D.endContainer===E.container&&D.endOffset===E.offset)return ce.none();if(E.offset===0&&(($=D.endContainer.textContent)===null||$===void 0?void 0:$.length)===D.endOffset)return ce.none()}return ce.some(D)}))},Xq=(t,s,a,u)=>{const p=t.dom,b=p.getRoot(),E=a.pattern,I=a.position.container,D=a.position.offset;return O0(I,D-a.pattern.end.length,s).bind($=>{const J=x$(p,b,$.container,$.offset,I,D,u);if(UN(E))return ce.some({matches:[{pattern:E,startRng:J,endRng:J}],position:$});{const te=jN(t,a.remainingPatterns,$.container,$.offset,s,u),re=te.getOr({matches:[],position:$}),fe=re.position;return Tue(p,E,fe.container,fe.offset,s,te.isNone()).map(Ae=>{const _e=cye(p,b,Ae,u);return{matches:re.matches.concat([{pattern:E,startRng:_e,endRng:J}]),position:Vh(Ae.startContainer,Ae.startOffset)}})}})},jN=(t,s,a,u,p,b)=>{const E=t.dom;return dN(a,u,E.getRoot()).bind(I=>{const D=k$(E,p,a,u);for(let $=0;$<s.length;$++){const J=s[$];if(!ai(D,J.end))continue;const te=s.slice();te.splice($,1);const re=Xq(t,p,{pattern:J,remainingPatterns:te,position:I},b);if(re.isNone()&&u>0)return jN(t,s,a,u-1,p,b);if(re.isSome())return re}return ce.none()})},Qq=(t,s,a)=>{t.selection.setRng(a),s.type==="inline-format"?Ue(s.format,u=>{t.formatter.apply(u)}):t.execCommand(s.cmd,!1,s.value)},Oue=(t,s,a,u)=>{const p=$N(t.dom,a);gR(t.dom,p,u),Qq(t,s,p)},N$=(t,s,a,u,p)=>{const b=t.dom,E=$N(b,u),I=$N(b,a);gR(b,I,p),gR(b,E,p);const D={prefix:a.prefix,start:a.end,end:u.start},$=$N(b,D);Qq(t,s,$)},Iue=(t,s)=>{const a=Xi("mce_textpattern"),u=Bt(s,(p,b)=>{const E=M$(t,a+`_end${p.length}`,b.endRng);return p.concat([{...b,endMarker:E}])},[]);return Bt(u,(p,b)=>{const E=u.length-p.length-1,I=UN(b.pattern)?b.endMarker:M$(t,a+`_start${E}`,b.startRng);return p.concat([{...b,startMarker:I}])},[])},Rue=t=>st(t,(s,a)=>a.end.length-s.end.length),xue=(t,s)=>{const a=ys(t,u=>Kt(s,p=>u.pattern.start===p.pattern.start&&u.pattern.end===p.pattern.end));return t.length===s.length?a?t:s:t.length>s.length?t:s},eK=(t,s,a,u,p,b)=>{const E=jN(t,p.inlinePatterns,a,u,s,b).fold(()=>[],D=>D.matches),I=jN(t,Rue(p.inlinePatterns),a,u,s,b).fold(()=>[],D=>D.matches);return xue(E,I)},tK=(t,s)=>{if(s.length===0)return;const a=t.dom,u=t.selection.getBookmark(),p=Iue(a,s);Ue(p,b=>{const E=a.getParent(b.startMarker.start,a.isBlock),I=D=>D===E;UN(b.pattern)?Oue(t,b.pattern,b.endMarker,I):N$(t,b.pattern,b.startMarker,b.endMarker,I),bR(a,b.endMarker,I),bR(a,b.startMarker,I)}),t.selection.moveToBookmark(u)},nK=(t,s,a)=>Hh(s,0,s).map(u=>{const p=u.container;return xF(p,a.start.length,s).each(b=>{const E=t.createRng();E.setStart(p,0),E.setEnd(b.container,b.offset),gR(t,E,I=>I===s)}),p}),zN=t=>(s,a)=>{const u=s.dom,p=a.pattern,b=D$(u.getRoot(),a.range).getOrDie("Unable to resolve path range"),E=(I,D)=>{const $=D.get(I);return le($)&&It($).exists(J=>ho(J,"block"))};return FN(s,b).each(I=>{p.type==="block-format"?E(p.format,s.formatter)&&s.undoManager.transact(()=>{t(s.dom,I,p),s.formatter.apply(p.format)}):p.type==="block-command"&&s.undoManager.transact(()=>{t(s.dom,I,p),s.execCommand(p.cmd,!1,p.value)})}),!0},Due=t=>st(t,(s,a)=>a.start.length-s.start.length),oK=t=>(s,a)=>{const u=Due(s),p=a.replace(ci," ");return gt(u,b=>t(b,a,p))},sK=(t,s)=>(a,u,p,b,E)=>{var I;E===void 0&&(E=(I=u.textContent)!==null&&I!==void 0?I:"");const D=a.dom,$=Qc(a);return D.is(u,$)?t(p.blockPatterns,E).map(J=>s&&yn.trim(E).length===J.start.length?[]:[{pattern:J,range:x$(D,D.getRoot(),u,0,u,0,b)}]).getOr([]):[]},rK=t=>/^\s[^\s]/.test(t),kue=zN((t,s,a)=>{nK(t,s,a).each(u=>{const p=Me.fromDom(u),b=qc(p);rK(b)&&X1(p,b.slice(1))})}),Mue=oK((t,s,a)=>s.indexOf(t.start)===0||a.indexOf(t.start)===0),Nue=sK(Mue,!0),Pue=(t,s)=>{const a=t.selection.getRng();return FN(t,a).map(u=>{var p;const b=Math.max(0,a.startOffset),E=vR(s,u,(p=u.textContent)!==null&&p!==void 0?p:""),I=eK(t,u,a.startContainer,b,E,!0),D=Nue(t,u,E,!0);return{inlineMatches:I,blockMatches:D}}).filter(({inlineMatches:u,blockMatches:p})=>p.length>0||u.length>0)},Lue=(t,s)=>{if(s.length===0)return;const a=t.selection.getBookmark();Ue(s,u=>kue(t,u)),t.selection.moveToBookmark(a)},Bue=zN(nK),Vue=oK((t,s,a)=>s===t.start||a===t.start),iK=sK(Vue,!1),Hue=(t,s)=>{const a=t.selection.getRng();return FN(t,a).map(u=>{const p=Math.max(0,a.startOffset),b=k$(t.dom,u,a.startContainer,p),E=vR(s,u,b);return iK(t,u,E,!1,b)}).filter(u=>u.length>0)},P$=(t,s)=>{Ue(s,a=>Bue(t,a))},Fue=(t,s)=>Pue(t,s).fold(Et,({inlineMatches:a,blockMatches:u})=>(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{Px(t),tK(t,a),Lue(t,u);const p=t.selection.getRng(),b=dN(p.startContainer,p.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),b.each(E=>{const I=E.container;I.data.charAt(E.offset-1)===Sc&&(I.deleteData(E.offset-1,1),Vw(t.dom,I.parentNode,D=>D===t.dom.getRoot()))})}),!0)),$ue=(t,s)=>{const a=t.selection.getRng();FN(t,a).map(u=>{const p=Math.max(0,a.startOffset-1),b=k$(t.dom,u,a.startContainer,p),E=vR(s,u,b),I=eK(t,u,a.startContainer,p,E,!1);I.length>0&&t.undoManager.transact(()=>{tK(t,I)})})},Uue=(t,s)=>Hue(t,s).fold(Et,a=>(t.undoManager.transact(()=>{P$(t,a)}),!0)),aK=(t,s,a)=>{for(let u=0;u<t.length;u++)if(a(t[u],s))return!0;return!1},jue=(t,s)=>aK(t,s,(a,u)=>a===u.keyCode&&!qn.modifierPressed(u)),zue=(t,s)=>aK(t,s,(a,u)=>a.charCodeAt(0)===u.charCode),WN=t=>{const s=[",",".",";",":","!","?"],a=[32],u=()=>Zb(dO(t).filter(E=>E.type==="inline-command"||E.type==="block-command"?t.queryCommandSupported(E.cmd):!0),P4(t)),p=()=>B4(t);t.on("keydown",E=>{if(E.keyCode===13&&!qn.modifierPressed(E)&&t.selection.isCollapsed()&&t.selection.isEditable()){const I=YT(u(),"enter");(I.inlinePatterns.length>0||I.blockPatterns.length>0||p())&&Fue(t,I)&&E.preventDefault()}},!0),t.on("keydown",E=>{if(E.keyCode===32&&t.selection.isCollapsed()&&t.selection.isEditable()){const I=YT(u(),"space");(I.blockPatterns.length>0||p())&&Uue(t,I)&&E.preventDefault()}},!0);const b=()=>{if(t.selection.isCollapsed()&&t.selection.isEditable()){const E=YT(u(),"space");(E.inlinePatterns.length>0||p())&&$ue(t,E)}};t.on("keyup",E=>{jue(a,E)&&b()}),t.on("keypress",E=>{zue(s,E)&&kh.setEditorTimeout(t,b)})},Wue=t=>{WN(t)},Gue=t=>{const s=yn.each,a=qn.BACKSPACE,u=qn.DELETE,p=t.dom,b=t.selection,E=t.parser,I=$s.browser,D=I.isFirefox(),$=I.isChromium()||I.isSafari(),J=$s.deviceType.isiPhone()||$s.deviceType.isiPad(),te=$s.os.isMacOS()||$s.os.isiOS(),re=(Dn,Xn)=>{try{t.getDoc().execCommand(Dn,!1,String(Xn))}catch{}},fe=Dn=>Dn.isDefaultPrevented(),Re=()=>{const Dn=Go=>{const rs=p.create("body"),Nr=Go.cloneContents();return rs.appendChild(Nr),b.serializer.serialize(rs,{format:"html"})},Xn=Go=>{const rs=Dn(Go),Nr=p.createRng();Nr.selectNode(t.getBody());const ni=Dn(Nr);return rs===ni};t.on("keydown",Go=>{const rs=Go.keyCode;if(!fe(Go)&&(rs===u||rs===a)&&t.selection.isEditable()){const Nr=t.selection.isCollapsed(),ni=t.getBody();if(Nr&&!Tf(t.schema,ni)||!Nr&&!Xn(t.selection.getRng()))return;Go.preventDefault(),t.setContent(""),ni.firstChild&&p.isBlock(ni.firstChild)?t.selection.setCursorLocation(ni.firstChild,0):t.selection.setCursorLocation(ni,0),t.nodeChanged()}})},Ae=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},_e=()=>{t.inline||p.bind(t.getDoc(),"mousedown mouseup",Dn=>{var Xn;let Go;if(Dn.target===t.getDoc().documentElement)if(Go=b.getRng(),((Xn=t.getDoc().getSelection())===null||Xn===void 0?void 0:Xn.anchorNode)!==null&&t.getBody().focus(),Dn.type==="mousedown"){if(Ml(Go.startContainer))return;b.placeCaretAt(Dn.clientX,Dn.clientY)}else b.setRng(Go)})},Qe=()=>{t.on("keydown",Dn=>{if(!fe(Dn)&&Dn.keyCode===a){if(!t.getBody().getElementsByTagName("hr").length)return;if(b.isCollapsed()&&b.getRng().startOffset===0){const Xn=b.getNode(),Go=Xn.previousSibling;if(Xn.nodeName==="HR"){p.remove(Xn),Dn.preventDefault();return}Go&&Go.nodeName&&Go.nodeName.toLowerCase()==="hr"&&(p.remove(Go),Dn.preventDefault())}}})},et=()=>{Range.prototype.getClientRects||t.on("mousedown",Dn=>{if(!fe(Dn)&&Dn.target.nodeName==="HTML"){const Xn=t.getBody();Xn.blur(),kh.setEditorTimeout(t,()=>{Xn.focus()})}})},ut=()=>{const Dn=lO(t);t.on("click",Xn=>{const Go=Xn.target;/^(IMG|HR)$/.test(Go.nodeName)&&p.isEditable(Go)&&(Xn.preventDefault(),t.selection.select(Go),t.nodeChanged()),Go.nodeName==="A"&&p.hasClass(Go,Dn)&&Go.childNodes.length===0&&p.isEditable(Go.parentNode)&&(Xn.preventDefault(),b.select(Go))})},_t=()=>{const Dn=Xn=>Xn.nodeName==="IMG"&&t.dom.isEditable(Xn);t.on("mousedown",Xn=>{Vi(ce.from(Xn.clientX),ce.from(Xn.clientY),(Go,rs)=>{var Nr;const ni=t.getDoc().caretPositionFromPoint(Go,rs),jh=((Nr=ni==null?void 0:ni.offsetNode)===null||Nr===void 0?void 0:Nr.childNodes[ni.offset-(ni.offset>0?1:0)])||(ni==null?void 0:ni.offsetNode);if(be(jh)&&Dn(jh)){const ql=jh.getBoundingClientRect();Xn.preventDefault(),t.hasFocus()||t.focus(),t.selection.select(jh),Xn.clientX<ql.left||Xn.clientY<ql.top?t.selection.collapse(!0):(Xn.clientX>ql.right||Xn.clientY>ql.bottom)&&t.selection.collapse(!1)}})})},Qt=()=>{const Dn=()=>{const Go=p.getAttribs(b.getStart().cloneNode(!1));return()=>{const rs=b.getStart();rs!==t.getBody()&&(p.setAttrib(rs,"style",null),s(Go,Nr=>{rs.setAttributeNode(Nr.cloneNode(!0))}))}},Xn=()=>!b.isCollapsed()&&p.getParent(b.getStart(),p.isBlock)!==p.getParent(b.getEnd(),p.isBlock);t.on("keypress",Go=>{let rs;return!fe(Go)&&(Go.keyCode===8||Go.keyCode===46)&&Xn()?(rs=Dn(),t.getDoc().execCommand("delete",!1),rs(),Go.preventDefault(),!1):!0}),p.bind(t.getDoc(),"cut",Go=>{if(!fe(Go)&&Xn()){const rs=Dn();kh.setEditorTimeout(t,()=>{rs()})}})},Mn=()=>{t.on("keydown",Dn=>{if(!fe(Dn)&&Dn.keyCode===a&&b.isCollapsed()&&b.getRng().startOffset===0){const Xn=b.getNode().previousSibling;if(Xn&&Xn.nodeName&&Xn.nodeName.toLowerCase()==="table")return Dn.preventDefault(),!1}return!0})},bn=()=>{t.on("keydown",Dn=>{if(fe(Dn)||Dn.keyCode!==qn.BACKSPACE)return;let Xn=b.getRng();const Go=Xn.startContainer,rs=Xn.startOffset,Nr=p.getRoot();let ni=Go;if(!(!Xn.collapsed||rs!==0)){for(;ni.parentNode&&ni.parentNode.firstChild===ni&&ni.parentNode!==Nr;)ni=ni.parentNode;ni.nodeName==="BLOCKQUOTE"&&(t.formatter.toggle("blockquote",void 0,ni),Xn=p.createRng(),Xn.setStart(Go,0),Xn.setEnd(Go,0),b.setRng(Xn))}})},Wt=()=>{const Dn=ua("figcaption");t.on("keydown",Xn=>{if(Xn.keyCode===qn.LEFT||Xn.keyCode===qn.RIGHT){const Go=Me.fromDom(t.selection.getNode());Dn(Go)&&t.selection.isCollapsed()&&Rl(Go).bind(rs=>{var Nr;return t.selection.getRng().startOffset===0&&Xn.keyCode===qn.LEFT?nd(rs):t.selection.getRng().endOffset===((Nr=Go.dom.textContent)===null||Nr===void 0?void 0:Nr.length)&&Xn.keyCode===qn.RIGHT?xl(rs):ce.none()}).each(rs=>{t.selection.setCursorLocation(rs.dom,0)})}})},ct=()=>{const Dn=()=>{re("StyleWithCSS",!1),re("enableInlineTableEditing",!1),iO(t)||re("enableObjectResizing",!1)};MS(t)||t.on("BeforeExecCommand mousedown",Dn)},ke=()=>{const Dn=()=>{s(p.select("a:not([data-mce-block])"),Xn=>{var Go;let rs=Xn.parentNode;const Nr=p.getRoot();if((rs==null?void 0:rs.lastChild)===Xn){for(;rs&&!p.isBlock(rs);){if(((Go=rs.parentNode)===null||Go===void 0?void 0:Go.lastChild)!==rs||rs===Nr)return;rs=rs.parentNode}p.add(rs,"br",{"data-mce-bogus":1})}})};t.on("SetContent ExecCommand",Xn=>{(Xn.type==="setcontent"||Xn.command==="mceInsertLink")&&Dn()})},wt=()=>{t.on("init",()=>{re("DefaultParagraphSeparator",Qc(t))})},vn=Dn=>{const Xn=Dn.getBody(),Go=Dn.selection.getRng();return Go.startContainer===Go.endContainer&&Go.startContainer===Xn&&Go.startOffset===0&&Go.endOffset===Xn.childNodes.length},Ao=()=>{t.on("keyup focusin mouseup",Dn=>{!qn.modifierPressed(Dn)&&!vn(t)&&b.normalize()},!0)},ss=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},ks=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},Gs=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",Dn=>{let Xn;Dn.target.nodeName==="HTML"&&(Xn=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(Xn),t.selection.normalize(),t.nodeChanged())}))},Pi=()=>{te&&t.on("keydown",Dn=>{qn.metaKeyPressed(Dn)&&!Dn.shiftKey&&(Dn.keyCode===37||Dn.keyCode===39)&&(Dn.preventDefault(),t.selection.getSel().modify("move",Dn.keyCode===37?"backward":"forward","lineboundary"))})},Li=()=>{t.on("click",Dn=>{let Xn=Dn.target;do if(Xn.tagName==="A"){Dn.preventDefault();return}while(Xn=Xn.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},gl=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",Dn=>{Dn.preventDefault()})})},In=()=>{E.addNodeFilter("br",Dn=>{let Xn=Dn.length;for(;Xn--;)Dn[Xn].attr("class")==="Apple-interchange-newline"&&Dn[Xn].remove()})},Io=Ze,or=()=>{if(!D||t.removed)return!1;const Dn=t.selection.getSel();return!Dn||!Dn.rangeCount||Dn.rangeCount===0},Er=()=>{$&&(_e(),ut(),gl(),Ae(),J&&(ks(),Gs(),Li())),D&&(et(),ct(),ss(),Pi())},Eo=()=>{bn(),Re(),$s.windowsPhone||Ao(),$&&(_e(),ut(),wt(),gl(),Mn(),In(),J?(ks(),Gs(),Li()):Ae()),D&&(Wt(),_t(),Qe(),et(),Qt(),ct(),ke(),ss(),Pi(),Mn())};return Lp(t)?Er():Eo(),{refreshContentEditable:Io,isHidden:or}},L$=Ir.DOM,que=(t,s)=>{const a=Me.fromDom(t.getBody()),u=j1(Wa(a)),p=Me.fromTag("style");_i(p,"type","text/css"),Qs(p,Me.fromText(s)),Qs(u,p),t.on("remove",()=>{Vr(p)})},Kue=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,B$=t=>Yi(t,s=>Ne(s)===!1),cK=t=>{const s=t.options.get,a=t.editorUpload.blobCache;return B$({allow_conditional_comments:s("allow_conditional_comments"),allow_html_data_urls:s("allow_html_data_urls"),allow_svg_data_urls:s("allow_svg_data_urls"),allow_html_in_named_anchor:s("allow_html_in_named_anchor"),allow_script_urls:s("allow_script_urls"),allow_html_in_comments:s("allow_html_in_comments"),allow_mathml_annotation_encodings:s("allow_mathml_annotation_encodings"),allow_unsafe_link_target:s("allow_unsafe_link_target"),convert_unsafe_embeds:s("convert_unsafe_embeds"),convert_fonts_to_spans:s("convert_fonts_to_spans"),extended_mathml_attributes:s("extended_mathml_attributes"),extended_mathml_elements:s("extended_mathml_elements"),fix_list_elements:s("fix_list_elements"),font_size_legacy_values:s("font_size_legacy_values"),forced_root_block:s("forced_root_block"),forced_root_block_attrs:s("forced_root_block_attrs"),preserve_cdata:s("preserve_cdata"),inline_styles:s("inline_styles"),root_name:Kue(t),sandbox_iframes:s("sandbox_iframes"),sandbox_iframes_exclusions:HS(t),sanitize:s("xss_sanitization"),validate:!0,blob_cache:a,document:t.getDoc()})},lK=t=>{const s=t.options.get;return B$({custom_elements:s("custom_elements"),extended_valid_elements:s("extended_valid_elements"),invalid_elements:s("invalid_elements"),invalid_styles:s("invalid_styles"),schema:s("schema"),valid_children:s("valid_children"),valid_classes:s("valid_classes"),valid_elements:s("valid_elements"),valid_styles:s("valid_styles"),verify_html:s("verify_html"),padd_empty_block_inline_children:s("format_empty_lines")})},Zue=t=>{const s=t.options.get;return{...cK(t),...lK(t),...B$({remove_trailing_brs:s("remove_trailing_brs"),pad_empty_with_br:s("pad_empty_with_br"),url_converter:s("url_converter"),url_converter_scope:s("url_converter_scope"),element_format:s("element_format"),entities:s("entities"),entity_encoding:s("entity_encoding"),indent:s("indent"),indent_after:s("indent_after"),indent_before:s("indent_before")})}},uK=t=>{const s=g0(cK(t),t.schema);return s.addAttributeFilter("src,href,style,tabindex",(a,u)=>{const p=t.dom,b="data-mce-"+u;let E=a.length;for(;E--;){const I=a[E];let D=I.attr(u);if(D&&!I.attr(b)){if(D.indexOf("data:")===0||D.indexOf("blob:")===0)continue;u==="style"?(D=p.serializeStyle(p.parseStyle(D),I.name),D.length||(D=null),I.attr(b,D),I.attr(u,D)):u==="tabindex"?(I.attr(b,D),I.attr(u,null)):I.attr(b,t.convertURL(D,u,I.name))}}}),s.addNodeFilter("script",a=>{let u=a.length;for(;u--;){const p=a[u],b=p.attr("type")||"no/type";b.indexOf("mce-")!==0&&p.attr("type","mce-"+b)}}),VS(t)&&s.addNodeFilter("#cdata",a=>{var u;let p=a.length;for(;p--;){const b=a[p];b.type=8,b.name="#comment",b.value="[CDATA["+t.dom.encode((u=b.value)!==null&&u!==void 0?u:"")+"]]"}}),s.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",a=>{let u=a.length;const p=t.schema.getNonEmptyElements();for(;u--;){const b=a[u];b.isEmpty(p)&&b.getAll("br").length===0&&b.append(new Fu("br",1))}}),s},Yue=t=>{const s=M4(t);s&&kh.setEditorTimeout(t,()=>{let a;s===!0?a=t:a=t.editorManager.get(s),a&&!a.destroyed&&(a.focus(),a.selection.scrollIntoView())},100)},dK=t=>{const s=t.dom.getRoot();!t.inline&&(!qS(t)||t.selection.getStart(!0)===s)&&Hl(s).each(a=>{const u=a.getNode(),p=gm(u)?Hl(u).getOr(a):a;t.selection.setRng(p.toRange())})},Jue=t=>{t.bindPendingEventDelegates(),t.initialized=!0,S4(t),t.focus(!0),dK(t),t.nodeChanged({initial:!0});const s=yD(t);me(s)&&s.call(t,t),Yue(t),wa(t)&&yM(t,!0)},V$=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,fK=(t,s,a)=>{const{pass:u,fail:p}=Ot(s,I=>tinymce.Resource.has(wI(I))),E=[...u.map(I=>{const D=tinymce.Resource.get(wI(I));return K(D)?Promise.resolve(V$(t).loadRawCss(I,D)):Promise.resolve()}),V$(t).loadAll(p)];return t.inline?E:E.concat([t.ui.styleSheetLoader.loadAll(a)])},Hw=t=>{const s=V$(t),a=uD(t),u=t.contentCSS,p=()=>{s.unloadAll(u),t.inline||t.ui.styleSheetLoader.unloadAll(a)},b=()=>{t.removed?p():t.on("remove",p)};if(t.contentStyles.length>0){let D="";yn.each(t.contentStyles,$=>{D+=$+`\r
`}),t.dom.addStyle(D)}const E=Promise.all(fK(t,u,a)).then(b).catch(b),I=lD(t);return I&&que(t,I),E},Xue=t=>{const s=t.getDoc(),a=t.getBody();b4(t),I_(t)||(s.body.spellcheck=!1,L$.setAttrib(a,"spellcheck","false")),t.quirks=Gue(t),y4(t);const u=dD(t);u!==void 0&&(a.dir=u);const p=ky(t);p&&t.on("BeforeSetContent",b=>{yn.each(p,E=>{b.content=b.content.replace(E,I=>"<!--mce:protected "+escape(I)+"-->")})}),t.on("SetContent",()=>{t.addVisual(t.getBody())}),t.on("compositionstart compositionend",b=>{t.composing=b.type==="compositionstart"})},pK=t=>{Lp(t)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"})},H$=t=>{t.removed!==!0&&(pK(t),Jue(t))},Que=t=>{let s=!1;const a=setTimeout(()=>{s||t.setProgressState(!0)},500);return()=>{clearTimeout(a),s=!0,t.setProgressState(!1)}},hK=t=>{const s=t.getElement();let a=t.getDoc();t.inline&&(L$.addClass(s,"mce-content-body"),t.contentDocument=a=document,t.contentWindow=window,t.bodyElement=s,t.contentAreaContainer=s);const u=t.getBody();u.disabled=!0,t.readonly=MS(t),t._editableRoot=NS(t),!$S(t)&&t.hasEditableRoot()&&(t.inline&&L$.getStyle(u,"position",!0)==="static"&&(u.style.position="relative"),u.contentEditable="true"),u.disabled=!1,t.editorUpload=hC(t),t.schema=Op(lK(t)),t.dom=Ir(a,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:__(t),referrerPolicy:nO(t),crossOrigin:RS(t),onSetAttrib:E=>{t.dispatch("SetAttrib",E)}}),t.parser=uK(t),t.serializer=lM(Zue(t),t),t.selection=iM(t.dom,t.getWin(),t.serializer,t),t.annotator=tk(t),t.formatter=fw(t),t.undoManager=AI(t),t._nodeChangeDispatcher=new ON(t),t._selectionOverrides=Aue(t),rye(t),i9(t),kq(t),Vie(t),Lp(t)||(Zle(t),Wue(t));const p=sle(t);r9(t,p),nN(t),Wz(t),C$(t,p);const b=bI(t);Xue(t),b.fold(()=>{const E=Que(t);Hw(t).then(()=>{H$(t),E()})},E=>{t.setProgressState(!0),Hw(t).then(()=>{E().then(I=>{t.setProgressState(!1),H$(t),IV(t)},I=>{t.notificationManager.open({type:"error",text:String(I)}),H$(t),IV(t)})})})},F$=Ir.DOM,mK=(t,s,a,u)=>{const p=Me.fromTag("iframe");return u.each(b=>_i(p,"tabindex",b)),Ac(p,a),Ac(p,{id:t+"_ifr",frameBorder:"0",allowTransparency:"true",...$s.browser.isFirefox()?{title:s}:{}}),au(p,"tox-edit-area__iframe"),p},ede=t=>{let s=xy(t)+"<html><head>";OS(t)!==t.editorManager.documentBaseURL&&(s+='<base href="'+t.documentBaseURI.getURI()+'" />'),s+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const a=Mg(t),u=hl(t),p=t.translate(O_(t)),b=$s.browser.isFirefox()?"":`aria-label="${p}"`;return Om(t)&&(s+='<meta http-equiv="Content-Security-Policy" content="'+Om(t)+'" />'),s+=`</head><body id="${a}" class="mce-content-body ${u}" data-id="${t.id}" ${b}><br></body></html>`,s},gK=(t,s)=>{const a=O_(t),u=t.translate(a),p=id(Me.fromDom(t.getElement()),"tabindex").bind(im),b=mK(t.id,u,E_(t),p).dom;b.onload=()=>{b.onload=null,t.dispatch("load")},t.contentAreaContainer=s.iframeContainer,t.iframeElement=b,t.iframeHTML=ede(t),F$.add(s.iframeContainer,b)},tde=t=>{const s=t.iframeElement,a=()=>{t.contentDocument=s.contentDocument,hK(t)};if(hO(t)||$s.browser.isFirefox()){const u=t.getDoc();u.open(),u.write(t.iframeHTML),u.close(),a()}else{const u=W1(Me.fromDom(s),"load",()=>{u.unbind(),a()});s.srcdoc=t.iframeHTML}},nde=(t,s)=>{gK(t,s),s.editorContainer&&(s.editorContainer.style.display=t.orgDisplay,t.hidden=F$.isHidden(s.editorContainer)),t.getElement().style.display="none",F$.setAttrib(t.id,"aria-hidden","true"),t.getElement().style.visibility=t.orgVisibility,tde(t)},vK=Ir.DOM,ode=(t,s,a)=>{const u=jv.get(a),p=jv.urls[a]||t.editorManager.documentBaseURL.replace(/\/$/,"");if(a=yn.trim(a),u&&yn.inArray(s,a)===-1){if(t.plugins[a])return;try{const b=u(t,p)||{};t.plugins[a]=b,me(b.init)&&(b.init(t,p),s.push(a))}catch(b){y0(t,a,b)}}},sde=t=>{const s=a=>{a.keyCode===qn.ESC&&!a.defaultPrevented&&iD(t).isDefaultPrevented()&&a.preventDefault()};document.addEventListener("keyup",s),t.inline||t.on("keyup",s),t.on("remove",()=>{document.removeEventListener("keyup",s),t.inline||t.off("keyup",s)})},rde=t=>t.replace(/^\-/,""),ide=t=>{const s=[];Ue(Qb(t),a=>{ode(t,s,rde(a))})},ade=t=>{const s=yn.trim(aD(t)),a=t.ui.registry.getAll().icons,u={...uM.get("default").icons,...uM.get(s).icons};wn(u,(p,b)=>{ho(a,b)||t.ui.registry.addIcon(b,p)})},cde=t=>{const s=Df(t);if(K(s)){const a=fC.get(s);t.theme=a(t,fC.urls[s])||{},me(t.theme.init)&&t.theme.init(t,fC.urls[s]||t.editorManager.documentBaseURL.replace(/\/$/,""))}else t.theme={}},bK=t=>{const s=cO(t),a=Ph.get(s);t.model=a(t,Ph.urls[s])},$$=t=>{bM.init(t)},yK=t=>{const s=t.theme.renderUI;return s?s():EK(t)},SK=t=>{const s=t.getElement(),u=Df(t)(t,s);return u.editorContainer.nodeType&&(u.editorContainer.id=u.editorContainer.id||t.id+"_parent"),u.iframeContainer&&u.iframeContainer.nodeType&&(u.iframeContainer.id=u.iframeContainer.id||t.id+"_iframecontainer"),u.height=u.iframeHeight?u.iframeHeight:s.offsetHeight,u},CK=(t,s)=>({editorContainer:t,iframeContainer:s,api:{}}),lde=t=>{const s=vK.create("div");return vK.insertAfter(s,t),CK(s,s)},EK=t=>{const s=t.getElement();return t.inline?CK(null):lde(s)},_K=t=>{const s=t.getElement();return t.orgDisplay=s.style.display,K(Df(t))?yK(t):me(Df(t))?SK(t):EK(t)},wK=(t,s)=>{const a={show:ce.from(s.show).getOr(Ze),hide:ce.from(s.hide).getOr(Ze),isEnabled:ce.from(s.isEnabled).getOr(Jt),setEnabled:u=>{u&&(t.mode.get()==="readonly"||wa(t))||ce.from(s.setEnabled).each(b=>b(u))}};t.ui={...t.ui,...a}},ude=async t=>{t.dispatch("ScriptsLoaded"),ade(t),sde(t),cde(t),bK(t),$$(t),ide(t);const s=await _K(t);wK(t,ce.from(s.api).getOr({})),t.editorContainer=s.editorContainer,Wm(t),t.inline?hK(t):nde(t,{editorContainer:s.editorContainer,iframeContainer:s.iframeContainer})},MC=Ir.DOM,GN=t=>t.charAt(0)==="-",qN=(t,s)=>{const a=cD(s),u=I4(s);if(!Rp.hasCode(a)&&a!=="en"){const p=Ar(u)?u:`${s.editorManager.baseURL}/langs/${a}.js`;t.add(p).catch(()=>{Wf(s,p,a)})}},AK=(t,s)=>{const a=Df(t);if(K(a)&&!GN(a)&&!ho(fC.urls,a)){const u=pD(t),p=u?t.documentBaseURI.toAbsolute(u):`themes/${a}/theme${s}.js`;fC.load(a,p).catch(()=>{qoe(t,p,a)})}},TK=(t,s)=>{const a=cO(t);if(a!=="plugin"&&!ho(Ph.urls,a)){const u=R4(t),p=K(u)?t.documentBaseURI.toAbsolute(u):`models/${a}/model${s}.js`;Ph.load(a,p).catch(()=>{ei(t,p,a)})}},OK=(t,s)=>{bM.load(t,s)},dde=t=>ce.from(C6(t)).filter(Ar).map(s=>({url:s,name:ce.none()})),IK=(t,s,a)=>ce.from(s).filter(u=>Ar(u)&&!uM.has(u)).map(u=>({url:`${t.editorManager.baseURL}/icons/${u}/icons${a}.js`,name:ce.some(u)})),fde=(t,s,a)=>{const u=IK(s,"default",a),p=dde(s).orThunk(()=>IK(s,aD(s),""));Ue(zc([u,p]),b=>{t.add(b.url).catch(()=>{EI(s,b.url,b.name.getOrUndefined())})})},pde=(t,s)=>{const a=(u,p)=>{u!=="licensekeymanager"&&jv.load(u,p).catch(()=>{zf(t,p,u)})};wn(T_(t),(u,p)=>{a(p,u),t.options.set("plugins",Qb(t).concat(p))}),Ue(Qb(t),u=>{u=yn.trim(u),u&&!jv.urls[u]&&!GN(u)&&a(u,`plugins/${u}/plugin${s}.js`)})},Kv=t=>{const s=Df(t);return!K(s)||be(fC.get(s))},RK=t=>{const s=cO(t);return be(Ph.get(s))},hde=(t,s)=>{const a=Ba.ScriptLoader,u=()=>{!t.removed&&Kv(t)&&RK(t)&&ude(t)};AK(t,s),TK(t,s),OK(t,s),qN(a,t),fde(a,t,s),pde(t,s),a.loadQueue().then(u,u)},xK=(t,s)=>wp.forElement(t,{contentCssCors:PS(s),referrerPolicy:nO(s)}),mde=t=>{const s=t.id;Rp.setCode(cD(t));const a=()=>{MC.unbind(window,"ready",a),t.render()};if(!Ip.Event.domLoaded){MC.bind(window,"ready",a);return}if(!t.getElement())return;const u=Me.fromDom(t.getElement()),p=Ds(u);t.on("remove",()=>{dt(u.dom.attributes,E=>da(u,E.name)),Ac(u,p)}),t.ui.styleSheetLoader=xK(u,t),A_(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");const b=t.getElement().form||MC.getParent(s,"form");b&&(t.formElement=b,hD(t)&&!pT(t.getElement())&&(MC.insertAfter(MC.create("input",{type:"hidden",name:s}),s),t.hasHiddenInput=!0),t.formEventDelegate=E=>{t.dispatch(E.type,E)},MC.bind(b,"submit reset",t.formEventDelegate),t.on("reset",()=>{t.resetContent()}),k4(t)&&!b.submit.nodeType&&!b.submit.length&&!b._mceOldSubmit&&(b._mceOldSubmit=b.submit,b.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),b._mceOldSubmit(b)))),t.windowManager=pM(t),t.notificationManager=BV(t),ID(t)&&t.on("GetContent",E=>{E.save&&(E.content=MC.encode(E.content))}),mD(t)&&t.on("submit",()=>{t.initialized&&t.save()}),w6(t)&&(t._beforeUnload=()=>{t.initialized&&!t.destroyed&&!t.isHidden()&&t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),hde(t,t.suffix)},DK=["#E41B60","#AD1457","#1939EC","#001CB5","#648000","#465B00","#006CE7","#0054B4","#00838F","#006064","#00866F","#004D40","#51742F","#385021","#CF4900","#A84600","#CC0000","#6A1B9A","#9C27B0","#6A00AB","#3041BA","#0A1877","#774433","#452B24","#607D8B","#455A64"],U$=t=>{var s;return Intl.Segmenter?`${(s=new Intl.Segmenter().segment(t)[Symbol.iterator]().next().value)===null||s===void 0?void 0:s.segment}`:t.trim()[0]},KN=(t,s)=>{let a=5381;for(let u=0;u<t.length;u++)a=(a<<5)+a+t.charCodeAt(u);return(a>>>0)%(s+1)},gde=t=>{const s=KN(t??"",DK.length-1);return DK[s]},vde=(t,s,a)=>{const u=a/2;return`<svg height="${a}" width="${a}" xmlns="http://www.w3.org/2000/svg"><circle cx="${u}" cy="${u}" r="${u}" fill="${s}"/><text x="50%" y="50%" text-anchor="middle" dominant-baseline="central" fill="#FFF" font-family="sans-serif" font-size="${u}">`+t+"</text></svg>"},bde=(t,s,a)=>"data:image/svg+xml,"+encodeURIComponent(vde(t,s,a)),ZN=(t,s={size:36})=>bde(U$(t.name),gde(t.id),s.size),yde=QI([jae("id"),SG("name"),SG("avatar"),zae("custom")]),kK=t=>{const s={};return wn(t,(a,u)=>{a.each(p=>{s[u]=p})}),s},Sde=t=>{if(!Array.isArray(t))throw new Error("fetch_users must return an array");const s=Ut(t,p=>gG("Invalid user object",yde,p)),{errors:a,values:u}=Gi(s);if(a.length>0){const p=Ut(a,(b,E)=>`User at index ${E}: ${yN(b)}`);console.warn(`User validation errors:
`+p.join(`
`))}return Ut(u,p=>{const{id:b,name:E,avatar:I,...D}=p;return{id:b,name:E.getOr(b),avatar:I.getOr(ZN({id:b,name:E.getOr(b)})),...kK(D)}})},Cde=t=>{const s=new Map,a=new Map,u=$=>ce.from(s.get($)),p=($,J)=>{s.set(J,$)},b=($,J)=>ce.from(a.get($)).each(({reject:te})=>{te(J),a.delete($)}),E=($,J)=>ce.from(a.get($)).each(({resolve:te})=>{te(J),a.delete($)}),I=$=>{const J=M_(t);if(Array.isArray($)){if(!J)return is($,re=>Promise.resolve({id:re,name:re,avatar:ZN({id:re,name:re})}))}else return{};const te=lo(Oe($,re=>!u(re).isSome()));return Ue(te,re=>{const fe=new Promise((Re,Ae)=>{a.set(re,{resolve:Re,reject:Ae})});p(fe,re)}),te.length>0&&J(te).then(Sde).then(re=>{const fe=new Set(Ut(re,Re=>Re.id));Ue(re,Re=>E(Re.id,Re)),Ue(te,Re=>{fe.has(Re)||b(Re,new Error(`User ${Re} not found`))})}).catch(re=>{Ue(te,fe=>b(fe,re instanceof Error?re:new Error("Network error")))}),tn($,(re,fe)=>(re[fe]=u(fe).getOr(Promise.resolve({id:fe,name:fe,avatar:ZN({id:fe,name:fe})})),re),{})},D=U4(t);return Object.freeze({userId:D,fetchUsers:I})},Ede=t=>Cde(t),_de=(t,s)=>{t._editableRoot!==s&&(t._editableRoot=s,wa(t)||(t.getBody().contentEditable=String(t.hasEditableRoot()),t.nodeChanged()),b6(t,s))},wde=t=>t._editableRoot,MK=(t,s)=>({sections:Be(t),options:Be(s)}),yR=su().deviceType,YN=yR.isPhone(),Ade=yR.isTablet(),Fw=t=>{if(De(t))return[];{const s=le(t)?t:t.split(/[ ,]/),a=Ut(s,Lr);return Oe(a,Ar)}},NK=(t,s)=>{const a=As(s,(u,p)=>bt(t,p));return MK(a.t,a.f)},Tde=(t,s,a={})=>{const u=t.sections(),p=Ts(u,s).getOr({});return yn.extend({},a,p)},JN=(t,s)=>ho(t.sections(),s),Ode=(t,s)=>JN(t,s)?t.sections()[s]:{},Ide=(t,s)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Ts(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...s?{menubar:!1}:{}}),Rde=(t,s)=>{var a;const u=(a=s.external_plugins)!==null&&a!==void 0?a:{};return t&&t.external_plugins?yn.extend({},t.external_plugins,u):u},xde=(t,s)=>[...Fw(t),...Fw(s)],PK=(t,s,a,u)=>t&&JN(s,"mobile")?u:a,LK=(t,s,a,u)=>{const p=Fw(a.forced_plugins),b=Fw(u.plugins),E=Ode(s,"mobile"),I=E.plugins?Fw(E.plugins):b,D=PK(t,s,b,I),$=xde(p,D);return yn.extend(u,{forced_plugins:p,plugins:$})},BK=(t,s)=>t&&JN(s,"mobile"),VK=(t,s,a,u,p)=>{var b;const E=t?{mobile:Ide((b=p.mobile)!==null&&b!==void 0?b:{},s)}:{},I=NK(["mobile"],Md(E,p)),D=yn.extend(a,u,I.options(),BK(t,I)?Tde(I,"mobile"):{},{external_plugins:Rde(u,I.options())});return LK(t,I,u,D)},HK=(t,s)=>{const a=Nd(s);return VK(YN||Ade,YN,a,t,a)},FK=(t,s)=>oz(t,s),j$=t=>{const s=(u,p)=>{t.formatter.toggle(u,p),t.nodeChanged()},a=u=>()=>{Ue("left,center,right,justify".split(","),p=>{u!==p&&t.formatter.remove("align"+p)}),u!=="none"&&s("align"+u)};t.editorCommands.addCommands({JustifyLeft:a("left"),JustifyCenter:a("center"),JustifyRight:a("right"),JustifyFull:a("justify"),JustifyNone:a("none")})},$K=t=>{const s=a=>()=>{const u=t.selection,p=u.isCollapsed()?[t.dom.getParent(u.getNode(),t.dom.isBlock)]:u.getSelectedBlocks();return Kt(p,b=>be(t.formatter.matchNode(b,a)))};t.editorCommands.addCommands({JustifyLeft:s("alignleft"),JustifyCenter:s("aligncenter"),JustifyRight:s("alignright"),JustifyFull:s("alignjustify")},"state")},UK=t=>{j$(t),$K(t)},jK=t=>{t.editorCommands.addCommands({"Cut,Copy,Paste":s=>{const a=t.getDoc();let u;try{a.execCommand(s)}catch{u=!0}if(s==="paste"&&!a.queryCommandEnabled(s)&&(u=!0),u||!a.queryCommandSupported(s)){let p=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");($s.os.isMacOS()||$s.os.isiOS())&&(p=p.replace(/Ctrl\+/g,"+")),t.notificationManager.open({text:p,type:"error"})}}})},Dde=(t,s,a,u)=>{const p=Me.fromDom(t.getRoot());return GO(p,Pt.fromRangeStart(s),u)?a=a.replace(/^ /,"&nbsp;"):a=a.replace(/^&nbsp;/," "),qO(p,Pt.fromRangeEnd(s),u)?a=a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a=a.replace(/&nbsp;(<br( \/)?>)?$/," "),a},kde=t=>{if(typeof t!="string"){const s=yn.extend({paste:t.paste,data:{paste:t.paste}},t);return{content:t.content,details:s}}return{content:t,details:{}}},zK=(t,s)=>{const a=t.selection,u=t.dom;return/^ | $/.test(s)?Dde(u,a.getRng(),s,t.schema):s},SR=(t,s)=>{if(t.selection.isEditable()){const{content:a,details:u}=kde(s);dI(t,{...u,content:zK(t,a),format:"html",set:!1,selection:!0}).each(p=>{const b=tz(t,p.content,u);Uk(t,b,p),t.addVisual()})}},WK=t=>{t.editorCommands.addCommands({mceCleanup:()=>{const s=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(s)},insertImage:(s,a,u)=>{SR(t,t.dom.createHTML("img",{src:u}))},insertHorizontalRule:()=>{t.execCommand("mceInsertContent",!1,"<hr>")},insertText:(s,a,u)=>{SR(t,t.dom.encode(u))},insertHTML:(s,a,u)=>{SR(t,u)},mceInsertContent:(s,a,u)=>{SR(t,u)},mceSetContent:(s,a,u)=>{t.setContent(u)},mceReplaceContent:(s,a,u)=>{t.execCommand("mceInsertContent",!1,u.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceNewDocument:()=>{t.setContent(_D(t))}})},GK={"font-size":"size","font-family":"face"},z$=ua("font"),W$=(t,s,a)=>{const u=b=>ta(b,t).orThunk(()=>z$(b)?Ts(GK,t).bind(E=>id(b,E)):ce.none()),p=b=>eo(Me.fromDom(s),b);return Dl(Me.fromDom(a),b=>u(b),p)},XN=t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),qK=(t,s)=>ce.from(Ir.DOM.getStyle(s,t,!0)),G$=t=>(s,a)=>ce.from(a).map(Me.fromDom).filter(ki).bind(u=>W$(t,s,u.dom).or(qK(t,u.dom))).getOr(""),KK=G$("font-size"),q$=z(XN,G$("font-family")),ZK=t=>Hl(t.getBody()).bind(s=>{const a=s.container();return ce.from(gn(a)?a.parentNode:a)}),YK=t=>ce.from(t.selection.getRng()).bind(s=>{const a=t.getBody();return s.startContainer===a&&s.startOffset===0?ce.none():ce.from(t.selection.getStart(!0))}),Mde=(t,s)=>YK(t).orThunk($e(ZK,t)).map(Me.fromDom).filter(ki).bind(s),QN=(t,s)=>Mde(t,$t(ce.some,s)),JK=(t,s)=>{if(/^[0-9.]+$/.test(s)){const a=parseInt(s,10);if(a>=1&&a<=7){const u=V4(t),p=n0(t);return p.length>0?p[a-1]||s:u[a-1]||s}else return s}else return s},Nde=t=>{const s=t.split(/\s*,\s*/);return Ut(s,a=>a.indexOf(" ")!==-1&&!($o(a,'"')||$o(a,"'"))?`'${a}'`:a).join(",")},Pde=(t,s)=>{const a=JK(t,s);t.formatter.toggle("fontname",{value:Nde(a)}),t.nodeChanged()},XK=t=>QN(t,s=>q$(t.getBody(),s.dom)).getOr(""),Lde=(t,s)=>{t.formatter.toggle("fontsize",{value:JK(t,s)}),t.nodeChanged()},QK=t=>QN(t,s=>KK(t.getBody(),s.dom)).getOr(""),eP=t=>QN(t,s=>{const a=Me.fromDom(t.getBody()),u=Dl(s,b=>ta(b,"line-height"),$e(eo,a)),p=()=>{const b=parseFloat(zi(s,"line-height")),E=parseFloat(zi(s,"font-size"));return String(b/E)};return u.getOrThunk(p)}).getOr(""),Bde=(t,s)=>{t.formatter.toggle("lineheight",{value:String(s)}),t.nodeChanged()},eZ=t=>{const s=(a,u)=>{t.formatter.toggle(a,u),t.nodeChanged()};t.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":a=>{s(a)},"ForeColor,HiliteColor":(a,u,p)=>{s(a,{value:p})},BackColor:(a,u,p)=>{s("hilitecolor",{value:p})},FontName:(a,u,p)=>{Pde(t,p)},FontSize:(a,u,p)=>{Lde(t,p)},LineHeight:(a,u,p)=>{Bde(t,p)},Lang:(a,u,p)=>{var b;s(a,{value:p.code,customValue:(b=p.customCode)!==null&&b!==void 0?b:null})},RemoveFormat:a=>{t.formatter.remove(a)},mceBlockQuote:()=>{s("blockquote")},FormatBlock:(a,u,p)=>{s(K(p)?p:"p")},mceToggleFormat:(a,u,p)=>{s(p)}})},Vde=t=>{const s=a=>t.formatter.match(a);t.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":a=>s(a),mceBlockQuote:()=>s("blockquote")},"state"),t.editorCommands.addQueryValueHandler("FontName",()=>XK(t)),t.editorCommands.addQueryValueHandler("FontSize",()=>QK(t)),t.editorCommands.addQueryValueHandler("LineHeight",()=>eP(t))},tZ=t=>{eZ(t),Vde(t)},K$=t=>{t.editorCommands.addCommands({mceAddUndoLevel:()=>{t.undoManager.add()},mceEndUndoLevel:()=>{t.undoManager.add()},Undo:()=>{t.undoManager.undo()},Redo:()=>{t.undoManager.redo()}})},Hde=t=>{t.editorCommands.addCommands({Indent:()=>{kie(t)},Outdent:()=>{n9(t)}}),t.editorCommands.addCommands({Outdent:()=>HI(t),Indent:()=>nF(t)},"state")},Fde=t=>{const s=(a,u,p)=>{if(t.mode.isReadOnly())return;const b=K(p)?{href:p}:p,E=t.dom.getParent(t.selection.getNode(),"a");se(b)&&K(b.href)&&(b.href=b.href.replace(/ /g,"%20").replace(/&amp;/g,"&"),(!E||!b.href)&&t.formatter.remove("link"),b.href&&t.formatter.apply("link",b,E))};t.editorCommands.addCommands({unlink:()=>{if(t.selection.isEditable()){if(t.selection.isCollapsed()){const a=t.dom.getParent(t.selection.getStart(),"a");a&&t.dom.remove(a,!0);return}t.formatter.remove("link")}},mceInsertLink:s,createLink:s})},nZ=(t,s,a,u)=>{const p=t.dom,b=I=>p.isBlock(I)&&I.parentElement===a,E=b(s)?s:p.getParent(u,b,a);return ce.from(E).map(Me.fromDom)},oZ=(t,s)=>{if(t.mode.isReadOnly())return;const a=t.dom,u=t.selection.getRng(),p=s?t.selection.getStart():t.selection.getEnd(),b=s?u.startContainer:u.endContainer,E=kw(a,b);if(!E||!E.isContentEditable)return;const I=s?wc:sd,D=Qc(t);nZ(t,p,E,b).each($=>{const J=KF(t,b,$.dom,E,!1,D);I($,Me.fromDom(J)),t.selection.setCursorLocation(J,0),t.dispatch("NewBlock",{newBlock:J}),xw(t,"insertParagraph")})},$de=t=>oZ(t,!0),Ude=t=>oZ(t,!1),jde=t=>{t.editorCommands.addCommands({InsertNewBlockBefore:()=>{$de(t)},InsertNewBlockAfter:()=>{Ude(t)}})},zde=t=>{t.editorCommands.addCommands({insertParagraph:()=>{AN(jG,t)},mceInsertNewLine:(s,a,u)=>{ZG(t,u)},InsertLineBreak:(s,a,u)=>{AN(zG,t)}})},sZ=t=>{t.editorCommands.addCommands({mceSelectNodeDepth:(s,a,u)=>{let p=0;t.dom.getParent(t.selection.getNode(),b=>vo(b)&&p++===u?(t.selection.select(b),!1):!0,t.getBody())},mceSelectNode:(s,a,u)=>{t.selection.select(u)},selectAll:()=>{const s=t.dom.getParent(t.selection.getStart(),lu);if(s){const a=t.dom.createRng();a.selectNodeContents(s),t.selection.setRng(a)}}})},rZ=t=>{t.editorCommands.addCommands({mceRemoveNode:(s,a,u)=>{const p=u??t.selection.getNode();if(p!==t.getBody()){const b=t.selection.getBookmark();t.dom.remove(p,!0),t.selection.moveToBookmark(b)}},mcePrint:()=>{t.getWin().print()},mceFocus:(s,a,u)=>{YQ(t,u===!0)},mceToggleVisualAid:()=>{t.hasVisual=!t.hasVisual,t.addVisual()}})},Wde=t=>{UK(t),jK(t),K$(t),sZ(t),WK(t),Fde(t),Hde(t),jde(t),zde(t),tZ(t),rZ(t)},Gde=["toggleview"],iZ=t=>bt(Gde,t.toLowerCase());class aZ{constructor(s){this.commands={state:{},exec:{},value:{}},this.editor=s}execCommand(s,a=!1,u,p){const b=this.editor,E=s.toLowerCase(),I=p==null?void 0:p.skip_focus;if(b.removed||(E!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(E)&&!I?b.focus():D6(b)),b.dispatch("BeforeExecCommand",{command:s,ui:a,value:u}).isDefaultPrevented()))return!1;const $=this.commands.exec[E];return me($)?($(E,a,u,p),b.dispatch("ExecCommand",{command:s,ui:a,value:u,args:p}),!0):!1}queryCommandState(s){if(!iZ(s)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const a=s.toLowerCase(),u=this.commands.state[a];return me(u)?u(a):!1}queryCommandValue(s){if(!iZ(s)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const a=s.toLowerCase(),u=this.commands.value[a];return me(u)?u(a):""}addCommands(s,a="exec"){const u=this.commands;wn(s,(p,b)=>{Ue(b.toLowerCase().split(","),E=>{u[a][E]=p})})}addCommand(s,a,u){const p=s.toLowerCase();this.commands.exec[p]=(b,E,I,D)=>a.call(u??this.editor,E,I,D)}queryCommandSupported(s){const a=s.toLowerCase();return!!this.commands.exec[a]}addQueryStateHandler(s,a,u){this.commands.state[s.toLowerCase()]=()=>a.call(u??this.editor)}addQueryValueHandler(s,a,u){this.commands.value[s.toLowerCase()]=()=>a.call(u??this.editor)}}const o=yn.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class c{static isNative(s){return!!o[s.toLowerCase()]}constructor(s){this.bindings={},this.settings=s||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Et}fire(s,a){return this.dispatch(s,a)}dispatch(s,a){const u=s.toLowerCase(),p=lS(u,a??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(p);const b=this.bindings[u];if(b)for(let E=0,I=b.length;E<I;E++){const D=b[E];if(!D.removed){if(D.once&&this.off(u,D.func),p.isImmediatePropagationStopped())return p;if(D.func.call(this.scope,p)===!1)return p.preventDefault(),p}}return p}on(s,a,u,p){if(a===!1&&(a=Et),a){const b={func:a,removed:!1};p&&yn.extend(b,p);const E=s.toLowerCase().split(" ");let I=E.length;for(;I--;){const D=E[I];let $=this.bindings[D];$||($=[],this.toggleEvent(D,!0)),u?$=[b,...$]:$=[...$,b],this.bindings[D]=$}}return this}off(s,a){if(s){const u=s.toLowerCase().split(" ");let p=u.length;for(;p--;){const b=u[p];let E=this.bindings[b];if(!b)return wn(this.bindings,(I,D)=>{this.toggleEvent(D,!1),delete this.bindings[D]}),this;if(E){if(!a)E.length=0;else{const I=Ot(E,D=>D.func===a);E=I.fail,this.bindings[b]=E,Ue(I.pass,D=>{D.removed=!0})}E.length||(this.toggleEvent(s,!1),delete this.bindings[b])}}}else wn(this.bindings,(u,p)=>{this.toggleEvent(p,!1)}),this.bindings={};return this}once(s,a,u){return this.on(s,a,u,{once:!0})}has(s){s=s.toLowerCase();const a=this.bindings[s];return!(!a||a.length===0)}}const d=t=>(t._eventDispatcher||(t._eventDispatcher=new c({scope:t,toggleEvent:(s,a)=>{c.isNative(s)&&t.toggleNativeEvent&&t.toggleNativeEvent(s,a)}})),t._eventDispatcher),m={fire(t,s,a){return ij("fire"),this.dispatch(t,s,a)},dispatch(t,s,a){const u=this;if(u.removed&&t!=="remove"&&t!=="detach")return lS(t.toLowerCase(),s??{},u);const p=d(u).dispatch(t,s);if(a!==!1&&u.parent){let b=u.parent();for(;b&&!p.isPropagationStopped();)b.dispatch(t,p,!1),b=b.parent?b.parent():void 0}return p},on(t,s,a){return d(this).on(t,s,a)},off(t,s){return d(this).off(t,s)},once(t,s){return d(this).once(t,s)},hasEventListeners(t){return d(this).has(t)}},S=Ir.DOM;let w;const T=(t,s)=>{if(s==="selectionchange")return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(s))return t.getDoc().documentElement;const a=w_(t);return a?(t.eventRoot||(t.eventRoot=S.select(a)[0]),t.eventRoot):t.getBody()},V=t=>!t.hidden&&!wa(t),F=(t,s,a)=>{V(t)?t.dispatch(s,a):wa(t)&&Bp(t,a)},W=(t,s)=>{if(t.delegates||(t.delegates={}),t.delegates[s]||t.removed)return;const a=T(t,s);if(w_(t)){if(w||(w={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||w&&(wn(w,(p,b)=>{t.dom.unbind(T(t,b))}),w=null)})),w[s])return;const u=p=>{const b=p.target,E=t.editorManager.get();let I=E.length;for(;I--;){const D=E[I].getBody();(D===b||S.isChildOf(b,D))&&F(E[I],s,p)}};w[s]=u,S.bind(a,s,u)}else{const u=p=>{F(t,s,p)};S.bind(a,s,u),t.delegates[s]=u}},Q={...m,bindPendingEventDelegates(){const t=this;yn.each(t._pendingNativeEvents,s=>{W(t,s)})},toggleNativeEvent(t,s){const a=this;t==="focus"||t==="blur"||a.removed||(s?a.initialized?W(a,t):a._pendingNativeEvents?a._pendingNativeEvents.push(t):a._pendingNativeEvents=[t]:a.initialized&&a.delegates&&(a.dom.unbind(T(a,t),t,a.delegates[t]),delete a.delegates[t]))},unbindAllNativeEvents(){const t=this,s=t.getBody(),a=t.dom;t.delegates&&(wn(t.delegates,(u,p)=>{t.dom.unbind(T(t,p),p,u)}),delete t.delegates),!t.inline&&s&&a&&(s.onload=null,a.unbind(t.getWin()),a.unbind(t.getDoc())),a&&(a.unbind(s),a.unbind(t.getContainer()))}},oe=t=>K(t)?{value:t.split(/[ ,]/),valid:!0}:Ke(t,K)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},pe=t=>{const s=(()=>{switch(t){case"array":return le;case"boolean":return we;case"function":return me;case"number":return Ye;case"object":return se;case"string":return K;case"string[]":return oe;case"object[]":return a=>Ke(a,se);case"regexp":return a=>Y(a,RegExp);default:return Jt}})();return a=>qe(a,s,`The value must be a ${t}.`)},Ee=t=>K(t.processor),Se=(t,s)=>{const a=ec(s.message)?"":`. ${s.message}`;return t+a},Pe=t=>t.valid,qe=(t,s,a="")=>{const u=s(t);return we(u)?u?{value:t,valid:!0}:{valid:!1,message:a}:u},Le=(t,s,a)=>{if(!Ne(s)){const u=qe(s,a);if(Pe(u))return u.value;console.error(Se(`Invalid default value passed for the "${t}" option`,u))}},Je=(t,s,a=s)=>{const u={},p={},b=(fe,Re,Ae)=>{const _e=qe(Re,Ae);return Pe(_e)?(p[fe]=_e.value,!0):(console.warn(Se(`Invalid value passed for the ${fe} option`,_e)),!1)},E=(fe,Re)=>{const Ae=Ee(Re)?pe(Re.processor):Re.processor,_e=Le(fe,Re.default,Ae);u[fe]={...Re,default:_e,processor:Ae},Ts(p,fe).orThunk(()=>Ts(s,fe)).each(et=>b(fe,et,Ae))},I=fe=>ho(u,fe);return{register:E,isRegistered:I,get:fe=>Ts(p,fe).orThunk(()=>Ts(u,fe).map(Re=>Re.default)).getOrUndefined(),set:(fe,Re)=>{if(I(fe)){const Ae=u[fe];return Ae.immutable?(console.error(`"${fe}" is an immutable option and cannot be updated`),!1):b(fe,Re,Ae.processor)}else return console.warn(`"${fe}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:fe=>{const Re=I(fe);return Re&&delete p[fe],Re},isSet:fe=>ho(p,fe),debug:()=>{try{console.log(JSON.parse(JSON.stringify(a,(fe,Re)=>we(Re)||Ye(Re)||K(Re)||M(Re)||le(Re)||ie(Re)?Re:Object.prototype.toString.call(Re))))}catch(fe){console.error(fe)}}}},nt=(t,s)=>{t.dom.contentEditable="true"},Tt=(t,s)=>{const a=Me.fromDom(t.getBody());s?(t.readonly=!0,t.hasEditableRoot()&&nt(a),Iz(t)):(t.readonly=!1,GV(t))},xt=t=>t.readonly,jn=t=>{const s=t.undoManager.add();be(s)&&(t.undoManager.undo(),t.undoManager.reset())},dn=t=>Kt(t,s=>s.type==="characterData"||s.type==="childList"),pn=t=>{const s=u=>{xt(t)&&dn(u)&&jn(t)},a=new MutationObserver(s);t.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",u=>{xt(t)&&u.preventDefault()}),t.on("BeforeExecCommand",u=>{(u.command==="Undo"||u.command==="Redo")&&xt(t)&&u.preventDefault()}),t.on("compositionstart",()=>{xt(t)&&a.observe(t.getBody(),{characterData:!0,childList:!0,subtree:!0})}),t.on("compositionend",()=>{if(xt(t)){const u=a.takeRecords();s(u)}a.disconnect()})},an=["design","readonly"],Ro=(t,s,a,u)=>{const p=a[s.get()],b=a[u];try{b.activate()}catch(E){console.error(`problem while activating editor mode ${u}:`,E);return}p.deactivate(),p.editorReadOnly!==b.editorReadOnly&&Tt(t,b.editorReadOnly),s.set(u),g4(t,u)},mo=(t,s,a,u)=>{if(!(u===a.get()||t.initialized&&wa(t))){if(!ho(s,u))throw new Error(`Editor mode '${u}' is invalid`);t.initialized?Ro(t,a,s,u):t.on("init",()=>Ro(t,a,s,u))}},Ns=(t,s,a)=>{if(bt(an,s))throw new Error(`Cannot override default mode ${s}`);return{...t,[s]:{...a,deactivate:()=>{try{a.deactivate()}catch(u){console.error(`problem while deactivating editor mode ${s}:`,u)}}}}},Vo=t=>{const s=fo("design"),a=fo({design:{activate:Ze,deactivate:Ze,editorReadOnly:!1},readonly:{activate:Ze,deactivate:Ze,editorReadOnly:!0}});return pn(t),sse(t),{isReadOnly:()=>xt(t),set:u=>mo(t,a.get(),s,u),get:()=>s.get(),register:(u,p)=>{a.set(Ns(a.get(),u,p))}}},as=yn.each,po=yn.explode,on={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Ln=yn.makeMap("alt,ctrl,shift,meta,access"),Uo=t=>t in Ln,fs=t=>{const s={},a=$s.os.isMacOS()||$s.os.isiOS();as(po(t.toLowerCase(),"+"),b=>{Uo(b)?s[b]=!0:/^[0-9]{2,}$/.test(b)?s.keyCode=parseInt(b,10):(s.charCode=b.charCodeAt(0),s.keyCode=on[b]||b.toUpperCase().charCodeAt(0))});const u=[s.keyCode];let p;for(p in Ln)s[p]?u.push(p):s[p]=!1;return s.id=u.join(","),s.access&&(s.alt=!0,a?s.ctrl=!0:s.shift=!0),s.meta&&(a?s.meta=!0:(s.ctrl=!0,s.meta=!1)),s};class Co{constructor(s){this.shortcuts={},this.pendingPatterns=[],this.editor=s;const a=this;s.on("keyup keypress keydown",u=>{(a.hasModifier(u)||a.isFunctionKey(u))&&!u.isDefaultPrevented()&&(as(a.shortcuts,p=>{a.matchShortcut(u,p)&&(a.pendingPatterns=p.subpatterns.slice(0),u.type==="keydown"&&a.executeShortcutAction(p))}),a.matchShortcut(u,a.pendingPatterns[0])&&(a.pendingPatterns.length===1&&u.type==="keydown"&&a.executeShortcutAction(a.pendingPatterns[0]),a.pendingPatterns.shift()))})}add(s,a,u,p){const b=this,E=b.normalizeCommandFunc(u);return as(po(yn.trim(s)),I=>{const D=b.createShortcut(I,a,E,p);b.shortcuts[D.id]=D}),!0}remove(s){const a=this.createShortcut(s);return this.shortcuts[a.id]?(delete this.shortcuts[a.id],!0):!1}normalizeCommandFunc(s){const a=this,u=s;return typeof u=="string"?()=>{a.editor.execCommand(u,!1,null)}:yn.isArray(u)?()=>{a.editor.execCommand(u[0],u[1],u[2])}:u}createShortcut(s,a,u,p){const b=yn.map(po(s,">"),fs);return b[b.length-1]=yn.extend(b[b.length-1],{func:u,scope:p||this.editor}),yn.extend(b[0],{desc:this.editor.translate(a),subpatterns:b.slice(1)})}hasModifier(s){return s.altKey||s.ctrlKey||s.metaKey}isFunctionKey(s){return s.type==="keydown"&&s.keyCode>=112&&s.keyCode<=123}matchShortcut(s,a){return!a||a.ctrl!==s.ctrlKey||a.meta!==s.metaKey||a.alt!==s.altKey||a.shift!==s.shiftKey?!1:s.keyCode===a.keyCode||s.charCode&&s.charCode===a.charCode?(s.preventDefault(),!0):!1}executeShortcutAction(s){return s.func?s.func.call(s.scope):null}}const us=()=>{const t=Xae();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,addContext:t.addContext,getAll:t.getAll}},ar=Ir.DOM,nr=yn.extend,Uu=yn.each;class ti{constructor(s,a,u){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=u,nr(this,Q);const p=this;this.id=s,this.editorUid=nu(),this.hidden=!1;const b=HK(u.defaultOptions,a);this.options=Je(p,b,a),TS(p),this.userLookup=Ede(this);const E=this.options.get;E("deprecation_warnings")&&Cne(a,b);const I=E("suffix");I&&(u.suffix=I),this.suffix=u.suffix;const D=E("base_url");D&&u._setBaseUrl(D),this.baseUri=u.baseURI;const $=nO(p);$&&(Ba.ScriptLoader._setReferrerPolicy($),Ir.DOM.styleSheetLoader._setReferrerPolicy($)),Ba.ScriptLoader._setCrossOrigin(fe=>RS(p)(fe,"script")),Ir.DOM.styleSheetLoader._setCrossOrigin(fe=>RS(p)(fe,"stylesheet"));const J=PS(p);be(J)&&Ir.DOM.styleSheetLoader._setContentCssCors(J),pl.languageLoad=E("language_load"),pl.baseURL=u.baseURL,this.setDirty(!1),this.documentBaseURI=new bu(OS(p),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=A_(p),this.hasVisual=Ng(p),this.shortcuts=new Co(this),this.editorCommands=new aZ(this),Wde(this);const te=E("cache_suffix");te&&($s.cacheSuffix=te.replace(/^[\?\&]+/,"")),this.ui={registry:us(),styleSheetLoader:void 0,show:Ze,hide:Ze,setEnabled:Ze,isEnabled:Jt},this.mode=Vo(p),Object.defineProperty(this,"editorUid",{writable:!1,configurable:!1,enumerable:!0}),u.dispatch("SetupEditor",{editor:this});const re=bD(p);me(re)&&re.call(p,p)}render(){mde(this)}focus(s){this.execCommand("mceFocus",!1,s)}hasFocus(){return QS(this)}translate(s){return Rp.translate(s)}getParam(s,a,u){const p=this.options;return p.isRegistered(s)||(be(u)?p.register(s,{processor:u,default:a}):p.register(s,{processor:Jt,default:a})),!p.isSet(s)&&!Ne(a)?a:p.get(s)}hasPlugin(s,a){return bt(Qb(this),s)?a?jv.get(s)!==void 0:!0:!1}nodeChanged(s){this._nodeChangeDispatcher.nodeChanged(s)}addCommand(s,a,u){this.editorCommands.addCommand(s,a,u)}addQueryStateHandler(s,a,u){this.editorCommands.addQueryStateHandler(s,a,u)}addQueryValueHandler(s,a,u){this.editorCommands.addQueryValueHandler(s,a,u)}addShortcut(s,a,u,p){this.shortcuts.add(s,a,u,p)}execCommand(s,a,u,p){return this.editorCommands.execCommand(s,a,u,p)}queryCommandState(s){return this.editorCommands.queryCommandState(s)}queryCommandValue(s){return this.editorCommands.queryCommandValue(s)}queryCommandSupported(s){return this.editorCommands.queryCommandSupported(s)}show(){const s=this;s.hidden&&(s.hidden=!1,s.inline?s.getBody().contentEditable="true":(ar.show(s.getContainer()),ar.hide(s.id)),s.load(),s.dispatch("show"))}hide(){const s=this;s.hidden||(s.save(),s.inline?(s.getBody().contentEditable="false",s===s.editorManager.focusedEditor&&(s.editorManager.focusedEditor=null)):(ar.hide(s.getContainer()),ar.setStyle(s.id,"display",s.orgDisplay)),s.hidden=!0,s.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(s,a){this.dispatch("ProgressState",{state:s,time:a})}load(s={}){const a=this,u=a.getElement();if(!a.removed&&u){const p={...s,load:!0},b=pT(u)?u.value:u.innerHTML;a.setContent(b,p),p.no_events||a.dispatch("LoadContent",{...p,element:u})}}save(s={}){const a=this;let u=a.getElement();if(!u||!a.initialized||a.removed)return"";const p={...s,save:!0,element:u};let b=a.getContent(p);const E={...p,content:b};if(E.no_events||a.dispatch("SaveContent",E),E.format==="raw"&&a.dispatch("RawSaveContent",E),b=E.content,pT(u))u.value=b;else{(s.is_removing||!a.inline)&&(u.innerHTML=b);const I=ar.getParent(a.id,"form");I&&Uu(I.elements,D=>D.name===a.id?(D.value=b,!1):!0)}return E.element=p.element=u=null,E.set_dirty!==!1&&a.setDirty(!1),b}setContent(s,a){SI(this,s,a)}getContent(s){return gz(this,s)}insertContent(s,a){a&&(s=nr({content:s},a)),this.execCommand("mceInsertContent",!1,s)}resetContent(s){s===void 0?SI(this,this.startContent,{initial:!0,format:"raw"}):SI(this,s,{initial:!0}),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(s){const a=!this.isNotDirty;this.isNotDirty=!s,s&&s!==a&&this.dispatch("dirty")}getContainer(){const s=this;return s.container||(s.container=s.editorContainer||ar.get(s.id+"_parent")),s.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=ar.get(this.id)),this.targetElm}getWin(){const s=this;if(!s.contentWindow){const a=s.iframeElement;a&&(s.contentWindow=a.contentWindow)}return s.contentWindow}getDoc(){const s=this;if(!s.contentDocument){const a=s.getWin();a&&(s.contentDocument=a.document)}return s.contentDocument}getBody(){var s,a;const u=this.getDoc();return(a=(s=this.bodyElement)!==null&&s!==void 0?s:u==null?void 0:u.body)!==null&&a!==void 0?a:null}convertURL(s,a,u){const p=this,b=p.options.get,E=SD(p);if(me(E))return E.call(p,s,u,!0,a);if(!b("convert_urls")||u==="link"||se(u)&&u.nodeName==="LINK"||s.indexOf("file:")===0||s.length===0)return s;const I=new bu(s);return I.protocol!=="http"&&I.protocol!=="https"&&I.protocol!==""?s:b("relative_urls")?p.documentBaseURI.toRelative(s):(s=p.documentBaseURI.toAbsolute(s,b("remove_script_host")),s)}addVisual(s){FK(this,s)}setEditableRoot(s){_de(this,s)}hasEditableRoot(){return wde(this)}remove(){vz(this)}destroy(s){bz(this,s)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const ml=Ir.DOM,Ya=yn.each;let bd=!1,Su,ia=[];const Zv=t=>{const s=t.type;Ya(Yv.get(),a=>{switch(s){case"scroll":a.dispatch("ScrollWindow",t);break;case"resize":a.dispatch("ResizeWindow",t);break}})},$h=t=>{if(t!==bd){const s=Ir.DOM;t?(s.bind(window,"resize",Zv),s.bind(window,"scroll",Zv)):(s.unbind(window,"resize",Zv),s.unbind(window,"scroll",Zv)),bd=t}},NC=t=>{const s=ia;return ia=Oe(ia,a=>t!==a),Yv.activeEditor===t&&(Yv.activeEditor=ia.length>0?ia[0]:null),Yv.focusedEditor===t&&(Yv.focusedEditor=null),s.length!==ia.length},I0=t=>{t&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(NC(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0)},CR=document.compatMode!=="CSS1Compat",Yv={...m,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,pageUid:nu(),majorVersion:"8",minorVersion:"1.2",releaseDate:"TBD",i18n:Rp,activeEditor:null,focusedEditor:null,setup(){const t=this;let s="",a="",u=bu.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(u)&&(u=u.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(u)||(u+="/"));const p=window.tinymce||window.tinyMCEPreInit;if(p)s=p.base||p.baseURL,a=p.suffix;else{const b=document.getElementsByTagName("script");for(let E=0;E<b.length;E++){const I=b[E].src||"";if(I==="")continue;const D=I.substring(I.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(I)){D.indexOf(".min")!==-1&&(a=".min"),s=I.substring(0,I.lastIndexOf("/"));break}}if(!s&&document.currentScript){const E=document.currentScript.src;E.indexOf(".min")!==-1&&(a=".min"),s=E.substring(0,E.lastIndexOf("/"))}}t.baseURL=new bu(u).toAbsolute(s),t.documentBaseURL=u,t.baseURI=new bu(t.baseURL),t.suffix=a,GQ(t),Ue(["majorVersion","minorVersion","releaseDate","pageUid","_addLicenseKeyManager"],b=>Object.defineProperty(t,b,{writable:!1,configurable:!1,enumerable:!0}))},overrideDefaults(t){const s=t.base_url;s&&this._setBaseUrl(s);const a=t.suffix;a&&(this.suffix=a),this.defaultOptions=t;const u=t.plugin_base_urls;u!==void 0&&wn(u,(p,b)=>{pl.PluginManager.urls[b]=p})},init(t){const s=this;let a;const u=yn.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),p=(J,te)=>J.inline&&te.tagName.toLowerCase()in u,b=J=>{let te=J.id;return te||(te=Ts(J,"name").filter(re=>!ml.get(re)).getOrThunk(ml.uniqueId),J.setAttribute("id",te)),te},E=J=>{const te=t[J];if(te)return te.apply(s,[])},I=J=>$s.browser.isIE()||$s.browser.isEdge()?(n1("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/8/support/#supportedwebbrowsers"),[]):CR?(n1("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):K(J.selector)?ml.select(J.selector):be(J.target)?[J.target]:[];let D=J=>{a=J};const $=()=>{let J=0;const te=[];let re;const fe=(Re,Ae,_e)=>{const Qe=new ti(Re,Ae,s);te.push(Qe),Qe.on("init",()=>{++J===re.length&&D(te)}),Qe.targetElm=Qe.targetElm||_e,Qe.render()};ml.unbind(window,"ready",$),E("onpageload"),re=lo(I(t)),yn.each(re,Re=>{I0(s.get(Re.id))}),re=yn.grep(re,Re=>!s.get(Re.id)),re.length===0?D([]):Ya(re,Re=>{p(t,Re)?n1("Could not initialize inline editor on invalid inline target element",Re):fe(b(Re),t,Re)})};return ml.bind(window,"ready",$),new Promise(J=>{a?J(a):D=te=>{J(te)}})},get(t){return arguments.length===0?ia.slice(0):K(t)?gt(ia,s=>s.id===t).getOr(null):Ye(t)&&ia[t]?ia[t]:null},add(t){const s=this,a=s.get(t.id);return a===t||(a===null&&ia.push(t),$h(!0),s.activeEditor=t,s.dispatch("AddEditor",{editor:t}),Su||(Su=u=>{const p=s.dispatch("BeforeUnload");if(p.returnValue)return u.preventDefault(),u.returnValue=p.returnValue,p.returnValue},window.addEventListener("beforeunload",Su))),t},createEditor(t,s){return this.add(new ti(t,s,this))},remove(t){const s=this;let a;if(!t){for(let u=ia.length-1;u>=0;u--)s.remove(ia[u]);return}if(K(t)){Ya(ml.select(t),u=>{a=s.get(u.id),a&&s.remove(a)});return}return a=t,M(s.get(a.id))?null:(NC(a)&&s.dispatch("RemoveEditor",{editor:a}),ia.length===0&&window.removeEventListener("beforeunload",Su),a.remove(),$h(ia.length>0),a)},execCommand(t,s,a){var u;const p=this,b=se(a)?(u=a.id)!==null&&u!==void 0?u:a.index:a;switch(t){case"mceAddEditor":{if(!p.get(b)){const E=a.options;new ti(b,E,p).render()}return!0}case"mceRemoveEditor":{const E=p.get(b);return E&&E.remove(),!0}case"mceToggleEditor":{const E=p.get(b);return E?(E.isHidden()?E.show():E.hide(),!0):(p.execCommand("mceAddEditor",!1,a),!0)}}return p.activeEditor?p.activeEditor.execCommand(t,s,a):!1},triggerSave:()=>{Ya(ia,t=>{t.save()})},addI18n:(t,s)=>{Rp.add(t,s)},translate:t=>Rp.translate(t),setActive(t){const s=this.activeEditor;this.activeEditor!==t&&(s&&s.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:s})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new bu(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new bu(this.baseURL)},_addLicenseKeyManager:t=>bM.add(t)};Yv.setup();const tP=(()=>{const t=yc(),s=b=>({items:b,types:Vt(b),getType:E=>Ts(b,E).getOrUndefined()}),a=b=>{t.set(b)},u=()=>t.get().getOrUndefined(),p=t.clear;return{FakeClipboardItem:s,write:a,read:u,clear:p}})(),_R=Math.min,PC=Math.max,wR=Math.round,cZ=(t,s,a)=>{let u=s.x,p=s.y;const b=t.w,E=t.h,I=s.w,D=s.h,$=(a||"").split("");return $[0]==="b"&&(p+=D),$[1]==="r"&&(u+=I),$[0]==="c"&&(p+=wR(D/2)),$[1]==="c"&&(u+=wR(I/2)),$[3]==="b"&&(p-=E),$[4]==="r"&&(u-=b),$[3]==="c"&&(p-=wR(E/2)),$[4]==="c"&&(u-=wR(b/2)),LC(u,p,b,E)},Z$=(t,s,a,u)=>{for(let p=0;p<u.length;p++){const b=cZ(t,s,u[p]);if(b.x>=a.x&&b.x+b.w<=a.w+a.x&&b.y>=a.y&&b.y+b.h<=a.h+a.y)return u[p]}return null},AR=(t,s,a)=>LC(t.x-s,t.y-a,t.w+s*2,t.h+a*2),$w=(t,s)=>{const a=PC(t.x,s.x),u=PC(t.y,s.y),p=_R(t.x+t.w,s.x+s.w),b=_R(t.y+t.h,s.y+s.h);return p-a<0||b-u<0?null:LC(a,u,p-a,b-u)},Uw=(t,s,a)=>{let u=t.x,p=t.y,b=t.x+t.w,E=t.y+t.h;const I=s.x+s.w,D=s.y+s.h,$=PC(0,s.x-u),J=PC(0,s.y-p),te=PC(0,b-I),re=PC(0,E-D);return u+=$,p+=J,a&&(b+=$,E+=J,u-=te,p-=re),b-=te,E-=re,LC(u,p,b-u,E-p)},LC=(t,s,a,u)=>({x:t,y:s,w:a,h:u}),lZ={inflate:AR,relativePosition:cZ,findBestRelativePosition:Z$,intersect:$w,clamp:Uw,create:LC,fromClientRect:t=>LC(t.left,t.top,t.width,t.height)},Y$=(t,s,a=1e3)=>{let u=!1,p=null;const b=$=>(...J)=>{u||(u=!0,p!==null&&(window.clearTimeout(p),p=null),$.apply(null,J))},E=b(t),I=b(s);return{start:(...$)=>{!u&&p===null&&(p=window.setTimeout(()=>I.apply(null,$),a))},resolve:E,reject:I}},nP=(()=>{const t={},s={},a={};return{load:(D,$)=>{const J=`Script at URL "${$}" failed to load`,te=`Script at URL "${$}" did not call \`tinymce.Resource.add('${D}', data)\` within 1 second`;if(t[D]!==void 0)return t[D];{const re=new Promise((fe,Re)=>{const Ae=Y$(fe,Re);s[D]=Ae.resolve,Ba.ScriptLoader.loadScript($).then(()=>Ae.start(te),()=>Ae.reject(J))});return t[D]=re,re}},add:(D,$)=>{s[D]!==void 0&&(s[D]($),delete s[D]),t[D]=Promise.resolve($),a[D]=$},has:D=>D in a,get:D=>a[D],unload:D=>{delete t[D],delete a[D]}}})(),oP=()=>(()=>{let t={},s=[];const a={getItem:u=>{const p=t[u];return p||null},setItem:(u,p)=>{s.push(u),t[u]=String(p)},key:u=>s[u],removeItem:u=>{s=s.filter(p=>p===u),delete t[u]},clear:()=>{s=[],t={}},length:0};return Object.defineProperty(a,"length",{get:()=>s.length,configurable:!1,enumerable:!1}),a})();let Uh;try{const t="__storage_test__";Uh=window.localStorage,Uh.setItem(t,t),Uh.removeItem(t)}catch{Uh=oP()}var jw=Uh;const J$={geom:{Rect:lZ},util:{Delay:kh,Tools:yn,VK:qn,URI:bu,EventDispatcher:c,Observable:m,I18n:Rp,LocalStorage:jw,ImageUploader:use},dom:{EventUtils:Ip,TreeWalker:Kr,TextSeeker:Ch,DOMUtils:Ir,ScriptLoader:Ba,RangeUtils:Fg,Serializer:lM,StyleSheetLoader:Nu,ControlSelection:V6,BookmarkManager:Bm,Selection:iM,Event:Ip.Event},html:{Styles:Hb,Entities:Db,Node:Fu,Schema:Op,DomParser:g0,Writer:hee,Serializer:jy},Env:$s,AddOnManager:pl,Annotator:tk,Formatter:fw,UndoManager:AI,EditorCommands:aZ,WindowManager:pM,NotificationManager:BV,EditorObservable:Q,Shortcuts:Co,Editor:ti,FocusManager:sk,EditorManager:Yv,DOM:Ir.DOM,ScriptLoader:Ba.ScriptLoader,PluginManager:jv,ThemeManager:fC,ModelManager:Ph,IconManager:uM,Resource:nP,FakeClipboard:tP,trim:yn.trim,isArray:yn.isArray,is:yn.is,toArray:yn.toArray,makeMap:yn.makeMap,each:yn.each,map:yn.map,grep:yn.grep,inArray:yn.inArray,extend:yn.extend,walk:yn.walk,resolve:yn.resolve,explode:yn.explode,_addCacheSuffix:yn._addCacheSuffix},sP=yn.extend(Yv,J$),Zde=t=>{try{e.exports=t}catch{}};(t=>{window.tinymce=t,window.tinyMCE=t})(sP),Zde(sP)})()})($pe)),$pe.exports}var Ize=Oze();const Rze=HRe(Ize);var xTe={},DTe={},kTe;function xze(){return kTe||(kTe=1,tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12.7 18.3a1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7 1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7v-1a1 1 0 0 0-.3-.7ZM11.3 5.7a1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3A1 1 0 0 0 13 5V4a1 1 0 0 0-.3-.7A1 1 0 0 0 12 3a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7Zm9.4 5.6a1 1 0 0 0-.7-.3h-1a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7Zm-15 1.4A1 1 0 0 0 6 12a1 1 0 0 0-.3-.7A1 1 0 0 0 5 11H4a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3Zm13 4.6-.7-.8a1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.8l.7.7a1 1 0 0 0 .7.3 1 1 0 0 0 .8-.3 1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7ZM5.3 6.7l.7.8a1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.8l-.7-.7A1 1 0 0 0 6 5a1 1 0 0 0-.8.3 1 1 0 0 0-.3.8 1 1 0 0 0 .3.6Zm12 1a1 1 0 0 0 .7-.2l.7-.7A1 1 0 0 0 19 6a1 1 0 0 0-.3-.8 1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3l-.7.7a1 1 0 0 0-.3.8 1 1 0 0 0 .3.7 1 1 0 0 0 .7.2ZM6.7 16.4a1 1 0 0 0-.8.2l-.7.7a1 1 0 0 0-.3.7 1 1 0 0 0 .3.8 1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3l.7-.7a1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3Z"/><path fill-rule="evenodd" d="M13.6 8.3A4 4 0 0 0 12 8a4 4 0 0 0-1.6.3A4 4 0 0 0 9 9.5a4 4 0 0 0-.6 1A4 4 0 0 0 8 12c0 .6.1 1 .3 1.6a4 4 0 0 0 2.1 2 4 4 0 0 0 1.6.4 4 4 0 0 0 1.6-.3 4 4 0 0 0 2-2.1A4 4 0 0 0 16 12a4 4 0 0 0-.3-1.6 4 4 0 0 0-2.1-2ZM14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',"checkmark-filled":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20Zm4.8 5a1 1 0 0 0-1.4.3l-5.4 8-2-2.1a1 1 0 1 0-1.5 1.4l3 3a1 1 0 0 0 1.5-.2l6-9a1 1 0 0 0-.2-1.4Z"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',"close-filled":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20Zm4.7 5.3a1 1 0 0 0-1.3 0L12 10.6 8.6 7.3a1 1 0 0 0-1.3 1.3l3.3 3.4-3.3 3.4a1 1 0 0 0 1.3 1.3l3.4-3.3 3.4 3.3a1 1 0 0 0 1.3-1.3L13.4 12l3.3-3.4a1 1 0 0 0 0-1.3Z"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24" class="color-swatch-remove-color"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 0 1 19.4 9c.4 1 .6 2 .6 3.1s-.2 2.1-.6 3.1a8 8 0 0 1-1.7 2.6 8 8 0 0 1-2.6 1.7 7.8 7.8 0 0 1-3.1.6 7.8 7.8 0 0 1-3.1-.6 8 8 0 0 1-2.6-1.7A8 8 0 0 1 4.6 15 7.8 7.8 0 0 1 4 12c0-1.1.2-2.1.6-3.1a8 8 0 0 1 1.7-2.6A8 8 0 0 1 9 4.6 7.8 7.8 0 0 1 12 4Zm-6 8a6 6 0 0 0 1.8 4.2 6 6 0 0 0 1.9 1.3 5.8 5.8 0 0 0 2.3.5V6c-.8 0-1.6.2-2.3.5a6 6 0 0 0-2 1.3 6 6 0 0 0-1.2 1.9A5.8 5.8 0 0 0 6 12Z"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-gear-properties":'<svg height="24" width="24"><path d="M17.3 14.5a7.1 7.1 0 0 1 1.2.6l1.5-.5 1 1.8-1.2 1V18.7l1.2 1-1 1.6-1.5-.4a4.5 4.5 0 0 1-.6.3 7.1 7.1 0 0 1-.6.3L17 23h-2l-.3-1.5a7.4 7.4 0 0 1-.6-.3 4.5 4.5 0 0 1-.6-.3l-1.5.5-1-1.8 1.2-1a3.9 3.9 0 0 1 0-.6v-.7l-1.2-1 1-1.6 1.5.4a4.5 4.5 0 0 1 1.2-.6L15 13h2zM16 16a2 2 0 0 0-1.5.6A1.9 1.9 0 0 0 14 18c0 .6.2 1 .6 1.4s1 .6 1.5.6 1-.2 1.5-.6.6-.8.6-1.4-.2-1-.6-1.4A2 2 0 0 0 16 16z" fill-rule="evenodd"/><path d="M19 7.6V12h-2V9h-4V5H7v14h3v2H7a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h7.4z"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',feedback:'<svg width="24" height="24"><path fill-rule="evenodd" d="M16 6c1 0 2 1 2 2v5c0 1-1 2-2 2h-3l-4 3v-3H8c-1 0-2-1-2-2V8c0-1 1-2 2-2h8Zm-7 5v1h4v-1H9Zm0-2v1h6V9H9Z"/></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg height="24" width="24"><path d="M11.5 16.3a.7.7 0 1 0 1.4 0V14l2.7-6a.7.7 0 1 0-1.2-.6l-2.2 5-2.3-4.9C9.6 7 8.7 7 8 7.2v1.1c.8-.2.9 0 1.2 1l2.3 4.7z"/><path d="M4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm1 2h14v14H5z" fill-rule="evenodd"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg height="24" width="24"><path d="M5 4 3.6 5.4l3.9 4C6.6 10.7 6 12.3 6 14a6 6 0 0 0 10.3 4.2l1.9 1.8 1.4-1.4z" fill-rule="evenodd"/><path d="M13.4 8.4c.9 1 1.6 2.1 2 3.2l2.6 2.6V14c0-5-6-10-6-10s-1 .8-2.1 2l1.4 1.5.7-.7 1.4 1.6z"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg height="48" width="48"><path d="M8 14a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 34a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-default":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M12 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M16 31h6v6h-6z"/><path d="M16 31h6v6h-6z"/><path d="M18 12h22v4H18zm4 10h18v4H22zm4 10h14v4H26z" opacity=".2"/></svg>',"list-bull-disc":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-square":'<svg height="48" width="48"><path d="M8 21h6v6H8zm0 10h6v6H8zm0-20h6v6H8z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path fill-rule="evenodd" d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',"suggestededits-badge":'<svg height="24" width="24"><path d="M11 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V9.7a6 6 0 0 1-2 .3v9H7V5h4a6 6 0 0 1 0-2z"/><path d="M15 13v-2h-4v2zm-3 2H9v2h3zm-1-8H9v2h2zm4 10v-2h-2v2z"/><path d="M21 4a4 4 0 1 1-8 0 4 4 0 0 1 8 0z" class="tox-icon--badge"/></svg>',suggestededits:'<svg width="24" height="24"><path d="M7 3h7.4L19 7.6V19a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2Zm0 16h10V9h-3V5H7v14Z" clip-rule="evenodd"/><path d="M9 7h2v2H9V7Zm2 4h4v2h-4v-2Zm-2 4h3v2H9v-2Z"/><path d="M9 7h2v2H9V7Zm4 8h2v2h-2v-2Z"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',"add-file":'<svg height="24" width="24"><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/></svg>',adjustments:'<svg width="24" height="24"><path d="M16 11a3 3 0 1 1 2.8-4H21v2h-2.2a3 3 0 0 1-2.8 2Zm0-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM3 9h8V7H3v2Zm5 10a3 3 0 1 0-2.8-4H3v2h2.2A3 3 0 0 0 8 19Zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13 0h-8v-2h8v2Z"/></svg>',"alt-text":'<svg width="24" height="24"><path d="M3 20a2 2 0 0 1-1.4-.6A2 2 0 0 1 1 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 3 4h18c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H3Zm0-2h18V6H3v12Zm1.5-3H6v-1.5h1.5V15H9v-5a1 1 0 0 0-.3-.7A1 1 0 0 0 8 9H5.5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v5ZM6 12v-1.5h1.5V12H6Z"/><path d="M11 15V9h1.3v4.5h2V15H11Zm5.8-4.5V15h1.4v-4.5h1.3V9h-4v1.5h1.3Z"/></svg>',"auto-image-enhancement":'<svg width="24" height="24"><path d="M7.7 10.6a5.8 5.8 0 0 0 5.7 5.7A5.8 5.8 0 0 0 7.7 22 5.8 5.8 0 0 0 2 16.3a5.8 5.8 0 0 0 5.7-5.7ZM15.5 2c.3 3 3.3 6 6.5 6.4-3.2.5-6.2 3.4-6.5 6.5-.3-3.4-3-6-6.4-6.5 3.3-.5 6.1-3 6.4-6.4Z"/></svg>',blur:'<svg width="24" height="24"><path d="M19.3 9.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 20 9a1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 10a1 1 0 0 0-.3-.7A1 1 0 0 0 4 9a1 1 0 0 0-.7.3Zm16 6a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 16a1 1 0 0 0-.3-.7A1 1 0 0 0 4 15a1 1 0 0 0-.7.3Zm5-11A1 1 0 0 0 8 5a1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 10 5a1 1 0 0 0-.3-.7A1 1 0 0 0 9 4a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7 1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 16 5a1 1 0 0 0-.3-.7A1 1 0 0 0 15 4a1 1 0 0 0-.7.3Zm-6 16a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 9 20a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3ZM7.6 8.6A2 2 0 0 0 7 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 7 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 14a2 2 0 0 0-1.4.6Zm6-6A2 2 0 0 0 13 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 13 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 14a2 2 0 0 0-1.4.6Z"/></svg>',box:'<svg width="24" height="24"><path d="M3.8 7a1 1 0 0 0-.7.6l-.1 3V13.8a3.5 3.5 0 0 0 4 2.7c.8-.2 1.4-.5 2-1l.3-.3.3.2c.7.7 1.4 1 2.4 1.1 1.2 0 2.4-.6 3-1.6.9-1.2.8-2.8 0-4a3.7 3.7 0 0 0-2-1.2c-.4-.1-1.2-.1-1.6 0a3.4 3.4 0 0 0-1.7 1l-.3.2-.2-.1c-.4-.5-1.2-1-2-1.1-.6-.2-1.5 0-2 .2H5V9c0-1.3 0-1.3-.3-1.6a1 1 0 0 0-1-.3Zm12 2.6c-.3.2-.5.4-.6.8v.6l.9 1 .7 1v.1l-.8 1-.7 1a1 1 0 0 0 0 .7 1 1 0 0 0 1.3.6c.2 0 .3-.2 1-1l.5-.7.6.8.7.8c.4.3 1 .3 1.3 0l.2-.3a1 1 0 0 0 0-.8l-.8-1.2-.7-1a26 26 0 0 0 1.5-2 .8.8 0 0 0 .1-.4c0-.4-.1-.7-.5-.9H20c-.4 0-.5 0-1.2.8l-.7.8-.6-.7-.7-.9a1 1 0 0 0-1 0Zm-9 2 .4.1c.3.1.6.5.7.8l.1.6v.6c-.6 1-2 1.2-2.7.3-.3-.3-.3-.5-.3-1v-.5c.3-.5.7-.8 1.1-1a1.5 1.5 0 0 1 .7 0Zm5.7 0c.4 0 .8.4 1 .8l.2.6-.1.7c-.5.9-1.6 1.1-2.4.6a1.4 1.4 0 0 1-.6-1.1 1.4 1.4 0 0 1 .5-1.2 1.5 1.5 0 0 1 1.4-.4Z"/></svg>',camera:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 5.4a1 1 0 0 1 .8-.4h4.4a1 1 0 0 1 .8.4l1.2 1.8h2.3A2.5 2.5 0 0 1 22 9.6v8a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 4 17.6v-8a2.5 2.5 0 0 1 2.5-2.4h2.3zM11.4 7l-1.2 1.7a1 1 0 0 1-.8.5h-3a.5.5 0 0 0-.4.4v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.4h-2.9a1 1 0 0 1-.8-.5L14.6 7z"/><path d="M13 11.4a2 2 0 1 0 0 3.8 2 2 0 0 0 0-3.8zm-4 1.9a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/></g></svg>',caption:'<svg height="24" width="24"><path d="M6 16h8v-2H6zm10 0h2v-2h-2zM4 20a2 2 0 0 1-1.5-.6A2 2 0 0 1 2 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 4 4h16c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm0-2h16V6H4z"/></svg>',dropbox:'<svg height="24" width="24"><path clip-rule="evenodd" d="m6.4 9.3-3-2a1 1 0 0 1 0-1.6l4-2.5a1 1 0 0 1 1 0L12 5.5l3.6-2.3a1 1 0 0 1 1 0l4 2.5a1 1 0 0 1 0 1.7l-3 1.9 3 1.9a1 1 0 0 1 0 1.6l-2.9 1.9V16c0 .3-.1.6-.4.8l-4.5 3a1 1 0 0 1-1.2 0l-4.4-3a1 1 0 0 1-.5-.9v-1l-3.2-2.2a1 1 0 0 1 0-1.6zm3 0L12 7.5l2.6 1.8L12 11zM8.9 15v.4l3.3 2.3 3.4-2.3v-.2L12 13l-3.1 2zm-1-10-2 1.4 2 1.3 2-1.3zm8.2 0-2 1.4 2 1.3 2-1.3zm-2 6.9 2-1.3 2 1.3-2 1.3-2-1.3zm-8.3 0 2-1.3L10 12l-2 1.3-2-1.3z" fill-rule="evenodd"/></svg>',evernote:'<svg width="24" height="24"><path fill-rule="evenodd" d="m9.5 3-.3.1-2.6 2.6C3.8 8.5 4 8.2 4 8.7c0 1.3.3 3 .6 4.3.5 2 1.1 3.2 2 3.7l1.2.3c1 .2 1.5.2 2.2.2 1.3 0 1.7 0 2.2-.4.3-.2.3-.4.4-1a38.4 38.4 0 0 1 .3-.4l.3.1 1.8.1h1.6v-1.8H14l-.1-.2a6.8 6.8 0 0 1-.5-1c-.2-.4-.3-.6-.5-.7a.8.8 0 0 0-.5-.1.9.9 0 0 0-.8.5l-.4 1.6-.3 1.5H9.4l-2-.3a1 1 0 0 1-.1-.2A10.1 10.1 0 0 1 6 9.7v-.2h4l.5-.5V5H12c.4.2.7.7.8 1.1a1 1 0 0 0 .2.6c.2.2.3.2 1 .3 1.2 0 2 .2 2.5.6.4.2.8.7 1 1.2.3 1.2.5 4 .3 6.4 0 1.8-.4 3.4-.8 4h-.7a8 8 0 0 1-.8 0c-.2 0-.3-.3-.2-.5a.5.5 0 0 1 .4-.3h.9v-1.8H16c-.7 0-.9 0-1.2.2-.9.4-1.4 1.2-1.4 2.1l.1.4.1.2a1 1 0 0 1 .1.2c.3.7.8 1.2 1.4 1.3l1.2.1h1.2a2 2 0 0 0 1-.8 9 9 0 0 0 1.1-4.3c.2-3 0-6.3-.4-7.7A4.3 4.3 0 0 0 16 5.3a7 7 0 0 0-1.3-.2 7.2 7.2 0 0 1-.4 0 5.5 5.5 0 0 1 0-.3c-.2-.5-.6-1-1.2-1.4a3 3 0 0 0-.5-.2c-.4-.2-.5-.2-1.8-.2a26.5 26.5 0 0 0-1.3 0Zm-.8 4v.7H7.2l.7-.8.8-.7v.7Zm7 3.5c-.4 0-.7.5-.9 1v.7h.3c.7 0 1.1.2 1.5.6l.3.2.3-.6V11a1 1 0 0 0-.6-.4 2 2 0 0 0-.8 0Z" clip-rule="evenodd"/></svg>',exposure:'<svg width="24" height="24"><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H5Zm0-2h14V5L5 19Zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2h-1.5ZM6 8.5h5V7H6v1.5Z"/></svg>',fb:'<svg width="24" height="24"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11 6.7V14H8.1v-2.5h2v-1C10 8.2 11.5 7 12.8 7H16v2.5h-2.4c-.8 0-1 .7-1 1.3v.7h3.2l-1 2.5h-2v5a7 7 0 1 0-2.8-.2Z" clip-rule="evenodd"/></svg>',flickr:'<svg width="24" height="24"><path d="M8.2 15.3c1.7 0 3.1-1.4 3.1-3.1A3.2 3.2 0 0 0 8.1 9 3.2 3.2 0 0 0 5 12.2c0 1.7 1.4 3 3.2 3Zm7.6 0c1.7 0 3.2-1.4 3.2-3.1a3.2 3.2 0 0 0-6.3 0c0 1.7 1.4 3 3.1 3Z"/></svg>',folder:'<svg width="24" height="24"><path fill-rule="evenodd" d="M5.6 6a.6.6 0 0 0-.6.6v11.2a.6.6 0 0 0 .6.6h12.8a.6.6 0 0 0 .6-.6V9a.6.6 0 0 0-.6-.6h-7.2a1 1 0 0 1-.8-.4L9 6H5.6ZM3.8 4.8A2.6 2.6 0 0 1 5.6 4h4a1 1 0 0 1 .8.4l1.3 2h6.7A2.6 2.6 0 0 1 21 9v8.8a2.6 2.6 0 0 1-2.6 2.6H5.6A2.6 2.6 0 0 1 3 17.8V6.6c0-.7.3-1.4.8-1.8Z" clip-rule="evenodd"/></svg>',"google-drive":'<svg height="24" width="24"><path clip-rule="evenodd" d="M8.7 4.5a1 1 0 0 1 .9-.5h4.8a1 1 0 0 1 .9.5l5.6 9.7a1 1 0 0 1 0 1l-2.4 4.2a1 1 0 0 1-.9.5H6.4a1 1 0 0 1-.9-.5l-2.4-4.2a1 1 0 0 1 0-1zM10.2 6l-4.5 7.7h2.5L12.7 6h-2.5zm4.2 1 4.4 7.7-1.2 2.2-4.4-7.7zM12 11.2l-1.5 2.5h3zm2.6 4.5H5.7L7 17.9h8.9l-1.3-2.2z" fill-rule="evenodd"/></svg>',"google-photos":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12.4 3c-.8 0-1.4.7-1.4 1.4v3.2a5 5 0 0 0-8 4c0 .8.6 1.4 1.4 1.4h3.2a5 5 0 0 0-1 3 5 5 0 0 0 5 5c.8 0 1.4-.6 1.4-1.4v-3.2a5 5 0 0 0 8-4c0-.8-.7-1.4-1.4-1.4h-3.2a5 5 0 0 0-4-8Zm.6 8V5a3 3 0 0 1 2.4 3 3 3 0 0 1-2.4 3Zm-2 0H5a3 3 0 0 1 3-2.4 3 3 0 0 1 3 2.4Zm2 2a3 3 0 0 0 3 2.4 3 3 0 0 0 3-2.4h-6Zm-4.4 3a3 3 0 0 1 2.4-3v6a3 3 0 0 1-2.4-3Z" clip-rule="evenodd"/></svg>',grayscale:'<svg height="24" width="24"><path d="M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm12.4 0H19v3.6zm-2.8 0h-2.2l8.6 8.6v-2.2zm-5 0H5l14 14v-2.6z" fill-rule="evenodd"/></svg>',huddle:'<svg height="24" width="24"><path d="M10.3 5.6V8h.8v-2l3.5 2 4.3-2.5L14.6 3l-4.3 2.6zM14.6 8v5.2l4.3-2.6V5.6L14.6 8zM6 13.3v2.5h.9v-2l3.4 2 4.3-2.5-4.3-2.6zm4.3 2.6V21l4.3-2.6v-5.1l-4.3 2.6z"/></svg>',"image-decorative":'<svg width="24" height="24"><path d="M12 10c.3 0 .5-.1.7-.3A1 1 0 0 0 13 9a1 1 0 0 0-.3-.7A1 1 0 0 0 12 8a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 1 1Zm0 6a3 3 0 0 1-1.8-.5A3 3 0 0 1 9.1 14a2 2 0 0 0-.2 0 3 3 0 0 1-2.5-1 3 3 0 0 1-.9-2.2A3 3 0 0 1 6.2 9a3.4 3.4 0 0 1-.5-1 3 3 0 0 1-.2-1 3 3 0 0 1 1-2.2A3 3 0 0 1 8.8 4H9a3 3 0 0 1 1.1-1.4A3 3 0 0 1 12 2a3 3 0 0 1 1.8.5c.5.4.9.9 1.1 1.5h.2a3 3 0 0 1 2.5.8 3 3 0 0 1 .9 2.3c0 .3 0 .7-.2 1a2.8 2.8 0 0 1-.5.9l.5 1 .2 1a3 3 0 0 1-1 2.2 3 3 0 0 1-2.4.9 1.8 1.8 0 0 0-.2 0 3 3 0 0 1-1.1 1.4 3 3 0 0 1-1.8.5Zm0 7a8.7 8.7 0 0 1 .7-3.5 9.2 9.2 0 0 1 2-2.8 9.2 9.2 0 0 1 2.8-2A8.6 8.6 0 0 1 21 14a8.6 8.6 0 0 1-.7 3.5 9.2 9.2 0 0 1-2 2.8 9.2 9.2 0 0 1-2.8 2 8.6 8.6 0 0 1-3.5.7Zm2.5-2.5a6.8 6.8 0 0 0 2.4-1.5 6.8 6.8 0 0 0 1.7-2.6c-1 .4-1.8 1-2.6 1.7a6.8 6.8 0 0 0-1.5 2.4ZM12 23a8.6 8.6 0 0 0-.7-3.5 9.2 9.2 0 0 0-2-2.9 9.2 9.2 0 0 0-2.8-1.9A8.6 8.6 0 0 0 3 14a8.7 8.7 0 0 0 .7 3.5 9.2 9.2 0 0 0 2 2.9 9.2 9.2 0 0 0 2.8 1.9 8.6 8.6 0 0 0 3.5.7Zm-2.5-2.5A6.8 6.8 0 0 1 7.2 19a6.8 6.8 0 0 1-1.6-2.6c.9.4 1.7 1 2.5 1.7a6.8 6.8 0 0 1 1.6 2.4Zm5.9-8.4c.3 0 .5-.1.8-.4.2-.2.3-.5.3-.8 0-.2 0-.4-.2-.6a1.3 1.3 0 0 0-.5-.4l-.8-.4a3 3 0 0 1-.2.5 3.8 3.8 0 0 1-.2.5 2.5 2.5 0 0 1-.3.4 4 4 0 0 1-.4.4l.8.6a.8.8 0 0 0 .3.1h.4ZM15 8.5l.8-.4.5-.4.2-.6a1.1 1.1 0 0 0-.3-.8 1 1 0 0 0-.8-.4 1.1 1.1 0 0 0-.7.2l-.8.6.4.4.3.4a3.9 3.9 0 0 1 .4 1Zm-4-2.3a2.7 2.7 0 0 1 1-.2 2.7 2.7 0 0 1 1 .2l.2-1.1c0-.3-.1-.6-.4-.8A1.2 1.2 0 0 0 12 4c-.3 0-.6.1-.8.3-.3.2-.4.5-.3.8v1.1Zm1 7.8c.3 0 .6-.1.8-.3.3-.2.4-.5.3-.8v-1.1a2.7 2.7 0 0 1-1.1.2 2.7 2.7 0 0 1-1-.2l-.2 1.1c0 .3.1.6.4.8.2.2.5.3.8.3ZM9 8.5a3 3 0 0 1 .4-1l.3-.4.4-.4-.8-.6A.9.9 0 0 0 9 6a1.2 1.2 0 0 0-.3 0c-.4 0-.6 0-.9.3a1.1 1.1 0 0 0-.3.8c0 .2 0 .4.2.6l.5.4.9.4Zm-.3 3.6H9l.3-.2.8-.6a5.5 5.5 0 0 1-.4-.4 2.1 2.1 0 0 1-.3-.4 3.8 3.8 0 0 1-.2-.5 3 3 0 0 1-.1-.5l-1 .4-.4.4a1.1 1.1 0 0 0-.2.6c0 .3.2.6.4.8.2.2.4.4.7.4Z"/></svg>',"image-enhancements":'<svg height="24" width="24"><path d="M5.3 21a2 2 0 0 1-1.5-.6 2 2 0 0 1-.6-1.4V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5.2 3H13v2H5.2v14h14v-8h2v8c0 .6-.1 1-.5 1.4a2 2 0 0 1-1.4.6z"/><path d="M11 9a4 4 0 0 0 4 4 4 4 0 0 0-4 4 4 4 0 0 0-4-4 4 4 0 0 0 4-4zm5.5-6c.2 2.1 2.2 4.1 4.5 4.5-2.3.4-4.3 2.4-4.5 4.5A5.2 5.2 0 0 0 12 7.5 5.2 5.2 0 0 0 16.5 3z"/></svg>',instagram:'<svg height="24" width="24"><path clip-rule="evenodd" d="M10.1 9a4 4 0 1 1 4.4 6.6A4 4 0 0 1 10.1 9zm2.2 1.3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill-rule="evenodd"/><path d="M16 9.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6z"/><path clip-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm3-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill-rule="evenodd"/></svg>',onedrive:'<svg height="24" width="24"><path d="M4 13.7h1zm16 .7h-1zm-11.7-4A4.4 4.4 0 0 1 12.1 8V6a6.4 6.4 0 0 0-5.6 3.4l1.8 1zM12.1 8c2 0 3.6 1.4 4 2.8l2-.5A6.3 6.3 0 0 0 12 6v2zm8.1 6.8-9.8-5.5-1 1.8 9.8 5.5 1-1.8zm-9.8-5.5A5 5 0 0 0 3 13.7h2A3 3 0 0 1 9.5 11l1-1.8zM3 13.7a5 5 0 0 0 1 2.8l1.5-1.1a3 3 0 0 1-.5-1.7zm15.8 1.6a2.3 2.3 0 0 1-2 1.4v2a4.3 4.3 0 0 0 3.9-2.6zm-2 1.4H8v2h8.7zm-8.8 0a3 3 0 0 1-2.5-1.3L4 16.5a5 5 0 0 0 4 2.2v-2zm12.7-.6c.2-.6.3-1.1.3-1.7h-2c0 .3 0 .6-.2.9zm.3-1.7c0-3-3.1-5.1-6-4l.8 1.9a2.3 2.3 0 0 1 3.2 2h2zm-6-4L4.4 15l.8 1.9 10.7-4.6-.7-1.8z"/></svg>',"photo-filter":'<svg height="24" width="24"><path d="M4.4 21c-.3 0-.6-.2-.9-.5-.3-.3-.4-.6-.5-.9L19.6 3c.3 0 .6.3.9.5l.5.9zM3 14.7v-2.8L11.9 3h2.8zM3 7V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h2zm14 14 4-4v2c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm-7.7 0L21 9.3v2.8L12 21z"/></svg>',"revert-changes":'<svg height="24" width="24"><path d="m8.9 18.8.4 3.2H13v-2h-2v-2.6a4.6 4.6 0 0 1-1.6-.6 5.9 5.9 0 0 1-1.3-1l-2.5 1-1-1.7 2.2-1.6a4 4 0 0 1-.2-.7 5.9 5.9 0 0 1 0-.8v-.8l.2-.8-2.2-1.6 1-1.7 2.5 1a6 6 0 0 1 1.2-.9l1.4-.6.4-2.6h2l.3 2.6A5.6 5.6 0 0 1 16 8.2l2.5-1 1 1.6-2.2 1.7.2.7v.8a5 5 0 0 1 0 1h2a2.6 2.6 0 0 0 0-.5V11.3l2.6-2-2.8-4.7-3 1.3a8.2 8.2 0 0 0-.5-.4 3.8 3.8 0 0 0-.6-.3L14.8 2H9.3l-.4 3.2a5 5 0 0 0-1.2.7l-3-1.3L2 9.4l2.6 2V12.6l-2.6 2 2.7 4.7 3-1.3a8 8 0 0 0 1.2.7z"/><path d="m14.5 20.3 2.1-2-2.1-2.2 1.4-1.4 2.1 2.1 2.1-2 1.4 1.3-2 2.1 2 2.1-1.4 1.4-2.1-2-2.1 2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>',saturation:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 20.5a6 6 0 1 1-5.9-10.2 6 6 0 1 1 11.8 0A6 6 0 1 1 12 20.5Zm-1.1-7.7a6 6 0 0 0-.2.3 4.3 4.3 0 0 1-2-1.3c.9.1 1.6.5 2.2 1Zm2.4.3a6 6 0 0 0-.2-.3 4.3 4.3 0 0 1 2.2-1 4.3 4.3 0 0 1-2 1.3ZM12.2 15a6.3 6.3 0 0 1-.4 0 4.3 4.3 0 0 0 .2 2.5 4.3 4.3 0 0 0 .2-2.5Zm.9 4.2a6 6 0 0 0 .8-4.5 6 6 0 0 0 3.4-2.8 4.3 4.3 0 0 1-1.3 8.4 4.3 4.3 0 0 1-2.9-1.1Zm-2.2 0a4.3 4.3 0 1 1-4.2-7.3 6 6 0 0 0 3.4 2.8 6 6 0 0 0 .8 4.5Zm-3-9.2a4.3 4.3 0 1 1 8.3 0 6 6 0 0 0-4.2 1.5A6 6 0 0 0 7.8 10Z"/></svg>',"transform-image":'<svg height="24" width="24"><path d="M3 21v-6h2V9H3V3h6v2h6V3h6v6h-2v6h2v6h-6v-2H9v2zm6-4h6v-2h2V9h-2V7H9v2H7v6h2zM5 7h2V5H5zm12 0h2V5h-2zm0 12h2v-2h-2zM5 19h2v-2H5z"/></svg>',vibrance:'<svg height="24" width="24"><path d="M12 20 22 4H2zm2.6-8 1.3-2H8l1.3 2h5.2zm-1.2 2h-2.8l1.4 2.2zm5-8L17 8H7L5.6 6h12.8z" fill-rule="evenodd"/></svg>',vk:'<svg width="24" height="24"><path fill-rule="evenodd" d="M14.8 17.4a2 2 0 0 1-1.3.7 8 8 0 0 1-7.7-3.6c-1.4-2-2.2-4.4-2.6-5.7L3 8.6A2 2 0 0 1 5 6h2.5c.4 0 .8.1 1.2.4A2 2 0 0 1 9.8 6h3.5a2 2 0 0 1 1.4.6 2 2 0 0 1 1.5-.6h2.4a2 2 0 0 1 2 2.5c-.5 1.5-1.2 2.6-1.8 3.6a12.5 12.5 0 0 1 2 3.2A2 2 0 0 1 19 18h-2.6a2 2 0 0 1-1.3-.5 6.9 6.9 0 0 1-.3-.2Zm.5-2.5-1.2-1a3 3 0 0 0-.8-.2v2.4h-1.7a5.6 5.6 0 0 1-.3 0c-3-.7-4.7-3.7-5.6-6.1A38.1 38.1 0 0 1 5 8.1V8h2.5a80.5 80.5 0 0 1 1.2 2.5c.6 1.2 1.2 2 2 2.1V9l-.9-1h3.5v4.1a5 5 0 0 0 .4-.3c.7-.7 1.2-1.4 1.6-2.2l.2-.3.7-1.3h2.4a8.5 8.5 0 0 1-.8 2l-1.3 2-.3.3a10.5 10.5 0 0 1 2.8 3.8h-2.6l-.8-.9a20.6 20.6 0 0 0-.3-.3Z" clip-rule="evenodd"/></svg>',warmth:'<svg height="24" width="24"><path d="M12 21.1c-1.4 0-2.6-.5-3.6-1.5s-1.5-2.1-1.5-3.5c0-.8.2-1.6.6-2.2A5 5 0 0 1 8.9 12v-6c0-.8.3-1.5 1-2.1a2.9 2.9 0 0 1 2-.9c.9 0 1.6.3 2.2.9.5.6.8 1.3.8 2.1v6a5 5 0 0 1 1.5 1.8A4.9 4.9 0 0 1 17 16c0 1.4-.5 2.6-1.4 3.5s-2.2 1.5-3.6 1.5zm-3-5h6c0-.5-.2-1-.4-1.4a3 3 0 0 0-.9-1l-.8-.6v-7a1 1 0 0 0-.3-.7A1 1 0 0 0 12 5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v7l-.8.6a2.9 2.9 0 0 0-.9 1 3 3 0 0 0-.3 1.4z"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}})),DTe}var MTe;function Dze(){return MTe||(MTe=1,xze()),xTe}Dze();var NTe={},PTe={},LTe;function kze(){return LTe||(LTe=1,(function(){const e=Object.getPrototypeOf,n=(o,c,d)=>{var m;return d(o,c.prototype)?!0:((m=o.constructor)===null||m===void 0?void 0:m.name)===c.name},r=o=>{const c=typeof o;return o===null?"null":c==="object"&&Array.isArray(o)?"array":c==="object"&&n(o,String,(d,m)=>m.isPrototypeOf(d))?"string":c},i=o=>c=>r(c)===o,l=o=>c=>typeof c===o,f=o=>c=>o===c,h=(o,c)=>y(o)&&n(o,c,(d,m)=>e(d)===m),v=i("string"),y=i("object"),_=o=>h(o,Object),A=i("array"),R=f(null),k=l("boolean"),N=f(void 0),L=o=>o==null,B=o=>!L(o),H=l("function"),q=l("number"),Y=(o,c)=>{if(A(o)){for(let d=0,m=o.length;d<m;++d)if(!c(o[d]))return!1;return!0}return!1},K=()=>{},se=o=>()=>o(),ie=(o,c)=>(...d)=>o(c.apply(null,d)),le=(o,c)=>d=>o(c(d)),M=o=>()=>o,we=o=>o,Ne=(o,c)=>o===c;function De(o,...c){return(...d)=>{const m=c.concat(d);return o.apply(null,m)}}const be=o=>c=>!o(c),me=o=>()=>{throw new Error(o)},Ye=o=>o(),Ke=M(!1),Ze=M(!0);class z{constructor(c,d){this.tag=c,this.value=d}static some(c){return new z(!0,c)}static none(){return z.singletonNone}fold(c,d){return this.tag?d(this.value):c()}isSome(){return this.tag}isNone(){return!this.tag}map(c){return this.tag?z.some(c(this.value)):z.none()}bind(c){return this.tag?c(this.value):z.none()}exists(c){return this.tag&&c(this.value)}forall(c){return!this.tag||c(this.value)}filter(c){return!this.tag||c(this.value)?this:z.none()}getOr(c){return this.tag?this.value:c}or(c){return this.tag?this:c}getOrThunk(c){return this.tag?this.value:c()}orThunk(c){return this.tag?this:c()}getOrDie(c){if(this.tag)return this.value;throw new Error(c??"Called getOrDie on None")}static from(c){return B(c)?z.some(c):z.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(c){this.tag&&c(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}z.singletonNone=new z(!1);const $t=Array.prototype.slice,Be=Array.prototype.indexOf,at=Array.prototype.push,lt=(o,c)=>Be.call(o,c),$e=(o,c)=>{const d=lt(o,c);return d===-1?z.none():z.some(d)},qt=(o,c)=>lt(o,c)>-1,io=(o,c)=>{for(let d=0,m=o.length;d<m;d++){const S=o[d];if(c(S,d))return!0}return!1},En=(o,c)=>{const d=[];for(let m=0;m<o;m++)d.push(c(m));return d},Zn=(o,c)=>{const d=[];for(let m=0;m<o.length;m+=c){const S=$t.call(o,m,m+c);d.push(S)}return d},Et=(o,c)=>{const d=o.length,m=new Array(d);for(let S=0;S<d;S++){const w=o[S];m[S]=c(w,S)}return m},Jt=(o,c)=>{for(let d=0,m=o.length;d<m;d++){const S=o[d];c(S,d)}},ce=(o,c)=>{for(let d=o.length-1;d>=0;d--){const m=o[d];c(m,d)}},Hs=(o,c)=>{const d=[],m=[];for(let S=0,w=o.length;S<w;S++){const T=o[S];(c(T,S)?d:m).push(T)}return{pass:d,fail:m}},Fo=(o,c)=>{const d=[];for(let m=0,S=o.length;m<S;m++){const w=o[m];c(w,m)&&d.push(w)}return d},yt=(o,c,d)=>(ce(o,(m,S)=>{d=c(d,m,S)}),d),Xt=(o,c,d)=>(Jt(o,(m,S)=>{d=c(d,m,S)}),d),Wn=(o,c,d)=>{for(let m=0,S=o.length;m<S;m++){const w=o[m];if(c(w,m))return z.some(w);if(d(w,m))break}return z.none()},bt=(o,c)=>Wn(o,c,Ke),Kt=(o,c)=>{for(let d=0,m=o.length;d<m;d++){const S=o[d];if(c(S,d))return z.some(d)}return z.none()},Ut=o=>{const c=[];for(let d=0,m=o.length;d<m;++d){if(!A(o[d]))throw new Error("Arr.flatten item "+d+" was not an array, input: "+o);at.apply(c,o[d])}return c},Ue=(o,c)=>Ut(Et(o,c)),dt=(o,c)=>{for(let d=0,m=o.length;d<m;++d){const S=o[d];if(c(S,d)!==!0)return!1}return!0},Ot=o=>{const c=$t.call(o,0);return c.reverse(),c},Oe=(o,c)=>Fo(o,d=>!qt(c,d)),pt=(o,c)=>{const d={};for(let m=0,S=o.length;m<S;m++){const w=o[m];d[String(w)]=c(w,m)}return d},Bt=o=>[o],tn=(o,c)=>{const d=$t.call(o,0);return d.sort(c),d},ht=(o,c)=>c>=0&&c<o.length?z.some(o[c]):z.none(),gt=o=>ht(o,0),No=o=>ht(o,o.length-1),Ko=H(Array.from)?Array.from:o=>$t.call(o),Wo=(o,c)=>{for(let d=0;d<o.length;d++){const m=c(o[d],d);if(m.isSome())return m}return z.none()},Jn=Object.keys,ys=Object.hasOwnProperty,ps=(o,c)=>{const d=Jn(o);for(let m=0,S=d.length;m<S;m++){const w=d[m],T=o[w];c(T,w)}},es=(o,c)=>is(o,(d,m)=>({k:m,v:c(d,m)})),is=(o,c)=>{const d={};return ps(o,(m,S)=>{const w=c(m,S);d[w.k]=w.v}),d},st=o=>(c,d)=>{o[d]=c},ft=(o,c,d,m)=>{ps(o,(S,w)=>{(c(S,w)?d:m)(S,w)})},It=(o,c)=>{const d={},m={};return ft(o,c,st(d),st(m)),{t:d,f:m}},Dt=(o,c)=>{const d={};return ft(o,c,st(d),K),d},Nn=(o,c)=>{const d=[];return ps(o,(m,S)=>{d.push(c(m,S))}),d},$n=(o,c)=>{const d=Jn(o);for(let m=0,S=d.length;m<S;m++){const w=d[m],T=o[w];if(c(T,w,o))return z.some(T)}return z.none()},lo=o=>Nn(o,we),Vt=(o,c)=>Pn(o,c)?z.from(o[c]):z.none(),Pn=(o,c)=>ys.call(o,c),wn=(o,c)=>Pn(o,c)&&o[c]!==void 0&&o[c]!==null,ts={generate:o=>{if(!A(o))throw new Error("cases must be an array");if(o.length===0)throw new Error("there must be at least one case");const c=[],d={};return Jt(o,(m,S)=>{const w=Jn(m);if(w.length!==1)throw new Error("one and only one name per case");const T=w[0],V=m[T];if(d[T]!==void 0)throw new Error("duplicate key detected:"+T);if(T==="cata")throw new Error("cannot have a case named cata (sorry)");if(!A(V))throw new Error("case arguments must be an array");c.push(T),d[T]=(...F)=>{const W=F.length;if(W!==V.length)throw new Error("Wrong number of arguments to case "+T+". Expected "+V.length+" ("+V+"), got "+W);return{fold:(...oe)=>{if(oe.length!==o.length)throw new Error("Wrong number of arguments to fold. Expected "+o.length+", got "+oe.length);return oe[S].apply(null,F)},match:oe=>{const pe=Jn(oe);if(c.length!==pe.length)throw new Error("Wrong number of arguments to match. Expected: "+c.join(",")+`
Actual: `+pe.join(","));if(!dt(c,Se=>qt(pe,Se)))throw new Error("Not all branches were specified when using match. Specified: "+pe.join(", ")+`
Required: `+c.join(", "));return oe[T].apply(null,F)},log:oe=>{console.log(oe,{constructors:c,constructor:T,params:F})}}}}),d}},mn=o=>{let c=o;return{get:()=>c,set:S=>{c=S}}},wr=o=>{let c=z.none(),d=[];const m=W=>wr(Q=>{S(oe=>{Q(W(oe))})}),S=W=>{T()?F(W):d.push(W)},w=W=>{T()||(c=z.some(W),V(d),d=[])},T=()=>c.isSome(),V=W=>{Jt(W,F)},F=W=>{c.each(Q=>{setTimeout(()=>{W(Q)},0)})};return o(w),{get:S,map:m,isReady:T}},Yi={nu:wr,pure:o=>wr(c=>{c(o)})},Si=o=>{setTimeout(()=>{throw o},0)},Yr=o=>{const c=F=>{o().then(F,Si)};return{map:F=>Yr(()=>o().then(F)),bind:F=>Yr(()=>o().then(W=>F(W).toPromise())),anonBind:F=>Yr(()=>o().then(()=>F.toPromise())),toLazy:()=>Yi.nu(c),toCached:()=>{let F=null;return Yr(()=>(F===null&&(F=o()),F))},toPromise:o,get:c}},Os={nu:o=>Yr(()=>new Promise(o)),pure:o=>Yr(()=>Promise.resolve(o))},Xa=o=>{const c=w=>w(o),d=M(o),m=()=>S,S={tag:!0,inner:o,fold:(w,T)=>T(o),isValue:Ze,isError:Ke,map:w=>fo.value(w(o)),mapError:m,bind:c,exists:c,forall:c,getOr:d,or:m,getOrThunk:d,orThunk:m,getOrDie:d,each:w=>{w(o)},toOptional:()=>z.some(o)};return S},jc=o=>{const c=()=>d,d={tag:!1,inner:o,fold:(m,S)=>m(o),isValue:Ke,isError:Ze,map:c,mapError:m=>fo.error(m(o)),bind:c,exists:Ke,forall:Ze,getOr:we,or:we,getOrThunk:Ye,orThunk:Ye,getOrDie:me(String(o)),each:K,toOptional:z.none};return d},fo={value:Xa,error:jc,fromOption:(o,c)=>o.fold(()=>jc(c),Xa)},vc=o=>({...o,toCached:()=>vc(o.toCached()),bindFuture:F=>vc(o.bind(W=>W.fold(Q=>Os.pure(fo.error(Q)),Q=>F(Q)))),bindResult:F=>vc(o.map(W=>W.bind(F))),mapResult:F=>vc(o.map(W=>W.map(F))),mapError:F=>vc(o.map(W=>W.mapError(F))),foldResult:(F,W)=>o.map(Q=>Q.fold(F,W)),withTimeout:(F,W)=>vc(Os.nu(Q=>{let oe=!1;const pe=setTimeout(()=>{oe=!0,Q(fo.error(W()))},F);o.get(Ee=>{oe||(clearTimeout(pe),Q(Ee))})}))}),Ji=o=>vc(Os.nu(o)),rp=o=>vc(Os.pure(fo.value(o))),Yu={nu:Ji,wrap:vc,pure:rp,value:rp,error:o=>vc(Os.pure(fo.error(o))),fromResult:o=>vc(Os.pure(o)),fromFuture:o=>vc(o.map(fo.value)),fromPromise:o=>Ji(c=>{o.then(d=>{c(fo.value(d))},d=>{c(fo.error(d))})})},tu=typeof window<"u"?window:Function("return this;")(),cl=(o,c,d,m)=>{const S=o+c;return S>m?d:S<d?m:S},Xi=(o,c,d)=>Math.min(Math.max(o,c),d),nu=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Ju=0;const Un=o=>{const d=new Date().getTime(),m=Math.floor(nu()*1e9);return Ju++,o+"_"+m+Ju+String(d)},oh=(o,c)=>c,Md=(o,c)=>_(o)&&_(c)?gr(o,c):c,Nd=o=>(...c)=>{if(c.length===0)throw new Error("Can't merge zero objects");const d={};for(let m=0;m<c.length;m++){const S=c[m];for(const w in S)Pn(S,w)&&(d[w]=o(d[w],S[w]))}return d},gr=Nd(Md),sh=Nd(oh),zc=(o,c,d=Ne)=>o.exists(m=>d(m,c)),Vi=(o,c,d=Ne)=>bc(o,c,d).getOr(o.isNone()&&c.isNone()),ou=o=>{const c=[],d=m=>{c.push(m)};for(let m=0;m<o.length;m++)o[m].each(d);return c},Pd=o=>{const c=[];for(let d=0;d<o.length;d++){const m=o[d];if(m.isSome())c.push(m.getOrDie());else return z.none()}return z.some(c)},bc=(o,c,d)=>o.isSome()&&c.isSome()?z.some(d(o.getOrDie(),c.getOrDie())):z.none(),Pr=(o,c,d,m)=>o.isSome()&&c.isSome()&&d.isSome()?z.some(m(o.getOrDie(),c.getOrDie(),d.getOrDie())):z.none(),Qa=(o,c)=>o!=null?z.some(c(o)):z.none(),Gi=(o,c)=>o?z.some(c):z.none(),sm=o=>o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),rm=(o,c)=>{let d=c??tu;for(let m=0;m<o.length&&d!==void 0&&d!==null;++m)d=d[o[m]];return d},yc=(o,c)=>{const d=o.split(".");return rm(d,c)};ts.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const ll=o=>{const c=[],d=[];return Jt(o,m=>{m.fold(S=>{c.push(S)},S=>{d.push(S)})}),{errors:c,values:d}},Tl=o=>{const c=mn(z.none()),d=()=>c.get().each(o);return{clear:()=>{d(),c.set(z.none())},isSet:()=>c.get().isSome(),get:()=>c.get(),set:V=>{d(),c.set(z.some(V))}}},rh=()=>Tl(o=>o.destroy()),ii=()=>Tl(o=>o.unbind()),$o=()=>{const o=Tl(K);return{...o,on:d=>o.get().each(d)}},ai=(o,c)=>o+c,Da=(o,c)=>o.substring(c),Lr=(o,c,d)=>c===""||o.length>=c.length&&o.substr(d,d+c.length)===c,ih=(o,c)=>ec(o,c)?Da(o,c.length):o,ip=(o,c)=>Ol(o,c)?o:ai(o,c),Ar=(o,c,d=0,m)=>{const S=o.indexOf(c,d);return S!==-1?N(m)?!0:S+c.length<=m:!1},ec=(o,c)=>Lr(o,c,0),Ol=(o,c)=>Lr(o,c,o.length-c.length),Hn=(o=>c=>c.replace(o,""))(/^\s+|\s+$/g),Il=o=>o.length>0,ka=o=>!Il(o),Sc=o=>{const c=parseFloat(o);return isNaN(c)?z.none():z.some(c)},ci=(o,c)=>{let d=null,m=null;return{cancel:()=>{R(d)||(clearTimeout(d),d=null,m=null)},throttle:(...T)=>{m=T,R(d)&&(d=setTimeout(()=>{const V=m;d=null,m=null,o.apply(null,V)},c))}}},am=(o,c)=>{let d=null;return{cancel:()=>{R(d)||(clearTimeout(d),d=null)},throttle:(...w)=>{R(d)&&(d=setTimeout(()=>{d=null,o.apply(null,w)},c))}}},Cc=(o,c)=>{let d=null;const m=()=>{R(d)||(clearTimeout(d),d=null)};return{cancel:m,throttle:(...w)=>{m(),d=setTimeout(()=>{d=null,o.apply(null,w)},c)}}},ul=o=>{let c=!1,d;return(...m)=>(c||(c=!0,d=o.apply(null,m)),d)},ap="\uFEFF",gf="",Xu=(o,c)=>{const m=(c||document).createElement("div");if(m.innerHTML=o,!m.hasChildNodes()||m.childNodes.length>1){const S="HTML does not have a single root node";throw console.error(S,o),new Error(S)}return Qu(m.childNodes[0])},cp=(o,c)=>{const m=(c||document).createElement(o);return Qu(m)},vf=(o,c)=>{const m=(c||document).createTextNode(o);return Qu(m)},Qu=o=>{if(o==null)throw new Error("Node cannot be null or undefined");return{dom:o}},kn={fromHtml:Xu,fromTag:cp,fromText:vf,fromDom:Qu,fromPoint:(o,c,d)=>z.from(o.dom.elementFromPoint(c,d)).map(Qu)},Ld=(o,c)=>{c.fold(d=>{o.setStartBefore(d.dom)},(d,m)=>{o.setStart(d.dom,m)},d=>{o.setStartAfter(d.dom)})},lp=(o,c)=>{c.fold(d=>{o.setEndBefore(d.dom)},(d,m)=>{o.setEnd(d.dom,m)},d=>{o.setEndAfter(d.dom)})},ve=(o,c,d)=>{const m=o.document.createRange();return Ld(m,c),lp(m,d),m},Ve=(o,c,d,m,S)=>{const w=o.document.createRange();return w.setStart(c.dom,d),w.setEnd(m.dom,S),w},it=o=>({left:o.left,top:o.top,right:o.right,bottom:o.bottom,width:o.width,height:o.height}),jt=o=>{const c=o.getClientRects(),d=c.length>0?c[0]:o.getBoundingClientRect();return d.width>0||d.height>0?z.some(d).map(it):z.none()},Rn=o=>{const c=o.getBoundingClientRect();return c.width>0||c.height>0?z.some(c).map(it):z.none()},so=ts.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Is=(o,c,d)=>c(kn.fromDom(d.startContainer),d.startOffset,kn.fromDom(d.endContainer),d.endOffset),hs=(o,c)=>c.match({domRange:d=>({ltr:M(d),rtl:z.none}),relative:(d,m)=>({ltr:ul(()=>ve(o,d,m)),rtl:ul(()=>z.some(ve(o,m,d)))}),exact:(d,m,S,w)=>({ltr:ul(()=>Ve(o,d,m,S,w)),rtl:ul(()=>z.some(Ve(o,S,w,d,m)))})}),Xs=(o,c)=>{const d=c.ltr();return d.collapsed?c.rtl().filter(S=>S.collapsed===!1).map(S=>so.rtl(kn.fromDom(S.endContainer),S.endOffset,kn.fromDom(S.startContainer),S.startOffset)).getOrThunk(()=>Is(o,so.ltr,d)):Is(o,so.ltr,d)},ae=(o,c)=>{const d=hs(o,c);return Xs(o,d)},Ce=(o,c)=>ae(o,c).match({ltr:(m,S,w,T)=>{const V=o.document.createRange();return V.setStart(m.dom,S),V.setEnd(w.dom,T),V},rtl:(m,S,w,T)=>{const V=o.document.createRange();return V.setStart(w.dom,T),V.setEnd(m.dom,S),V}});so.ltr,so.rtl;const je=9,At=11,to=1,Ps=3,x=(o,c)=>{const d=o.dom;if(d.nodeType!==to)return!1;{const m=d;if(m.matches!==void 0)return m.matches(c);if(m.msMatchesSelector!==void 0)return m.msMatchesSelector(c);if(m.webkitMatchesSelector!==void 0)return m.webkitMatchesSelector(c);if(m.mozMatchesSelector!==void 0)return m.mozMatchesSelector(c);throw new Error("Browser lacks native selectors")}},U=o=>o.nodeType!==to&&o.nodeType!==je&&o.nodeType!==At||o.childElementCount===0,X=(o,c)=>{const d=c===void 0?document:c.dom;return U(d)?[]:Et(d.querySelectorAll(o),kn.fromDom)},ne=(o,c)=>{const d=c===void 0?document:c.dom;return U(d)?z.none():z.from(d.querySelector(o)).map(kn.fromDom)},de=(o,c)=>o.dom===c.dom,ge=(o,c)=>{const d=o.dom,m=c.dom;return d===m?!1:d.contains(m)},Te=(o,c,d,m)=>{const S=o.isiOS()&&/ipad/i.test(d)===!0,w=o.isiOS()&&!S,T=o.isiOS()||o.isAndroid(),V=T||m("(pointer:coarse)"),F=S||!w&&T&&m("(min-device-width:768px)"),W=w||T&&!F,Q=c.isSafari()&&o.isiOS()&&/safari/i.test(d)===!1,oe=!W&&!F&&!Q;return{isiPad:M(S),isiPhone:M(w),isTablet:M(F),isPhone:M(W),isTouch:M(V),isAndroid:o.isAndroid,isiOS:o.isiOS,isWebView:M(Q),isDesktop:M(oe)}},rt=(o,c)=>{for(let d=0;d<o.length;d++){const m=o[d];if(m.test(c))return m}},ot=(o,c)=>{const d=rt(o,c);if(!d)return{major:0,minor:0};const m=S=>Number(c.replace(d,"$"+S));return xn(m(1),m(2))},Rt=(o,c)=>{const d=String(c).toLowerCase();return o.length===0?rn():ot(o,d)},rn=()=>xn(0,0),xn=(o,c)=>({major:o,minor:c}),Zt={nu:xn,detect:Rt,unknown:rn},uo=(o,c)=>Wo(c.brands,d=>{const m=d.brand.toLowerCase();return bt(o,S=>{var w;return m===((w=S.brand)===null||w===void 0?void 0:w.toLowerCase())}).map(S=>({current:S.name,version:Zt.nu(parseInt(d.version,10),0)}))}),Fs=(o,c)=>{const d=String(c).toLowerCase();return bt(o,m=>m.search(d))},Dr=(o,c)=>Fs(o,c).map(d=>{const m=Zt.detect(d.versionRegexes,c);return{current:d.name,version:m}}),lr=(o,c)=>Fs(o,c).map(d=>{const m=Zt.detect(d.versionRegexes,c);return{current:d.name,version:m}}),Ma=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ti=o=>c=>Ar(c,o),ed=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:o=>Ar(o,"edge/")&&Ar(o,"chrome")&&Ar(o,"safari")&&Ar(o,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ma],search:o=>Ar(o,"chrome")&&!Ar(o,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:o=>Ar(o,"msie")||Ar(o,"trident")},{name:"Opera",versionRegexes:[Ma,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ti("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ti("firefox")},{name:"Safari",versionRegexes:[Ma,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:o=>(Ar(o,"safari")||Ar(o,"mobile/"))&&Ar(o,"applewebkit")}],td=[{name:"Windows",search:Ti("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:o=>Ar(o,"iphone")||Ar(o,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ti("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ti("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ti("linux"),versionRegexes:[]},{name:"Solaris",search:Ti("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ti("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ti("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Tr={browsers:M(ed),oses:M(td)},tc="Edge",Br="Chromium",Qi="IE",fg="Opera",su="Firefox",Bd="Safari",pg=()=>Ru({current:void 0,version:Zt.unknown()}),Ru=o=>{const c=o.current,d=o.version,m=S=>()=>c===S;return{current:c,version:d,isEdge:m(tc),isChromium:m(Br),isIE:m(Qi),isOpera:m(fg),isFirefox:m(su),isSafari:m(Bd)}},Vd={unknown:pg,nu:Ru},ah="Windows",xu="iOS",hg="Android",nc="Linux",ba="macOS",ch="Solaris",U1="FreeBSD",$s="ChromeOS",Ci=()=>lh({current:void 0,version:Zt.unknown()}),lh=o=>{const c=o.current,d=o.version,m=S=>()=>c===S;return{current:c,version:d,isWindows:m(ah),isiOS:m(xu),isAndroid:m(hg),isMacOS:m(ba),isLinux:m(nc),isSolaris:m(ch),isFreeBSD:m(U1),isChromeOS:m($s)}},kr={unknown:Ci,nu:lh},mb={detect:(o,c,d)=>{const m=Tr.browsers(),S=Tr.oses(),w=c.bind(F=>uo(m,F)).orThunk(()=>Dr(m,o)).fold(Vd.unknown,Vd.nu),T=lr(S,o).fold(kr.unknown,kr.nu),V=Te(T,w,o,d);return{browser:w,os:T,deviceType:V}}},SE=o=>window.matchMedia(o).matches;let gb=ul(()=>mb.detect(window.navigator.userAgent,z.from(window.navigator.userAgentData),SE));const Wr=()=>gb(),yf=(o,c)=>yc(o,c),up=(o,c)=>{const d=yf(o,c);if(d==null)throw new Error(o+" not available on this browser");return d},yn=Object.getPrototypeOf,oc=o=>up("HTMLElement",o),dp=o=>{const c=yc("ownerDocument.defaultView",o);return y(o)&&(oc(c).prototype.isPrototypeOf(o)||/^HTML\w*Element$/.test(yn(o).constructor.name))},dl=o=>o.dom.nodeName.toLowerCase(),fp=o=>o.dom.nodeType,vb=o=>c=>fp(c)===o,Me=o=>Ec(o)&&dp(o.dom),Ec=vb(to),Hd=vb(Ps),bb=vb(je),pp=vb(At),$a=o=>c=>Ec(c)&&dl(c)===o,ze=o=>kn.fromDom(o.dom.ownerDocument),mt=o=>bb(o)?o:ze(o),Yt=o=>kn.fromDom(mt(o).dom.documentElement),cn=o=>kn.fromDom(mt(o).dom.defaultView),Sn=o=>z.from(o.dom.parentNode).map(kn.fromDom),To=o=>Sn(o),Po=o=>z.from(o.dom.parentElement).map(kn.fromDom),ds=(o,c)=>{const d=H(c)?c:Ke;let m=o.dom;const S=[];for(;m.parentNode!==null&&m.parentNode!==void 0;){const w=m.parentNode,T=kn.fromDom(w);if(S.push(T),d(T)===!0)break;m=w}return S},qo=o=>z.from(o.dom.offsetParent).map(kn.fromDom),Ls=o=>z.from(o.dom.previousSibling).map(kn.fromDom),Bs=o=>z.from(o.dom.nextSibling).map(kn.fromDom),Es=o=>Et(o.dom.childNodes,kn.fromDom),Ks=(o,c)=>{const d=o.dom.childNodes;return z.from(d[c]).map(kn.fromDom)},eo=o=>Ks(o,0),ur=(o,c)=>({element:o,offset:c}),Ua=(o,c)=>{const d=Es(o);return d.length>0&&c<d.length?ur(d[c],0):ur(o,c)},_c=(o,c,d,m)=>{const w=ze(o).dom.createRange();return w.setStart(o.dom,c),w.setEnd(d.dom,m),w},Xo=(o,c,d,m)=>{const S=_c(o,c,d,m),w=de(o,d)&&c===m;return S.collapsed&&!w},sc=o=>pp(o)&&B(o.dom.host),Ei=o=>kn.fromDom(o.dom.getRootNode()),ji=o=>sc(o)?o:kn.fromDom(mt(o).dom.body),Sf=o=>ki(o).isSome(),ki=o=>{const c=Ei(o);return sc(c)?z.some(c):z.none()},dr=o=>kn.fromDom(o.dom.host),tT=o=>{if(B(o.target)){const c=kn.fromDom(o.target);if(Ec(c)&&nT(c)&&o.composed&&o.composedPath){const d=o.composedPath();if(d)return gt(d)}}return z.from(o.target)},nT=o=>B(o.dom.shadowRoot),ua=(o,c,d,m,S,w,T)=>({target:o,x:c,y:d,stop:m,prevent:S,kill:w,raw:T}),Fd=o=>{const c=kn.fromDom(tT(o).getOr(o.target)),d=()=>o.stopPropagation(),m=()=>o.preventDefault(),S=ie(m,d);return ua(c,o.clientX,o.clientY,d,m,S,o)},$d=(o,c)=>d=>{o(d)&&c(Fd(d))},ya=(o,c,d,m,S)=>{const w=$d(d,m);return o.dom.addEventListener(c,w,S),{unbind:De(Du,o,c,w,S)}},Cf=(o,c,d,m)=>ya(o,c,d,m,!1),Rl=(o,c,d,m)=>ya(o,c,d,m,!0),Du=(o,c,d,m)=>{o.dom.removeEventListener(c,d,m)},Wc=Ze,vr=(o,c,d)=>Cf(o,c,Wc,d),nd=(o,c,d)=>Rl(o,c,Wc,d),xl=Fd,rc=()=>kn.fromDom(document),ja=(o,c=!1)=>o.dom.focus({preventScroll:c}),Oi=o=>o.dom.blur(),Ud=o=>{const c=Ei(o).dom;return o.dom===c.activeElement},za=(o=rc())=>z.from(o.dom.activeElement).map(kn.fromDom),ea=o=>za(Ei(o)).filter(c=>o.dom.contains(c.dom)),cm=(o,c)=>{Sn(o).each(m=>{m.dom.insertBefore(c.dom,o.dom)})},CE=(o,c)=>{Bs(o).fold(()=>{Sn(o).each(S=>{Wa(S,c)})},m=>{cm(m,c)})},ey=(o,c)=>{eo(o).fold(()=>{Wa(o,c)},m=>{o.dom.insertBefore(c.dom,m.dom)})},Wa=(o,c)=>{o.dom.appendChild(c.dom)},j1=(o,c,d)=>{Ks(o,d).fold(()=>{Wa(o,c)},m=>{cm(m,c)})},EE=(o,c)=>{Jt(c,d=>{Wa(o,d)})},gg=(o,c,d)=>{if(v(d)||k(d)||q(d))o.setAttribute(c,d+"");else throw console.error("Invalid call to Attribute.set. Key ",c,":: Value ",d,":: Element ",o),new Error("Attribute value was not simple")},Lo=(o,c,d)=>{gg(o.dom,c,d)},z1=(o,c)=>{const d=o.dom;ps(c,(m,S)=>{gg(d,S,m)})},Na=(o,c)=>{const d=o.dom.getAttribute(c);return d===null?void 0:d},ic=(o,c)=>z.from(Na(o,c)),ac=(o,c)=>{const d=o.dom;return d&&d.hasAttribute?d.hasAttribute(c):!1},Jr=(o,c)=>{o.dom.removeAttribute(c)},lm=o=>Xt(o.dom.attributes,(c,d)=>(c[d.name]=d.value,c),{}),ty=o=>{o.dom.textContent="",Jt(Es(o),c=>{od(c)})},od=o=>{const c=o.dom;c.parentNode!==null&&c.parentNode.removeChild(c)},Ef=(o,c)=>kn.fromDom(o.dom.cloneNode(c)),W1=o=>Ef(o,!1),G1=o=>Ef(o,!0),yb=(o,c)=>{const m=(c||document).createElement("div");return m.innerHTML=o,Es(kn.fromDom(m))},hp=o=>o.dom.innerHTML,jd=(o,c)=>{const m=ze(o).dom,S=kn.fromDom(m.createDocumentFragment()),w=yb(c,m);EE(S,w),ty(o),Wa(o,S)},q1=o=>{const c=kn.fromTag("div"),d=kn.fromDom(o.dom.cloneNode(!0));return Wa(c,d),hp(c)},wc=o=>{if(sc(o))return"#shadow-root";{const c=W1(o);return q1(c)}},sd=o=>new Promise((c,d)=>{const m=()=>{w(),c(o)},S=[vr(o,"load",m),vr(o,"error",()=>{w(),d("Unable to load data from image: "+o.dom.src)})],w=()=>Jt(S,T=>T.unbind());o.dom.complete&&m()}),mp=o=>o.style!==void 0&&H(o.style.getPropertyValue),Qs=o=>{const c=Hd(o)?o.dom.parentNode:o.dom;if(c==null||c.ownerDocument===null)return!1;const d=c.ownerDocument;return ki(kn.fromDom(c)).fold(()=>d.body.contains(c),le(Qs,dr))},ku=()=>_E(kn.fromDom(document)),_E=o=>{const c=o.dom.body;if(c==null)throw new Error("Body is not available yet");return kn.fromDom(c)},Sb=(o,c,d)=>{if(!v(d))throw console.error("Invalid call to CSS.set. Property ",c,":: Value ",d,":: Element ",o),new Error("CSS value must be a string: "+d);mp(o)&&o.style.setProperty(c,d)},rd=(o,c)=>{mp(o)&&o.style.removeProperty(c)},jo=(o,c,d)=>{const m=o.dom;Sb(m,c,d)},_i=(o,c)=>{const d=o.dom;ps(c,(m,S)=>{Sb(d,S,m)})},Ac=(o,c)=>{const d=o.dom;ps(c,(m,S)=>{m.fold(()=>{rd(d,S)},w=>{Sb(d,S,w)})})},Xr=(o,c)=>{const d=o.dom,S=window.getComputedStyle(d).getPropertyValue(c);return S===""&&!Qs(o)?id(d,c):S},id=(o,c)=>mp(o)?o.style.getPropertyValue(c):"",li=(o,c)=>{const d=o.dom,m=id(d,c);return z.from(m).filter(S=>S.length>0)},da=o=>{const c={},d=o.dom;if(mp(d))for(let m=0;m<d.style.length;m++){const S=d.style.item(m);c[S]=d.style[S]}return c},uv=(o,c,d)=>{const m=kn.fromTag(o);return jo(m,c,d),li(m,c).isSome()},Ds=(o,c)=>{const d=o.dom;rd(d,c),zc(ic(o,"style").map(Hn),"")&&Jr(o,"style")},zd=o=>o.dom.offsetWidth,Vr=(o,c)=>{const d=(V,F)=>{if(!q(F)&&!F.match(/^[0-9]+$/))throw new Error(o+".set accepts only positive integer values. Value was "+F);const W=V.dom;mp(W)&&(W.style[o]=F+"px")},m=V=>{const F=c(V);if(F<=0||F===null){const W=Xr(V,o);return parseFloat(W)||0}return F},S=m,w=(V,F)=>Xt(F,(W,Q)=>{const oe=Xr(V,Q),pe=oe===void 0?0:parseInt(oe,10);return isNaN(pe)?W:W+pe},0);return{set:d,get:m,getOuter:S,aggregate:w,max:(V,F,W)=>{const Q=w(V,W);return F>Q?F-Q:0}}},ru=Vr("height",o=>{const c=o.dom;return Qs(o)?c.getBoundingClientRect().height:c.offsetHeight}),fa=o=>ru.get(o),pa=o=>ru.getOuter(o),gp=(o,c)=>{const d=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],m=ru.max(o,c,d);jo(o,"max-height",m+"px")},dv=o=>o.offsetWidth<=0&&o.offsetHeight<=0,uh=o=>!dv(o.dom),um=Vr("width",o=>{const c=o.dom;return Qs(o)?c.getBoundingClientRect().width:c.offsetWidth}),dm=(o,c)=>um.set(o,c),Tc=o=>um.get(o),dh=o=>um.getOuter(o),oT=(o,c)=>{const d=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],m=um.max(o,c,d);jo(o,"max-width",m+"px")},fm=(o,c)=>({left:o,top:c,translate:(m,S)=>fm(o+m,c+S)}),br=fm,K1=o=>{const c=o.getBoundingClientRect();return br(c.left,c.top)},fv=(o,c)=>o!==void 0?o:c!==void 0?c:0,Gc=o=>{const c=o.dom.ownerDocument,d=c.body,m=c.defaultView,S=c.documentElement;if(d===o.dom)return br(d.offsetLeft,d.offsetTop);const w=fv(m==null?void 0:m.pageYOffset,S.scrollTop),T=fv(m==null?void 0:m.pageXOffset,S.scrollLeft),V=fv(S.clientTop,d.clientTop),F=fv(S.clientLeft,d.clientLeft);return iu(o).translate(T-F,w-V)},iu=o=>{const c=o.dom,m=c.ownerDocument.body;return m===c?br(m.offsetLeft,m.offsetTop):Qs(o)?K1(c):br(0,0)},zi=o=>{const c=o!==void 0?o.dom:document,d=c.body.scrollLeft||c.documentElement.scrollLeft,m=c.body.scrollTop||c.documentElement.scrollTop;return br(d,m)},fh=(o,c,d)=>{const S=(d!==void 0?d.dom:document).defaultView;S&&S.scrollTo(o,c)},pv=((o,c)=>{const d=w=>{if(!o(w))throw new Error("Can only get "+c+" value of a "+c+" node");return m(w).getOr("")},m=w=>o(w)?z.from(w.dom.nodeValue):z.none();return{get:d,getOption:m,set:(w,T)=>{if(!o(w))throw new Error("Can only set raw "+c+" value of a "+c+" node");w.dom.nodeValue=T}}})(Hd,"text"),ny=o=>pv.get(o),Z1=(o,c)=>d=>ex(d)==="rtl"?c:o,ex=o=>Xr(o,"direction")==="rtl"?"rtl":"ltr",_f=(o,c)=>{const d=Na(o,c);return d===void 0||d===""?[]:d.split(" ")},sT=(o,c,d)=>{const S=_f(o,c).concat([d]);return Lo(o,c,S.join(" ")),!0},Y1=(o,c,d)=>{const m=Fo(_f(o,c),S=>S!==d);return m.length>0?Lo(o,c,m.join(" ")):Jr(o,c),!1};var wf=(o,c,d,m,S)=>o(d,m)?z.some(d):H(S)&&S(d)?z.none():c(d,m,S);const wE=(o,c,d)=>{let m=o.dom;const S=H(d)?d:Ke;for(;m.parentNode;){m=m.parentNode;const w=kn.fromDom(m);if(c(w))return z.some(w);if(S(w))break}return z.none()},hv=(o,c,d)=>wf((S,w)=>w(S),wE,o,c,d),Cb=(o,c)=>{const d=o.dom;return d.parentNode?Eb(kn.fromDom(d.parentNode),m=>!de(o,m)&&c(m)):z.none()},Eb=(o,c)=>{const d=S=>c(kn.fromDom(S));return bt(o.dom.childNodes,d).map(kn.fromDom)},J1=(o,c)=>{const d=m=>{for(let S=0;S<m.childNodes.length;S++){const w=kn.fromDom(m.childNodes[S]);if(c(w))return z.some(w);const T=d(m.childNodes[S]);if(T.isSome())return T}return z.none()};return d(o.dom)},AE=o=>ne(o),Wd=(o,c,d)=>wE(o,m=>x(m,c),d),rT=(o,c)=>Cb(o,d=>x(d,c)),pm=(o,c)=>Eb(o,d=>x(d,c)),yr=(o,c)=>ne(c,o),qc=(o,c,d)=>wf((S,w)=>x(S,w),Wd,o,c,d),vp=(o,c)=>{o.dom.checked=c},X1=o=>o.dom.checked,hm=o=>o.dom.classList!==void 0,Q1=o=>_f(o,"class"),TE=(o,c)=>sT(o,"class",c),bp=(o,c)=>Y1(o,"class",c),yp=(o,c)=>qt(Q1(o),c)?bp(o,c):TE(o,c),Rr=(o,c)=>{hm(o)?o.dom.classList.add(c):TE(o,c)},OE=o=>{(hm(o)?o.dom.classList:Q1(o)).length===0&&Jr(o,"class")},Ii=(o,c)=>{hm(o)?o.dom.classList.remove(c):bp(o,c),OE(o)},mv=(o,c)=>{const d=hm(o)?o.dom.classList.toggle(c):yp(o,c);return OE(o),d},na=(o,c)=>hm(o)&&o.dom.classList.contains(c),Sp=(o,c)=>{Jt(c,d=>{Rr(o,d)})},Kc=(o,c)=>{Jt(c,d=>{Ii(o,d)})},ph=(o,c)=>{Jt(c,d=>{mv(o,d)})},oy=(o,c)=>dt(c,d=>na(o,d)),eS=o=>{const c=o.dom.classList,d=new Array(c.length);for(let m=0;m<c.length;m++){const S=c.item(m);S!==null&&(d[m]=S)}return d},tS=o=>hm(o)?eS(o):Q1(o),iT=o=>o.dom.textContent,au=o=>o.dom.value,Af=(o,c)=>{if(c===void 0)throw new Error("Value.set was undefined");o.dom.value=c},oa=(o,c,d)=>Fo(ds(o,d),c),Ga=(o,c)=>X(c,o),sy=(o,c,d)=>hv(o,c,d).isSome(),_b=(o,c,d)=>qc(o,c,d).isSome(),ry=o=>H(o)?o:Ke,IE=(o,c,d)=>{let m=o.dom;const S=ry(d);for(;m.parentNode;){m=m.parentNode;const w=kn.fromDom(m),T=c(w);if(T.isSome())return T;if(S(w))break}return z.none()},Gd=(o,c,d)=>{const m=c(o),S=ry(d);return m.orThunk(()=>S(o)?z.none():IE(o,c,S))},j={create:(o,c,d,m)=>({start:o,soffset:c,finish:d,foffset:m})},Z=ts.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),he=(o,c,d,m)=>o.fold(c,d,m),Ie=o=>o.fold(we,we,we),Xe=Z.before,Ht=Z.on,Vn=Z.after,yo={before:Xe,on:Ht,after:Vn,cata:he,getStart:Ie},cs=ts.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),_s=o=>cs.exact(o.start,o.soffset,o.finish,o.foffset),Gr=o=>o.match({domRange:c=>kn.fromDom(c.startContainer),relative:(c,d)=>yo.getStart(c),exact:(c,d,m,S)=>c}),ui=cs.domRange,ha=cs.relative,Dl=cs.exact,hh=o=>{const c=Gr(o);return cn(c)},mh=j.create,qd={domRange:ui,relative:ha,exact:Dl,exactFromRange:_s,getWin:hh,range:mh},nS=o=>z.from(o.getSelection()),gv=o=>{if(o.rangeCount>0){const c=o.getRangeAt(0),d=o.getRangeAt(o.rangeCount-1);return z.some(j.create(kn.fromDom(c.startContainer),c.startOffset,kn.fromDom(d.endContainer),d.endOffset))}else return z.none()},iy=o=>{if(o.anchorNode===null||o.focusNode===null)return gv(o);{const c=kn.fromDom(o.anchorNode),d=kn.fromDom(o.focusNode);return Xo(c,o.anchorOffset,d,o.focusOffset)?z.some(j.create(c,o.anchorOffset,d,o.focusOffset)):gv(o)}},vg=o=>nS(o).filter(c=>c.rangeCount>0).bind(iy),vv=(o,c)=>{const d=Ce(o,c);return jt(d)},ay=(o,c)=>{const d=Ce(o,c);return Rn(d)},cy={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},aT=(()=>{const o="[0-9]+",d="[eE]"+("[+-]?"+o),m="\\.",S=V=>`(?:${V})?`,T=`[+-]?(?:${["Infinity",o+m+S(o)+S(d),m+o+S(d),o+S(d)].join("|")})`;return new RegExp(`^(${T})(.*)$`)})(),cT=(o,c)=>io(c,d=>io(cy[d],m=>o===m)),Zs=(o,c)=>z.from(aT.exec(o)).bind(m=>{const S=Number(m[1]),w=m[2];return cT(w,c)?z.some({value:S,unit:w}):z.none()}),Hr=(o,c)=>Zs(o,c).map(({value:d,unit:m})=>d+m),Pa=o=>{const c=o===void 0?window:o;return Wr().browser.isFirefox()?z.none():z.from(c.visualViewport)},cu=(o,c,d,m)=>({x:o,y:c,width:d,height:m,right:o+d,bottom:c+m}),ly=o=>{const c=o===void 0?window:o,d=c.document,m=zi(kn.fromDom(d));return Pa(c).fold(()=>{const S=c.document.documentElement,w=S.clientWidth,T=S.clientHeight;return cu(m.left,m.top,w,T)},S=>cu(Math.max(S.pageLeft,m.left),Math.max(S.pageTop,m.top),S.width,S.height))},wb=(o,c)=>o.view(c).fold(M([]),m=>{const S=o.owner(m),w=wb(o,S);return[m].concat(w)}),uy=(o,c)=>{const d=c.owner(o),m=wb(c,d);return z.some(m)};var bg=Object.freeze({__proto__:null,view:o=>{var c;return(o.dom===document?z.none():z.from((c=o.dom.defaultView)===null||c===void 0?void 0:c.frameElement)).map(kn.fromDom)},owner:o=>ze(o)});const mm=o=>{const c=rc(),d=zi(c);return uy(o,bg).fold(De(Gc,o),S=>{const w=iu(o),T=yt(S,(V,F)=>{const W=iu(F);return{left:V.left+W.left,top:V.top+W.top}},{left:0,top:0});return br(T.left+w.left+d.left,T.top+w.top+d.top)})},lT=(o,c,d)=>({point:o,width:c,height:d}),JL=(o,c,d,m)=>({x:o,y:c,width:d,height:m}),La=(o,c,d,m)=>({x:o,y:c,width:d,height:m,right:o+d,bottom:c+m}),Sa=o=>{const c=Gc(o),d=dh(o),m=pa(o);return La(c.left,c.top,d,m)},gh=o=>{const c=mm(o),d=dh(o),m=pa(o);return La(c.left,c.top,d,m)},fy=(o,c)=>{const d=Math.max(o.x,c.x),m=Math.max(o.y,c.y),S=Math.min(o.right,c.right),w=Math.min(o.bottom,c.bottom),T=S-d,V=w-m;return La(d,m,T,V)},RE=(o,c)=>Xt(c,(d,m)=>fy(d,m),o),kl=()=>ly(window),uT=(o,c)=>de(o.element,c.event.target),bv=o=>(zc(li(o,"position"),"fixed")?z.none():qo(o)).orThunk(()=>{const m=kn.fromTag("span");return Sn(o).bind(S=>{Wa(S,m);const w=qo(m);return od(m),w})}),xE=o=>bv(o).map(Gc).getOrThunk(()=>br(0,0)),ad=(o,c)=>{const d=z.from(Na(o,"id")).getOrThunk(()=>{const m=Un("aria");return Lo(c,"id",m),m});Lo(o,"aria-describedby",d)},DE=o=>{Jr(o,"aria-describedby")};var Kr;(function(o){o[o.Error=0]="Error",o[o.Value=1]="Value"})(Kr||(Kr={}));const py=(o,c,d)=>o.stype===Kr.Error?c(o.serror):d(o.svalue),yg=o=>{const c=[],d=[];return Jt(o,m=>{py(m,S=>d.push(S),S=>c.push(S))}),{values:c,errors:d}},XL=(o,c)=>o.stype===Kr.Error?{stype:Kr.Error,serror:c(o.serror)}:o,ox=(o,c)=>o.stype===Kr.Value?{stype:Kr.Value,svalue:c(o.svalue)}:o,kE=(o,c)=>o.stype===Kr.Value?c(o.svalue):o,QL=(o,c)=>o.stype===Kr.Error?c(o.serror):o,dT=o=>({stype:Kr.Value,svalue:o}),Sg=o=>({stype:Kr.Error,serror:o}),di={fromResult:o=>o.fold(Sg,dT),toResult:o=>py(o,fo.error,fo.value),svalue:dT,partition:yg,serror:Sg,bind:kE,bindError:QL,map:ox,mapError:XL,fold:py},hy=o=>y(o)&&Jn(o).length>100?" removed due to size":JSON.stringify(o,null,2),Ab=o=>{const c=o.length>10?o.slice(0,10).concat([{path:[],getErrorInfo:M("... (only showing first ten failures)")}]):o;return Et(c,d=>"Failed path: ("+d.path.join(" > ")+`)
`+d.getErrorInfo())},Oc=(o,c)=>di.serror([{path:o,getErrorInfo:c}]),my=(o,c,d)=>Oc(o,()=>'Could not find valid *required* value for "'+c+'" in '+hy(d)),e4=(o,c)=>Oc(o,()=>'Choice schema did not contain choice key: "'+c+'"'),Tb=(o,c,d)=>Oc(o,()=>'The chosen schema: "'+d+'" did not exist in branches: '+hy(c)),sx=(o,c)=>Oc(o,()=>"There are unsupported fields: ["+c.join(", ")+"] specified"),gm=(o,c)=>Oc(o,M(c)),yv=o=>{const c=(m,S)=>di.bindError(o(S),w=>gm(m,w)),d=M("val");return{extract:c,toString:d}},pT=yv(di.svalue),gn=M(pT),hT=(o,c)=>yv(d=>{const m=typeof d;return o(d)?di.svalue(d):di.serror(`Expected type: ${c} but got: ${m}`)}),mT=hT(q,"number"),Wi=hT(v,"string"),xs=hT(k,"boolean"),Ob=hT(H,"function"),Ri=o=>{if(Object(o)!==o)return!0;switch({}.toString.call(o).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(o).every(c=>Ri(o[c]));default:return!1}},gT=yv(o=>Ri(o)?di.svalue(o):di.serror("Expected value to be acceptable for sending via postMessage")),Cp=()=>({tag:"required",process:{}}),lu=o=>({tag:"defaultedThunk",process:o}),fi=o=>lu(M(o)),ME=()=>({tag:"option",process:{}}),vm=o=>({tag:"mergeWithThunk",process:o}),vT=o=>vm(M(o)),NE=(o,c,d,m)=>({tag:"field",key:o,newKey:c,presence:d,prop:m}),Ep=(o,c)=>({tag:"custom",newKey:o,instantiator:c}),bT=(o,c,d)=>{switch(o.tag){case"field":return c(o.key,o.newKey,o.presence,o.prop);case"custom":return d(o.newKey,o.instantiator)}},PE=(o,c)=>di.svalue(gr(c,sh.apply(void 0,o))),yT=o=>ie(di.serror,Ut)(o),ST={consolidateObj:(o,c)=>{const d=di.partition(o);return d.errors.length>0?yT(d.errors):PE(d.values,c)},consolidateArr:o=>{const c=di.partition(o);return c.errors.length>0?yT(c.errors):di.svalue(c.values)}},ix=(o,c,d,m)=>Vt(c,d).fold(()=>my(o,d,c),m),LE=(o,c,d,m)=>{const S=Vt(o,c).getOrThunk(()=>d(o));return m(S)},n4=(o,c,d)=>d(Vt(o,c)),o4=(o,c,d,m)=>{const S=Vt(o,c).map(w=>w===!0?d(o):w);return m(S)},CT=(o,c,d,m,S)=>{const w=V=>S.extract(c.concat([m]),V),T=V=>V.fold(()=>di.svalue(z.none()),F=>{const W=S.extract(c.concat([m]),F);return di.map(W,z.some)});switch(o.tag){case"required":return ix(c,d,m,w);case"defaultedThunk":return LE(d,m,o.process,w);case"option":return n4(d,m,T);case"defaultedOptionThunk":return o4(d,m,o.process,T);case"mergeWithThunk":return LE(d,m,M({}),V=>{const F=gr(o.process(d),V);return w(F)})}},ET=(o,c,d)=>{const m={},S=[];for(const w of d)bT(w,(T,V,F,W)=>{const Q=CT(F,o,c,T,W);di.fold(Q,oe=>{S.push(...oe)},oe=>{m[V]=oe})},(T,V)=>{m[T]=V(c)});return S.length>0?di.serror(S):di.svalue(m)},Tf=o=>({extract:(m,S)=>o().extract(m,S),toString:()=>o().toString()}),uu=o=>Jn(Dt(o,B)),Kd=o=>{const c=zo(o),d=yt(o,(S,w)=>bT(w,T=>gr(S,{[T]:!0}),M(S)),{});return{extract:(S,w)=>{const T=k(w)?[]:uu(w),V=Fo(T,F=>!wn(d,F));return V.length===0?c.extract(S,w):sx(S,V)},toString:c.toString}},zo=o=>({extract:(m,S)=>ET(m,S,o),toString:()=>`obj{
`+Et(o,S=>bT(S,(w,T,V,F)=>w+" -> "+F.toString(),(w,T)=>"state("+w+")")).join(`
`)+"}"}),du=o=>({extract:(m,S)=>{const w=Et(S,(T,V)=>o.extract(m.concat(["["+V+"]"]),T));return ST.consolidateArr(w)},toString:()=>"array("+o.toString()+")"}),Ib=(o,c)=>{const d=c!==void 0?c:we;return{extract:(w,T)=>{const V=[];for(const F of o){const W=F.extract(w,T);if(W.stype===Kr.Value)return{stype:Kr.Value,svalue:d(W.svalue)};V.push(W)}return ST.consolidateArr(V)},toString:()=>"oneOf("+Et(o,w=>w.toString()).join(", ")+")"}},ax=(o,c)=>{const d=(w,T)=>du(yv(o)).extract(w,T);return{extract:(w,T)=>{const V=Jn(T),F=d(w,V);return di.bind(F,W=>{const Q=Et(W,oe=>NE(oe,oe,Cp(),c));return zo(Q).extract(w,T)})},toString:()=>"setOf("+c.toString()+")"}},s4=(o,c)=>{const d=ul(c);return{extract:(w,T)=>d().extract(w,T),toString:()=>d().toString()}},BE=ie(du,zo),oS=(o,c,d,m)=>Vt(d,m).fold(()=>Tb(o,d,m),w=>w.extract(o.concat(["branch: "+m]),c)),Rb=(o,c)=>({extract:(S,w)=>Vt(w,o).fold(()=>e4(S,o),V=>oS(S,w,c,V)),toString:()=>"chooseOn("+o+"). Possible values: "+Jn(c)}),VE=()=>du(pT),Sv=o=>yv(c=>o(c).fold(di.serror,di.svalue)),_T=(o,c)=>ax(d=>di.fromResult(o(d)),c),cx=(o,c,d)=>{const m=c.extract([o],d);return di.mapError(m,S=>({input:d,errors:S}))},Hi=(o,c,d)=>di.toResult(cx(o,c,d)),_p=o=>o.fold(c=>{throw new Error(Cv(c))},we),Mu=(o,c,d)=>_p(Hi(o,c,d)),Cv=o=>`Errors: 
`+Ab(o.errors).join(`
`)+`

Input object: `+hy(o.input),fu=(o,c)=>Rb(o,es(c,zo)),xb=(o,c)=>s4(o,c),cc=NE,fl=Ep,gy=o=>Sv(c=>qt(o,c)?fo.value(c):fo.error(`Unsupported value: "${c}", choose one of "${o.join(", ")}".`)),sn=o=>cc(o,o,Cp(),gn()),Zd=(o,c)=>cc(o,o,Cp(),c),sS=o=>Zd(o,mT),qa=o=>Zd(o,Wi),Of=(o,c)=>cc(o,o,Cp(),gy(c)),If=o=>Zd(o,Ob),lx=(o,c)=>cc(o,o,ME(),yv(d=>di.serror("The field: "+o+" is forbidden. "+c))),Cg=(o,c)=>cc(o,o,Cp(),zo(c)),ux=(o,c)=>cc(o,o,Cp(),BE(c)),Nu=(o,c)=>cc(o,o,Cp(),du(c)),xr=o=>cc(o,o,ME(),gn()),wp=(o,c)=>cc(o,o,ME(),c),rS=o=>wp(o,mT),qi=o=>wp(o,Wi),dx=(o,c)=>wp(o,gy(c)),HE=o=>wp(o,xs),vh=o=>wp(o,Ob),wT=(o,c)=>wp(o,du(c)),cd=(o,c)=>wp(o,zo(c)),AT=(o,c)=>wp(o,Kd(c)),Ct=(o,c)=>cc(o,o,fi(c),gn()),pu=(o,c,d)=>cc(o,o,fi(c),d),vy=(o,c)=>pu(o,c,mT),Fi=(o,c)=>pu(o,c,Wi),Yd=(o,c,d)=>pu(o,c,gy(d)),Zc=(o,c)=>pu(o,c,xs),Or=(o,c)=>pu(o,c,Ob),fx=(o,c)=>pu(o,c,gT),Ev=(o,c,d)=>pu(o,c,du(d)),TT=(o,c,d)=>pu(o,c,zo(d)),_v=(o,c)=>{const d={};return ps(o,(m,S)=>{qt(c,S)||(d[S]=m)}),d},by=(o,c)=>({[o]:c}),px=o=>{const c={};return Jt(o,d=>{c[d.key]=d.value}),c},hx=(o,c)=>_v(o,c),Eg=(o,c)=>by(o,c),iS=o=>px(o),h6=(o,c)=>o.length===0?fo.value(c):fo.value(gr(c,sh.apply(void 0,o))),Db=o=>fo.error(Ut(o)),Yc=(o,c)=>{const d=ll(o);return d.errors.length>0?Db(d.errors):h6(d.values,c)},Ic=M,_g=Ic("touchstart"),wg=Ic("touchmove"),kb=Ic("touchend"),yy=Ic("touchcancel"),hu=Ic("mousedown"),wv=Ic("mousemove"),Ka=Ic("mouseout"),FE=Ic("mouseup"),Ap=Ic("mouseover"),Tp=Ic("focusin"),$E=Ic("focusout"),lc=Ic("keydown"),Sy=Ic("keyup"),Ag=Ic("input"),Mb=Ic("change"),bm=Ic("click"),aS=Ic("transitioncancel"),Jd=Ic("transitionend"),Nb=Ic("transitionstart"),mx=Ic("selectstart"),sa=o=>M("alloy."+o),gx={tap:sa("tap")},ym=sa("focus"),Op=sa("blur.post"),OT=sa("paste.post"),Pb=sa("receive"),ld=sa("execute"),Lb=sa("focus.item"),Bb=gx.tap,IT=sa("longpress"),UE=sa("sandbox.close"),jE=sa("typeahead.cancel"),zE=sa("system.init"),RT=sa("system.touchmove"),vx=sa("system.touchend"),Vb=sa("system.scroll"),Hb=sa("system.resize"),bh=sa("system.attached"),Tg=sa("system.detached"),Fb=sa("system.dismissRequested"),bx=sa("system.repositionRequested"),cS=sa("focusmanager.shifted"),lS=sa("slotcontainer.visibility"),yx=sa("system.external.element.scroll"),Sx=sa("change.tab"),WE=sa("dismiss.tab"),$b=sa("highlight"),GE=sa("dehighlight"),Rf=o=>wc(o),Cx="unknown";var Ip;(function(o){o[o.STOP=0]="STOP",o[o.NORMAL=1]="NORMAL",o[o.LOGGING=2]="LOGGING"})(Ip||(Ip={}));const uS=mn({}),Ex=(o,c)=>{const d=[],m=new Date().getTime();return{logEventCut:(S,w,T)=>{d.push({outcome:"cut",target:w,purpose:T})},logEventStopped:(S,w,T)=>{d.push({outcome:"stopped",target:w,purpose:T})},logNoParent:(S,w,T)=>{d.push({outcome:"no-parent",target:w,purpose:T})},logEventNoHandlers:(S,w)=>{d.push({outcome:"no-handlers-left",target:w})},logEventResponse:(S,w,T)=>{d.push({outcome:"response",purpose:T,target:w})},write:()=>{const S=new Date().getTime();qt(["mousemove","mouseover","mouseout",zE()],o)||console.log(o,{event:o,time:S-m,target:c.dom,sequence:Et(d,w=>qt(["cut","stopped","response"],w.outcome)?"{"+w.purpose+"} "+w.outcome+" at ("+Rf(w.target)+")":w.outcome)})}}},_x=(o,c,d)=>{switch(Vt(uS.get(),o).orThunk(()=>{const S=Jn(uS.get());return Wo(S,w=>o.indexOf(w)>-1?z.some(uS.get()[w]):z.none())}).getOr(Ip.NORMAL)){case Ip.NORMAL:return d(r4());case Ip.LOGGING:{const S=Ex(o,c),w=d(S);return S.write(),w}case Ip.STOP:return!0}},ud=["alloy/data/Fields","alloy/debugging/Debugging"],dS=()=>{const o=new Error;if(o.stack!==void 0){const c=o.stack.split(`
`);return bt(c,d=>d.indexOf("alloy")>0&&!io(ud,m=>d.indexOf(m)>-1)).getOr(Cx)}else return Cx},wx={logEventCut:K,logEventStopped:K,logNoParent:K,logEventNoHandlers:K,logEventResponse:K,write:K},Av=(o,c,d)=>_x(o,c,d),r4=M(wx),i4=M([sn("menu"),sn("selectedMenu")]),xT=M([sn("item"),sn("selectedItem")]);M(zo(xT().concat(i4())));const a4=M(zo(xT())),Ir=Cg("initSize",[sn("numColumns"),sn("numRows")]),Ax=()=>Zd("markers",a4()),Tx=()=>Cg("markers",[sn("backgroundMenu")].concat(i4()).concat(xT())),xf=o=>Cg("markers",Et(o,sn)),Ub=(o,c,d)=>(dS(),cc(c,c,d,Sv(m=>fo.value((...S)=>m.apply(void 0,S))))),zs=o=>Ub("onHandler",o,fi(K)),Ba=o=>Ub("onKeyboardHandler",o,fi(z.none)),fS=o=>Ub("onHandler",o,Cp()),qE=o=>Ub("onKeyboardHandler",o,Cp()),pi=(o,c)=>fl(o,M(c)),Cy=o=>fl(o,we),KE=M(Ir),Ox=(o,c,d)=>{const m=d.toString(),S=m.indexOf(")")+1,w=m.indexOf("("),T=m.substring(w+1,S-1).split(/,\s*/);return o.toFunctionAnnotation=()=>({name:c,parameters:Ix(T.slice(0,1).concat(T.slice(3)))}),o},Ix=o=>Et(o,c=>Ol(c,"/*")?c.substring(0,c.length-2):c),Rx=(o,c)=>{const d=o.toString(),m=d.indexOf(")")+1,S=d.indexOf("("),w=d.substring(S+1,m-1).split(/,\s*/);return o.toFunctionAnnotation=()=>({name:c,parameters:Ix(w)}),o},m6=(o,c)=>{const d=c.toString(),m=d.indexOf(")")+1,S=d.indexOf("("),w=d.substring(S+1,m-1).split(/,\s*/);return o.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Ix(w.slice(1))}),o},c4=(o,c)=>{let d=null;return{cancel:()=>{d!==null&&(clearTimeout(d),d=null)},schedule:(...w)=>{d=setTimeout(()=>{o.apply(null,w),d=null},c)}}},l4=5,xx=400,Dx=o=>{const c=o.raw;return c.touches===void 0||c.touches.length!==1?z.none():z.some(c.touches[0])},Rp=(o,c)=>{const d=Math.abs(o.clientX-c.x),m=Math.abs(o.clientY-c.y);return d>l4||m>l4},pl=o=>{const c=$o(),d=mn(!1),m=c4(W=>{o.triggerEvent(IT(),W),d.set(!0)},xx),S=W=>(Dx(W).each(Q=>{m.cancel();const oe={x:Q.clientX,y:Q.clientY,target:W.target};m.schedule(W),d.set(!1),c.set(oe)}),z.none()),w=W=>(m.cancel(),Dx(W).each(Q=>{c.on(oe=>{Rp(Q,oe)&&c.clear()})}),z.none()),T=W=>{m.cancel();const Q=oe=>de(oe.target,W.target);return c.get().filter(Q).map(oe=>d.get()?(W.prevent(),!1):o.triggerEvent(Bb(),W))},V=iS([{key:_g(),value:S},{key:wg(),value:w},{key:kb(),value:T}]);return{fireIfReady:(W,Q)=>Vt(V,Q).bind(oe=>oe(W))}};var xp;(function(o){o.OnFocusMode="onFocus",o.OnEnterOrSpaceMode="onEnterOrSpace",o.OnApiMode="onApi"})(xp||(xp={}));const yh="placeholder",Sh=ts.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Tv=o=>Pn(o,"uiType"),Sm=(o,c,d,m)=>o.exists(S=>S!==d.owner)?Sh.single(!0,M(d)):Vt(m,d.name).fold(()=>{throw new Error("Unknown placeholder component: "+d.name+`
Known: [`+Jn(m)+`]
Namespace: `+o.getOr("none")+`
Spec: `+JSON.stringify(d,null,2))},S=>S.replace()),Og=(o,c,d,m)=>Tv(d)&&d.uiType===yh?Sm(o,c,d,m):Sh.single(!1,M(d)),DT=(o,c,d,m)=>Og(o,c,d,m).fold((w,T)=>{const V=Tv(d)?T(c,d.config,d.validated):T(c),F=Vt(V,"components").getOr([]),W=Ue(F,Q=>DT(o,c,Q,m));return[{...V,components:W}]},(w,T)=>{if(Tv(d)){const V=T(c,d.config,d.validated);return d.validated.preprocess.getOr(we)(V)}else return T(c)}),kT=(o,c,d,m)=>Ue(d,S=>DT(o,c,S,m)),g6=(o,c)=>{let d=!1;const m=()=>d,S=()=>{if(d)throw new Error("Trying to use the same placeholder more than once: "+o);return d=!0,c},w=()=>c.fold((T,V)=>T,(T,V)=>T);return{name:M(o),required:w,used:m,replace:S}},u4=(o,c,d,m)=>{const S=es(m,(T,V)=>g6(V,T)),w=kT(o,c,d,S);return ps(S,T=>{if(T.used()===!1&&T.required())throw new Error("Placeholder: "+T.name()+` was not found in components list
Namespace: `+o.getOr("none")+`
Components: `+JSON.stringify(c.components,null,2))}),w},ZE=Sh.single,YE=Sh.multiple,kx=M(yh),JE=ts.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Ov=Ct("factory",{sketch:we}),pS=Ct("schema",[]),Ch=sn("name"),XE=cc("pname","pname",lu(o=>"<alloy."+Un(o.name)+">"),gn()),d4=fl("schema",()=>[xr("preprocess")]),QE=Ct("defaults",M({})),e_=Ct("overrides",M({})),Mx=zo([Ov,pS,Ch,XE,QE,e_]),f4=zo([Ov,pS,Ch,QE,e_]),Ey=zo([Ov,pS,Ch,XE,QE,e_]),Nx=zo([Ov,d4,Ch,sn("unit"),XE,QE,e_]),Cm=o=>o.fold(z.some,z.none,z.some,z.some),_y=o=>{const c=d=>d.name;return o.fold(c,c,c,c)},t_=o=>o.fold(we,we,we,we),Em=(o,c)=>d=>{const m=Mu("Converting part type",c,d);return o(m)},mu=Em(JE.required,Mx),dd=Em(JE.external,f4),fd=Em(JE.optional,Ey),n_=Em(JE.group,Nx),MT=M("entirety");var wy=Object.freeze({__proto__:null,required:mu,external:dd,optional:fd,group:n_,asNamedPart:Cm,name:_y,asCommon:t_,original:MT});const _m=(o,c,d,m)=>gr(c.defaults(o,d,m),d,{uid:o.partUids[c.name]},c.overrides(o,d,m)),p4=(o,c,d)=>{const m={},S={};return Jt(d,w=>{w.fold(T=>{m[T.pname]=ZE(!0,(V,F,W)=>T.factory.sketch(_m(V,T,F,W)))},T=>{const V=c.parts[T.name];S[T.name]=M(T.factory.sketch(_m(c,T,V[MT()]),V))},T=>{m[T.pname]=ZE(!1,(V,F,W)=>T.factory.sketch(_m(V,T,F,W)))},T=>{m[T.pname]=YE(!0,(V,F,W)=>{const Q=V[T.name];return Et(Q,oe=>T.factory.sketch(gr(T.defaults(V,oe,W),oe,T.overrides(V,oe))))})})}),{internals:M(m),externals:M(S)}},Va=(o,c)=>{const d={};return Jt(c,m=>{Cm(m).each(S=>{const w=o_(o,S.pname);d[S.name]=T=>{const V=Mu("Part: "+S.name+" in "+o,zo(S.schema),T);return{...w,config:T,validated:V}}})}),d},o_=(o,c)=>({uiType:kx(),owner:o,name:c}),Pu=(o,c,d)=>({uiType:kx(),owner:o,name:c,config:d,validated:{}}),Px=o=>Ue(o,c=>c.fold(z.none,z.some,z.none,z.none).map(d=>Cg(d.name,d.schema.concat([Cy(MT())]))).toArray()),Lx=o=>Et(o,_y),Iv=(o,c,d)=>p4(o,c,d),Ig=(o,c,d)=>u4(z.some(o),c,c.components,d),fr=(o,c,d)=>{const m=c.partUids[d];return o.getSystem().getByUid(m).toOptional()},Ml=(o,c,d)=>fr(o,c,d).getOrDie("Could not find part: "+d),hS=(o,c,d)=>{const m={},S=c.partUids,w=o.getSystem();return Jt(d,T=>{m[T]=M(w.getByUid(S[T]))}),m},s_=(o,c)=>{const d=o.getSystem();return es(c.partUids,(m,S)=>M(d.getByUid(m)))},r_=o=>Jn(o.partUids),mS=(o,c,d)=>{const m={},S=c.partUids,w=o.getSystem();return Jt(d,T=>{m[T]=M(w.getByUid(S[T]).getOrDie())}),m},Bx=(o,c)=>{const d=Lx(c);return iS(Et(d,m=>({key:m,value:o+"-"+m})))},wm=o=>cc("partUids","partUids",vm(c=>Bx(c.uid,o)),gn());var Rv=Object.freeze({__proto__:null,generate:Va,generateOne:Pu,schemas:Px,names:Lx,substitutes:Iv,components:Ig,defaultUids:Bx,defaultUidsSchema:wm,getAllParts:s_,getAllPartNames:r_,getPart:fr,getPartOrDie:Ml,getParts:hS,getPartsOrDie:mS});const NT=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Xd=(o,c,d,m=1)=>{const S=o*m,w=c*m,T=F=>Vt(d,F).getOr([]),V=(F,W,Q)=>{const oe=Oe(NT,Q);return{offset:br(F,W),classesOn:Ue(Q,T),classesOff:Ue(oe,T)}};return{southeast:()=>V(-o,c,["top","alignLeft"]),southwest:()=>V(o,c,["top","alignRight"]),south:()=>V(-o/2,c,["top","alignCentre"]),northeast:()=>V(-o,-c,["bottom","alignLeft"]),northwest:()=>V(o,-c,["bottom","alignRight"]),north:()=>V(-o/2,-c,["bottom","alignCentre"]),east:()=>V(o,-c/2,["valignCentre","left"]),west:()=>V(-o,-c/2,["valignCentre","right"]),insetNortheast:()=>V(S,w,["top","alignLeft","inset"]),insetNorthwest:()=>V(-S,w,["top","alignRight","inset"]),insetNorth:()=>V(-S/2,w,["top","alignCentre","inset"]),insetSoutheast:()=>V(S,-w,["bottom","alignLeft","inset"]),insetSouthwest:()=>V(-S,-w,["bottom","alignRight","inset"]),insetSouth:()=>V(-S/2,-w,["bottom","alignCentre","inset"]),insetEast:()=>V(-S,-w/2,["valignCentre","right","inset"]),insetWest:()=>V(S,-w/2,["valignCentre","left","inset"])}},Ay=()=>Xd(0,0,{}),Ca=(o,c,d,m,S,w,T,V=!1)=>({x:o,y:c,bubble:d,direction:m,placement:S,restriction:w,label:`${T}-${S}`,alwaysFit:V}),Lu=ts.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),i_=(o,c,d,m,S,w,T,V,F)=>o.fold(c,d,m,S,w,T,V,F),Vx=(o,c,d,m)=>o.fold(c,c,m,m,c,m,d,d),PT=(o,c,d,m)=>o.fold(c,m,c,m,d,d,c,m),xv=Lu.southeast,jb=Lu.southwest,LT=Lu.northeast,BT=Lu.northwest,gS=Lu.south,VT=Lu.north,Dv=Lu.east,Rg=Lu.west,Hx=(o,c)=>{switch(c){case 1:return o.x;case 0:return o.x+o.width;case 2:return o.y;case 3:return o.y+o.height}},Jc=(o,c)=>pt(["left","right","top","bottom"],d=>Vt(c,d).map(m=>Hx(o,m))),Fx=(o,c,d)=>{const m=(F,W)=>c[F].map(Q=>{const oe=F==="top"||F==="bottom",pe=oe?d.top:d.left,Se=(F==="left"||F==="top"?Math.max:Math.min)(Q,W)+pe;return oe?Xi(Se,o.y,o.bottom):Xi(Se,o.x,o.right)}).getOr(W),S=m("left",o.x),w=m("top",o.y),T=m("right",o.right),V=m("bottom",o.bottom);return La(S,w,T-S,V-w)},kv="layout",$x=o=>o.x,a_=(o,c)=>o.x+o.width/2-c.width/2,HT=(o,c)=>o.x+o.width-c.width,vS=(o,c)=>o.y-c.height,FT=o=>o.y+o.height,Ux=(o,c)=>o.y+o.height/2-c.height/2,jx=o=>o.x+o.width,bS=(o,c)=>o.x-c.width,Ha=(o,c,d)=>Ca($x(o),FT(o),d.southeast(),xv(),"southeast",Jc(o,{left:1,top:3}),kv),hi=(o,c,d)=>Ca(HT(o,c),FT(o),d.southwest(),jb(),"southwest",Jc(o,{right:0,top:3}),kv),Xc=(o,c,d)=>Ca($x(o),vS(o,c),d.northeast(),LT(),"northeast",Jc(o,{left:1,bottom:2}),kv),Za=(o,c,d)=>Ca(HT(o,c),vS(o,c),d.northwest(),BT(),"northwest",Jc(o,{right:0,bottom:2}),kv),uc=(o,c,d)=>Ca(a_(o,c),vS(o,c),d.north(),VT(),"north",Jc(o,{bottom:2}),kv),Ea=(o,c,d)=>Ca(a_(o,c),FT(o),d.south(),gS(),"south",Jc(o,{top:3}),kv),c_=(o,c,d)=>Ca(jx(o),Ux(o,c),d.east(),Dv(),"east",Jc(o,{left:0}),kv),l_=(o,c,d)=>Ca(bS(o,c),Ux(o,c),d.west(),Rg(),"west",Jc(o,{right:1}),kv),u_=()=>[Ha,hi,Xc,Za,Ea,uc,c_,l_],zx=()=>[hi,Ha,Za,Xc,Ea,uc,c_,l_],d_=()=>[Xc,Za,Ha,hi,uc,Ea],Wx=()=>[Za,Xc,hi,Ha,uc,Ea],zb=()=>[Ha,hi,Xc,Za,Ea,uc],$T=()=>[hi,Ha,Za,Xc,Ea,uc],Wb="data-alloy-placement",f_=(o,c)=>{Lo(o,Wb,c)},UT=o=>ic(o,Wb),p_=o=>Jr(o,Wb),Eh="layout-inset",yS=o=>o.x,jT=(o,c)=>o.x+o.width/2-c.width/2,Ty=(o,c)=>o.x+o.width-c.width,SS=o=>o.y,h_=(o,c)=>o.y+o.height-c.height,zT=(o,c)=>o.y+o.height/2-c.height/2,Dp=(o,c,d)=>Ca(Ty(o,c),h_(o,c),d.insetSouthwest(),BT(),"southwest",Jc(o,{right:0,bottom:3}),Eh),Am=(o,c,d)=>Ca(yS(o),h_(o,c),d.insetSoutheast(),LT(),"southeast",Jc(o,{left:1,bottom:3}),Eh),Oy=(o,c,d)=>Ca(Ty(o,c),SS(o),d.insetNorthwest(),jb(),"northwest",Jc(o,{right:0,top:2}),Eh),Pt=(o,c,d)=>Ca(yS(o),SS(o),d.insetNortheast(),xv(),"northeast",Jc(o,{left:1,top:2}),Eh),Bu=(o,c,d)=>Ca(jT(o,c),SS(o),d.insetNorth(),gS(),"north",Jc(o,{top:2}),Eh),Iy=(o,c,d)=>Ca(jT(o,c),h_(o,c),d.insetSouth(),VT(),"south",Jc(o,{bottom:3}),Eh),CS=(o,c,d)=>Ca(Ty(o,c),zT(o,c),d.insetEast(),Rg(),"east",Jc(o,{right:0}),Eh),m_=(o,c,d)=>Ca(yS(o),zT(o,c),d.insetWest(),Dv(),"west",Jc(o,{left:1}),Eh),_h=o=>{switch(o){case"north":return Bu;case"northeast":return Pt;case"northwest":return Oy;case"south":return Iy;case"southeast":return Am;case"southwest":return Dp;case"east":return CS;case"west":return m_}},Nl=(o,c,d,m,S)=>UT(m).map(_h).getOr(Bu)(o,c,d,m,S),ES=o=>{switch(o){case"north":return Iy;case"northeast":return Am;case"northwest":return Dp;case"south":return Bu;case"southeast":return Pt;case"southwest":return Oy;case"east":return m_;case"west":return CS}},Gx=(o,c,d,m,S)=>UT(m).map(ES).getOr(Bu)(o,c,d,m,S),g_=(o,c)=>{gp(o,Math.floor(c))},qx=M((o,c)=>{g_(o,c),_i(o,{"overflow-x":"hidden","overflow-y":"auto"})}),Gb=M((o,c)=>{g_(o,c)}),WT=M((o,c)=>{oT(o,Math.floor(c))});var Tm;(function(o){o.TopToBottom="toptobottom",o.BottomToTop="bottomtotop"})(Tm||(Tm={}));const GT="data-alloy-vertical-dir",Kx=o=>sy(o,c=>Ec(c)&&Na(c,"data-alloy-vertical-dir")===Tm.BottomToTop);var Pl;(function(o){o[o.HighlightMenuAndItem=0]="HighlightMenuAndItem",o[o.HighlightJustMenu=1]="HighlightJustMenu",o[o.HighlightNone=2]="HighlightNone"})(Pl||(Pl={}));const wh={init:()=>pd({readState:M("No State required")})},pd=o=>o,v_={can:Ze,abort:Ke,run:K},Ry=o=>{if(!wn(o,"can")&&!wn(o,"abort")&&!wn(o,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(o,null,2)+" does not have can, abort, or run!");return{...v_,...o}},Zx=(o,c)=>(...d)=>Xt(o,(m,S)=>m&&c(S).apply(void 0,d),!0),h4=(o,c)=>(...d)=>Xt(o,(m,S)=>m||c(S).apply(void 0,d),!1),qT=o=>H(o)?{can:Ze,abort:Ke,run:o}:o,Yx=o=>{const c=Zx(o,S=>S.can),d=h4(o,S=>S.abort);return{can:c,abort:d,run:(...S)=>{Jt(o,w=>{w.run.apply(void 0,S)})}}},Rs=(o,c)=>{KT(o,o.element,c,{})},xo=(o,c,d)=>{KT(o,o.element,c,d)},_S=o=>{Rs(o,ld())},b_=(o,c,d)=>{KT(o,c,d,{})},KT=(o,c,d,m)=>{const S={target:c,...m};o.getSystem().triggerEvent(d,c,S)},m4=(o,c,d,m)=>{const S={...m,target:c};o.getSystem().triggerEvent(d,c,S)},ZT=(o,c,d,m)=>{o.getSystem().triggerEvent(d,c,m.event)},mi=o=>iS(o),y_=(o,c)=>({key:o,value:Ry({abort:c})}),wS=(o,c)=>({key:o,value:Ry({can:c})}),qb=o=>({key:o,value:Ry({run:(c,d)=>{d.event.prevent()}})}),Ft=(o,c)=>({key:o,value:Ry({run:c})}),S_=(o,c,d)=>({key:o,value:Ry({run:(m,S)=>{c.apply(void 0,[m,S].concat(d))}})}),Jx=o=>c=>Ft(o,c),C_=o=>c=>({key:o,value:Ry({run:(d,m)=>{uT(d,m)&&c(d,m)}})}),Xx=(o,c)=>Ft(o,(d,m)=>{d.getSystem().getByUid(c).each(S=>{ZT(S,S.element,o,m)})}),xg=(o,c,d)=>{const m=c.partUids[d];return Xx(o,m)},Kb=(o,c)=>Ft(o,(d,m)=>{const S=m.event,w=d.getSystem().getByDom(S.target).getOrThunk(()=>Gd(S.target,V=>d.getSystem().getByDom(V).toOptional(),Ke).getOr(d));c(d,w,m)}),Zb=o=>Ft(o,(c,d)=>{d.cut()}),YT=o=>Ft(o,(c,d)=>{d.stop()}),Yb=(o,c)=>C_(o)(c),Qr=C_(bh()),Ah=C_(Tg()),Qx=C_(zE()),Dg=Jx(ld()),kp=o=>({classes:N(o.classes)?[]:o.classes,attributes:N(o.attributes)?{}:o.attributes,styles:N(o.styles)?{}:o.styles}),g4=(o,c)=>({...o,attributes:{...o.attributes,...c.attributes},styles:{...o.styles,...c.styles},classes:o.classes.concat(c.classes)}),v4=(o,c,d)=>Dg(m=>{d(m,o,c)}),JT=(o,c,d)=>Qx((m,S)=>{d(m,o,c)}),b4=(o,c,d,m,S,w)=>{const T=Kd(o),V=cd(c,[AT("config",o)]);return XT(T,V,c,d,m,S,w)},y4=(o,c,d,m,S,w)=>{const T=o,V=cd(c,[wp("config",o)]);return XT(T,V,c,d,m,S,w)},S4=(o,c,d)=>Ox((S,...w)=>{const T=[S].concat(w);return S.config({name:M(o)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+o+". Using API: "+d)},V=>{const F=Array.prototype.slice.call(T,1);return c.apply(void 0,[S,V.config,V.state].concat(F))})},d,c),C4=o=>({key:o,value:void 0}),XT=(o,c,d,m,S,w,T)=>{const V=oe=>wn(oe,d)?oe[d]():z.none(),F=es(S,(oe,pe)=>S4(d,oe,pe)),Q={...es(w,(oe,pe)=>Rx(oe,pe)),...F,revoke:De(C4,d),config:oe=>{const pe=Mu(d+"-config",o,oe);return{key:d,value:{config:pe,me:Q,configAsRaw:ul(()=>Mu(d+"-config",o,oe)),initialConfig:oe,state:T}}},schema:M(c),exhibit:(oe,pe)=>bc(V(oe),Vt(m,"exhibit"),(Ee,Se)=>Se(pe,Ee.config,Ee.state)).getOrThunk(()=>kp({})),name:M(d),handlers:oe=>V(oe).map(pe=>Vt(m,"events").getOr(()=>({}))(pe.config,pe.state)).getOr({})};return Q},Tn=o=>iS(o),eD=Kd([sn("fields"),sn("name"),Ct("active",{}),Ct("apis",{}),Ct("state",wh),Ct("extra",{})]),Rc=o=>{const c=Mu("Creating behaviour: "+o.name,eD,o);return b4(c.fields,c.name,c.active,c.apis,c.extra,c.state)},tD=Kd([sn("branchKey"),sn("branches"),sn("name"),Ct("active",{}),Ct("apis",{}),Ct("state",wh),Ct("extra",{})]),nD=o=>{const c=Mu("Creating behaviour: "+o.name,tD,o);return y4(fu(c.branchKey,c.branches),c.name,c.active,c.apis,c.extra,c.state)},oD=M(void 0),E4=(o,c)=>{const d=mi(c);return Rc({fields:[sn("enabled")],name:o,active:{events:M(d)}})},Qo=(o,c)=>{const d=E4(o,c);return{key:o,value:{config:{},me:d,configAsRaw:M({}),initialConfig:{},state:wh}}},QT=o=>({init:()=>{const d=mn(o);return{get:()=>d.get(),set:V=>d.set(V),clear:()=>d.set(o),readState:()=>d.get()}}}),sD=(o,c)=>{c.ignore||(ja(o.element),c.onFocus(o))};var rD=Object.freeze({__proto__:null,focus:sD,blur:(o,c)=>{c.ignore||Oi(o.element)},isFocused:o=>Ud(o.element)}),iD=Object.freeze({__proto__:null,exhibit:(o,c)=>{const d=c.ignore?{}:{attributes:{tabindex:"-1"}};return kp(d)},events:o=>mi([Ft(ym(),(c,d)=>{sD(c,o),d.stop()})].concat(o.stopMousedown?[Ft(hu(),(c,d)=>{d.event.prevent()})]:[]))}),eO=[zs("onFocus"),Ct("stopMousedown",!1),Ct("ignore",!1)];const ns=Rc({fields:eO,name:"focusing",active:iD,apis:rD}),tO=[8],kg=[9],Qd=[13],Qn=[27],Ll=[32],AS=[37],TS=[38],E_=[39],xy=[40],OS=M("tooltipping.close.all"),Mg=M("dismiss.popups"),hl=M("reposition.popups"),Om=M("mouse.released"),A4=(o,c,d)=>{const m=Ot(o.slice(0,c)),S=Ot(o.slice(c+1));return bt(m.concat(S),d)},Qc=(o,c,d)=>{const m=Ot(o.slice(0,c));return bt(m,d)},Dy=(o,c,d)=>{const m=o.slice(0,c),S=o.slice(c+1);return bt(S.concat(m),d)},T4=(o,c,d)=>{const m=o.slice(c+1);return bt(m,d)},js=o=>c=>{const d=c.raw;return qt(o,d.which)},Th=o=>c=>dt(o,d=>d(c)),Jb=o=>o.raw.shiftKey===!0,y6=o=>o.raw.ctrlKey===!0,Xb=be(Jb),Ws=(o,c)=>({matches:o,classification:c}),S6=(o,c)=>bt(o,m=>m.matches(c)).map(m=>m.classification),aD=(o,c,d,m)=>{const S=Ga(o.element,"."+c.highlightClass);Jt(S,w=>{io(m,V=>de(V.element,w))||(Ii(w,c.highlightClass),o.getSystem().getByDom(w).each(V=>{c.onDehighlight(o,V),Rs(V,GE())}))})},C6=(o,c,d)=>aD(o,c,d,[]),E6=(o,c,d,m)=>{RS(o,c,d,m)&&(Ii(m.element,c.highlightClass),c.onDehighlight(o,m),Rs(m,GE()))},IS=(o,c,d,m)=>{aD(o,c,d,[m]),RS(o,c,d,m)||(Rr(m.element,c.highlightClass),c.onHighlight(o,m),Rs(m,$b()))},O4=(o,c,d)=>{xS(o,c).each(m=>{IS(o,c,d,m)})},_6=(o,c,d)=>{oO(o,c).each(m=>{IS(o,c,d,m)})},__=(o,c,d,m)=>{I4(o,c,d,m).fold(S=>{throw S},S=>{IS(o,c,d,S)})},nO=(o,c,d,m)=>{const S=dD(o,c);bt(S,m).each(T=>{IS(o,c,d,T)})},RS=(o,c,d,m)=>na(m.element,c.highlightClass),cD=(o,c,d)=>yr(o.element,"."+c.highlightClass).bind(m=>o.getSystem().getByDom(m).toOptional()),I4=(o,c,d,m)=>{const S=Ga(o.element,"."+c.itemClass);return z.from(S[m]).fold(()=>fo.error(new Error("No element found with index "+m)),o.getSystem().getByDom)},xS=(o,c,d)=>yr(o.element,"."+c.itemClass).bind(m=>o.getSystem().getByDom(m).toOptional()),oO=(o,c,d)=>{const m=Ga(o.element,"."+c.itemClass);return(m.length>0?z.some(m[m.length-1]):z.none()).bind(w=>o.getSystem().getByDom(w).toOptional())},sO=(o,c,d,m)=>{const S=Ga(o.element,"."+c.itemClass);return Kt(S,T=>na(T,c.highlightClass)).bind(T=>{const V=cl(T,m,0,S.length-1);return o.getSystem().getByDom(S[V]).toOptional()})},lD=(o,c,d)=>sO(o,c,d,-1),uD=(o,c,d)=>sO(o,c,d,1),dD=(o,c,d)=>{const m=Ga(o.element,"."+c.itemClass);return ou(Et(m,S=>o.getSystem().getByDom(S).toOptional()))};var rO=Object.freeze({__proto__:null,dehighlightAll:C6,dehighlight:E6,highlight:IS,highlightFirst:O4,highlightLast:_6,highlightAt:__,highlightBy:nO,isHighlighted:RS,getHighlighted:cD,getFirst:xS,getLast:oO,getPrevious:lD,getNext:uD,getCandidates:dD}),iO=[sn("highlightClass"),sn("itemClass"),zs("onHighlight"),zs("onDehighlight")];const ir=Rc({fields:iO,name:"highlighting",apis:rO}),fD=(o,c,d)=>{c.exists(S=>d.exists(w=>de(w,S)))||xo(o,cS(),{prevFocus:c,newFocus:d})},w_=()=>{const o=d=>ea(d.element);return{get:o,set:(d,m)=>{const S=o(d);d.getSystem().triggerFocus(m,d.element);const w=o(d);fD(d,S,w)}}},aO=()=>{const o=d=>ir.getHighlighted(d).map(m=>m.element);return{get:o,set:(d,m)=>{const S=o(d);d.getSystem().getByDom(m).fold(K,T=>{ir.highlight(d,T)});const w=o(d);fD(d,S,w)}}},Df=(o,c,d,m,S)=>{const w=()=>o.concat([Ct("focusManager",w_()),pu("focusInside","onFocus",Sv(W=>qt(["onFocus","onEnterOrSpace","onApi"],W)?fo.value(W):fo.error("Invalid value for focusInside"))),pi("handler",F),pi("state",c),pi("sendFocusIn",S)]),T=(W,Q,oe,pe,Ee)=>{const Se=oe(W,Q,pe,Ee);return S6(Se,Q.event).bind(Pe=>Pe(W,Q,pe,Ee))},F={schema:w,processKey:T,toEvents:(W,Q)=>{const oe=W.focusInside!==xp.OnFocusMode?z.none():S(W).map(Se=>Ft(ym(),(Pe,qe)=>{Se(Pe,W,Q),qe.stop()})),pe=(Se,Pe)=>{const qe=js(Ll.concat(Qd))(Pe.event);W.focusInside===xp.OnEnterOrSpaceMode&&qe&&uT(Se,Pe)&&S(W).each(Le=>{Le(Se,W,Q),Pe.stop()})},Ee=[Ft(lc(),(Se,Pe)=>{T(Se,Pe,d,W,Q).fold(()=>{pe(Se,Pe)},qe=>{Pe.stop()})}),Ft(Sy(),(Se,Pe)=>{T(Se,Pe,m,W,Q).each(qe=>{Pe.stop()})})];return mi(oe.toArray().concat(Ee))}};return F},pD=o=>{const c=[xr("onEscape"),xr("onEnter"),Ct("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Ct("firstTabstop",0),Ct("useTabstopAt",Ze),xr("visibilitySelector")].concat([o]),d=(Le,Je)=>{const nt=Le.visibilitySelector.bind(Tt=>qc(Je,Tt)).getOr(Je);return fa(nt)>0},m=(Le,Je)=>{const nt=Ga(Le.element,Je.selector),Tt=Fo(nt,xt=>d(Je,xt));return z.from(Tt[Je.firstTabstop])},S=(Le,Je)=>Je.focusManager.get(Le).bind(nt=>qc(nt,Je.selector)),w=(Le,Je)=>d(Le,Je)&&Le.useTabstopAt(Je),T=(Le,Je,nt)=>{m(Le,Je).each(Tt=>{Je.focusManager.set(Le,Tt)})},V=(Le,Je,nt,Tt,xt)=>xt(Je,nt,jn=>w(Tt,jn)).fold(()=>Tt.cyclic?z.some(!0):z.none(),jn=>(Tt.focusManager.set(Le,jn),z.some(!0))),F=(Le,Je,nt,Tt)=>{const xt=Fo(Ga(Le.element,nt.selector),jn=>d(nt,jn));return S(Le,nt).bind(jn=>Kt(xt,De(de,jn)).bind(pn=>V(Le,xt,pn,nt,Tt)))},W=(Le,Je,nt)=>{const Tt=nt.cyclic?A4:Qc;return F(Le,Je,nt,Tt)},Q=(Le,Je,nt)=>{const Tt=nt.cyclic?Dy:T4;return F(Le,Je,nt,Tt)},oe=Le=>To(Le).bind(eo).exists(Je=>de(Je,Le)),pe=(Le,Je,nt)=>S(Le,nt).filter(Tt=>!nt.useTabstopAt(Tt)).bind(Tt=>(oe(Tt)?W:Q)(Le,Je,nt)),Ee=(Le,Je,nt)=>nt.onEnter.bind(Tt=>Tt(Le,Je)),Se=(Le,Je,nt)=>(Le.getSystem().broadcastOn([OS()],{closedTooltip:()=>{Je.stop()}}),Je.isStopped()?z.none():nt.onEscape.bind(Tt=>Tt(Le,Je))),Pe=M([Ws(Th([Jb,js(kg)]),W),Ws(js(kg),Q),Ws(Th([Xb,js(Qd)]),Ee)]),qe=M([Ws(js(Qn),Se),Ws(js(kg),pe)]);return Df(c,wh.init,Pe,qe,()=>z.some(T))};var cO=pD(fl("cyclic",Ke)),R4=pD(fl("cyclic",Ze));const Im=o=>$a("input")(o)&&Na(o,"type")!=="radio"||$a("textarea")(o),x4=(o,c,d)=>(b_(o,d,ld()),z.some(!0)),DS=(o,c,d)=>Im(d)&&js(Ll)(c.event)?z.none():x4(o,c,d),kS=(o,c)=>z.some(!0),D4=[Ct("execute",DS),Ct("useSpace",!1),Ct("useEnter",!0),Ct("useControlEnter",!1),Ct("useDown",!1)],Mv=(o,c,d)=>d.execute(o,c,o.element),A_=(o,c,d,m)=>{const S=d.useSpace&&!Im(o.element)?Ll:[],w=d.useEnter?Qd:[],T=d.useDown?xy:[],V=S.concat(w).concat(T);return[Ws(js(V),Mv)].concat(d.useControlEnter?[Ws(Th([y6,js(Qd)]),Mv)]:[])},hD=(o,c,d,m)=>d.useSpace&&!Im(o.element)?[Ws(js(Ll),kS)]:[];var k4=Df(D4,wh.init,A_,hD,()=>z.none());const mD=()=>{const o=$o();return pd({readState:()=>o.get().map(S=>({numRows:String(S.numRows),numColumns:String(S.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(S,w)=>{o.set({numRows:S,numColumns:w})},getNumRows:()=>o.get().map(S=>S.numRows),getNumColumns:()=>o.get().map(S=>S.numColumns)})};var gD=Object.freeze({__proto__:null,flatgrid:mD,init:o=>o.state(o)});const vD=o=>(c,d,m,S)=>{const w=o(c.element);return Qb(w,c,d,m,S)},MS=(o,c)=>{const d=Z1(o,c);return vD(d)},NS=(o,c)=>{const d=Z1(c,o);return vD(d)},PS=o=>(c,d,m,S)=>Qb(o,c,d,m,S),Qb=(o,c,d,m,S)=>m.focusManager.get(c).bind(T=>o(c.element,T,m,S)).map(T=>(m.focusManager.set(c,T),!0)),T_=PS,LS=PS,Ng=PS,BS=(o,c)=>Kt(o,c).map(d=>({index:d,candidates:o})),lO=(o,c,d)=>{const m=T=>de(T,c),S=Ga(o,d),w=Fo(S,uh);return BS(w,m)},O_=(o,c)=>Kt(o,d=>de(c,d)),bD=(o,c,d,m)=>{const S=Math.floor(c/d),w=c%d;return m(S,w).bind(T=>{const V=T.row*d+T.column;return V>=0&&V<o.length?z.some(o[V]):z.none()})},yD=(o,c,d,m,S)=>bD(o,c,m,(w,T)=>{const F=w===d-1?o.length-w*m:m,W=cl(T,S,0,F-1);return z.some({row:w,column:W})}),SD=(o,c,d,m,S)=>bD(o,c,m,(w,T)=>{const V=cl(w,S,0,d-1),W=V===d-1?o.length-V*m:m,Q=Xi(T,0,W-1);return z.some({row:V,column:Q})}),M4=(o,c,d,m)=>yD(o,c,d,m,1),I_=(o,c,d,m)=>yD(o,c,d,m,-1),ky=(o,c,d,m)=>SD(o,c,d,m,-1),e0=(o,c,d,m)=>SD(o,c,d,m,1),t0=[sn("selector"),Ct("execute",DS),Ba("onEscape"),Ct("captureTab",!1),KE()],CD=(o,c,d)=>{yr(o.element,c.selector).each(m=>{c.focusManager.set(o,m)})},ED=(o,c)=>c.focusManager.get(o).bind(d=>qc(d,c.selector)),_D=(o,c,d,m)=>ED(o,d).bind(S=>d.execute(o,c,S)),R_=o=>(c,d,m,S)=>lO(c,d,m.selector).bind(w=>o(w.candidates,w.index,S.getNumRows().getOr(m.initSize.numRows),S.getNumColumns().getOr(m.initSize.numColumns))),wD=(o,c,d)=>d.captureTab?z.some(!0):z.none(),N4=(o,c,d)=>d.onEscape(o,c),AD=R_(I_),x_=R_(M4),uO=R_(ky),D_=R_(e0),dO=M([Ws(js(AS),MS(AD,x_)),Ws(js(E_),NS(AD,x_)),Ws(js(TS),T_(uO)),Ws(js(xy),LS(D_)),Ws(Th([Jb,js(kg)]),wD),Ws(Th([Xb,js(kg)]),wD),Ws(js(Ll.concat(Qd)),_D)]),P4=M([Ws(js(Qn),N4),Ws(js(Ll),kS)]);var fO=Df(t0,mD,dO,P4,()=>z.some(CD));const TD=(o,c,d,m,S)=>{const w=V=>dl(V)==="button"&&Na(V,"disabled")==="disabled",T=(V,F,W)=>S(V,F,m,0,W.length-1,W[F],Q=>w(W[Q])?T(V,Q,W):z.from(W[Q]));return lO(o,d,c).bind(V=>{const F=V.index,W=V.candidates;return T(F,F,W)})},OD=(o,c,d,m)=>TD(o,c,d,m,(S,w,T,V,F,W,Q)=>{const oe=Xi(w+T,V,F);return oe===S?z.from(W):Q(oe)}),VS=(o,c,d,m)=>TD(o,c,d,m,(S,w,T,V,F,W,Q)=>{const oe=cl(w,T,V,F);return oe===S?z.none():Q(oe)}),L4=[sn("selector"),Ct("getInitial",z.none),Ct("execute",DS),Ba("onEscape"),Ct("executeOnMove",!1),Ct("allowVertical",!0),Ct("allowHorizontal",!0),Ct("cycles",!0)],pO=(o,c)=>c.focusManager.get(o).bind(d=>qc(d,c.selector)),hO=(o,c,d)=>pO(o,d).bind(m=>d.execute(o,c,m)),B4=(o,c,d)=>{c.getInitial(o).orThunk(()=>yr(o.element,c.selector)).each(m=>{c.focusManager.set(o,m)})},V4=(o,c,d)=>(d.cycles?VS:OD)(o,d.selector,c,-1),n0=(o,c,d)=>(d.cycles?VS:OD)(o,d.selector,c,1),ID=o=>(c,d,m,S)=>o(c,d,m,S).bind(()=>m.executeOnMove?hO(c,d,m):z.some(!0)),RD=(o,c,d)=>d.onEscape(o,c),H4=(o,c,d,m)=>{const S=[...d.allowHorizontal?AS:[]].concat(d.allowVertical?TS:[]),w=[...d.allowHorizontal?E_:[]].concat(d.allowVertical?xy:[]);return[Ws(js(S),ID(MS(V4,n0))),Ws(js(w),ID(NS(V4,n0))),Ws(js(Qd),hO),Ws(js(Ll),hO)]},F4=M([Ws(js(Ll),kS),Ws(js(Qn),RD)]);var $4=Df(L4,wh.init,H4,F4,()=>z.some(B4));const k_=(o,c,d)=>z.from(o[c]).bind(m=>z.from(m[d]).map(S=>({rowIndex:c,columnIndex:d,cell:S}))),HS=(o,c,d,m)=>{const w=o[c].length,T=cl(d,m,0,w-1);return k_(o,c,T)},mO=(o,c,d,m)=>{const S=cl(d,m,0,o.length-1),w=o[S].length,T=Xi(c,0,w-1);return k_(o,S,T)},FS=(o,c,d,m)=>{const w=o[c].length,T=Xi(d+m,0,w-1);return k_(o,c,T)},xD=(o,c,d,m)=>{const S=Xi(d+m,0,o.length-1),w=o[S].length,T=Xi(c,0,w-1);return k_(o,S,T)},$S=(o,c,d)=>HS(o,c,d,1),U4=(o,c,d)=>HS(o,c,d,-1),M_=(o,c,d)=>mO(o,d,c,-1),j4=(o,c,d)=>mO(o,d,c,1),DD=(o,c,d)=>FS(o,c,d,-1),A6=(o,c,d)=>FS(o,c,d,1),z4=(o,c,d)=>xD(o,d,c,-1),o0=(o,c,d)=>xD(o,d,c,1),N_=[Cg("selectors",[sn("row"),sn("cell")]),Ct("cycles",!0),Ct("previousSelector",z.none),Ct("execute",DS)],P_=(o,c,d)=>{c.previousSelector(o).orThunk(()=>{const S=c.selectors;return yr(o.element,S.cell)}).each(S=>{c.focusManager.set(o,S)})},kD=(o,c,d)=>ea(o.element).bind(m=>d.execute(o,c,m)),W4=(o,c)=>Et(o,d=>Ga(d,c.selectors.cell)),L_=(o,c)=>(d,m,S)=>{const w=S.cycles?o:c;return qc(m,S.selectors.row).bind(T=>{const V=Ga(T,S.selectors.cell);return O_(V,m).bind(F=>{const W=Ga(d,S.selectors.row);return O_(W,T).bind(Q=>{const oe=W4(W,S);return w(oe,Q,F).map(pe=>pe.cell)})})})},MD=L_(U4,DD),ND=L_($S,A6),B_=L_(M_,z4),Rm=L_(j4,o0),PD=M([Ws(js(AS),MS(MD,ND)),Ws(js(E_),NS(MD,ND)),Ws(js(TS),T_(B_)),Ws(js(xy),LS(Rm)),Ws(js(Ll.concat(Qd)),kD)]),G4=M([Ws(js(Ll),kS)]);var q4=Df(N_,wh.init,PD,G4,()=>z.some(P_));const K4=[sn("selector"),Ct("execute",DS),Ct("moveOnTab",!1)],My=(o,c,d)=>d.focusManager.get(o).bind(m=>d.execute(o,c,m)),LD=(o,c,d)=>{yr(o.element,c.selector).each(m=>{c.focusManager.set(o,m)})},gO=(o,c,d)=>VS(o,d.selector,c,-1),V_=(o,c,d)=>VS(o,d.selector,c,1),Oh=(o,c,d,m)=>d.moveOnTab?Ng(gO)(o,c,d,m):z.none(),US=(o,c,d,m)=>d.moveOnTab?Ng(V_)(o,c,d,m):z.none(),xm=M([Ws(js(TS),Ng(gO)),Ws(js(xy),Ng(V_)),Ws(Th([Jb,js(kg)]),Oh),Ws(Th([Xb,js(kg)]),US),Ws(js(Qd),My),Ws(js(Ll),My)]),vO=M([Ws(js(Ll),kS)]);var BD=Df(K4,wh.init,xm,vO,()=>z.some(LD));const VD=[Ba("onSpace"),Ba("onEnter"),Ba("onShiftEnter"),Ba("onLeft"),Ba("onRight"),Ba("onTab"),Ba("onShiftTab"),Ba("onUp"),Ba("onDown"),Ba("onEscape"),Ct("stopSpaceKeyup",!1),xr("focusIn")],Z4=(o,c,d)=>[Ws(js(Ll),d.onSpace),Ws(Th([Xb,js(Qd)]),d.onEnter),Ws(Th([Jb,js(Qd)]),d.onShiftEnter),Ws(Th([Jb,js(kg)]),d.onShiftTab),Ws(Th([Xb,js(kg)]),d.onTab),Ws(js(TS),d.onUp),Ws(js(xy),d.onDown),Ws(js(AS),d.onLeft),Ws(js(E_),d.onRight),Ws(js(Ll),d.onSpace)],HD=(o,c,d)=>[...d.stopSpaceKeyup?[Ws(js(Ll),kS)]:[],Ws(js(Qn),d.onEscape)];var Y4=Df(VD,wh.init,Z4,HD,o=>o.focusIn);const J4=cO.schema(),X4=R4.schema(),Ny=$4.schema(),jS=fO.schema(),FD=q4.schema(),Dm=k4.schema(),km=BD.schema(),bO=Y4.schema();var H_=Object.freeze({__proto__:null,acyclic:J4,cyclic:X4,flow:Ny,flatgrid:jS,matrix:FD,execution:Dm,menu:km,special:bO});const $D=o=>wn(o,"setGridSize"),wo=nD({branchKey:"mode",branches:H_,name:"keying",active:{events:(o,c)=>o.handler.toEvents(o,c)},apis:{focusIn:(o,c,d)=>{c.sendFocusIn(c).fold(()=>{o.getSystem().triggerFocus(o.element,o.element)},m=>{m(o,c,d)})},setGridSize:(o,c,d,m,S)=>{$D(d)?d.setGridSize(m,S):console.error("Layout does not support setGridSize")}},state:gD}),Nv=Un("alloy-premade"),Py=o=>(Object.defineProperty(o.element.dom,Nv,{value:o.uid,writable:!0}),Eg(Nv,o)),yO=o=>Pn(o.dom,Nv),F_=o=>Vt(o,Nv),Pg=o=>m6((c,...d)=>o(c.getApis(),c,...d),o),Ly=o=>o.getSystem().isConnected(),zS=o=>{Rs(o,Tg());const c=o.components();Jt(c,zS)},Pv=o=>{const c=o.components();Jt(c,Pv),Rs(o,bh())},By=(o,c)=>{o.getSystem().addToWorld(c),Qs(o.element)&&Pv(c)},SO=o=>{zS(o),o.getSystem().removeFromWorld(o)},Ih=(o,c)=>{Wa(o.element,c.element)},CO=o=>{Jt(o.components(),c=>od(c.element)),ty(o.element),o.syncComponents()},$_=(o,c,d)=>{const m=o.components();CO(o);const S=d(c),w=Oe(m,S);Jt(w,T=>{zS(T),o.getSystem().removeFromWorld(T)}),Jt(S,T=>{Ly(T)?Ih(o,T):(o.getSystem().addToWorld(T),Ih(o,T),Qs(o.element)&&Pv(T))}),o.syncComponents()},Rh=(o,c,d)=>{const m=o.components(),S=Ue(c,V=>F_(V).toArray());Jt(m,V=>{qt(S,V)||SO(V)});const w=d(c),T=Oe(m,w);Jt(T,V=>{Ly(V)&&SO(V)}),Jt(w,V=>{Ly(V)||By(o,V)}),o.syncComponents()},Mm=(o,c)=>{Lv(o,c,Wa)},Lv=(o,c,d)=>{o.getSystem().addToWorld(c),d(o.element,c.element),Qs(o.element)&&Pv(c),o.syncComponents()},s0=o=>{zS(o),od(o.element),o.getSystem().removeFromWorld(o)},Nm=o=>{const c=Sn(o.element).bind(d=>o.getSystem().getByDom(d).toOptional());s0(o),c.each(d=>{d.syncComponents()})},EO=o=>{const c=o.components();Jt(c,s0),ty(o.element),o.syncComponents()},WS=(o,c)=>{Dh(o,c,Wa)},xh=(o,c)=>{Dh(o,c,CE)},Dh=(o,c,d)=>{d(o,c.element);const m=Es(c.element);Jt(m,S=>{c.getByDom(S).each(Pv)})},UD=o=>{const c=Es(o.element);Jt(c,d=>{o.getByDom(d).each(zS)}),od(o.element)},_O=(o,c,d)=>Ks(o,c).map(S=>{if(d.exists(T=>!de(T,S))){const T=d.map(dl).getOr("span"),V=kn.fromTag(T);return cm(S,V),V}else return S}),wO=(o,c,d)=>{d.fold(()=>Wa(o,c),m=>{de(m,c)||(cm(m,c),od(m))})},AO=(o,c,d)=>{const m=Et(c,d),S=Es(o);return Jt(S.slice(m.length),od),m},jD=(o,c,d,m)=>{const S=Ks(o,c),w=m(d,S),T=_O(o,c,S);return wO(o,w.element,T),w},T6=(o,c,d)=>AO(o,c,(m,S)=>jD(o,S,m,d)),Q4=(o,c)=>AO(o,c,(d,m)=>{const S=Ks(o,m);return wO(o,d,S),d}),Bl=(o,c)=>{const d=Ei(c),m=za(d).bind(w=>{const T=V=>de(w,V);return T(c)?z.some(c):J1(c,T)}),S=o(c);return m.each(w=>{za(d).filter(T=>de(T,w)).fold(()=>{ja(w)},K)}),S},r0=(o,c)=>{Bl(()=>{$_(o,c,()=>Et(c,o.getSystem().build))},o.element)},TO=(o,c)=>{Bl(()=>{Rh(o,c,()=>T6(o.element,c,o.getSystem().buildOrPatch))},o.element)},Bv=(o,c,d,m)=>{SO(c);const S=jD(o.element,d,m,o.getSystem().buildOrPatch);By(o,S),o.syncComponents()},Vl=(o,c,d)=>{const m=o.getSystem().build(d);Lv(o,m,c)},gu=(o,c,d,m)=>{Nm(c),Vl(o,(S,w)=>j1(S,w,d),m)},Hl=(o,c,d,m)=>(c.reuseDom?TO:r0)(o,m),Mp=(o,c,d,m)=>{Vl(o,Wa,m)},Lg=(o,c,d,m)=>{Vl(o,ey,m)},Vu=(o,c,d,m)=>{const S=Pm(o);bt(S,T=>de(m.element,T.element)).each(Nm)},Pm=(o,c)=>o.components(),zD=(o,c,d,m,S)=>{const w=Pm(o);return z.from(w[m]).map(T=>(S.fold(()=>Nm(T),V=>{(c.reuseDom?Bv:gu)(o,T,m,V)}),T))};var WD=Object.freeze({__proto__:null,append:Mp,prepend:Lg,remove:Vu,replaceAt:zD,replaceBy:(o,c,d,m,S)=>{const w=Pm(o);return Kt(w,m).bind(T=>zD(o,c,d,T,S))},set:Hl,contents:Pm});const os=Rc({fields:[Zc("reuseDom",!0)],name:"replacing",apis:WD}),U_=(o,c,d)=>de(c,o.element)&&!de(c,d),kf=mi([wS(ym(),(o,c)=>{const d=c.event,m=d.originator,S=d.target;return U_(o,m,S)?(console.warn(ym()+` did not get interpreted by the desired target. 
Originator: `+Rf(m)+`
Target: `+Rf(S)+`
Check the `+ym()+" event handlers"),!1):!0})]);var GD=Object.freeze({__proto__:null,events:kf});const e3=M("alloy-id-"),t3=M("data-alloy-id"),n3=e3(),qD=t3(),OO=(o,c)=>{const d=Un(n3+o);return GS(c,d),d},GS=(o,c)=>{Object.defineProperty(o.dom,qD,{value:c,writable:!0})},Mf=o=>{const c=Ec(o)?o.dom[qD]:null;return z.from(c)},i0=o=>Un(o),o3=we,j_=o=>{const c=S=>`The component must be in a context to execute: ${S}`+(o?`
`+Rf(o().element)+" is not in context.":""),d=S=>()=>{throw new Error(c(S))},m=S=>()=>{console.warn(c(S))};return{debugInfo:M("fake"),triggerEvent:m("triggerEvent"),triggerFocus:m("triggerFocus"),triggerEscape:m("triggerEscape"),broadcast:m("broadcast"),broadcastOn:m("broadcastOn"),broadcastEvent:m("broadcastEvent"),build:d("build"),buildOrPatch:d("buildOrPatch"),addToWorld:d("addToWorld"),removeFromWorld:d("removeFromWorld"),addToGui:d("addToGui"),removeFromGui:d("removeFromGui"),getByUid:d("getByUid"),getByDom:d("getByDom"),isConnected:Ke}},s3=j_(),z_=(o,c)=>{const d=Et(c,S=>cd(S.name(),[sn("config"),Ct("state",wh)])),m=Hi("component.behaviours",zo(d),o.behaviours).fold(S=>{throw new Error(Cv(S)+`
Complete spec:
`+JSON.stringify(o,null,2))},we);return{list:c,data:es(m,S=>{const w=S.map(T=>({config:T.config,state:T.state.init(T.config)}));return M(w)})}},xc=o=>o.list,r3=o=>o.data,hd=(o,c)=>{const d={};return ps(o,(m,S)=>{ps(m,(w,T)=>{const V=Vt(d,T).getOr([]);d[T]=V.concat([c(S,w)])})}),d},I6=(o,c,d,m)=>{const S={...c};Jt(d,Q=>{S[Q.name()]=Q.exhibit(o,m)});const w=hd(S,(Q,oe)=>({name:Q,modification:oe})),T=Q=>yt(Q,(oe,pe)=>({...pe.modification,...oe}),{}),V=yt(w.classes,(Q,oe)=>oe.modification.concat(Q),[]),F=T(w.attributes),W=T(w.styles);return kp({classes:V,attributes:F,styles:W})},W_=(o,c,d,m)=>{try{const S=tn(d,(w,T)=>{const V=w[c],F=T[c],W=m.indexOf(V),Q=m.indexOf(F);if(W===-1)throw new Error("The ordering for "+o+" does not have an entry for "+V+`.
Order specified: `+JSON.stringify(m,null,2));if(Q===-1)throw new Error("The ordering for "+o+" does not have an entry for "+F+`.
Order specified: `+JSON.stringify(m,null,2));return W<Q?-1:Q<W?1:0});return fo.value(S)}catch(S){return fo.error([S])}},a0=(o,c)=>({handler:o,purpose:c}),IO=(o,c)=>({cHandler:o,purpose:c}),RO=(o,c)=>IO(De.apply(void 0,[o.handler].concat(c)),o.purpose),xO=o=>o.cHandler,i3=(o,c)=>({name:o,handler:c}),G_=(o,c)=>{const d={};return Jt(o,m=>{d[m.name()]=m.handlers(c)}),d},KD=(o,c,d)=>{const m={...d,...G_(c,o)};return hd(m,i3)},q_=(o,c,d,m)=>{const S=KD(o,d,m);return ZD(S,c)},Vv=o=>{const c=qT(o);return(d,m,...S)=>{const w=[d,m].concat(S);c.abort.apply(void 0,w)?m.stop():c.can.apply(void 0,w)&&c.run.apply(void 0,w)}},Vy=(o,c)=>fo.error(["The event ("+o+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Et(c,d=>d.name),null,2)]),DO=(o,c,d)=>{const m=c[d];return m?W_("Event: "+d,"name",o,m).map(S=>{const w=Et(S,T=>T.handler);return Yx(w)}):Vy(d,o)},ZD=(o,c)=>{const d=Nn(o,(m,S)=>(m.length===1?fo.value(m[0].handler):DO(m,c,S)).map(T=>{const V=Vv(T),F=m.length>1?Fo(c[S],W=>io(m,Q=>Q.name===W)).join(" > "):m[0].name;return Eg(S,a0(V,F))}));return Yc(d,{})},Bg="alloy.base.behaviour",K_=zo([cc("dom","dom",Cp(),zo([sn("tag"),Ct("styles",{}),Ct("classes",[]),Ct("attributes",{}),xr("value"),xr("innerHtml")])),sn("components"),sn("uid"),Ct("events",{}),Ct("apis",{}),cc("eventOrder","eventOrder",vT({[ld()]:["disabling",Bg,"toggling","typeaheadevents"],[ym()]:[Bg,"focusing","keying"],[zE()]:[Bg,"disabling","toggling","representing","tooltipping"],[Ag()]:[Bg,"representing","streaming","invalidating"],[Tg()]:[Bg,"representing","item-events","toolbar-button-events","tooltipping"],[hu()]:["focusing",Bg,"item-type-events"],[_g()]:["focusing",Bg,"item-type-events"],[Ap()]:["item-type-events","tooltipping"],[Pb()]:["receiving","reflecting","tooltipping"]}),gn()),xr("domModification")]),kO=o=>Hi("custom.definition",K_,o),Z_=o=>({...o.dom,uid:o.uid,domChildren:Et(o.components,c=>c.element)}),qS=o=>o.domModification.fold(()=>kp({}),kp),MO=o=>o.events,KS=(o,c)=>{const d=Jn(o),m=Jn(c),S=Oe(m,d),w=It(o,(T,V)=>!Pn(c,V)||T!==c[V]).t;return{toRemove:S,toSet:w}},NO=(o,c)=>{const{class:d,style:m,...S}=lm(c),{toSet:w,toRemove:T}=KS(o.attributes,S),V=()=>{Jt(T,nt=>Jr(c,nt)),z1(c,w)},F=da(c),{toSet:W,toRemove:Q}=KS(o.styles,F),oe=()=>{Jt(Q,nt=>Ds(c,nt)),_i(c,W)},pe=tS(c),Ee=Oe(pe,o.classes),Se=Oe(o.classes,pe),Pe=()=>{Sp(c,Se),Kc(c,Ee)},qe=nt=>{jd(c,nt)},Le=()=>{const nt=o.domChildren;Q4(c,nt)},Je=()=>{const nt=c,Tt=o.value.getOrUndefined();Tt!==au(nt)&&Af(nt,Tt??"")};return V(),Pe(),oe(),o.innerHtml.fold(Le,qe),Je(),c},a3=o=>{const c=kn.fromTag(o.tag);z1(c,o.attributes),Sp(c,o.classes),_i(c,o.styles),o.innerHtml.each(m=>jd(c,m));const d=o.domChildren;return EE(c,d),o.value.each(m=>{Af(c,m)}),c},c3=(o,c)=>{try{const d=NO(o,c);return z.some(d)}catch{return z.none()}},PO=o=>o.innerHtml.isSome()&&o.domChildren.length>0,ZS=(o,c)=>{const d=S=>dl(S)===o.tag&&!PO(o)&&!yO(S),m=c.filter(d).bind(S=>c3(o,S)).getOrThunk(()=>a3(o));return GS(m,o.uid),m},LO=o=>{const c=Vt(o,"behaviours").getOr({});return Ue(Jn(c),d=>{const m=c[d];return B(m)?[m.me]:[]})},YD=(o,c)=>z_(o,c),Y_=o=>{const c=LO(o);return YD(o,c)},l3=(o,c,d)=>{const m=Z_(o),S=qS(o),w={"alloy.base.modification":S},T=c.length>0?I6(d,w,c,m):S;return g4(m,T)},JD=(o,c,d)=>{const m={"alloy.base.behaviour":MO(o)};return q_(d,o.eventOrder,c,m).getOrDie()},BO=(o,c)=>{const d=()=>nt,m=mn(s3),S=_p(kO(o)),w=Y_(o),T=xc(w),V=r3(w),F=l3(S,T,V),W=ZS(F,c),Q=JD(S,T,V),oe=mn(S.components),pe=Tt=>{m.set(Tt)},Ee=()=>{m.set(j_(d))},Se=()=>{const Tt=Es(W),xt=Ue(Tt,jn=>m.get().getByDom(jn).fold(()=>[],Bt));oe.set(xt)},Pe=Tt=>{const xt=V;return(H(xt[Tt.name()])?xt[Tt.name()]:()=>{throw new Error("Could not find "+Tt.name()+" in "+JSON.stringify(o,null,2))})()},qe=Tt=>H(V[Tt.name()]),Le=()=>S.apis,Je=Tt=>V[Tt]().map(xt=>xt.state.readState()).getOr("not enabled"),nt={uid:o.uid,getSystem:m.get,config:Pe,hasConfigured:qe,spec:o,readState:Je,getApis:Le,connect:pe,disconnect:Ee,element:W,syncComponents:Se,components:oe.get,events:Q};return nt},Hy=(o,c)=>{const d=Vt(o,"components").getOr([]);return c.fold(()=>Et(d,O),m=>Et(d,(S,w)=>C(S,Ks(m,w))))},VO=(o,c)=>{const{events:d,...m}=o3(o),S=Hy(m,c),w={...m,events:{...GD,...d},components:S};return fo.value(BO(w,c))},gi=o=>{const c=kn.fromText(o);return XD({element:c})},XD=o=>{const c=Mu("external.component",Kd([sn("element"),xr("uid")]),o),d=mn(j_()),m=V=>{d.set(V)},S=()=>{d.set(j_(()=>T))},w=c.uid.getOrThunk(()=>i0("external"));GS(c.element,w);const T={uid:w,getSystem:d.get,config:z.none,hasConfigured:Ke,connect:m,disconnect:S,getApis:()=>({}),element:c.element,spec:o,readState:M("No state"),syncComponents:K,components:M([]),events:{}};return Py(T)},QD=i0,g=o=>Pn(o,"uid"),C=(o,c)=>F_(o).getOrThunk(()=>{const d=g(o)?o:{uid:QD(""),...o};return VO(d,c).getOrDie()}),O=o=>C(o,z.none()),P=Py;var ye=Object.freeze({__proto__:null,block:(o,c,d,m)=>{Lo(o.element,"aria-busy",!0);const S=c.getRoot(o).getOr(o),w=Tn([wo.config({mode:"special",onTab:()=>z.some(!0),onShiftTab:()=>z.some(!0)}),ns.config({})]),T=m(S,w),V=S.getSystem().build(T);os.append(S,P(V)),V.hasConfigured(wo)&&c.focus&&wo.focusIn(V),d.isBlocked()||c.onBlock(o),d.blockWith(()=>os.remove(S,V))},unblock:(o,c,d)=>{Jr(o.element,"aria-busy"),d.isBlocked()&&c.onUnblock(o),d.clear()},isBlocked:(o,c,d)=>d.isBlocked()}),xe=[Or("getRoot",z.none),Zc("focus",!0),zs("onBlock"),zs("onUnblock")],vt=Object.freeze({__proto__:null,init:()=>{const o=rh(),c=d=>{o.set({destroy:d})};return pd({readState:o.isSet,blockWith:c,clear:o.clear,isBlocked:o.isSet})}});const ln=Rc({fields:xe,name:"blocking",apis:ye,state:vt});var On=Object.freeze({__proto__:null,getCurrent:(o,c,d)=>c.find(o)});const Oo=[sn("find")],zt=Rc({fields:Oo,name:"composing",apis:On});var ls=Object.freeze({__proto__:null,getCoupled:(o,c,d,m)=>d.getOrCreate(o,c,m),getExistingCoupled:(o,c,d,m)=>d.getExisting(o,c,m)}),no=[Zd("others",_T(fo.value,gn()))],Cr=Object.freeze({__proto__:null,init:()=>{const o={},c=(w,T)=>{if(Jn(w.others).length===0)throw new Error("Cannot find any known coupled components");return Vt(o,T)},d=(w,T,V)=>c(T,V).getOrThunk(()=>{const W=Vt(T.others,V).getOrDie("No information found for coupled component: "+V)(w),Q=w.getSystem().build(W);return o[V]=Q,Q}),m=(w,T,V)=>c(T,V).orThunk(()=>(Vt(T.others,V).getOrDie("No information found for coupled component: "+V),z.none())),S=M({});return pd({readState:S,getExisting:m,getOrCreate:d})}});const ms=Rc({fields:no,name:"coupling",apis:ls,state:Cr}),_a=["input","button","textarea","select"],ef=(o,c,d)=>{(c.disabled()?Ul:Vg)(o,c)},Lm=(o,c)=>c.useNative===!0&&qt(_a,dl(o.element)),Hv=o=>ac(o.element,"disabled"),c0=o=>{Lo(o.element,"disabled","disabled")},Mr=o=>{Jr(o.element,"disabled")},Fl=o=>Na(o.element,"aria-disabled")==="true",$l=o=>{Lo(o.element,"aria-disabled","true")},Nf=o=>{Lo(o.element,"aria-disabled","false")},Ul=(o,c,d)=>{c.disableClass.each(S=>{Rr(o.element,S)}),(Lm(o,c)?c0:$l)(o),c.onDisabled(o)},Vg=(o,c,d)=>{c.disableClass.each(S=>{Ii(o.element,S)}),(Lm(o,c)?Mr:Nf)(o),c.onEnabled(o)},Fa=(o,c)=>Lm(o,c)?Hv(o):Fl(o);var YS=Object.freeze({__proto__:null,enable:Vg,disable:Ul,isDisabled:Fa,onLoad:ef,set:(o,c,d,m)=>{(m?Ul:Vg)(o,c)}}),u3=Object.freeze({__proto__:null,exhibit:(o,c)=>kp({classes:c.disabled()?c.disableClass.toArray():[]}),events:(o,c)=>mi([y_(ld(),(d,m)=>Fa(d,o)),JT(o,c,ef)])}),ek=[Or("disabled",Ke),Ct("useNative",!0),xr("disableClass"),zs("onDisabled"),zs("onEnabled")];const So=Rc({fields:ek,name:"disabling",active:u3,apis:YS}),Pf=(o,c,d,m,S)=>{const w=T=>T+"px";return{position:o,left:c.map(w),top:d.map(w),right:m.map(w),bottom:S.map(w)}},d3=o=>({...o,position:z.some(o.position)}),J_=(o,c)=>{Ac(o,d3(c))},tk=(o,c)=>{const d=o.element;Rr(d,c.transitionClass),Ii(d,c.fadeOutClass),Rr(d,c.fadeInClass),c.onShow(o)},Bm=(o,c)=>{const d=o.element;Rr(d,c.transitionClass),Ii(d,c.fadeInClass),Rr(d,c.fadeOutClass),c.onHide(o)},R6=(o,c)=>o.y<c.bottom&&o.bottom>c.y,f3=(o,c)=>o.y>=c.y,x6=(o,c)=>o.bottom<=c.bottom,nk=(o,c,d)=>({location:"top",leftX:c,topY:d.bounds.y-o.y}),ok=(o,c,d)=>({location:"bottom",leftX:c,bottomY:o.bottom-d.bounds.bottom}),p3=o=>o.box.x-o.win.x,MQ=(o,c,d)=>{const m=c.win,S=c.box,w=p3(c);return Wo(o,T=>{switch(T){case"bottom":return x6(S,d.bounds)?z.none():z.some(ok(m,w,d));case"top":return f3(S,d.bounds)?z.none():z.some(nk(m,w,d));default:return z.none()}}).getOr({location:"no-dock"})},NQ=(o,c,d)=>dt(o,m=>{switch(m){case"bottom":return x6(c,d.bounds);case"top":return f3(c,d.bounds)}}),PQ=(o,c)=>{const d=c.optScrollEnv.fold(M(o.bounds.y),m=>m.scrollElmTop+(o.bounds.y-m.currentScrollTop));return br(o.bounds.x,d)},LQ=(o,c)=>{const d=c.optScrollEnv.fold(M(o.y),m=>o.y+m.currentScrollTop-m.scrollElmTop);return br(o.x,d)},h3=(o,c,d)=>d.getInitialPos().map(m=>{const S=PQ(m,c);return{box:La(S.left,S.top,Tc(o),fa(o)),location:m.location}}),HO=(o,c,d,m,S)=>{const w=LQ(c,d),T=La(w.left,w.top,c.width,c.height);m.setInitialPos({style:da(o),position:Xr(o,"position")||"static",bounds:T,location:S.location})},m3=(o,c,d,m,S)=>{m.getInitialPos().fold(()=>HO(o,c,d,m,S),()=>K)},D6=(o,c,d)=>d.getInitialPos().bind(m=>{var S;switch(d.clearInitialPos(),m.position){case"static":return z.some({morph:"static"});case"absolute":const w=bv(o).getOr(ku()),T=Sa(w),V=(S=w.dom.scrollTop)!==null&&S!==void 0?S:0;return z.some({morph:"absolute",positionCss:Pf("absolute",Vt(m.style,"left").map(F=>c.x-T.x),Vt(m.style,"top").map(F=>c.y-T.y+V),Vt(m.style,"right").map(F=>T.right-c.right),Vt(m.style,"bottom").map(F=>T.bottom-c.bottom))});default:return z.none()}}),c0e=(o,c,d)=>h3(o,c,d).filter(({box:m})=>NQ(d.getModes(),m,c)).bind(({box:m})=>D6(o,m,d)),sk=o=>{switch(o.location){case"top":return z.some({morph:"fixed",positionCss:Pf("fixed",z.some(o.leftX),z.some(o.topY),z.none(),z.none())});case"bottom":return z.some({morph:"fixed",positionCss:Pf("fixed",z.some(o.leftX),z.none(),z.none(),z.some(o.bottomY))});default:return z.none()}},BQ=(o,c,d)=>{const m=Sa(o),S=kl(),w=MQ(d.getModes(),{win:S,box:m},c);return w.location==="top"||w.location==="bottom"?(HO(o,m,c,d,w),sk(w)):z.none()},VQ=(o,c,d)=>c0e(o,c,d).orThunk(()=>c.optScrollEnv.bind(m=>h3(o,c,d)).bind(({box:m,location:S})=>{const w=kl(),T=p3({win:w,box:m}),V=S==="top"?nk(w,T,c):ok(w,T,c);return sk(V)})),kh=(o,c,d)=>{const m=o.element;return zc(li(m,"position"),"fixed")?VQ(m,c,d):BQ(m,c,d)},k6=(o,c,d)=>{const m=o.element;return h3(m,c,d).bind(({box:S})=>D6(m,S,d))},HQ=(o,c,d,m)=>{const S=Sa(o),w=kl(),T=p3({win:w,box:S}),V=m(w,T,c);return V.location==="bottom"||V.location==="top"?(m3(o,S,c,d,V),sk(V)):z.none()},FQ=(o,c,d)=>{d.setDocked(!1),Jt(["left","right","top","bottom","position"],m=>Ds(o.element,m)),c.onUndocked(o)},M6=(o,c,d,m)=>{const S=m.position==="fixed";d.setDocked(S),J_(o.element,m),(S?c.onDocked:c.onUndocked)(o)},N6=(o,c,d,m,S=!1)=>{c.contextual.each(w=>{w.lazyContext(o).each(T=>{const V=R6(T,m.bounds);V!==d.isVisible()&&(d.setVisible(V),S&&!V?(Sp(o.element,[w.fadeOutClass]),w.onHide(o)):(V?tk:Bm)(o,w))})})},g3=(o,c,d,m,S)=>{N6(o,c,d,m,!0),M6(o,c,d,S.positionCss)},$Q=(o,c,d,m,S)=>{switch(S.morph){case"static":return FQ(o,c,d);case"absolute":return M6(o,c,d,S.positionCss);case"fixed":return g3(o,c,d,m,S)}},UQ=(o,c,d)=>{const m=c.lazyViewport(o);N6(o,c,d,m),kh(o,m,d).each(S=>{$Q(o,c,d,m,S)})},jQ=(o,c,d)=>{const m=o.element;d.setDocked(!1);const S=c.lazyViewport(o);k6(o,S,d).each(w=>{switch(w.morph){case"static":{FQ(o,c,d);break}case"absolute":{M6(o,c,d,w.positionCss);break}}}),d.setVisible(!0),c.contextual.each(w=>{Kc(m,[w.fadeInClass,w.fadeOutClass,w.transitionClass]),w.onShow(o)}),rk(o,c,d)},rk=(o,c,d)=>{o.getSystem().isConnected()&&UQ(o,c,d)},P6=(o,c,d)=>{d.isDocked()&&jQ(o,c,d)},JS=o=>(c,d,m)=>{const S=d.lazyViewport(c);HQ(c.element,S,m,o).each(T=>{g3(c,d,m,S,T)})},v3=JS(nk),zQ=JS(ok);var WQ=Object.freeze({__proto__:null,refresh:rk,reset:P6,isDocked:(o,c,d)=>d.isDocked(),getModes:(o,c,d)=>d.getModes(),setModes:(o,c,d,m)=>d.setModes(m),forceDockToTop:v3,forceDockToBottom:zQ}),GQ=Object.freeze({__proto__:null,events:(o,c)=>mi([Yb(Jd(),(d,m)=>{o.contextual.each(S=>{na(d.element,S.transitionClass)&&(Kc(d.element,[S.transitionClass,S.fadeInClass]),(c.isVisible()?S.onShown:S.onHidden)(d)),m.stop()})}),Ft(Vb(),(d,m)=>{rk(d,o,c)}),Ft(yx(),(d,m)=>{rk(d,o,c)}),Ft(Hb(),(d,m)=>{P6(d,o,c)})])}),qQ=[cd("contextual",[qa("fadeInClass"),qa("fadeOutClass"),qa("transitionClass"),If("lazyContext"),zs("onShow"),zs("onShown"),zs("onHide"),zs("onHidden")]),Or("lazyViewport",()=>({bounds:kl(),optScrollEnv:z.none()})),Ev("modes",["top","bottom"],Wi),zs("onDocked"),zs("onUndocked")],KQ=Object.freeze({__proto__:null,init:o=>{const c=mn(!1),d=mn(!0),m=$o(),S=mn(o.modes),w=()=>`docked:  ${c.get()}, visible: ${d.get()}, modes: ${S.get().join(",")}`;return pd({isDocked:c.get,setDocked:c.set,getInitialPos:m.get,setInitialPos:m.set,clearInitialPos:m.clear,isVisible:d.get,setVisible:d.set,getModes:S.get,setModes:S.set,readState:w})}});const Mi=Rc({fields:qQ,name:"docking",active:GQ,apis:WQ,state:KQ}),ik=ts.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),XS=o=>c=>c.translate(-o.left,-o.top),ak=o=>c=>c.translate(o.left,o.top),l0=o=>(c,d)=>Xt(o,(m,S)=>S(m),br(c,d)),ck=(o,c,d)=>o.fold(l0([ak(d),XS(c)]),l0([XS(c)]),l0([])),X_=(o,c,d)=>o.fold(l0([ak(d)]),l0([]),l0([ak(c)])),QS=(o,c,d)=>o.fold(l0([]),l0([XS(d)]),l0([ak(c),XS(d)])),y3=(o,c,d,m,S,w)=>{const T=X_(o,S,w),V=X_(c,S,w);return Math.abs(T.left-V.left)<=d&&Math.abs(T.top-V.top)<=m},ZQ=(o,c,d,m,S,w)=>{const T=X_(o,S,w),V=X_(c,S,w),F=Math.abs(T.left-V.left),W=Math.abs(T.top-V.top);return br(F,W)},lk=(o,c,d)=>{const m=o.fold((S,w)=>({position:z.some("absolute"),left:z.some(S+"px"),top:z.some(w+"px")}),(S,w)=>({position:z.some("absolute"),left:z.some(S-d.left+"px"),top:z.some(w-d.top+"px")}),(S,w)=>({position:z.some("fixed"),left:z.some(S+"px"),top:z.some(w+"px")}));return{right:z.none(),bottom:z.none(),...m}},YQ=(o,c,d)=>o.fold((m,S)=>Fv(m+c,S+d),(m,S)=>$y(m+c,S+d),(m,S)=>Uy(m+c,S+d)),qn=(o,c,d,m)=>{const S=(w,T)=>(V,F)=>{const W=w(c,d,m);return T(V.getOr(W.left),F.getOr(W.top))};return o.fold(S(QS,Fv),S(X_,$y),S(ck,Uy))},Fv=ik.offset,$y=ik.absolute,Uy=ik.fixed,FO=(o,c)=>{const d=Na(o,c);return N(d)?NaN:parseInt(d,10)},S3=(o,c)=>{const d=o.element,m=FO(d,c.leftAttr),S=FO(d,c.topAttr);return isNaN(m)||isNaN(S)?z.none():z.some(br(m,S))},JQ=(o,c,d)=>{const m=o.element;Lo(m,c.leftAttr,d.left+"px"),Lo(m,c.topAttr,d.top+"px")},V6=(o,c)=>{const d=o.element;Jr(d,c.leftAttr),Jr(d,c.topAttr)},H6=(o,c,d,m)=>S3(o,c).fold(()=>d,S=>Uy(S.left+m.left,S.top+m.top)),C3=(o,c,d,m,S,w)=>{const T=H6(o,c,d,m),V=c.mustSnap?QQ(o,c,T,S,w):eee(o,c,T,S,w),F=ck(T,S,w);return JQ(o,c,F),V.fold(()=>({coord:Uy(F.left,F.top),extra:z.none()}),W=>({coord:W.output,extra:W.extra}))},XQ=(o,c)=>{V6(o,c)},E3=(o,c,d,m)=>Wo(o,S=>{const w=S.sensor;return y3(c,w,S.range.left,S.range.top,d,m)?z.some({output:qn(S.output,c,d,m),extra:S.extra}):z.none()}),QQ=(o,c,d,m,S)=>{const w=c.getSnapPoints(o);return E3(w,d,m,S).orThunk(()=>Xt(w,(F,W)=>{const Q=W.sensor,oe=ZQ(d,Q,W.range.left,W.range.top,m,S);return F.deltas.fold(()=>({deltas:z.some(oe),snap:z.some(W)}),pe=>{const Ee=(oe.left+oe.top)/2,Se=(pe.left+pe.top)/2;return Ee<=Se?{deltas:z.some(oe),snap:z.some(W)}:F})},{deltas:z.none(),snap:z.none()}).snap.map(F=>({output:qn(F.output,d,m,S),extra:F.extra})))},eee=(o,c,d,m,S)=>{const w=c.getSnapPoints(o);return E3(w,d,m,S)},F6=(o,c,d)=>({coord:qn(o.output,o.output,c,d),extra:o.extra});var tee=Object.freeze({__proto__:null,snapTo:(o,c,d,m)=>{const S=c.getTarget(o.element);if(c.repositionTarget){const w=ze(o.element),T=zi(w),V=xE(S),F=F6(m,T,V),W=lk(F.coord,T,V);Ac(S,W)}}});const Dc=(o,c)=>TT(o,{},Et(c,d=>lx(d.name(),"Cannot configure "+d.name()+" for "+o)).concat([fl("dump",we)])),$O=o=>o.dump,kc=(o,c)=>({...Tn(c),...o.dump}),Lf={field:Dc,augment:kc,get:$O},uk=(o,c)=>(o.length>0?[Cg("parts",o)]:[]).concat([sn("uid"),Ct("dom",{}),Ct("components",[]),Cy("originalSpec"),Ct("debug.sketcher",{})]).concat(c),Fg=(o,c,d,m,S)=>{const w=uk(m,S);return Mu(o+" [SpecSchema]",Kd(w.concat(c)),d)},_3=(o,c,d,m)=>{const S=$6(m),w=Fg(o,c,S,[],[]);return d(w,S)},w3=(o,c,d,m,S)=>{const w=$6(S),T=Px(d),V=wm(d),F=Fg(o,c,w,T,[V]),W=Iv(o,F,d),Q=Ig(o,F,W.internals());return m(F,Q,w,W.externals())},nee=o=>Pn(o,"uid"),$6=o=>nee(o)?o:{...o,uid:i0("uid")},U6=o=>o.uid!==void 0,oee=Kd([sn("name"),sn("factory"),sn("configFields"),Ct("apis",{}),Ct("extraApis",{})]),see=Kd([sn("name"),sn("factory"),sn("configFields"),sn("partFields"),Ct("apis",{}),Ct("extraApis",{})]),Bf=o=>{const c=Mu("Sketcher for "+o.name,oee,o),d=w=>_3(c.name,c.configFields,c.factory,w),m=es(c.apis,Pg),S=es(c.extraApis,(w,T)=>Rx(w,T));return{name:c.name,configFields:c.configFields,sketch:d,...m,...S}},Hu=o=>{const c=Mu("Sketcher for "+o.name,see,o),d=T=>w3(c.name,c.configFields,c.partFields,c.factory,T),m=Va(c.name,c.partFields),S=es(c.apis,Pg),w=es(c.extraApis,(T,V)=>Rx(T,V));return{name:c.name,partFields:c.partFields,configFields:c.configFields,sketch:d,parts:m,...S,...w}},Vm=Bf({name:"Container",factory:o=>{const{attributes:c,...d}=o.dom;return{uid:o.uid,dom:{tag:"div",attributes:{role:"presentation",...c},...d},components:o.components,behaviours:$O(o.containerBehaviours),events:o.events,domModification:o.domModification,eventOrder:o.eventOrder}},configFields:[Ct("components",[]),Dc("containerBehaviours",[]),Ct("events",{}),Ct("domModification",{}),Ct("eventOrder",{})]}),A3="data-initial-z-index",T3=o=>{Sn(o.element).filter(Ec).each(c=>{ic(c,A3).fold(()=>Ds(c,"z-index"),d=>jo(c,"z-index",d)),Jr(c,A3)})},j6=o=>{Sn(o.element).filter(Ec).each(c=>{li(c,"z-index").each(d=>{Lo(c,A3,d)}),jo(c,"z-index",Xr(o.element,"z-index"))})},O3=(o,c)=>{o.getSystem().addToGui(c),j6(c)},z6=o=>{T3(o),o.getSystem().removeFromGui(o)},W6=(o,c,d)=>o.getSystem().build(Vm.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[c]},events:d}));var ree=cd("snaps",[sn("getSnapPoints"),zs("onSensor"),sn("leftAttr"),sn("topAttr"),Ct("lazyViewport",kl),Ct("mustSnap",!1)]);const I3=[Ct("useFixed",Ke),sn("blockerClass"),Ct("getTarget",we),Ct("onDrag",K),Ct("repositionTarget",!0),Ct("onDrop",K),Or("getBounds",kl),ree],iee=o=>Pr(li(o,"left"),li(o,"top"),li(o,"position"),(c,d,m)=>(m==="fixed"?Uy:Fv)(parseInt(c,10),parseInt(d,10))).getOrThunk(()=>{const c=Gc(o);return $y(c.left,c.top)}),aee=(o,c,d,m,S)=>{const w=S.bounds,T=X_(c,d,m),V=Xi(T.left,w.x,w.x+w.width-S.width),F=Xi(T.top,w.y,w.y+w.height-S.height),W=$y(V,F);return c.fold(()=>{const Q=QS(W,d,m);return Fv(Q.left,Q.top)},M(W),()=>{const Q=ck(W,d,m);return Uy(Q.left,Q.top)})},UO=(o,c,d,m,S,w,T)=>{const V=c.fold(()=>{const F=YQ(d,w.left,w.top),W=ck(F,m,S);return Uy(W.left,W.top)},F=>{const W=C3(o,F,d,w,m,S);return W.extra.each(Q=>{F.onSensor(o,Q)}),W.coord});return aee(o,V,m,S,T)},G6=(o,c,d,m)=>{const S=c.getTarget(o.element);if(c.repositionTarget){const w=ze(o.element),T=zi(w),V=xE(S),F=iee(S),W=UO(o,c.snaps,F,T,V,m,d),Q=lk(W,T,V);Ac(S,Q)}c.onDrag(o,S,m)},R3=(o,c)=>({bounds:o.getBounds(),height:pa(c.element),width:dh(c.element)}),dk=(o,c,d,m,S)=>{const w=d.update(m,S),T=d.getStartData().getOrThunk(()=>R3(c,o));w.each(V=>{G6(o,c,T,V)})},x3=(o,c,d,m)=>{c.each(z6),d.snaps.each(w=>{XQ(o,w)});const S=d.getTarget(o.element);m.reset(),d.onDrop(o,S)},fk=o=>(c,d)=>{const m=S=>{d.setStartData(R3(c,S))};return mi([Ft(Vb(),S=>{d.getStartData().each(()=>m(S))}),...o(c,d,m)])},cee=o=>mi([Ft(hu(),o.forceDrop),Ft(FE(),o.drop),Ft(wv(),(c,d)=>{o.move(d.event)}),Ft(Ka(),o.delayDrop)]);var D3=Object.freeze({__proto__:null,getData:o=>z.from(br(o.x,o.y)),getDelta:(o,c)=>br(c.left-o.left,c.top-o.top)});const q6=(o,c,d)=>[Ft(hu(),(m,S)=>{if(S.event.raw.button!==0)return;S.stop();const T=()=>x3(m,z.some(W),o,c),V=c4(T,200),F={drop:T,delayDrop:V.schedule,forceDrop:T,move:oe=>{V.cancel(),dk(m,o,c,D3,oe)}},W=W6(m,o.blockerClass,cee(F));(()=>{d(m),O3(m,W)})()})],pk=[...I3,pi("dragger",{handlers:fk(q6)})],lee=o=>mi([Ft(_g(),o.forceDrop),Ft(kb(),o.drop),Ft(yy(),o.drop),Ft(wg(),(c,d)=>{o.move(d.event)})]),K6=o=>{const c=o[0];return z.some(br(c.clientX,c.clientY))};var k3=Object.freeze({__proto__:null,getData:o=>{const d=o.raw.touches;return d.length===1?K6(d):z.none()},getDelta:(o,c)=>br(c.left-o.left,c.top-o.top)});const M3=(o,c,d)=>{const m=$o(),S=w=>{x3(w,m.get(),o,c),m.clear()};return[Ft(_g(),(w,T)=>{T.stop();const V=()=>S(w),F={drop:V,delayDrop:K,forceDrop:V,move:oe=>{dk(w,o,c,k3,oe)}},W=W6(w,o.blockerClass,lee(F));m.set(W),(()=>{d(w),O3(w,W)})()}),Ft(wg(),(w,T)=>{T.stop(),dk(w,o,c,k3,T.event)}),Ft(kb(),(w,T)=>{T.stop(),S(w)}),Ft(yy(),S)]},uee=[...I3,pi("dragger",{handlers:fk(M3)})],Z6=(o,c,d)=>[...q6(o,c,d),...M3(o,c,d)],Y6=[...I3,pi("dragger",{handlers:fk(Z6)})];var dee=Object.freeze({__proto__:null,mouse:pk,touch:uee,mouseOrTouch:Y6}),pee=Object.freeze({__proto__:null,init:()=>{let o=z.none(),c=z.none();const d=()=>{o=z.none(),c=z.none()},m=(F,W)=>{const Q=o.map(oe=>F.getDelta(oe,W));return o=z.some(W),Q},S=(F,W)=>F.getData(W).bind(Q=>m(F,Q)),w=F=>{c=z.some(F)},T=()=>c,V=M({});return pd({readState:V,reset:d,update:S,getStartData:T,setStartData:w})}});const eC=nD({branchKey:"mode",branches:dee,name:"dragging",active:{events:(o,c)=>o.dragger.handlers(o,c)},extra:{snap:o=>({sensor:o.sensor,range:o.range,output:o.output,extra:z.from(o.extra)})},state:pee,apis:tee}),J6=["input","textarea"],N3=o=>{const c=dl(o);return qt(J6,c)},P3=(o,c)=>{const d=c.getRoot(o).getOr(o.element);Ii(d,c.invalidClass),c.notify.each(m=>{N3(o.element)&&Lo(o.element,"aria-invalid",!1),m.getContainer(o).each(S=>{jd(S,m.validHtml)}),m.onValid(o)})},X6=(o,c,d,m)=>{const S=c.getRoot(o).getOr(o.element);Rr(S,c.invalidClass),c.notify.each(w=>{N3(o.element)&&Lo(o.element,"aria-invalid",!0),w.getContainer(o).each(T=>{jd(T,m)}),w.onInvalid(o,m)})},Q6=(o,c,d)=>c.validator.fold(()=>Os.pure(fo.value(!0)),m=>m.validate(o)),L3=(o,c,d)=>(c.notify.each(m=>{m.onValidate(o)}),Q6(o,c).map(m=>o.getSystem().isConnected()?m.fold(S=>(X6(o,c,d,S),fo.error(S)),S=>(P3(o,c),fo.value(S))):fo.error("No longer in system")));var e8=Object.freeze({__proto__:null,markValid:P3,markInvalid:X6,query:Q6,run:L3,isInvalid:(o,c)=>{const d=c.getRoot(o).getOr(o.element);return na(d,c.invalidClass)}}),jy=Object.freeze({__proto__:null,events:(o,c)=>o.validator.map(d=>mi([Ft(d.onEvent,m=>{L3(m,o,c).get(we)})].concat(d.validateOnLoad?[Qr(m=>{L3(m,o,c).get(K)})]:[]))).getOr({})}),t8=[sn("invalidClass"),Ct("getRoot",z.none),cd("notify",[Ct("aria","alert"),Ct("getContainer",z.none),Ct("validHtml",""),zs("onValid"),zs("onInvalid"),zs("onValidate")]),cd("validator",[sn("validate"),Ct("onEvent","input"),Ct("validateOnLoad",!0)])];const hk=(o,c,d)=>{c.store.manager.onLoad(o,c,d)},B3=(o,c,d)=>{c.store.manager.onUnload(o,c,d)};var mee=Object.freeze({__proto__:null,onLoad:hk,onUnload:B3,setValue:(o,c,d,m)=>{c.store.manager.setValue(o,c,d,m)},getValue:(o,c,d)=>c.store.manager.getValue(o,c,d),getState:(o,c,d)=>d}),vee=Object.freeze({__proto__:null,events:(o,c)=>{const d=o.resetOnDom?[Qr((m,S)=>{hk(m,o,c)}),Ah((m,S)=>{B3(m,o,c)})]:[JT(o,c,hk)];return mi(d)}});const n8=()=>{const o=mn(null),c=()=>({mode:"memory",value:o.get()}),d=()=>o.get()===null,m=()=>{o.set(null)};return pd({set:o.set,get:o.get,isNotSet:d,clear:m,readState:c})},bee=()=>pd({readState:K}),V3=()=>{const o=mn({}),c=mn({});return pd({readState:()=>({mode:"dataset",dataByValue:o.get(),dataByText:c.get()}),lookup:T=>Vt(o.get(),T).orThunk(()=>Vt(c.get(),T)),update:T=>{const V=o.get(),F=c.get(),W={},Q={};Jt(T,oe=>{W[oe.value]=oe,Vt(oe,"meta").each(pe=>{Vt(pe,"text").each(Ee=>{Q[Ee]=oe})})}),o.set({...V,...W}),c.set({...F,...Q})},clear:()=>{o.set({}),c.set({})}})};var H3=Object.freeze({__proto__:null,memory:n8,dataset:V3,manual:bee,init:o=>o.store.manager.state(o)});const s8=(o,c,d,m)=>{const S=c.store;d.update([m]),S.setValue(o,m),c.onSetValue(o,m)},zy=(o,c,d)=>{const m=c.store,S=m.getDataKey(o);return d.lookup(S).getOrThunk(()=>m.getFallbackEntry(S))},r8=(o,c,d)=>{c.store.initialValue.each(S=>{s8(o,c,d,S)})},i8=(o,c,d)=>{d.clear()};var yee=[xr("initialValue"),sn("getFallbackEntry"),sn("getDataKey"),sn("setValue"),pi("manager",{setValue:s8,getValue:zy,onLoad:r8,onUnload:i8,state:V3})];const See=(o,c,d)=>c.store.getValue(o),zO=(o,c,d,m)=>{c.store.setValue(o,m),c.onSetValue(o,m)},WO=(o,c,d)=>{c.store.initialValue.each(m=>{c.store.setValue(o,m)})};var a8=[sn("getValue"),Ct("setValue",K),xr("initialValue"),pi("manager",{setValue:zO,getValue:See,onLoad:WO,onUnload:K,state:wh.init})];const F3=(o,c,d,m)=>{d.set(m),c.onSetValue(o,m)},Wy=(o,c,d)=>d.get(),Gy=(o,c,d)=>{c.store.initialValue.each(m=>{d.isNotSet()&&d.set(m)})},Cee=(o,c,d)=>{d.clear()};var Eee=[xr("initialValue"),pi("manager",{setValue:F3,getValue:Wy,onLoad:Gy,onUnload:Cee,state:n8})],c8=[pu("store",{mode:"memory"},fu("mode",{memory:Eee,manual:a8,dataset:yee})),zs("onSetValue"),Ct("resetOnDom",!1)];const zn=Rc({fields:c8,name:"representing",active:vee,apis:mee,extra:{setValueFrom:(o,c)=>{const d=zn.getValue(c);zn.setValue(o,d)}},state:H3}),Hm=Rc({fields:t8,name:"invalidating",active:jy,apis:e8,extra:{validation:o=>c=>{const d=zn.getValue(c);return Os.pure(o(d))}}});var l8=Object.freeze({__proto__:null,exhibit:(o,c)=>kp({classes:[],styles:c.useFixed()?{}:{position:"relative"}})});const mk=ts.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),$3=(o,c,d,m,S,w)=>{const T=c.rect,V=T.x-d,F=T.y-m,W=T.width,Q=T.height,oe=S-(V+W),pe=w-(F+Q),Ee=z.some(V),Se=z.some(F),Pe=z.some(oe),qe=z.some(pe),Le=z.none();return i_(c.direction,()=>Pf(o,Ee,Se,Le,Le),()=>Pf(o,Le,Se,Pe,Le),()=>Pf(o,Ee,Le,Le,qe),()=>Pf(o,Le,Le,Pe,qe),()=>Pf(o,Ee,Se,Le,Le),()=>Pf(o,Ee,Le,Le,qe),()=>Pf(o,Ee,Se,Le,Le),()=>Pf(o,Le,Se,Pe,Le))},gk=(o,c)=>o.fold(()=>{const d=c.rect;return Pf("absolute",z.some(d.x),z.some(d.y),z.none(),z.none())},(d,m,S,w)=>$3("absolute",c,d,m,S,w),(d,m,S,w)=>$3("fixed",c,d,m,S,w)),vk=(o,c)=>{const d=De(mm,c),m=o.fold(d,d,()=>{const T=zi();return mm(c).translate(-T.left,-T.top)}),S=dh(c),w=pa(c);return La(m.left,m.top,S,w)},_ee=(o,c)=>c.fold(()=>o.fold(kl,kl,La),d=>o.fold(M(d),M(d),()=>{const m=u8(o,d.x,d.y);return La(m.left,m.top,d.width,d.height)})),u8=(o,c,d)=>{const m=br(c,d),S=()=>{const w=zi();return m.translate(-w.left,-w.top)};return o.fold(M(m),M(m),S)},wee=(o,c,d,m)=>o.fold(c,d,m);mk.none;const bk=mk.relative,U3=mk.fixed,yk=(o,c)=>({anchorBox:o,origin:c}),d8=(o,c)=>yk(o,c),Sk=ts.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),f8=(o,c)=>{const{x:d,y:m,right:S,bottom:w}=c,{x:T,y:V,right:F,bottom:W,width:Q,height:oe}=o,pe=T>=d&&T<=S,Ee=V>=m&&V<=w,Se=pe&&Ee,Pe=F<=S&&F>=d,qe=W<=w&&W>=m,Le=Pe&&qe,Je=Math.min(Q,T>=d?S-T:F-d),nt=Math.min(oe,V>=m?w-V:W-m);return{originInBounds:Se,sizeInBounds:Le,visibleW:Je,visibleH:nt}},p8=(o,c)=>{const{x:d,y:m,right:S,bottom:w}=c,{x:T,y:V,width:F,height:W}=o,Q=Math.max(d,S-F),oe=Math.max(m,w-W),pe=Xi(T,d,Q),Ee=Xi(V,m,oe),Se=Math.min(pe+F,S)-pe,Pe=Math.min(Ee+W,w)-Ee;return La(pe,Ee,Se,Pe)},h8=(o,c,d)=>{const m=M(c.bottom-d.y),S=M(d.bottom-c.y),w=Vx(o,S,S,m),T=M(c.right-d.x),V=M(d.right-c.x);return{maxWidth:PT(o,V,V,T),maxHeight:w}},m8=(o,c,d,m)=>{const S=o.bubble,w=S.offset,T=Fx(m,o.restriction,w),V=o.x+w.left,F=o.y+w.top,W=La(V,F,c,d),{originInBounds:Q,sizeInBounds:oe,visibleW:pe,visibleH:Ee}=f8(W,T),Se=Q&&oe,Pe=Se?W:p8(W,T),qe=Pe.width>0&&Pe.height>0,{maxWidth:Le,maxHeight:Je}=h8(o.direction,Pe,m),nt={rect:Pe,maxHeight:Je,maxWidth:Le,direction:o.direction,placement:o.placement,classes:{on:S.classesOn,off:S.classesOff},layout:o.label,testY:F};return Se||o.alwaysFit?Sk.fit(nt):Sk.nofit(nt,pe,Ee,qe)},Aee=(o,c,d,m,S,w)=>{const T=m.width,V=m.height,F=(Q,oe,pe,Ee,Se)=>{const Pe=Q(d,m,S,o,w),qe=m8(Pe,T,V,w);return qe.fold(M(qe),(Le,Je,nt,Tt)=>(Se===Tt?nt>Ee||Je>pe:!Se&&Tt)?qe:Sk.nofit(oe,pe,Ee,Se))};return Xt(c,(Q,oe)=>{const pe=De(F,oe);return Q.fold(M(Q),pe)},Sk.nofit({rect:d,maxHeight:m.height,maxWidth:m.width,direction:xv(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:d.y},-1,-1,!1)).fold(we,we)},Ck=["top","bottom","right","left"],Ek="data-alloy-transition-timer",Tee=(o,c)=>oy(o,c.classes),Oee=(o,c,d)=>d.exists(m=>{const S=o.mode;return S==="all"?!0:m[S]!==c[S]}),Iee=(o,c)=>{const d=m=>parseFloat(m).toFixed(3);return $n(c,(m,S)=>{const w=o[S].map(d),T=m.map(d);return!Vi(w,T)}).isSome()},g8=o=>{const c=w=>{const V=Xr(o,w).split(/\s*,\s*/);return Fo(V,Il)},d=w=>{if(v(w)&&/^[\d.]+/.test(w)){const T=parseFloat(w);return Ol(w,"ms")?T:T*1e3}else return 0},m=c("transition-delay"),S=c("transition-duration");return Xt(S,(w,T,V)=>{const F=d(m[V])+d(T);return Math.max(w,F)},0)},Ree=(o,c)=>{const d=ii(),m=ii();let S;const w=W=>{var Q;const oe=(Q=W.raw.pseudoElement)!==null&&Q!==void 0?Q:"";return de(W.target,o)&&ka(oe)&&qt(Ck,W.raw.propertyName)},T=W=>{if(L(W)||w(W)){d.clear(),m.clear();const Q=W==null?void 0:W.raw.type;(L(Q)||Q===Jd())&&(clearTimeout(S),Jr(o,Ek),Kc(o,c.classes))}},V=vr(o,Nb(),W=>{w(W)&&(V.unbind(),d.set(vr(o,Jd(),T)),m.set(vr(o,aS(),T)))}),F=g8(o);window.requestAnimationFrame(()=>{S=setTimeout(T,F+17),Lo(o,Ek,S)})},xee=(o,c)=>{Sp(o,c.classes),ic(o,Ek).each(d=>{clearTimeout(parseInt(d,10)),Jr(o,Ek)}),Ree(o,c)},v8=(o,c,d,m,S,w)=>{const T=Oee(m,S,w);if(T||Tee(o,m)){jo(o,"position",d.position);const V=vk(c,o),F=gk(c,{...S,rect:V}),W=pt(Ck,Q=>F[Q]);Iee(d,W)&&(Ac(o,W),T&&xee(o,m),zd(o))}else Kc(o,m.classes)},GO=o=>({width:Math.ceil(dh(o)),height:pa(o)}),Dee=(o,c,d,m)=>{Ds(c,"max-height"),Ds(c,"max-width");const S=GO(c);return Aee(c,m.preference,o,S,d,m.bounds)},qO=(o,c)=>{const d=c.classes;Kc(o,d.off),Sp(o,d.on)},j3=(o,c,d)=>{const m=d.maxHeightFunction;m(o,c.maxHeight)},b8=(o,c,d)=>{const m=d.maxWidthFunction;m(o,c.maxWidth)},y8=(o,c,d)=>{const m=gk(d.origin,c);d.transition.each(S=>{v8(o,d.origin,m,S,c,d.lastPlacement)}),J_(o,m)},kee=(o,c)=>{f_(o,c.placement)},S8=(o,c,d)=>o[c]===void 0?d:o[c],C8=(o,c,d,m,S,w,T,V)=>{const F=S8(T,"maxHeightFunction",qx()),W=S8(T,"maxWidthFunction",K),Q=o.anchorBox,oe=o.origin,pe={bounds:_ee(oe,w),origin:oe,preference:m,maxHeightFunction:F,maxWidthFunction:W,lastPlacement:S,transition:V};return Mee(Q,c,d,pe)},Mee=(o,c,d,m)=>{const S=Dee(o,c,d,m);return y8(c,S,m),kee(c,S),qO(c,S),j3(c,S,m),b8(c,S,m),{layout:S.layout,placement:S.placement}},KO=we,tC=()=>cd("layouts",[sn("onLtr"),sn("onRtl"),xr("onBottomLtr"),xr("onBottomRtl")]),_k=(o,c,d,m,S,w,T)=>{const V=T.map(Kx).getOr(!1),F=c.layouts.map(Ee=>Ee.onLtr(o)),W=c.layouts.map(Ee=>Ee.onRtl(o)),Q=V?c.layouts.bind(Ee=>Ee.onBottomLtr.map(Se=>Se(o))).or(F).getOr(S):F.getOr(d),oe=V?c.layouts.bind(Ee=>Ee.onBottomRtl.map(Se=>Se(o))).or(W).getOr(w):W.getOr(m);return Z1(Q,oe)(o)},E8=(o,c,d)=>{const m=c.hotspot,S=vk(d,m.element),w=_k(o.element,c,zb(),$T(),d_(),Wx(),z.some(c.hotspot.element));return z.some(KO({anchorBox:S,bubble:c.bubble.getOr(Ay()),overrides:c.overrides,layouts:w}))};var wk=[sn("hotspot"),xr("bubble"),Ct("overrides",{}),tC(),pi("placement",E8)];const z3=(o,c,d)=>{const m=u8(d,c.x,c.y),S=La(m.left,m.top,c.width,c.height),w=_k(o.element,c,u_(),zx(),u_(),zx(),z.none());return z.some(KO({anchorBox:S,bubble:c.bubble,overrides:c.overrides,layouts:w}))};var W3=[sn("x"),sn("y"),Ct("height",0),Ct("width",0),Ct("bubble",Ay()),Ct("overrides",{}),tC(),pi("placement",z3)];const _8=ts.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Nee=o=>o.fold(we,(c,d,m)=>c.translate(-d,-m)),Pee=o=>o.fold(we,we),w8=o=>Xt(o,(c,d)=>c.translate(d.left,d.top),br(0,0)),A8=o=>{const c=Et(o,Nee);return w8(c)},G3=o=>{const c=Et(o,Pee);return w8(c)},Lee=_8.screen,Bee=_8.absolute,Vee=(o,c,d)=>{const m=cn(d.root).dom,S=w=>{const T=ze(w),V=ze(o.element);return de(T,V)};return z.from(m.frameElement).map(kn.fromDom).filter(S).map(Gc)},T8=(o,c,d)=>{const m=ze(o.element),S=zi(m),w=Vee(o,c,d).getOr(S);return Bee(w,S.left,S.top)},q3=(o,c,d,m)=>{const S=Lee(br(o,c));return z.some(lT(S,d,m))},O8=(o,c,d,m,S)=>o.map(w=>{const T=[c,w.point],V=wee(m,()=>G3(T),()=>G3(T),()=>A8(T)),F=JL(V.left,V.top,w.width,w.height),W=d.showAbove?d_():zb(),Q=d.showAbove?Wx():$T(),oe=_k(S,d,W,Q,W,Q,z.none());return KO({anchorBox:F,bubble:d.bubble.getOr(Ay()),overrides:d.overrides,layouts:oe})}),I8=(o,c,d)=>{const m=T8(o,d,c);return c.node.filter(Qs).bind(S=>{const w=S.dom.getBoundingClientRect(),T=q3(w.left,w.top,w.width,w.height),V=c.node.getOr(o.element);return O8(T,m,c,d,V)})};var Hee=[sn("node"),sn("root"),xr("bubble"),tC(),Ct("overrides",{}),Ct("showAbove",!1),pi("placement",I8)];const Ak=(o,c)=>({element:o,offset:c}),Fee=(o,c)=>{const d=Es(o);if(d.length===0)return Ak(o,c);if(c<d.length)return Ak(d[c],0);{const m=d[d.length-1],S=Hd(m)?ny(m).length:Es(m).length;return Ak(m,S)}},R8=(o,c)=>Hd(o)?Ak(o,c):Fee(o,c),K3=o=>o.foffset!==void 0,u0=(o,c)=>c.getSelection.getOrThunk(()=>()=>vg(o))().map(m=>{if(K3(m)){const S=R8(m.start,m.soffset),w=R8(m.finish,m.foffset);return qd.range(S.element,S.offset,w.element,w.offset)}else return m}),$ee=(o,c,d)=>{const m=cn(c.root).dom,S=T8(o,d,c),w=u0(m,c).bind(F=>{if(K3(F))return ay(m,qd.exactFromRange(F)).orThunk(()=>{const Q=kn.fromText(ap);cm(F.start,Q);const oe=vv(m,qd.exact(Q,0,Q,1));return od(Q),oe}).bind(Q=>q3(Q.left,Q.top,Q.width,Q.height));{const W=es(F,oe=>oe.dom.getBoundingClientRect()),Q={left:Math.min(W.firstCell.left,W.lastCell.left),right:Math.max(W.firstCell.right,W.lastCell.right),top:Math.min(W.firstCell.top,W.lastCell.top),bottom:Math.max(W.firstCell.bottom,W.lastCell.bottom)};return q3(Q.left,Q.top,Q.right-Q.left,Q.bottom-Q.top)}}),V=u0(m,c).bind(F=>K3(F)?Ec(F.start)?z.some(F.start):Po(F.start):z.some(F.firstCell)).getOr(o.element);return O8(w,S,c,d,V)};var Uee=[xr("getSelection"),sn("root"),xr("bubble"),tC(),Ct("overrides",{}),Ct("showAbove",!1),pi("placement",$ee)];const $v="link-layout",Z3=o=>o.x+o.width,x8=(o,c)=>o.x-c.width,d0=(o,c)=>o.y-c.height+o.height,D8=o=>o.y,k8=(o,c,d)=>Ca(Z3(o),D8(o),d.southeast(),xv(),"southeast",Jc(o,{left:0,top:2}),$v),Np=(o,c,d)=>Ca(x8(o,c),D8(o),d.southwest(),jb(),"southwest",Jc(o,{right:1,top:2}),$v),Y3=(o,c,d)=>Ca(Z3(o),d0(o,c),d.northeast(),LT(),"northeast",Jc(o,{left:0,bottom:3}),$v),J3=(o,c,d)=>Ca(x8(o,c),d0(o,c),d.northwest(),BT(),"northwest",Jc(o,{right:1,bottom:3}),$v),X3=()=>[k8,Np,Y3,J3],M8=()=>[Np,k8,J3,Y3],Tk=(o,c,d)=>{const m=vk(d,c.item.element),S=_k(o.element,c,X3(),M8(),X3(),M8(),z.none());return z.some(KO({anchorBox:m,bubble:Ay(),overrides:c.overrides,layouts:S}))};var N8=[sn("item"),tC(),Ct("overrides",{}),pi("placement",Tk)],jee=fu("type",{selection:Uee,node:Hee,hotspot:wk,submenu:N8,makeshift:W3});const zee=[Nu("classes",Wi),Yd("mode","all",["all","layout","placement"])],Ok=[Ct("useFixed",Ke),xr("getBounds")],Q3=[Zd("anchor",jee),cd("transition",zee)],P8=()=>{const o=document.documentElement;return U3(0,0,o.clientWidth,o.clientHeight)},L8=o=>{const c=Gc(o.element),d=o.element.dom.getBoundingClientRect();return bk(c.left,c.top,d.width,d.height)},B8=(o,c,d,m,S,w)=>{const T=d8(c.anchorBox,o);return C8(T,m.element,c.bubble,c.layouts,S,d,c.overrides,w)},Wee=(o,c,d,m,S)=>{const w=z.none();Ik(o,c,d,m,S,w)},Ik=(o,c,d,m,S,w)=>{const T=Mu("placement.info",zo(Q3),S),V=T.anchor,F=m.element,W=d.get(m.uid);Bl(()=>{jo(F,"position","fixed");const Q=li(F,"visibility");jo(F,"visibility","hidden");const oe=c.useFixed()?P8():L8(o);V.placement(o,V,oe).each(pe=>{const Ee=w.orThunk(()=>c.getBounds.map(Ye)),Se=B8(oe,pe,Ee,m,W,T.transition);d.set(m.uid,Se)}),Q.fold(()=>{Ds(F,"visibility")},pe=>{jo(F,"visibility",pe)}),li(F,"left").isNone()&&li(F,"top").isNone()&&li(F,"right").isNone()&&li(F,"bottom").isNone()&&zc(li(F,"position"),"fixed")&&Ds(F,"position")},F)};var qee=Object.freeze({__proto__:null,position:Wee,positionWithinBounds:Ik,getMode:(o,c,d)=>c.useFixed()?"fixed":"absolute",reset:(o,c,d,m)=>{const S=m.element;Jt(["position","left","right","top","bottom"],w=>Ds(S,w)),p_(S),d.clear(m.uid)}}),eB=Object.freeze({__proto__:null,init:()=>{let o={};return pd({readState:()=>o,clear:S=>{B(S)?delete o[S]:o={}},set:(S,w)=>{o[S]=w},get:S=>Vt(o,S)})}});const vu=Rc({fields:Ok,name:"positioning",active:l8,apis:qee,state:eB}),ZO=(o,c)=>c.universal?o:Fo(o,d=>qt(c.channels,d));var V8=Object.freeze({__proto__:null,events:o=>mi([Ft(Pb(),(c,d)=>{const m=o.channels,S=Jn(m),w=d,T=ZO(S,w);Jt(T,V=>{const F=m[V],W=F.schema,Q=Mu("channel["+V+`] data
Receiver: `+Rf(c.element),W,w.data);F.onReceive(c,Q)})})])}),H8=[Zd("channels",_T(fo.value,Kd([fS("onReceive"),Ct("schema",gn())])))];const Vf=Rc({fields:H8,name:"receiving",active:V8});var Kee=Object.freeze({__proto__:null,events:(o,c)=>{const d=(m,S)=>{o.updateState.each(w=>{const T=w(m,S);c.set(T)}),o.renderComponents.each(w=>{const T=w(S,c.get());(o.reuseDom?TO:r0)(m,T)})};return mi([Ft(Pb(),(m,S)=>{const w=S;if(!w.universal){const T=o.channel;qt(w.channels,T)&&d(m,w.data)}}),Qr((m,S)=>{o.initialData.each(w=>{d(m,w)})})])}}),nB=Object.freeze({__proto__:null,getState:(o,c,d)=>d}),F8=[sn("channel"),xr("renderComponents"),xr("updateState"),xr("initialData"),Zc("reuseDom",!0)],oB=Object.freeze({__proto__:null,init:()=>{const o=mn(z.none()),c=()=>o.set(z.none());return{readState:()=>o.get().getOr("none"),get:o.get,set:o.set,clear:c}}});const Hf=Rc({fields:F8,name:"reflecting",active:Kee,apis:nB,state:oB}),sB=(o,c,d,m)=>{d.get().each(T=>{EO(o)});const S=c.getAttachPoint(o);Mm(S,o);const w=o.getSystem().build(m);return Mm(o,w),d.set(w),w},$8=(o,c,d,m)=>{const S=sB(o,c,d,m);return c.onOpen(o,S),S},Yee=(o,c,d,m)=>d.get().map(()=>sB(o,c,d,m)),Jee=(o,c,d,m,S)=>{W8(o,c),$8(o,c,d,m),S(),G8(o,c)},rB=(o,c,d)=>{d.get().each(m=>{EO(o),Nm(o),c.onClose(o,m),d.clear()})},U8=(o,c,d)=>d.isOpen(),Xee=(o,c,d,m)=>U8(o,c,d)&&d.get().exists(S=>c.isPartOf(o,S,m)),iB=(o,c,d)=>d.get(),j8=(o,c,d,m)=>{li(o.element,c).fold(()=>{Jr(o.element,d)},S=>{Lo(o.element,d,S)}),jo(o.element,c,m)},z8=(o,c,d)=>{ic(o.element,d).fold(()=>Ds(o.element,c),m=>jo(o.element,c,m))},W8=(o,c,d)=>{const m=c.getAttachPoint(o);jo(o.element,"position",vu.getMode(m)),j8(o,"visibility",c.cloakVisibilityAttr,"hidden")},aB=o=>io(["top","left","right","bottom"],c=>li(o,c).isSome()),G8=(o,c,d)=>{aB(o.element)||Ds(o.element,"position"),z8(o,"visibility",c.cloakVisibilityAttr)};var Qee=Object.freeze({__proto__:null,cloak:W8,decloak:G8,open:$8,openWhileCloaked:Jee,close:rB,isOpen:U8,isPartOf:Xee,getState:iB,setContent:Yee}),ete=Object.freeze({__proto__:null,events:(o,c)=>mi([Ft(UE(),(d,m)=>{rB(d,o,c)})])}),tte=[zs("onOpen"),zs("onClose"),sn("isPartOf"),sn("getAttachPoint"),Ct("cloakVisibilityAttr","data-precloak-visibility")],cB=Object.freeze({__proto__:null,init:()=>{const o=$o(),c=M("not-implemented");return pd({readState:c,isOpen:o.isSet,clear:o.clear,set:o.set,get:o.get})}});const er=Rc({fields:tte,name:"sandboxing",active:ete,apis:Qee,state:cB}),qy=(o,c)=>c.getAnimationRoot.fold(()=>o.element,d=>d(o)),f0=o=>o.dimension.property,nC=(o,c)=>o.dimension.getDimension(c),Rk=(o,c)=>{const d=qy(o,c);Kc(d,[c.shrinkingClass,c.growingClass])},lB=(o,c)=>{Ii(o.element,c.openClass),Rr(o.element,c.closedClass),jo(o.element,f0(c),"0px"),zd(o.element)},uB=(o,c)=>{Ii(o.element,c.closedClass),Rr(o.element,c.openClass),Ds(o.element,f0(c))},q8=(o,c,d,m)=>{d.setCollapsed(),jo(o.element,f0(c),nC(c,o.element)),Rk(o,c),lB(o,c),c.onStartShrink(o),c.onShrunk(o)},K8=(o,c,d,m)=>{const S=m.getOrThunk(()=>nC(c,o.element));d.setCollapsed(),jo(o.element,f0(c),S),zd(o.element);const w=qy(o,c);Ii(w,c.growingClass),Rr(w,c.shrinkingClass),lB(o,c),c.onStartShrink(o)},Z8=(o,c,d)=>{const m=nC(c,o.element);(m==="0px"?q8:K8)(o,c,d,z.some(m))},Y8=(o,c,d)=>{const m=qy(o,c),S=na(m,c.shrinkingClass),w=nC(c,o.element);uB(o,c);const T=nC(c,o.element);(S?()=>{jo(o.element,f0(c),w),zd(o.element)}:()=>{lB(o,c)})(),Ii(m,c.shrinkingClass),Rr(m,c.growingClass),uB(o,c),jo(o.element,f0(c),T),d.setExpanded(),c.onStartGrow(o)},dB=(o,c,d)=>{if(d.isExpanded()){Ds(o.element,f0(c));const m=nC(c,o.element);jo(o.element,f0(c),m)}},oC=(o,c,d)=>{d.isExpanded()||Y8(o,c,d)},ote=(o,c,d)=>{d.isExpanded()&&Z8(o,c,d)},ste=(o,c,d)=>{d.isExpanded()&&q8(o,c,d)},fB=(o,c,d)=>d.isExpanded(),J8=(o,c,d)=>d.isCollapsed(),X8=(o,c,d)=>{const m=qy(o,c);return na(m,c.growingClass)===!0},Q_=(o,c,d)=>{const m=qy(o,c);return na(m,c.shrinkingClass)===!0};var Q8=Object.freeze({__proto__:null,refresh:dB,grow:oC,shrink:ote,immediateShrink:ste,hasGrown:fB,hasShrunk:J8,isGrowing:X8,isShrinking:Q_,isTransitioning:(o,c,d)=>X8(o,c)||Q_(o,c),toggleGrow:(o,c,d)=>{(d.isExpanded()?Z8:Y8)(o,c,d)},disableTransitions:Rk,immediateGrow:(o,c,d)=>{d.isExpanded()||(uB(o,c),jo(o.element,f0(c),nC(c,o.element)),Rk(o,c),d.setExpanded(),c.onStartGrow(o),c.onGrown(o))}}),e7=Object.freeze({__proto__:null,exhibit:(o,c,d)=>{const m=c.expanded;return kp(m?{classes:[c.openClass],styles:{}}:{classes:[c.closedClass],styles:Eg(c.dimension.property,"0px")})},events:(o,c)=>mi([Yb(Jd(),(d,m)=>{m.event.raw.propertyName===o.dimension.property&&(Rk(d,o),c.isExpanded()&&Ds(d.element,o.dimension.property),(c.isExpanded()?o.onGrown:o.onShrunk)(d))})])}),ew=[sn("closedClass"),sn("openClass"),sn("shrinkingClass"),sn("growingClass"),xr("getAnimationRoot"),zs("onShrunk"),zs("onStartShrink"),zs("onGrown"),zs("onStartGrow"),Ct("expanded",!1),Zd("dimension",fu("property",{width:[pi("property","width"),pi("getDimension",o=>Tc(o)+"px")],height:[pi("property","height"),pi("getDimension",o=>fa(o)+"px")]}))],pB=Object.freeze({__proto__:null,init:o=>{const c=mn(o.expanded),d=()=>"expanded: "+c.get();return pd({isExpanded:()=>c.get()===!0,isCollapsed:()=>c.get()===!1,setCollapsed:De(c.set,!1),setExpanded:De(c.set,!0),readState:d})}});const md=Rc({fields:ew,name:"sliding",active:e7,apis:Q8,state:pB});var xk=Object.freeze({__proto__:null,events:(o,c)=>{const m=o.stream.streams.setup(o,c);return mi([Ft(o.event,m),Ah(()=>c.cancel())].concat(o.cancelEvent.map(S=>[Ft(S,()=>c.cancel())]).getOr([])))}});const hB=o=>{const c=mn(null);return pd({readState:()=>({timer:c.get()!==null?"set":"unset"}),setTimer:w=>{c.set(w)},cancel:()=>{const w=c.get();w!==null&&w.cancel()}})};var mB=Object.freeze({__proto__:null,throttle:hB,init:o=>o.stream.streams.state(o)});const ate=(o,c)=>{const d=o.stream,m=Cc(o.onStream,d.delay);return c.setTimer(m),(S,w)=>{m.throttle(S,w),d.stopEvent&&w.stop()}};var cte=[Zd("stream",fu("mode",{throttle:[sn("delay"),Ct("stopEvent",!0),pi("streams",{setup:ate,state:hB})]})),Ct("event","input"),xr("cancelEvent"),fS("onStream")];const gB=Rc({fields:cte,name:"streaming",active:xk,state:mB});var YO=Object.freeze({__proto__:null,exhibit:(o,c)=>kp({attributes:iS([{key:c.tabAttr,value:"true"}])})}),lte=[Ct("tabAttr","data-alloy-tabstop")];const qr=Rc({fields:lte,name:"tabstopping",active:YO}),vB=(o,c,d)=>{const m=c.aria;m.update(o,m,d.get())},ute=(o,c,d)=>{c.toggleClass.each(m=>{d.get()?Rr(o.element,m):Ii(o.element,m)})},sC=(o,c,d,m)=>{const S=d.get();d.set(m),ute(o,c,d),vB(o,c,d),S!==m&&c.onToggled(o,m)},Dk=(o,c,d)=>{sC(o,c,d,!d.get())},dte=(o,c,d)=>{sC(o,c,d,!0)},n7=(o,c,d)=>{sC(o,c,d,!1)},o7=(o,c,d)=>d.get(),s7=(o,c,d)=>{sC(o,c,d,c.selected)};var r7=Object.freeze({__proto__:null,onLoad:s7,toggle:Dk,isOn:o7,on:dte,off:n7,set:sC}),pte=Object.freeze({__proto__:null,exhibit:()=>kp({}),events:(o,c)=>{const d=v4(o,c,Dk),m=JT(o,c,s7);return mi(Ut([o.toggleOnExecute?[d]:[],[m]]))}});const hte=(o,c,d)=>{Lo(o.element,"aria-pressed",d),c.syncWithExpanded&&bB(o,c,d)},mte=(o,c,d)=>{Lo(o.element,"aria-selected",d)},gte=(o,c,d)=>{Lo(o.element,"aria-checked",d)},bB=(o,c,d)=>{Lo(o.element,"aria-expanded",d)};var i7=[Ct("selected",!1),xr("toggleClass"),Ct("toggleOnExecute",!0),zs("onToggled"),pu("aria",{mode:"none"},fu("mode",{pressed:[Ct("syncWithExpanded",!1),pi("update",hte)],checked:[pi("update",gte)],expanded:[pi("update",bB)],selected:[pi("update",mte)],none:[pi("update",K)]}))];const Vs=Rc({fields:i7,name:"toggling",active:pte,apis:r7,state:QT(!1)}),yB=Un("tooltip.exclusive"),tw=Un("tooltip.show"),JO=Un("tooltip.hide"),XO=Un("tooltip.immediateHide"),nw=Un("tooltip.immediateShow"),SB=(o,c,d)=>{o.getSystem().broadcastOn([yB],{})};var a7=Object.freeze({__proto__:null,hideAllExclusive:SB,immediateOpenClose:(o,c,d,m)=>Rs(o,m?nw:XO),isEnabled:(o,c,d)=>d.isEnabled(),setComponents:(o,c,d,m)=>{d.getTooltip().each(S=>{S.getSystem().isConnected()&&os.set(S,m)})},setEnabled:(o,c,d,m)=>d.setEnabled(m)}),CB=Object.freeze({__proto__:null,events:(o,c)=>{const d=T=>{c.getTooltip().each(V=>{V.getSystem().isConnected()&&(Nm(V),o.onHide(T,V),c.clearTooltip())}),c.clearTimer()},m=T=>{if(!c.isShowing()&&c.isEnabled()){SB(T);const V=o.lazySink(T).getOrDie(),F=T.getSystem().build({dom:o.tooltipDom,components:o.tooltipComponents,events:mi(o.mode==="normal"?[Ft(Ap(),W=>{Rs(T,tw)}),Ft(Ka(),W=>{Rs(T,JO)})]:[]),behaviours:Tn([os.config({})])});c.setTooltip(F),Mm(V,F),o.onShow(T,F),vu.position(V,F,{anchor:o.anchor(T)})}},S=T=>{c.getTooltip().each(V=>{const F=o.lazySink(T).getOrDie();vu.position(F,V,{anchor:o.anchor(T)})})},w=()=>{switch(o.mode){case"normal":return[Ft(Tp(),T=>{Rs(T,nw)}),Ft(Op(),T=>{Rs(T,XO)}),Ft(Ap(),T=>{Rs(T,tw)}),Ft(Ka(),T=>{Rs(T,JO)})];case"follow-highlight":return[Ft($b(),(T,V)=>{Rs(T,tw)}),Ft(GE(),T=>{Rs(T,JO)})];case"children-normal":return[Ft(Tp(),(T,V)=>{ea(T.element).each(F=>{x(V.event.target,"[data-mce-tooltip]")&&c.getTooltip().fold(()=>{Rs(T,nw)},W=>{c.isShowing()&&(o.onShow(T,W),S(T))})})}),Ft(Op(),T=>{ea(T.element).fold(()=>{Rs(T,XO)},K)}),Ft(Ap(),T=>{yr(T.element,"[data-mce-tooltip]:hover").each(V=>{c.getTooltip().fold(()=>{Rs(T,tw)},F=>{c.isShowing()&&(o.onShow(T,F),S(T))})})}),Ft(Ka(),T=>{yr(T.element,"[data-mce-tooltip]:hover").fold(()=>{Rs(T,JO)},K)})];default:return[Ft(Tp(),(T,V)=>{ea(T.element).each(F=>{x(V.event.target,"[data-mce-tooltip]")&&c.getTooltip().fold(()=>{Rs(T,nw)},W=>{c.isShowing()&&(o.onShow(T,W),S(T))})})}),Ft(Op(),T=>{ea(T.element).fold(()=>{Rs(T,XO)},K)})]}};return mi(Ut([[Qx(T=>{o.onSetup(T)}),Ft(tw,T=>{c.resetTimer(()=>{m(T)},o.delayForShow())}),Ft(JO,T=>{c.resetTimer(()=>{d(T)},o.delayForHide())}),Ft(nw,T=>{c.resetTimer(()=>{m(T)},0)}),Ft(XO,T=>{c.resetTimer(()=>{d(T)},0)}),Ft(Pb(),(T,V)=>{const F=V;F.universal||(qt(F.channels,yB)||qt(F.channels,OS()))&&(F.data.closedTooltip&&c.isShowing()&&F.data.closedTooltip(),d(T))}),Ah(T=>{d(T)})],w()]))}}),l7=[sn("lazySink"),sn("tooltipDom"),Ct("exclusive",!0),Ct("tooltipComponents",[]),Or("delayForShow",M(300)),Or("delayForHide",M(100)),Or("onSetup",K),Yd("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),Ct("anchor",o=>({type:"hotspot",hotspot:o,layouts:{onLtr:M([Ea,uc,Ha,Xc,hi,Za]),onRtl:M([Ea,uc,Ha,Xc,hi,Za])},bubble:Xd(0,-2,{})})),zs("onHide"),zs("onShow")],u7=Object.freeze({__proto__:null,init:()=>{const o=mn(!0),c=$o(),d=$o(),m=()=>{c.on(clearTimeout)},S=(T,V)=>{m(),c.set(setTimeout(T,V))},w=M("not-implemented");return pd({getTooltip:d.get,isShowing:d.isSet,setTooltip:d.set,clearTooltip:d.clear,clearTimer:m,resetTimer:S,readState:w,isEnabled:()=>o.get(),setEnabled:T=>o.set(T)})}});const vi=Rc({fields:l7,name:"tooltipping",active:CB,state:u7,apis:a7});var f7=Object.freeze({__proto__:null,events:()=>mi([y_(mx(),Ze)]),exhibit:()=>kp({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const ow=Rc({fields:[],name:"unselecting",active:f7}),rC=o=>{const c=o.dom.attributes!==void 0?o.dom.attributes:[];return Xt(c,(d,m)=>m.name==="class"?d:{...d,[m.name]:m.value},{})},Ste=o=>Array.prototype.slice.call(o.dom.classList,0),$g=o=>{const c=kn.fromHtml(o),d=Es(c),m=rC(c),S=Ste(c),w=d.length===0?{}:{innerHtml:hp(c)};return{tag:dl(c),classes:S,attributes:m,...w}},tr=o=>{const c=U6(o)&&wn(o,"uid")?o.uid:i0("memento");return{get:w=>w.getSystem().getByUid(c).getOrDie(),getOpt:w=>w.getSystem().getByUid(c).toOptional(),asSpec:()=>({...o,uid:c})}},Mc=Rv,Ug=wy,p7=(o,c)=>{const d=mn(!1),m=mn(!1);return{stop:()=>{d.set(!0)},cut:()=>{m.set(!0)},isStopped:d.get,isCut:m.get,event:o,setSource:c.set,getSource:c.get}},h7=o=>{const c=mn(!1);return{stop:()=>{c.set(!0)},cut:K,isStopped:c.get,isCut:Ke,event:o,setSource:me("Cannot set source of a broadcasted event"),getSource:me("Cannot get source of a broadcasted event")}},EB=o=>o.raw.which===tO[0]&&!qt(["input","textarea"],dl(o.target))&&!_b(o.target,'[contenteditable="true"]'),m7=(o,c)=>{const d={stopBackspace:!0,...c},m=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],S=pl(d),w=Et(m.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),Ee=>vr(o,Ee,Se=>{S.fireIfReady(Se,Ee).each(qe=>{qe&&Se.kill()}),d.triggerEvent(Ee,Se)&&Se.kill()})),T=$o(),V=vr(o,"paste",Ee=>{S.fireIfReady(Ee,"paste").each(Pe=>{Pe&&Ee.kill()}),d.triggerEvent("paste",Ee)&&Ee.kill(),T.set(setTimeout(()=>{d.triggerEvent(OT(),Ee)},0))}),F=vr(o,"keydown",Ee=>{d.triggerEvent("keydown",Ee)?Ee.kill():d.stopBackspace&&EB(Ee)&&Ee.prevent()}),W=vr(o,"focusin",Ee=>{d.triggerEvent("focusin",Ee)&&Ee.kill()}),Q=$o(),oe=vr(o,"focusout",Ee=>{d.triggerEvent("focusout",Ee)&&Ee.kill(),Q.set(setTimeout(()=>{d.triggerEvent(Op(),Ee)},0))});return{unbind:()=>{Jt(w,Ee=>{Ee.unbind()}),F.unbind(),W.unbind(),oe.unbind(),V.unbind(),T.on(clearTimeout),Q.on(clearTimeout)}}},g7=(o,c)=>{const d=Vt(o,"target").getOr(c);return mn(d)},sw=ts.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),_B=(o,c,d,m,S,w)=>{const T=o(c,m),V=p7(d,S);return T.fold(()=>(w.logEventNoHandlers(c,m),sw.complete()),F=>{const W=F.descHandler;return xO(W)(V),V.isStopped()?(w.logEventStopped(c,F.element,W.purpose),sw.stopped()):V.isCut()?(w.logEventCut(c,F.element,W.purpose),sw.complete()):Sn(F.element).fold(()=>(w.logNoParent(c,F.element,W.purpose),sw.complete()),oe=>(w.logEventResponse(c,F.element,W.purpose),sw.resume(oe)))})},wB=(o,c,d,m,S,w)=>_B(o,c,d,m,S,w).fold(Ze,T=>wB(o,c,d,T,S,w),Ke),v7=(o,c,d,m,S)=>{const w=g7(d,m);return _B(o,c,d,m,w,S)},Cte=(o,c,d)=>{const m=h7(c);return Jt(o,S=>{const w=S.descHandler;xO(w)(m)}),m.isStopped()},AB=(o,c,d,m)=>b7(o,c,d,d.target,m),b7=(o,c,d,m,S)=>{const w=g7(d,m);return wB(o,c,d,m,w,S)},Ete=(o,c)=>({element:o,descHandler:c}),_te=(o,c)=>({id:o,descHandler:c}),wte=()=>{const o={},c=(T,V,F)=>{ps(F,(W,Q)=>{const oe=o[Q]!==void 0?o[Q]:{};oe[V]=RO(W,T),o[Q]=oe})},d=(T,V)=>Mf(V).bind(F=>Vt(T,F)).map(F=>Ete(V,F));return{registerId:c,unregisterId:T=>{ps(o,(V,F)=>{Pn(V,T)&&delete V[T]})},filterByType:T=>Vt(o,T).map(V=>Nn(V,(F,W)=>_te(W,F))).getOr([]),find:(T,V,F)=>Vt(o,V).bind(W=>Gd(F,Q=>d(W,Q),T))}},y7=()=>{const o=wte(),c={},d=W=>{const Q=W.element;return Mf(Q).getOrThunk(()=>OO("uid-",W.element))},m=(W,Q)=>{const oe=c[Q];if(oe===W)w(W);else throw new Error('The tagId "'+Q+'" is already used by: '+Rf(oe.element)+`
Cannot use it for: `+Rf(W.element)+`
The conflicting element is`+(Qs(oe.element)?" ":" not ")+"already in the DOM")},S=W=>{const Q=d(W);wn(c,Q)&&m(W,Q);const oe=[W];o.registerId(oe,Q,W.events),c[Q]=W},w=W=>{Mf(W.element).each(Q=>{delete c[Q],o.unregisterId(Q)})};return{find:(W,Q,oe)=>o.find(W,Q,oe),filter:W=>o.filterByType(W),register:S,unregister:w,getById:W=>Vt(c,W)}},TB=o=>{const c=Le=>Sn(o.element).fold(Ze,Je=>de(Le,Je)),d=y7(),m=(Le,Je)=>d.find(c,Le,Je),S=m7(o.element,{triggerEvent:(Le,Je)=>Av(Le,Je.target,nt=>AB(m,Le,Je,nt))}),w={debugInfo:M("real"),triggerEvent:(Le,Je,nt)=>{Av(Le,Je,Tt=>b7(m,Le,nt,Je,Tt))},triggerFocus:(Le,Je)=>{Mf(Le).fold(()=>{ja(Le)},nt=>{Av(ym(),Le,Tt=>(v7(m,ym(),{originator:Je,kill:K,prevent:K,target:Le},Le,Tt),!1))})},triggerEscape:(Le,Je)=>{w.triggerEvent("keydown",Le.element,Je.event)},getByUid:Le=>Pe(Le),getByDom:Le=>qe(Le),build:O,buildOrPatch:C,addToGui:Le=>{F(Le)},removeFromGui:Le=>{W(Le)},addToWorld:Le=>{T(Le)},removeFromWorld:Le=>{V(Le)},broadcast:Le=>{pe(Le)},broadcastOn:(Le,Je)=>{Ee(Le,Je)},broadcastEvent:(Le,Je)=>{Se(Le,Je)},isConnected:Ze},T=Le=>{Le.connect(w),Hd(Le.element)||(d.register(Le),Jt(Le.components(),T),w.triggerEvent(zE(),Le.element,{target:Le.element}))},V=Le=>{Hd(Le.element)||(Jt(Le.components(),V),d.unregister(Le)),Le.disconnect()},F=Le=>{Mm(o,Le)},W=Le=>{Nm(Le)},Q=()=>{S.unbind(),od(o.element)},oe=Le=>{const Je=d.filter(Pb());Jt(Je,nt=>{const Tt=nt.descHandler;xO(Tt)(Le)})},pe=Le=>{oe({universal:!0,data:Le})},Ee=(Le,Je)=>{oe({universal:!1,channels:Le,data:Je})},Se=(Le,Je)=>{const nt=d.filter(Le);return Cte(nt,Je)},Pe=Le=>d.getById(Le).fold(()=>fo.error(new Error('Could not find component with uid: "'+Le+'" in system.')),fo.value),qe=Le=>{const Je=Mf(Le).getOr("not found");return Pe(Je)};return T(o),{root:o,element:o.element,destroy:Q,add:F,remove:W,getByUid:Pe,getByDom:qe,addToWorld:T,removeFromWorld:V,broadcast:pe,broadcastOn:Ee,broadcastEvent:Se}},rw=()=>{const o=(c,d)=>{d.stop(),_S(c)};return[Ft(bm(),o),Ft(Bb(),o),Zb(_g()),Zb(hu())]},kk=o=>{const c=d=>Dg((m,S)=>{d(m),S.stop()});return mi(Ut([o.map(c).toArray(),rw()]))},zl=Bf({name:"Button",factory:o=>{const c=kk(o.action),d=o.dom.tag,m=w=>Vt(o.dom,"attributes").bind(T=>Vt(T,w)),S=()=>{if(d==="button"){const w=m("type").getOr("button"),T=m("role").map(V=>({role:V})).getOr({});return{type:w,...T}}else return{role:o.role.getOr(m("role").getOr("button"))}};return{uid:o.uid,dom:o.dom,components:o.components,events:c,behaviours:Lf.augment(o.buttonBehaviours,[ns.config({}),wo.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:S()},eventOrder:o.eventOrder}},configFields:[Ct("uid",void 0),sn("dom"),Ct("components",[]),Lf.field("buttonBehaviours",[ns,wo]),xr("action"),xr("role"),Ct("eventOrder",{})]}),OB=M([Ct("shell",!1),sn("makeItem"),Ct("setupItem",K),Lf.field("listBehaviours",[os])]),Ate=fd({name:"items",overrides:()=>({behaviours:Tn([os.config({})])})}),Tte=M([Ate]),Ote=M("CustomList"),Ite=(o,c,d,m)=>{const S=(V,F)=>{T(V).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},W=>{const Q=os.contents(W),oe=F.length,pe=oe-Q.length,Ee=pe>0?En(pe,()=>o.makeItem()):[],Se=Q.slice(oe);Jt(Se,qe=>os.remove(W,qe)),Jt(Ee,qe=>os.append(W,qe));const Pe=os.contents(W);Jt(Pe,(qe,Le)=>{o.setupItem(V,qe,F[Le],Le)})})},w=o.shell?{behaviours:[os.config({})],components:[]}:{behaviours:[],components:c},T=V=>o.shell?z.some(V):fr(V,o,"items");return{uid:o.uid,dom:o.dom,components:w.components,behaviours:kc(o.listBehaviours,w.behaviours),apis:{setItems:S}}},IB=Hu({name:Ote(),configFields:OB(),partFields:Tte(),factory:Ite,apis:{setItems:(o,c,d)=>{o.setItems(c,d)}}}),QO="aria-controls",Rte=o=>hv(o,d=>{if(!Ec(d))return!1;const m=Na(d,"id");return m!==void 0&&m.indexOf(QO)>-1}).bind(d=>{const m=Na(d,"id"),S=Ei(d);return yr(S,`[${QO}="${m}"]`)}),S7=()=>{const o=Un(QO);return{id:o,link:m=>{Lo(m,QO,o)},unlink:m=>{Jr(m,QO)}}},C7=(o,c)=>Rte(c).exists(d=>iC(o,d)),iC=(o,c)=>sy(c,d=>de(d,o.element),Ke)||C7(o,c),E7="alloy.item-hover",RB="alloy.item-focus",_7="alloy.item-toggled",xB=o=>{(ea(o.element).isNone()||ns.isFocused(o))&&(ns.isFocused(o)||ns.focus(o),xo(o,E7,{item:o}))},DB=o=>{xo(o,RB,{item:o})},kB=(o,c)=>{xo(o,_7,{item:o,state:c})},w7=M(E7),A7=M(RB),xte=M(_7),eI=o=>o.role.fold(()=>o.toggling.map(c=>c.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),we),Dte=(o,c)=>({aria:{mode:c?"selected":"checked"},...Dt(o,(d,m)=>m!=="exclusive"),onToggled:(d,m)=>{H(o.onToggled)&&o.onToggled(d,m),kB(d,m)}}),kte=o=>({dom:o.dom,domModification:{...o.domModification,attributes:{role:eI(o),...o.domModification.attributes,"aria-haspopup":o.hasSubmenu,...o.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Lf.augment(o.itemBehaviours,[o.toggling.fold(Vs.revoke,c=>Vs.config(Dte(c,o.role.exists(d=>d==="option")))),ns.config({ignore:o.ignoreFocus,stopMousedown:o.ignoreFocus,onFocus:c=>{DB(c)}}),wo.config({mode:"execution"}),zn.config({store:{mode:"memory",initialValue:o.data}}),Qo("item-type-events",[...rw(),Ft(Ap(),xB),Ft(Lb(),ns.focus)])]),components:o.components,eventOrder:o.eventOrder});var MB=[sn("data"),sn("components"),sn("dom"),Ct("hasSubmenu",!1),xr("toggling"),xr("role"),Lf.field("itemBehaviours",[Vs,ns,wo,zn]),Ct("ignoreFocus",!1),Ct("domModification",{}),pi("builder",kte),Ct("eventOrder",{})];const T7=o=>({dom:o.dom,components:o.components,events:mi([YT(Lb())])});var NB=[sn("dom"),sn("components"),pi("builder",T7)];const PB=M("item-widget"),LB=M([mu({name:"widget",overrides:o=>({behaviours:Tn([zn.config({store:{mode:"manual",getValue:c=>o.data,setValue:K}})])})})]),Mk=o=>{const c=Iv(PB(),o,LB()),d=Ig(PB(),o,c.internals()),m=w=>fr(w,o,"widget").map(T=>(wo.focusIn(T),T)),S=(w,T)=>Im(T.event.target)?z.none():(o.autofocus&&T.setSource(w.element),z.none());return{dom:o.dom,components:d,domModification:o.domModification,events:mi([Dg((w,T)=>{m(w).each(V=>{T.stop()})}),Ft(Ap(),xB),Ft(Lb(),(w,T)=>{o.autofocus?m(w):ns.focus(w)})]),behaviours:Lf.augment(o.widgetBehaviours,[zn.config({store:{mode:"memory",initialValue:o.data}}),ns.config({ignore:o.ignoreFocus,onFocus:w=>{DB(w)}}),wo.config({mode:"special",focusIn:o.autofocus?w=>{m(w)}:oD(),onLeft:S,onRight:S,onEscape:(w,T)=>!ns.isFocused(w)&&!o.autofocus?(ns.focus(w),z.some(!0)):(o.autofocus&&T.setSource(w.element),z.none())})])}};var O7=[sn("uid"),sn("data"),sn("components"),sn("dom"),Ct("autofocus",!1),Ct("ignoreFocus",!1),Lf.field("widgetBehaviours",[zn,ns,wo]),Ct("domModification",{}),wm(LB()),pi("builder",Mk)];const Nte=fu("type",{widget:O7,item:MB,separator:NB}),Pte=(o,c)=>({mode:"flatgrid",selector:"."+o.markers.item,initSize:{numColumns:c.initSize.numColumns,numRows:c.initSize.numRows},focusManager:o.focusManager}),Lte=(o,c)=>({mode:"matrix",selectors:{row:c.rowSelector,cell:"."+o.markers.item},previousSelector:c.previousSelector,focusManager:o.focusManager}),Bte=(o,c)=>({mode:"menu",selector:"."+o.markers.item,moveOnTab:c.moveOnTab,focusManager:o.focusManager}),Vte=M([n_({factory:{sketch:o=>{const c=Mu("menu.spec item",Nte,o);return c.builder(c)}},name:"items",unit:"item",defaults:(o,c)=>Pn(c,"uid")?c:{...c,uid:i0("item")},overrides:(o,c)=>({type:c.type,ignoreFocus:o.fakeFocus,domModification:{classes:[o.markers.item]}})})]),Hte=M([qi("role"),sn("value"),sn("items"),sn("dom"),sn("components"),Ct("eventOrder",{}),Dc("menuBehaviours",[ir,zn,zt,wo]),pu("movement",{mode:"menu",moveOnTab:!0},fu("mode",{grid:[KE(),pi("config",Pte)],matrix:[pi("config",Lte),sn("rowSelector"),Ct("previousSelector",z.none)],menu:[Ct("moveOnTab",!0),pi("config",Bte)]})),Ax(),Ct("fakeFocus",!1),Ct("focusManager",w_()),zs("onHighlight"),zs("onDehighlight"),Ct("showMenuRole",!0)]),I7=M("alloy.menu-focus"),Fte=(o,c)=>{const d=Ga(o.element,'[role="menuitemradio"][aria-checked="true"]');Jt(d,m=>{de(m,c.element)||o.getSystem().getByDom(m).each(S=>{Vs.off(S)})})},$te=(o,c,d,m)=>({uid:o.uid,dom:o.dom,markers:o.markers,behaviours:kc(o.menuBehaviours,[ir.config({highlightClass:o.markers.selectedItem,itemClass:o.markers.item,onHighlight:o.onHighlight,onDehighlight:o.onDehighlight}),zn.config({store:{mode:"memory",initialValue:o.value}}),zt.config({find:z.some}),wo.config(o.movement.config(o,o.movement))]),events:mi([Ft(A7(),(S,w)=>{const T=w.event;S.getSystem().getByDom(T.target).each(V=>{ir.highlight(S,V),w.stop(),xo(S,I7(),{menu:S,item:V})})}),Ft(w7(),(S,w)=>{const T=w.event.item;ir.highlight(S,T)}),Ft(xte(),(S,w)=>{const{item:T,state:V}=w.event;V&&Na(T.element,"role")==="menuitemradio"&&Fte(S,T)})]),components:c,eventOrder:o.eventOrder,...o.showMenuRole?{domModification:{attributes:{role:o.role.getOr("menu")}}}:{}}),p0=Hu({name:"Menu",configFields:Hte(),partFields:Vte(),factory:$te}),BB=o=>is(o,(c,d)=>({k:c,v:d})),VB=(o,c,d,m)=>Vt(d,m).bind(S=>Vt(o,S).bind(w=>{const T=VB(o,c,d,w);return z.some([w].concat(T))})).getOr([]),Ute=(o,c)=>{const d={};ps(o,(T,V)=>{Jt(T,F=>{d[F]=V})});const m=c,S=BB(c),w=es(S,(T,V)=>[V].concat(VB(d,m,S,V)));return es(d,T=>Vt(w,T).getOr([T]))},jte=()=>{const o=mn({}),c=mn({}),d=mn({}),m=$o(),S=mn({}),w=()=>{o.set({}),c.set({}),d.set({}),m.clear()},T=()=>m.get().isNone(),V=(xt,jn)=>{c.set({...c.get(),[xt]:{type:"prepared",menu:jn}})},F=(xt,jn,dn,pn)=>{m.set(xt),o.set(dn),c.set(jn),S.set(pn);const an=Ute(pn,dn);d.set(an)},W=xt=>$n(o.get(),(jn,dn)=>jn===xt),Q=(xt,jn,dn)=>Pe(xt).bind(pn=>W(xt).bind(an=>jn(an).map(Ro=>({triggeredMenu:pn,triggeringItem:Ro,triggeringPath:dn})))),oe=(xt,jn)=>{const dn=Fo(Le(xt).toArray(),pn=>Pe(pn).isSome());return Vt(d.get(),xt).bind(pn=>{const an=Ot(dn.concat(pn)),Ro=Ue(an,(mo,Ns)=>Q(mo,jn,an.slice(0,Ns+1)).fold(()=>zc(m.get(),mo)?[]:[z.none()],Vo=>[z.some(Vo)]));return Pd(Ro)})},pe=xt=>Vt(o.get(),xt).map(jn=>{const dn=Vt(d.get(),xt).getOr([]);return[jn].concat(dn)}),Ee=xt=>Vt(d.get(),xt).bind(jn=>jn.length>1?z.some(jn.slice(1)):z.none()),Se=xt=>Vt(d.get(),xt),Pe=xt=>qe(xt).bind(HB),qe=xt=>Vt(c.get(),xt),Le=xt=>Vt(o.get(),xt);return{setMenuBuilt:V,setContents:F,expand:pe,refresh:Se,collapse:Ee,lookupMenu:qe,lookupItem:Le,otherMenus:xt=>{const jn=S.get();return Oe(Jn(jn),xt)},getPrimary:()=>m.get().bind(Pe),getMenus:()=>c.get(),clear:w,isClear:T,getTriggeringPath:oe}},HB=o=>o.type==="prepared"?z.some(o.menu):z.none(),R7={init:jte,extractPreparedMenu:HB},x7=Un("tiered-menu-item-highlight"),FB=Un("tiered-menu-item-dehighlight"),D7=(o,c)=>{const d=$o(),m=(on,Ln,Uo)=>es(Uo,(fs,Co)=>{const us=()=>p0.sketch({...fs,value:Co,markers:o.markers,fakeFocus:o.fakeFocus,onHighlight:(ar,nr)=>{xo(ar,x7,{menuComp:ar,itemComp:nr})},onDehighlight:(ar,nr)=>{xo(ar,FB,{menuComp:ar,itemComp:nr})},focusManager:o.fakeFocus?aO():w_()});return Co===Ln?{type:"prepared",menu:on.getSystem().build(us())}:{type:"notbuilt",nbMenu:us}}),S=R7.init(),w=on=>{const Ln=m(on,o.data.primary,o.data.menus),Uo=F();return S.setContents(o.data.primary,Ln,o.data.expansions,Uo),S.getPrimary()},T=on=>zn.getValue(on).value,V=(on,Ln,Uo)=>Wo(Ln,fs=>{if(!fs.getSystem().isConnected())return z.none();const Co=ir.getCandidates(fs);return bt(Co,us=>T(us)===Uo)}),F=on=>es(o.data.menus,(Ln,Uo)=>Ue(Ln.items,fs=>fs.type==="separator"?[]:[fs.data.value])),W=ir.highlight,Q=(on,Ln)=>{W(on,Ln),ir.getHighlighted(Ln).orThunk(()=>ir.getFirst(Ln)).each(Uo=>{o.fakeFocus?ir.highlight(Ln,Uo):b_(on,Uo.element,Lb())})},oe=(on,Ln)=>ou(Et(Ln,Uo=>on.lookupMenu(Uo).bind(fs=>fs.type==="prepared"?z.some(fs.menu):z.none()))),pe=(on,Ln,Uo)=>{const fs=oe(Ln,Ln.otherMenus(Uo));Jt(fs,Co=>{Kc(Co.element,[o.markers.backgroundMenu]),o.stayInDom||os.remove(on,Co)})},Ee=on=>d.get().getOrThunk(()=>{const Ln={},Uo=Ga(on.element,`.${o.markers.item}`),fs=Fo(Uo,Co=>Na(Co,"aria-haspopup")==="true");return Jt(fs,Co=>{on.getSystem().getByDom(Co).each(us=>{const ar=T(us);Ln[ar]=us})}),d.set(Ln),Ln}),Se=(on,Ln)=>{const Uo=Ee(on);ps(Uo,(fs,Co)=>{const us=qt(Ln,Co);Lo(fs.element,"aria-expanded",us)})},Pe=(on,Ln,Uo)=>z.from(Uo[0]).bind(fs=>Ln.lookupMenu(fs).bind(Co=>{if(Co.type==="notbuilt")return z.none();{const us=Co.menu,ar=oe(Ln,Uo.slice(1));return Jt(ar,nr=>{Rr(nr.element,o.markers.backgroundMenu)}),Qs(us.element)||os.append(on,P(us)),Kc(us.element,[o.markers.backgroundMenu]),Q(on,us),pe(on,Ln,Uo),z.some(us)}}));let qe;(function(on){on[on.HighlightSubmenu=0]="HighlightSubmenu",on[on.HighlightParent=1]="HighlightParent"})(qe||(qe={}));const Le=(on,Ln,Uo)=>{if(Uo.type==="notbuilt"){const fs=on.getSystem().build(Uo.nbMenu());return S.setMenuBuilt(Ln,fs),fs}else return Uo.menu},Je=(on,Ln,Uo=qe.HighlightSubmenu)=>{if(Ln.hasConfigured(So)&&So.isDisabled(Ln))return z.some(Ln);{const fs=T(Ln);return S.expand(fs).bind(Co=>(Se(on,Co),z.from(Co[0]).bind(us=>S.lookupMenu(us).bind(ar=>{const nr=Le(on,us,ar);return Qs(nr.element)||os.append(on,P(nr)),o.onOpenSubmenu(on,Ln,nr,Ot(Co)),Uo===qe.HighlightSubmenu?(ir.highlightFirst(nr),Pe(on,S,Co)):(ir.dehighlightAll(nr),z.some(Ln))}))))}},nt=(on,Ln)=>{const Uo=T(Ln);return S.collapse(Uo).bind(fs=>(Se(on,fs),Pe(on,S,fs).map(Co=>(o.onCollapseMenu(on,Ln,Co),Co))))},Tt=(on,Ln)=>{const Uo=T(Ln);return S.refresh(Uo).bind(fs=>(Se(on,fs),Pe(on,S,fs)))},xt=(on,Ln)=>Im(Ln.element)?z.none():Je(on,Ln,qe.HighlightSubmenu),jn=(on,Ln)=>Im(Ln.element)?z.none():nt(on,Ln),dn=(on,Ln)=>nt(on,Ln).orThunk(()=>o.onEscape(on,Ln).map(()=>on)),pn=on=>(Ln,Uo)=>qc(Uo.getSource(),`.${o.markers.item}`).bind(fs=>Ln.getSystem().getByDom(fs).toOptional().bind(Co=>on(Ln,Co).map(Ze))),an=mi([Ft(I7(),(on,Ln)=>{const Uo=Ln.event.item;S.lookupItem(T(Uo)).each(()=>{const fs=Ln.event.menu;ir.highlight(on,fs);const Co=T(Ln.event.item);S.refresh(Co).each(us=>pe(on,S,us))})}),Dg((on,Ln)=>{const Uo=Ln.event.target;on.getSystem().getByDom(Uo).each(fs=>{T(fs).indexOf("collapse-item")===0&&nt(on,fs),Je(on,fs,qe.HighlightSubmenu).fold(()=>{o.onExecute(on,fs)},K)})}),Qr((on,Ln)=>{w(on).each(Uo=>{os.append(on,P(Uo)),o.onOpenMenu(on,Uo),o.highlightOnOpen===Pl.HighlightMenuAndItem?Q(on,Uo):o.highlightOnOpen===Pl.HighlightJustMenu&&W(on,Uo)})}),Ft(x7,(on,Ln)=>{o.onHighlightItem(on,Ln.event.menuComp,Ln.event.itemComp)}),Ft(FB,(on,Ln)=>{o.onDehighlightItem(on,Ln.event.menuComp,Ln.event.itemComp)}),...o.navigateOnHover?[Ft(w7(),(on,Ln)=>{const Uo=Ln.event.item;Tt(on,Uo),Je(on,Uo,qe.HighlightParent),o.onHover(on,Uo)})]:[]]),Ro=on=>ir.getHighlighted(on).bind(ir.getHighlighted),mo=on=>{Ro(on).each(Ln=>{nt(on,Ln)})},Ns=on=>{S.getPrimary().each(Ln=>{Q(on,Ln)})},Vo=on=>z.from(on.components()[0]).filter(Ln=>Na(Ln.element,"role")==="menu"),po={collapseMenu:mo,highlightPrimary:Ns,repositionMenus:on=>{S.getPrimary().bind(Uo=>Ro(on).bind(fs=>{const Co=T(fs),us=lo(S.getMenus()),ar=ou(Et(us,R7.extractPreparedMenu));return S.getTriggeringPath(Co,nr=>V(on,ar,nr))}).map(fs=>({primary:Uo,triggeringPath:fs}))).fold(()=>{Vo(on).each(Uo=>{o.onRepositionMenu(on,Uo,[])})},({primary:Uo,triggeringPath:fs})=>{o.onRepositionMenu(on,Uo,fs)})}};return{uid:o.uid,dom:o.dom,markers:o.markers,behaviours:kc(o.tmenuBehaviours,[wo.config({mode:"special",onRight:pn(xt),onLeft:pn(jn),onEscape:pn(dn),focusIn:(on,Ln)=>{S.getPrimary().each(Uo=>{b_(on,Uo.element,Lb())})}}),ir.config({highlightClass:o.markers.selectedMenu,itemClass:o.markers.menu}),zt.config({find:on=>ir.getHighlighted(on)}),os.config({})]),eventOrder:o.eventOrder,apis:po,events:an}},k7=M("collapse-item"),zte=(o,c,d)=>({primary:o,menus:c,expansions:d}),Wte=(o,c)=>({primary:o,menus:Eg(o,c),expansions:{}}),Gte=o=>({value:Un(k7()),meta:{text:o}}),Yy=Bf({name:"TieredMenu",configFields:[qE("onExecute"),qE("onEscape"),fS("onOpenMenu"),fS("onOpenSubmenu"),zs("onRepositionMenu"),zs("onCollapseMenu"),Ct("highlightOnOpen",Pl.HighlightMenuAndItem),Cg("data",[sn("primary"),sn("menus"),sn("expansions")]),Ct("fakeFocus",!1),zs("onHighlightItem"),zs("onDehighlightItem"),zs("onHover"),Tx(),sn("dom"),Ct("navigateOnHover",!0),Ct("stayInDom",!1),Dc("tmenuBehaviours",[wo,ir,zt,os]),Ct("eventOrder",{})],apis:{collapseMenu:(o,c)=>{o.collapseMenu(c)},highlightPrimary:(o,c)=>{o.highlightPrimary(c)},repositionMenus:(o,c)=>{o.repositionMenus(c)}},factory:D7,extraApis:{tieredData:zte,singleData:Wte,collapseItem:Gte}}),Nk=M("sink"),qte=M(fd({name:Nk(),overrides:M({dom:{tag:"div"},behaviours:Tn([vu.config({useFixed:Ze})]),events:mi([Zb(lc()),Zb(hu()),Zb(bm())])})})),Kte=Kd([Ct("isExtraPart",Ke),cd("fireEventInstead",[Ct("event",Fb())])]),$B=o=>{const c=Mu("Dismissal",Kte,o);return{[Mg()]:{schema:Kd([sn("target")]),onReceive:(d,m)=>{er.isOpen(d)&&(er.isPartOf(d,m.target)||c.isExtraPart(d,m.target)||c.fireEventInstead.fold(()=>er.close(d),w=>Rs(d,w.event)))}}}},Zte=Kd([cd("fireEventInstead",[Ct("event",bx())]),If("doReposition")]),UB=o=>{const c=Mu("Reposition",Zte,o);return{[hl()]:{onReceive:d=>{er.isOpen(d)&&c.fireEventInstead.fold(()=>c.doReposition(d),m=>Rs(d,m.event))}}}},M7=(o,c)=>{const d=o.getHotspot(c).getOr(c),m="hotspot",S=o.getAnchorOverrides();return o.layouts.fold(()=>({type:m,hotspot:d,overrides:S}),w=>({type:m,hotspot:d,overrides:S,layouts:w}))},N7=(o,c,d)=>{const m=o.fetch;return m(d).map(c)},P7=(o,c,d,m,S,w,T)=>{const V=N7(o,c,m),F=Mh(m,o);return V.map(W=>W.bind(Q=>{const oe=Q.menus[Q.primary];return z.from(oe).each(pe=>{o.listRole.each(Ee=>{pe.role=Ee})}),z.from(Yy.sketch({...w.menu(),uid:i0(""),data:Q,highlightOnOpen:T,onOpenMenu:(pe,Ee)=>{const Se=F().getOrDie();vu.position(Se,Ee,{anchor:d}),er.decloak(S)},onOpenSubmenu:(pe,Ee,Se)=>{const Pe=F().getOrDie();vu.position(Pe,Se,{anchor:{type:"submenu",item:Ee}}),er.decloak(S)},onRepositionMenu:(pe,Ee,Se)=>{const Pe=F().getOrDie();vu.position(Pe,Ee,{anchor:d}),Jt(Se,qe=>{vu.position(Pe,qe.triggeredMenu,{anchor:{type:"submenu",item:qe.triggeringItem}})})},onEscape:()=>(ns.focus(m),er.close(S),z.some(!0))}))}))},Pk=(o,c,d,m,S,w,T)=>{const V=M7(o,d);return P7(o,c,V,d,m,S,T).map(W=>(W.fold(()=>{er.isOpen(m)&&er.close(m)},Q=>{er.cloak(m),er.open(m,Q),w(m)}),m))},Yte=(o,c,d,m,S,w,T)=>(er.close(m),Os.pure(m)),L7=(o,c,d,m,S,w)=>{const T=ms.getCoupled(d,"sandbox");return(er.isOpen(T)?Yte:Pk)(o,c,d,T,m,S,w)},Ff=(o,c,d)=>{const m=zt.getCurrent(c).getOr(c),S=Tc(o.element);d?jo(m.element,"min-width",S+"px"):dm(m.element,S)},Mh=(o,c)=>o.getSystem().getByUid(c.uid+"-"+Nk()).map(d=>()=>fo.value(d)).getOrThunk(()=>c.lazySink.fold(()=>()=>fo.error(new Error("No internal sink is specified, nor could an external sink be found")),d=>()=>d(o))),jB=o=>{er.getState(o).each(c=>{Yy.repositionMenus(c)})},Lk=(o,c,d)=>{const m=S7(),S=(V,F)=>{const W=M7(o,c);m.link(c.element),o.matchWidth&&Ff(W.hotspot,F,o.useMinWidth),o.onOpen(W,V,F),d!==void 0&&d.onOpen!==void 0&&d.onOpen(V,F)},w=(V,F)=>{m.unlink(c.element),T().getOr(F).element.dom.dispatchEvent(new window.FocusEvent("focusout")),d!==void 0&&d.onClose!==void 0&&d.onClose(V,F)},T=Mh(c,o);return{dom:{tag:"div",classes:o.sandboxClasses,attributes:{id:m.id}},behaviours:Lf.augment(o.sandboxBehaviours,[zn.config({store:{mode:"memory",initialValue:c}}),er.config({onOpen:S,onClose:w,isPartOf:(V,F,W)=>iC(F,W)||iC(c,W),getAttachPoint:()=>T().getOrDie()}),zt.config({find:V=>er.getState(V).bind(F=>zt.getCurrent(F))}),Vf.config({channels:{...$B({isExtraPart:Ke}),...UB({doReposition:jB})}})])}},zB=o=>{const c=ms.getCoupled(o,"sandbox");jB(c)},tI=()=>[Ct("sandboxClasses",[]),Lf.field("sandboxBehaviours",[zt,Vf,er,zn])],Jte=M([sn("dom"),sn("fetch"),zs("onOpen"),Ba("onExecute"),Ct("getHotspot",z.some),Ct("getAnchorOverrides",M({})),tC(),Dc("dropdownBehaviours",[Vs,ms,wo,ns]),sn("toggleClass"),Ct("eventOrder",{}),xr("lazySink"),Ct("matchWidth",!1),Ct("useMinWidth",!1),xr("role"),xr("listRole")].concat(tI())),B7=M([dd({schema:[Tx(),Ct("fakeFocus",!1)],name:"menu",defaults:o=>({onExecute:o.onExecute})}),qte()]),nI=(o,c,d,m)=>{const S=Q=>Vt(o.dom,"attributes").bind(oe=>Vt(oe,Q)),w=Q=>{er.getState(Q).each(oe=>{Yy.highlightPrimary(oe)})},T=(Q,oe,pe)=>L7(o,we,Q,m,oe,pe),V=Q=>{T(Q,w,Pl.HighlightMenuAndItem).get(K)},F={expand:Q=>{Vs.isOn(Q)||T(Q,K,Pl.HighlightNone).get(K)},open:Q=>{Vs.isOn(Q)||T(Q,K,Pl.HighlightMenuAndItem).get(K)},refetch:Q=>ms.getExistingCoupled(Q,"sandbox").fold(()=>T(Q,K,Pl.HighlightMenuAndItem).map(K),pe=>Pk(o,we,Q,pe,m,K,Pl.HighlightMenuAndItem).map(K)),isOpen:Vs.isOn,close:Q=>{Vs.isOn(Q)&&T(Q,K,Pl.HighlightMenuAndItem).get(K)},repositionMenus:Q=>{Vs.isOn(Q)&&zB(Q)}},W=(Q,oe)=>(_S(Q),z.some(!0));return{uid:o.uid,dom:o.dom,components:c,behaviours:kc(o.dropdownBehaviours,[Vs.config({toggleClass:o.toggleClass,aria:{mode:"expanded"}}),ms.config({others:{sandbox:Q=>Lk(o,Q,{onOpen:()=>Vs.on(Q),onClose:()=>Vs.off(Q)})}}),wo.config({mode:"special",onSpace:W,onEnter:W,onDown:(Q,oe)=>{if($f.isOpen(Q)){const pe=ms.getCoupled(Q,"sandbox");w(pe)}else $f.open(Q);return z.some(!0)},onEscape:(Q,oe)=>$f.isOpen(Q)?($f.close(Q),z.some(!0)):z.none()}),ns.config({})]),events:kk(z.some(V)),eventOrder:{...o.eventOrder,[ld()]:["disabling","toggling","alloy.base.behaviour"]},apis:F,domModification:{attributes:{"aria-haspopup":o.listRole.getOr("true"),...o.role.fold(()=>({}),Q=>({role:Q})),...o.dom.tag==="button"?{type:S("type").getOr("button")}:{}}}}},$f=Hu({name:"Dropdown",configFields:Jte(),partFields:B7(),factory:nI,apis:{open:(o,c)=>o.open(c),refetch:(o,c)=>o.refetch(c),expand:(o,c)=>o.expand(c),close:(o,c)=>o.close(c),isOpen:(o,c)=>o.isOpen(c),repositionMenus:(o,c)=>o.repositionMenus(c)}}),oI="form",WB=[Dc("formBehaviours",[zn])],GB=o=>"<alloy.field."+o+">",sI=o=>{const c=(()=>{const w=[];return{field:(V,F)=>(w.push(V),Pu(oI,GB(V),F)),record:M(w)}})(),d=o(c),m=c.record(),S=Et(m,w=>mu({name:w,pname:GB(w)}));return w3(oI,WB,S,Qte,d)},Xte=(o,c)=>o.fold(()=>fo.error(c),fo.value),Qte=(o,c)=>({uid:o.uid,dom:o.dom,components:c,behaviours:kc(o.formBehaviours,[zn.config({store:{mode:"manual",getValue:d=>{const m=s_(d,o);return es(m,(S,w)=>S().bind(T=>{const V=zt.getCurrent(T);return Xte(V,new Error(`Cannot find a current component to extract the value from for form part '${w}': `+Rf(T.element)))}).map(zn.getValue))},setValue:(d,m)=>{ps(m,(S,w)=>{fr(d,o,w).each(T=>{zt.getCurrent(T).each(V=>{zn.setValue(V,S)})})})}}})]),apis:{getField:(d,m)=>fr(d,o,m).bind(zt.getCurrent)}}),tf={getField:Pg((o,c,d)=>o.getField(c,d)),sketch:sI},Wl=M([sn("dom"),Ct("shell",!0),Dc("toolbarBehaviours",[os])]),Uf=M([fd({name:"groups",overrides:()=>({behaviours:Tn([os.config({})])})})]),ene=(o,c,d,m)=>{const S=(V,F)=>{w(V).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},W=>{os.set(W,F)})},w=V=>o.shell?z.some(V):fr(V,o,"groups"),T=o.shell?{behaviours:[os.config({})],components:[]}:{behaviours:[],components:c};return{uid:o.uid,dom:o.dom,components:T.components,behaviours:kc(o.toolbarBehaviours,T.behaviours),apis:{setGroups:S,refresh:K},domModification:{attributes:{role:"group"}}}},pr=Hu({name:"Toolbar",configFields:Wl(),partFields:Uf(),factory:ene,apis:{setGroups:(o,c,d)=>{o.setGroups(c,d)}}}),tne=M([xf(["toggledClass"]),sn("lazySink"),If("fetch"),vh("getBounds"),cd("fireDismissalEventInstead",[Ct("event",Fb())]),tC(),zs("onToggled")]),h0=M([dd({name:"button",overrides:o=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Tn([Vs.config({toggleClass:o.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:o.onToggled})])})}),dd({factory:pr,schema:Wl(),name:"toolbar",overrides:o=>({toolbarBehaviours:Tn([wo.config({mode:"cyclic",onEscape:c=>(fr(c,o,"button").each(ns.focus),z.none())})])})})]),Jy=$o(),V7=(o,c)=>{Jy.set(!0),rI(o,c),Jy.clear()},rI=(o,c)=>{const d=ms.getCoupled(o,"toolbarSandbox");er.isOpen(d)?er.close(d):er.open(d,c.toolbar())},iI=(o,c,d,m)=>{const S=d.getBounds.map(T=>T()),w=d.lazySink(o).getOrDie();vu.positionWithinBounds(w,c,{anchor:{type:"hotspot",hotspot:o,layouts:m,overrides:{maxWidthFunction:WT()}}},S)},H7=(o,c,d,m,S)=>{pr.setGroups(c,S),iI(o,c,d,m),Vs.on(o)},qB=(o,c,d)=>{const m=S7(),S=(T,V)=>{const F=Jy.get().getOr(!1);d.fetch().get(W=>{H7(o,V,d,c.layouts,W),m.link(o.element),F||wo.focusIn(V)})},w=()=>{Vs.off(o),Jy.get().getOr(!1)||ns.focus(o),m.unlink(o.element)};return{dom:{tag:"div",attributes:{id:m.id}},behaviours:Tn([wo.config({mode:"special",onEscape:T=>(er.close(T),z.some(!0))}),er.config({onOpen:S,onClose:w,isPartOf:(T,V,F)=>iC(V,F)||iC(o,F),getAttachPoint:()=>d.lazySink(o).getOrDie()}),Vf.config({channels:{...$B({isExtraPart:Ke,...d.fireDismissalEventInstead.map(T=>({fireEventInstead:{event:T.event}})).getOr({})}),...UB({doReposition:()=>{er.getState(ms.getCoupled(o,"toolbarSandbox")).each(T=>{iI(o,T,d,c.layouts)})}})}})])}},m0=Hu({name:"FloatingToolbarButton",factory:(o,c,d,m)=>({...zl.sketch({...m.button(),action:S=>{rI(S,m)},buttonBehaviours:Lf.augment({dump:m.button().buttonBehaviours},[ms.config({others:{toolbarSandbox:S=>qB(S,d,o)}})])}),apis:{setGroups:(S,w)=>{er.getState(ms.getCoupled(S,"toolbarSandbox")).each(T=>{H7(S,T,o,d.layouts,w)})},reposition:S=>{er.getState(ms.getCoupled(S,"toolbarSandbox")).each(w=>{iI(S,w,o,d.layouts)})},toggle:S=>{rI(S,m)},toggleWithoutFocusing:S=>{V7(S,m)},getToolbar:S=>er.getState(ms.getCoupled(S,"toolbarSandbox")),isOpen:S=>er.isOpen(ms.getCoupled(S,"toolbarSandbox"))}}),configFields:tne(),partFields:h0(),apis:{setGroups:(o,c,d)=>{o.setGroups(c,d)},reposition:(o,c)=>{o.reposition(c)},toggle:(o,c)=>{o.toggle(c)},toggleWithoutFocusing:(o,c)=>{o.toggleWithoutFocusing(c)},getToolbar:(o,c)=>o.getToolbar(c),isOpen:(o,c)=>o.isOpen(c)}}),F7=M([Ct("prefix","form-field"),Dc("fieldBehaviours",[zt,zn])]),KB=M([fd({schema:[sn("dom")],name:"label"}),fd({factory:{sketch:o=>({uid:o.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:o.text}})},schema:[sn("text")],name:"aria-descriptor"}),mu({factory:{sketch:o=>{const c=hx(o,["factory"]);return o.factory.sketch(c)}},schema:[sn("factory")],name:"field"})]),$7=(o,c,d,m)=>{const S=kc(o.fieldBehaviours,[zt.config({find:V=>fr(V,o,"field")}),zn.config({store:{mode:"manual",getValue:V=>zt.getCurrent(V).bind(zn.getValue),setValue:(V,F)=>{zt.getCurrent(V).each(W=>{zn.setValue(W,F)})}}})]),w=mi([Qr((V,F)=>{const W=hS(V,o,["label","field","aria-descriptor"]);W.field().each(Q=>{const oe=Un(o.prefix);W.label().each(pe=>{Lo(pe.element,"for",oe),Lo(Q.element,"id",oe)}),W["aria-descriptor"]().each(pe=>{const Ee=Un(o.prefix);Lo(pe.element,"id",Ee),Lo(Q.element,"aria-describedby",Ee)})})})]),T={getField:V=>fr(V,o,"field"),getLabel:V=>fr(V,o,"label")};return{uid:o.uid,dom:o.dom,components:c,behaviours:S,events:w,apis:T}},ws=Hu({name:"FormField",configFields:F7(),partFields:KB(),factory:$7,apis:{getField:(o,c)=>o.getField(c),getLabel:(o,c)=>o.getLabel(c)}}),nne=M([Ct("field1Name","field1"),Ct("field2Name","field2"),fS("onLockedChange"),xf(["lockClass"]),Ct("locked",!1),Lf.field("coupledFieldBehaviours",[zt,zn]),Or("onInput",K)]),one=(o,c,d)=>fr(o,c,d).bind(zt.getCurrent),U7=(o,c)=>mu({factory:ws,name:o,overrides:d=>({fieldBehaviours:Tn([Qo("coupled-input-behaviour",[Ft(Ag(),m=>{one(m,d,c).each(S=>{fr(m,d,"lock").each(w=>{Vs.isOn(w)&&d.onLockedChange(m,S,w),d.onInput(m)})})})])])})}),sne=M([U7("field1","field2"),U7("field2","field1"),mu({factory:zl,schema:[sn("dom")],name:"lock",overrides:o=>({buttonBehaviours:Tn([Vs.config({selected:o.locked,toggleClass:o.markers.lockClass,aria:{mode:"pressed"}})])})})]),rne=(o,c,d,m)=>({uid:o.uid,dom:o.dom,components:c,behaviours:Lf.augment(o.coupledFieldBehaviours,[zt.config({find:z.some}),zn.config({store:{mode:"manual",getValue:S=>{const w=mS(S,o,["field1","field2"]);return{[o.field1Name]:zn.getValue(w.field1()),[o.field2Name]:zn.getValue(w.field2())}},setValue:(S,w)=>{const T=mS(S,o,["field1","field2"]);wn(w,o.field1Name)&&zn.setValue(T.field1(),w[o.field1Name]),wn(w,o.field2Name)&&zn.setValue(T.field2(),w[o.field2Name])}}})]),apis:{getField1:S=>fr(S,o,"field1"),getField2:S=>fr(S,o,"field2"),getLock:S=>fr(S,o,"lock")}}),ra=Hu({name:"FormCoupledInputs",configFields:nne(),partFields:sne(),factory:rne,apis:{getField1:(o,c)=>o.getField1(c),getField2:(o,c)=>o.getField2(c),getLock:(o,c)=>o.getLock(c)}}),ine=(o,c)=>{const d=Et(o.options,S=>({dom:{tag:"option",value:S.value,innerHtml:S.text}})),m=o.data.map(S=>Eg("initialValue",S)).getOr({});return{uid:o.uid,dom:{tag:"select",classes:o.selectClasses,attributes:o.selectAttributes},components:d,behaviours:kc(o.selectBehaviours,[ns.config({}),zn.config({store:{mode:"manual",getValue:S=>au(S.element),setValue:(S,w)=>{const T=gt(o.options);bt(o.options,F=>F.value===w).isSome()?Af(S.element,w):S.element.dom.selectedIndex===-1&&w===""&&T.each(F=>Af(S.element,F.value))},...m}})])}},ane=Bf({name:"HtmlSelect",configFields:[sn("options"),Dc("selectBehaviours",[ns,zn]),Ct("selectClasses",[]),Ct("selectAttributes",{}),xr("data")],factory:ine}),j7=(o,c,d,m,S)=>{const w=()=>o.lazySink(c),T=m.type==="horizontal"?{layouts:{onLtr:()=>zb(),onRtl:()=>$T()}}:{},V=W=>W.length===2,F=W=>V(W)?T:{};return Yy.sketch({dom:{tag:"div"},data:m.data,markers:m.menu.markers,highlightOnOpen:m.menu.highlightOnOpen,fakeFocus:m.menu.fakeFocus,onEscape:()=>(er.close(c),o.onEscape.map(W=>W(c)),z.some(!0)),onExecute:()=>z.some(!0),onOpenMenu:(W,Q)=>{vu.positionWithinBounds(w().getOrDie(),Q,d,S())},onOpenSubmenu:(W,Q,oe,pe)=>{const Ee=w().getOrDie();vu.position(Ee,oe,{anchor:{type:"submenu",item:Q,...F(pe)}})},onRepositionMenu:(W,Q,oe)=>{const pe=w().getOrDie();vu.positionWithinBounds(pe,Q,d,S()),Jt(oe,Ee=>{const Se=F(Ee.triggeringPath);vu.position(pe,Ee.triggeredMenu,{anchor:{type:"submenu",item:Ee.triggeringItem,...Se}})})}})},cne=(o,c)=>{const d=(pe,Ee)=>o.getRelated(pe).exists(Pe=>iC(Pe,Ee)),m=(pe,Ee)=>{er.setContent(pe,Ee)},S=(pe,Ee,Se)=>{const Pe=z.none;w(pe,Ee,Se,Pe)},w=(pe,Ee,Se,Pe)=>{const qe=o.lazySink(pe).getOrDie();er.openWhileCloaked(pe,Ee,()=>vu.positionWithinBounds(qe,pe,Se,Pe())),zn.setValue(pe,z.some({mode:"position",config:Se,getBounds:Pe}))},T=(pe,Ee,Se)=>{V(pe,Ee,Se,z.none)},V=(pe,Ee,Se,Pe)=>{const qe=j7(o,pe,Ee,Se,Pe);er.open(pe,qe),zn.setValue(pe,z.some({mode:"menu",menu:qe}))},F=pe=>{er.isOpen(pe)&&(zn.setValue(pe,z.none()),er.close(pe))},W=pe=>er.getState(pe),Q=pe=>{er.isOpen(pe)&&zn.getValue(pe).each(Ee=>{switch(Ee.mode){case"menu":er.getState(pe).each(Yy.repositionMenus);break;case"position":const Se=o.lazySink(pe).getOrDie();vu.positionWithinBounds(Se,pe,Ee.config,Ee.getBounds());break}})},oe={setContent:m,showAt:S,showWithinBounds:w,showMenuAt:T,showMenuWithinBounds:V,hide:F,getContent:W,reposition:Q,isOpen:er.isOpen};return{uid:o.uid,dom:o.dom,behaviours:kc(o.inlineBehaviours,[er.config({isPartOf:(pe,Ee,Se)=>iC(Ee,Se)||d(pe,Se),getAttachPoint:pe=>o.lazySink(pe).getOrDie(),onOpen:pe=>{o.onShow(pe)},onClose:pe=>{o.onHide(pe)}}),zn.config({store:{mode:"memory",initialValue:z.none()}}),Vf.config({channels:{...$B({isExtraPart:c.isExtraPart,...o.fireDismissalEventInstead.map(pe=>({fireEventInstead:{event:pe.event}})).getOr({})}),...UB({...o.fireRepositionEventInstead.map(pe=>({fireEventInstead:{event:pe.event}})).getOr({}),doReposition:Q})}})]),eventOrder:o.eventOrder,apis:oe}},Ni=Bf({name:"InlineView",configFields:[sn("lazySink"),zs("onShow"),zs("onHide"),vh("onEscape"),Dc("inlineBehaviours",[er,zn,Vf]),cd("fireDismissalEventInstead",[Ct("event",Fb())]),cd("fireRepositionEventInstead",[Ct("event",bx())]),Ct("getRelated",z.none),Ct("isExtraPart",Ke),Ct("eventOrder",z.none)],factory:cne,apis:{showAt:(o,c,d,m)=>{o.showAt(c,d,m)},showWithinBounds:(o,c,d,m,S)=>{o.showWithinBounds(c,d,m,S)},showMenuAt:(o,c,d,m)=>{o.showMenuAt(c,d,m)},showMenuWithinBounds:(o,c,d,m,S)=>{o.showMenuWithinBounds(c,d,m,S)},hide:(o,c)=>{o.hide(c)},isOpen:(o,c)=>o.isOpen(c),getContent:(o,c)=>o.getContent(c),setContent:(o,c,d)=>{o.setContent(c,d)},reposition:(o,c)=>{o.reposition(c)}}}),iw=M([Fi("type","text"),xr("data"),Ct("inputAttributes",{}),Ct("inputStyles",{}),Ct("tag","input"),Ct("inputClasses",[]),zs("onSetValue"),Or("fromInputValue",we),Or("toInputValue",we),Ct("styles",{}),Ct("eventOrder",{}),Dc("inputBehaviours",[zn,ns]),Ct("selectOnFocus",!0)]),z7=o=>Tn([ns.config({onFocus:o.selectOnFocus?c=>{const d=c.element,m=au(d);o.type!=="range"&&d.dom.setSelectionRange(0,m.length)}:K})]),lne=o=>({...z7(o),...kc(o.inputBehaviours,[zn.config({store:{mode:"manual",...o.data.map(c=>({initialValue:c})).getOr({}),getValue:c=>o.fromInputValue(au(c.element)),setValue:(c,d)=>{au(c.element)!==d&&Af(c.element,o.toInputValue(d))}},onSetValue:o.onSetValue})])}),ZB=o=>({tag:o.tag,attributes:{type:o.type,...o.inputAttributes},styles:o.inputStyles,classes:o.inputClasses}),W7=(o,c)=>({uid:o.uid,dom:ZB(o),components:[],behaviours:lne(o),eventOrder:o.eventOrder}),jg=Bf({name:"Input",configFields:iw(),factory:W7}),Vk=Va(PB(),LB()),une=(o,c)=>{const d=ic(o,"id").fold(()=>{const m=Un("dialog-label");return Lo(c,"id",m),m},we);Lo(o,"aria-labelledby",d)},dne=M([sn("lazySink"),xr("dragBlockClass"),Or("getBounds",kl),Ct("useTabstopAt",Ze),Ct("firstTabstop",0),Ct("eventOrder",{}),Dc("modalBehaviours",[wo]),Ba("onExecute"),qE("onEscape")]),YB={sketch:we},fne=M([fd({name:"draghandle",overrides:(o,c)=>({behaviours:Tn([eC.config({mode:"mouse",getTarget:d=>Wd(d,'[role="dialog"]').getOr(d),blockerClass:o.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(c,null,2)).message),getBounds:o.getDragBounds})])})}),mu({schema:[sn("dom")],name:"title"}),mu({factory:YB,schema:[sn("dom")],name:"close"}),mu({factory:YB,schema:[sn("dom")],name:"body"}),fd({factory:YB,schema:[sn("dom")],name:"footer"}),dd({factory:{sketch:(o,c)=>({...o,dom:c.dom,components:c.components})},schema:[Ct("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Ct("components",[])],name:"blocker"})]),pne=(o,c,d,m)=>{const S=$o(),w=Se=>{S.set(Se);const Pe=o.lazySink(Se).getOrDie(),qe=m.blocker(),Le=Pe.getSystem().build({...qe,components:qe.components.concat([P(Se)]),behaviours:Tn([ns.config({}),Qo("dialog-blocker-events",[Yb(Tp(),()=>{ln.isBlocked(Se)?K():wo.focusIn(Se)})])])});Mm(Pe,Le),wo.focusIn(Se)},T=Se=>{S.clear(),Sn(Se.element).each(Pe=>{Se.getSystem().getByDom(Pe).each(qe=>{Nm(qe)})})},V=Se=>Ml(Se,o,"body"),F=Se=>fr(Se,o,"footer"),W=(Se,Pe)=>{ln.block(Se,Pe)},Q=Se=>{ln.unblock(Se)},oe=Un("modal-events"),pe={...o.eventOrder,[bh()]:[oe].concat(o.eventOrder["alloy.system.attached"]||[])},Ee=Wr();return{uid:o.uid,dom:o.dom,components:c,apis:{show:w,hide:T,getBody:V,getFooter:F,setIdle:Q,setBusy:W},eventOrder:pe,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:kc(o.modalBehaviours,[os.config({}),wo.config({mode:"cyclic",onEnter:o.onExecute,onEscape:o.onEscape,useTabstopAt:o.useTabstopAt,firstTabstop:o.firstTabstop}),ln.config({getRoot:S.get}),Qo(oe,[Qr(Se=>{const Pe=Ml(Se,o,"title").element,qe=iT(Pe);Ee.os.isMacOS()&&B(qe)?Lo(Se.element,"aria-label",qe):une(Se.element,Pe)})])])}},dc=Hu({name:"ModalDialog",configFields:dne(),partFields:fne(),factory:pne,apis:{show:(o,c)=>{o.show(c)},hide:(o,c)=>{o.hide(c)},getBody:(o,c)=>o.getBody(c),getFooter:(o,c)=>o.getFooter(c),setBusy:(o,c,d)=>{o.setBusy(c,d)},setIdle:(o,c)=>{o.setIdle(c)}}}),G7=fd({schema:[sn("dom")],name:"label"}),bu=o=>fd({name:""+o+"-edge",overrides:c=>c.model.manager.edgeActions[o].fold(()=>({}),m=>({events:mi([S_(_g(),(S,w,T)=>m(S,T),[c]),S_(hu(),(S,w,T)=>m(S,T),[c]),S_(wv(),(S,w,T)=>{T.mouseIsDown.get()&&m(S,T)},[c])])}))}),hne=bu("top-left"),JB=bu("top"),q7=bu("top-right"),K7=bu("right"),mne=bu("bottom-right"),Z7=bu("bottom"),Y7=bu("bottom-left"),J7=bu("left"),gne=mu({name:"thumb",defaults:M({dom:{styles:{position:"absolute"}}}),overrides:o=>({events:mi([xg(_g(),o,"spectrum"),xg(wg(),o,"spectrum"),xg(kb(),o,"spectrum"),xg(hu(),o,"spectrum"),xg(wv(),o,"spectrum"),xg(FE(),o,"spectrum")])})}),Hk=o=>Jb(o.event),vne=mu({schema:[fl("mouseIsDown",()=>mn(!1))],name:"spectrum",overrides:o=>{const d=o.model.manager,m=(S,w)=>d.getValueFromEvent(w).map(T=>d.setValueFrom(S,o,T));return{behaviours:Tn([wo.config({mode:"special",onLeft:(S,w)=>d.onLeft(S,o,Hk(w)),onRight:(S,w)=>d.onRight(S,o,Hk(w)),onUp:(S,w)=>d.onUp(S,o,Hk(w)),onDown:(S,w)=>d.onDown(S,o,Hk(w))}),qr.config({}),ns.config({})]),events:mi([Ft(_g(),m),Ft(wg(),m),Ft(hu(),m),Ft(wv(),(S,w)=>{o.mouseIsDown.get()&&m(S,w)})])}}});var bne=[G7,J7,K7,JB,Z7,hne,q7,Y7,mne,gne,vne];const aI=M("slider.change.value"),yne=o=>o.type.indexOf("touch")!==-1,Fk=o=>{const c=o.event.raw;if(yne(c)){const d=c;return d.touches!==void 0&&d.touches.length===1?z.some(d.touches[0]).map(m=>br(m.clientX,m.clientY)):z.none()}else{const d=c;return d.clientX!==void 0?z.some(d).map(m=>br(m.clientX,m.clientY)):z.none()}},X7="top",Q7="right",ej="bottom",Sne="left",aC=o=>o.model.minX,cC=o=>o.model.minY,cI=o=>o.model.minX-1,g0=o=>o.model.minY-1,Uv=o=>o.model.maxX,lC=o=>o.model.maxY,lI=o=>o.model.maxX+1,uI=o=>o.model.maxY+1,XB=(o,c,d)=>c(o)-d(o),$k=o=>XB(o,Uv,aC),dI=o=>XB(o,lC,cC),Uk=o=>$k(o)/2,tj=o=>dI(o)/2,aw=(o,c)=>c?o.stepSize*o.speedMultiplier:o.stepSize,nj=o=>o.snapToGrid,QB=o=>o.snapStart,eV=o=>o.rounded,jk=(o,c)=>o[c+"-edge"]!==void 0,oj=o=>jk(o,Sne),tV=o=>jk(o,Q7),sj=o=>jk(o,X7),rj=o=>jk(o,ej),v0=o=>o.model.value.get(),Xy=(o,c)=>({x:o,y:c}),$m=(o,c)=>{xo(o,aI(),{value:c})},Cne=(o,c)=>{$m(o,Xy(cI(c),g0(c)))},Ene=(o,c)=>{$m(o,g0(c))},ij=(o,c)=>{$m(o,Xy(Uk(c),g0(c)))},aj=(o,c)=>{$m(o,Xy(lI(c),g0(c)))},_ne=(o,c)=>{$m(o,lI(c))},wne=(o,c)=>{$m(o,Xy(lI(c),tj(c)))},Ane=(o,c)=>{$m(o,Xy(lI(c),uI(c)))},cj=(o,c)=>{$m(o,uI(c))},Tne=(o,c)=>{$m(o,Xy(Uk(c),uI(c)))},One=(o,c)=>{$m(o,Xy(cI(c),uI(c)))},Ine=(o,c)=>{$m(o,cI(c))},zk=(o,c)=>{$m(o,Xy(cI(c),tj(c)))},nV=(o,c,d,m)=>o<c?o:o>d?d:o===c?c-1:Math.max(c,o-m),oV=(o,c,d,m)=>o>d?o:o<c?c:o===d?d+1:Math.min(d,o+m),lj=(o,c,d)=>Math.max(c,Math.min(d,o)),Rne=(o,c,d,m,S)=>S.fold(()=>{const w=o-c,T=Math.round(w/m)*m;return lj(c+T,c-1,d+1)},w=>{const T=(o-w)%m,V=Math.round(T/m),F=Math.floor((o-w)/m),W=Math.floor((d-w)/m),Q=Math.min(W,F+V),oe=w+Q*m;return Math.max(w,oe)}),xne=(o,c,d)=>Math.min(d,Math.max(o,c))-c,uj=o=>{const{min:c,max:d,range:m,value:S,step:w,snap:T,snapStart:V,rounded:F,hasMinEdge:W,hasMaxEdge:Q,minBound:oe,maxBound:pe,screenRange:Ee}=o,Se=W?c-1:c,Pe=Q?d+1:d;if(S<oe)return Se;if(S>pe)return Pe;{const qe=xne(S,oe,pe),Le=lj(qe/Ee*m+c,Se,Pe);return T&&Le>=c&&Le<=d?Rne(Le,c,d,w,V):F?Math.round(Le):Le}},dj=o=>{const{min:c,max:d,range:m,value:S,hasMinEdge:w,hasMaxEdge:T,maxBound:V,maxOffset:F,centerMinEdge:W,centerMaxEdge:Q}=o;return S<c?w?0:W:S>d?T?V:Q:(S-c)/m*F},sV="top",fj="right",pj="bottom",rV="left",Dne="width",kne="height",Um=o=>o.element.dom.getBoundingClientRect(),jm=(o,c)=>o[c],Wk=o=>{const c=Um(o);return jm(c,rV)},hj=o=>{const c=Um(o);return jm(c,fj)},fI=o=>{const c=Um(o);return jm(c,sV)},mj=o=>{const c=Um(o);return jm(c,pj)},gj=o=>{const c=Um(o);return jm(c,Dne)},vj=o=>{const c=Um(o);return jm(c,kne)},bj=(o,c,d)=>(o+c)/2-d,yj=(o,c)=>{const d=Um(o),m=Um(c),S=jm(d,rV),w=jm(d,fj),T=jm(m,rV);return bj(S,w,T)},Sj=(o,c)=>{const d=Um(o),m=Um(c),S=jm(d,sV),w=jm(d,pj),T=jm(m,sV);return bj(S,w,T)},cw=(o,c)=>{xo(o,aI(),{value:c})},iV=(o,c,d)=>{const m={min:aC(c),max:Uv(c),range:$k(c),value:d,step:aw(c),snap:nj(c),snapStart:QB(c),rounded:eV(c),hasMinEdge:oj(c),hasMaxEdge:tV(c),minBound:Wk(o),maxBound:hj(o),screenRange:gj(o)};return uj(m)},Mne=(o,c,d)=>{const m=iV(o,c,d);return cw(o,m),m},Nne=(o,c)=>{const d=aC(c);cw(o,d)},Pne=(o,c)=>{const d=Uv(c);cw(o,d)},Lne=(o,c,d,m)=>{const w=(o>0?oV:nV)(v0(d),aC(d),Uv(d),aw(d,m));return cw(c,w),z.some(w)},Cj=o=>(c,d,m)=>Lne(o,c,d,m).map(Ze),Bne=o=>Fk(o).map(d=>d.left),Vne=(o,c,d,m,S)=>{const T=gj(o),V=m.bind(Q=>z.some(yj(Q,o))).getOr(0),F=S.bind(Q=>z.some(yj(Q,o))).getOr(T),W={min:aC(c),max:Uv(c),range:$k(c),value:d,hasMinEdge:oj(c),hasMaxEdge:tV(c),minBound:Wk(o),maxBound:hj(o),maxOffset:T,centerMinEdge:V,centerMaxEdge:F};return dj(W)},aV=(o,c,d,m,S,w)=>{const T=Vne(c,w,d,m,S);return Wk(c)-Wk(o)+T},Hne=(o,c,d,m)=>{const S=v0(d),w=aV(o,m.getSpectrum(o),S,m.getLeftEdge(o),m.getRightEdge(o),d),T=Tc(c.element)/2;jo(c.element,"left",w-T+"px")},Fne=Cj(-1),$ne=Cj(1),Une=z.none,jne=z.none,zne={"top-left":z.none(),top:z.none(),"top-right":z.none(),right:z.some(_ne),"bottom-right":z.none(),bottom:z.none(),"bottom-left":z.none(),left:z.some(Ine)};var cV=Object.freeze({__proto__:null,setValueFrom:Mne,setToMin:Nne,setToMax:Pne,findValueOfOffset:iV,getValueFromEvent:Bne,findPositionOfValue:aV,setPositionFromValue:Hne,onLeft:Fne,onRight:$ne,onUp:Une,onDown:jne,edgeActions:zne});const Gk=(o,c)=>{xo(o,aI(),{value:c})},lV=(o,c,d)=>{const m={min:cC(c),max:lC(c),range:dI(c),value:d,step:aw(c),snap:nj(c),snapStart:QB(c),rounded:eV(c),hasMinEdge:sj(c),hasMaxEdge:rj(c),minBound:fI(o),maxBound:mj(o),screenRange:vj(o)};return uj(m)},Wne=(o,c,d)=>{const m=lV(o,c,d);return Gk(o,m),m},pI=(o,c)=>{const d=cC(c);Gk(o,d)},Ej=(o,c)=>{const d=lC(c);Gk(o,d)},Gne=(o,c,d,m)=>{const w=(o>0?oV:nV)(v0(d),cC(d),lC(d),aw(d,m));return Gk(c,w),z.some(w)},_j=o=>(c,d,m)=>Gne(o,c,d,m).map(Ze),wj=o=>Fk(o).map(d=>d.top),qne=(o,c,d,m,S)=>{const T=vj(o),V=m.bind(Q=>z.some(Sj(Q,o))).getOr(0),F=S.bind(Q=>z.some(Sj(Q,o))).getOr(T),W={min:cC(c),max:lC(c),range:dI(c),value:d,hasMinEdge:sj(c),hasMaxEdge:rj(c),minBound:fI(o),maxBound:mj(o),maxOffset:T,centerMinEdge:V,centerMaxEdge:F};return dj(W)},uV=(o,c,d,m,S,w)=>{const T=qne(c,w,d,m,S);return fI(c)-fI(o)+T},Kne=(o,c,d,m)=>{const S=v0(d),w=uV(o,m.getSpectrum(o),S,m.getTopEdge(o),m.getBottomEdge(o),d),T=fa(c.element)/2;jo(c.element,"top",w-T+"px")},Zne=z.none,Yne=z.none,Jne=_j(-1),Xne=_j(1),Qne={"top-left":z.none(),top:z.some(Ene),"top-right":z.none(),right:z.none(),"bottom-right":z.none(),bottom:z.some(cj),"bottom-left":z.none(),left:z.none()};var Aj=Object.freeze({__proto__:null,setValueFrom:Wne,setToMin:pI,setToMax:Ej,findValueOfOffset:lV,getValueFromEvent:wj,findPositionOfValue:uV,setPositionFromValue:Kne,onLeft:Zne,onRight:Yne,onUp:Jne,onDown:Xne,edgeActions:Qne});const hI=(o,c)=>{xo(o,aI(),{value:c})},qk=(o,c)=>({x:o,y:c}),Tj=(o,c,d)=>{const m=iV(o,c,d.left),S=lV(o,c,d.top),w=qk(m,S);return hI(o,w),w},Oj=(o,c,d,m,S)=>{const w=o>0?oV:nV,T=c?v0(m).x:w(v0(m).x,aC(m),Uv(m),aw(m,S)),V=c?w(v0(m).y,cC(m),lC(m),aw(m,S)):v0(m).y;return hI(d,qk(T,V)),z.some(T)},mI=(o,c)=>(d,m,S)=>Oj(o,c,d,m,S).map(Ze),Ij=(o,c)=>{const d=aC(c),m=cC(c);hI(o,qk(d,m))},eoe=(o,c)=>{const d=Uv(c),m=lC(c);hI(o,qk(d,m))},toe=o=>Fk(o),noe=(o,c,d,m)=>{const S=v0(d),w=aV(o,m.getSpectrum(o),S.x,m.getLeftEdge(o),m.getRightEdge(o),d),T=uV(o,m.getSpectrum(o),S.y,m.getTopEdge(o),m.getBottomEdge(o),d),V=Tc(c.element)/2,F=fa(c.element)/2;jo(c.element,"left",w-V+"px"),jo(c.element,"top",T-F+"px")},ooe=mI(-1,!1),dV=mI(1,!1),Rj=mI(-1,!0),soe=mI(1,!0),xj={"top-left":z.some(Cne),top:z.some(ij),"top-right":z.some(aj),right:z.some(wne),"bottom-right":z.some(Ane),bottom:z.some(Tne),"bottom-left":z.some(One),left:z.some(zk)};var roe=Object.freeze({__proto__:null,setValueFrom:Tj,setToMin:Ij,setToMax:eoe,getValueFromEvent:toe,setPositionFromValue:noe,onLeft:ooe,onRight:dV,onUp:Rj,onDown:soe,edgeActions:xj});const ioe=[Ct("stepSize",1),Ct("speedMultiplier",10),Ct("onChange",K),Ct("onChoose",K),Ct("onInit",K),Ct("onDragStart",K),Ct("onDragEnd",K),Ct("snapToGrid",!1),Ct("rounded",!0),xr("snapStart"),Zd("model",fu("mode",{x:[Ct("minX",0),Ct("maxX",100),fl("value",o=>mn(o.mode.minX)),sn("getInitialValue"),pi("manager",cV)],y:[Ct("minY",0),Ct("maxY",100),fl("value",o=>mn(o.mode.minY)),sn("getInitialValue"),pi("manager",Aj)],xy:[Ct("minX",0),Ct("maxX",100),Ct("minY",0),Ct("maxY",100),fl("value",o=>mn({x:o.mode.minX,y:o.mode.minY})),sn("getInitialValue"),pi("manager",roe)]})),Dc("sliderBehaviours",[wo,zn]),fl("mouseIsDown",()=>mn(!1))],Nh=Hu({name:"Slider",configFields:ioe,partFields:bne,factory:(o,c,d,m)=>{const S=xt=>Ml(xt,o,"thumb"),w=xt=>Ml(xt,o,"spectrum"),T=xt=>fr(xt,o,"left-edge"),V=xt=>fr(xt,o,"right-edge"),F=xt=>fr(xt,o,"top-edge"),W=xt=>fr(xt,o,"bottom-edge"),Q=o.model,oe=Q.manager,pe=(xt,jn)=>{oe.setPositionFromValue(xt,jn,o,{getLeftEdge:T,getRightEdge:V,getTopEdge:F,getBottomEdge:W,getSpectrum:w})},Ee=(xt,jn)=>{Q.value.set(jn);const dn=S(xt);pe(xt,dn)},Se=(xt,jn)=>{Ee(xt,jn);const dn=S(xt);return o.onChange(xt,dn,jn),z.some(!0)},Pe=xt=>{oe.setToMin(xt,o)},qe=xt=>{oe.setToMax(xt,o)},Le=xt=>{const jn=()=>{fr(xt,o,"thumb").each(pn=>{const an=Q.value.get();o.onChoose(xt,pn,an)})},dn=o.mouseIsDown.get();o.mouseIsDown.set(!1),dn&&jn()},Je=(xt,jn)=>{jn.stop(),o.mouseIsDown.set(!0),o.onDragStart(xt,S(xt))},nt=(xt,jn)=>{jn.stop(),o.onDragEnd(xt,S(xt)),Le(xt)},Tt=xt=>{fr(xt,o,"spectrum").map(wo.focusIn)};return{uid:o.uid,dom:o.dom,components:c,behaviours:kc(o.sliderBehaviours,[wo.config({mode:"special",focusIn:Tt}),zn.config({store:{mode:"manual",getValue:xt=>Q.value.get(),setValue:Ee}}),Vf.config({channels:{[Om()]:{onReceive:Le}}})]),events:mi([Ft(aI(),(xt,jn)=>{Se(xt,jn.event.value)}),Qr((xt,jn)=>{const dn=Q.getInitialValue();Q.value.set(dn);const pn=S(xt);pe(xt,pn);const an=w(xt);o.onInit(xt,pn,an,Q.value.get())}),Ft(_g(),Je),Ft(kb(),nt),Ft(hu(),(xt,jn)=>{Tt(xt),Je(xt,jn)}),Ft(FE(),nt)]),apis:{resetToMin:Pe,resetToMax:qe,setValue:Ee,refresh:pe},domModification:{styles:{position:"relative"}}}},apis:{setValue:(o,c,d)=>{o.setValue(c,d)},resetToMin:(o,c)=>{o.resetToMin(c)},resetToMax:(o,c)=>{o.resetToMax(c)},refresh:(o,c)=>{o.refresh(c)}}}),fV="container",Dj=[Dc("slotBehaviours",[])],kj=o=>"<alloy.field."+o+">",aoe=o=>{const c=(()=>{const w=[];return{slot:(V,F)=>(w.push(V),Pu(fV,kj(V),F)),record:M(w)}})(),d=o(c),m=c.record(),S=Et(m,w=>mu({name:w,pname:kj(w)}));return w3(fV,Dj,S,coe,d)},coe=(o,c)=>{const d=Pe=>r_(o),m=(Pe,qe)=>fr(Pe,o,qe),S=(Pe,qe)=>(Le,Je)=>fr(Le,o,Je).map(nt=>Pe(nt,Je)).getOr(qe),w=Pe=>(qe,Le)=>{Jt(Le,Je=>Pe(qe,Je))},T=(Pe,qe)=>Na(Pe.element,"aria-hidden")!=="true",V=(Pe,qe)=>{if(!T(Pe)){const Le=Pe.element;Ds(Le,"display"),Jr(Le,"aria-hidden"),xo(Pe,lS(),{name:qe,visible:!0})}},F=(Pe,qe)=>{if(T(Pe)){const Le=Pe.element;jo(Le,"display","none"),Lo(Le,"aria-hidden","true"),xo(Pe,lS(),{name:qe,visible:!1})}},W=S(T,!1),Q=S(F),oe=w(Q),pe=Pe=>oe(Pe,d()),Ee=S(V),Se={getSlotNames:d,getSlot:m,isShowing:W,hideSlot:Q,hideAllSlots:pe,showSlot:Ee};return{uid:o.uid,dom:o.dom,components:c,behaviours:$O(o.slotBehaviours),apis:Se}},yu={...es({getSlotNames:(o,c)=>o.getSlotNames(c),getSlot:(o,c,d)=>o.getSlot(c,d),isShowing:(o,c,d)=>o.isShowing(c,d),hideSlot:(o,c,d)=>o.hideSlot(c,d),hideAllSlots:(o,c)=>o.hideAllSlots(c),showSlot:(o,c,d)=>o.showSlot(c,d)},o=>Pg(o)),sketch:aoe},loe=(o,c)=>Xt(o,(S,w)=>c(w,S.len).fold(M(S),V=>({len:V.finish,list:S.list.concat([V])})),{len:0,list:[]}).list,pV=(o,c,d)=>({within:o,extra:c,withinWidth:d}),Mj=(o,c,d)=>{const m=loe(o,(V,F)=>{const W=d(V);return z.some({element:V,start:F,finish:F+W,width:W})}),S=Fo(m,V=>V.finish<=c),w=yt(S,(V,F)=>V+F.width,0),T=m.slice(S.length);return{within:S,extra:T,withinWidth:w}},Kk=o=>Et(o,c=>c.element),uoe=(o,c,d)=>{const m=Kk(o.concat(c));return pV(m,[],d)},doe=(o,c,d,m)=>{const S=Kk(o).concat([d]);return pV(S,Kk(c),m)},Nj=(o,c,d)=>pV(Kk(o),[],d),foe=(o,c,d)=>{const m=Mj(c,o,d);return m.extra.length===0?z.some(m):z.none()},poe=(o,c,d,m)=>{const S=foe(o,c,d).getOrThunk(()=>Mj(c,o-d(m),d)),w=S.within,T=S.extra,V=S.withinWidth;return T.length===1&&T[0].width<=d(m)?uoe(w,T,V):T.length>=1?doe(w,T,m,V):Nj(w,T,V)},Pj=(o,c)=>{const d=Et(c,m=>P(m));pr.setGroups(o,d)},hoe=o=>Wo(o,c=>ea(c.element).bind(d=>c.getSystem().getByDom(d).toOptional())),Lj=(o,c,d)=>{const m=c.builtGroups.get();if(m.length===0)return;const S=Ml(o,c,"primary"),w=ms.getCoupled(o,"overflowGroup");jo(S.element,"visibility","hidden");const T=m.concat([w]),V=hoe(T);d([]),Pj(S,T);const F=Tc(S.element),W=poe(F,c.builtGroups.get(),Q=>Math.ceil(Q.element.dom.getBoundingClientRect().width),w);W.extra.length===0?(os.remove(S,w),d([])):(Pj(S,W.within),d(W.extra)),Ds(S.element,"visibility"),zd(S.element),V.each(ns.focus)},gI=M([Dc("splitToolbarBehaviours",[ms]),fl("builtGroups",()=>mn([]))]),Bj=M([xf(["overflowToggledClass"]),vh("getOverflowBounds"),sn("lazySink"),fl("overflowGroups",()=>mn([])),zs("onOpened"),zs("onClosed")].concat(gI())),moe=M([mu({factory:pr,schema:Wl(),name:"primary"}),dd({schema:Wl(),name:"overflow"}),dd({name:"overflow-button"}),dd({name:"overflow-group"})]),goe=M([sn("items"),xf(["itemSelector"]),Dc("tgroupBehaviours",[wo])]),voe=M([n_({name:"items",unit:"item"})]),boe=(o,c,d,m)=>({uid:o.uid,dom:o.dom,components:c,behaviours:kc(o.tgroupBehaviours,[wo.config({mode:"flow",selector:o.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),Zk=Hu({name:"ToolbarGroup",configFields:goe(),partFields:voe(),factory:boe}),Vj=o=>Et(o,c=>P(c)),Yk=(o,c,d)=>{Lj(o,d,m=>{d.overflowGroups.set(m),c.getOpt(o).each(S=>{m0.setGroups(S,Vj(m))})})},Hj=(o,c,d,m)=>{const S=tr(m0.sketch({fetch:()=>Os.nu(w=>{w(Vj(o.overflowGroups.get()))}),layouts:{onLtr:()=>[hi,Ha],onRtl:()=>[Ha,hi],onBottomLtr:()=>[Za,Xc],onBottomRtl:()=>[Xc,Za]},getBounds:d.getOverflowBounds,lazySink:o.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:o.markers.overflowToggledClass},parts:{button:m["overflow-button"](),toolbar:m.overflow()},onToggled:(w,T)=>o[T?"onOpened":"onClosed"](w)}));return{uid:o.uid,dom:o.dom,components:c,behaviours:kc(o.splitToolbarBehaviours,[ms.config({others:{overflowGroup:()=>Zk.sketch({...m["overflow-group"](),items:[S.asSpec()]})}})]),apis:{setGroups:(w,T)=>{o.builtGroups.set(Et(T,w.getSystem().build)),Yk(w,S,o)},refresh:w=>Yk(w,S,o),toggle:w=>{S.getOpt(w).each(T=>{m0.toggle(T)})},toggleWithoutFocusing:w=>{S.getOpt(w).each(m0.toggleWithoutFocusing)},isOpen:w=>S.getOpt(w).map(m0.isOpen).getOr(!1),reposition:w=>{S.getOpt(w).each(T=>{m0.reposition(T)})},getOverflow:w=>S.getOpt(w).bind(m0.getToolbar)},domModification:{attributes:{role:"group"}}}},hV=Hu({name:"SplitFloatingToolbar",configFields:Bj(),partFields:moe(),factory:Hj,apis:{setGroups:(o,c,d)=>{o.setGroups(c,d)},refresh:(o,c)=>{o.refresh(c)},reposition:(o,c)=>{o.reposition(c)},toggle:(o,c)=>{o.toggle(c)},toggleWithoutFocusing:(o,c)=>{o.toggle(c)},isOpen:(o,c)=>o.isOpen(c),getOverflow:(o,c)=>o.getOverflow(c)}}),yoe=M([xf(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),zs("onOpened"),zs("onClosed")].concat(gI())),Fj=M([mu({factory:pr,schema:Wl(),name:"primary"}),mu({factory:pr,schema:Wl(),name:"overflow",overrides:o=>({toolbarBehaviours:Tn([md.config({dimension:{property:"height"},closedClass:o.markers.closedClass,openClass:o.markers.openClass,shrinkingClass:o.markers.shrinkingClass,growingClass:o.markers.growingClass,onShrunk:c=>{fr(c,o,"overflow-button").each(d=>{Vs.off(d)}),o.onClosed(c)},onGrown:c=>{o.onOpened(c)},onStartGrow:c=>{fr(c,o,"overflow-button").each(Vs.on)}}),wo.config({mode:"acyclic",onEscape:c=>(fr(c,o,"overflow-button").each(ns.focus),z.some(!0))})])})}),dd({name:"overflow-button",overrides:o=>({buttonBehaviours:Tn([Vs.config({toggleClass:o.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),dd({name:"overflow-group"})]),Soe=(o,c)=>fr(o,c,"overflow").map(md.hasGrown).getOr(!1),mV=(o,c,d)=>{fr(o,c,"overflow-button").each(m=>{fr(o,c,"overflow").each(S=>{if(gV(o,c),md.hasShrunk(S)){const w=c.onOpened;c.onOpened=T=>{d||wo.focusIn(S),w(T),c.onOpened=w}}else{const w=c.onClosed;c.onClosed=T=>{d||ns.focus(m),w(T),c.onClosed=w}}md.toggleGrow(S)})})},gV=(o,c)=>{fr(o,c,"overflow").each(d=>{Lj(o,c,m=>{const S=Et(m,w=>P(w));pr.setGroups(d,S)}),fr(o,c,"overflow-button").each(m=>{md.hasGrown(d)&&Vs.on(m)}),md.refresh(d)})},Coe=(o,c,d,m)=>{const S="alloy.toolbar.toggle",w=(T,V)=>{const F=Et(V,T.getSystem().build);o.builtGroups.set(F)};return{uid:o.uid,dom:o.dom,components:c,behaviours:kc(o.splitToolbarBehaviours,[ms.config({others:{overflowGroup:T=>Zk.sketch({...m["overflow-group"](),items:[zl.sketch({...m["overflow-button"](),action:V=>{Rs(T,S)}})]})}}),Qo("toolbar-toggle-events",[Ft(S,T=>{mV(T,o,!1)})])]),apis:{setGroups:(T,V)=>{w(T,V),gV(T,o)},refresh:T=>gV(T,o),toggle:T=>{mV(T,o,!1)},toggleWithoutFocusing:T=>{mV(T,o,!0)},isOpen:T=>Soe(T,o)},domModification:{attributes:{role:"group"}}}},vV=Hu({name:"SplitSlidingToolbar",configFields:yoe(),partFields:Fj(),factory:Coe,apis:{setGroups:(o,c,d)=>{o.setGroups(c,d)},refresh:(o,c)=>{o.refresh(c)},toggle:(o,c)=>{o.toggle(c)},isOpen:(o,c)=>o.isOpen(c)}}),Eoe=(o,c)=>({uid:o.uid,dom:o.dom,components:o.components,events:kk(o.action),behaviours:kc(o.tabButtonBehaviours,[ns.config({}),wo.config({mode:"execution",useSpace:!0,useEnter:!0}),zn.config({store:{mode:"memory",initialValue:o.value}})]),domModification:o.domModification}),_oe=Bf({name:"TabButton",configFields:[Ct("uid",void 0),sn("value"),cc("dom","dom",vm(()=>({attributes:{role:"tab",id:Un("aria"),"aria-selected":"false"}})),gn()),xr("action"),Ct("domModification",{}),Dc("tabButtonBehaviours",[ns,wo,zn]),sn("view")],factory:Eoe}),woe=M([sn("tabs"),sn("dom"),Ct("clickToDismiss",!1),Dc("tabbarBehaviours",[ir,wo]),xf(["tabClass","selectedClass"])]),Aoe=n_({factory:_oe,name:"tabs",unit:"tab",overrides:o=>{const c=(m,S)=>{ir.dehighlight(m,S),xo(m,WE(),{tabbar:m,button:S})},d=(m,S)=>{ir.highlight(m,S),xo(m,Sx(),{tabbar:m,button:S})};return{action:m=>{const S=m.getSystem().getByUid(o.uid).getOrDie(),w=ir.isHighlighted(S,m);(w&&o.clickToDismiss?c:w?K:d)(S,m)},domModification:{classes:[o.markers.tabClass]}}}}),Toe=M([Aoe]),Jk=(o,c,d,m)=>({uid:o.uid,dom:o.dom,components:c,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:kc(o.tabbarBehaviours,[ir.config({highlightClass:o.markers.selectedClass,itemClass:o.markers.tabClass,onHighlight:(S,w)=>{Lo(w.element,"aria-selected","true")},onDehighlight:(S,w)=>{Lo(w.element,"aria-selected","false")}}),wo.config({mode:"flow",getInitial:S=>ir.getHighlighted(S).map(w=>w.element),selector:"."+o.markers.tabClass,executeOnMove:!0})])}),Xk=Hu({name:"Tabbar",configFields:woe(),partFields:Toe(),factory:Jk}),bV=(o,c)=>({uid:o.uid,dom:o.dom,behaviours:kc(o.tabviewBehaviours,[os.config({})]),domModification:{attributes:{role:"tabpanel"}}}),$j=Bf({name:"Tabview",configFields:[Dc("tabviewBehaviours",[os])],factory:bV}),Ooe=M([Ct("selectFirst",!0),zs("onChangeTab"),zs("onDismissTab"),Ct("tabs",[]),Dc("tabSectionBehaviours",[])]),Ioe=mu({factory:Xk,schema:[sn("dom"),Cg("markers",[sn("tabClass"),sn("selectedClass")])],name:"tabbar",defaults:o=>({tabs:o.tabs})}),yV=mu({factory:$j,name:"tabview"}),SV=M([Ioe,yV]),Qk=(o,c,d,m)=>{const S=T=>{const V=zn.getValue(T);fr(T,o,"tabview").each(F=>{bt(o.tabs,Q=>Q.value===V).each(Q=>{const oe=Q.view();ic(T.element,"id").each(pe=>{Lo(F.element,"aria-labelledby",pe)}),os.set(F,oe),o.onChangeTab(F,T,oe)})})},w=(T,V)=>{fr(T,o,"tabbar").each(F=>{V(F).each(_S)})};return{uid:o.uid,dom:o.dom,components:c,behaviours:$O(o.tabSectionBehaviours),events:mi(Ut([o.selectFirst?[Qr((T,V)=>{w(T,ir.getFirst)})]:[],[Ft(Sx(),(T,V)=>{const F=V.event.button;S(F)}),Ft(WE(),(T,V)=>{const F=V.event.button;o.onDismissTab(T,F)})]])),apis:{getViewItems:T=>fr(T,o,"tabview").map(V=>os.contents(V)).getOr([]),showTab:(T,V)=>{w(T,W=>{const Q=ir.getCandidates(W);return bt(Q,pe=>zn.getValue(pe)===V).filter(pe=>!ir.isHighlighted(W,pe))})}}}},uC=Hu({name:"TabSection",configFields:Ooe(),partFields:SV(),factory:Qk,apis:{getViewItems:(o,c)=>o.getViewItems(c),showTab:(o,c,d)=>{o.showTab(c,d)}}}),eM=(o,c,d)=>{const m=zn.getValue(d);zn.setValue(c,m),jj(c)},Uj=(o,c)=>{const d=o.element,m=au(d),S=d.dom;Na(d,"type")!=="number"&&c(S,m)},jj=o=>{Uj(o,(c,d)=>c.setSelectionRange(d.length,d.length))},Roe=(o,c)=>{Uj(o,(d,m)=>d.setSelectionRange(c,m.length))},xoe=(o,c,d)=>{if(o.selectsOver){const m=zn.getValue(c),S=o.getDisplayText(m),w=zn.getValue(d);return o.getDisplayText(w).indexOf(S)===0?z.some(()=>{eM(o,c,d),Roe(c,S.length)}):z.none()}else return z.none()},CV=M("alloy.typeahead.itemexecute"),Doe=(o,c,d,m)=>{const S=(oe,pe,Ee)=>{o.previewing.set(!1);const Se=ms.getCoupled(oe,"sandbox");if(er.isOpen(Se))zt.getCurrent(Se).each(Pe=>{ir.getHighlighted(Pe).fold(()=>{Ee(Pe)},()=>{ZT(Se,Pe.element,"keydown",pe)})});else{const Pe=qe=>{zt.getCurrent(qe).each(Ee)};Pk(o,T(oe),oe,Se,m,Pe,Pl.HighlightMenuAndItem).get(K)}},w=z7(o),T=oe=>pe=>pe.map(Ee=>{const Se=lo(Ee.menus),Pe=Ue(Se,Le=>Fo(Le.items,Je=>Je.type==="item"));return zn.getState(oe).update(Et(Pe,Le=>Le.data)),Ee}),V=oe=>zt.getCurrent(oe),F="typeaheadevents",W=[ns.config({}),zn.config({onSetValue:o.onSetValue,store:{mode:"dataset",getDataKey:oe=>au(oe.element),getFallbackEntry:oe=>({value:oe,meta:{}}),setValue:(oe,pe)=>{Af(oe.element,o.model.getDisplayText(pe))},...o.initialData.map(oe=>Eg("initialValue",oe)).getOr({})}}),gB.config({stream:{mode:"throttle",delay:o.responseTime,stopEvent:!1},onStream:(oe,pe)=>{const Ee=ms.getCoupled(oe,"sandbox");if(ns.isFocused(oe)&&au(oe.element).length>=o.minChars){const Pe=V(Ee).bind(Le=>ir.getHighlighted(Le).map(zn.getValue));o.previewing.set(!0);const qe=Le=>{V(Ee).each(Je=>{Pe.fold(()=>{o.model.selectsOver&&ir.highlightFirst(Je)},nt=>{ir.highlightBy(Je,Tt=>zn.getValue(Tt).value===nt.value),ir.getHighlighted(Je).orThunk(()=>(ir.highlightFirst(Je),z.none()))})})};Pk(o,T(oe),oe,Ee,m,qe,Pl.HighlightJustMenu).get(K)}},cancelEvent:jE()}),wo.config({mode:"special",onDown:(oe,pe)=>(S(oe,pe,ir.highlightFirst),z.some(!0)),onEscape:oe=>{const pe=ms.getCoupled(oe,"sandbox");return er.isOpen(pe)?(er.close(pe),z.some(!0)):z.none()},onUp:(oe,pe)=>(S(oe,pe,ir.highlightLast),z.some(!0)),onEnter:oe=>{const pe=ms.getCoupled(oe,"sandbox"),Ee=er.isOpen(pe);if(Ee&&!o.previewing.get())return V(pe).bind(Se=>ir.getHighlighted(Se)).map(Se=>(xo(oe,CV(),{item:Se}),!0));{const Se=zn.getValue(oe);return Rs(oe,jE()),o.onExecute(pe,oe,Se),Ee&&er.close(pe),z.some(!0)}}}),Vs.config({toggleClass:o.markers.openClass,aria:{mode:"expanded"}}),ms.config({others:{sandbox:oe=>Lk(o,oe,{onOpen:()=>Vs.on(oe),onClose:()=>{o.lazyTypeaheadComp.get().each(pe=>Jr(pe.element,"aria-activedescendant")),Vs.off(oe)}})}}),Qo(F,[Qr(oe=>{o.lazyTypeaheadComp.set(z.some(oe))}),Ah(oe=>{o.lazyTypeaheadComp.set(z.none())}),Dg(oe=>{const pe=K;L7(o,T(oe),oe,m,pe,Pl.HighlightMenuAndItem).get(K)}),Ft(CV(),(oe,pe)=>{const Ee=ms.getCoupled(oe,"sandbox");eM(o.model,oe,pe.event.item),Rs(oe,jE()),o.onItemExecute(oe,Ee,pe.event.item,zn.getValue(oe)),er.close(Ee),jj(oe)})].concat(o.dismissOnBlur?[Ft(Op(),oe=>{const pe=ms.getCoupled(oe,"sandbox");ea(pe.element).isNone()&&er.close(pe)})]:[]))],Q={[Tg()]:[zn.name(),gB.name(),F],...o.eventOrder};return{uid:o.uid,dom:ZB(gr(o,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...w,...kc(o.typeaheadBehaviours,W)},eventOrder:Q}},koe=M([xr("lazySink"),sn("fetch"),Ct("minChars",5),Ct("responseTime",1e3),zs("onOpen"),Ct("getHotspot",z.some),Ct("getAnchorOverrides",M({})),Ct("layouts",z.none()),Ct("eventOrder",{}),TT("model",{},[Ct("getDisplayText",o=>o.meta!==void 0&&o.meta.text!==void 0?o.meta.text:o.value),Ct("selectsOver",!0),Ct("populateFromBrowse",!0)]),zs("onSetValue"),Ba("onExecute"),zs("onItemExecute"),Ct("inputClasses",[]),Ct("inputAttributes",{}),Ct("inputStyles",{}),Ct("matchWidth",!0),Ct("useMinWidth",!1),Ct("dismissOnBlur",!0),xf(["openClass"]),xr("initialData"),xr("listRole"),Dc("typeaheadBehaviours",[ns,zn,gB,wo,Vs,ms]),fl("lazyTypeaheadComp",()=>mn(z.none)),fl("previewing",()=>mn(!0))].concat(iw()).concat(tI())),Moe=M([dd({schema:[Tx()],name:"menu",overrides:o=>({fakeFocus:!0,onHighlightItem:(c,d,m)=>{o.previewing.get()?o.lazyTypeaheadComp.get().each(S=>{xoe(o.model,S,m).fold(()=>{o.model.selectsOver?(ir.dehighlight(d,m),o.previewing.set(!0)):o.previewing.set(!1)},(w=>{w(),o.previewing.set(!1)}))}):o.lazyTypeaheadComp.get().each(S=>{o.model.populateFromBrowse&&eM(o.model,S,m),ic(m.element,"id").each(w=>Lo(S.element,"aria-activedescendant",w))})},onExecute:(c,d)=>o.lazyTypeaheadComp.get().map(m=>(xo(m,CV(),{item:d}),!0)),onHover:(c,d)=>{o.previewing.set(!1),o.lazyTypeaheadComp.get().each(m=>{o.model.populateFromBrowse&&eM(o.model,m,d)})}})})]),Noe=Hu({name:"Typeahead",configFields:koe(),partFields:Moe(),factory:Doe});var Poe=tinymce.util.Tools.resolve("tinymce.ThemeManager"),tM=tinymce.util.Tools.resolve("tinymce.util.Delay"),vI=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),zj=tinymce.util.Tools.resolve("tinymce.EditorManager"),lw=tinymce.util.Tools.resolve("tinymce.Env"),Pp;(function(o){o.default="wrap",o.floating="floating",o.sliding="sliding",o.scrolling="scrolling"})(Pp||(Pp={}));var Lp;(function(o){o.auto="auto",o.top="top",o.bottom="bottom"})(Lp||(Lp={}));const Fr=o=>c=>c.options.get(o),bI=o=>c=>z.from(o(c)),nM=o=>{const c=lw.deviceType.isPhone(),d=lw.deviceType.isTablet()||c,m=o.options.register,S=T=>v(T)||T===!1,w=T=>v(T)||q(T);m("skin",{processor:T=>v(T)||T===!1,default:"oxide"}),m("skin_url",{processor:"string"}),m("height",{processor:w,default:Math.max(o.getElement().offsetHeight,400)}),m("width",{processor:w,default:vI.DOM.getStyle(o.getElement(),"width")}),m("min_height",{processor:"number",default:100}),m("min_width",{processor:"number"}),m("max_height",{processor:"number"}),m("max_width",{processor:"number"}),m("style_formats",{processor:"object[]"}),m("style_formats_merge",{processor:"boolean",default:!1}),m("style_formats_autohide",{processor:"boolean",default:!1}),m("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),m("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),m("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),m("font_size_input_default_unit",{processor:"string",default:"pt"}),m("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),m("content_langs",{processor:"object[]"}),m("removed_menuitems",{processor:"string",default:""}),m("menubar",{processor:T=>v(T)||k(T),default:!c}),m("menu",{processor:"object",default:{}}),m("toolbar",{processor:T=>k(T)||v(T)||A(T)?{value:T,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),En(9,T=>{m("toolbar"+(T+1),{processor:"string"})}),m("toolbar_mode",{processor:"string",default:d?"scrolling":"floating"}),m("toolbar_groups",{processor:"object",default:{}}),m("toolbar_location",{processor:"string",default:Lp.auto}),m("toolbar_persist",{processor:"boolean",default:!1}),m("toolbar_sticky",{processor:"boolean",default:o.inline}),m("toolbar_sticky_offset",{processor:"number",default:0}),m("fixed_toolbar_container",{processor:"string",default:""}),m("fixed_toolbar_container_target",{processor:"object"}),m("ui_mode",{processor:"string",default:"combined"}),m("file_picker_callback",{processor:"function"}),m("file_picker_validator_handler",{processor:"function"}),m("file_picker_types",{processor:"string"}),m("typeahead_urls",{processor:"boolean",default:!0}),m("anchor_top",{processor:S,default:"#top"}),m("anchor_bottom",{processor:S,default:"#bottom"}),m("draggable_modal",{processor:"boolean",default:!1}),m("statusbar",{processor:"boolean",default:!0}),m("elementpath",{processor:"boolean",default:!0}),m("branding",{processor:"boolean",default:!0}),m("promotion",{processor:"boolean",default:!0}),m("resize",{processor:T=>T==="both"||k(T),default:!lw.deviceType.isTouch()}),m("sidebar_show",{processor:"string"}),m("help_accessibility",{processor:"boolean",default:o.hasPlugin("help")}),m("default_font_stack",{processor:"string[]",default:[]})},fc=Fr("readonly"),oM=Fr("disabled"),EV=Fr("height"),_V=Fr("width"),wV=bI(Fr("min_width")),AV=bI(Fr("min_height")),sM=bI(Fr("max_width")),TV=bI(Fr("max_height")),Wj=bI(Fr("style_formats")),Gj=Fr("style_formats_merge"),qj=Fr("style_formats_autohide"),Kj=Fr("content_langs"),Zj=Fr("removed_menuitems"),dC=Fr("toolbar_mode"),Yj=Fr("toolbar_groups"),OV=Fr("toolbar_location"),Loe=Fr("fixed_toolbar_container"),Boe=Fr("fixed_toolbar_container_target"),Jj=Fr("toolbar_persist"),Xj=Fr("toolbar_sticky_offset"),Qj=Fr("menubar"),rM=Fr("toolbar"),ez=Fr("file_picker_callback"),tz=Fr("file_picker_validator_handler"),nz=Fr("font_size_input_default_unit"),oz=Fr("file_picker_types"),IV=Fr("typeahead_urls"),sz=Fr("anchor_top"),RV=Fr("anchor_bottom"),rz=Fr("draggable_modal"),xV=Fr("statusbar"),iz=Fr("elementpath"),iM=Fr("branding"),az=Fr("resize"),cz=Fr("paste_as_text"),lz=Fr("sidebar_show"),uz=Fr("promotion"),dz=Fr("help_accessibility"),fz=Fr("default_font_stack"),pz=Fr("skin"),DV=o=>o.options.get("skin")===!1,aM=o=>o.options.get("menubar")!==!1,hz=o=>{const c=o.options.get("skin_url");if(DV(o))return c;if(c)return o.documentBaseURI.toAbsolute(c);{const d=o.options.get("skin");return zj.baseURL+"/skins/ui/"+d}},Voe=o=>z.from(o.options.get("skin_url")),mz=o=>o.options.get("line_height_formats").split(" "),cM=o=>{const c=rM(o),d=v(c),m=A(c)&&c.length>0;return!yI(o)&&(m||d||c===!0)},lM=o=>{const c=En(9,m=>o.options.get("toolbar"+(m+1))),d=Fo(c,v);return Gi(d.length>0,d)},yI=o=>lM(o).fold(()=>{const c=rM(o);return Y(c,v)&&c.length>0},Ze),kV=o=>OV(o)===Lp.bottom,gz=o=>{var c;if(!o.inline)return z.none();const d=(c=Loe(o))!==null&&c!==void 0?c:"";if(d.length>0)return yr(ku(),d);const m=Boe(o);return B(m)?z.some(kn.fromDom(m)):z.none()},uw=o=>o.inline&&gz(o).isSome(),MV=o=>gz(o).getOrThunk(()=>ji(Ei(kn.fromDom(o.getElement())))),SI=o=>o.inline&&!aM(o)&&!cM(o)&&!yI(o),b0=o=>(o.options.get("toolbar_sticky")||o.inline)&&!uw(o)&&!SI(o),Qy=o=>!uw(o)&&o.options.get("ui_mode")==="split",CI=o=>{const c=o.options.get("menu");return es(c,d=>({...d,items:d.items}))};var Hoe=Object.freeze({__proto__:null,get ToolbarMode(){return Pp},get ToolbarLocation(){return Lp},register:nM,getSkinUrl:hz,getSkinUrlOption:Voe,isReadOnly:fc,isDisabled:oM,getSkin:pz,isSkinDisabled:DV,getHeightOption:EV,getWidthOption:_V,getMinWidthOption:wV,getMinHeightOption:AV,getMaxWidthOption:sM,getMaxHeightOption:TV,getUserStyleFormats:Wj,shouldMergeStyleFormats:Gj,shouldAutoHideStyleFormats:qj,getLineHeightFormats:mz,getContentLanguages:Kj,getRemovedMenuItems:Zj,isMenubarEnabled:aM,isMultipleToolbars:yI,isToolbarEnabled:cM,isToolbarPersist:Jj,getMultipleToolbarsOption:lM,getUiContainer:MV,useFixedContainer:uw,isSplitUiMode:Qy,getToolbarMode:dC,isDraggableModal:rz,isDistractionFree:SI,isStickyToolbar:b0,getStickyToolbarOffset:Xj,getToolbarLocation:OV,isToolbarLocationBottom:kV,getToolbarGroups:Yj,getMenus:CI,getMenubar:Qj,getToolbar:rM,getFilePickerCallback:ez,getFilePickerTypes:oz,useTypeaheadUrls:IV,getAnchorTop:sz,getAnchorBottom:RV,getFilePickerValidatorHandler:tz,getFontSizeInputDefaultUnit:nz,useStatusBar:xV,useElementPath:iz,promotionEnabled:uz,useBranding:iM,getResize:az,getPasteAsText:cz,getSidebarShow:lz,useHelpAccessibility:dz,getDefaultFontStack:fz});const Foe=["visible","hidden","clip"],vz=o=>Hn(o).length>0&&!qt(Foe,o),bz=o=>{if(Me(o)){const c=Xr(o,"overflow-x"),d=Xr(o,"overflow-y");return vz(c)||vz(d)}else return!1},$oe=o=>o.plugins.fullscreen&&o.plugins.fullscreen.isFullscreen(),uM=(o,c)=>{const d=oa(c,bz),m=d.length===0?ki(c).map(dr).map(S=>oa(S,bz)).getOr([]):d;return gt(m).map(S=>({element:S,others:m.slice(1),isFullscreen:()=>$oe(o)}))},Ph=(o,c)=>Qy(o)?uM(o,c):z.none(),e1=o=>{const c=[...Et(o.others,Sa),kl()];return o.isFullscreen()?kl():RE(Sa(o.element),c)};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:NV,setPrototypeOf:yz,isFrozen:Uoe,getPrototypeOf:joe,getOwnPropertyDescriptor:zoe}=Object;let{freeze:jf,seal:zm,create:Sz}=Object,{apply:PV,construct:LV}=typeof Reflect<"u"&&Reflect;jf||(jf=function(c){return c}),zm||(zm=function(c){return c}),PV||(PV=function(c,d,m){return c.apply(d,m)}),LV||(LV=function(c,d){return new c(...d)});const dM=Wf(Array.prototype.forEach),Woe=Wf(Array.prototype.lastIndexOf),BV=Wf(Array.prototype.pop),jv=Wf(Array.prototype.push),fC=Wf(Array.prototype.splice),fM=Wf(String.prototype.toLowerCase),pM=Wf(String.prototype.toString),VV=Wf(String.prototype.match),t1=Wf(String.prototype.replace),Goe=Wf(String.prototype.indexOf),dw=Wf(String.prototype.trim),nf=Wf(Object.prototype.hasOwnProperty),zf=Wf(RegExp.prototype.test),EI=qoe(TypeError);function Wf(o){return function(c){c instanceof RegExp&&(c.lastIndex=0);for(var d=arguments.length,m=new Array(d>1?d-1:0),S=1;S<d;S++)m[S-1]=arguments[S];return PV(o,c,m)}}function qoe(o){return function(){for(var c=arguments.length,d=new Array(c),m=0;m<c;m++)d[m]=arguments[m];return LV(o,d)}}function ei(o,c){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fM;yz&&yz(o,null);let m=c.length;for(;m--;){let S=c[m];if(typeof S=="string"){const w=d(S);w!==S&&(Uoe(c)||(c[m]=w),S=w)}o[S]=!0}return o}function Koe(o){for(let c=0;c<o.length;c++)nf(o,c)||(o[c]=null);return o}function y0(o){const c=Sz(null);for(const[d,m]of NV(o))nf(o,d)&&(Array.isArray(m)?c[d]=Koe(m):m&&typeof m=="object"&&m.constructor===Object?c[d]=y0(m):c[d]=m);return c}function n1(o,c){for(;o!==null;){const m=zoe(o,c);if(m){if(m.get)return Wf(m.get);if(typeof m.value=="function")return Wf(m.value)}o=joe(o)}function d(){return null}return d}const HV=jf(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),FV=jf(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),hM=jf(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Zoe=jf(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),$V=jf(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),UV=jf(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Yoe=jf(["#text"]),mM=jf(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),jV=jf(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Cz=jf(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),gM=jf(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ez=zm(/\{\{[\w\W]*|[\w\W]*\}\}/gm),_z=zm(/<%[\w\W]*|[\w\W]*%>/gm),Joe=zm(/\$\{[\w\W]*/gm),Xoe=zm(/^data-[\-\w.\u00B7-\uFFFF]+$/),wz=zm(/^aria-[\-\w]+$/),Az=zm(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Qoe=zm(/^(?:\w+script|data):/i),vM=zm(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Tz=zm(/^html$/i),j0e=zm(/^[a-z][.\w]*(-[.\w]+)+$/i);var bM=Object.freeze({__proto__:null,ARIA_ATTR:wz,ATTR_WHITESPACE:vM,CUSTOM_ELEMENT:j0e,DATA_ATTR:Xoe,DOCTYPE_NAME:Tz,ERB_EXPR:_z,IS_ALLOWED_URI:Az,IS_SCRIPT_OR_DATA:Qoe,MUSTACHE_EXPR:Ez,TMPLIT_EXPR:Joe});const _I={element:1,text:3,progressingInstruction:7,comment:8,document:9},zV=function(){return typeof window>"u"?null:window},ese=function(c,d){if(typeof c!="object"||typeof c.createPolicy!="function")return null;let m=null;const S="data-tt-policy-suffix";d&&d.hasAttribute(S)&&(m=d.getAttribute(S));const w="dompurify"+(m?"#"+m:"");try{return c.createPolicy(w,{createHTML(T){return T},createScriptURL(T){return T}})}catch{return console.warn("TrustedTypes policy "+w+" could not be created."),null}},Oz=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function WV(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zV();const c=ct=>WV(ct);if(c.version="3.2.6",c.removed=[],!o||!o.document||o.document.nodeType!==_I.document||!o.Element)return c.isSupported=!1,c;let{document:d}=o;const m=d,S=m.currentScript,{DocumentFragment:w,HTMLTemplateElement:T,Node:V,Element:F,NodeFilter:W,NamedNodeMap:Q=o.NamedNodeMap||o.MozNamedAttrMap,HTMLFormElement:oe,DOMParser:pe,trustedTypes:Ee}=o,Se=F.prototype,Pe=n1(Se,"cloneNode"),qe=n1(Se,"remove"),Le=n1(Se,"nextSibling"),Je=n1(Se,"childNodes"),nt=n1(Se,"parentNode");if(typeof T=="function"){const ct=d.createElement("template");ct.content&&ct.content.ownerDocument&&(d=ct.content.ownerDocument)}let Tt,xt="";const{implementation:jn,createNodeIterator:dn,createDocumentFragment:pn,getElementsByTagName:an}=d,{importNode:Ro}=m;let mo=Oz();c.isSupported=typeof NV=="function"&&typeof nt=="function"&&jn&&jn.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Ns,ERB_EXPR:Vo,TMPLIT_EXPR:as,DATA_ATTR:po,ARIA_ATTR:on,IS_SCRIPT_OR_DATA:Ln,ATTR_WHITESPACE:Uo,CUSTOM_ELEMENT:fs}=bM;let{IS_ALLOWED_URI:Co}=bM,us=null;const ar=ei({},[...HV,...FV,...hM,...$V,...Yoe]);let nr=null;const Uu=ei({},[...mM,...jV,...Cz,...gM]);let ti=Object.seal(Sz(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ml=null,Ya=null,bd=!0,Su=!0,ia=!1,Zv=!0,$h=!1,NC=!0,I0=!1,CR=!1,Yv=!1,ER=!1,tP=!1,_R=!1,PC=!0,wR=!1;const cZ="user-content-";let Z$=!0,AR=!1,$w={},Uw=null;const LC=ei({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let qde=null;const lZ=ei({},["audio","video","img","source","image","track"]);let Y$=null;const Kde=ei({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),nP="http://www.w3.org/1998/Math/MathML",oP="http://www.w3.org/2000/svg",Uh="http://www.w3.org/1999/xhtml";let jw=Uh,J$=!1,sP=null;const Zde=ei({},[nP,oP,Uh],pM);let X$=ei({},["mi","mo","mn","ms","mtext"]),t=ei({},["annotation-xml"]);const s=ei({},["title","style","font","a","script"]);let a=null;const u=["application/xhtml+xml","text/html"],p="text/html";let b=null,E=null;const I=d.createElement("form"),D=function(ke){return ke instanceof RegExp||ke instanceof Function},$=function(){let ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(E&&E===ke)){if((!ke||typeof ke!="object")&&(ke={}),ke=y0(ke),a=u.indexOf(ke.PARSER_MEDIA_TYPE)===-1?p:ke.PARSER_MEDIA_TYPE,b=a==="application/xhtml+xml"?pM:fM,us=nf(ke,"ALLOWED_TAGS")?ei({},ke.ALLOWED_TAGS,b):ar,nr=nf(ke,"ALLOWED_ATTR")?ei({},ke.ALLOWED_ATTR,b):Uu,sP=nf(ke,"ALLOWED_NAMESPACES")?ei({},ke.ALLOWED_NAMESPACES,pM):Zde,Y$=nf(ke,"ADD_URI_SAFE_ATTR")?ei(y0(Kde),ke.ADD_URI_SAFE_ATTR,b):Kde,qde=nf(ke,"ADD_DATA_URI_TAGS")?ei(y0(lZ),ke.ADD_DATA_URI_TAGS,b):lZ,Uw=nf(ke,"FORBID_CONTENTS")?ei({},ke.FORBID_CONTENTS,b):LC,ml=nf(ke,"FORBID_TAGS")?ei({},ke.FORBID_TAGS,b):y0({}),Ya=nf(ke,"FORBID_ATTR")?ei({},ke.FORBID_ATTR,b):y0({}),$w=nf(ke,"USE_PROFILES")?ke.USE_PROFILES:!1,bd=ke.ALLOW_ARIA_ATTR!==!1,Su=ke.ALLOW_DATA_ATTR!==!1,ia=ke.ALLOW_UNKNOWN_PROTOCOLS||!1,Zv=ke.ALLOW_SELF_CLOSE_IN_ATTR!==!1,$h=ke.SAFE_FOR_TEMPLATES||!1,NC=ke.SAFE_FOR_XML!==!1,I0=ke.WHOLE_DOCUMENT||!1,ER=ke.RETURN_DOM||!1,tP=ke.RETURN_DOM_FRAGMENT||!1,_R=ke.RETURN_TRUSTED_TYPE||!1,Yv=ke.FORCE_BODY||!1,PC=ke.SANITIZE_DOM!==!1,wR=ke.SANITIZE_NAMED_PROPS||!1,Z$=ke.KEEP_CONTENT!==!1,AR=ke.IN_PLACE||!1,Co=ke.ALLOWED_URI_REGEXP||Az,jw=ke.NAMESPACE||Uh,X$=ke.MATHML_TEXT_INTEGRATION_POINTS||X$,t=ke.HTML_INTEGRATION_POINTS||t,ti=ke.CUSTOM_ELEMENT_HANDLING||{},ke.CUSTOM_ELEMENT_HANDLING&&D(ke.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ti.tagNameCheck=ke.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ke.CUSTOM_ELEMENT_HANDLING&&D(ke.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ti.attributeNameCheck=ke.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ke.CUSTOM_ELEMENT_HANDLING&&typeof ke.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ti.allowCustomizedBuiltInElements=ke.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),$h&&(Su=!1),tP&&(ER=!0),$w&&(us=ei({},Yoe),nr=[],$w.html===!0&&(ei(us,HV),ei(nr,mM)),$w.svg===!0&&(ei(us,FV),ei(nr,jV),ei(nr,gM)),$w.svgFilters===!0&&(ei(us,hM),ei(nr,jV),ei(nr,gM)),$w.mathMl===!0&&(ei(us,$V),ei(nr,Cz),ei(nr,gM))),ke.ADD_TAGS&&(us===ar&&(us=y0(us)),ei(us,ke.ADD_TAGS,b)),ke.ADD_ATTR&&(nr===Uu&&(nr=y0(nr)),ei(nr,ke.ADD_ATTR,b)),ke.ADD_URI_SAFE_ATTR&&ei(Y$,ke.ADD_URI_SAFE_ATTR,b),ke.FORBID_CONTENTS&&(Uw===LC&&(Uw=y0(Uw)),ei(Uw,ke.FORBID_CONTENTS,b)),Z$&&(us["#text"]=!0),I0&&ei(us,["html","head","body"]),us.table&&(ei(us,["tbody"]),delete ml.tbody),ke.TRUSTED_TYPES_POLICY){if(typeof ke.TRUSTED_TYPES_POLICY.createHTML!="function")throw EI('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ke.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw EI('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Tt=ke.TRUSTED_TYPES_POLICY,xt=Tt.createHTML("")}else Tt===void 0&&(Tt=ese(Ee,S)),Tt!==null&&typeof xt=="string"&&(xt=Tt.createHTML(""));jf&&jf(ke),E=ke}},J=ei({},[...FV,...hM,...Zoe]),te=ei({},[...$V,...UV]),re=function(ke){let wt=nt(ke);(!wt||!wt.tagName)&&(wt={namespaceURI:jw,tagName:"template"});const vn=fM(ke.tagName),Ao=fM(wt.tagName);return sP[ke.namespaceURI]?ke.namespaceURI===oP?wt.namespaceURI===Uh?vn==="svg":wt.namespaceURI===nP?vn==="svg"&&(Ao==="annotation-xml"||X$[Ao]):!!J[vn]:ke.namespaceURI===nP?wt.namespaceURI===Uh?vn==="math":wt.namespaceURI===oP?vn==="math"&&t[Ao]:!!te[vn]:ke.namespaceURI===Uh?wt.namespaceURI===oP&&!t[Ao]||wt.namespaceURI===nP&&!X$[Ao]?!1:!te[vn]&&(s[vn]||!J[vn]):!!(a==="application/xhtml+xml"&&sP[ke.namespaceURI]):!1},fe=function(ke){jv(c.removed,{element:ke});try{nt(ke).removeChild(ke)}catch{qe(ke)}},Re=function(ke,wt){try{jv(c.removed,{attribute:wt.getAttributeNode(ke),from:wt})}catch{jv(c.removed,{attribute:null,from:wt})}if(wt.removeAttribute(ke),ke==="is")if(ER||tP)try{fe(wt)}catch{}else try{wt.setAttribute(ke,"")}catch{}},Ae=function(ke){let wt=null,vn=null;if(Yv)ke="<remove></remove>"+ke;else{const ks=VV(ke,/^[\r\n\t ]+/);vn=ks&&ks[0]}a==="application/xhtml+xml"&&jw===Uh&&(ke='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ke+"</body></html>");const Ao=Tt?Tt.createHTML(ke):ke;if(jw===Uh)try{wt=new pe().parseFromString(Ao,a)}catch{}if(!wt||!wt.documentElement){wt=jn.createDocument(jw,"template",null);try{wt.documentElement.innerHTML=J$?xt:Ao}catch{}}const ss=wt.body||wt.documentElement;return ke&&vn&&ss.insertBefore(d.createTextNode(vn),ss.childNodes[0]||null),jw===Uh?an.call(wt,I0?"html":"body")[0]:I0?wt.documentElement:ss},_e=function(ke){return dn.call(ke.ownerDocument||ke,ke,W.SHOW_ELEMENT|W.SHOW_COMMENT|W.SHOW_TEXT|W.SHOW_PROCESSING_INSTRUCTION|W.SHOW_CDATA_SECTION,null)},Qe=function(ke){return ke instanceof oe&&(typeof ke.nodeName!="string"||typeof ke.textContent!="string"||typeof ke.removeChild!="function"||!(ke.attributes instanceof Q)||typeof ke.removeAttribute!="function"||typeof ke.setAttribute!="function"||typeof ke.namespaceURI!="string"||typeof ke.insertBefore!="function"||typeof ke.hasChildNodes!="function")},et=function(ke){return typeof V=="function"&&ke instanceof V};function ut(ct,ke,wt){dM(ct,vn=>{vn.call(c,ke,wt,E)})}const _t=function(ke){let wt=null;if(ut(mo.beforeSanitizeElements,ke,null),Qe(ke))return fe(ke),!0;const vn=b(ke.nodeName);if(ut(mo.uponSanitizeElement,ke,{tagName:vn,allowedTags:us}),NC&&ke.hasChildNodes()&&!et(ke.firstElementChild)&&zf(/<[/\w!]/g,ke.innerHTML)&&zf(/<[/\w!]/g,ke.textContent)||ke.nodeType===_I.progressingInstruction||NC&&ke.nodeType===_I.comment&&zf(/<[/\w]/g,ke.data))return fe(ke),!0;if(!us[vn]||ml[vn]){if(!ml[vn]&&Mn(vn)&&(ti.tagNameCheck instanceof RegExp&&zf(ti.tagNameCheck,vn)||ti.tagNameCheck instanceof Function&&ti.tagNameCheck(vn)))return!1;if(Z$&&!Uw[vn]){const Ao=nt(ke)||ke.parentNode,ss=Je(ke)||ke.childNodes;if(ss&&Ao){const ks=ss.length;for(let Gs=ks-1;Gs>=0;--Gs){const Pi=Pe(ss[Gs],!0);Pi.__removalCount=(ke.__removalCount||0)+1,Ao.insertBefore(Pi,Le(ke))}}}return fe(ke),!0}return ke instanceof F&&!re(ke)||(vn==="noscript"||vn==="noembed"||vn==="noframes")&&zf(/<\/no(script|embed|frames)/i,ke.innerHTML)?(fe(ke),!0):($h&&ke.nodeType===_I.text&&(wt=ke.textContent,dM([Ns,Vo,as],Ao=>{wt=t1(wt,Ao," ")}),ke.textContent!==wt&&(jv(c.removed,{element:ke.cloneNode()}),ke.textContent=wt)),ut(mo.afterSanitizeElements,ke,null),!1)},Qt=function(ke,wt,vn){if(PC&&(wt==="id"||wt==="name")&&(vn in d||vn in I))return!1;if(!(Su&&!Ya[wt]&&zf(po,wt))){if(!(bd&&zf(on,wt))){if(!nr[wt]||Ya[wt]){if(!(Mn(ke)&&(ti.tagNameCheck instanceof RegExp&&zf(ti.tagNameCheck,ke)||ti.tagNameCheck instanceof Function&&ti.tagNameCheck(ke))&&(ti.attributeNameCheck instanceof RegExp&&zf(ti.attributeNameCheck,wt)||ti.attributeNameCheck instanceof Function&&ti.attributeNameCheck(wt))||wt==="is"&&ti.allowCustomizedBuiltInElements&&(ti.tagNameCheck instanceof RegExp&&zf(ti.tagNameCheck,vn)||ti.tagNameCheck instanceof Function&&ti.tagNameCheck(vn))))return!1}else if(!Y$[wt]){if(!zf(Co,t1(vn,Uo,""))){if(!((wt==="src"||wt==="xlink:href"||wt==="href")&&ke!=="script"&&Goe(vn,"data:")===0&&qde[ke])){if(!(ia&&!zf(Ln,t1(vn,Uo,"")))){if(vn)return!1}}}}}}return!0},Mn=function(ke){return ke!=="annotation-xml"&&VV(ke,fs)},bn=function(ke){ut(mo.beforeSanitizeAttributes,ke,null);const{attributes:wt}=ke;if(!wt||Qe(ke))return;const vn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:nr,forceKeepAttr:void 0};let Ao=wt.length;for(;Ao--;){const ss=wt[Ao],{name:ks,namespaceURI:Gs,value:Pi}=ss,Li=b(ks),gl=Pi;let In=ks==="value"?gl:dw(gl);if(vn.attrName=Li,vn.attrValue=In,vn.keepAttr=!0,vn.forceKeepAttr=void 0,ut(mo.uponSanitizeAttribute,ke,vn),In=vn.attrValue,wR&&(Li==="id"||Li==="name")&&(Re(ks,ke),In=cZ+In),NC&&zf(/((--!?|])>)|<\/(style|title)/i,In)){Re(ks,ke);continue}if(vn.forceKeepAttr)continue;if(!vn.keepAttr){Re(ks,ke);continue}if(!Zv&&zf(/\/>/i,In)){Re(ks,ke);continue}$h&&dM([Ns,Vo,as],or=>{In=t1(In,or," ")});const Io=b(ke.nodeName);if(!Qt(Io,Li,In)){Re(ks,ke);continue}if(Tt&&typeof Ee=="object"&&typeof Ee.getAttributeType=="function"&&!Gs)switch(Ee.getAttributeType(Io,Li)){case"TrustedHTML":{In=Tt.createHTML(In);break}case"TrustedScriptURL":{In=Tt.createScriptURL(In);break}}if(In!==gl)try{Gs?ke.setAttributeNS(Gs,ks,In):ke.setAttribute(ks,In),Qe(ke)?fe(ke):BV(c.removed)}catch{Re(ks,ke)}}ut(mo.afterSanitizeAttributes,ke,null)},Wt=function ct(ke){let wt=null;const vn=_e(ke);for(ut(mo.beforeSanitizeShadowDOM,ke,null);wt=vn.nextNode();)ut(mo.uponSanitizeShadowNode,wt,null),_t(wt),bn(wt),wt.content instanceof w&&ct(wt.content);ut(mo.afterSanitizeShadowDOM,ke,null)};return c.sanitize=function(ct){let ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},wt=null,vn=null,Ao=null,ss=null;if(J$=!ct,J$&&(ct="<!-->"),typeof ct!="string"&&!et(ct))if(typeof ct.toString=="function"){if(ct=ct.toString(),typeof ct!="string")throw EI("dirty is not a string, aborting")}else throw EI("toString is not a function");if(!c.isSupported)return ct;if(CR||$(ke),c.removed=[],typeof ct=="string"&&(AR=!1),AR){if(ct.nodeName){const Pi=b(ct.nodeName);if(!us[Pi]||ml[Pi])throw EI("root node is forbidden and cannot be sanitized in-place")}}else if(ct instanceof V)wt=Ae("<!---->"),vn=wt.ownerDocument.importNode(ct,!0),vn.nodeType===_I.element&&vn.nodeName==="BODY"||vn.nodeName==="HTML"?wt=vn:wt.appendChild(vn);else{if(!ER&&!$h&&!I0&&ct.indexOf("<")===-1)return Tt&&_R?Tt.createHTML(ct):ct;if(wt=Ae(ct),!wt)return ER?null:_R?xt:""}wt&&Yv&&fe(wt.firstChild);const ks=_e(AR?ct:wt);for(;Ao=ks.nextNode();)_t(Ao),bn(Ao),Ao.content instanceof w&&Wt(Ao.content);if(AR)return ct;if(ER){if(tP)for(ss=pn.call(wt.ownerDocument);wt.firstChild;)ss.appendChild(wt.firstChild);else ss=wt;return(nr.shadowroot||nr.shadowrootmode)&&(ss=Ro.call(m,ss,!0)),ss}let Gs=I0?wt.outerHTML:wt.innerHTML;return I0&&us["!doctype"]&&wt.ownerDocument&&wt.ownerDocument.doctype&&wt.ownerDocument.doctype.name&&zf(Tz,wt.ownerDocument.doctype.name)&&(Gs="<!DOCTYPE "+wt.ownerDocument.doctype.name+`>
`+Gs),$h&&dM([Ns,Vo,as],Pi=>{Gs=t1(Gs,Pi," ")}),Tt&&_R?Tt.createHTML(Gs):Gs},c.setConfig=function(){let ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$(ct),CR=!0},c.clearConfig=function(){E=null,CR=!1},c.isValidAttribute=function(ct,ke,wt){E||$({});const vn=b(ct),Ao=b(ke);return Qt(vn,Ao,wt)},c.addHook=function(ct,ke){typeof ke=="function"&&jv(mo[ct],ke)},c.removeHook=function(ct,ke){if(ke!==void 0){const wt=Woe(mo[ct],ke);return wt===-1?void 0:fC(mo[ct],wt,1)[0]}return BV(mo[ct])},c.removeHooks=function(ct){mo[ct]=[]},c.removeAllHooks=function(){mo=Oz()},c}var Iz=WV();const GV=o=>Iz().sanitize(o);var wa=tinymce.util.Tools.resolve("tinymce.util.I18n");const pC={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-disc":!0,"list-bull-default":!0,"list-bull-square":!0},Rz="temporary-placeholder",qV=o=>()=>Vt(o,Rz).getOr("!not found!"),yM=(o,c)=>{const d=o.toLowerCase();if(wa.isRtl()){const m=ip(d,"-rtl");return Pn(c,m)?m:d}else return d},xz=(o,c)=>Vt(c,yM(o,c)),KV=(o,c)=>{const d=c();return xz(o,d).getOrThunk(qV(d))},tse=(o,c,d)=>{const m=c();return xz(o,m).or(d).getOrThunk(qV(m))},nse=o=>wa.isRtl()?Pn(pC,o):!1,Dz=()=>Qo("add-focusable",[Qr(o=>{pm(o.element,"svg").each(c=>Lo(c,"focusable","false"))})]),kz=(o,c,d,m)=>{var S,w,T;const V=nse(c)?["tox-icon--flip"]:[],F=Vt(d,yM(c,d)).or(m).getOrThunk(qV(d));return{dom:{tag:o.tag,attributes:(S=o.attributes)!==null&&S!==void 0?S:{},classes:o.classes.concat(V),innerHtml:F},behaviours:Tn([...(w=o.behaviours)!==null&&w!==void 0?w:[],Dz()]),eventOrder:(T=o.eventOrder)!==null&&T!==void 0?T:{}}},Bp=(o,c,d,m=z.none())=>kz(c,o,d(),m),ose=(o,c,d)=>{const m=d(),S=bt(o,w=>Pn(m,yM(w,m)));return kz(c,S.getOr(Rz),m,z.none())},sse={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},wI=Bf({name:"Notification",factory:o=>{const c=Un("notification-text"),d=tr({dom:$g(`<p id=${c}>${GV(o.backstageProvider.translate(o.text))}</p>`),behaviours:Tn([os.config({})])}),m=Se=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${Se}%`}}}),S=Se=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${Se}%`}}),w=tr({dom:{tag:"div",classes:o.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[m(0)]},S(0)],behaviours:Tn([os.config({})])}),F={updateProgress:(Se,Pe)=>{Se.getSystem().isConnected()&&w.getOpt(Se).each(qe=>{os.set(qe,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[m(Pe)]},S(Pe)])})},updateText:(Se,Pe)=>{if(Se.getSystem().isConnected()){const qe=d.get(Se);os.set(qe,[gi(Pe)])}}},W=Ut([o.icon.toArray(),[o.level],z.from(sse[o.level]).toArray()]),Q=tr(zl.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":o.backstageProvider.translate("Close")}},components:[Bp("close",{tag:"span",classes:["tox-icon"]},o.iconProvider)],buttonBehaviours:Tn([qr.config({}),vi.config({...o.backstageProvider.tooltips.getConfig({tooltipText:o.backstageProvider.translate("Close")})})]),action:Se=>{o.onAction(Se)}})),oe=ose(W,{tag:"div",classes:["tox-notification__icon"]},o.iconProvider),pe={dom:{tag:"div",classes:["tox-notification__body"]},components:[d.asSpec()],behaviours:Tn([os.config({})])},Ee=[oe,pe];return{uid:o.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":c},classes:["tox-notification","tox-notification--in",`tox-notification--${o.level}`]},behaviours:Tn([qr.config({}),ns.config({}),wo.config({mode:"special",onEscape:Se=>(o.onAction(Se),z.some(!0))})]),components:Ee.concat(o.progress?[w.asSpec()]:[]).concat([Q.asSpec()]),apis:F}},configFields:[Yd("level","info",["success","error","warning","warn","info"]),sn("progress"),xr("icon"),sn("onAction"),sn("text"),sn("iconProvider"),sn("backstageProvider")],apis:{updateProgress:(o,c,d)=>{o.updateProgress(c,d)},updateText:(o,c,d)=>{o.updateText(c,d)}}});var rse=(o,c,d,m)=>{const S=c.backstage.shared,w=()=>kn.fromDom(o.queryCommandValue("ToggleView")===""?o.getContentAreaContainer():o.getContainer()),T=()=>{const oe=Sa(w());return z.some(oe)},V=oe=>{T().each(pe=>{Jt(oe,Ee=>{Ds(Ee.element,"width"),Tc(Ee.element)>pe.width&&jo(Ee.element,"width",pe.width+"px")})})};return{open:(oe,pe,Ee)=>{const Se=()=>{const nt=dn=>{os.remove(dn,qe),Le()},Tt=(dn,pn)=>{Es(dn.element).length===0?xt(dn,pn):jn(dn,pn)},xt=(dn,pn)=>{Ni.hide(dn),m.clear(),pn&&o.focus()},jn=(dn,pn)=>{pn&&wo.focusIn(dn)};m.on(dn=>{pe();const pn=Ee();nt(dn),Tt(dn,pn)})},Pe=()=>!b0(o)||!S.header.isPositionedAtTop(),qe=O(wI.sketch({text:oe.text,level:qt(["success","error","warning","warn","info"],oe.type)?oe.type:void 0,progress:oe.progressBar===!0,icon:oe.icon,onAction:Se,iconProvider:S.providers.icons,backstageProvider:S.providers}));if(m.isSet()){const nt=P(qe);m.on(Tt=>{os.append(Tt,nt),Ni.reposition(Tt),qe.hasConfigured(Mi)&&Mi.refresh(Tt),V(Tt.components())})}else{const nt=O(Ni.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:S.getSink,fireDismissalEventInstead:{},...S.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Tn([wo.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),os.config({}),...Pe()?[Mi.config({contextual:{lazyContext:()=>z.some(Sa(w())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:dn=>Ph(o,dn.element).map(an=>({bounds:e1(an),optScrollEnv:z.some({currentScrollTop:an.element.dom.scrollTop,scrollElmTop:Gc(an.element).top})})).getOrThunk(()=>({bounds:kl(),optScrollEnv:z.none()}))})]:[]])})),Tt=P(qe),xt={maxHeightFunction:Gb()},jn={...S.anchors.banner(),overrides:xt};m.set(nt),d.add(nt),Ni.showWithinBounds(nt,Tt,{anchor:jn},T)}q(oe.timeout)&&oe.timeout>0&&tM.setEditorTimeout(o,()=>{Se()},oe.timeout);const Le=()=>{m.on(nt=>{Ni.reposition(nt),nt.hasConfigured(Mi)&&Mi.refresh(nt),V(nt.components())})};return{close:Se,reposition:Le,text:nt=>{wI.updateText(qe,nt)},settings:oe,getEl:()=>qe.element.dom,progressBar:{value:nt=>{wI.updateProgress(qe,nt)}}}},close:oe=>{oe.close()},getArgs:oe=>oe.settings}};const ise={setup:(o,c)=>{const d=(S,w)=>{xo(S,lc(),{raw:w})},m=()=>o.getMenu().bind(ir.getHighlighted);c.on("keydown",S=>{const w=S.which;o.isActive()&&(o.isMenuOpen()?w===13?(m().each(_S),S.preventDefault()):w===40?(m().fold(()=>{o.getMenu().each(ir.highlightFirst)},T=>{d(T,S)}),S.preventDefault(),S.stopImmediatePropagation()):(w===37||w===38||w===39)&&m().each(T=>{d(T,S),S.preventDefault(),S.stopImmediatePropagation()}):(w===13||w===38||w===40)&&o.cancelIfNecessary())}),c.on("NodeChange",()=>{o.isActive()&&!o.isProcessingAction()&&!c.queryCommandState("mceAutoCompleterInRange")&&o.cancelIfNecessary()})}};var SM;(function(o){o[o.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",o[o.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(SM||(SM={}));var Wm=SM;const ZV="tox-menu-nav__js",CM="tox-collection__item",EM="tox-swatch",ase={normal:ZV,color:EM},YV="tox-collection__item--enabled",cse="tox-collection__group-heading",Mz="tox-collection__item-icon",lse="tox-collection__item-image",Nz="tox-collection__item-image-selector",_M="tox-collection__item-label",use="tox-collection__item-accessory",Pz="tox-collection__item-caret",dse="tox-collection__item-checkmark",hC="tox-collection__item--active",Lz="tox-collection__item-container",Bz="tox-collection__item-container--column",mC="tox-collection__item-container--row",fse="tox-collection__item-container--align-right",pse="tox-collection__item-container--align-left",hse="tox-collection__item-container--valign-top",wM="tox-collection__item-container--valign-middle",Lh="tox-collection__item-container--valign-bottom",AM=o=>Vt(ase,o).getOr(ZV),Vz=o=>o==="color"?"tox-swatches":"tox-menu",JV=o=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:Vz(o),tieredMenu:"tox-tiered-menu"}),o1=o=>{const c=JV(o);return{backgroundMenu:c.backgroundMenu,selectedMenu:c.selectedMenu,menu:c.menu,selectedItem:c.selectedItem,item:AM(o)}},mse=(o,c,d)=>{const m=JV(d);return{tag:"div",classes:Ut([[m.menu,`tox-menu-${c}-column`],o?[m.hasIcons]:[]])}},gse=[p0.parts.items({})],fw=(o,c,d)=>{const m=JV(d);return{dom:{tag:"div",classes:Ut([[m.tieredMenu]])},markers:o1(d)}},XV=Un("refetch-trigger-event"),Hz=Un("redirect-menu-item-interaction"),Fz="tox-menu__searcher",AI=o=>yr(o.element,`.${Fz}`).bind(c=>o.getSystem().getByDom(c).toOptional()),$z=AI,Uz=(o,c)=>{zn.setValue(o,c.fetchPattern),o.element.dom.selectionStart=c.selectionStart,o.element.dom.selectionEnd=c.selectionEnd},QV=o=>{const c=zn.getValue(o),d=o.element.dom.selectionStart,m=o.element.dom.selectionEnd;return{fetchPattern:c,selectionStart:d,selectionEnd:m}},jz=(o,c)=>{ic(c.element,"id").each(d=>Lo(o.element,"aria-activedescendant",d))},vse=o=>{const c=(S,w)=>(w.cut(),z.none()),d=(S,w)=>{const T={interactionEvent:w.event,eventType:w.event.raw.type};return xo(S,Hz,T),z.some(!0)},m="searcher-events";return{dom:{tag:"div",classes:[CM]},components:[jg.sketch({inputClasses:[Fz,"tox-textfield"],inputAttributes:{...o.placeholder.map(S=>({placeholder:o.i18n(S)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Tn([Qo(m,[Ft(Ag(),S=>{Rs(S,XV)}),Ft(lc(),(S,w)=>{w.event.raw.key==="Escape"&&w.stop()})]),wo.config({mode:"special",onLeft:c,onRight:c,onSpace:c,onEnter:d,onEscape:d,onUp:d,onDown:d})]),eventOrder:{keydown:[m,wo.name()]}})]}},TM="tox-collection--results__js",zz=o=>{var c;return o.dom?{...o,dom:{...o.dom,attributes:{...(c=o.dom.attributes)!==null&&c!==void 0?c:{},id:Un("aria-item-search-result-id"),"aria-selected":"false"}}}:o},Wz="Use arrow keys to navigate.",OM=(o,c)=>d=>{const m=Zn(d,c);return Et(m,S=>({dom:o,components:S}))},IM=o=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"],attributes:{"aria-label":wa.translate(Wz)}},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[p0.parts.items({preprocess:o!=="auto"?OM({tag:"div",classes:["tox-swatches__row"]},o):we})]}]}),zv=o=>({dom:{tag:"div",classes:["tox-menu","tox-image-selector-menu"]},components:[{dom:{tag:"div",classes:["tox-image-selector"]},components:[p0.parts.items({preprocess:o!=="auto"?OM({tag:"div",classes:["tox-image-selector__row"]},o):we})]}]}),Gz=o=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[p0.parts.items({preprocess:OM({tag:"div",classes:["tox-collection__group"]},o)})]}),Vp=(o,c)=>{const d=[];let m=[];return Jt(o,(S,w)=>{c(S,w)?(m.length>0&&d.push(m),m=[],(Pn(S.dom,"innerHtml")||S.components&&S.components.length>0)&&m.push(S)):m.push(S)}),m.length>0&&d.push(m),Et(d,S=>({dom:{tag:"div",classes:["tox-collection__group"]},components:S}))},eH=(o,c,d)=>p0.parts.items({preprocess:m=>{const S=Et(m,d);return o!=="auto"&&o>1?OM({tag:"div",classes:["tox-collection__group"]},o)(S):Vp(S,(w,T)=>c[T].type==="separator")}}),RM=o=>io(o,c=>c.type==="widget"),qz=(o,c,d=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(o===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{...RM(c)?{"aria-label":wa.translate(Wz)}:{}}},components:[eH(o,c,we)]}),gC=(o,c,d=!0)=>{const m=Un("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",TM].concat(o===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:m}},components:[eH(o,c,zz)]}},bse=(o,c,d)=>{const m=Un("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(o===1?["tox-collection--list"]:["tox-collection--grid"])},components:[vse({i18n:wa.translate,placeholder:d.placeholder}),{dom:{tag:"div",classes:[...o===1?["tox-collection--list"]:["tox-collection--grid"],TM],attributes:{id:m}},components:[eH(o,c,zz)]}]}},tH=(o,c=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[p0.parts.items({preprocess:d=>Vp(d,(m,S)=>o[S].type==="separator")})]}),vC=o=>io(o,c=>"icon"in c&&c.icon!==void 0),zg=o=>(console.error(Cv(o)),console.log(o),z.none()),yse=(o,c,d,m,S)=>{const w=tH(d);return{value:o,dom:w.dom,components:w.components,items:d}},S0=(o,c,d,m,S)=>{const w=()=>S.menuType!=="searchable"?qz(m,d):S.searchMode.searchMode==="search-with-field"?bse(m,d,S.searchMode):gC(m,d);if(S.menuType==="color"){const T=IM(m);return{value:o,dom:T.dom,components:T.components,items:d}}else if(S.menuType==="imageselector"&&m!=="auto"){const T=zv(m);return{value:o,dom:T.dom,components:T.components,items:d}}else if(S.menuType==="normal"&&m==="auto"){const T=qz(m,d);return{value:o,dom:T.dom,components:T.components,items:d}}else if(S.menuType==="normal"||S.menuType==="searchable"){const T=w();return{value:o,dom:T.dom,components:T.components,items:d}}else if(S.menuType==="listpreview"&&m!=="auto"){const T=Gz(m);return{value:o,dom:T.dom,components:T.components,items:d}}else return{value:o,dom:mse(c,m,S.menuType),components:gse,items:d}},Ki=qa("type"),xM=qa("name"),DM=qa("label"),Wg=qa("text"),nH=qa("title"),TI=qa("icon"),Kz=qa("url"),bC=qa("value"),OI=If("fetch"),Sse=If("getSubmenuItems"),pw=If("onAction"),Cse=If("onItemAction"),yC=Or("onSetup",()=>K),oH=qi("name"),s1=qi("text"),sH=qi("role"),Bh=qi("icon"),Gg=qi("tooltip"),Ese=qi("chevronTooltip"),hw=qi("label"),rH=qi("shortcut"),_se=vh("select"),mw=Zc("active",!1),wse=Zc("borderless",!1),Gf=Zc("enabled",!0),II=Zc("primary",!1),Zz=o=>Ct("columns",o),RI=Ct("meta",{}),C0=Or("onAction",K),r1=o=>Fi("type",o),SC=o=>cc("name","name",lu(()=>Un(`${o}-name`)),Wi),Ase=o=>cc("value","value",lu(()=>Un(`${o}-value`)),gn()),Yz=[Ki,Wg,Of("level",["info","warn","error","success"]),TI,Ct("url","")],Tse=zo(Yz),Ose=o=>[Ki,o],CC=[Ki,Wg,Gf,SC("button"),Bh,wse,dx("buttonType",["primary","secondary","toolbar"]),II,Fi("context","mode:design")],Jz=zo(CC),gw=[Ki,xM],Gm=gw.concat([hw]),Ise=gw.concat([DM,Gf,Fi("context","mode:design")]),Rse=zo(Ise),xse=xs,Xz=Gm.concat([Zz("auto"),Fi("context","mode:design")]),Dse=zo(Xz),kse=BE([bC,Wg,TI]),Mse=Gm.concat([Fi("storageKey","default"),Fi("context","mode:design")]),Nse=zo(Mse),Pse=Wi,Lse=zo(Gm),Bse=Wi,Qz=gw.concat([Fi("tag","textarea"),qa("scriptId"),qa("scriptUrl"),vh("onFocus"),fx("settings",void 0)]),Vse=gw.concat([Fi("tag","textarea"),If("init")]),Hse=Sv(o=>Hi("customeditor.old",Kd(Vse),o).orThunk(()=>Hi("customeditor.new",Kd(Qz),o))),Fse=Wi,i1=[Gf,s1,sH,rH,Ase("menuitem"),RI,Fi("context","mode:design")],$se=zo([Ki,xM].concat(i1)),Use=xs,kM=[SC("button"),Bh,Yd("align","end",["start","end"]),II,Gf,dx("buttonType",["primary","secondary"]),Fi("context","mode:design")],iH=[...kM,Wg],aH=[Of("type",["submit","cancel","custom"]),...iH],MM=[Of("type",["menu"]),s1,Gg,Bh,Nu("items",$se),...kM],jse=[...kM,Of("type",["togglebutton"]),Gg,Bh,s1,Zc("active",!1)],zse=fu("type",{submit:aH,cancel:aH,custom:aH,menu:MM,togglebutton:jse}),Wse=Gm.concat([Fi("context","mode:design")]),Gse=zo(Wse),qse=VE(),Kse=o=>[Ki,sS("columns"),o],Zse=[Ki,qa("html"),Yd("presets","presentation",["presentation","document"]),Or("onInit",K),Zc("stretched",!1)],Yse=zo(Zse),a1=Gm.concat([Zc("border",!1),Zc("sandboxed",!0),Zc("streamContent",!1),Zc("transparent",!0)]),Jse=zo(a1),Xse=Wi,eW=zo(gw.concat([qi("height")])),Qse=zo([qa("url"),rS("zoom"),rS("cachedWidth"),rS("cachedHeight")]),ere=Gm.concat([qi("inputMode"),qi("placeholder"),Zc("maximized",!1),Gf,Fi("context","mode:design")]),tre=zo(ere),nre=Wi,cH=o=>[Ki,DM,o,Yd("align","start",["start","center","end"]),qi("for")],tW=[Wg,bC],lH=[Wg,Nu("items",xb("items",()=>xI))],xI=Ib([zo(tW),zo(lH)]),vw=Gm.concat([Nu("items",xI),Gf,Fi("context","mode:design")]),ore=zo(vw),nW=Wi,sre=Gm.concat([ux("items",[Wg,bC]),vy("size",1),Gf,Fi("context","mode:design")]),bw=zo(sre),rre=Wi,NM=Gm.concat([Zc("constrain",!0),Gf,Fi("context","mode:design")]),uH=zo(NM),oW=zo([qa("width"),qa("height")]),ire=gw.concat([DM,vy("min",0),vy("max",0)]),are=zo(ire),dH=mT,cre=[Ki,Nu("header",Wi),Nu("cells",du(Wi))],lre=zo(cre),ure=Gm.concat([qi("placeholder"),Zc("maximized",!1),Gf,Fi("context","mode:design"),HE("spellcheck")]),sW=zo(ure),fH=Wi,dre=[Fi("buttonType","default"),qi("text"),qi("tooltip"),qi("icon"),pu("search",!1,Ib([xs,zo([qi("placeholder")])],o=>k(o)?o?z.some({placeholder:z.none()}):z.none():z.some(o))),If("fetch"),Or("onSetup",()=>K),Fi("context","mode:design")],rW=zo([Ki,...dre]),iW=o=>Hi("menubutton",rW,o),pH=[Of("type",["directory","leaf"]),nH,qa("id"),wp("menu",rW),qi("customStateIcon"),qi("customStateIconTooltip")],PM=zo(pH),aW=pH.concat([Nu("children",xb("children",()=>Rb("type",{directory:hH,leaf:PM})))]),hH=zo(aW),fre=Rb("type",{directory:hH,leaf:PM}),pre=[Ki,Nu("items",fre),vh("onLeafAction"),vh("onToggleExpand"),Ev("defaultExpandedIds",[],Wi),qi("defaultSelectedId")],cW=zo(pre),mH=Gm.concat([Yd("filetype","file",["image","media","file"]),Gf,qi("picker_text"),Fi("context","mode:design")]),hre=zo(mH),mre=zo([bC,RI]),gH=o=>cc("items","items",Cp(),du(Sv(c=>Hi(`Checking item of ${o}`,vH,c).fold(d=>fo.error(Cv(d)),d=>fo.value(d))))),vH=Tf(()=>Rb("type",{alertbanner:Tse,bar:zo(Ose(gH("bar"))),button:Jz,checkbox:Rse,colorinput:Nse,colorpicker:Lse,dropzone:Gse,grid:zo(Kse(gH("grid"))),iframe:Jse,input:tre,listbox:ore,selectbox:bw,sizeinput:uH,slider:are,textarea:sW,urlinput:hre,customeditor:Hse,htmlpanel:Yse,imagepreview:eW,collection:Dse,label:zo(cH(gH("label"))),table:lre,tree:cW,panel:lW})),gre=[Ki,Ct("classes",[]),Nu("items",vH)],lW=zo(gre),vre=[SC("tab"),nH,Nu("items",vH)],bH=[Ki,ux("tabs",vre)],bre=zo(bH),yH=iH,yre=zse,Sre=zo([qa("title"),Zd("body",Rb("type",{panel:lW,tabpanel:bre})),Fi("size","normal"),Ev("buttons",[],yre),Ct("initialData",{}),Or("onAction",K),Or("onChange",K),Or("onSubmit",K),Or("onClose",K),Or("onCancel",K),Or("onTabChange",K)]),SH=o=>Hi("dialog",Sre,o),Cre=zo([Of("type",["cancel","custom"]),...yH]),Ere=zo([qa("title"),qa("url"),rS("height"),rS("width"),wT("buttons",Cre),Or("onAction",K),Or("onCancel",K),Or("onClose",K),Or("onMessage",K)]),uW=o=>Hi("dialog",Ere,o),CH=o=>y(o)?[o].concat(Ue(lo(o),CH)):A(o)?Ue(o,CH):[],_re=o=>v(o.type)&&v(o.name),wre={checkbox:xse,colorinput:Pse,colorpicker:Bse,dropzone:qse,input:nre,iframe:Xse,imagepreview:Qse,selectbox:rre,sizeinput:oW,slider:dH,listbox:nW,size:oW,textarea:fH,urlinput:mre,customeditor:Fse,collection:kse,togglemenuitem:Use},Are=o=>z.from(wre[o.type]),Tre=o=>Fo(CH(o),_re),Ore=o=>{const c=Tre(o),d=Ue(c,m=>Are(m).fold(()=>[],S=>[Zd(m.name,S)]));return zo(d)},dW=o=>{var c;const d=_p(SH(o)),m=Ore(o),S=(c=o.initialData)!==null&&c!==void 0?c:{};return{internalDialog:d,dataValidator:m,initialData:S}},c1={open:(o,c)=>{const d=dW(c);return o(d.internalDialog,d.initialData,d.dataValidator)},openUrl:(o,c)=>{const d=_p(uW(c));return o(d)},redial:o=>dW(o)},EH=zo([Ki,s1]),Ire=o=>Hi("separatormenuitem",EH,o),Rre=zo([r1("autocompleteitem"),mw,Gf,RI,bC,s1,Bh]),xre=o=>Hi("Autocompleter.Separator",EH,o),Dre=o=>Hi("Autocompleter.Item",Rre,o),yw=[Gf,Gg,Bh,s1,yC,Fi("context","mode:design")],kre=zo([Ki,pw,rH].concat(yw)),LM=o=>Hi("toolbarbutton",kre,o),BM=[mw].concat(yw),fW=zo(BM.concat([Ki,pw,rH])),VM=o=>Hi("ToggleButton",fW,o),HM=[Or("predicate",Ke),Yd("scope","node",["node","editor"]),Yd("position","selection",["node","selection","line"])],pW=yw.concat([r1("contextformbutton"),Fi("align","end"),II,pw,fl("original",we)]),Mre=BM.concat([r1("contextformbutton"),Fi("align","end"),II,pw,fl("original",we)]),Nre=yw.concat([r1("contextformbutton")]),Pre=BM.concat([r1("contextformtogglebutton")]),Lre=fu("type",{contextformbutton:pW,contextformtogglebutton:Mre}),DI=[hw,Nu("commands",Lre),wp("launch",fu("type",{contextformbutton:Nre,contextformtogglebutton:Pre})),Or("onInput",K),Or("onSetup",K)],E0=[...HM,...DI,Of("type",["contextform"]),Or("initValue",M("")),qi("placeholder")],Bre=[...HM,...DI,Of("type",["contextsliderform"]),Or("initValue",M(0)),Or("min",M(0)),Or("max",M(100))],kI=[...HM,...DI,Of("type",["contextsizeinputform"]),Or("initValue",M({width:"",height:""}))],Vre=fu("type",{contextform:E0,contextsliderform:Bre,contextsizeinputform:kI}),_H=o=>Hi("ContextForm",Vre,o),Hre=yw.concat([r1("contexttoolbarbutton")]),Fre=zo([r1("contexttoolbar"),cd("launch",Hre),Zd("items",Ib([Wi,BE([qi("name"),qi("label"),Nu("items",Wi)])]))].concat(HM)),$re=o=>({name:o.name.getOrUndefined(),label:o.label.getOrUndefined(),items:o.items}),hW=o=>({...o,launch:o.launch.getOrUndefined(),items:v(o.items)?o.items:Et(o.items,$re)}),Ure=o=>Hi("ContextToolbar",Fre,o),wH=[Ki,qa("src"),qi("alt"),Ev("classes",[],Wi)],AH=zo(wH),TH=[Ki,Wg,oH,Ev("classes",["tox-collection__item-label"],Wi)],jre=zo(TH),qf=Tf(()=>Rb("type",{cardimage:AH,cardtext:jre,cardcontainer:zre})),zre=zo([Ki,Fi("direction","horizontal"),Fi("align","left"),Fi("valign","middle"),Nu("items",qf)]),Wre=zo([Ki,hw,Nu("items",qf),yC,C0].concat(i1)),mW=o=>Hi("cardmenuitem",Wre,o),gW=zo([Ki,mw,Bh,hw].concat(i1)),Gre=o=>Hi("choicemenuitem",gW,o),OH=[Ki,qa("fancytype"),C0],qre=[Ct("initData",{})].concat(OH),Kre=[vh("select"),TT("initData",{},[Zc("allowCustomColors",!0),Fi("storageKey","default"),wT("colors",gn())])].concat(OH),Zre=[vh("select"),Cg("initData",[sS("columns"),Ev("items",[],gn())])].concat(OH),Yre=fu("fancytype",{inserttable:qre,colorswatch:Kre,imageselect:Zre}),Jre=o=>Hi("fancymenuitem",Yre,o),vW=zo([Ki,mw,Kz,hw,Gg].concat(i1)),Xre=zo([Ki,mw,TI,DM,Gg,bC].concat(i1)),Qre=o=>Hi("imagemenuitem",vW,o),eie=o=>Hi("resetimageitem",Xre,o),bW=zo([Ki,yC,C0,Bh].concat(i1)),IH=o=>Hi("menuitem",bW,o),RH=zo([Ki,Sse,yC,Bh].concat(i1)),tie=o=>Hi("nestedmenuitem",RH,o),xH=zo([Ki,Bh,mw,yC,pw].concat(i1)),Sw=o=>Hi("togglemenuitem",xH,o),yW=zo([Bh,Gg,Or("onShow",K),Or("onHide",K),yC]),SW=o=>Hi("sidebar",yW,o),CW=zo([Ki,Zd("items",Ib([BE([xM,Nu("items",Wi)]),Wi]))].concat(yw)),nie=o=>Hi("GroupToolbarButton",CW,o),oie=zo([Ki,Gg,Ese,Bh,s1,_se,OI,yC,Yd("presets","normal",["normal","color","listpreview"]),Zz(1),pw,Cse,Fi("context","mode:design")]),FM=o=>Hi("SplitButton",oie,o),EW=[s1,Bh,qi("tooltip"),Yd("buttonType","secondary",["primary","secondary"]),Zc("borderless",!1),If("onAction"),Fi("context","mode:design")],sie=[...EW,Wg,Of("type",["button"])],_W=[...EW,Zc("active",!1),Of("type",["togglebutton"])],DH={button:sie,togglebutton:_W},kH=[Of("type",["group"]),Ev("buttons",[],fu("type",DH))],wW=fu("type",{...DH,group:kH}),gd=zo([Ev("buttons",[],wW),If("onShow"),If("onHide")]),AW=o=>Hi("view",gd,o),MH=(o,c,d)=>{const m=Ga(o.element,"."+d);if(m.length>0){const S=Kt(m,w=>{const T=w.dom.getBoundingClientRect().top,V=m[0].dom.getBoundingClientRect().top;return Math.abs(T-V)>c}).getOr(m.length);return z.some({numColumns:S,numRows:Math.ceil(m.length/S)})}else return z.none()},TW=(o,c)=>Tn([Qo(o,c)]),MI={namedEvents:TW,unnamedEvents:o=>TW(Un("unnamed-events"),o)},Hp={item:o=>So.config({disabled:o,disableClass:"tox-collection__item--state-disabled"}),button:o=>So.config({disabled:o}),splitButton:o=>So.config({disabled:o,disableClass:"tox-tbtn--disabled"}),toolbarButton:o=>So.config({disabled:o,disableClass:"tox-tbtn--disabled",useNative:!1})},Cw=(o,c)=>{const d=o.getApi(c);return m=>{m(d)}},Fp=(o,c)=>Qr(d=>{H(o.onBeforeSetup)&&o.onBeforeSetup(d),Cw(o,d)(S=>{const w=o.onSetup(S);H(w)&&c.set(w)})}),w0=(o,c)=>Ah(d=>Cw(o,d)(c.get())),NH=(o,c,d)=>Ah(m=>(d.set(zn.getValue(m)),Cw(o,m)(c.get()))),OW="silver.uistate",NI="setDisabled",aie="setEnabled",IW="init",cie=["switchmode",IW],Ew=(o,c)=>{const d=o.mainUi.outerContainer,m=[o.mainUi.mothership,...o.uiMotherships];c===NI&&Jt(m,S=>{S.broadcastOn([Mg()],{target:d.element})}),Jt(m,S=>{S.broadcastOn([OW],c)})},RW=(o,c)=>{o.on("init SwitchMode",d=>{Ew(c,d.type)}),o.on("DisabledStateChange",d=>{if(!d.isDefaultPrevented()){const m=d.state?NI:IW;Ew(c,m),d.state||o.nodeChanged()}}),o.on("NodeChange",d=>{const m=o.ui.isEnabled()?d.type:NI;Ew(c,m)}),fc(o)&&o.mode.set("readonly")},bi=o=>Vf.config({channels:{[OW]:{onReceive:(c,d)=>{if(d===NI||d===aie){So.set(c,d===NI);return}const{contextType:m,shouldDisable:S}=o();m==="mode"&&!qt(cie,d)||So.set(c,S)}}}}),$M=(o,c)=>Dg((d,m)=>{Cw(o,d)(o.onAction),!o.triggersSubmenu&&c===Wm.CLOSE_ON_EXECUTE&&(d.getSystem().isConnected()&&Rs(d,UE()),m.stop())}),lie={[ld()]:["disabling","alloy.base.behaviour","toggling","item-events"]},_w=ou,l1=(o,c,d,m)=>{const S=mn(K);return{type:"item",dom:c.dom,components:_w(c.optComponents),data:o.data,eventOrder:lie,hasSubmenu:o.triggersSubmenu,itemBehaviours:Tn([Qo("item-events",[$M(o,d),Fp(o,S),w0(o,S)]),Hp.item(()=>!o.enabled||m.checkUiComponentContext(o.context).shouldDisable),bi(()=>m.checkUiComponentContext(o.context)),os.config({})].concat(o.itemBehaviours))}},u1=o=>({value:o.value,meta:{text:o.text.getOr(""),...o.meta}}),PH=(o,c)=>{var d,m;const S=kn.fromTag("div");Rr(S,"tox-image-selector-loading-spinner");const w=V=>{Rr(V,"tox-image-selector-loading-spinner-wrapper"),Wa(V,S)},T=V=>{Ii(V,"tox-image-selector-loading-spinner-wrapper"),od(S)};return{dom:{tag:o.tag,attributes:(d=o.attributes)!==null&&d!==void 0?d:{},classes:o.classes},components:[{dom:{tag:"div",classes:["tox-image-selector-image-wrapper"]},components:[{dom:{tag:"img",attributes:{src:c},classes:["tox-image-selector-image-img"]}}]},...o.checkMark.toArray()],behaviours:Tn([...(m=o.behaviours)!==null&&m!==void 0?m:[],Qo("render-image-events",[Qr(V=>{w(V.element),yr(V.element,"img").each(F=>{sd(F).catch(W=>{console.error(W)}).finally(()=>{T(V.element)})})})])])}},UM=(o,c)=>PH(c,o),EC=o=>{const c=lw.os.isMacOS()||lw.os.isiOS(),S=c?{alt:"",ctrl:"",shift:"",meta:"",access:""}:{meta:"Ctrl",access:"Shift+Alt"},w=o.split("+"),T=Et(w,V=>{const F=V.toLowerCase().trim();return Pn(S,F)?S[F]:V});return c?T.join(""):T.join("+")},_C=(o,c,d=[Mz])=>Bp(o,{tag:"div",classes:d},c),LH=o=>({dom:{tag:"div",classes:[_M]},components:[gi(wa.translate(o))]}),BH=(o,c)=>({dom:{tag:"div",classes:c,innerHtml:o}}),VH=(o,c)=>({dom:{tag:"div",classes:[_M]},components:[{dom:{tag:o.tag,styles:o.styles},components:[gi(wa.translate(c))]}]}),HH=o=>({dom:{tag:"div",classes:[use]},components:[gi(EC(o))]}),FH=o=>_C("checkmark",o,[dse]),uie=o=>_C("chevron-right",o,[Pz]),xW=o=>_C("chevron-down",o,[Pz]),DW=(o,c)=>{const d=o.direction==="vertical"?Bz:mC,m=o.align==="left"?pse:fse;return{dom:{tag:"div",classes:[Lz,d,m,(()=>{switch(o.valign){case"top":return hse;case"middle":return wM;case"bottom":return Lh}})()]},components:c}},die=(o,c,d)=>({dom:{tag:"img",classes:c,attributes:{src:o,alt:d.getOr("")}}}),kW=(o,c,d)=>{const m="custom",S="remove",w=o.value,T=o.iconContent.map(W=>tse(W,c.icons,d)),V=o.ariaLabel.map(W=>({"aria-label":c.translate(W),"data-mce-name":W})).getOr({});return{dom:(()=>{const W=EM,Q=T.getOr(""),oe={tag:"div",attributes:V,classes:[W]};return w===m?{...oe,tag:"button",classes:[...oe.classes,"tox-swatches__picker-btn"],innerHtml:Q}:w===S?{...oe,classes:[...oe.classes,"tox-swatch--remove"],innerHtml:Q}:B(w)?{...oe,attributes:{...oe.attributes,"data-mce-color":w},styles:{"background-color":w},innerHtml:Q}:oe})(),optComponents:[]}},jM=(o,c)=>{const d=o.map(m=>({attributes:{id:Un("menu-item"),"aria-label":wa.translate(m)}})).getOr({});return{tag:"div",classes:[ZV,CM].concat(c),...d}},MW=o=>({dom:{tag:"label"},components:[gi(o)]}),NW=(o,c,d,m)=>{const S={tag:"div",classes:[Mz]},w=pe=>Bp(pe,S,c.icons,m),T=()=>z.some({dom:S}),V=d?o.iconContent.map(w).orThunk(T):z.none(),F=o.checkMark,W=z.from(o.meta).fold(()=>LH,pe=>Pn(pe,"style")?De(VH,pe.style):LH),Q=o.htmlContent.fold(()=>o.textContent.map(W),pe=>z.some(BH(pe,[_M])));return{dom:jM(o.ariaLabel,[]),optComponents:[V,Q,o.shortcutContent.map(HH),F,o.caret,o.labelContent.map(MW)]}},fie=o=>({dom:jM(o.ariaLabel,[Nz]),optComponents:[z.some(UM(o.iconContent.getOrDie(),{tag:"div",classes:[lse],checkMark:o.checkMark})),o.labelContent.map(MW)]}),wC=(o,c,d,m=z.none())=>o.presets==="color"?kW(o,c,m):o.presets==="img"?fie(o):NW(o,c,d,m),d1=(o,c,d)=>Vt(o,"tooltipWorker").map(m=>[vi.config({lazySink:c.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:S=>({type:"submenu",item:S,overrides:{maxHeightFunction:Gb}}),mode:"follow-highlight",onShow:(S,w)=>{m(T=>{vi.setComponents(S,[XD({element:kn.fromDom(T)})])})}})]).getOrThunk(()=>d.map(m=>[vi.config({...c.providers.tooltips.getConfig({tooltipText:m}),mode:"follow-highlight"})]).getOr([])),pie=o=>vI.DOM.encode(o),$H=(o,c)=>{const d=wa.translate(o),m=pie(d);if(c.length>0){const S=new RegExp(sm(c),"gi");return m.replace(S,w=>`<span class="tox-autocompleter-highlight">${w}</span>`)}else return m},hie=(o,c,d,m,S,w,T,V=!0)=>{const F=wC({presets:m,textContent:z.none(),htmlContent:d?o.text.map(Q=>$H(Q,c)):z.none(),ariaLabel:o.text,labelContent:z.none(),iconContent:o.icon,shortcutContent:z.none(),checkMark:z.none(),caret:z.none(),value:o.value},T.providers,V,o.icon),W=o.text.filter(Q=>!d&&Q!=="");return l1({context:"mode:design",data:u1(o),enabled:o.enabled,getApi:M({}),onAction:Q=>S(o.value,o.meta),onSetup:M(K),triggersSubmenu:!1,itemBehaviours:d1(o,T,W)},F,w,T.providers)},PW=(o,c)=>Et(o,d=>{switch(d.type){case"cardcontainer":return DW(d,PW(d.items,c));case"cardimage":return die(d.src,d.classes,d.alt);case"cardtext":const S=d.name.exists(w=>qt(c.cardText.highlightOn,w))?z.from(c.cardText.matchText).getOr(""):"";return BH($H(d.text,S),d.classes)}}),mie=(o,c,d,m)=>{const S=T=>({isEnabled:()=>!So.isDisabled(T),setEnabled:V=>{So.set(T,!V),Jt(Ga(T.element,"*"),F=>{T.getSystem().getByDom(F).each(W=>{W.hasConfigured(So)&&So.set(W,!V)})})}}),w={dom:jM(o.label,[]),optComponents:[z.some({dom:{tag:"div",classes:[Lz,mC]},components:PW(o.items,m)})]};return l1({context:"mode:design",data:u1({text:z.none(),...o}),enabled:o.enabled,getApi:S,onAction:o.onAction,onSetup:o.onSetup,triggersSubmenu:!1,itemBehaviours:z.from(m.itemBehaviours).getOr([])},w,c,d.providers)},LW=(o,c,d,m,S,w,T,V=!0)=>{const F=oe=>({setActive:pe=>{Vs.set(oe,pe)},isActive:()=>Vs.isOn(oe),isEnabled:()=>!So.isDisabled(oe),setEnabled:pe=>So.set(oe,!pe)}),W=wC({presets:d,textContent:c?o.text:z.none(),htmlContent:z.none(),labelContent:o.label,ariaLabel:o.text,iconContent:o.icon,shortcutContent:c?o.shortcut:z.none(),checkMark:c?z.some(FH(T.icons)):z.none(),caret:z.none(),value:o.value},T,V),Q=o.text.filter(M(!c)).map(oe=>vi.config(T.tooltips.getConfig({tooltipText:T.translate(oe)})));return gr(l1({context:o.context,data:u1(o),enabled:o.enabled,getApi:F,onAction:oe=>m(o.value),onSetup:oe=>(oe.setActive(S),K),triggersSubmenu:!1,itemBehaviours:[...Q.toArray()]},W,w,T),{toggling:{toggleClass:YV,toggleOnExecute:!1,selected:o.active,exclusive:!0}})},UH=o=>({value:qg(o)}),BW=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,jH=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,zM=o=>BW.test(o)||jH.test(o),qg=o=>ih(o,"#").toUpperCase(),zH=o=>zM(o)?z.some({value:qg(o)}):z.none(),VW=o=>({value:o.value.replace(BW,(d,m,S,w)=>m+m+S+S+w+w)}),HW=o=>{const c=VW(o),d=jH.exec(c.value);return d===null?["FFFFFF","FF","FF","FF"]:d},PI=o=>{const c=o.toString(16);return(c.length===1?"0"+c:c).toUpperCase()},ww=o=>{const c=PI(o.red)+PI(o.green)+PI(o.blue);return UH(c)},f1=(o,c,d)=>({hue:o,saturation:c,value:d}),WM=o=>{let c=0,d=0,m=0;const S=o.red/255,w=o.green/255,T=o.blue/255,V=Math.min(S,Math.min(w,T)),F=Math.max(S,Math.max(w,T));if(V===F)return m=V,f1(0,0,m*100);const W=S===V?w-T:T===V?S-w:T-S;return c=S===V?3:T===V?1:5,c=60*(c-W/(F-V)),d=(F-V)/F,m=F,f1(Math.round(c),Math.round(d*100),Math.round(m*100))},WH=Math.min,FW=Math.max,GM=Math.round,gie=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,vie=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,AC=(o,c,d,m)=>({red:o,green:c,blue:d,alpha:m}),qM=o=>{const c=parseInt(o,10);return c.toString()===o&&c>=0&&c<=255},GH=o=>{let c,d,m;const S=(o.hue||0)%360;let w=o.saturation/100,T=o.value/100;if(w=FW(0,WH(w,1)),T=FW(0,WH(T,1)),w===0)return c=d=m=GM(255*T),AC(c,d,m,1);const V=S/60,F=T*w,W=F*(1-Math.abs(V%2-1)),Q=T-F;switch(Math.floor(V)){case 0:c=F,d=W,m=0;break;case 1:c=W,d=F,m=0;break;case 2:c=0,d=F,m=W;break;case 3:c=0,d=W,m=F;break;case 4:c=W,d=0,m=F;break;case 5:c=F,d=0,m=W;break;default:c=d=m=0}return c=GM(255*(c+Q)),d=GM(255*(d+Q)),m=GM(255*(m+Q)),AC(c,d,m,1)},LI=o=>{const c=HW(o),d=parseInt(c[1],16),m=parseInt(c[2],16),S=parseInt(c[3],16);return AC(d,m,S,1)},$W=(o,c,d,m)=>{const S=parseInt(o,10),w=parseInt(c,10),T=parseInt(d,10),V=parseFloat(m);return AC(S,w,T,V)},qH=o=>{const c=gie.exec(o);if(c!==null)return z.some($W(c[1],c[2],c[3],"1"));const d=vie.exec(o);return d!==null?z.some($W(d[1],d[2],d[3],d[4])):z.none()},BI=o=>`rgba(${o.red},${o.green},${o.blue},${o.alpha})`,UW=AC(255,0,0,1),bie=o=>WM(LI(o)),KH=o=>ww(GH(o)),jW=o=>zH(o).orThunk(()=>qH(o).map(ww)).getOrThunk(()=>{const c=document.createElement("canvas");c.height=1,c.width=1;const d=c.getContext("2d");d.clearRect(0,0,c.width,c.height),d.fillStyle="#FFFFFF",d.fillStyle=o,d.fillRect(0,0,1,1);const m=d.getImageData(0,0,1,1).data,S=m[0],w=m[1],T=m[2],V=m[3];return ww(AC(S,w,T,V))}),yie=o=>{o.dispatch("SkinLoaded")},Sie=(o,c)=>{o.dispatch("SkinLoadError",c)},ZH=o=>{o.dispatch("ResizeEditor")},YH=(o,c)=>{o.dispatch("ResizeContent",c)},zW=(o,c)=>{o.dispatch("ScrollContent",c)},WW=(o,c)=>{o.dispatch("TextColorChange",c)},Cie=(o,c)=>{o.dispatch("AfterProgressState",{state:c})},Eie=(o,c)=>o.dispatch("ResolveName",{name:c.nodeName.toLowerCase(),target:c}),GW=(o,c)=>{o.dispatch("ToggleToolbarDrawer",{state:c})},JH=(o,c)=>{o.dispatch("StylesTextUpdate",c)},_ie=(o,c)=>{o.dispatch("AlignTextUpdate",c)},wie=(o,c)=>{o.dispatch("FontSizeTextUpdate",c)},Aie=(o,c)=>{o.dispatch("FontSizeInputTextUpdate",c)},Tie=(o,c)=>{o.dispatch("BlocksTextUpdate",c)},qW=(o,c)=>{o.dispatch("FontFamilyTextUpdate",c)},KW=o=>{o.dispatch("ToggleSidebar")},ZW=o=>{o.dispatch("ToggleView")},YW=o=>{o.dispatch("ContextToolbarClose")},Oie=o=>{o.dispatch("ContextFormSlideBack")},KM=(o,c)=>()=>{o(),c()},$u=(o,c=Ze)=>TC(o,"NodeChange",d=>{d.setEnabled(o.selection.isEditable()&&c())}),Iie=(o,c)=>d=>{const m=ii(),S=()=>{d.setActive(o.formatter.match(c));const w=o.formatter.formatChanged(c,d.setActive);m.set(w)};return o.initialized?S():o.once("init",S),()=>{o.off("init",S),m.clear()}},ZM=(o,c)=>d=>{const m=$u(o)(d),S=Iie(o,c)(d);return()=>{m(),S()}},TC=(o,c,d)=>m=>{const S=()=>d(m),w=()=>{d(m),o.on(c,S)};return o.initialized?w():o.once("init",w),()=>{o.off("init",w),o.off(c,S)}},JW=o=>c=>()=>{o.undoManager.transact(()=>{o.focus(),o.execCommand("mceToggleFormat",!1,c.format)})},Kf=(o,c)=>()=>o.execCommand(c);var A0=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const XW={},Rie=(o,c=10)=>{const d=A0.getItem(o),m=v(d)?JSON.parse(d):[],w=(W=>c-W.length<0?W.slice(0,c):W)(m),T=W=>{$e(w,W).each(V),w.unshift(W),w.length>c&&w.pop(),A0.setItem(o,JSON.stringify(w))},V=W=>{w.splice(W,1)};return{add:T,state:()=>w.slice(0)}},QW=o=>Vt(XW,o).getOrThunk(()=>{const c=`tinymce-custom-colors-${o}`,d=A0.getItem(c);if(L(d)){const S=A0.getItem("tinymce-custom-colors");A0.setItem(c,B(S)?S:"[]")}const m=Rie(c,10);return XW[o]=m,m}),VI=o=>Et(QW(o).state(),c=>({type:"choiceitem",text:c,icon:"checkmark",value:c})),YM=(o,c)=>{QW(o).add(c)},XH="forecolor",QH="hilitecolor",eF=5,xie=o=>JM(o.map((c,d)=>d%2===0?"#"+jW(c).value:c)),JM=o=>{const c=[];for(let d=0;d<o.length;d+=2)c.push({text:o[d+1],value:o[d],icon:"checkmark",type:"choiceitem"});return c},qm=o=>c=>c.options.get(o),tF="#000000",Die=o=>{const c=o.options.register,d=w=>Y(w,v)?{value:xie(w),valid:!0}:{valid:!1,message:"Must be an array of strings."},m=w=>Y(w,v)?{value:JM(w),valid:!0}:{valid:!1,message:"Must be an array of strings."},S=w=>q(w)&&w>0?{value:w,valid:!0}:{valid:!1,message:"Must be a positive number."};c("color_map",{processor:d,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),c("color_map_raw",{processor:m}),c("color_map_background",{processor:d}),c("color_map_foreground",{processor:d}),c("color_cols",{processor:S,default:nF(o)}),c("color_cols_foreground",{processor:S,default:oF(o,XH)}),c("color_cols_background",{processor:S,default:oF(o,QH)}),c("custom_colors",{processor:"boolean",default:!0}),c("color_default_foreground",{processor:"string",default:tF}),c("color_default_background",{processor:"string",default:tF})},HI=(o,c)=>c===XH&&o.options.isSet("color_map_foreground")?qm("color_map_foreground")(o):c===QH&&o.options.isSet("color_map_background")?qm("color_map_background")(o):o.options.isSet("color_map_raw")?qm("color_map_raw")(o):qm("color_map")(o),nF=(o,c="default")=>Math.max(eF,Math.ceil(Math.sqrt(HI(o,c).length))),oF=(o,c)=>{const d=qm("color_cols")(o),m=nF(o,c);return d===nF(o)?m:d},e9=(o,c="default")=>Math.round(c===XH?qm("color_cols_foreground")(o):c===QH?qm("color_cols_background")(o):qm("color_cols")(o)),sF=qm("custom_colors"),t9=qm("color_default_foreground"),kie=qm("color_default_background"),n9="rgba(0, 0, 0, 0)",o9=o=>qH(o).exists(c=>c.alpha!==0),Mie=o=>Gd(o,c=>{if(Ec(c)){const d=Xr(c,"background-color");return Gi(o9(d),d)}else return z.none()}).getOr(n9),XM=(o,c)=>{const d=kn.fromDom(o.selection.getStart()),m=c==="hilitecolor"?Mie(d):Xr(d,"color");return qH(m).map(S=>"#"+ww(S).value)},s9=(o,c,d)=>{o.undoManager.transact(()=>{o.focus(),o.formatter.apply(c,{value:d}),o.nodeChanged()})},rF=(o,c)=>{o.undoManager.transact(()=>{o.focus(),o.formatter.remove(c,{value:null},void 0,!0),o.nodeChanged()})},Nie=o=>{o.addCommand("mceApplyTextcolor",(c,d)=>{s9(o,c,d)}),o.addCommand("mceRemoveTextcolor",c=>{rF(o,c)})},r9=o=>{const c="choiceitem",d={type:c,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return o?[d,{type:c,text:"Custom color",icon:"color-picker",value:"custom"}]:[d]},QM=(o,c,d,m)=>{d==="custom"?tN(o)(w=>{w.each(T=>{YM(c,T),o.execCommand("mceApplyTextcolor",c,T),m(T)})},XM(o,c).getOr(tF)):d==="remove"?(m(""),o.execCommand("mceRemoveTextcolor",c)):(m(d),o.execCommand("mceApplyTextcolor",c,d))},iF=(o,c,d)=>o.concat(VI(c).concat(r9(d))),aF=(o,c,d)=>m=>{m(iF(o,c,d))},cF=(o,c,d)=>{const m=c==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";o.setIconFill(m,d)},i9=(o,c)=>{o.setTooltip(c)},eN=(o,c)=>d=>{const m=XM(o,c);return zc(m,d.toUpperCase())},lF=(o,c,d)=>{if(ka(d))return c==="forecolor"?"Text color":"Background color";const m=c==="forecolor"?"Text color {0}":"Background color {0}",S=iF(HI(o,c),c,!1),w=bt(S,T=>T.value===d).getOr({text:""}).text;return o.translate([m,o.translate(w)])},a9=(o,c,d,m)=>{o.ui.registry.addSplitButton(c,{tooltip:lF(o,d,m.get()),chevronTooltip:c==="forecolor"?"Text color menu":"Background color menu",presets:"color",icon:c==="forecolor"?"text-color":"highlight-bg-color",select:eN(o,d),columns:e9(o,d),fetch:aF(HI(o,d),d,sF(o)),onAction:S=>{QM(o,d,m.get(),K)},onItemAction:(S,w)=>{QM(o,d,w,T=>{m.set(T),WW(o,{name:c,color:T})})},onSetup:S=>{cF(S,c,m.get());const w=T=>{T.name===c&&(cF(S,T.name,T.color),i9(S,lF(o,d,T.color)))};return o.on("TextColorChange",w),KM($u(o)(S),()=>{o.off("TextColorChange",w)})}})},c9=(o,c,d,m,S)=>{o.ui.registry.addNestedMenuItem(c,{text:m,icon:c==="forecolor"?"text-color":"highlight-bg-color",onSetup:w=>(i9(w,lF(o,d,S.get())),cF(w,c,S.get()),$u(o)(w)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:eN(o,d),initData:{storageKey:d},onAction:w=>{QM(o,d,w.value,T=>{S.set(T),WW(o,{name:c,color:T})})}}]})},tN=o=>(c,d)=>{let m=!1;const S=V=>{const W=V.getData().colorpicker;m?(c(z.from(W)),V.close()):o.windowManager.alert(o.translate(["Invalid hex color code: {0}",W]))},w=(V,F)=>{F.name==="hex-valid"&&(m=F.value)},T={colorpicker:d};o.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:T,onAction:w,onSubmit:S,onClose:K,onCancel:()=>{c(z.none())}})},Pie=o=>{Nie(o);const c=t9(o),d=kie(o),m=mn(c),S=mn(d);a9(o,"forecolor","forecolor",m),a9(o,"backcolor","hilitecolor",S),c9(o,"forecolor","forecolor","Text color",m),c9(o,"backcolor","hilitecolor","Background color",S)},l9=(o,c,d,m,S)=>{const w=F=>({setActive:W=>{Vs.set(F,W)},isActive:()=>Vs.isOn(F),isEnabled:()=>!So.isDisabled(F),setEnabled:W=>So.set(F,!W)}),T=wC({presets:"img",textContent:z.none(),htmlContent:z.none(),ariaLabel:o.tooltip,iconContent:z.some(o.url),labelContent:o.label,shortcutContent:z.none(),checkMark:z.some(FH(S.icons)),caret:z.none(),value:o.value},S,!0),V=o.tooltip.map(F=>vi.config(S.tooltips.getConfig({tooltipText:S.translate(F)})));return gr(l1({context:o.context,data:u1(o),enabled:o.enabled,getApi:w,onAction:F=>{c(o.value),F.setActive(!0)},onSetup:F=>(F.setActive(d),K),triggersSubmenu:!1,itemBehaviours:[...V.toArray()]},T,m,S),{toggling:{toggleClass:YV,toggleOnExecute:!1,selected:o.active,exclusive:!0}})},nN=(o,c,d,m,S,w,T,V)=>{const F=vC(c),Q=u9(c,d,m,S!=="color"?"normal":"color",w,T,V);return S0(o,F,Q,m,{menuType:S})},u9=(o,c,d,m,S,w,T)=>ou(Et(o,V=>V.type==="choiceitem"?Gre(V).fold(zg,F=>z.some(LW(F,d===1,m,c,w(F.value),S,T,vC(o)))):V.type==="imageitem"?Qre(V).fold(zg,F=>z.some(l9(F,c,w(F.value),S,T))):V.type==="resetimage"?eie(V).fold(zg,F=>z.some(LW({...F,text:F.tooltip,icon:z.some(F.icon),label:z.some(F.label)},d===1,m,c,w(F.value),S,T,vC(o)))):z.none())),FI=(o,c)=>{const d=o1(c);return o===1?{mode:"menu",moveOnTab:!0}:o==="auto"?{mode:"grid",selector:"."+d.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+{color:"tox-swatches__row",imageselector:"tox-image-selector__row",listpreview:"tox-collection__group",normal:"tox-collection__group"}[c],previousSelector:S=>c==="color"?yr(S.element,"[aria-checked=true]"):z.none()}},Lie=(o,c)=>o===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:o==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:c==="color"?".tox-swatches__row":".tox-collection__group",cell:c==="color"?`.${EM}`:`.${CM}`}},Bie=(o,c)=>{const d=Vie(o,c),m=c.colorinput.getColorCols(o.initData.storageKey),S="color",T={...nN(Un("menu-value"),d,V=>{o.onAction({value:V})},m,S,Wm.CLOSE_ON_EXECUTE,o.select.getOr(Ke),c.shared.providers),markers:o1(S),movement:FI(m,S),showMenuRole:!1};return{type:"widget",data:{value:Un("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Vk.widget(p0.sketch(T))]}},Vie=(o,c)=>{const d=o.initData.allowCustomColors&&c.colorinput.hasCustomColors();return o.initData.colors.fold(()=>iF(c.colorinput.getColors(o.initData.storageKey),o.initData.storageKey,d),m=>m.concat(r9(d)))},Hie=(o,c)=>{const d="imageselector",m=o.initData.columns,w={...nN(Un("menu-value"),o.initData.items,T=>{o.onAction({value:T})},m,d,Wm.CLOSE_ON_EXECUTE,o.select.getOr(Ke),c.shared.providers),markers:o1(d),movement:FI(m,d),showMenuRole:!1};return{type:"widget",data:{value:Un("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem","tox-collection--toolbar"]},autofocus:!0,components:[Vk.widget(p0.sketch(w))]}},uF=Un("cell-over"),d9=Un("cell-execute"),Fie=o=>(c,d)=>o.shared.providers.translate(["{0} columns, {1} rows",d,c]),f9=(o,c,d)=>{const m=T=>xo(T,uF,{row:o,col:c}),S=T=>xo(T,d9,{row:o,col:c}),w=(T,V)=>{V.stop(),S(T)};return O({dom:{tag:"div",attributes:{role:"button","aria-label":d}},behaviours:Tn([Qo("insert-table-picker-cell",[Ft(Ap(),ns.focus),Ft(ld(),S),Ft(bm(),w),Ft(Bb(),w)]),Vs.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),ns.config({onFocus:m})])})},$ie=(o,c,d)=>{const m=[];for(let S=0;S<c;S++){const w=[];for(let T=0;T<d;T++){const V=o(S+1,T+1);w.push(f9(S,T,V))}m.push(w)}return m},Uie=(o,c,d,m,S)=>{for(let w=0;w<m;w++)for(let T=0;T<S;T++)Vs.set(o[w][T],w<=c&&T<=d)},jie=o=>Ue(o,c=>Et(c,P)),dF=(o,c)=>gi(`${c}x${o}`),zie={inserttable:(o,c)=>{const S=Fie(c),w=$ie(S,10,10),T=dF(0,0),V=tr({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[T],behaviours:Tn([os.config({})])});return{type:"widget",data:{value:Un("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Vk.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:jie(w).concat(V.asSpec()),behaviours:Tn([Qo("insert-table-picker",[Qr(F=>{os.set(V.get(F),[T])}),Kb(uF,(F,W,Q)=>{const{row:oe,col:pe}=Q.event;Uie(w,oe,pe,10,10),os.set(V.get(F),[dF(oe+1,pe+1)])}),Kb(d9,(F,W,Q)=>{const{row:oe,col:pe}=Q.event;Rs(F,UE()),o.onAction({numRows:oe+1,numColumns:pe+1})})]),wo.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:Bie,imageselect:Hie},Wie=(o,c)=>Vt(zie,o.fancytype).map(d=>d(o,c)),p9=(o,c,d,m=!0,S=!1)=>{const w=S?xW(d.icons):uie(d.icons),T=F=>({isEnabled:()=>!So.isDisabled(F),setEnabled:W=>So.set(F,!W),setIconFill:(W,Q)=>{yr(F.element,`svg path[class="${W}"], rect[class="${W}"]`).each(oe=>{Lo(oe,"fill",Q)})},setTooltip:W=>{const Q=d.translate(W);Lo(F.element,"aria-label",Q)}}),V=wC({presets:"normal",iconContent:o.icon,textContent:o.text,htmlContent:z.none(),ariaLabel:o.text,labelContent:z.none(),caret:z.some(w),checkMark:z.none(),shortcutContent:o.shortcut},d,m);return l1({context:o.context,data:u1(o),getApi:T,enabled:o.enabled,onAction:K,onSetup:o.onSetup,triggersSubmenu:!0,itemBehaviours:[]},V,c,d)},h9=(o,c,d,m=!0)=>{const S=T=>({isEnabled:()=>!So.isDisabled(T),setEnabled:V=>So.set(T,!V)}),w=wC({presets:"normal",iconContent:o.icon,textContent:o.text,htmlContent:z.none(),labelContent:z.none(),ariaLabel:o.text,caret:z.none(),checkMark:z.none(),shortcutContent:o.shortcut},d,m);return l1({context:o.context,data:u1(o),getApi:S,enabled:o.enabled,onAction:o.onAction,onSetup:o.onSetup,triggersSubmenu:!1,itemBehaviours:[]},w,c,d)},m9=o=>({type:"separator",dom:{tag:"div",classes:[CM,cse]},components:o.text.map(gi).toArray()}),oN=(o,c,d,m=!0)=>{const S=T=>({setActive:V=>{Vs.set(T,V)},isActive:()=>Vs.isOn(T),isEnabled:()=>!So.isDisabled(T),setEnabled:V=>So.set(T,!V)}),w=wC({iconContent:o.icon,textContent:o.text,htmlContent:z.none(),labelContent:z.none(),ariaLabel:o.text,checkMark:z.some(FH(d.icons)),caret:z.none(),shortcutContent:o.shortcut,presets:"normal",meta:o.meta},d,m);return gr(l1({context:o.context,data:u1(o),enabled:o.enabled,getApi:S,onAction:o.onAction,onSetup:o.onSetup,triggersSubmenu:!1,itemBehaviours:[]},w,c,d),{toggling:{toggleClass:YV,toggleOnExecute:!1,selected:o.active},role:o.role.getOrUndefined()})},g9=hie,v9=m9,Gie=h9,b9=p9,qie=oN,Kie=Wie,Zie=mie,Yie=o=>{switch(o.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:o}}},y9=o=>{const c=zn.getValue(o),d=AI(o).map(QV);$f.refetch(c).get(()=>{const m=ms.getCoupled(c,"sandbox");d.each(S=>AI(m).each(w=>Uz(w,S)))})},Jie=(o,c)=>{Xie(o).each(d=>{m4(o,d.element,c.event.eventType,c.event.interactionEvent)})},Xie=o=>er.getState(o).bind(ir.getHighlighted).bind(ir.getHighlighted),Qie=o=>na(o.element,TM)?z.some(o.element):yr(o.element,"."+TM),fF=(o,c,d)=>{$z(o).each(m=>{jz(m,d),Qie(c).each(w=>{ic(w,"id").each(T=>Lo(m.element,"aria-controls",T))})}),Lo(d.element,"aria-selected","true")},S9=(o,c,d)=>{Lo(d.element,"aria-selected","false")},eae=o=>{$z(o).each(c=>ns.focus(c))},tae=o=>ms.getExistingCoupled(o,"sandbox").bind(AI).map(QV).map(d=>d.fetchPattern).getOr("");var $I;(function(o){o[o.ContentFocus=0]="ContentFocus",o[o.UiFocus=1]="UiFocus"})($I||($I={}));const nae=(o,c,d,m,S)=>{const w=d.shared.providers,T=V=>S?{...V,shortcut:z.none(),icon:V.text.isSome()?z.none():V.icon}:V;switch(o.type){case"menuitem":return IH(o).fold(zg,V=>z.some(Gie(T(V),c,w,m)));case"nestedmenuitem":return tie(o).fold(zg,V=>z.some(b9(T(V),c,w,m,S)));case"togglemenuitem":return Sw(o).fold(zg,V=>z.some(qie(T(V),c,w,m)));case"separator":return Ire(o).fold(zg,V=>z.some(v9(V)));case"fancymenuitem":return Jre(o).fold(zg,V=>Kie(V,d));default:return console.error("Unknown item in general menu",o),z.none()}},oae=(o,c,d,m,S,w,T)=>{const V=m===1,F=!V||vC(o);return ou(Et(o,W=>{switch(W.type){case"separator":return xre(W).fold(zg,Q=>z.some(v9(Q)));case"cardmenuitem":return mW(W).fold(zg,Q=>z.some(Zie({...Q,onAction:oe=>{Q.onAction(oe),d(Q.value,Q.meta)}},S,w,{itemBehaviours:d1(Q.meta,w,z.none()),cardText:{matchText:c,highlightOn:T}})));case"autocompleteitem":default:return Dre(W).fold(zg,Q=>z.some(g9(Q,c,V,"normal",d,S,w,F)))}}))},Jo=(o,c,d,m,S,w)=>{const T=vC(c),V=ou(Et(c,Q=>{const oe=Ee=>S?!Pn(Ee,"text"):T,pe=Ee=>nae(Ee,d,m,oe(Ee),S);return Q.type==="nestedmenuitem"&&Q.getSubmenuItems().length<=0?pe({...Q,enabled:!1}):pe(Q)})),F=Yie(w);return(S?yse:S0)(o,T,V,1,F)},OC=o=>Yy.singleData(o.value,o),C9=(o,c,d,m)=>{const S=FI(c,m),w=o1(m);return{data:OC({...o,movement:S,menuBehaviours:MI.unnamedEvents(c!=="auto"?[]:[Qr((T,V)=>{MH(T,4,w.item).each(({numColumns:F,numRows:W})=>{wo.setGridSize(T,W,F)})})])}),menu:{markers:o1(m),fakeFocus:d===$I.ContentFocus}}},E9=o=>j.create(kn.fromDom(o.startContainer),o.startOffset,kn.fromDom(o.endContainer),o.endOffset),_9={register:(o,c)=>{const d=Un("autocompleter"),m=mn(!1),S=mn(!1),w=$o(),T=O(Ni.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:d}},components:[],fireDismissalEventInstead:{},inlineBehaviours:Tn([Qo("dismissAutocompleter",[Ft(Fb(),()=>oe()),Ft($b(),(Le,Je)=>{ic(Je.event.target,"id").each(nt=>Lo(kn.fromDom(o.getBody()),"aria-activedescendant",nt))})])]),lazySink:c.getSink})),V=()=>Ni.isOpen(T),F=S.get,W=()=>{if(V()){Ni.hide(T),o.dom.remove(d,!1);const Le=kn.fromDom(o.getBody());ic(Le,"aria-owns").filter(Je=>Je===d).each(()=>{Jr(Le,"aria-owns"),Jr(Le,"aria-activedescendant")})}},Q=()=>Ni.getContent(T).bind(Le=>ht(Le.components(),0)),oe=()=>o.execCommand("mceAutocompleterClose"),pe=Le=>{const Je=Wo(Le,nt=>z.from(nt.columns)).getOr(1);return Ue(Le,nt=>{const Tt=nt.items;return oae(Tt,nt.matchText,(xt,jn)=>{const dn={hide:()=>oe(),reload:pn=>{W(),o.execCommand("mceAutocompleterReload",!1,{fetchOptions:pn})}};o.execCommand("mceAutocompleterRefreshActiveRange"),w.get().each(pn=>{m.set(!0),nt.onAction(dn,pn,xt,jn),m.set(!1)})},Je,Wm.BUBBLE_TO_SANDBOX,c,nt.highlightOn)})},Ee=(Le,Je)=>{const nt=Wo(Le,Tt=>z.from(Tt.columns)).getOr(1);Ni.showMenuAt(T,{anchor:{type:"selection",getSelection:()=>w.get().map(E9),root:kn.fromDom(o.getBody())}},C9(S0("autocompleter-value",!0,Je,nt,{menuType:"normal"}),nt,$I.ContentFocus,"normal")),Q().each(ir.highlightFirst)},Se=Le=>{const Je=pe(Le);Je.length>0?(Ee(Le,Je),Lo(kn.fromDom(o.getBody()),"aria-owns",d),o.inline||Pe()):W()},Pe=()=>{o.dom.get(d)&&o.dom.remove(d,!1);const Le=o.getDoc().documentElement,Je=o.selection.getNode(),nt=G1(T.element);_i(nt,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${Je.offsetTop}px`,left:`${Je.offsetLeft}px`}),o.dom.add(Le,nt.dom),yr(nt,'[role="menu"]').each(Tt=>{Ds(Tt,"position"),Ds(Tt,"max-height")})};o.on("AutocompleterStart",({lookupData:Le})=>{S.set(!0),m.set(!1),Se(Le)}),o.on("AutocompleterUpdate",({lookupData:Le})=>Se(Le)),o.on("AutocompleterUpdateActiveRange",({range:Le})=>w.set(Le)),o.on("AutocompleterEnd",()=>{W(),S.set(!1),m.set(!1),w.clear()});const qe={cancelIfNecessary:oe,isMenuOpen:V,isActive:F,isProcessingAction:m.get,getMenu:Q};ise.setup(qe,o)}},rae=(o,c)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Et(o.items,c.interpreter)});var w9=tinymce.util.Tools.resolve("tinymce.html.Entities");const UI=(o,c,d,m)=>{const S=aae(o,c,d,m);return ws.sketch(S)},iae=(o,c)=>UI(o,c,[],[]),aae=(o,c,d,m)=>({dom:pF(d),components:o.toArray().concat([c]),fieldBehaviours:Tn(m)}),A9=()=>pF([]),pF=o=>({tag:"div",classes:["tox-form__group"].concat(o)}),IC=(o,c)=>ws.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[gi(c.translate(o))]}),Gl=Un("form-component-change"),sN=Un("form-component-input"),Aw=Un("form-close"),p1=Un("form-cancel"),Wv=Un("form-action"),jI=Un("form-submit"),hF=Un("form-block"),zI=Un("form-unblock"),mF=Un("form-tabchange"),gF=Un("form-resize"),cae=(o,c,d)=>{const m=o.label.map(Ee=>IC(Ee,c)),S=c.icons(),w=Ee=>{var Se;return(Se=S[Ee])!==null&&Se!==void 0?Se:Ee},T=Ee=>(Se,Pe)=>{qc(Pe.event.target,"[data-collection-item-value]").each(qe=>{Ee(Se,Pe,qe,Na(qe,"data-collection-item-value"))})},V=(Ee,Se)=>{const qe=c.checkUiComponentContext("mode:design").shouldDisable||c.isDisabled()?" tox-collection__item--state-disabled":"",Le=Et(Se,Tt=>{const xt=wa.translate(Tt.text),jn=o.columns===1?`<div class="tox-collection__item-label">${xt}</div>`:"",dn=`<div class="tox-collection__item-icon">${w(Tt.icon)}</div>`,pn={_:" "," - ":" ","-":" "},an=xt.replace(/\_| \- |\-/g,Ro=>pn[Ro]);return`<div data-mce-tooltip="${an}" class="tox-collection__item${qe}" tabindex="-1" data-collection-item-value="${w9.encodeAllRaw(Tt.value)}" aria-label="${an}">${dn}${jn}</div>`}),Je=o.columns!=="auto"&&o.columns>1?Zn(Le,o.columns):[Le],nt=Et(Je,Tt=>`<div class="tox-collection__group">${Tt.join("")}</div>`);jd(Ee.element,nt.join(""))},F=T((Ee,Se,Pe,qe)=>{Se.stop(),c.checkUiComponentContext("mode:design").shouldDisable||c.isDisabled()||xo(Ee,Wv,{name:o.name,value:qe})}),W=[Ft(Ap(),T((Ee,Se,Pe)=>{ja(Pe,!0)})),Ft(bm(),F),Ft(Bb(),F),Ft(Tp(),T((Ee,Se,Pe)=>{yr(Ee.element,"."+hC).each(qe=>{Ii(qe,hC)}),Rr(Pe,hC)})),Ft($E(),T(Ee=>{yr(Ee.element,"."+hC).each(Se=>{Ii(Se,hC),Oi(Se)})})),Dg(T((Ee,Se,Pe,qe)=>{xo(Ee,Wv,{name:o.name,value:qe})}))],Q=(Ee,Se)=>Et(Ga(Ee.element,".tox-collection__item"),Se),oe=ws.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(o.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:we},behaviours:Tn([So.config({disabled:()=>c.checkUiComponentContext(o.context).shouldDisable,onDisabled:Ee=>{Q(Ee,Se=>{Rr(Se,"tox-collection__item--state-disabled"),Lo(Se,"aria-disabled",!0)})},onEnabled:Ee=>{Q(Ee,Se=>{Ii(Se,"tox-collection__item--state-disabled"),Jr(Se,"aria-disabled")})}}),bi(()=>c.checkUiComponentContext(o.context)),os.config({}),vi.config({...c.tooltips.getConfig({tooltipText:"",onShow:Ee=>{yr(Ee.element,"."+hC+"[data-mce-tooltip]").each(Se=>{ic(Se,"data-mce-tooltip").each(Pe=>{vi.setComponents(Ee,c.tooltips.getComponents({tooltipText:Pe}))})})}}),mode:"children-keyboard-focus",anchor:Ee=>({type:"node",node:yr(Ee.element,"."+hC).orThunk(()=>AE(".tox-collection__item")),root:Ee.element,layouts:{onLtr:M([Ea,uc,Ha,Xc,hi,Za]),onRtl:M([Ea,uc,Ha,Xc,hi,Za])},bubble:Xd(0,-2,{})})}),zn.config({store:{mode:"memory",initialValue:d.getOr([])},onSetValue:(Ee,Se)=>{V(Ee,Se),o.columns==="auto"&&MH(Ee,5,"tox-collection__item").each(({numRows:Pe,numColumns:qe})=>{wo.setGridSize(Ee,Pe,qe)}),Rs(Ee,gF)}}),qr.config({}),wo.config(Lie(o.columns,"normal")),Qo("collection-events",W)]),eventOrder:{[ld()]:["disabling","alloy.base.behaviour","collection-events"],[Tp()]:["collection-events","tooltipping"]}});return UI(m,oe,["tox-form__group--collection"],[])},lae=(o,c)=>$f.sketch({dom:o.dom,components:o.components,toggleClass:"mce-active",dropdownBehaviours:Tn([Hp.button(()=>c.providers.isDisabled()||c.providers.checkUiComponentContext(o.context).shouldDisable),bi(()=>c.providers.checkUiComponentContext(o.context)),ow.config({}),qr.config({})]),layouts:o.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:c.getSink,fetch:d=>Os.nu(m=>o.fetch(m)).map(m=>z.from(OC(gr(nN(Un("menu-value"),m,S=>{o.onItemAction(d,S)},o.columns,o.presets,Wm.CLOSE_ON_EXECUTE,Ke,c.providers),{movement:FI(o.columns,o.presets)})))),parts:{menu:fw(!1,1,o.presets)}}),T9=Un("color-input-change"),vF=Un("color-swatch-change"),O9=Un("color-picker-cancel"),uae=(o,c,d,m)=>{const S=ws.parts.field({factory:jg,inputClasses:["tox-textfield"],data:m,onSetValue:W=>Hm.run(W).get(K),inputBehaviours:Tn([So.config({disabled:()=>c.providers.isDisabled()||c.providers.checkUiComponentContext(o.context).shouldDisable}),bi(()=>c.providers.checkUiComponentContext(o.context)),qr.config({}),Hm.config({invalidClass:"tox-textbox-field-invalid",getRoot:W=>Po(W.element),notify:{onValid:W=>{const Q=zn.getValue(W);xo(W,T9,{color:Q})}},validator:{validateOnLoad:!1,validate:W=>{const Q=zn.getValue(W);if(Q.length===0)return Os.pure(fo.value(!0));{const oe=kn.fromTag("span");jo(oe,"background-color",Q);const pe=li(oe,"background-color").fold(()=>fo.error("blah"),Ee=>fo.value(Q));return Os.pure(pe)}}}})]),selectOnFocus:!1}),w=o.label.map(W=>IC(W,c.providers)),T=(W,Q)=>{xo(W,vF,{value:Q})},V=(W,Q)=>{F.getOpt(W).each(oe=>{Q==="custom"?d.colorPicker(pe=>{pe.fold(()=>Rs(oe,O9),Ee=>{T(oe,Ee),YM(o.storageKey,Ee)})},"#ffffff"):Q==="remove"?T(oe,""):T(oe,Q)})},F=tr(lae({dom:{tag:"span",attributes:{"aria-label":c.providers.translate("Color swatch")}},layouts:{onRtl:()=>[hi,Ha,Ea],onLtr:()=>[Ha,hi,Ea]},components:[],fetch:aF(d.getColors(o.storageKey),o.storageKey,d.hasCustomColors()),columns:d.getColorCols(o.storageKey),presets:"color",onItemAction:V,context:o.context},c));return ws.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:w.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[S,F.asSpec()]}]),fieldBehaviours:Tn([Qo("form-field-events",[Ft(T9,(W,Q)=>{F.getOpt(W).each(oe=>{jo(oe.element,"background-color",Q.event.color)}),xo(W,Gl,{name:o.name})}),Ft(vF,(W,Q)=>{ws.getField(W).each(oe=>{zn.setValue(oe,Q.event.value),zt.getCurrent(W).each(ns.focus)})}),Ft(O9,(W,Q)=>{ws.getField(W).each(oe=>{zt.getCurrent(W).each(ns.focus)})})])])})},Km={self:()=>zt.config({find:z.some}),memento:o=>zt.config({find:o.getOpt}),childAt:o=>zt.config({find:c=>Ks(c.element,o).bind(d=>c.getSystem().getByDom(d).toOptional())})},R9=zo([Ct("preprocess",we),Ct("postprocess",we)]),dae=(o,c)=>{const d=Mu("RepresentingConfigs.memento processors",R9,c);return zn.config({store:{mode:"manual",getValue:m=>{const S=o.get(m),w=zn.getValue(S);return d.postprocess(w)},setValue:(m,S)=>{const w=d.preprocess(S),T=o.get(m);zn.setValue(T,w)}}})},RC=(o,c,d)=>zn.config({store:{mode:"manual",...o.map(m=>({initialValue:m})).getOr({}),getValue:c,setValue:d}}),fae=(o,c,d)=>RC(o,m=>c(m.element),(m,S)=>d(m.element,S)),pae=o=>fae(o,hp,jd),rN=o=>zn.config({store:{mode:"memory",initialValue:o}}),WI=Un("rgb-hex-update"),x9=Un("slider-update"),GI=Un("palette-update"),D9=(o,c)=>{const d=Nh.parts.spectrum({dom:{tag:"div",classes:[c("hue-slider-spectrum")],attributes:{role:"presentation"}}}),m=Nh.parts.thumb({dom:{tag:"div",classes:[c("hue-slider-thumb")],attributes:{role:"presentation"}}});return Nh.sketch({dom:{tag:"div",classes:[c("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:M(0)},components:[d,m],sliderBehaviours:Tn([ns.config({})]),onChange:(S,w,T)=>{Lo(S.element,"aria-valuenow",Math.floor(360-T*3.6)),xo(S,x9,{value:T})}})},yF=Un("valid-input"),iN=Un("invalid-input"),k9=Un("validating-input"),aN="colorcustom.rgb.",Tw={isEnabled:Ze,setEnabled:K,immediatelyShow:K,immediatelyHide:K},M9=(o,c,d,m,S,w)=>{const T=(Pe,qe)=>{const Le=qe.get();Pe!==Le.isEnabled()&&(Le.setEnabled(Pe),Pe?Le.immediatelyShow():Le.immediatelyHide())},V=(Pe,qe,Le)=>Hm.config({invalidClass:c("invalid"),notify:{onValidate:Je=>{xo(Je,k9,{type:Pe})},onValid:Je=>{T(!1,Le),xo(Je,yF,{type:Pe,value:zn.getValue(Je)})},onInvalid:Je=>{T(!0,Le),xo(Je,iN,{type:Pe,value:zn.getValue(Je)})}},validator:{validate:Je=>{const nt=zn.getValue(Je),Tt=qe(nt)?fo.value(!0):fo.error(o("aria.input.invalid"));return Os.pure(Tt)},validateOnLoad:!1}}),F=(Pe,qe,Le,Je,nt)=>{const Tt=mn(Tw),xt=o(aN+"range"),jn=ws.parts.label({dom:{tag:"label"},components:[gi(Le)]}),dn=ws.parts.field({data:nt,factory:jg,inputAttributes:{type:"text","aria-label":Je,...qe==="hex"?{"aria-live":"polite"}:{}},inputClasses:[c("textfield")],inputBehaviours:Tn([V(qe,Pe,Tt),qr.config({}),vi.config({...S({tooltipText:"",onSetup:as=>{Tt.set({isEnabled:()=>vi.isEnabled(as),setEnabled:po=>vi.setEnabled(as,po),immediatelyShow:()=>vi.immediateOpenClose(as,!0),immediatelyHide:()=>vi.immediateOpenClose(as,!1)}),vi.setEnabled(as,!1)},onShow:(as,po)=>{vi.setComponents(as,[{dom:{tag:"p",classes:[c("rgb-warning-note")]},components:[gi(o(qe==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:as=>{Hm.isInvalid(as)&&Hm.run(as).get(K)}}),pn=Un("aria-invalid"),an=tr(w("invalid",z.some(pn),"warning")),Ro=tr({dom:{tag:"div",classes:[c("invalid-icon")]},components:[an.asSpec()]}),mo=[jn,dn,Ro.asSpec()],Ns=qe!=="hex"?[ws.parts["aria-descriptor"]({text:xt})]:[],Vo=mo.concat(Ns);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[c("rgb-container")]},components:Vo}},W=(Pe,qe)=>{const Le=ww(qe);return tf.getField(Pe,"hex").each(Je=>{ns.isFocused(Je)||zn.setValue(Pe,{hex:Le.value})}),Le},Q=(Pe,qe)=>{const Le=qe.red,Je=qe.green,nt=qe.blue;zn.setValue(Pe,{red:Le,green:Je,blue:nt})},oe=tr({dom:{tag:"div",classes:[c("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),pe=(Pe,qe)=>{oe.getOpt(Pe).each(Le=>{jo(Le.element,"background-color","#"+qe.value)})};return Bf({factory:()=>{const Pe={red:mn(z.some(255)),green:mn(z.some(255)),blue:mn(z.some(255)),hex:mn(z.some("ffffff"))},qe=(po,on)=>{const Ln=LI(on);Q(po,Ln),Tt(Ln)},Le=po=>Pe[po].get(),Je=(po,on)=>{Pe[po].set(on)},nt=()=>Le("red").bind(po=>Le("green").bind(on=>Le("blue").map(Ln=>AC(po,on,Ln,1)))),Tt=po=>{const on=po.red,Ln=po.green,Uo=po.blue;Je("red",z.some(on)),Je("green",z.some(Ln)),Je("blue",z.some(Uo))},xt=(po,on)=>{const Ln=on.event;Ln.type!=="hex"?Je(Ln.type,z.none()):m(po)},jn=(po,on)=>{d(po);const Ln=UH(on);Je("hex",z.some(Ln.value));const Uo=LI(Ln);Q(po,Uo),Tt(Uo),xo(po,WI,{hex:Ln}),pe(po,Ln)},dn=(po,on,Ln)=>{const Uo=parseInt(Ln,10);Je(on,z.some(Uo)),nt().each(fs=>{const Co=W(po,fs);xo(po,WI,{hex:Co}),pe(po,Co)})},pn=po=>po.type==="hex",an=(po,on)=>{const Ln=on.event;pn(Ln)?jn(po,Ln.value):dn(po,Ln.type,Ln.value)},Ro=po=>({label:o(aN+po+".label"),description:o(aN+po+".description")}),mo=Ro("red"),Ns=Ro("green"),Vo=Ro("blue"),as=Ro("hex");return gr(tf.sketch(po=>({dom:{tag:"form",classes:[c("rgb-form")],attributes:{"aria-label":o("aria.color.picker")}},components:[po.field("red",ws.sketch(F(qM,"red",mo.label,mo.description,255))),po.field("green",ws.sketch(F(qM,"green",Ns.label,Ns.description,255))),po.field("blue",ws.sketch(F(qM,"blue",Vo.label,Vo.description,255))),po.field("hex",ws.sketch(F(zM,"hex",as.label,as.description,"ffffff"))),oe.asSpec()],formBehaviours:Tn([Hm.config({invalidClass:c("form-invalid")}),Qo("rgb-form-events",[Ft(yF,an),Ft(iN,xt),Ft(k9,xt)])])})),{apis:{updateHex:(po,on)=>{zn.setValue(po,{hex:on.value}),qe(po,on),pe(po,on)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(Pe,qe,Le)=>{Pe.updateHex(qe,Le)}},extraApis:{}})},hae=(o,c)=>{const d=Nh.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[c("sv-palette-spectrum")]}}),m=Nh.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[c("sv-palette-thumb")],innerHtml:`<div class=${c("sv-palette-inner-thumb")} role="presentation"></div>`}}),S=(W,Q)=>{const{width:oe,height:pe}=W,Ee=W.getContext("2d");if(Ee===null)return;Ee.fillStyle=Q,Ee.fillRect(0,0,oe,pe);const Se=Ee.createLinearGradient(0,0,oe,0);Se.addColorStop(0,"rgba(255,255,255,1)"),Se.addColorStop(1,"rgba(255,255,255,0)"),Ee.fillStyle=Se,Ee.fillRect(0,0,oe,pe);const Pe=Ee.createLinearGradient(0,0,0,pe);Pe.addColorStop(0,"rgba(0,0,0,0)"),Pe.addColorStop(1,"rgba(0,0,0,1)"),Ee.fillStyle=Pe,Ee.fillRect(0,0,oe,pe)},w=(W,Q)=>{const oe=W.components()[0].element.dom,pe=f1(Q,100,100),Ee=GH(pe);S(oe,BI(Ee))},T=(W,Q)=>{const oe=WM(LI(Q));Nh.setValue(W,{x:oe.saturation,y:100-oe.value}),Lo(W.element,"aria-valuetext",o(["Saturation {0}%, Brightness {1}%",oe.saturation,oe.value]))};return Bf({factory:W=>{const Q=M({x:0,y:0}),oe=(Se,Pe,qe)=>{q(qe)||Lo(Se.element,"aria-valuetext",o(["Saturation {0}%, Brightness {1}%",Math.floor(qe.x),Math.floor(100-qe.y)])),xo(Se,GI,{value:qe})},pe=(Se,Pe,qe,Le)=>{S(qe.element.dom,BI(UW))},Ee=Tn([zt.config({find:z.some}),ns.config({})]);return Nh.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":o(["Saturation {0}%, Brightness {1}%",0,0])},classes:[c("sv-palette")]},model:{mode:"xy",getInitialValue:Q},rounded:!1,components:[d,m],onChange:oe,onInit:pe,sliderBehaviours:Ee})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(W,Q,oe)=>{w(Q,oe)},setThumb:(W,Q,oe)=>{T(Q,oe)}},extraApis:{}})},mae=(o,c,d,m)=>{const S=T=>{const V=M9(o,c,T.onValidHex,T.onInvalidHex,d,m),F=hae(o,c),W=pn=>(100-pn)/100*360,Q=pn=>100-pn/360*100,oe={paletteRgba:mn(UW),paletteHue:mn(0)},pe=tr(D9(o,c)),Ee=tr(F.sketch({})),Se=tr(V.sketch({})),Pe=(pn,an,Ro)=>{Ee.getOpt(pn).each(mo=>{F.setHue(mo,Ro)})},qe=(pn,an)=>{Se.getOpt(pn).each(Ro=>{V.updateHex(Ro,an)})},Le=(pn,an,Ro)=>{pe.getOpt(pn).each(mo=>{Nh.setValue(mo,Q(Ro))})},Je=(pn,an)=>{Ee.getOpt(pn).each(Ro=>{F.setThumb(Ro,an)})},nt=(pn,an)=>{const Ro=LI(pn);oe.paletteRgba.set(Ro),oe.paletteHue.set(an)},Tt=(pn,an,Ro,mo)=>{nt(an,Ro),Jt(mo,Ns=>{Ns(pn,an,Ro)})},xt=()=>{const pn=[qe];return(an,Ro)=>{const mo=Ro.event.value,Ns=oe.paletteHue.get(),Vo=f1(Ns,mo.x,100-mo.y),as=KH(Vo);Tt(an,as,Ns,pn)}},jn=()=>{const pn=[Pe,qe];return(an,Ro)=>{const mo=W(Ro.event.value),Ns=oe.paletteRgba.get(),Vo=WM(Ns),as=f1(mo,Vo.saturation,Vo.value),po=KH(as);Tt(an,po,mo,pn)}},dn=()=>{const pn=[Pe,Le,Je];return(an,Ro)=>{const mo=Ro.event.hex,Ns=bie(mo);Tt(an,mo,Ns.hue,pn)}};return{uid:T.uid,dom:T.dom,components:[Ee.asSpec(),pe.asSpec(),Se.asSpec()],behaviours:Tn([Qo("colour-picker-events",[Ft(WI,dn()),Ft(GI,xt()),Ft(x9,jn())]),zt.config({find:pn=>Se.getOpt(pn)}),wo.config({mode:"acyclic"})])}};return Bf({name:"ColourPicker",configFields:[sn("dom"),Ct("onValidHex",K),Ct("onInvalidHex",K)],factory:S})},gae={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},SF=o=>c=>v(c)?o.translate(gae[c]):o.translate(c),vae=(o,c,d)=>{const m=W=>"tox-"+W,S=(W,Q,oe=W,pe=W)=>Bp(oe,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+W],attributes:{title:c.translate(pe),"aria-live":"polite",...Q.fold(()=>({}),Ee=>({id:Ee}))}},c.icons),w=mae(SF(c),m,c.tooltips.getConfig,S),T=W=>{xo(W,Wv,{name:"hex-valid",value:!0})},V=W=>{xo(W,Wv,{name:"hex-valid",value:!1})},F=tr(w.sketch({dom:{tag:"div",classes:[m("color-picker-container")],attributes:{role:"presentation"}},onValidHex:T,onInvalidHex:V}));return{dom:{tag:"div"},components:[F.asSpec()],behaviours:Tn([RC(d,W=>{const Q=F.get(W);return zt.getCurrent(Q).bind(Ee=>zn.getValue(Ee).hex).map(Ee=>"#"+ih(Ee,"#")).getOr("")},(W,Q)=>{const oe=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,pe=z.from(oe.exec(Q)).bind(Pe=>ht(Pe,1)),Ee=F.get(W);zt.getCurrent(Ee).fold(()=>{console.log("Can not find form")},Pe=>{zn.setValue(Pe,{hex:pe.getOr("")}),tf.getField(Pe,"hex").each(qe=>{Rs(qe,Ag())})})}),Km.self()])}};var bae=tinymce.util.Tools.resolve("tinymce.Resource");const CF=o=>Pn(o,"init"),yae=o=>{const c=$o(),d=tr({dom:{tag:o.tag}}),m=$o(),S=!CF(o)&&o.onFocus.isSome()?[ns.config({onFocus:w=>{o.onFocus.each(T=>{T(w.element.dom)})}}),qr.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Tn([Qo("custom-editor-events",[Qr(w=>{d.getOpt(w).each(T=>{(CF(o)?o.init(T.element.dom):bae.load(o.scriptId,o.scriptUrl).then(V=>V(T.element.dom,o.settings))).then(V=>{m.on(F=>{V.setValue(F)}),m.clear(),c.set(V)})})})]),RC(z.none(),()=>c.get().fold(()=>m.get().getOr(""),w=>w.getValue()),(w,T)=>{c.get().fold(()=>m.set(T),V=>V.setValue(T))}),Km.self()].concat(S)),components:[d.asSpec()]}};var T0=tinymce.util.Tools.resolve("tinymce.util.Tools");const EF=Un("browse.files.event"),N9=(o,c)=>{const d=T0.explode(c.getOption("images_file_types")),m=S=>io(d,w=>Ol(S.name.toLowerCase(),`.${w.toLowerCase()}`));return Fo(Ko(o),m)},Sae=(o,c,d)=>{const m=(pe,Ee)=>{Ee.stop()},S=pe=>(Ee,Se)=>{Jt(pe,Pe=>{Pe(Ee,Se)})},w=(pe,Ee)=>{var Se;if(!So.isDisabled(pe)){const Pe=Ee.event.raw;xo(pe,EF,{files:(Se=Pe.dataTransfer)===null||Se===void 0?void 0:Se.files})}},T=(pe,Ee)=>{const Se=Ee.event.raw.target;xo(pe,EF,{files:Se.files})},V=(pe,Ee)=>{Ee&&(zn.setValue(pe,N9(Ee,c)),xo(pe,Gl,{name:o.name}))},F=tr({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Tn([Qo("input-file-events",[Zb(bm()),Zb(Bb())])])}),W=o.label.map(pe=>IC(pe,c)),Q=ws.parts.field({factory:zl,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[gi(c.translate("Browse for an image")),F.asSpec()],action:pe=>{F.get(pe).element.dom.click()},buttonBehaviours:Tn([Km.self(),rN(d.getOr([])),qr.config({}),Hp.button(()=>c.checkUiComponentContext(o.context).shouldDisable),bi(()=>c.checkUiComponentContext(o.context))])}),oe={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Tn([So.config({disabled:()=>c.checkUiComponentContext(o.context).shouldDisable}),bi(()=>c.checkUiComponentContext(o.context)),Vs.config({toggleClass:"dragenter",toggleOnExecute:!1}),Qo("dropzone-events",[Ft("dragenter",S([m,Vs.toggle])),Ft("dragleave",S([m,Vs.toggle])),Ft("dragover",m),Ft("drop",S([m,w])),Ft(Mb(),T)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[gi(c.translate("Drop an image here"))]},Q]}]};return UI(W,oe,["tox-form__group--stretched"],[Qo("handle-files",[Ft(EF,(pe,Ee)=>{ws.getField(pe).each(Se=>{V(Se,Ee.event.files)})})])])},Cae=(o,c)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${o.columns}col`]},components:Et(o.items,c.interpreter)}),_F=Un("alloy-fake-before-tabstop"),wF=Un("alloy-fake-after-tabstop"),P9=o=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:o},behaviours:Tn([ns.config({ignore:!0}),qr.config({})])}),L9=(o,c)=>({dom:{tag:"div",classes:["tox-navobj",...o.getOr([])]},components:[P9([_F]),c,P9([wF])],behaviours:Tn([Km.childAt(1)])}),B9=(o,c)=>{xo(o,lc(),{raw:{which:9,shiftKey:c}})},Eae=(o,c)=>{const d=c.element;na(d,_F)?B9(o,!0):na(d,wF)&&B9(o,!1)},qI=o=>_b(o,["."+_F,"."+wF].join(","),Ke),cN=Un("update-dialog"),V9=Un("update-title"),AF=Un("update-body"),H9=Un("update-footer"),F9=Un("body-send-message"),lN=Un("dialog-focus-shifted"),TF=Wr().browser,KI=TF.isSafari(),_ae=TF.isFirefox(),OF=KI||_ae,wae=TF.isChromium(),$9=({scrollTop:o,scrollHeight:c,clientHeight:d})=>Math.ceil(o)+d>=c,U9=(o,c)=>o.scrollTo(0,c==="bottom"?99999999:c),j9=(o,c)=>{const d=o.body;return z.from(!/^<!DOCTYPE (html|HTML)/.test(c)&&(!wae&&!KI||B(d)&&(d.scrollTop!==0||Math.abs(d.scrollHeight-d.clientHeight)>1))?d:o.documentElement)},IF=(o,c,d)=>{const m=o.dom;z.from(m.contentDocument).fold(d,S=>{let w=0;const T=j9(S,c).map(F=>(w=F.scrollTop,F)).forall($9),V=()=>{const F=m.contentWindow;B(F)&&(T?U9(F,"bottom"):!T&&OF&&w!==0&&U9(F,w))};KI&&m.addEventListener("load",V,{once:!0}),S.open(),S.write(c),S.close(),KI||V()})},Aae=Gi(OF,KI?500:200).map(o=>ci(IF,o)),Tae=(o,c)=>{const d=mn(o.getOr(""));return{getValue:m=>d.get(),setValue:(m,S)=>{if(d.get()!==S){const w=m.element,T=()=>Lo(w,"srcdoc",S);c?Aae.fold(M(IF),V=>V.throttle)(w,S,T):T()}d.set(S)}}},W9=(o,c,d)=>{const m="tox-dialog__iframe",S=o.transparent?[]:[`${m}--opaque`],w=o.border?["tox-navobj-bordered"]:[],T={...o.label.map(oe=>({title:oe})).getOr({}),...d.map(oe=>({srcdoc:oe})).getOr({}),...o.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},V=Tae(d,o.streamContent),F=o.label.map(oe=>IC(oe,c)),W=oe=>L9(z.from(w),{uid:oe.uid,dom:{tag:"iframe",attributes:T,classes:[m,...S]},behaviours:Tn([qr.config({}),ns.config({}),RC(d,V.getValue,V.setValue),Vf.config({channels:{[lN]:{onReceive:(pe,Ee)=>{Ee.newFocus.each(Se=>{Po(pe.element).each(Pe=>{(de(pe.element,Se)?Rr:Ii)(Pe,"tox-navobj-bordered-focus")})})}}}})])}),Q=ws.parts.field({factory:{sketch:W}});return UI(F,Q,["tox-form__group--stretched"],[])},Oae=(o,c,d,m,S)=>{const w=d*S,T=m*S,V=Math.max(0,o/2-w/2),F=Math.max(0,c/2-T/2);return{left:V.toString()+"px",top:F.toString()+"px",width:w.toString()+"px",height:T.toString()+"px"}},G9=(o,c,d)=>{const m=Tc(o),S=fa(o);return Math.min(m/c,S/d,1)},Iae=(o,c)=>{const d=mn(c.getOr({url:""})),m=tr({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:c.map(F=>({src:F.url})).getOr({})}}),S=tr({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[m.asSpec()]}),w=(F,W)=>{const Q={url:W.url};W.zoom.each(pe=>Q.zoom=pe),W.cachedWidth.each(pe=>Q.cachedWidth=pe),W.cachedHeight.each(pe=>Q.cachedHeight=pe),d.set(Q);const oe=()=>{const{cachedWidth:pe,cachedHeight:Ee,zoom:Se}=Q;if(!N(pe)&&!N(Ee)){if(N(Se)){const qe=G9(F.element,pe,Ee);Q.zoom=qe}const Pe=Oae(Tc(F.element),fa(F.element),pe,Ee,Q.zoom);S.getOpt(F).each(qe=>{_i(qe.element,Pe)})}};m.getOpt(F).each(pe=>{const Ee=pe.element;W.url!==Na(Ee,"src")&&(Lo(Ee,"src",W.url),Ii(F.element,"tox-imagepreview__loaded")),oe(),sd(Ee).then(Se=>{F.getSystem().isConnected()&&(Rr(F.element,"tox-imagepreview__loaded"),Q.cachedWidth=Se.dom.naturalWidth,Q.cachedHeight=Se.dom.naturalHeight,oe())})})},T={};o.height.each(F=>T.height=F);const V=c.map(F=>({url:F.url,zoom:z.from(F.zoom),cachedWidth:z.from(F.cachedWidth),cachedHeight:z.from(F.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:T,attributes:{role:"presentation"}},components:[S.asSpec()],behaviours:Tn([Km.self(),RC(V,()=>d.get(),w)])}},uN=(o,c,d)=>{const m="tox-label",S=o.align==="center"?[`${m}--center`]:[],w=o.align==="end"?[`${m}--end`]:[],T=tr({dom:{tag:"label",classes:[m,...S,...w]},components:[gi(c.providers.translate(o.label))]}),V=Et(o.items,c.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[T.asSpec(),...V],behaviours:Tn([Km.self(),os.config({}),pae(z.none()),wo.config({mode:"acyclic"}),Qo("label",[Qr(F=>{o.for.each(W=>{d(W).each(Q=>{T.getOpt(F).each(oe=>{var pe;const Ee=(pe=Na(Q.element,"id"))!==null&&pe!==void 0?pe:Un("form-field");Lo(Q.element,"id",Ee),Lo(oe.element,"for",Ee)})})})})])])}},RF=Un("toolbar.button.execute"),q9=o=>Dg((c,d)=>{Cw(o,c)(m=>{xo(c,RF,{buttonApi:m}),o.onAction(m)})}),h1=Un("common-button-display-events"),K9={[ld()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[bh()]:["toolbar-button-events",h1],[Tg()]:["toolbar-button-events","dropdown-events","tooltipping"],[hu()]:["focusing","alloy.base.behaviour",h1]},Vh=o=>jo(o.element,"width",Xr(o.element,"width")),ZI=(o,c,d)=>Bp(o,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:d},c),Ow=(o,c)=>ZI(o,c,[]),m1=(o,c)=>ZI(o,c,[os.config({})]),dN=(o,c,d)=>({dom:{tag:"span",classes:[`${c}__select-label`]},components:[gi(d.translate(o))],behaviours:Tn([os.config({})])}),Hh=Un("update-menu-text"),O0=Un("update-menu-icon"),xF=Un("update-tooltip-text"),YI=(o,c,d,m)=>{const S=mn(K),w=mn(o.tooltip),T=o.text.map(qe=>tr(dN(qe,c,d.providers))),V=o.icon.map(qe=>tr(m1(qe,d.providers.icons))),F=(qe,Le)=>{const Je=zn.getValue(qe);return ns.focus(Je),xo(Je,"keydown",{raw:Le.event.raw}),$f.close(Je),z.some(!0)},W=o.role.fold(()=>({}),qe=>({role:qe})),Q=z.from(o.listRole).map(qe=>({listRole:qe})).getOr({}),oe=o.ariaLabel.fold(()=>({}),qe=>({"aria-label":d.providers.translate(qe)})),pe=Bp("chevron-down",{tag:"div",classes:[`${c}__select-chevron`]},d.providers.icons),Ee=Un("common-button-display-events"),Se="dropdown-events";return tr($f.sketch({...o.uid?{uid:o.uid}:{},...W,...Q,dom:{tag:"button",classes:[c,`${c}--select`].concat(Et(o.classes,qe=>`${c}--${qe}`)),attributes:{...oe,...B(m)?{"data-mce-name":m}:{}}},components:_w([V.map(qe=>qe.asSpec()),T.map(qe=>qe.asSpec()),z.some(pe)]),matchWidth:!0,useMinWidth:!0,onOpen:(qe,Le,Je)=>{o.searchable&&eae(Je)},dropdownBehaviours:Tn([...o.dropdownBehaviours,Hp.button(()=>o.disabled||d.providers.checkUiComponentContext(o.context).shouldDisable),bi(()=>d.providers.checkUiComponentContext(o.context)),ow.config({}),os.config({}),...o.tooltip.map(qe=>vi.config(d.providers.tooltips.getConfig({tooltipText:d.providers.translate(qe),onShow:Le=>{if(bc(w.get(),o.tooltip,(Je,nt)=>nt!==Je).getOr(!1)){const Je=d.providers.translate(w.get().getOr(""));vi.setComponents(Le,d.providers.tooltips.getComponents({tooltipText:Je}))}}}))).toArray(),Qo(Se,[Fp(o,S),w0(o,S)]),Qo(Ee,[Qr((qe,Le)=>{o.listRole!=="listbox"&&Vh(qe)})]),Qo("update-dropdown-width-variable",[Ft(Hb(),(qe,Le)=>$f.close(qe))]),Qo("menubutton-update-display-text",[Ft(Hh,(qe,Le)=>{T.bind(Je=>Je.getOpt(qe)).each(Je=>{os.set(Je,[gi(d.providers.translate(Le.event.text))])})}),Ft(O0,(qe,Le)=>{V.bind(Je=>Je.getOpt(qe)).each(Je=>{os.set(Je,[m1(Le.event.icon,d.providers.icons)])})}),Ft(xF,(qe,Le)=>{const Je=d.providers.translate(Le.event.text);Lo(qe.element,"aria-label",Je),w.set(z.some(Le.event.text))})])]),eventOrder:gr(K9,{[hu()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[bh()]:["toolbar-button-events",vi.name(),Se,Ee]}),sandboxBehaviours:Tn([wo.config({mode:"special",onLeft:F,onRight:F}),Qo("dropdown-sandbox-events",[Ft(XV,(qe,Le)=>{y9(qe),Le.stop()}),Ft(Hz,(qe,Le)=>{Jie(qe,Le),Le.stop()})])]),lazySink:d.getSink,toggleClass:`${c}--active`,parts:{menu:{...fw(!1,o.columns,o.presets),fakeFocus:o.searchable,...o.listRole==="listbox"?{}:{onHighlightItem:fF,onCollapseMenu:(qe,Le,Je)=>{ir.getHighlighted(Je).each(nt=>{fF(qe,Je,nt)})},onDehighlightItem:S9}}},getAnchorOverrides:()=>({maxHeightFunction:(qe,Le)=>{qx()(qe,Le-10)}}),fetch:qe=>Os.nu(De(o.fetch,qe))})).asSpec()},Rae=o=>v(o),Z9=o=>o.type==="separator",Y9=o=>Pn(o,"getSubmenuItems"),xae={type:"separator"},Dae=(o,c)=>{const d=Xt(o,(m,S)=>Rae(S)?S===""?m:S==="|"?m.length>0&&!Z9(m[m.length-1])?m.concat([xae]):m:Pn(c,S.toLowerCase())?m.concat([c[S.toLowerCase()]]):m:m.concat([S]),[]);return d.length>0&&Z9(d[d.length-1])&&d.pop(),d},DF=(o,c)=>{const d=o.getSubmenuItems(),m=J9(d,c),S=gr(m.menus,{[o.value]:m.items}),w=gr(m.expansions,{[o.value]:o.value});return{item:o,menus:S,expansions:w}},kae=o=>{const c=Vt(o,"value").getOrThunk(()=>Un("generated-menu-item"));return gr({value:c},o)},J9=(o,c)=>{const d=Dae(v(o)?o.split(" "):o,c);return yt(d,(m,S)=>{if(Y9(S)){const w=kae(S),T=DF(w,c);return{menus:gr(m.menus,T.menus),items:[T.item,...m.items],expansions:gr(m.expansions,T.expansions)}}else return{...m,items:[S,...m.items]}},{menus:{},expansions:{},items:[]})},X9=o=>o.search.fold(()=>({searchMode:"no-search"}),c=>({searchMode:"search-with-field",placeholder:c.placeholder})),Q9=o=>o.search.fold(()=>({searchMode:"no-search"}),c=>({searchMode:"search-with-results"})),Iw=(o,c,d,m)=>{const S=Un("primary-menu"),w=J9(o,d.shared.providers.menuItems());if(w.items.length===0)return z.none();const T=X9(m),V=Jo(S,w.items,c,d,m.isHorizontalMenu,T),F=Q9(m),W=es(w.menus,(oe,pe)=>Jo(pe,oe,c,d,!1,F)),Q=gr(W,Eg(S,V));return z.from(Yy.tieredData(S,Q,w.expansions))},fN=o=>!Pn(o,"items"),eG="data-value",tG=(o,c,d,m,S)=>Et(d,w=>fN(w)?{type:"togglemenuitem",...S?{}:{role:"option"},text:w.text,value:w.value,active:w.value===m,onAction:()=>{zn.setValue(o,w.value),xo(o,Gl,{name:c}),ns.focus(o)}}:{type:"nestedmenuitem",text:w.text,getSubmenuItems:()=>tG(o,c,w.items,m,S)}),pN=(o,c)=>Wo(o,d=>fN(d)?Gi(d.value===c,d):pN(d.items,c)),Kg=(o,c,d)=>{const m=io(o.items,W=>!fN(W)),S=c.shared.providers,w=d.bind(W=>pN(o.items,W)).orThunk(()=>gt(o.items).filter(fN)),T=o.label.map(W=>IC(W,S)),V=ws.parts.field({dom:{},factory:{sketch:W=>YI({context:o.context,uid:W.uid,text:w.map(Q=>Q.text),icon:z.none(),tooltip:z.none(),role:Gi(!m,"combobox"),...m?{}:{listRole:"listbox"},ariaLabel:o.label,fetch:(Q,oe)=>{const pe=tG(Q,o.name,o.items,zn.getValue(Q),m);oe(Iw(pe,Wm.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!1,search:z.none()}))},onSetup:M(K),getApi:M({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[qr.config({}),RC(w.map(Q=>Q.value),Q=>Na(Q.element,eG),(Q,oe)=>{pN(o.items,oe).each(pe=>{Lo(Q.element,eG,pe.value),xo(Q,Hh,{text:pe.text})})})]},"tox-listbox",c.shared)}}),F={dom:{tag:"div",classes:["tox-listboxfield"]},components:[V]};return ws.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Ut([T.toArray(),[F]]),fieldBehaviours:Tn([So.config({disabled:()=>!o.enabled||S.checkUiComponentContext(o.context).shouldDisable,onDisabled:W=>{ws.getField(W).each(So.disable)},onEnabled:W=>{ws.getField(W).each(So.enable)}})])})},kF=(o,c)=>({dom:{tag:"div",classes:o.classes},components:Et(o.items,c.shared.interpreter)}),Mae=(o,c,d)=>{const m=Et(o.items,F=>({text:c.translate(F.text),value:F.value})),S=o.label.map(F=>IC(F,c)),w=ws.parts.field({dom:{},...d.map(F=>({data:F})).getOr({}),selectAttributes:{size:o.size},options:m,factory:ane,selectBehaviours:Tn([So.config({disabled:()=>!o.enabled||c.checkUiComponentContext(o.context).shouldDisable}),qr.config({}),Qo("selectbox-change",[Ft(Mb(),(F,W)=>{xo(F,Gl,{name:o.name})})])])}),T=o.size>1?z.none():z.some(Bp("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},c.icons)),V={dom:{tag:"div",classes:["tox-selectfield"]},components:Ut([[w],T.toArray()])};return ws.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Ut([S.toArray(),[V]]),fieldBehaviours:Tn([So.config({disabled:()=>!o.enabled||c.checkUiComponentContext(o.context).shouldDisable,onDisabled:F=>{ws.getField(F).each(So.disable)},onEnabled:F=>{ws.getField(F).each(So.enable)}}),bi(()=>c.checkUiComponentContext(o.context))])})},nG=o=>{const c={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},d=S=>S in c?c[S]:1;let m=o.value.toFixed(d(o.unit));return m.indexOf(".")!==-1&&(m=m.replace(/\.?0*$/,"")),m+o.unit},hN=o=>{const d=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(o);if(d!==null){const m=parseFloat(d[1]),S=d[2];return fo.value({value:m,unit:S})}else return fo.error(o)},oG=(o,c)=>{const d={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},m=S=>Pn(d,S);return o.unit===c?z.some(o.value):m(o.unit)&&m(c)?d[o.unit]===d[c]?z.some(o.value):z.some(o.value/d[o.unit]*d[c]):z.none()},mN=o=>z.none(),sG=(o,c)=>d=>oG(d,c).map(m=>({value:m*o,unit:c})),MF=(o,c)=>{const d=hN(o).toOptional(),m=hN(c).toOptional();return bc(d,m,(S,w)=>oG(S,w.unit).map(T=>w.value/T).map(T=>sG(T,w.unit)).getOr(mN)).getOr(mN)},Q0e=(o,c)=>{let d=mN;const m=Un("ratio-event"),S=Pe=>Bp(Pe,{tag:"span",classes:["tox-icon","tox-lock-icon__"+Pe]},c.icons),w=()=>!o.enabled||c.checkUiComponentContext(o.context).shouldDisable,T=bi(()=>c.checkUiComponentContext(o.context)),V=o.label.getOr("Constrain proportions"),F=c.translate(V),W=ra.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":F,"data-mce-name":V}},components:[S("lock"),S("unlock")],buttonBehaviours:Tn([So.config({disabled:w}),T,qr.config({}),vi.config(c.tooltips.getConfig({tooltipText:F}))])}),Q=Pe=>({dom:{tag:"div",classes:["tox-form__group"]},components:Pe}),oe=Pe=>ws.parts.field({factory:jg,inputClasses:["tox-textfield"],inputBehaviours:Tn([So.config({disabled:w}),T,qr.config({}),Qo("size-input-events",[Ft(Tp(),(qe,Le)=>{xo(qe,m,{isField1:Pe})}),Ft(Mb(),(qe,Le)=>{xo(qe,Gl,{name:o.name})})])]),selectOnFocus:!1}),pe=Pe=>({dom:{tag:"label",classes:["tox-label"]},components:[gi(c.translate(Pe))]}),Ee=ra.parts.field1(Q([ws.parts.label(pe("Width")),oe(!0)])),Se=ra.parts.field2(Q([ws.parts.label(pe("Height")),oe(!1)]));return ra.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[Ee,Se,Q([pe(gf),W])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(Pe,qe,Le)=>{hN(zn.getValue(Pe)).each(Je=>{d(Je).each(nt=>{zn.setValue(qe,nG(nt))})})},coupledFieldBehaviours:Tn([So.config({disabled:w,onDisabled:Pe=>{ra.getField1(Pe).bind(ws.getField).each(So.disable),ra.getField2(Pe).bind(ws.getField).each(So.disable),ra.getLock(Pe).each(So.disable)},onEnabled:Pe=>{ra.getField1(Pe).bind(ws.getField).each(So.enable),ra.getField2(Pe).bind(ws.getField).each(So.enable),ra.getLock(Pe).each(So.enable)}}),bi(()=>c.checkUiComponentContext("mode:design")),Qo("size-input-events2",[Ft(m,(Pe,qe)=>{const Le=qe.event.isField1,Je=Le?ra.getField1(Pe):ra.getField2(Pe),nt=Le?ra.getField2(Pe):ra.getField1(Pe),Tt=Je.map(zn.getValue).getOr(""),xt=nt.map(zn.getValue).getOr("");d=MF(Tt,xt)})])])})},eye=(o,c,d)=>{const m=Nh.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[gi(c.translate(o.label))]}),S=Nh.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),w=Nh.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Nh.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:o.min,maxX:o.max,getInitialValue:M(d.getOrThunk(()=>(Math.abs(o.max)-Math.abs(o.min))/2))},components:[m,S,w],sliderBehaviours:Tn([Km.self(),ns.config({})]),onChoose:(T,V,F)=>{xo(T,Gl,{name:o.name,value:F})},onChange:(T,V,F)=>{xo(T,Gl,{name:o.name,value:F})}})},vd=(o,c)=>{const d=V=>({dom:{tag:"th",innerHtml:c.translate(V)}}),m=V=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Et(V,d)}]}),S=V=>({dom:{tag:"td",innerHtml:c.translate(V)}}),w=V=>({dom:{tag:"tr"},components:Et(V,S)}),T=V=>({dom:{tag:"tbody"},components:Et(V,w)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[m(o.header),T(o.cells)],behaviours:Tn([qr.config({}),ns.config({})])}},NF=(o,c)=>{const d=o.label.map(Se=>IC(Se,c)),m=[So.config({disabled:()=>o.disabled||c.checkUiComponentContext(o.context).shouldDisable}),bi(()=>c.checkUiComponentContext(o.context)),wo.config({mode:"execution",useEnter:o.multiline!==!0,useControlEnter:o.multiline===!0,execute:Se=>(Rs(Se,jI),z.some(!0))}),Qo("textfield-change",[Ft(Ag(),(Se,Pe)=>{xo(Se,Gl,{name:o.name})}),Ft(OT(),(Se,Pe)=>{xo(Se,Gl,{name:o.name})})]),qr.config({})],S=o.validation.map(Se=>Hm.config({getRoot:Pe=>Po(Pe.element),invalidClass:"tox-invalid",validator:{validate:Pe=>{const qe=zn.getValue(Pe),Le=Se.validator(qe);return Os.pure(Le===!0?fo.value(qe):fo.error(Le))},validateOnLoad:Se.validateOnLoad}})).toArray(),w=o.placeholder.fold(M({}),Se=>({placeholder:c.translate(Se)})),T=o.inputMode.fold(M({}),Se=>({inputmode:Se})),F={...o.spellcheck.fold(M({}),Se=>({spellcheck:Se})),...w,...T,"data-mce-name":o.name},W=ws.parts.field({tag:o.multiline===!0?"textarea":"input",...o.data.map(Se=>({data:Se})).getOr({}),inputAttributes:F,inputClasses:[o.classname],inputBehaviours:Tn(Ut([m,S])),selectOnFocus:!1,factory:jg}),Q=o.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[W]}:W,pe=(o.flex?["tox-form__group--stretched"]:[]).concat(o.maximized?["tox-form-group--maximize"]:[]),Ee=[So.config({disabled:()=>o.disabled||c.checkUiComponentContext(o.context).shouldDisable,onDisabled:Se=>{ws.getField(Se).each(So.disable)},onEnabled:Se=>{ws.getField(Se).each(So.enable)}}),bi(()=>c.checkUiComponentContext(o.context))];return UI(d,Q,pe,Ee)},Nae=(o,c,d)=>NF({name:o.name,multiline:!1,label:o.label,inputMode:o.inputMode,placeholder:o.placeholder,flex:!1,disabled:!o.enabled,classname:"tox-textfield",validation:z.none(),maximized:o.maximized,data:d,context:o.context,spellcheck:z.none()},c),rG=(o,c,d)=>NF({name:o.name,multiline:!0,label:o.label,inputMode:z.none(),placeholder:o.placeholder,flex:!0,disabled:!o.enabled,classname:"tox-textarea",validation:z.none(),maximized:o.maximized,data:d,context:o.context,spellcheck:o.spellcheck},c),iG=o=>({isEnabled:()=>!So.isDisabled(o),setEnabled:c=>So.set(o,!c),setActive:c=>{const d=o.element;c?(Rr(d,"tox-tbtn--enabled"),Lo(d,"aria-pressed",!0)):(Ii(d,"tox-tbtn--enabled"),Jr(d,"aria-pressed"))},isActive:()=>na(o.element,"tox-tbtn--enabled"),setTooltip:c=>{xo(o,xF,{text:c})},setText:c=>{xo(o,Hh,{text:c})},setIcon:c=>xo(o,O0,{icon:c})}),JI=(o,c,d,m,S=!0,w)=>{const T=o.buttonType==="bordered"?["bordered"]:[];return YI({text:o.text,icon:o.icon,tooltip:o.tooltip,ariaLabel:o.tooltip,searchable:o.search.isSome(),role:m,fetch:(V,F)=>{const W={pattern:o.search.isSome()?tae(V):""};o.fetch(Q=>{F(Iw(Q,Wm.CLOSE_ON_EXECUTE,d,{isHorizontalMenu:!1,search:o.search}))},W,iG(V))},onSetup:o.onSetup,getApi:V=>iG(V),columns:1,presets:"normal",classes:T,dropdownBehaviours:[...S?[qr.config({})]:[]],context:o.context},c,d.shared,w)},aG=(o,c,d)=>{const m=w=>T=>{const V=!T.isActive();T.setActive(V),w.storage.set(V),d.shared.getSink().each(F=>{c().getOpt(F).each(W=>{ja(W.element),xo(W,Wv,{name:w.name,value:w.storage.get()})})})},S=w=>T=>{T.setActive(w.storage.get())};return w=>{w(Et(o,T=>{const V=T.text.fold(()=>({}),F=>({text:F}));return{type:T.type,active:!1,...V,context:T.context,onAction:m(T),onSetup:S(T)}}))}},cG=o=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":o}},components:[gi(o)]}),gN=(o,c,d)=>{o.customStateIcon.each(m=>c.push(bN(m,d.shared.providers.icons,o.customStateIconTooltip.fold(()=>[],S=>[vi.config(d.shared.providers.tooltips.getConfig({tooltipText:S}))]),["tox-icon-custom-state"])))},vN=Un("leaf-label-event-id"),PF=({leaf:o,onLeafAction:c,visible:d,treeId:m,selectedId:S,backstage:w})=>{const T=o.menu.map(F=>JI(F,"tox-mbtn",w,z.none(),d)),V=[cG(o.title)];return gN(o,V,w),T.each(F=>V.push(F)),zl.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(d?["tox-tree--leaf__label--visible"]:[])},components:V,role:"treeitem",action:F=>{c(o.id),F.getSystem().broadcastOn([`update-active-item-${m}`],{value:o.id})},eventOrder:{[lc()]:[vN,"keying"]},buttonBehaviours:Tn([...d?[qr.config({})]:[],Vs.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Vf.config({channels:{[`update-active-item-${m}`]:{onReceive:(F,W)=>{(W.value===o.id?Vs.on:Vs.off)(F)}}}}),Qo(vN,[Qr((F,W)=>{S.each(Q=>{(Q===o.id?Vs.on:Vs.off)(F)})}),Ft(lc(),(F,W)=>{const Q=W.event.raw.code==="ArrowLeft",oe=W.event.raw.code==="ArrowRight";Q?(Wd(F.element,".tox-tree--directory").each(pe=>{F.getSystem().getByDom(pe).each(Ee=>{pm(pe,".tox-tree--directory__label").each(Se=>{Ee.getSystem().getByDom(Se).each(ns.focus)})})}),W.stop()):oe&&W.stop()})])])})},bN=(o,c,d,m,S)=>Bp(o,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(m||[]),behaviours:d,attributes:S},c),lG=(o,c)=>bN(o,c,[]),LF=Un("directory-label-event-id"),Pae=({directory:o,visible:c,noChildren:d,backstage:m})=>{const S=o.menu.map(V=>JI(V,"tox-mbtn",m,z.none())),w=[{dom:{tag:"div",classes:["tox-chevron"]},components:[lG("chevron-right",m.shared.providers.icons)]},cG(o.title)];gN(o,w,m),S.each(V=>{w.push(V)});const T=V=>{Wd(V.element,".tox-tree--directory").each(F=>{V.getSystem().getByDom(F).each(W=>{const Q=!Vs.isOn(W);Vs.toggle(W),xo(V,"expand-tree-node",{expanded:Q,node:o.id})})})};return zl.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(c?["tox-tree--directory__label--visible"]:[])},components:w,action:T,eventOrder:{[lc()]:[LF,"keying"]},buttonBehaviours:Tn([...c?[qr.config({})]:[],Qo(LF,[Ft(lc(),(V,F)=>{const W=F.event.raw.code==="ArrowRight",Q=F.event.raw.code==="ArrowLeft";W&&d&&F.stop(),(W||Q)&&Wd(V.element,".tox-tree--directory").each(oe=>{V.getSystem().getByDom(oe).each(pe=>{!Vs.isOn(pe)&&W||Vs.isOn(pe)&&Q?(T(V),F.stop()):Q&&!Vs.isOn(pe)&&(Wd(pe.element,".tox-tree--directory").each(Ee=>{pm(Ee,".tox-tree--directory__label").each(Se=>{pe.getSystem().getByDom(Se).each(ns.focus)})}),F.stop())})})})])])})},uG=({children:o,onLeafAction:c,visible:d,treeId:m,expandedIds:S,selectedId:w,backstage:T})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:o.map(V=>V.type==="leaf"?PF({leaf:V,selectedId:w,onLeafAction:c,visible:d,treeId:m,backstage:T}):BF({directory:V,expandedIds:S,selectedId:w,onLeafAction:c,labelTabstopping:d,treeId:m,backstage:T})),behaviours:Tn([md.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:d}),os.config({})])}),dG=Un("directory-event-id"),BF=({directory:o,onLeafAction:c,labelTabstopping:d,treeId:m,backstage:S,expandedIds:w,selectedId:T})=>{const{children:V}=o,F=mn(w),W=oe=>V.map(pe=>pe.type==="leaf"?PF({leaf:pe,selectedId:T,onLeafAction:c,visible:oe,treeId:m,backstage:S}):BF({directory:pe,expandedIds:F.get(),selectedId:T,onLeafAction:c,labelTabstopping:oe,treeId:m,backstage:S})),Q=w.includes(o.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[Pae({directory:o,visible:d,noChildren:o.children.length===0,backstage:S}),uG({children:V,expandedIds:w,selectedId:T,onLeafAction:c,visible:Q,treeId:m,backstage:S})],behaviours:Tn([Qo(dG,[Qr((oe,pe)=>{Vs.set(oe,Q)}),Ft("expand-tree-node",(oe,pe)=>{const{expanded:Ee,node:Se}=pe.event;F.set(Ee?[...F.get(),Se]:F.get().filter(Pe=>Pe!==Se))})]),Vs.config({...o.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(oe,pe)=>{const Ee=oe.components()[1],Se=W(pe);pe?md.grow(Ee):md.shrink(Ee),os.set(Ee,Se)}})])}},fG=Un("tree-event-id"),Lae=(o,c)=>{const d=o.onLeafAction.getOr(K),m=o.onToggleExpand.getOr(K),S=o.defaultExpandedIds,w=mn(S),T=mn(o.defaultSelectedId),V=Un("tree-id"),F=(W,Q)=>o.items.map(oe=>oe.type==="leaf"?PF({leaf:oe,selectedId:W,onLeafAction:d,visible:!0,treeId:V,backstage:c}):BF({directory:oe,selectedId:W,onLeafAction:d,expandedIds:Q,labelTabstopping:!0,treeId:V,backstage:c}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:F(T.get(),w.get()),behaviours:Tn([wo.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Qo(fG,[Ft("expand-tree-node",(W,Q)=>{const{expanded:oe,node:pe}=Q.event;w.set(oe?[...w.get(),pe]:w.get().filter(Ee=>Ee!==pe)),m(w.get(),{expanded:oe,node:pe})})]),Vf.config({channels:{[`update-active-item-${V}`]:{onReceive:(W,Q)=>{T.set(z.some(Q.value)),os.set(W,F(z.some(Q.value),w.get()))}}}}),os.config({})])}},XI=(o,c,d=[],m,S,w,T)=>{const V=c.fold(()=>({}),Q=>({action:Q})),F={buttonBehaviours:Tn([Hp.item(()=>!o.enabled||T.checkUiComponentContext(o.context).shouldDisable),bi(()=>T.checkUiComponentContext(o.context)),qr.config({}),...w.map(Q=>vi.config(T.tooltips.getConfig({tooltipText:T.translate(Q)}))).toArray(),Qo("button press",[qb("click")])].concat(d)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...V},W=gr(F,{dom:m});return gr(W,{components:S})},tye=(o,c,d,m=[],S)=>{const w=o.tooltip.map(W=>({"aria-label":d.translate(W)})).getOr({}),T={tag:"button",classes:["tox-tbtn"],attributes:{...w,"data-mce-name":S}},V=o.icon.map(W=>Ow(W,d.icons)),F=_w([V]);return XI(o,c,m,T,F,o.tooltip,d)},pG=o=>{switch(o){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},hG=(o,c,d,m=[],S=[])=>{const w=d.translate(o.text),T=o.icon.map(Ee=>Ow(Ee,d.icons)),V=[T.getOrThunk(()=>gi(w))],F=o.buttonType.getOr(!o.primary&&!o.borderless?"secondary":"primary"),oe={tag:"button",classes:[...pG(F),...T.isSome()?["tox-button--icon"]:[],...o.borderless?["tox-button--naked"]:[],...S],attributes:{"aria-label":w,"data-mce-name":o.text}},pe=o.icon.map(M(w));return XI(o,c,m,oe,V,pe,d)},mG=(o,c,d,m=[],S=[])=>{const w=hG(o,z.some(c),d,m,S);return zl.sketch(w)},VF=(o,c)=>d=>{c==="custom"?xo(d,Wv,{name:o,value:{}}):c==="submit"?Rs(d,jI):c==="cancel"?Rs(d,p1):console.error("Unknown button type: ",c)},Bae=(o,c)=>c==="menu",Vae=(o,c)=>c==="custom"||c==="cancel"||c==="submit",Hae=(o,c)=>c==="togglebutton",Fae=(o,c,d)=>{var m,S;const w=o.icon.map(nt=>m1(nt,c.icons)).map(tr),T=nt=>{xo(nt,Wv,{name:o.name,value:{setIcon:Tt=>{w.map(xt=>xt.getOpt(nt).each(jn=>{os.set(jn,[m1(Tt,c.icons)])}))}}})},V=o.buttonType.getOr(o.primary?"primary":"secondary"),F={...o,name:(m=o.name)!==null&&m!==void 0?m:"",tooltip:o.tooltip,enabled:(S=o.enabled)!==null&&S!==void 0?S:!1},W=F.tooltip.or(o.text).map(nt=>({"aria-label":c.translate(nt)})).getOr({}),Q=pG(V??"secondary"),oe=o.icon.isSome()&&o.text.isSome(),pe={tag:"button",classes:[...Q.concat(o.icon.isSome()?["tox-button--icon"]:[]),...o.active?["tox-button--enabled"]:[],...oe?["tox-button--icon-and-text"]:[]],attributes:{...W,...B(d)?{"data-mce-name":d}:{}}},Ee=[],Se=c.translate(o.text.getOr("")),Pe=gi(Se),Le=[..._w([w.map(nt=>nt.asSpec())]),...o.text.isSome()?[Pe]:[]],Je=XI(F,z.some(T),Ee,pe,Le,o.tooltip,c);return zl.sketch(Je)},QI=(o,c,d)=>{if(Bae(o,c)){const m=()=>T,S=o,w={...o,buttonType:"default",type:"menubutton",search:z.none(),onSetup:V=>(V.setEnabled(o.enabled),K),fetch:aG(S.items,m,d)},T=tr(JI(w,"tox-tbtn",d,z.none(),!0,o.text.or(o.tooltip).getOrUndefined()));return T.asSpec()}else if(Vae(o,c)){const m=VF(o.name,c),S={...o,context:c==="cancel"?"any":o.context,borderless:!1};return mG(S,m,d.shared.providers,[])}else{if(Hae(o,c))return Fae(o,d.shared.providers,o.text.or(o.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",c),new Error("Unknown footer button type")}},$ae=(o,c)=>{const d=VF(o.name,"custom");return iae(z.none(),ws.parts.field({factory:zl,...hG(o,z.some(d),c,[rN(""),Km.self()])}))},Uae={type:"separator"},gG=o=>({type:"menuitem",value:o.url,text:o.title,meta:{attach:o.attach},onAction:K}),yN=(o,c)=>({type:"menuitem",value:c,text:o,meta:{attach:void 0},onAction:K}),Rw=o=>Et(o,gG),jae=(o,c)=>Fo(c,d=>d.type===o),HF=(o,c)=>Rw(jae(o,c)),vG=o=>HF("header",o.targets),bG=o=>HF("anchor",o.targets),zae=o=>z.from(o.anchorTop).map(c=>yN("<top>",c)).toArray(),yG=o=>z.from(o.anchorBottom).map(c=>yN("<bottom>",c)).toArray(),SG=o=>Et(o,c=>yN(c,c)),Wae=o=>Xt(o,(c,d)=>c.length===0||d.length===0?c.concat(d):c.concat(Uae,d),[]),FF=(o,c)=>{const d=o.toLowerCase();return Fo(c,m=>{var S;const w=m.meta!==void 0&&m.meta.text!==void 0?m.meta.text:m.text,T=(S=m.value)!==null&&S!==void 0?S:"";return Ar(w.toLowerCase(),d)||Ar(T.toLowerCase(),d)})},CG=(o,c,d)=>{var m,S;const w=zn.getValue(c),T=(S=(m=w==null?void 0:w.meta)===null||m===void 0?void 0:m.text)!==null&&S!==void 0?S:w.value;return d.getLinkInformation().fold(()=>[],F=>{const W=FF(T,SG(d.getHistory(o)));return o==="file"?Wae([W,FF(T,vG(F)),FF(T,Ut([zae(F),bG(F),yG(F)]))]):W})},$F=Un("aria-invalid"),Gae=(o,c,d,m)=>{const S=c.shared.providers,w=Je=>{const nt=zn.getValue(Je);d.addToHistory(nt.value,o.filetype)},T={...m.map(Je=>({initialData:Je})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{type:"url"},minChars:0,responseTime:0,fetch:Je=>{const nt=CG(o.filetype,Je,d),Tt=Iw(nt,Wm.BUBBLE_TO_SANDBOX,c,{isHorizontalMenu:!1,search:z.none()});return Os.pure(Tt)},getHotspot:Je=>Se.getOpt(Je),onSetValue:(Je,nt)=>{Je.hasConfigured(Hm)&&Hm.run(Je).get(K)},typeaheadBehaviours:Tn([...d.getValidationHandler().map(Je=>Hm.config({getRoot:nt=>Po(nt.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(nt,Tt)=>{Q.getOpt(nt).each(xt=>{Lo(xt.element,"title",S.translate(Tt))})}},validator:{validate:nt=>{const Tt=zn.getValue(nt);return Yu.nu(xt=>{Je({type:o.filetype,url:Tt.value},jn=>{if(jn.status==="invalid"){Lo(nt.element,"aria-errormessage",$F);const dn=fo.error(jn.message);xt(dn)}else{Jr(nt.element,"aria-errormessage");const dn=fo.value(jn.message);xt(dn)}})})},validateOnLoad:!1}})).toArray(),So.config({disabled:()=>!o.enabled||S.checkUiComponentContext(o.context).shouldDisable}),qr.config({}),Qo("urlinput-events",[Ft(Ag(),Je=>{const nt=au(Je.element),Tt=nt.trim();Tt!==nt&&Af(Je.element,Tt),o.filetype==="file"&&xo(Je,Gl,{name:o.name})}),Ft(Mb(),Je=>{xo(Je,Gl,{name:o.name}),w(Je)}),Ft(OT(),Je=>{xo(Je,Gl,{name:o.name}),w(Je)})])]),eventOrder:{[Ag()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:Je=>Je.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:c.shared.getSink,parts:{menu:fw(!1,1,"normal")},onExecute:(Je,nt,Tt)=>{xo(nt,jI,{})},onItemExecute:(Je,nt,Tt,xt)=>{w(Je),xo(Je,Gl,{name:o.name})}},V=ws.parts.field({...T,factory:Noe}),F=o.label.map(Je=>IC(Je,S)),Q=tr(((Je,nt,Tt=Je,xt=Je)=>Bp(Tt,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+Je],attributes:{title:S.translate(xt),"aria-live":"polite",...nt.fold(()=>({}),jn=>({id:jn}))}},S.icons))("invalid",z.some($F),"warning")),oe=tr({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[Q.asSpec()]}),pe=d.getUrlPicker(o.filetype),Ee=Un("browser.url.event"),Se=tr({dom:{tag:"div",classes:["tox-control-wrap"]},components:[V,oe.asSpec()],behaviours:Tn([So.config({disabled:()=>!o.enabled||S.checkUiComponentContext(o.context).shouldDisable})])}),Pe=tr(mG({context:o.context,name:o.name,icon:z.some("browse"),text:o.picker_text.or(o.label).getOr(""),enabled:o.enabled,primary:!1,buttonType:z.none(),borderless:!0},Je=>Rs(Je,Ee),S,[],["tox-browse-url"])),qe=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Ut([[Se.asSpec()],pe.map(()=>Pe.asSpec()).toArray()])}),Le=Je=>{zt.getCurrent(Je).each(nt=>{const Tt=zn.getValue(nt),xt={fieldname:o.name,...Tt};pe.each(jn=>{jn(xt).get(dn=>{zn.setValue(nt,dn),xo(Je,Gl,{name:o.name})})})})};return ws.sketch({dom:A9(),components:F.toArray().concat([qe()]),fieldBehaviours:Tn([So.config({disabled:()=>!o.enabled||S.checkUiComponentContext(o.context).shouldDisable,onDisabled:Je=>{ws.getField(Je).each(So.disable),Pe.getOpt(Je).each(So.disable)},onEnabled:Je=>{ws.getField(Je).each(So.enable),Pe.getOpt(Je).each(So.enable)}}),bi(()=>S.checkUiComponentContext(o.context)),Qo("url-input-events",[Ft(Ee,Le)])])})},qae=(o,c)=>{const d=KV(o.icon,c.icons);return Vm.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${o.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:o.url?void 0:d},components:o.url?[zl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:d,attributes:{title:c.translate(o.iconTooltip)}},action:m=>xo(m,Wv,{name:"alert-banner",value:o.url}),buttonBehaviours:Tn([Dz()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:c.translate(o.text)}}]})},Kae=(o,c,d)=>{const m=F=>(F.element.dom.click(),z.some(!0)),S=ws.parts.field({factory:{sketch:we},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Tn([Km.self(),So.config({disabled:()=>!o.enabled||c.checkUiComponentContext(o.context).shouldDisable,onDisabled:F=>{Po(F.element).each(W=>Rr(W,"tox-checkbox--disabled"))},onEnabled:F=>{Po(F.element).each(W=>Ii(W,"tox-checkbox--disabled"))}}),qr.config({}),ns.config({}),fae(d,X1,vp),wo.config({mode:"special",onEnter:m,onSpace:m,stopSpaceKeyup:!0}),Qo("checkbox-events",[Ft(Mb(),(F,W)=>{xo(F,Gl,{name:o.name})})])])}),w=ws.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[gi(c.translate(o.label))],behaviours:Tn([ow.config({})])}),T=F=>Bp(F==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+F]},c.icons),V=tr({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[T("checked"),T("unchecked")]});return ws.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[S,V.asSpec(),w],fieldBehaviours:Tn([So.config({disabled:()=>!o.enabled||c.checkUiComponentContext(o.context).shouldDisable}),bi(()=>c.checkUiComponentContext(o.context))])})},Zae=(o,c)=>{const d=["tox-form__group",...o.stretched?["tox-form__group--stretched"]:[]],m=Qo("htmlpanel",[Qr(S=>{o.onInit(S.element.dom)})]);return o.presets==="presentation"?Vm.sketch({dom:{tag:"div",classes:d,innerHtml:o.html},containerBehaviours:Tn([vi.config({...c.tooltips.getConfig({tooltipText:"",onShow:S=>{yr(S.element,"[data-mce-tooltip]:hover").orThunk(()=>ea(S.element)).each(w=>{ic(w,"data-mce-tooltip").each(T=>{vi.setComponents(S,c.tooltips.getComponents({tooltipText:T}))})})}}),mode:"children-normal",anchor:S=>({type:"node",node:yr(S.element,"[data-mce-tooltip]:hover").orThunk(()=>ea(S.element).filter(w=>ic(w,"data-mce-tooltip").isSome())),root:S.element,layouts:{onLtr:M([Ea,uc,Ha,Xc,hi,Za]),onRtl:M([Ea,uc,Ha,Xc,hi,Za])},bubble:Xd(0,-2,{})})}),m])}):Vm.sketch({dom:{tag:"div",classes:d,innerHtml:o.html,attributes:{role:"document"}},containerBehaviours:Tn([qr.config({}),ns.config({}),m])})},pc=o=>(c,d,m,S,w)=>Vt(d,"name").fold(()=>o(d,S,z.none(),w),T=>c.field(T,o(d,S,Vt(m,T),w))),Yae=o=>(c,d,m,S,w)=>{const T=gr(d,{source:"dynamic"});return pc(o)(c,T,m,S,w)},Jae={bar:pc((o,c)=>rae(o,c.shared)),collection:pc((o,c,d)=>cae(o,c.shared.providers,d)),alertbanner:pc((o,c)=>qae(o,c.shared.providers)),input:pc((o,c,d)=>Nae(o,c.shared.providers,d)),textarea:pc((o,c,d)=>rG(o,c.shared.providers,d)),label:pc((o,c,d,m)=>uN(o,c.shared,m)),iframe:Yae((o,c,d)=>W9(o,c.shared.providers,d)),button:pc((o,c)=>$ae(o,c.shared.providers)),checkbox:pc((o,c,d)=>Kae(o,c.shared.providers,d)),colorinput:pc((o,c,d)=>uae(o,c.shared,c.colorinput,d)),colorpicker:pc((o,c,d)=>vae(o,c.shared.providers,d)),dropzone:pc((o,c,d)=>Sae(o,c.shared.providers,d)),grid:pc((o,c)=>Cae(o,c.shared)),listbox:pc((o,c,d)=>Kg(o,c,d)),selectbox:pc((o,c,d)=>Mae(o,c.shared.providers,d)),sizeinput:pc((o,c)=>Q0e(o,c.shared.providers)),slider:pc((o,c,d)=>eye(o,c.shared.providers,d)),urlinput:pc((o,c,d)=>Gae(o,c,c.urlinput,d)),customeditor:pc(yae),htmlpanel:pc((o,c)=>Zae(o,c.shared.providers)),imagepreview:pc((o,c,d)=>Iae(o,d)),table:pc((o,c)=>vd(o,c.shared.providers)),tree:pc((o,c)=>Lae(o,c)),panel:pc((o,c)=>kF(o,c))},Xae={field:(o,c)=>c,record:M([])},EG=(o,c,d,m,S)=>{const w=gr(m,{shared:{interpreter:T=>UF(o,T,d,w,S)}});return UF(o,c,d,w,S)},UF=(o,c,d,m,S)=>Vt(Jae,c.type).fold(()=>(console.error(`Unknown factory type "${c.type}", defaulting to container: `,c),c),w=>w(o,c,d,m,S)),_G=(o,c,d,m)=>UF(Xae,o,c,d,m),SN={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},Qae=(o,c,d)=>{const S={maxHeightFunction:Gb()},w=()=>({type:"node",root:ji(Ei(o())),node:z.from(o()),bubble:Xd(12,12,SN),layouts:{onRtl:()=>[Pt],onLtr:()=>[Oy]},overrides:S}),T=()=>({type:"hotspot",hotspot:c(),bubble:Xd(-12,12,SN),layouts:{onRtl:()=>[Ha,hi,Ea],onLtr:()=>[hi,Ha,Ea]},overrides:S});return()=>d()?w():T()},wG=(o,c,d,m)=>{const w={maxHeightFunction:Gb()},T=()=>({type:"node",root:ji(Ei(c())),node:z.from(c()),bubble:Xd(12,12,SN),layouts:{onRtl:()=>[Bu],onLtr:()=>[Bu]},overrides:w}),V=()=>o?{type:"node",root:ji(Ei(c())),node:z.from(c()),bubble:Xd(0,-pa(c()),SN),layouts:{onRtl:()=>[uc],onLtr:()=>[uc]},overrides:w}:{type:"hotspot",hotspot:d(),bubble:Xd(0,0,SN),layouts:{onRtl:()=>[uc],onLtr:()=>[uc]},overrides:w};return()=>m()?T():V()},AG=(o,c,d)=>{const m=()=>({type:"node",root:ji(Ei(o())),node:z.from(o()),layouts:{onRtl:()=>[Bu],onLtr:()=>[Bu]}}),S=()=>({type:"hotspot",hotspot:c(),layouts:{onRtl:()=>[Ea],onLtr:()=>[Ea]}});return()=>d()?m():S()},CN=(o,c)=>()=>({type:"selection",root:c(),getSelection:()=>{const d=o.selection.getRng(),m=o.model.table.getSelectedCells();if(m.length>1){const S=m[0],w=m[m.length-1],T={firstCell:kn.fromDom(S),lastCell:kn.fromDom(w)};return z.some(T)}return z.some(qd.range(kn.fromDom(d.startContainer),d.startOffset,kn.fromDom(d.endContainer),d.endOffset))}}),TG=o=>c=>({type:"node",root:o(),node:c}),ece=(o,c,d,m)=>{const S=uw(o),w=()=>kn.fromDom(o.getBody()),T=()=>kn.fromDom(o.getContentAreaContainer()),V=()=>S||!m();return{inlineDialog:Qae(T,c,V),inlineBottomDialog:wG(o.inline,T,d,V),banner:AG(T,c,V),cursor:CN(o,w),node:TG(w)}},tce=o=>(c,d)=>{tN(o)(c,d)},nce=o=>()=>sF(o),oce=o=>c=>HI(o,c),sce=o=>c=>e9(o,c),rce=o=>({colorPicker:tce(o),hasCustomColors:nce(o),getColors:oce(o),getColorCols:sce(o)}),ice=o=>()=>rz(o),OG=o=>({isDraggableModal:ice(o)}),IG=o=>{const c=mn(kV(o)?"bottom":"top");return{isPositionedAtTop:()=>c.get()==="top",getDockingMode:c.get,setDockingMode:c.set}},RG=o=>wn(o,"items"),jF=o=>wn(o,"format"),xG=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],ace=o=>Pn(o,"items"),cce=o=>Pn(o,"block"),xC=o=>Pn(o,"inline"),DG=o=>Pn(o,"selector"),xw=o=>Xt(o,(c,d)=>{if(ace(d)){const m=xw(d.items);return{customFormats:c.customFormats.concat(m.customFormats),formats:c.formats.concat([{title:d.title,items:m.formats}])}}else if(xC(d)||cce(d)||DG(d)){const S=`custom-${v(d.name)?d.name:d.title.toLowerCase()}`;return{customFormats:c.customFormats.concat([{name:S,format:d}]),formats:c.formats.concat([{title:d.title,format:S,icon:d.icon}])}}else return{...c,formats:c.formats.concat(d)}},{customFormats:[],formats:[]}),EN=(o,c)=>{const d=xw(c),m=S=>{Jt(S,w=>{o.formatter.has(w.name)||o.formatter.register(w.name,w.format)})};return o.formatter?m(d.customFormats):o.on("init",()=>{m(d.customFormats)}),d.formats},zF=o=>Wj(o).map(c=>{const d=EN(o,c);return Gj(o)?xG.concat(d):d}).getOr(xG),kG=o=>{const c=Jn(o);return c.length===1&&qt(c,"title")},WF=(o,c,d)=>({...o,type:"formatter",isSelected:c(o.format),getStylePreview:d(o.format)}),lce=(o,c,d,m)=>{const S=F=>WF(F,d,m),w=F=>{const W=V(F.items);return{...F,type:"submenu",getStyleItems:M(W)}},T=F=>{const W=v(F.name)?F.name:Un(F.title),Q=`custom-${W}`,oe={...F,type:"formatter",format:Q,isSelected:d(Q),getStylePreview:m(Q)};return o.formatter.register(W,oe),oe},V=F=>Et(F,W=>RG(W)?w(W):jF(W)?S(W):kG(W)?{...W,type:"separator"}:T(W));return V(c)},uce=o=>{const c=V=>()=>o.formatter.match(V),d=V=>()=>{const F=o.formatter.get(V);return F!==void 0?z.some({tag:F.length>0&&(F[0].inline||F[0].block)||"div",styles:o.dom.parseStyle(o.formatter.getCssText(V))}):z.none()},m=mn([]),S=mn([]),w=mn(!1);return o.on("PreInit",V=>{const F=zF(o),W=lce(o,F,c,d);m.set(W)}),o.on("addStyleModifications",V=>{const F=lce(o,V.items,c,d);S.set(F),w.set(V.replace)}),{getData:()=>{const V=w.get()?[]:m.get(),F=S.get();return V.concat(F)}}},dce=o=>{let m=0;const S=()=>m>0,w=V=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[gi(V.tooltipText)]}];return{getConfig:V=>({delayForShow:()=>S()?60:300,delayForHide:M(300),exclusive:!0,lazySink:o,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:w(V),onShow:(F,W)=>{m++,V.onShow&&V.onShow(F,W)},onHide:(F,W)=>{m--,V.onHide&&V.onHide(F,W)},onSetup:V.onSetup}),getComponents:w}},fce=o=>B(o)&&o.nodeType===1,pce=T0.trim,MG=o=>c=>!!(fce(c)&&(c.contentEditable===o||c.getAttribute("data-mce-contenteditable")===o)),hce=MG("true"),Dw=MG("false"),kw=(o,c,d,m,S)=>({type:o,title:c,url:d,level:m,attach:S}),GF=o=>{let c=o;for(;c=c.parentNode;){const d=c.contentEditable;if(d&&d!=="inherit")return hce(c)}return!1},mce=(o,c)=>Et(Ga(kn.fromDom(c),o),d=>d.dom),NG=o=>o.innerText||o.textContent,qF=o=>o.id?o.id:Un("h"),gce=o=>o&&o.nodeName==="A"&&(o.id||o.name)!==void 0,eR=o=>gce(o)&&PG(o),KF=o=>o&&/^(H[1-6])$/.test(o.nodeName),PG=o=>GF(o)&&!Dw(o),vce=o=>KF(o)&&PG(o),bce=o=>KF(o)?parseInt(o.nodeName.substr(1),10):0,yce=o=>{var c;const d=qF(o),m=()=>{o.id=d};return kw("header",(c=NG(o))!==null&&c!==void 0?c:"","#"+d,bce(o),m)},Sce=o=>{const c=o.id||o.name,d=NG(o);return kw("anchor",d||"#"+c,"#"+c,0,K)},Cce=o=>Et(Fo(o,vce),yce),LG=o=>Et(Fo(o,eR),Sce),BG=o=>mce("h1,h2,h3,h4,h5,h6,a:not([href])",o),ZF=o=>pce(o.title).length>0,_N={find:o=>{const c=BG(o);return Fo(Cce(c).concat(LG(c)),ZF)}},DC="tinymce-url-history",YF=5,VG=o=>v(o)&&/^https?/.test(o),Ece=o=>A(o)&&o.length<=YF&&dt(o,VG),HG=o=>y(o)&&$n(o,c=>!Ece(c)).isNone(),FG=()=>{const o=A0.getItem(DC);if(o===null)return{};let c;try{c=JSON.parse(o)}catch(d){if(d instanceof SyntaxError)return console.log("Local storage "+DC+" was not valid JSON",d),{};throw d}return HG(c)?c:(console.log("Local storage "+DC+" was not valid format",c),{})},JF=o=>{if(!HG(o))throw new Error(`Bad format for history:
`+JSON.stringify(o));A0.setItem(DC,JSON.stringify(o))},_ce=o=>{const c=FG();return Vt(c,o).getOr([])},XF=(o,c)=>{if(!VG(o))return;const d=FG(),m=Vt(d,c).getOr([]),S=Fo(m,w=>w!==o);d[c]=[o].concat(S).slice(0,YF),JF(d)},$G=o=>!!o,QF=o=>es(T0.makeMap(o,/[, ]/),$G),e$=o=>z.from(ez(o)),wce=o=>{const c=z.from(oz(o)).filter($G).map(QF);return e$(o).fold(Ke,d=>c.fold(Ze,m=>Jn(m).length>0?m:!1))},Ace=(o,c)=>{const d=wce(o);return k(d)?d?e$(o):z.none():d[c]?e$(o):z.none()},Tce=(o,c)=>Ace(o,c).map(d=>m=>Os.nu(S=>{const w=(V,F)=>{if(!v(V))throw new Error("Expected value to be string");if(F!==void 0&&!y(F))throw new Error("Expected meta to be a object");S({value:V,meta:F})},T={filetype:c,fieldname:m.fieldname,...z.from(m.meta).getOr({})};d.call(o,w,m.value,T)})),UG=o=>z.from(o).filter(v).getOrUndefined(),oye=o=>IV(o)?z.some({targets:_N.find(o.getBody()),anchorTop:UG(sz(o)),anchorBottom:UG(RV(o))}):z.none(),sye=o=>z.from(tz(o)),jG=o=>({getHistory:_ce,addToHistory:XF,getLinkInformation:()=>oye(o),getValidationHandler:()=>sye(o),getUrlPicker:c=>Tce(o,c)}),Oce=(o,c,d,m)=>{const S=mn(!1),w=IG(c),T={icons:()=>c.ui.registry.getAll().icons,menuItems:()=>c.ui.registry.getAll().menuItems,translate:wa.translate,isDisabled:()=>!c.ui.isEnabled(),getOption:c.options.get,tooltips:dce(o.dialog),checkUiComponentContext:Le=>{if(oM(c))return{contextType:"disabled",shouldDisable:!0};const[Je,nt=""]=Le.split(":"),Tt=c.ui.registry.getAll().contexts,xt=Vt(Tt,Je).fold(()=>Vt(Tt,"mode").map(jn=>jn("design")).getOr(!1),jn=>nt.charAt(0)==="!"?!jn(nt.slice(1)):jn(nt));return{contextType:Je,shouldDisable:!xt}}},V=jG(c),F=uce(c),W=rce(c),Q=OG(c),oe=()=>S.get(),pe=Le=>S.set(Le),Ee={shared:{providers:T,anchors:ece(c,d,m,w.isPositionedAtTop),header:w},urlinput:V,styles:F,colorinput:W,dialog:Q,isContextMenuOpen:oe,setContextMenuState:pe},Se=Le=>z.none(),Pe={...Ee,shared:{...Ee.shared,interpreter:Le=>_G(Le,{},Pe,Se),getSink:o.popup}},qe={...Ee,shared:{...Ee.shared,interpreter:Le=>_G(Le,{},qe,Se),getSink:o.dialog}};return{popup:Pe,dialog:qe}},Rce={skipFocus:"ToggleToolbarDrawer skipFocus is deprecated see migration guide: https://www.tiny.cloud/docs/tinymce/latest/migration-from-7x/"},xce=o=>{console.warn(Rce[o],new Error().stack)},Dce=(o,c,d)=>{const m=(an,Ro)=>{Jt([c,...d],mo=>{mo.broadcastEvent(an,Ro)})},S=(an,Ro)=>{Jt([c,...d],mo=>{mo.broadcastOn([an],Ro)})},w=an=>S(Mg(),{target:an.target}),T=an=>{S(OS(),{closedTooltip:()=>{an.preventDefault()}})},V=rc(),F=vr(V,"touchstart",w),W=vr(V,"touchmove",an=>m(RT(),an)),Q=vr(V,"touchend",an=>m(vx(),an)),oe=vr(V,"mousedown",w),pe=vr(V,"mouseup",an=>{an.raw.button===0&&S(Om(),{target:an.target})}),Ee=an=>S(Mg(),{target:kn.fromDom(an.target)}),Se=an=>{an.button===0&&S(Om(),{target:kn.fromDom(an.target)})},Pe=()=>{Jt(o.editorManager.get(),an=>{o!==an&&an.dispatch("DismissPopups",{relatedTarget:o})})},qe=an=>m(Vb(),xl(an)),Le=an=>{S(hl(),{}),m(Hb(),xl(an))},Je=Ei(kn.fromDom(o.getElement())),nt=nd(Je,"scroll",an=>{requestAnimationFrame(()=>{const Ro=o.getContainer();if(Ro!=null){const Ns=Ph(o,c.element).map(Vo=>[Vo.element,...Vo.others]).getOr([]);io(Ns,Vo=>de(Vo,an.target))&&(o.dispatch("ElementScroll",{target:an.target.dom}),m(yx(),an))}})}),Tt=()=>S(hl(),{}),xt=an=>{an.state&&S(Mg(),{target:kn.fromDom(o.getContainer())})},jn=an=>{S(Mg(),{target:kn.fromDom(an.relatedTarget.getContainer())})},dn=an=>o.dispatch("focusin",an),pn=an=>o.dispatch("focusout",an);o.on("PostRender",()=>{o.on("click",Ee),o.on("tap",Ee),o.on("mouseup",Se),o.on("mousedown",Pe),o.on("ScrollWindow",qe),o.on("ResizeWindow",Le),o.on("ResizeEditor",Tt),o.on("AfterProgressState",xt),o.on("DismissPopups",jn),o.on("CloseActiveTooltips",T),Jt([c,...d],an=>{an.element.dom.addEventListener("focusin",dn),an.element.dom.addEventListener("focusout",pn)})}),o.on("remove",()=>{o.off("click",Ee),o.off("tap",Ee),o.off("mouseup",Se),o.off("mousedown",Pe),o.off("ScrollWindow",qe),o.off("ResizeWindow",Le),o.off("ResizeEditor",Tt),o.off("AfterProgressState",xt),o.off("DismissPopups",jn),o.off("CloseActiveTooltips",T),Jt([c,...d],an=>{an.element.dom.removeEventListener("focusin",dn),an.element.dom.removeEventListener("focusout",pn)}),oe.unbind(),F.unbind(),W.unbind(),Q.unbind(),pe.unbind(),nt.unbind()}),o.on("detach",()=>{Jt([c,...d],UD),Jt([c,...d],an=>an.destroy())})},kce=K,Mce=Ke,t$=M([]);var Nce=Object.freeze({__proto__:null,setup:kce,isDocked:Mce,getBehaviours:t$});const n$=M(Un("toolbar-height-change")),Gv={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},Pce="tox-tinymce--toolbar-sticky-on",Lce="tox-tinymce--toolbar-sticky-off",zG=(o,c)=>{const d=ze(c),S=cn(c).dom.innerHeight,w=zi(d),T=kn.fromDom(o.elm),V=gh(T),F=fa(T),W=V.y,Q=W+F,oe=Gc(c),pe=fa(c),Ee=oe.top,Se=Ee+pe,Pe=Math.abs(Ee-w.top)<2,qe=Math.abs(Se-(w.top+S))<2;if(Pe&&W<Se)fh(w.left,W-pe,d);else if(qe&&Q>Ee){const Le=W-S+F+pe;fh(w.left,Le,d)}},tR=(o,c)=>qt(Mi.getModes(o),c),o$=o=>{const c=m=>pa(m)+(parseInt(Xr(m,"margin-top"),10)||0)+(parseInt(Xr(m,"margin-bottom"),10)||0),d=o.element;Po(d).each(m=>{const S="padding-"+Mi.getModes(o)[0];if(Mi.isDocked(o)){const w=Tc(m);jo(d,"width",w+"px"),jo(m,S,c(d)+"px")}else Ds(d,"width"),Ds(m,S)})},WG=(o,c)=>{c?(Ii(o,Gv.fadeOutClass),Sp(o,[Gv.transitionClass,Gv.fadeInClass])):(Ii(o,Gv.fadeInClass),Sp(o,[Gv.fadeOutClass,Gv.transitionClass]))},Zf=(o,c)=>{const d=kn.fromDom(o.getContainer());c?(Rr(d,Pce),Ii(d,Lce)):(Rr(d,Lce),Ii(d,Pce))},Bce=(o,c)=>{const d=ze(c);za(d).filter(m=>!de(c,m)).filter(m=>de(m,kn.fromDom(d.dom.body))||ge(o,m)).each(()=>ja(c))},GG=(o,c)=>ea(o).orThunk(()=>c().toOptional().bind(d=>ea(d.element))),qG=(o,c,d)=>{o.inline||(c.header.isPositionedAtTop()||o.on("ResizeEditor",()=>{d().each(Mi.reset)}),o.on("ResizeWindow ResizeEditor",()=>{d().each(o$)}),o.on("SkinLoaded",()=>{d().each(m=>{Mi.isDocked(m)?Mi.reset(m):Mi.refresh(m)})}),o.on("FullscreenStateChanged",()=>{d().each(Mi.reset)})),o.on("AfterScrollIntoView",m=>{d().each(S=>{Mi.refresh(S);const w=S.element;uh(w)&&zG(m,w)})}),o.on("PostRender",()=>{Zf(o,!1)})},Vce=o=>o().map(Mi.isDocked).getOr(!1),nR=()=>[Vf.config({channels:{[n$()]:{onReceive:o$}}})],KG=(o,c)=>{const d=$o(),m=c.getSink,S=V=>{m().each(F=>V(F.element))},w=V=>{o.inline||o$(V),Zf(o,Mi.isDocked(V)),V.getSystem().broadcastOn([hl()],{}),m().each(F=>F.getSystem().broadcastOn([hl()],{}))},T=o.inline?[]:nR();return[ns.config({}),Mi.config({contextual:{lazyContext:V=>{const F=pa(V.element),W=o.inline?o.getContentAreaContainer():o.getContainer();return z.from(W).map(Q=>{const oe=Sa(kn.fromDom(Q));return Ph(o,V.element).fold(()=>{const Ee=oe.height-F,Se=oe.y+(tR(V,"top")?0:F);return La(oe.x,Se,oe.width,Ee)},Ee=>{const Se=fy(oe,e1(Ee)),Pe=tR(V,"top")?Se.y:Se.y+F;return La(Se.x,Pe,Se.width,Se.height-F)})})},onShow:()=>{S(V=>WG(V,!0))},onShown:V=>{S(F=>Kc(F,[Gv.transitionClass,Gv.fadeInClass])),d.get().each(F=>{Bce(V.element,F),d.clear()})},onHide:V=>{GG(V.element,m).fold(d.clear,d.set),S(F=>WG(F,!1))},onHidden:()=>{S(V=>Kc(V,[Gv.transitionClass]))},...Gv},lazyViewport:V=>Ph(o,V.element).fold(()=>{const W=kl(),Q=Xj(o),oe=W.y+(tR(V,"top")&&!$oe(o)?Q:0),pe=W.height-(tR(V,"bottom")?Q:0);return{bounds:La(W.x,oe,W.width,pe),optScrollEnv:z.none()}},W=>({bounds:e1(W),optScrollEnv:z.some({currentScrollTop:W.element.dom.scrollTop,scrollElmTop:Gc(W.element).top})})),modes:[c.header.getDockingMode()],onDocked:w,onUndocked:w}),...T]};var wN=Object.freeze({__proto__:null,setup:qG,isDocked:Vce,getBehaviours:KG});const Hce=o=>{const c=o.editor,d=o.sticky?KG:t$;return{uid:o.uid,dom:o.dom,components:o.components,behaviours:Tn(d(c,o.sharedBackstage))}};var r$=Bf({factory:(o,c)=>{const d=(S,w)=>{const T=Et(w,V=>{const F={type:"menubutton",text:V.text,fetch:Q=>{Q(V.getItems())},context:"any"},W=iW(F).mapError(Q=>Cv(Q)).getOrDie();return JI(W,"tox-mbtn",c.backstage,z.some("menuitem"))});os.set(S,T)},m={focus:wo.focusIn,setMenus:d};return{uid:o.uid,dom:o.dom,components:[],behaviours:Tn([os.config({}),Qo("menubar-events",[Qr(S=>{o.onSetup(S)}),Ft(Ap(),(S,w)=>{yr(S.element,".tox-mbtn--active").each(T=>{qc(w.event.target,".tox-mbtn").each(V=>{de(T,V)||S.getSystem().getByDom(T).each(F=>{S.getSystem().getByDom(V).each(W=>{$f.expand(W),$f.close(F),ns.focus(W)})})})})}),Ft(cS(),(S,w)=>{w.event.prevFocus.bind(T=>S.getSystem().getByDom(T).toOptional()).each(T=>{w.event.newFocus.bind(V=>S.getSystem().getByDom(V).toOptional()).each(V=>{$f.isOpen(T)&&($f.expand(V),$f.close(T))})})})]),wo.config({mode:"flow",selector:".tox-mbtn",onEscape:S=>(o.onEscape(S),z.some(!0))}),qr.config({})]),apis:m,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[sn("dom"),sn("uid"),sn("onEscape"),sn("backstage"),Ct("onSetup",K)],apis:{focus:(o,c)=>{o.focus(c)},setMenus:(o,c,d)=>{o.setMenus(c,d)}}});const Fce=" Get all features",Fh="https://www.tiny.cloud/tinymce-upgrade-to-cloud/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",$ce=o=>{const c=o.promotionLink?[{dom:{tag:"a",attributes:{href:Fh,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:Fce}}]:[];return{uid:o.uid,dom:o.dom,components:c}},AN=o=>{const{sidebars:c}=o.ui.registry.getAll();Jt(Jn(c),d=>{const m=c[d],S=()=>zc(z.from(o.queryCommandValue("ToggleSidebar")),d);o.ui.registry.addToggleButton(d,{icon:m.icon,tooltip:m.tooltip,onAction:w=>{o.execCommand("ToggleSidebar",!1,d),w.setActive(S())},onSetup:w=>{w.setActive(S());const T=()=>w.setActive(S());return o.on("ToggleSidebar",T),()=>{o.off("ToggleSidebar",T)}},context:"any"})})},ZG=o=>({element:()=>o.element.dom}),YG=(o,c)=>{const d=Et(Jn(c),m=>{const S=c[m],w=_p(SW(S));return{name:m,getApi:ZG,onSetup:w.onSetup,onShow:w.onShow,onHide:w.onHide}});return Et(d,m=>{const S=mn(K);return o.slot(m.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:MI.unnamedEvents([Fp(m,S),w0(m,S),Ft(lS(),(w,T)=>{const V=T.event;bt(d,W=>W.name===V.name).each(W=>{(V.visible?W.onShow:W.onHide)(W.getApi(w))})})])})})},Uce=o=>yu.sketch(c=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:YG(c,o),slotBehaviours:MI.unnamedEvents([Qr(d=>yu.hideAllSlots(d))])})),JG=(o,c,d)=>{zt.getCurrent(o).each(S=>{os.set(S,[Uce(c)]);const w=d==null?void 0:d.toLowerCase();v(w)&&Pn(c,w)&&zt.getCurrent(S).each(T=>{yu.showSlot(T,w),md.immediateGrow(S),Ds(S.element,"width"),TN(o.element,"region")})})},TN=(o,c)=>{Lo(o,"role",c)},jce=(o,c)=>{zt.getCurrent(o).each(m=>{zt.getCurrent(m).each(w=>{md.hasGrown(m)?yu.isShowing(w,c)?(md.shrink(m),TN(o.element,"presentation")):(yu.hideAllSlots(w),yu.showSlot(w,c),TN(o.element,"region")):(yu.hideAllSlots(w),yu.showSlot(w,c),md.grow(m),TN(o.element,"region"))})})},zce=o=>zt.getCurrent(o).bind(d=>md.isGrowing(d)||md.hasGrown(d)?zt.getCurrent(d).bind(w=>bt(yu.getSlotNames(w),T=>yu.isShowing(w,T))):z.none()),i$=Un("FixSizeEvent"),a$=Un("AutoSizeEvent"),Wce=o=>({uid:o.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Tn([qr.config({}),ns.config({}),md.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:c=>{zt.getCurrent(c).each(yu.hideAllSlots),Rs(c,a$)},onGrown:c=>{Rs(c,a$)},onStartGrow:c=>{xo(c,i$,{width:li(c.element,"width").getOr("")})},onStartShrink:c=>{xo(c,i$,{width:Tc(c.element)+"px"})}}),os.config({}),zt.config({find:c=>{const d=os.contents(c);return gt(d)}})])}],behaviours:Tn([Km.childAt(0),Qo("sidebar-sliding-events",[Ft(i$,(c,d)=>{jo(c.element,"width",d.event.width)}),Ft(a$,(c,d)=>{Ds(c.element,"width")})])])}),Gce=o=>(c,d)=>({dom:{tag:"div",attributes:{"aria-label":o.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:$g('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),c$=o=>zt.getCurrent(o).each(c=>ja(c.element,!0)),XG=(o,c)=>{const d="tabindex",m=`data-mce-${d}`;z.from(o.iframeElement).map(kn.fromDom).each(S=>{c?(ic(S,d).each(w=>Lo(S,m,w)),Lo(S,d,-1)):(Jr(S,d),ic(S,m).each(w=>{Lo(S,d,w),Jr(S,m)}))})},QG=(o,c,d,m)=>{const S=c.element;if(XG(o,d),d)ln.block(c,Gce(m)),Ds(S,"display"),Jr(S,"aria-hidden"),o.hasFocus()&&c$(c);else{const w=zt.getCurrent(c).exists(T=>Ud(T.element));ln.unblock(c),jo(S,"display","none"),Lo(S,"aria-hidden","true"),w&&o.focus()}},qce=o=>({uid:o.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Tn([os.config({}),ln.config({focus:!1}),zt.config({find:c=>gt(c.components())})]),components:[]}),eq=o=>o.type==="focusin",Kce=o=>eq(o)?(o.composed?gt(o.composedPath()):z.from(o.target)).map(kn.fromDom).filter(Ec).exists(d=>na(d,"mce-pastebin")):!1,Zce=(o,c,d)=>{const m=mn(!1),S=$o(),w=V=>{m.get()&&!Kce(V)&&(V.preventDefault(),c$(c()),o.editorManager.setActive(o))};o.inline||o.on("PreInit",()=>{o.dom.bind(o.getWin(),"focusin",w),o.on("BeforeExecCommand",V=>{V.command.toLowerCase()==="mcefocus"&&V.value!==!0&&w(V)})});const T=V=>{V!==m.get()&&(m.set(V),QG(o,c(),V,d.providers),Cie(o,V))};o.on("ProgressState",V=>{if(S.on(clearTimeout),q(V.time)){const F=tM.setEditorTimeout(o,()=>T(V.state),V.time);S.set(F)}else T(V.state),S.clear()})},l$=o=>{const c=o.label.isNone()?o.title.fold(()=>({}),d=>({attributes:{"aria-label":d}})):o.label.fold(()=>({}),d=>({attributes:{"aria-label":d}}));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(o.label.isSome()?["tox-toolbar__group_with_label"]:[]),...c},components:[...o.label.map(d=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[gi(d)]})).toArray(),Zk.parts.items({})],items:o.items,markers:{itemSelector:".tox-tbtn:not([disabled]), .tox-toolbar-nav-item:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Tn([qr.config({}),ns.config({ignore:!0})])}},oR=o=>Zk.sketch(l$(o)),u$=(o,c)=>{const d=Qr(m=>{const S=Et(o.initGroups,oR);pr.setGroups(m,S)});return Tn([Hp.toolbarButton(()=>o.providers.checkUiComponentContext("any").shouldDisable),bi(()=>o.providers.checkUiComponentContext("any")),wo.config({mode:c,onEscape:o.onEscape,visibilitySelector:".tox-toolbar__overflow",selector:".tox-toolbar__group"}),Qo("toolbar-events",[d])])},tq=o=>{const c=o.cyclicKeying?"cyclic":"acyclic";return{uid:o.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":l$({title:z.none(),label:z.none(),items:[]}),"overflow-button":tye({context:"any",icon:z.some("more-drawer"),enabled:!0,tooltip:z.some("Reveal or hide additional toolbar items")},z.none(),o.providers,[],"overflow-button")},splitToolbarBehaviours:u$(o,c)}},Yce=o=>{const c=tq(o),d=4,m=hV.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return hV.sketch({...c,lazySink:o.getSink,getOverflowBounds:()=>{const S=o.moreDrawerData.lazyHeader().element,w=gh(S),T=Yt(S),V=gh(T),F=Math.max(T.dom.scrollHeight,V.height);return La(w.x+d,V.y,w.width-d*2,F)},parts:{...c.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:o.attributes}}},components:[m],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:S=>o.onToggled(S,!0),onClosed:S=>o.onToggled(S,!1)})},Jce=o=>{const c=vV.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),d=vV.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),m=tq(o);return vV.sketch({...m,components:[c,d],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:S=>{S.getSystem().broadcastOn([n$()],{type:"opened"}),o.onToggled(S,!0)},onClosed:S=>{S.getSystem().broadcastOn([n$()],{type:"closed"}),o.onToggled(S,!1)}})},sR=o=>{const c=o.cyclicKeying?"cyclic":"acyclic";return pr.sketch({uid:o.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(o.type===Pp.scrolling?["tox-toolbar--scrolling"]:[])},components:[pr.parts.groups({})],toolbarBehaviours:u$(o,c)})},Xce=(o,c)=>{var d,m;const S=o.type==="togglebutton",w=o.icon.map(nt=>m1(nt,c.icons)).map(tr),V=nt=>{const Tt=pn=>{w.map(an=>an.getOpt(nt).each(Ro=>{os.set(Ro,[m1(pn,c.icons)])}))},xt=pn=>{const an=nt.element;pn?(Rr(an,"tox-button--enabled"),Lo(an,"aria-pressed",!0)):(Ii(an,"tox-button--enabled"),Jr(an,"aria-pressed"))},jn=()=>na(nt.element,"tox-button--enabled"),dn=()=>ja(nt.element);if(S)return o.onAction({setIcon:Tt,setActive:xt,isActive:jn,focus:dn});if(o.type==="button")return o.onAction({setIcon:Tt})},F={...o,name:S?o.text.getOr(o.icon.getOr("")):(d=o.text)!==null&&d!==void 0?d:o.icon.getOr(""),primary:o.buttonType==="primary",buttonType:z.from(o.buttonType),tooltip:o.tooltip,icon:o.icon,enabled:!0,borderless:o.borderless},W=pG((m=o.buttonType)!==null&&m!==void 0?m:"secondary"),Q=S?o.text.map(c.translate):z.some(c.translate(o.text)),oe=Q.map(gi),pe=F.tooltip.or(Q).map(nt=>({"aria-label":c.translate(nt)})).getOr({}),Ee=w.map(nt=>nt.asSpec()),Se=_w([Ee,oe]),Pe=o.icon.isSome()&&oe.isSome(),qe={tag:"button",classes:W.concat(...o.icon.isSome()&&!Pe?["tox-button--icon"]:[]).concat(...Pe?["tox-button--icon-and-text"]:[]).concat(...o.borderless?["tox-button--naked"]:[]).concat(...o.type==="togglebutton"&&o.active?["tox-button--enabled"]:[]),attributes:pe},Le=[],Je=XI(F,z.some(V),Le,qe,Se,o.tooltip,c);return zl.sketch(Je)},nq=(o,c)=>Xce(o,c),Qce=(o,c)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Et(o.buttons,d=>nq(d,c))}),oq=Wr().deviceType,ele=oq.isPhone(),tle=oq.isTablet(),nle=o=>{let c=!1;const d=Et(o.buttons,m=>m.type==="group"?(c=!0,Qce(m,o.providers)):nq(m,o.providers));return{uid:o.uid,dom:{tag:"div",classes:[c?"tox-view__toolbar":"tox-view__header",...ele||tle?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Tn([ns.config({}),wo.config({mode:"flow",selector:"button, .tox-button",focusInside:xp.OnEnterOrSpaceMode})]),components:c?d:[Vm.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Vm.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:d})]}},ole=o=>({uid:o.uid,behaviours:Tn([ns.config({}),qr.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),sle=(o,c,d,m)=>{const S={getPane:w=>Mc.getPart(w,o,"pane"),getOnShow:w=>o.viewConfig.onShow,getOnHide:w=>o.viewConfig.onHide};return{uid:o.uid,dom:o.dom,components:c,behaviours:Tn([ns.config({}),wo.config({mode:"cyclic",focusInside:xp.OnEnterOrSpaceMode})]),apis:S}};var Mw=Hu({name:"silver.View",configFields:[sn("viewConfig")],partFields:[fd({factory:{sketch:nle},schema:[sn("buttons"),sn("providers")],name:"header"}),fd({factory:{sketch:ole},schema:[],name:"pane"})],factory:sle,apis:{getPane:(o,c)=>o.getPane(c),getOnShow:(o,c)=>o.getOnShow(c),getOnHide:(o,c)=>o.getOnHide(c)}});const d$=(o,c,d)=>Nn(c,(m,S)=>{const w=_p(AW(m));return o.slot(S,Mw.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:w,components:[...w.buttons.length>0?[Mw.parts.header({buttons:w.buttons,providers:d})]:[],Mw.parts.pane({})]}))}),rle=(o,c)=>yu.sketch(d=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:d$(d,o,c),slotBehaviours:MI.unnamedEvents([Qr(m=>yu.hideAllSlots(m))])})),sq=o=>bt(yu.getSlotNames(o),c=>yu.isShowing(o,c)),rq=o=>{const c=o.element;jo(c,"display","none"),Lo(c,"aria-hidden","true")},iq=o=>{const c=o.element;Ds(c,"display"),Jr(c,"aria-hidden")},ile=o=>({getContainer:M(o)}),aq=(o,c,d)=>{yu.getSlot(o,c).each(m=>{Mw.getPane(m).each(S=>{d(m)(ile(S.element.dom))})})},ale=(o,c)=>aq(o,c,Mw.getOnShow),cle=(o,c)=>aq(o,c,Mw.getOnHide);var ON=Bf({factory:(o,c)=>{const w={setViews:(T,V)=>{os.set(T,[rle(V,c.backstage.shared.providers)])},whichView:T=>zt.getCurrent(T).bind(sq),toggleView:(T,V,F,W)=>zt.getCurrent(T).exists(Q=>{const oe=sq(Q),pe=oe.exists(Se=>W===Se),Ee=yu.getSlot(Q,W).isSome();return Ee&&(yu.hideAllSlots(Q),pe?(rq(T),V()):(F(),iq(T),yu.showSlot(Q,W),ale(Q,W)),oe.each(Se=>cle(Q,Se))),Ee})};return{uid:o.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Tn([os.config({}),zt.config({find:T=>{const V=os.contents(T);return gt(V)}})]),apis:w}},name:"silver.ViewWrapper",configFields:[sn("backstage")],apis:{setViews:(o,c,d)=>o.setViews(c,d),toggleView:(o,c,d,m,S)=>o.toggleView(c,d,m,S),whichView:(o,c)=>o.whichView(c)}});const cq=(o,c,d)=>{let m=!1;const S=T=>{rT(T,".tox-statusbar").each(V=>{Xr(V,"display")==="none"&&Na(V,"aria-hidden")==="true"?(Ds(V,"display"),Jr(V,"aria-hidden")):(jo(V,"display","none"),Lo(V,"aria-hidden","true"))})},w={getSocket:T=>Mc.getPart(T,o,"socket"),setSidebar:(T,V,F)=>{Mc.getPart(T,o,"sidebar").each(W=>JG(W,V,F))},toggleSidebar:(T,V)=>{Mc.getPart(T,o,"sidebar").each(F=>jce(F,V))},whichSidebar:T=>Mc.getPart(T,o,"sidebar").bind(zce).getOrNull(),getHeader:T=>Mc.getPart(T,o,"header"),getToolbar:T=>Mc.getPart(T,o,"toolbar"),setToolbar:(T,V)=>{Mc.getPart(T,o,"toolbar").each(F=>{const W=Et(V,oR);F.getApis().setGroups(F,W)})},setToolbars:(T,V)=>{Mc.getPart(T,o,"multiple-toolbar").each(F=>{const W=Et(V,Q=>Et(Q,oR));IB.setItems(F,W)})},refreshToolbar:T=>{Mc.getPart(T,o,"toolbar").each(F=>F.getApis().refresh(F))},toggleToolbarDrawer:T=>{Mc.getPart(T,o,"toolbar").each(V=>{Qa(V.getApis().toggle,F=>F(V))})},toggleToolbarDrawerWithoutFocusing:T=>{Mc.getPart(T,o,"toolbar").each(V=>{Qa(V.getApis().toggleWithoutFocusing,F=>F(V))})},isToolbarDrawerToggled:T=>Mc.getPart(T,o,"toolbar").bind(V=>z.from(V.getApis().isOpen).map(F=>F(V))).getOr(!1),getThrobber:T=>Mc.getPart(T,o,"throbber"),focusToolbar:T=>{Mc.getPart(T,o,"toolbar").orThunk(()=>Mc.getPart(T,o,"multiple-toolbar")).each(F=>{wo.focusIn(F)})},setMenubar:(T,V)=>{Mc.getPart(T,o,"menubar").each(F=>{r$.setMenus(F,V)})},focusMenubar:T=>{Mc.getPart(T,o,"menubar").each(V=>{r$.focus(V)})},setViews:(T,V)=>{Mc.getPart(T,o,"viewWrapper").each(F=>{ON.setViews(F,V)})},toggleView:(T,V)=>Mc.getPart(T,o,"viewWrapper").exists(F=>ON.toggleView(F,()=>w.showMainView(T),()=>w.hideMainView(T),V)),whichView:T=>Mc.getPart(T,o,"viewWrapper").bind(ON.whichView).getOrNull(),hideMainView:T=>{m=w.isToolbarDrawerToggled(T),m&&w.toggleToolbarDrawer(T),Mc.getPart(T,o,"editorContainer").each(V=>{const F=V.element;S(F),jo(F,"display","none"),Lo(F,"aria-hidden","true")})},showMainView:T=>{m&&w.toggleToolbarDrawer(T),Mc.getPart(T,o,"editorContainer").each(V=>{const F=V.element;S(F),Ds(F,"display"),Jr(F,"aria-hidden")})}};return{uid:o.uid,dom:o.dom,components:c,apis:w,behaviours:o.behaviours}},IN=Ug.optional({factory:r$,name:"menubar",schema:[sn("backstage")]}),f$=o=>o.type===Pp.sliding?Jce:o.type===Pp.floating?Yce:sR,lle=Ug.optional({factory:{sketch:o=>IB.sketch({uid:o.uid,dom:o.dom,listBehaviours:Tn([wo.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>sR({type:o.type,uid:Un("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:o.providers,onEscape:()=>(o.onEscape(),z.some(!0))}),setupItem:(c,d,m,S)=>{pr.setGroups(d,m)},shell:!0})},name:"multiple-toolbar",schema:[sn("dom"),sn("onEscape")]}),ule=Ug.optional({factory:{sketch:o=>{const c=f$(o),d={type:o.type,uid:o.uid,onEscape:()=>(o.onEscape(),z.some(!0)),onToggled:(m,S)=>o.onToolbarToggled(S),cyclicKeying:!1,initGroups:[],getSink:o.getSink,providers:o.providers,moreDrawerData:{lazyToolbar:o.lazyToolbar,lazyMoreButton:o.lazyMoreButton,lazyHeader:o.lazyHeader},attributes:o.attributes};return c(d)}},name:"toolbar",schema:[sn("dom"),sn("onEscape"),sn("getSink")]}),lq=Ug.optional({factory:{sketch:Hce},name:"header",schema:[sn("dom")]}),dle=Ug.optional({factory:{sketch:$ce},name:"promotion",schema:[sn("dom"),sn("promotionLink")]}),fle=Ug.optional({name:"socket",schema:[sn("dom")]}),ple=Ug.optional({factory:{sketch:Wce},name:"sidebar",schema:[sn("dom")]}),uq=Ug.optional({factory:{sketch:qce},name:"throbber",schema:[sn("dom")]}),hle=Ug.optional({factory:ON,name:"viewWrapper",schema:[sn("backstage")]}),mle=o=>({uid:o.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:o.components}),p$=Ug.optional({factory:{sketch:mle},name:"editorContainer",schema:[]});var $r=Hu({name:"OuterContainer",factory:cq,configFields:[sn("dom"),sn("behaviours")],partFields:[lq,IN,ule,lle,fle,ple,dle,uq,hle,p$],apis:{getSocket:(o,c)=>o.getSocket(c),setSidebar:(o,c,d,m)=>{o.setSidebar(c,d,m)},toggleSidebar:(o,c,d)=>{o.toggleSidebar(c,d)},whichSidebar:(o,c)=>o.whichSidebar(c),getHeader:(o,c)=>o.getHeader(c),getToolbar:(o,c)=>o.getToolbar(c),setToolbar:(o,c,d)=>{o.setToolbar(c,d)},setToolbars:(o,c,d)=>{o.setToolbars(c,d)},refreshToolbar:(o,c)=>o.refreshToolbar(c),toggleToolbarDrawer:(o,c)=>{o.toggleToolbarDrawer(c)},toggleToolbarDrawerWithoutFocusing:(o,c)=>{o.toggleToolbarDrawerWithoutFocusing(c)},isToolbarDrawerToggled:(o,c)=>o.isToolbarDrawerToggled(c),getThrobber:(o,c)=>o.getThrobber(c),setMenubar:(o,c,d)=>{o.setMenubar(c,d)},focusMenubar:(o,c)=>{o.focusMenubar(c)},focusToolbar:(o,c)=>{o.focusToolbar(c)},setViews:(o,c,d)=>{o.setViews(c,d)},toggleView:(o,c,d)=>o.toggleView(c,d),whichView:(o,c)=>o.whichView(c)}});const gle="file edit view insert format tools table help",h$={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code suggestededits revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},vle=(o,c,d)=>{const m=Zj(d).split(/[ ,]/);return{text:o.title,getItems:()=>Ue(o.items,S=>{const w=S.toLowerCase();return w.trim().length===0?[]:io(m,T=>T===w)?[]:w==="separator"||w==="|"?[{type:"separator"}]:c.menuItems[w]?[c.menuItems[w]]:[]})}},RN=o=>o.split(" "),dq=(o,c)=>{const d={...h$,...c.menus},m=Jn(c.menus).length>0,S=c.menubar===void 0||c.menubar===!0?RN(gle):RN(c.menubar===!1?"":c.menubar),w=Fo(S,V=>{const F=Pn(h$,V);return m?F||Vt(c.menus,V).exists(W=>Pn(W,"items")):F}),T=Et(w,V=>{const F=d[V];return vle({title:F.title,items:RN(F.items)},c,o)});return Fo(T,V=>{const F=W=>v(W)||W.type!=="separator";return V.getItems().length>0&&io(V.getItems(),F)})},fq=o=>{const c=()=>{o._skinLoaded=!0,yie(o)};return()=>{o.initialized?c():o.on("init",c)}},ble=(o,c)=>()=>Sie(o,{message:c}),yle=o=>{const c=pz(o);return c?z.from(c):z.none()},pq=(o,c,d)=>(o.on("remove",()=>d.unload(c)),d.load(c)),rR=(o,c,d,m)=>(o.on("remove",()=>m.unloadRawCss(c)),m.loadRawCss(c,d)),Sle=(o,c)=>"ui/"+o+"/"+c,Cle=o=>z.from(tinymce.Resource.get(o)).filter(v),m$=(o,c,d="")=>{const m=yle(o).map(w=>Sle(w,`${c}.css`)),S=m.bind(Cle);return bc(m,S,(w,T)=>({_kind:"load-raw",key:w,css:T})).getOrThunk(()=>{const w=o.editorManager.suffix;return{_kind:"load-stylesheet",url:d+`/${c}${w}.css`}})},g$=(o,c)=>{const d=o.ui.styleSheetLoader,m=m$(o,"skin",c);switch(m._kind){case"load-raw":const{key:S,css:w}=m;return rR(o,S,w,d),Promise.resolve();case"load-stylesheet":const{url:T}=m;return pq(o,T,d);default:return Promise.resolve()}},v$=(o,c)=>{if(Sf(kn.fromDom(o.getElement()))){const m=vI.DOM.styleSheetLoader,S=m$(o,"skin.shadowdom",c);switch(S._kind){case"load-raw":const{key:w,css:T}=S;return rR(o,w,T,m),Promise.resolve();case"load-stylesheet":const{url:V}=S;return pq(o,V,m);default:return Promise.resolve()}}else return Promise.resolve()},Ele=(o,c,d)=>{const S=m$(o,c?"content.inline":"content",d);switch(S._kind){case"load-raw":const{key:w,css:T}=S;return c?rR(o,w,T,o.ui.styleSheetLoader):o.on("PostRender",()=>{rR(o,w,T,o.dom.styleSheetLoader)}),Promise.resolve();case"load-stylesheet":const{url:V}=S;return d&&o.contentCSS.push(V),Promise.resolve();default:return Promise.resolve()}},_le=async(o,c)=>{const d=hz(c);if(await Ele(c,o,d),!DV(c)&&v(d))return Promise.all([g$(c,d),v$(c,d)]).then()},hq=(o,c)=>_le(o,c).then(fq(c),ble(c,"Skin could not be loaded")),wle=De(hq,!1),Ale=De(hq,!0),mq=o=>({isEnabled:()=>!So.isDisabled(o),setEnabled:c=>So.set(o,!c),setText:c=>xo(o,Hh,{text:c}),setIcon:c=>xo(o,O0,{icon:c})}),Tle=o=>({setActive:c=>{Vs.set(o,c)},isActive:()=>Vs.isOn(o),isEnabled:()=>!So.isDisabled(o),setEnabled:c=>So.set(o,!c),setText:c=>xo(o,Hh,{text:c}),setIcon:c=>xo(o,O0,{icon:c})}),Ole=(o,c)=>o.map(d=>({"aria-label":c.translate(d)})).getOr({}),Ile=Un("focus-button"),iR=(o,c,d,m,S,w,T)=>{const V=c.map(W=>tr(dN(W,"tox-tbtn",S))),F=o.map(W=>tr(m1(W,S.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(c.isSome()?["tox-tbtn--select"]:[]),attributes:{...Ole(d,S),...B(T)?{"data-mce-name":T}:{}}},components:_w([F.map(W=>W.asSpec()),V.map(W=>W.asSpec())]),eventOrder:{[hu()]:["focusing","alloy.base.behaviour",h1],[bh()]:[h1,"toolbar-group-button-events"],[Tg()]:[h1,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:Tn([Hp.toolbarButton(()=>S.checkUiComponentContext(w).shouldDisable),bi(()=>S.checkUiComponentContext(w)),Qo(h1,[Qr((W,Q)=>Vh(W)),Ft(Hh,(W,Q)=>{V.bind(oe=>oe.getOpt(W)).each(oe=>{os.set(oe,[gi(S.translate(Q.event.text))])})}),Ft(O0,(W,Q)=>{F.bind(oe=>oe.getOpt(W)).each(oe=>{os.set(oe,[m1(Q.event.icon,S.icons)])})}),Ft(hu(),(W,Q)=>{Q.event.prevent(),Rs(W,Ile)})])].concat(m.getOr([])))}},xN=(o,c,d,m,S)=>{const w=c.shared,T=mn(K),V={toolbarButtonBehaviours:[],getApi:mq,onSetup:o.onSetup},F=[Qo("toolbar-group-button-events",[Fp(V,T),w0(V,T)]),...o.tooltip.map(W=>vi.config(c.shared.providers.tooltips.getConfig({tooltipText:c.shared.providers.translate(W)}))).toArray()];return m0.sketch({lazySink:w.getSink,fetch:()=>Os.nu(W=>{W(Et(d(o.items),oR))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:iR(o.icon,o.text,o.tooltip,z.some(F),w.providers,o.context,S),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:m}}}})},DN=(o,c,d,m)=>{var S;const w=mn(K),T=iR(o.icon,o.text,o.tooltip,z.none(),d,o.context,m);return zl.sketch({dom:T.dom,components:T.components,eventOrder:K9,buttonBehaviours:{...Tn([Qo("toolbar-button-events",[q9({onAction:o.onAction,getApi:c.getApi}),Fp(c,w),w0(c,w)]),...o.tooltip.map(V=>vi.config(d.tooltips.getConfig({tooltipText:d.translate(V)+o.shortcut.map(F=>` (${EC(F)})`).getOr("")}))).toArray(),Hp.toolbarButton(()=>!o.enabled||d.checkUiComponentContext(o.context).shouldDisable),bi(()=>d.checkUiComponentContext(o.context))].concat(c.toolbarButtonBehaviours)),[h1]:(S=T.buttonBehaviours)===null||S===void 0?void 0:S[h1]}})},gq=(o,c,d)=>qv(o,c,[],d),qv=(o,c,d,m)=>DN(o,{toolbarButtonBehaviours:d.length>0?[Qo("toolbarButtonWith",d)]:[],getApi:mq,onSetup:o.onSetup},c,m),vq=(o,c,d)=>bq(o,c,[],d),bq=(o,c,d,m)=>DN(o,{toolbarButtonBehaviours:[os.config({}),Vs.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(d.length>0?[Qo("toolbarToggleButtonWith",d)]:[]),getApi:Tle,onSetup:o.onSetup},c,m),Rle=(o,c,d)=>m=>Os.nu(S=>c.fetch(S)).map(S=>z.from(OC(gr(nN(Un("menu-value"),S,w=>{c.onItemAction(o(m),w)},c.columns,c.presets,Wm.CLOSE_ON_EXECUTE,c.select.getOr(Ke),d),{movement:FI(c.columns,c.presets),menuBehaviours:MI.unnamedEvents(c.columns!=="auto"?[]:[Qr((w,T)=>{MH(w,4,AM(c.presets)).each(({numRows:V,numColumns:F})=>{wo.setGridSize(w,V,F)})})])})))),xle=(o,c,d)=>m=>{const S=m.getSystem(),w=m.element,T=()=>{const F=na(w,"tox-split-button__chevron"),W=F?Ls(w).bind(oe=>S.getByDom(oe).toOptional()):z.some(m),Q=F?z.some(m):Bs(w).bind(oe=>S.getByDom(oe).toOptional().filter(pe=>na(pe.element,"tox-split-button__chevron")));return{mainOpt:W,chevronOpt:Q}},V=F=>{const{mainOpt:W,chevronOpt:Q}=T();W.each(F),Q.each(F)};return{isEnabled:()=>{const{mainOpt:F}=T();return F.exists(W=>!So.isDisabled(W))},setEnabled:F=>V(W=>So.set(W,!F)),setText:F=>{const{mainOpt:W}=T();W.each(Q=>xo(Q,Hh,{text:F}))},setIcon:F=>{const{mainOpt:W}=T();W.each(Q=>xo(Q,O0,{icon:F}))},setIconFill:(F,W)=>V(Q=>{yr(Q.element,`svg path[class="${F}"], rect[class="${F}"]`).each(oe=>{Lo(oe,"fill",W)})}),isActive:()=>{const{mainOpt:F}=T();return F.exists(W=>Vs.isOn(W))},setActive:F=>{const{mainOpt:W}=T();W.each(Q=>Vs.set(Q,F))},setTooltip:F=>{o.set(F);const{mainOpt:W,chevronOpt:Q}=T();W.each(pe=>Lo(pe.element,"aria-label",c.providers.translate(F)));const oe=d.chevronTooltip.map(pe=>c.providers.translate(pe)).getOr(c.providers.translate(`${F} menu`));Q.each(pe=>Lo(pe.element,"aria-label",oe))}}},Dle=(o,c,d)=>{const m=mn(K),S=mn(o.tooltip.getOr("")),w=xle(S,c,o),T=Un("tox-split-menu"),V=mn(!1),F=()=>({"aria-haspopup":"menu","aria-expanded":String(V.get()),"aria-controls":T}),W=()=>o.tooltip.map(Se=>c.providers.translate(Se)).getOr(c.providers.translate("Text color")),Q=()=>o.chevronTooltip.map(Se=>c.providers.translate(Se)).getOrThunk(()=>{const Se=W();return c.providers.translate(["{0} menu",Se])}),oe=(Se,Pe)=>{V.set(Se),Lo(Pe.element,"aria-expanded",String(Se))},pe=$f.sketch({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:KV("chevron-down",c.providers.icons),attributes:{"aria-label":Q(),...B(d)?{"data-mce-name":d+"-chevron"}:{},...F()}},components:[],toggleClass:"tox-tbtn--enabled",dropdownBehaviours:Tn([Qo("split-dropdown-events",[Qr((Se,Pe)=>Vh(Se)),Fp({getApi:w,onSetup:o.onSetup},m),Ft("alloy-dropdown-open",Se=>oe(!0,Se)),Ft("alloy-dropdown-close",Se=>oe(!1,Se))]),Hp.toolbarButton(()=>c.providers.checkUiComponentContext(o.context).shouldDisable),bi(()=>c.providers.checkUiComponentContext(o.context)),ow.config({}),vi.config(c.providers.tooltips.getConfig({tooltipText:Q(),onShow:Se=>{if(S.get()!==o.tooltip.getOr("")){const Pe=o.chevronTooltip.map(qe=>c.providers.translate(qe)).getOr(`${c.providers.translate(S.get())} menu`);vi.setComponents(Se,c.providers.tooltips.getComponents({tooltipText:Pe}))}}}))]),lazySink:c.getSink,fetch:Rle(w,o,c.providers),getHotspot:Se=>Ls(Se.element).bind(Pe=>Se.getSystem().getByDom(Pe).toOptional()),onOpen:(Se,Pe,qe)=>{ir.highlightBy(qe,Le=>na(Le.element,"tox-collection__item--active")),ir.getHighlighted(qe).each(wo.focusIn)},parts:{menu:{...fw(!1,o.columns,o.presets),dom:{...fw(!1,o.columns,o.presets).dom,tag:"div",attributes:{id:T}}}}});return[zl.sketch({...iR(o.icon,o.text,z.none(),z.some([Vs.config({toggleClass:"tox-tbtn--enabled",aria:o.presets==="color"?{mode:"none"}:{mode:"pressed"},toggleOnExecute:!1}),Hp.toolbarButton(()=>c.providers.checkUiComponentContext(o.context).shouldDisable),bi(()=>c.providers.checkUiComponentContext(o.context)),Qo("split-main-aria-events",[]),...o.tooltip.isSome()?[vi.config(c.providers.tooltips.getConfig({tooltipText:c.providers.translate(o.tooltip.getOr("")),onShow:Se=>{if(S.get()!==o.tooltip.getOr("")){const Pe=c.providers.translate(S.get());vi.setComponents(Se,c.providers.tooltips.getComponents({tooltipText:Pe}))}}}))]:[]]),c.providers,o.context,d),dom:{...iR(o.icon,o.text,z.none(),z.none(),c.providers,o.context,d).dom,classes:["tox-tbtn","tox-split-button__main"],attributes:{"aria-label":W(),...B(d)?{"data-mce-name":d}:{}}},action:Se=>{if(o.onAction){const Pe=w(Se);Pe.isEnabled()&&o.onAction(Pe)}}}),pe]},kle=".tox-toolbar-slider__input,.tox-toolbar-textfield",yq=o=>{Ni.getContent(o).each(c=>{yr(c.element,kle).fold(()=>wo.focusIn(c),ja)})},Mle=o=>ea(o.element).each(c=>{Wd(c,'[tabindex="-1"]').each(d=>{ja(d)})}),b$=Un("forward-slide"),kN=Un("backward-slide"),y$=Un("change-slide-event"),aR="tox-pop--resizing",Nle=o=>{const c=mn([]);return{sketch:Ni.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:m=>{c.set([]),Ni.getContent(m).each(S=>{Ds(S.element,"visibility")}),Ii(m.element,aR),Ds(m.element,"width")},onHide:()=>{c.set([]),o.onHide()},inlineBehaviours:Tn([Qo("context-toolbar-events",[Yb(Jd(),(m,S)=>{S.event.raw.propertyName==="width"&&(Ii(m.element,aR),Ds(m.element,"width"))}),Ft(y$,(m,S)=>{const w=m.element;Ds(w,"width");const T=Tc(w),V=ea(m.element).isSome();Ds(w,"left"),Ds(w,"right"),Ds(w,"max-width"),Ni.setContent(m,S.event.contents),Rr(w,aR);const F=Tc(w);jo(w,"transition","none"),Ni.reposition(m),Ds(w,"transition"),jo(w,"width",T+"px"),S.event.focus.fold(()=>{V&&yq(m)},W=>{za(Ei(m.element)).fold(()=>ja(W),Q=>{de(Q,W)||o.focusElement(W)})}),setTimeout(()=>{jo(m.element,"width",F+"px")},0)}),Ft(b$,(m,S)=>{Ni.getContent(m).each(w=>{c.set(c.get().concat([{bar:w,focus:za(Ei(m.element))}]))}),xo(m,y$,{contents:S.event.forwardContents,focus:z.none()})}),Ft(kN,(m,S)=>{o.onBack(),No(c.get()).each(w=>{c.set(c.get().slice(0,c.get().length-1)),xo(m,y$,{contents:P(w.bar),focus:w.focus})})})]),wo.config({mode:"special",onEscape:m=>No(c.get()).fold(()=>o.onEscape(),S=>(Rs(m,kN),z.some(!0)))})]),lazySink:()=>fo.value(o.sink)}),inSubtoolbar:()=>c.get().length>0}},Ple=(o,c)=>{const d=_p(LM({type:"button",icon:"chevron-left",tooltip:"Back",onAction:K}));return qv(d,c.shared.providers,[Ft(RF,m=>{Rs(m,kN)})])},Nw=(o,c,d)=>ka(d)?o.translate(c):o.translate([c,o.translate(d)]),Lle=(o,c)=>{const d=(T,V,F,W)=>{const Q=o.shared.providers.translate(T.title);if(T.type==="separator")return z.some({type:"separator",text:Q});if(T.type==="submenu"){const oe=Ue(T.getStyleItems(),pe=>m(pe,V,W));return V===0&&oe.length<=0?z.none():z.some({type:"nestedmenuitem",text:Q,enabled:oe.length>0,getSubmenuItems:()=>Ue(T.getStyleItems(),pe=>m(pe,V,W))})}else return z.some({type:"togglemenuitem",text:Q,icon:T.icon,active:T.isSelected(W),enabled:!F,onAction:c.onAction(T),...T.getStylePreview().fold(()=>({}),oe=>({meta:{style:oe}}))})},m=(T,V,F)=>{const W=T.type==="formatter"&&c.isInvalid(T);return V===0?W?[]:d(T,V,!1,F).toArray():d(T,V,W,F).toArray()},S=T=>{const V=c.getCurrentValue(),F=c.shouldHide?0:1;return Ue(T,W=>m(W,F,V))};return{validateItems:S,getFetch:(T,V)=>(F,W)=>{const Q=V(),oe=S(Q),pe=Iw(oe,Wm.CLOSE_ON_EXECUTE,T,{isHorizontalMenu:!1,search:z.none()});W(pe)}}},Pw=(o,c)=>{const d=c.dataset,m=d.type==="basic"?()=>Et(d.data,S=>WF(S,c.isSelectedFor,c.getPreviewFor)):d.getData;return{items:Lle(o,c),getStyleItems:m}},cR=(o,c,d,m,S,w)=>{const{items:T,getStyleItems:V}=Pw(c,d),F=mn(d.tooltip),W=oe=>({getComponent:M(oe),setTooltip:pe=>{const Ee=c.shared.providers.translate(pe);Lo(oe.element,"aria-label",Ee),F.set(pe)}}),Q=oe=>{const pe=Ee=>oe.setTooltip(Nw(o,m(Ee.value),Ee.value));return o.on(S,pe),KM(TC(o,"NodeChange",Ee=>{const Se=Ee.getComponent();d.updateText(Se),So.set(Ee.getComponent(),!o.selection.isEditable()||V().length===0)})(oe),()=>o.off(S,pe))};return YI({context:"mode:design",text:d.icon.isSome()?z.none():d.text,icon:d.icon,ariaLabel:z.some(d.tooltip),tooltip:z.none(),role:z.none(),fetch:T.getFetch(c,V),onSetup:Q,getApi:W,columns:1,presets:"normal",classes:d.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[vi.config({...c.shared.providers.tooltips.getConfig({tooltipText:c.shared.providers.translate(d.tooltip),onShow:oe=>{if(d.tooltip!==F.get()){const pe=c.shared.providers.translate(F.get());vi.setComponents(oe,c.shared.providers.tooltips.getComponents({tooltipText:pe}))}}})})]},"tox-tbtn",c.shared,w)},Sq=o=>Et(o,c=>{let d=c,m=c;const S=c.split("=");return S.length>1&&(d=S[0],m=S[1]),{title:d,format:m}}),Cq=o=>({type:"basic",data:o});var kC;(function(o){o[o.SemiColon=0]="SemiColon",o[o.Space=1]="Space"})(kC||(kC={}));const Ble=(o,c)=>c===kC.SemiColon?o.replace(/;$/,"").split(";"):o.split(" "),MN=(o,c,d)=>{const m=o.options.get(c);return{type:"basic",data:Sq(Ble(m,d))}},Vle="Align",Eq=M("Alignment {0}"),_q="left",NN=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],wq=o=>{const c=()=>bt(NN,V=>o.formatter.match(V.format)),d=V=>()=>o.formatter.match(V),m=V=>z.none,S=V=>{const W=c().fold(M(_q),Q=>Q.title.toLowerCase());xo(V,O0,{icon:`align-${W}`}),_ie(o,{value:W})},w=Cq(NN),T=V=>()=>bt(NN,F=>F.format===V.format).each(F=>o.execCommand(F.command));return{tooltip:Nw(o,Eq(),_q),text:z.none(),icon:z.some("align-left"),isSelectedFor:d,getCurrentValue:z.none,getPreviewFor:m,onAction:T,updateText:S,dataset:w,shouldHide:!1,isInvalid:V=>!o.formatter.canApply(V.format)}},Aq=(o,c)=>cR(o,c,wq(o),Eq,"AlignTextUpdate","align"),Hle=(o,c)=>{const d=Pw(c,wq(o));o.ui.registry.addNestedMenuItem("align",{text:c.shared.providers.translate(Vle),onSetup:$u(o),getSubmenuItems:()=>d.items.validateItems(d.getStyleItems())})},Tq=(o,c)=>{const d=c(),m=Et(d,S=>S.format);return z.from(o.formatter.closest(m)).bind(S=>bt(d,w=>w.format===S))},Fle="Blocks",Oq=M("Block {0}"),S$="Paragraph",Iq=o=>{const c=w=>()=>o.formatter.match(w),d=w=>()=>{const T=o.formatter.get(w);return T?z.some({tag:T.length>0&&(T[0].inline||T[0].block)||"div",styles:o.dom.parseStyle(o.formatter.getCssText(w))}):z.none()},m=w=>{const V=Tq(o,()=>S.data).fold(M(S$),F=>F.title);xo(w,Hh,{text:V}),Tie(o,{value:V})},S=MN(o,"block_formats",kC.SemiColon);return{tooltip:Nw(o,Oq(),S$),text:z.some(S$),icon:z.none(),isSelectedFor:c,getCurrentValue:z.none,getPreviewFor:d,onAction:JW(o),updateText:m,dataset:S,shouldHide:!1,isInvalid:w=>!o.formatter.canApply(w.format)}},$le=(o,c)=>cR(o,c,Iq(o),Oq,"BlocksTextUpdate","blocks"),Rq=(o,c)=>{const d=Pw(c,Iq(o));o.ui.registry.addNestedMenuItem("blocks",{text:Fle,onSetup:$u(o),getSubmenuItems:()=>d.items.validateItems(d.getStyleItems())})},Ule="Fonts",xq=M("Font {0}"),C$="System Font",jle=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],Dq=o=>{const c=o.split(/\s*,\s*/);return Et(c,d=>d.replace(/^['"]+|['"]+$/g,""))},kq=(o,c)=>c.length>0&&dt(c,d=>o.indexOf(d.toLowerCase())>-1),zle=(o,c)=>{if(o.indexOf("-apple-system")===0||c.length>0){const d=Dq(o.toLowerCase());return kq(d,jle)||kq(d,c)}else return!1},E$=o=>{const c=()=>{const F=Se=>Se?Dq(Se)[0]:"",W=o.queryCommandValue("FontName"),Q=V.data,oe=W?W.toLowerCase():"",pe=fz(o);return{matchOpt:bt(Q,Se=>{const Pe=Se.format;return Pe.toLowerCase()===oe||F(Pe).toLowerCase()===F(oe).toLowerCase()}).orThunk(()=>Gi(zle(oe,pe),{title:C$,format:oe})),font:W}},d=F=>W=>W.exists(Q=>Q.format===F),m=()=>{const{matchOpt:F}=c();return F},S=F=>()=>z.some({tag:"div",styles:F.indexOf("dings")===-1?{"font-family":F}:{}}),w=F=>()=>{o.undoManager.transact(()=>{o.focus(),o.execCommand("FontName",!1,F.format)})},T=F=>{const{matchOpt:W,font:Q}=c(),oe=W.fold(M(Q),pe=>pe.title);xo(F,Hh,{text:oe}),qW(o,{value:oe})},V=MN(o,"font_family_formats",kC.SemiColon);return{tooltip:Nw(o,xq(),C$),text:z.some(C$),icon:z.none(),isSelectedFor:d,getCurrentValue:m,getPreviewFor:S,onAction:w,updateText:T,dataset:V,shouldHide:!1,isInvalid:Ke}},Wle=(o,c)=>cR(o,c,E$(o),xq,"FontFamilyTextUpdate","fontfamily"),Gle=(o,c)=>{const d=Pw(c,E$(o));o.ui.registry.addNestedMenuItem("fontfamily",{text:c.shared.providers.translate(Ule),onSetup:$u(o),getSubmenuItems:()=>d.items.validateItems(d.getStyleItems())})};var lR=tinymce.util.Tools.resolve("tinymce.util.VK");const qle=(o,c,d,m)=>{let S=z.none();const w=nt=>nt.map(Tt=>zn.getValue(Tt)).getOr(""),T=TC(o,"NodeChange SwitchMode DisabledStateChange",nt=>{const Tt=nt.getComponent();S=z.some(Tt),d.updateInputValue(Tt),So.set(Tt,!o.selection.isEditable()||oM(o))}),V=nt=>({getComponent:M(nt)}),F=mn(K),W=Un("custom-number-input-events"),Q=(nt,Tt,xt)=>{const jn=w(S),dn=d.getNewValue(jn,nt),pn=jn.length-`${dn}`.length,an=S.map(mo=>mo.element.dom.selectionStart-pn),Ro=S.map(mo=>mo.element.dom.selectionEnd-pn);d.onAction(dn,xt),S.each(mo=>{zn.setValue(mo,dn),Tt&&(an.each(Ns=>mo.element.dom.selectionStart=Ns),Ro.each(Ns=>mo.element.dom.selectionEnd=Ns))})},oe=(nt,Tt)=>Q((xt,jn)=>xt-jn,nt,Tt),pe=(nt,Tt)=>Q((xt,jn)=>xt+jn,nt,Tt),Ee=nt=>Po(nt.element).fold(z.none,Tt=>(ja(Tt),z.some(!0))),Se=nt=>Ud(nt.element)?(eo(nt.element).each(Tt=>ja(Tt)),z.some(!0)):z.none(),Pe=(nt,Tt,xt,jn)=>{const dn=mn(K),pn=c.shared.providers.translate(xt),an=Un("altExecuting"),Ro=TC(o,"NodeChange SwitchMode DisabledStateChange",Ns=>{So.set(Ns.getComponent(),!o.selection.isEditable()||oM(o))}),mo=Ns=>{So.isDisabled(Ns)||nt(!0)};return zl.sketch({dom:{tag:"button",attributes:{"aria-label":pn,"data-mce-name":Tt},classes:jn.concat(Tt)},components:[Ow(Tt,c.shared.providers.icons)],buttonBehaviours:Tn([So.config({}),vi.config(c.shared.providers.tooltips.getConfig({tooltipText:pn})),Qo(an,[Fp({onSetup:Ro,getApi:V},dn),w0({getApi:V},dn),Ft(lc(),(Ns,Vo)=>{(Vo.event.raw.keyCode===lR.SPACEBAR||Vo.event.raw.keyCode===lR.ENTER)&&(So.isDisabled(Ns)||nt(!1))}),Ft(bm(),mo),Ft(kb(),mo)])]),eventOrder:{[lc()]:[an,"keying"],[bm()]:[an,"alloy.base.behaviour"],[kb()]:[an,"alloy.base.behaviour"],[bh()]:["alloy.base.behaviour",an,"tooltipping"],[Tg()]:[an,"tooltipping"]}})},qe=tr(Pe(nt=>oe(!1,nt),"minus","Decrease font size",[])),Le=tr(Pe(nt=>pe(!1,nt),"plus","Increase font size",[])),Je=tr({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[jg.sketch({inputBehaviours:Tn([So.config({}),Qo(W,[Fp({onSetup:T,getApi:V},F),w0({getApi:V},F)]),Qo("input-update-display-text",[Ft(Hh,(nt,Tt)=>{zn.setValue(nt,Tt.event.text)}),Ft($E(),nt=>{d.onAction(zn.getValue(nt))}),Ft(Mb(),nt=>{d.onAction(zn.getValue(nt))})]),wo.config({mode:"special",onEnter:nt=>(Q(we,!0,!0),z.some(!0)),onEscape:Ee,onUp:nt=>(pe(!0,!1),z.some(!0)),onDown:nt=>(oe(!0,!1),z.some(!0)),onLeft:(nt,Tt)=>(Tt.cut(),z.none()),onRight:(nt,Tt)=>(Tt.cut(),z.none())})])})],behaviours:Tn([ns.config({}),wo.config({mode:"special",onEnter:Se,onSpace:Se,onEscape:Ee}),Qo("input-wrapper-events",[Ft(Ap(),nt=>{Jt([qe,Le],Tt=>{const xt=kn.fromDom(Tt.get(nt).element.dom);Ud(xt)&&Oi(xt)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...B(m)?{"data-mce-name":m}:{}}},components:[qe.asSpec(),Je.asSpec(),Le.asSpec()],behaviours:Tn([ns.config({}),wo.config({mode:"flow",focusInside:xp.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:nt=>Ud(nt.element)?z.none():(ja(nt.element),z.some(!0))})])}},Mq="Font sizes",_$=M("Font size {0}"),Nq="12pt",Kle={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},Zle={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},Lw=(o,c)=>{const d=Math.pow(10,c);return Math.round(o*d)/d},Yle=(o,c)=>/[0-9.]+px$/.test(o)?Lw(parseInt(o,10)*72/96,c||0)+"pt":Vt(Zle,o).getOr(o),Jle=o=>Vt(Kle,o).getOr(""),Pq=o=>{const c=()=>{let F=z.none();const W=V.data,Q=o.queryCommandValue("FontSize");if(Q)for(let oe=3;F.isNone()&&oe>=0;oe--){const pe=Yle(Q,oe),Ee=Jle(pe);F=bt(W,Se=>Se.format===Q||Se.format===pe||Se.format===Ee)}return{matchOpt:F,size:Q}},d=F=>W=>W.exists(Q=>Q.format===F),m=()=>{const{matchOpt:F}=c();return F},S=M(z.none),w=F=>()=>{o.undoManager.transact(()=>{o.focus(),o.execCommand("FontSize",!1,F.format)})},T=F=>{const{matchOpt:W,size:Q}=c(),oe=W.fold(M(Q),pe=>pe.title);xo(F,Hh,{text:oe}),wie(o,{value:oe})},V=MN(o,"font_size_formats",kC.Space);return{tooltip:Nw(o,_$(),Nq),text:z.some(Nq),icon:z.none(),isSelectedFor:d,getPreviewFor:S,getCurrentValue:m,onAction:w,updateText:T,dataset:V,shouldHide:!1,isInvalid:Ke}},Xle=(o,c)=>cR(o,c,Pq(o),_$,"FontSizeTextUpdate","fontsize"),Qle=o=>{var c;const d={step:1};return(c={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[o])!==null&&c!==void 0?c:d},eue=16,tue=o=>o>=0,nue=o=>{const c=()=>o.queryCommandValue("FontSize");return{updateInputValue:m=>xo(m,Hh,{text:c()}),onAction:(m,S)=>o.execCommand("FontSize",!1,m,{skip_focus:!S}),getNewValue:(m,S)=>{Zs(m,["unsupportedLength","empty"]);const w=c(),T=Zs(m,["unsupportedLength","empty"]).or(Zs(w,["unsupportedLength","empty"])),V=T.map(pe=>pe.value).getOr(eue),F=nz(o),W=T.map(pe=>pe.unit).filter(pe=>pe!=="").getOr(F),Q=S(V,Qle(W).step),oe=`${tue(Q)?Q:V}${W}`;return oe!==w&&Aie(o,{value:oe}),oe}}},w$=(o,c)=>qle(o,c,nue(o),"fontsizeinput"),oue=(o,c)=>{const d=Pw(c,Pq(o));o.ui.registry.addNestedMenuItem("fontsize",{text:Mq,onSetup:$u(o),getSubmenuItems:()=>d.items.validateItems(d.getStyleItems())})},sue="Formats",A$=o=>ka(o)?"Formats":"Format {0}",T$=(o,c)=>{const d="Formats",m=T=>()=>o.formatter.match(T),S=T=>()=>{const V=o.formatter.get(T);return V!==void 0?z.some({tag:V.length>0&&(V[0].inline||V[0].block)||"div",styles:o.dom.parseStyle(o.formatter.getCssText(T))}):z.none()},w=T=>{const V=oe=>RG(oe)?Ue(oe.items,V):jF(oe)?[{title:oe.title,format:oe.format}]:[],F=Ue(zF(o),V),Q=Tq(o,M(F)).fold(M({title:d,tooltipLabel:""}),oe=>({title:oe.title,tooltipLabel:oe.title}));xo(T,Hh,{text:Q.title}),JH(o,{value:Q.tooltipLabel})};return{tooltip:Nw(o,A$(""),""),text:z.some(d),icon:z.none(),isSelectedFor:m,getCurrentValue:z.none,getPreviewFor:S,onAction:JW(o),updateText:w,shouldHide:qj(o),isInvalid:T=>!o.formatter.canApply(T.format),dataset:c}},rue=(o,c)=>{const d={type:"advanced",...c.styles};return cR(o,c,T$(o,d),A$,"StylesTextUpdate","styles")},iue=(o,c)=>{const d={type:"advanced",...c.styles},m=Pw(c,T$(o,d));o.ui.registry.addNestedMenuItem("styles",{text:sue,onSetup:$u(o,()=>m.getStyleItems().length>0),getSubmenuItems:()=>m.items.validateItems(m.getStyleItems())})},aue=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],uR=(o,c)=>(d,m,S,w)=>{const T=o(d).mapError(V=>Cv(V)).getOrDie();return c(T,m,S,w)},cue={button:uR(LM,(o,c,d,m)=>gq(o,c.shared.providers,m)),togglebutton:uR(VM,(o,c,d,m)=>vq(o,c.shared.providers,m)),menubutton:uR(iW,(o,c,d,m)=>JI(o,"tox-tbtn",c,z.none(),!1,m)),splitbutton:uR(FM,(o,c,d,m)=>Dle(o,c.shared,m)),grouptoolbarbutton:uR(nie,(o,c,d,m)=>{const S=d.ui.registry.getAll().buttons,w=V=>LN(d,{buttons:S,toolbar:V,allowToolbarGroups:!1},c,z.none()),T={[GT]:c.shared.header.isPositionedAtTop()?Tm.TopToBottom:Tm.BottomToTop};switch(dC(d)){case Pp.floating:return xN(o,c,w,T,m);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},lue=(o,c,d,m)=>Vt(cue,o.type).fold(()=>(console.error("skipping button defined by",o),z.none()),S=>z.some(S(o,c,d,m))),O$={styles:rue,fontsize:Xle,fontsizeinput:w$,fontfamily:Wle,blocks:$le,align:Aq,navigateback:Ple},uue=o=>{const c=Et(aue,d=>{const m=Fo(d.items,S=>Pn(o,S)||Pn(O$,S));return{name:d.name,items:m}});return Fo(c,d=>d.items.length>0)},due=o=>{const c=o.split("|");return Et(c,d=>({items:d.trim().split(" ")}))},fue=o=>Y(o,c=>(Pn(c,"name")||Pn(c,"label"))&&Pn(c,"items")),pue=o=>{const c=o.toolbar,d=o.buttons;return c===!1?[]:c===void 0||c===!0?uue(d):v(c)?due(c):fue(c)?c:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},PN=(o,c,d,m,S,w)=>Vt(c,d.toLowerCase()).orThunk(()=>w.bind(T=>Wo(T,V=>Vt(c,V+d.toLowerCase())))).fold(()=>Vt(O$,d.toLowerCase()).map(T=>T(o,S)),T=>T.type==="grouptoolbarbutton"&&!m?(console.warn(`Ignoring the '${d}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),z.none()):lue(T,S,o,d.toLowerCase())),LN=(o,c,d,m)=>{const S=pue(c),w=Et(S,T=>{const V=Ue(T.items,F=>F.trim().length===0?[]:PN(o,c.buttons,F,c.allowToolbarGroups,d,m).map(W=>Array.isArray(W)?W:[W]).getOr([]));return{title:z.from(o.translate(T.name)),label:Gi(T.label!==void 0,o.translate(T.label)),items:V}});return Fo(w,T=>T.items.length>0)},dR=(o,c,d,m)=>{const S=c.mainUi.outerContainer,w=d.toolbar,T=d.buttons;if(Y(w,v)){const V=w.map(F=>{const W={toolbar:F,buttons:T,allowToolbarGroups:d.allowToolbarGroups};return LN(o,W,m,z.none())});$r.setToolbars(S,V)}else $r.setToolbar(S,LN(o,d,m,z.none()))},fR=Wr(),Lq=fR.os.isiOS()&&fR.os.version.major<=12,hue=(o,c)=>{const{uiMotherships:d}=c,m=o.dom;let S=o.getWin();const w=o.getDoc().documentElement,T=mn(br(S.innerWidth,S.innerHeight)),V=mn(br(w.offsetWidth,w.offsetHeight)),F=()=>{const pe=T.get();(pe.left!==S.innerWidth||pe.top!==S.innerHeight)&&(T.set(br(S.innerWidth,S.innerHeight)),YH(o))},W=()=>{const pe=o.getDoc().documentElement,Ee=V.get();(Ee.left!==pe.offsetWidth||Ee.top!==pe.offsetHeight)&&(V.set(br(pe.offsetWidth,pe.offsetHeight)),YH(o))},Q=pe=>{zW(o,pe)};m.bind(S,"resize",F),m.bind(S,"scroll",Q);const oe=nd(kn.fromDom(o.getBody()),"load",W);o.on("hide",()=>{Jt(d,pe=>{jo(pe.element,"display","none")})}),o.on("show",()=>{Jt(d,pe=>{Ds(pe.element,"display")})}),o.on("NodeChange",W),o.on("remove",()=>{oe.unbind(),m.unbind(S,"resize",F),m.unbind(S,"scroll",Q),S=null})},mue=(o,c,d)=>{Qy(o)&&xh(d.mainUi.mothership.element,d.popupUi.mothership),WS(c,d.dialogUi.mothership)};var gue=Object.freeze({__proto__:null,render:(o,c,d,m,S)=>{const{mainUi:w,uiMotherships:T}=c,V=mn(0),F=w.outerContainer;wle(o);const W=kn.fromDom(S.targetNode),Q=ji(Ei(W));xh(W,w.mothership),mue(o,Q,c),o.on("PostRender",()=>{$r.setSidebar(F,d.sidebar,lz(o))}),o.on("SkinLoaded",()=>{dR(o,c,d,m),V.set(o.getWin().innerWidth),$r.setMenubar(F,dq(o,d)),$r.setViews(F,d.views),hue(o,c)});const oe=$r.getSocket(F).getOrDie("Could not find expected socket element");if(Lq){_i(oe.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const Pe=am(()=>{o.dispatch("ScrollContent")},20),qe=vr(oe.element,"scroll",Pe.throttle);o.on("remove",qe.unbind)}RW(o,c),o.addCommand("ToggleSidebar",(Pe,qe)=>{$r.toggleSidebar(F,qe),KW(o)}),o.addQueryValueHandler("ToggleSidebar",()=>{var Pe;return(Pe=$r.whichSidebar(F))!==null&&Pe!==void 0?Pe:""}),o.addCommand("ToggleView",(Pe,qe)=>{if($r.toggleView(F,qe)){const Le=F.element;w.mothership.broadcastOn([Mg()],{target:Le}),Jt(T,Je=>{Je.broadcastOn([Mg()],{target:Le})}),R($r.whichView(F))&&(o.focus(),o.nodeChanged(),$r.refreshToolbar(F)),ZW(o)}}),o.addQueryValueHandler("ToggleView",()=>{var Pe;return(Pe=$r.whichView(F))!==null&&Pe!==void 0?Pe:""});const pe=dC(o),Ee=()=>{$r.refreshToolbar(c.mainUi.outerContainer)};(pe===Pp.sliding||pe===Pp.floating)&&o.on("ResizeWindow ResizeEditor ResizeContent",()=>{const Pe=o.getWin().innerWidth;Pe!==V.get()&&(Ee(),V.set(Pe))});const Se={setEnabled:Pe=>{Ew(c,Pe?"setEnabled":"setDisabled")},isEnabled:()=>!So.isDisabled(F)};return{iframeContainer:oe.element.dom,editorContainer:F.element.dom,api:Se}}});const vue=o=>/^[0-9\.]+(|px)$/i.test(""+o)?z.some(parseInt(""+o,10)):z.none(),Bw=o=>q(o)?o+"px":o,pR=(o,c,d)=>{const m=c.filter(w=>o<w),S=d.filter(w=>o>w);return m.or(S).getOr(o)},Bq=(o,c)=>{if(typeof c=="number")return z.from(c);const d=/^([0-9.]+)(pt|em|px)$/.exec(c.trim());if(d){const m=d[2],S=Number.parseFloat(d[1]);if(Number.isNaN(S)||S<0)return z.none();if(m==="em")return z.from(S*Number.parseFloat(window.getComputedStyle(o.dom).fontSize));if(m==="pt")return z.from(S*(72/96));if(m==="px")return z.from(S)}return z.none()},Vq=o=>{const c=Bq(kn.fromDom(o.targetElm),EV(o)),d=AV(o),m=TV(o);return c.map(S=>pR(S,d,m))},Hq=o=>Vq(o).getOr(EV(o)),Fq=o=>{const c=_V(o),d=wV(o),m=sM(o);return vue(c).map(S=>pR(S,d,m))},$q=o=>Fq(o).getOr(_V(o)),{ToolbarLocation:I$,ToolbarMode:Uq}=Hoe,bue=40,yue=(o,c,d,m,S)=>{const{mainUi:w,uiMotherships:T}=d,V=vI.DOM,F=uw(o),W=b0(o),Q=sM(o).or(Fq(o)),oe=m.shared.header,pe=oe.isPositionedAtTop,Ee=150,Se=dC(o),Pe=Se===Uq.sliding||Se===Uq.floating,qe=mn(!1),Le=()=>qe.get()&&!o.removed,Je=po=>Pe?po.fold(M(0),on=>on.components().length>1?fa(on.components()[1].element):0):0,nt=po=>{switch(OV(o)){case I$.auto:const on=$r.getToolbar(w.outerContainer),Ln=Je(on),Uo=fa(po.element)-Ln,fs=Sa(c);if(fs.y>Uo)return"top";{const us=Yt(c),ar=Math.max(us.dom.scrollHeight,fa(us));return fs.bottom<ar-Uo||kl().bottom<fs.bottom-Uo?"bottom":"top"}case I$.bottom:return"bottom";case I$.top:default:return"top"}},Tt=po=>{S.on(on=>{Mi.setModes(on,[po]),oe.setDockingMode(po);const Ln=pe()?Tm.TopToBottom:Tm.BottomToTop;Lo(on.element,GT,Ln)})},xt=()=>{S.on(po=>{const on=Q.getOrThunk(()=>ly().width-iu(c).left-10);jo(po.element,"max-width",on+"px")})},jn=(po,on)=>{S.on(Ln=>{const Uo=$r.getToolbar(w.outerContainer),fs=Je(Uo),Co=Sa(c),us=dn(o,w.outerContainer.element),ar=()=>us.fold(()=>Co.x,Ya=>{const bd=Sa(Ya);return de(Ya,ku())?Co.x:Co.x-bd.x}),nr=()=>us.fold(()=>pe()?Math.max(Co.y-fa(Ln.element)+fs,0):Co.bottom,Ya=>{var bd;const Su=Sa(Ya),ia=(bd=Ya.dom.scrollTop)!==null&&bd!==void 0?bd:0,$h=de(Ya,ku())?Math.max(Co.y-fa(Ln.element)+fs,0):Co.y-Su.y+ia-fa(Ln.element)+fs;return pe()?$h:Co.bottom}),Uu=ar(),ti=Gi(po,Math.ceil(w.outerContainer.element.dom.getBoundingClientRect().width)).filter(Ya=>Ya>Ee).map(Ya=>{const bd=on.getOr(zi()),Su=window.innerWidth-(Uu-bd.left),ia=Math.max(Math.min(Ya,Su),Ee);return Su<Ya&&jo(w.outerContainer.element,"width",ia+"px"),{width:ia+"px"}}).getOr({width:"max-content"}),ml={position:"absolute",left:Math.round(Uu)+"px",top:nr()+"px"};_i(w.outerContainer.element,{...ml,...ti})})},dn=(po,on)=>Qy(po)?bv(on):z.none(),pn=()=>{Jt(T,po=>{po.broadcastOn([hl()],{})})},an=()=>!F&&(Gc(w.outerContainer.element).left+dh(w.outerContainer.element)>=window.innerWidth-bue||li(w.outerContainer.element,"width").isSome())?(jo(w.outerContainer.element,"position","absolute"),jo(w.outerContainer.element,"left","0px"),Ds(w.outerContainer.element,"width"),!0):!1,Ro=po=>{if(!Le())return;F||xt();const on=zi(),Ln=F?!1:an();if(Pe&&$r.refreshToolbar(w.outerContainer),!F){const Uo=zi(),fs=Gi(on.left!==Uo.left,on);jn(Ln,fs),fs.each(Co=>{fh(Co.left,Uo.top)})}W&&S.on(po),pn()},mo=()=>F||!W||!Le()?!1:S.get().exists(po=>{const on=oe.getDockingMode(),Ln=nt(po);return Ln!==on?(Tt(Ln),!0):!1});return{isVisible:Le,isPositionedAtTop:pe,show:()=>{qe.set(!0),jo(w.outerContainer.element,"display","flex"),V.addClass(o.getBody(),"mce-edit-focus"),Jt(T,po=>{Ds(po.element,"display")}),mo(),Qy(o)?Ro(po=>Mi.isDocked(po)?Mi.reset(po):Mi.refresh(po)):Ro(Mi.refresh)},hide:()=>{qe.set(!1),jo(w.outerContainer.element,"display","none"),V.removeClass(o.getBody(),"mce-edit-focus"),Jt(T,po=>{jo(po.element,"display","none")})},update:Ro,updateMode:()=>{mo()&&Ro(Mi.reset)},repositionPopups:pn}},jq=(o,c)=>{const d=Sa(o);return{pos:c?d.y:d.bottom,bounds:d}},hR=(o,c,d,m)=>{const S=mn(jq(c,d.isPositionedAtTop())),w=W=>{const{pos:Q,bounds:oe}=jq(c,d.isPositionedAtTop()),{pos:pe,bounds:Ee}=S.get(),Se=oe.height!==Ee.height||oe.width!==Ee.width;S.set({pos:Q,bounds:oe}),Se&&YH(o,W),d.isVisible()&&(pe!==Q?d.update(Mi.reset):Se&&(d.updateMode(),d.repositionPopups()))};m||(o.on("activate",d.show),o.on("deactivate",d.hide)),o.on("SkinLoaded ResizeWindow",()=>d.update(Mi.reset)),o.on("NodeChange keydown",W=>{requestAnimationFrame(()=>w(W))});let T=0;const V=Cc(()=>d.update(Mi.refresh),33);o.on("ScrollWindow",()=>{const W=zi().left;W!==T&&(T=W,V.throttle()),d.updateMode()}),Qy(o)&&o.on("ElementScroll",W=>{d.update(Mi.refresh)});const F=ii();F.set(nd(kn.fromDom(o.getBody()),"load",W=>w(W.raw))),o.on("remove",()=>{F.clear()})};var Sue=Object.freeze({__proto__:null,render:(o,c,d,m,S)=>{const{mainUi:w}=c,T=$o(),V=kn.fromDom(S.targetNode),F=yue(o,V,c,m,T),W=Jj(o);Ale(o);const Q=()=>{if(T.isSet()){F.show();return}T.set($r.getHeader(w.outerContainer).getOrDie());const pe=MV(o);Qy(o)?(xh(V,w.mothership),xh(V,c.popupUi.mothership)):WS(pe,w.mothership),WS(pe,c.dialogUi.mothership);const Ee=()=>{dR(o,c,d,m),$r.setMenubar(w.outerContainer,dq(o,d)),F.show(),hR(o,V,F,W),o.nodeChanged()};W?o.once("SkinLoaded",Ee):Ee()};o.on("show",Q),o.on("hide",F.hide),W||(o.on("focus",Q),o.on("blur",F.hide)),o.on("init",()=>{(o.hasFocus()||W)&&Q()}),RW(o,c);const oe={show:Q,hide:F.hide,setEnabled:pe=>{Ew(c,pe?"setEnabled":"setDisabled")},isEnabled:()=>!So.isDisabled(w.outerContainer)};return{editorContainer:w.outerContainer.element.dom,api:oe}}});const Cue=()=>{const o=$o(),c=$o(),d=$o();return{dialogUi:o,popupUi:c,mainUi:d,getUiMotherships:()=>{const w=o.get().map(V=>V.mothership),T=c.get().map(V=>V.mothership);return w.fold(()=>T.toArray(),V=>T.fold(()=>[V],F=>de(V.element,F.element)?[V]:[V,F]))},lazyGetInOuterOrDie:(w,T)=>()=>d.get().bind(V=>T(V.outerContainer)).getOrDie(`Could not find ${w} element in OuterContainer`)}},zq="contexttoolbar-show",Wq="contexttoolbar-hide",BN=(o,c,d)=>({setInputEnabled:m=>{!m&&d&&ja(d),So.set(o,!m)},isInputEnabled:()=>!So.isDisabled(o),hide:()=>{Rs(o,UE())},back:()=>{Rs(o,kN)},getValue:()=>c.get().getOrThunk(()=>zn.getValue(o)),setValue:m=>{o.getSystem().isConnected()?zn.setValue(o,m):c.set(m)}}),VN=(o,c,d)=>{const S=Sn(o.element).bind(w=>o.getSystem().getByDom(w).toOptional());return BN(S.getOr(o),c,d)},Gq=(o,c,d)=>Ft(RF,(m,S)=>{const w=o.get(m),T=BN(w,d,m.element);c.onAction(T,S.event.buttonApi)}),Eue=(o,c,d,m)=>{const{primary:S,...w}=c.original,T=_p(LM({...w,type:"button",onAction:K}));return qv(T,d,[Gq(o,c,m)])},_ue=(o,c,d,m)=>{const{primary:S,...w}=c.original,T=_p(VM({...w,type:"togglebutton",onAction:K}));return bq(T,d,[Gq(o,c,m)])},wue=o=>o.type==="contextformtogglebutton",mR=(o,c,d,m)=>wue(c)?_ue(o,c,d,m):Eue(o,c,d,m),R$=(o,c,d,m)=>{const S=Et(c,V=>tr(mR(o,V,d,m)));return{asSpecs:()=>Et(S,V=>V.asSpec()),findPrimary:V=>Wo(c,(F,W)=>F.primary?z.from(S[W]).bind(Q=>Q.getOpt(V)).filter(be(So.isDisabled)):z.none())}},Aue=(o,c,d,m)=>{const{width:S,height:w}=o.initValue();let T=mN;const V=Un("ratio-event"),F=dn=>BN(dn,m),W=dn=>Bp(dn,{tag:"span",classes:["tox-icon","tox-lock-icon__"+dn]},c.icons),Q=()=>!1,oe=o.label.getOr("Constrain proportions"),pe=c.translate(oe),Ee=ra.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-lock-context-form-size-input","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":pe,"data-mce-name":oe}},components:[W("lock"),W("unlock")],buttonBehaviours:Tn([So.config({disabled:Q}),qr.config({}),vi.config(c.tooltips.getConfig({tooltipText:pe}))])}),Se=dn=>({dom:{tag:"div",classes:["tox-context-form__group"]},components:dn}),Pe=dn=>Wd(dn.element,"div.tox-focusable-wrapper").fold(z.none,an=>(ja(an),z.some(!0))),qe=dn=>ws.parts.field({factory:jg,inputClasses:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:dn?S:w,inputBehaviours:Tn([So.config({disabled:Q}),qr.config({}),Qo("size-input-toolbar-events",[Ft(Tp(),(pn,an)=>{xo(pn,V,{isField1:dn})})]),wo.config({mode:"special",onEnter:d,onEscape:Pe})]),selectOnFocus:!1}),Le=dn=>({dom:{tag:"label",classes:["tox-label"]},components:[gi(c.translate(dn))]}),Je=dn=>({dom:{tag:"div",classes:["tox-focusable-wrapper","tox-toolbar-nav-item"]},components:[dn],behaviours:Tn([qr.config({}),ns.config({}),wo.config({mode:"special",onEnter:pn=>yr(pn.element,"input").fold(z.none,Ro=>(ja(Ro),z.some(!0)))})])}),nt=Je(ra.parts.field1(Se([ws.parts.label(Le("Width:")),qe(!0)]))),Tt=Je(ra.parts.field2(Se([ws.parts.label(Le("Height:")),qe(!1)]))),xt=mn(K),jn=[Fp({onBeforeSetup:dn=>yr(dn.element,"input").each(ja),onSetup:o.onSetup,getApi:F},xt),NH({getApi:F},xt,m)];return ra.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[nt,Se([Ee]),Tt],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(dn,pn,an)=>{hN(zn.getValue(dn)).each(Ro=>{T(Ro).each(mo=>{zn.setValue(pn,nG(mo))})})},onInput:dn=>Rs(dn,sN),coupledFieldBehaviours:Tn([ns.config({}),wo.config({mode:"flow",focusInside:xp.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-focusable-wrapper"}),So.config({disabled:Q,onDisabled:dn=>{ra.getField1(dn).bind(ws.getField).each(So.disable),ra.getField2(dn).bind(ws.getField).each(So.disable),ra.getLock(dn).each(So.disable)},onEnabled:dn=>{ra.getField1(dn).bind(ws.getField).each(So.enable),ra.getField2(dn).bind(ws.getField).each(So.enable),ra.getLock(dn).each(So.enable)}}),bi(()=>c.checkUiComponentContext("mode:design")),Qo("size-input-toolbar-events2",[Ft(V,(dn,pn)=>{const an=pn.event.isField1,Ro=an?ra.getField1(dn):ra.getField2(dn),mo=an?ra.getField2(dn):ra.getField1(dn),Ns=Ro.map(zn.getValue).getOr(""),Vo=mo.map(zn.getValue).getOr("");T=MF(Ns,Vo)}),Ft(sN,dn=>o.onInput(F(dn))),...jn])])})},qq=(o,c,d)=>ws.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...o.toArray(),c],fieldBehaviours:Tn([So.config({disabled:()=>d.checkUiComponentContext("mode:design").shouldDisable,onDisabled:m=>{Mle(m),ws.getField(m).each(So.disable)},onEnabled:m=>{ws.getField(m).each(So.enable)}})])}),Kq=(o,c,d,m)=>{const S=mn(K),w=F=>VN(F,m),T=o.label.map(F=>ws.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[gi(c.translate(F))]})),V=ws.parts.field({factory:jg,type:"range",inputClasses:["tox-toolbar-slider__input","tox-toolbar-nav-item"],inputAttributes:{min:String(o.min()),max:String(o.max())},data:o.initValue().toString(),fromInputValue:F=>Sc(F).getOr(o.min()),toInputValue:F=>String(F),inputBehaviours:Tn([So.config({disabled:()=>c.checkUiComponentContext("mode:design").shouldDisable}),bi(()=>c.checkUiComponentContext("mode:design")),wo.config({mode:"special",onEnter:d,onLeft:(F,W)=>(W.cut(),z.none()),onRight:(F,W)=>(W.cut(),z.none())}),Qo("slider-events",[Fp({onSetup:o.onSetup,getApi:w,onBeforeSetup:wo.focusIn},S),NH({getApi:w},S,m),Ft(Ag(),F=>{o.onInput(w(F))})])])});return qq(T,V,c)},x$=(o,c,d,m)=>{const S=mn(K),w=Q=>VN(Q,m),T=o.label.map(Q=>ws.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[gi(c.translate(Q))]})),F={...o.placeholder.map(Q=>({placeholder:c.translate(Q)})).getOr({})},W=ws.parts.field({factory:jg,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-item"],inputAttributes:F,data:o.initValue(),selectOnFocus:!0,inputBehaviours:Tn([So.config({disabled:()=>c.checkUiComponentContext("mode:design").shouldDisable}),bi(()=>c.checkUiComponentContext("mode:design")),wo.config({mode:"special",onEnter:d,onLeft:(Q,oe)=>(oe.cut(),z.none()),onRight:(Q,oe)=>(oe.cut(),z.none())}),Qo("input-events",[Fp({onSetup:o.onSetup,getApi:Q=>Wd(Q.element,".tox-toolbar").bind(pe=>yr(pe,"button:enabled")).fold(()=>VN(Q,m),pe=>VN(Q,m,pe)),onBeforeSetup:wo.focusIn},S),NH({getApi:w},S,m),Ft(Ag(),Q=>{o.onInput(w(Q))})])])});return qq(T,W,c)},HN=(o,c,d)=>{const m=$o(),w=tr(o(d,W=>V.findPrimary(W).orThunk(()=>F.findPrimary(W)).map(Q=>(_S(Q),!0)),m)),T=Hs(c.commands,W=>W.align==="start"),V=R$(w,T.pass,d,m),F=R$(w,T.fail,d,m);return Fo([{title:z.none(),label:z.none(),items:V.asSpecs()},{title:z.none(),label:z.none(),items:[w.asSpec()]},{title:z.none(),label:z.none(),items:F.asSpecs()}],W=>W.items.length>0)},D$=(o,c)=>{switch(o.type){case"contextform":return HN(De(x$,o),o,c);case"contextsliderform":return HN(De(Kq,o),o,c);case"contextsizeinputform":return HN(De(Aue,o),o,c)}},Vw={renderContextForm:(o,c,d)=>sR({type:o,uid:Un("context-toolbar"),initGroups:D$(c,d),onEscape:z.none,cyclicKeying:!0,providers:d}),buildInitGroups:D$},gR=(o,c,d)=>c.bottom-o.y>=d&&o.bottom-c.y>=d,FN=o=>{const c=o.getBoundingClientRect();if(c.height<=0&&c.width<=0){const d=Ua(kn.fromDom(o.startContainer),o.startOffset).element;return(Hd(d)?Sn(d):z.some(d)).filter(Ec).map(S=>S.dom.getBoundingClientRect()).getOr(c)}else return c},vR=o=>{const c=o.selection.getRng(),d=FN(c);if(o.inline){const m=zi();return La(m.left+d.left,m.top+d.top,d.width,d.height)}else{const m=gh(kn.fromDom(o.getBody()));return La(m.x+d.left,m.y+d.top,d.width,d.height)}},k$=(o,c)=>c.filter(d=>Qs(d)&&Me(d)).map(gh).getOrThunk(()=>vR(o)),Zq=(o,c,d)=>{const m=Math.max(o.x+d,c.x),S=Math.min(o.right-d,c.right);return{x:m,width:S-m}},$N=(o,c,d,m,S,w)=>{const T=kn.fromDom(o.getContainer()),V=yr(T,".tox-editor-header").getOr(T),F=Sa(V),W=F.y>=c.bottom,Q=m&&!W;if(o.inline&&Q)return{y:Math.max(F.bottom+w,d.y),bottom:d.bottom};if(o.inline&&!Q)return{y:d.y,bottom:Math.min(F.y-w,d.bottom)};const oe=S==="line"?Sa(T):c;return Q?{y:Math.max(F.bottom+w,d.y),bottom:Math.min(oe.bottom-w,d.bottom)}:{y:Math.max(oe.y+w,d.y),bottom:Math.min(F.y-w,d.bottom)}},M$=(o,c,d,m=0)=>{const S=ly(window),w=Sa(kn.fromDom(o.getContentAreaContainer())),T=aM(o)||cM(o)||yI(o),{x:V,width:F}=Zq(w,S,m);if(o.inline&&!T)return La(V,S.y,F,S.height);{const W=c.header.isPositionedAtTop(),{y:Q,bottom:oe}=$N(o,w,S,W,d,m);return La(V,Q,F,oe-Q)}},bR=12,UN={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},Yq={maxHeightFunction:Gb(),maxWidthFunction:WT()},Jq=(o,c)=>{const d=o.selection.getRng(),m=Ua(kn.fromDom(d.startContainer),d.startOffset);return d.startContainer===d.endContainer&&d.startOffset===d.endOffset-1&&de(m.element,c)},Tue=(o,c,d)=>{const m=li(o,"position");jo(o,"position",c);const S=d(o);return m.each(w=>jo(o,"position",w)),S},Xq=o=>o==="node",jN=(o,c,d,m,S)=>{const w=vR(o),T=m.lastElement().exists(V=>de(d,V));if(Jq(o,d))return T?Nl:Bu;if(T)return Tue(c,m.getMode(),()=>gR(w,Sa(c),-20)&&!m.isReposition()?Gx:Nl);{const V=m.getMode()==="fixed"?S.y+zi().top:S.y,F=fa(c)+bR;return V+F<=w.y?Bu:Iy}},Qq=(o,c,d,m)=>{const S=F=>(W,Q,oe,pe,Ee)=>{const Se=jN(o,pe,F,d,Ee),Pe={...W,y:Ee.y,height:Ee.height};return{...Se(Pe,Q,oe,pe,Ee),alwaysFit:!0}},w=F=>Xq(m)?[S(F)]:[];return c?{onLtr:F=>[Ea,Ha,hi,Xc,Za,uc].concat(w(F)),onRtl:F=>[Ea,hi,Ha,Za,Xc,uc].concat(w(F))}:{onLtr:F=>[uc,Ea,Xc,Ha,Za,hi].concat(w(F)),onRtl:F=>[uc,Ea,Za,hi,Xc,Ha].concat(w(F))}},Oue=(o,c,d,m)=>c==="line"?{bubble:Xd(bR,0,UN),layouts:{onLtr:()=>[c_],onRtl:()=>[l_]},overrides:Yq}:{bubble:Xd(0,bR,UN,1/bR),layouts:Qq(o,d,m,c),overrides:Yq},N$=(o,c)=>{const d=Fo(c,w=>w.predicate(o.dom)),{pass:m,fail:S}=Hs(d,w=>w.type==="contexttoolbar");return{contextToolbars:m,contextForms:S}},Iue=o=>{if(o.length<=1)return o;{const c=w=>io(o,T=>T.position===w),d=w=>Fo(o,T=>T.position===w),m=c("selection"),S=c("node");if(m||S)if(S&&m){const w=d("node"),T=Et(d("selection"),V=>({...V,position:"node"}));return w.concat(T)}else return d(m?"selection":"node");else return d("line")}},Rue=o=>{if(o.length<=1)return o;{const c=m=>bt(o,S=>S.position===m);return c("selection").orThunk(()=>c("node")).orThunk(()=>c("line")).map(m=>m.position).fold(()=>[],m=>Fo(o,S=>S.position===m))}},xue=(o,c,d)=>{const m=N$(o,c);if(m.contextForms.length>0)return z.some({elem:o,toolbars:[m.contextForms[0]]});{const S=N$(o,d);if(S.contextForms.length>0)return z.some({elem:o,toolbars:[S.contextForms[0]]});if(m.contextToolbars.length>0||S.contextToolbars.length>0){const w=Iue(m.contextToolbars.concat(S.contextToolbars));return z.some({elem:o,toolbars:w})}else return z.none()}},eK=(o,c,d)=>o(c)?z.none():IE(c,m=>{if(Ec(m)){const{contextToolbars:S,contextForms:w}=N$(m,d.inNodeScope),T=w.length>0?w:Rue(S);return T.length>0?z.some({elem:m,toolbars:T}):z.none()}else return z.none()},o),tK=(o,c)=>{const d=kn.fromDom(c.getBody()),m=T=>de(T,d),S=T=>!m(T)&&!ge(d,T),w=kn.fromDom(c.selection.getNode());return S(w)?z.none():xue(w,o.inNodeScope,o.inEditorScope).orThunk(()=>eK(m,w,o))},nK=(o,c)=>{const d={},m=[],S=[],w={},T={},V=(Q,oe)=>{const pe=_p(_H(oe));d[Q]=pe,pe.launch.map(Ee=>{w["form:"+Q]={...oe.launch,type:Ee.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{c(pe)}}}),pe.scope==="editor"?S.push(pe):m.push(pe),T[Q]=pe},F=(Q,oe)=>{Ure(oe).each(pe=>{pe.launch.isSome()&&(w["toolbar:"+Q]={...oe.launch,type:"button",onAction:()=>{c(pe)}}),oe.scope==="editor"?S.push(pe):m.push(pe),T[Q]=pe})},W=Jn(o);return Jt(W,Q=>{const oe=o[Q];oe.type==="contextform"||oe.type==="contextsliderform"||oe.type==="contextsizeinputform"?V(Q,oe):oe.type==="contexttoolbar"&&F(Q,oe)}),{forms:d,inNodeScope:m,inEditorScope:S,lookupTable:T,formNavigators:w}},zN="tox-pop--transition",Due=o=>o===lR.ENTER||o===lR.SPACEBAR,oK=(o,c,d,m)=>{const S=m.backstage,w=S.shared,T=Wr().deviceType.isTouch,V=$o(),F=$o(),W=$o(),Q=Nle({sink:d,onEscape:()=>(o.focus(),YW(o),z.some(!0)),onHide:()=>{YW(o)},onBack:()=>{Oie(o)},focusElement:Vo=>{o.getBody().contains(Vo.dom)?o.focus():ja(Vo)}}),oe=O(Q.sketch),pe=()=>{const Vo=W.get().getOr("node"),as=Xq(Vo)?1:0;return M$(o,w,Vo,as)},Ee=()=>!o.removed&&!(T()&&S.isContextMenuOpen()),Se=Vo=>zc(bc(Vo,V.get(),de),!0),Pe=()=>{if(Ee()){const Vo=pe(),as=zc(W.get(),"node")?k$(o,V.get()):vR(o);return Vo.height<=0||!gR(as,Vo,.01)}else return!0},qe=()=>{V.clear(),F.clear(),W.clear(),Ni.hide(oe)},Le=()=>{if(Ni.isOpen(oe)){const Vo=oe.element;Ds(Vo,"display"),Pe()?jo(Vo,"display","none"):(F.set(0),Ni.reposition(oe))}},Je=Vo=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Vo],behaviours:Tn([wo.config({mode:"acyclic"}),Qo("pop-dialog-wrap-events",[Qr(as=>{o.shortcuts.add("ctrl+F9","focus statusbar",()=>wo.focusIn(as))}),Ah(as=>{o.shortcuts.remove("ctrl+F9")})])])}),nt=Vo=>{const as=dn([Vo]);xo(oe,b$,{forwardContents:Je(as)})},Tt=ul(()=>nK(c,nt)),xt=(Vo,as)=>LN(o,{buttons:Vo,toolbar:as.items,allowToolbarGroups:!1},m.backstage,z.some(["form:","toolbar:"])),jn=(Vo,as)=>Vw.buildInitGroups(Vo,as),dn=Vo=>{const{buttons:as}=o.ui.registry.getAll(),po=Tt(),on={...as,...po.formNavigators},Ln=dC(o)===Pp.scrolling?Pp.scrolling:Pp.default,Uo=Ut(Et(Vo,fs=>fs.type==="contexttoolbar"?xt(on,hW(fs)):jn(fs,w.providers)));return sR({type:Ln,uid:Un("context-toolbar"),initGroups:Uo,onEscape:z.none,cyclicKeying:!0,providers:w.providers})},pn=(Vo,as)=>{const po=Vo==="node"?w.anchors.node(as):w.anchors.cursor(),on=Oue(o,Vo,T(),{lastElement:V.get,isReposition:()=>zc(F.get(),0),getMode:()=>vu.getMode(d)});return gr(po,on)},an=(Vo,as)=>{if(Ns.cancel(),!Ee())return;const po=dn(Vo),on=Vo[0].position,Ln=pn(on,as);W.set(on),F.set(1);const Uo=oe.element;Ds(Uo,"display"),Se(as)||(Ii(Uo,zN),vu.reset(d,oe)),Ni.showWithinBounds(oe,Je(po),{anchor:Ln,transition:{classes:[zN],mode:"placement"}},()=>z.some(pe())),as.fold(V.clear,V.set),Pe()&&jo(Uo,"display","none")},Ro=()=>{jo(oe.element,"transition","none"),Le(),Ds(oe.element,"transition")};let mo=!1;const Ns=Cc(()=>{if(!(!o.hasFocus()||o.removed||mo))if(na(oe.element,zN))Ns.throttle();else{const Vo=Tt();tK(Vo,o).fold(qe,as=>{an(as.toolbars,z.some(as.elem))})}},17);o.on("init",()=>{o.on("remove",qe),o.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",Le),o.on("click focus SetContent",Ns.throttle),o.on("keyup",Vo=>{(!Due(Vo.keyCode)||!Q.inSubtoolbar())&&Ns.throttle()}),o.on(Wq,qe),o.on(zq,Vo=>{const as=Tt();Vt(as.lookupTable,Vo.toolbarKey).each(po=>{an([po],Gi(Vo.target!==o,Vo.target)),yq(oe)})}),o.on("focusout",Vo=>{tM.setEditorTimeout(o,()=>{ea(d.element).isNone()&&ea(oe.element).isNone()&&!o.hasFocus()&&qe()},0)}),o.on("SwitchMode",()=>{o.mode.isReadOnly()&&qe()}),o.on("DisabledStateChange",Vo=>{Vo.state&&qe()}),o.on("ExecCommand",({command:Vo})=>{Vo.toLowerCase()==="toggleview"&&qe()}),o.on("AfterProgressState",Vo=>{Vo.state?qe():o.hasFocus()&&Ns.throttle()}),o.on("dragstart",()=>{mo=!0}),o.on("dragend drop",()=>{mo=!1}),o.on("NodeChange",Vo=>{Q.inSubtoolbar()?Ro():ea(oe.element).fold(Ns.throttle,K)})})},sK=o=>{Jt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],d=>{o.ui.registry.addToggleButton(d.name,{tooltip:d.text,icon:d.icon,onAction:Kf(o,d.cmd),onSetup:ZM(o,d.name)})}),o.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:$u(o),onAction:Kf(o,"JustifyNone")})},rK=(o,c)=>{const d=()=>{const m=c.getOptions(o),S=c.getCurrent(o).map(c.hash),w=$o();return Et(m,T=>({type:"togglemenuitem",text:c.display(T),onSetup:V=>{const F=Q=>{Q&&(w.on(oe=>oe.setActive(!1)),w.set(V)),V.setActive(Q)};F(zc(S,c.hash(T)));const W=c.watcher(o,T,F);return()=>{w.clear(),W()}},onAction:()=>c.setCurrent(o,T)}))};o.ui.registry.addMenuButton(c.name,{tooltip:c.text,icon:c.icon,fetch:m=>m(d()),onSetup:c.onToolbarSetup}),o.ui.registry.addNestedMenuItem(c.name,{type:"nestedmenuitem",text:c.text,getSubmenuItems:d,onSetup:c.onMenuSetup})},lye=o=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:mz,hash:c=>Hr(c,["fixed","relative","empty"]).getOr(c),display:we,watcher:(c,d,m)=>c.formatter.formatChanged("lineheight",m,!1,{value:d}).unbind,getCurrent:c=>z.from(c.queryCommandValue("LineHeight")),setCurrent:(c,d)=>c.execCommand("LineHeight",!1,d),onToolbarSetup:$u(o),onMenuSetup:$u(o)}),kue=o=>z.from(Kj(o)).map(d=>({name:"language",text:"Language",icon:"language",getOptions:M(d),hash:m=>N(m.customCode)?m.code:`${m.code}/${m.customCode}`,display:m=>m.title,watcher:(m,S,w)=>{var T;return m.formatter.formatChanged("lang",w,!1,{value:S.code,customValue:(T=S.customCode)!==null&&T!==void 0?T:null}).unbind},getCurrent:m=>{const S=kn.fromDom(m.selection.getNode());return Gd(S,w=>z.some(w).filter(Ec).bind(T=>ic(T,"lang").map(F=>{const W=ic(T,"data-mce-lang").getOrUndefined();return{code:F,customCode:W,title:""}})))},setCurrent:(m,S)=>m.execCommand("Lang",!1,S),onToolbarSetup:m=>{const S=ii();return m.setActive(o.formatter.match("lang",{},void 0,!0)),S.set(o.formatter.formatChanged("lang",m.setActive,!0)),KM(S.clear,$u(o)(m))},onMenuSetup:$u(o)})),Mue=o=>{rK(o,lye(o)),kue(o).each(c=>rK(o,c))},Nue=(o,c)=>{Hle(o,c),Gle(o,c),iue(o,c),Rq(o,c),oue(o,c)},Pue=o=>{o.ui.registry.addContext("editable",()=>o.selection.isEditable()),o.ui.registry.addContext("mode",c=>o.mode.get()===c),o.ui.registry.addContext("any",Ze),o.ui.registry.addContext("formatting",c=>o.formatter.canApply(c)),o.ui.registry.addContext("insert",c=>o.schema.isValidChild(o.selection.getNode().tagName,c))},Lue=o=>TC(o,"NodeChange",c=>{c.setEnabled(o.queryCommandState("outdent")&&o.selection.isEditable())}),Bue=o=>{o.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:Lue(o),onAction:Kf(o,"outdent")}),o.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:$u(o,()=>o.queryCommandState("indent")),onAction:Kf(o,"indent")})},Vue=o=>{Bue(o)},iK=(o,c)=>d=>{d.setActive(c.get());const m=S=>{c.set(S.state),d.setActive(S.state)};return o.on("PastePlainTextToggle",m),KM(()=>o.off("PastePlainTextToggle",m),$u(o)(d))},Hue=o=>{const c=mn(cz(o)),d=()=>o.execCommand("mceTogglePlainTextPaste");o.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:d,onSetup:iK(o,c)}),o.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:d,onSetup:iK(o,c)})},P$=(o,c)=>()=>{o.execCommand("mceToggleFormat",!1,c)},Fue=o=>{T0.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(c,d)=>{o.ui.registry.addToggleButton(c.name,{tooltip:c.text,icon:c.icon,onSetup:ZM(o,c.name),onAction:P$(o,c.name),shortcut:c.shortcut})});for(let c=1;c<=6;c++){const d="h"+c,m=`Access+${c}`;o.ui.registry.addToggleButton(d,{text:d.toUpperCase(),tooltip:"Heading "+c,onSetup:ZM(o,d),onAction:P$(o,d),shortcut:m})}},$ue=o=>{T0.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],c=>{o.ui.registry.addButton(c.name,{tooltip:c.text,icon:c.icon,onAction:Kf(o,c.action),shortcut:c.shortcut,context:c.context})}),T0.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],c=>{o.ui.registry.addButton(c.name,{tooltip:c.text,icon:c.icon,onSetup:$u(o),onAction:Kf(o,c.action)})})},Uue=o=>{T0.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],c=>{o.ui.registry.addToggleButton(c.name,{tooltip:c.text,icon:c.icon,onAction:Kf(o,c.action),onSetup:ZM(o,c.name)})})},aK=o=>{Fue(o),$ue(o),Uue(o)},jue=o=>{T0.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],c=>{o.ui.registry.addMenuItem(c.name,{text:c.text,icon:c.icon,shortcut:c.shortcut,onAction:Kf(o,c.action),context:c.context})}),T0.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],c=>{o.ui.registry.addMenuItem(c.name,{text:c.text,icon:c.icon,shortcut:c.shortcut,onSetup:$u(o),onAction:Kf(o,c.action)})}),o.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:$u(o),onAction:P$(o,"code")})},zue=o=>{aK(o),jue(o)},WN=(o,c)=>TC(o,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",d=>{d.setEnabled(!o.mode.isReadOnly()&&o.undoManager[c]())}),Wue=o=>{o.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:WN(o,"hasUndo"),onAction:Kf(o,"undo")}),o.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:WN(o,"hasRedo"),onAction:Kf(o,"redo")})},Gue=o=>{o.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:WN(o,"hasUndo"),onAction:Kf(o,"undo"),shortcut:"Meta+Z"}),o.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:WN(o,"hasRedo"),onAction:Kf(o,"redo"),shortcut:"Meta+Y"})},L$=o=>{Wue(o),Gue(o)},que=o=>TC(o,"VisualAid",c=>{c.setActive(o.hasVisual)}),Kue=o=>{o.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:que(o),onAction:Kf(o,"mceToggleVisualAid"),context:"any"})},B$=o=>{o.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Kf(o,"mceToggleVisualAid"),context:"any"})},cK=o=>{B$(o),Kue(o)},lK=(o,c)=>{sK(o),zue(o),Nue(o,c),L$(o),Pie(o),cK(o),Vue(o),Mue(o),Hue(o),Pue(o)},Zue=o=>v(o)?o.split(/[ ,]/):o,uK=o=>c=>c.options.get(o),Yue=o=>{const c=o.options.register;c("contextmenu_avoid_overlap",{processor:"string",default:""}),c("contextmenu_never_use_native",{processor:"boolean",default:!1}),c("contextmenu",{processor:d=>d===!1?{value:[],valid:!0}:v(d)||Y(d,v)?{value:Zue(d),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},dK=uK("contextmenu_never_use_native"),Jue=uK("contextmenu_avoid_overlap"),V$=o=>fK(o).length===0,fK=o=>{const c=o.ui.registry.getAll().contextMenus,d=o.options.get("contextmenu");return o.options.isSet("contextmenu")?d:Fo(d,m=>Pn(c,m))},Hw=(o,c)=>({type:"makeshift",x:o,y:c}),Xue=(o,c,d)=>Hw(o.x+c,o.y+d),pK=o=>o.type==="longpress"||o.type.indexOf("touch")===0,H$=o=>{if(pK(o)){const c=o.touches[0];return Hw(c.pageX,c.pageY)}else return Hw(o.pageX,o.pageY)},Que=o=>{if(pK(o)){const c=o.touches[0];return Hw(c.clientX,c.clientY)}else return Hw(o.clientX,o.clientY)},hK=(o,c)=>{const d=vI.DOM.getPos(o);return Xue(c,d.x,d.y)},F$=(o,c)=>c.type==="contextmenu"||c.type==="longpress"?o.inline?H$(c):hK(o.getContentAreaContainer(),Que(c)):mK(o),mK=o=>({type:"selection",root:kn.fromDom(o.selection.getNode())}),ede=o=>({type:"node",node:z.some(kn.fromDom(o.selection.getNode())),root:kn.fromDom(o.getBody())}),gK=(o,c,d)=>{switch(d){case"node":return ede(o);case"point":return F$(o,c);case"selection":return mK(o)}},tde=(o,c,d,m,S,w)=>{const T=d(),V=gK(o,c,w);Iw(T,Wm.CLOSE_ON_EXECUTE,m,{isHorizontalMenu:!1,search:z.none()}).map(F=>{c.preventDefault(),Ni.showMenuAt(S,{anchor:V},{menu:{markers:o1("normal")},data:F})})},nde={onLtr:()=>[Ea,Ha,hi,Xc,Za,uc,Bu,Iy,Pt,Am,Oy,Dp],onRtl:()=>[Ea,hi,Ha,Za,Xc,uc,Bu,Iy,Oy,Dp,Pt,Am]},vK=12,ode={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},sde=(o,c)=>{const d=o.selection;if(d.isCollapsed()||c.touches.length<1)return!1;{const m=c.touches[0],S=d.getRng();return vv(o.getWin(),qd.domRange(S)).exists(T=>T.left<=m.clientX&&T.right>=m.clientX&&T.top<=m.clientY&&T.bottom>=m.clientY)}},rde=o=>{const c=o.selection.getRng(),d=()=>{tM.setEditorTimeout(o,()=>{o.selection.setRng(c)},10),w()};o.once("touchend",d);const m=T=>{T.preventDefault(),T.stopImmediatePropagation()};o.on("mousedown",m,!0);const S=()=>w();o.once("longpresscancel",S);const w=()=>{o.off("touchend",d),o.off("longpresscancel",S),o.off("mousedown",m)}},ide=(o,c,d)=>{const m=gK(o,c,d);return{bubble:Xd(0,d==="point"?vK:0,ode),layouts:nde,overrides:{maxWidthFunction:WT(),maxHeightFunction:Gb()},...m}},ade=(o,c,d,m,S,w,T)=>{const V=ide(o,c,w);Iw(d,Wm.CLOSE_ON_EXECUTE,m,{isHorizontalMenu:!0,search:z.none()}).map(F=>{c.preventDefault();const W=T?Pl.HighlightMenuAndItem:Pl.HighlightNone;Ni.showMenuWithinBounds(S,{anchor:V},{menu:{markers:o1("normal"),highlightOnOpen:W},data:F,type:"horizontal"},()=>z.some(M$(o,m.shared,w==="node"?"node":"selection"))),o.dispatch(Wq)})},cde=(o,c,d,m,S,w)=>{const T=Wr(),V=T.os.isiOS(),F=T.os.isMacOS(),W=T.os.isAndroid(),Q=T.deviceType.isTouch(),oe=()=>!(W||V||F&&Q),pe=()=>{const Ee=d();ade(o,c,Ee,m,S,w,oe())};if((F||V)&&w!=="node"){const Ee=()=>{rde(o),pe()};sde(o,c)?Ee():(o.once("selectionchange",Ee),o.once("touchend",()=>o.off("selectionchange",Ee)))}else pe()},bK=o=>v(o)?o==="|":o.type==="separator",$$={type:"separator"},yK=o=>{const c=d=>({text:d.text,icon:d.icon,enabled:d.enabled,shortcut:d.shortcut});if(v(o))return o;switch(o.type){case"separator":return $$;case"submenu":return{type:"nestedmenuitem",...c(o),getSubmenuItems:()=>{const m=o.getSubmenuItems();return v(m)?m:Et(m,yK)}};default:const d=o;return{type:"menuitem",...c(d),onAction:se(d.onAction)}}},SK=(o,c)=>{if(c.length===0)return o;const m=No(o).filter(S=>!bK(S)).fold(()=>[],S=>[$$]);return o.concat(m).concat(c).concat([$$])},CK=(o,c,d)=>{const m=Xt(c,(S,w)=>Vt(o,w.toLowerCase()).map(T=>{const V=T.update(d);if(v(V)&&Il(Hn(V)))return SK(S,V.split(" "));if(A(V)&&V.length>0){const F=Et(V,yK);return SK(S,F)}else return S}).getOrThunk(()=>S.concat([w])),[]);return m.length>0&&bK(m[m.length-1])&&m.pop(),m},lde=(o,c)=>c.ctrlKey&&!dK(o),EK=o=>o.type==="longpress"||Pn(o,"touches"),_K=(o,c)=>!EK(c)&&(c.button!==2||c.target===o.getBody()&&c.pointerType===""),wK=(o,c)=>_K(o,c)?o.selection.getStart(!0):c.target,ude=(o,c)=>{const d=Jue(o),m=_K(o,c)?"selection":"point";if(Il(d)){const S=wK(o,c);return _b(kn.fromDom(S),d)?"node":m}else return m},MC=(o,c,d)=>{const S=Wr().deviceType.isTouch,w=O(Ni.sketch({dom:{tag:"div"},lazySink:c,onEscape:()=>o.focus(),onShow:()=>d.setContextMenuState(!0),onHide:()=>d.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Tn([Qo("dismissContextMenu",[Ft(Fb(),(F,W)=>{er.close(F),o.focus()})])])})),T=()=>Ni.hide(w),V=F=>{if(dK(o)&&F.preventDefault(),lde(o,F)||V$(o))return;const W=ude(o,F),Q=()=>{const pe=wK(o,F),Ee=o.ui.registry.getAll(),Se=fK(o);return CK(Ee.contextMenus,Se,pe)};(S()?cde:tde)(o,F,Q,d,w,W)};o.on("init",()=>{const F="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(S()?"":" ResizeWindow");o.on(F,T),o.on("longpress contextmenu",V)})},GN=40,qN=GN/2,AK=(o,c,d,m,S,w)=>o.fold(()=>eC.snap({sensor:$y(d-qN,m-qN),range:br(S,w),output:$y(z.some(d),z.some(m)),extra:{td:c}}),T=>{const V=d-qN,F=m-qN,W=GN,Q=GN,oe=T.element.dom.getBoundingClientRect();return eC.snap({sensor:$y(V,F),range:br(W,Q),output:$y(z.some(d-oe.width/2),z.some(m-oe.height/2)),extra:{td:c}})}),TK=(o,c,d)=>{const m=(S,w)=>S.exists(T=>de(T,w));return{getSnapPoints:o,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(S,w)=>{const T=w.td;m(c.get(),T)||(c.set(T),d(T))},mustSnap:!0}},OK=o=>tr(zl.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Tn([eC.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:o}),ow.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),dde=(o,c)=>{const d=mn([]),m=mn([]),S=mn(!1),w=$o(),T=$o(),V=dn=>{const pn=gh(dn);return AK(Ee.getOpt(c),dn,pn.x,pn.y,pn.width,pn.height)},F=()=>Et(d.get(),dn=>V(dn)),W=dn=>{const pn=gh(dn);return AK(Se.getOpt(c),dn,pn.right,pn.bottom,pn.width,pn.height)},Q=()=>Et(m.get(),dn=>W(dn)),oe=TK(F,w,dn=>{T.get().each(pn=>{o.dispatch("TableSelectorChange",{start:dn,finish:pn})})}),pe=TK(Q,T,dn=>{w.get().each(pn=>{o.dispatch("TableSelectorChange",{start:pn,finish:dn})})}),Ee=OK(oe),Se=OK(pe),Pe=O(Ee.asSpec()),qe=O(Se.asSpec()),Le=(dn,pn,an,Ro)=>{const mo=pn.dom.getBoundingClientRect();Ds(dn.element,"display");const Ns=cn(kn.fromDom(o.getBody())).dom.innerHeight,Vo=an(mo),as=Ro(mo,Ns);(Vo||as)&&jo(dn.element,"display","none")},Je=(dn,pn,an,Ro)=>{const mo=an(pn);eC.snapTo(dn,mo),Le(dn,pn,as=>as[Ro]<0,(as,po)=>as[Ro]>po)},nt=dn=>Je(Pe,dn,V,"top"),Tt=()=>w.get().each(nt),xt=dn=>Je(qe,dn,W,"bottom"),jn=()=>T.get().each(xt);if(Wr().deviceType.isTouch()){const dn=pn=>Et(pn,kn.fromDom);o.on("TableSelectionChange",pn=>{S.get()||(Mm(c,Pe),Mm(c,qe),S.set(!0));const an=kn.fromDom(pn.start),Ro=kn.fromDom(pn.finish);w.set(an),T.set(Ro),z.from(pn.otherCells).each(mo=>{d.set(dn(mo.upOrLeftCells)),m.set(dn(mo.downOrRightCells)),nt(an),xt(Ro)})}),o.on("ResizeEditor ResizeWindow ScrollContent",()=>{Tt(),jn()}),o.on("TableSelectionClear",()=>{S.get()&&(Nm(Pe),Nm(qe),S.set(!1)),w.clear(),T.clear()})}};var IK=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const fde=o=>o.nodeName==="BR"||!!o.getAttribute("data-mce-bogus")||o.getAttribute("data-mce-type")==="bookmark",pde=(o,c,d)=>{var m;const S=(m=c.delimiter)!==null&&m!==void 0?m:"",w=(W,Q,oe)=>zl.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":oe}},components:[gi(W)],action:pe=>{o.focus(),o.selection.select(Q),o.nodeChanged()},buttonBehaviours:Tn([vi.config({...d.tooltips.getConfig({tooltipText:d.translate(["Select the {0} element",Q.nodeName.toLowerCase()]),onShow:(pe,Ee)=>{ad(pe.element,Ee.element)},onHide:pe=>{DE(pe.element)}})}),Hp.button(d.isDisabled),bi(()=>d.checkUiComponentContext("any"))])}),T=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[gi(` ${S} `)]}),V=W=>Xt(W,(Q,oe,pe)=>{const Ee=w(oe.name,oe.element,pe);return pe===0?Q.concat([Ee]):Q.concat([T(),Ee])},[]),F=W=>{const Q=[];let oe=W.length;for(;oe-- >0;){const pe=W[oe];if(pe.nodeType===1&&!fde(pe)){const Ee=Eie(o,pe);if(Ee.isDefaultPrevented()||Q.push({name:Ee.name,element:pe}),Ee.isPropagationStopped())break}}return Q};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Tn([wo.config({mode:"flow",selector:"div[role=button]"}),So.config({disabled:d.isDisabled}),bi(()=>d.checkUiComponentContext("any")),qr.config({}),os.config({}),Qo("elementPathEvents",[Qr((W,Q)=>{o.shortcuts.add("alt+F11","focus statusbar elementpath",()=>wo.focusIn(W)),o.on("NodeChange",oe=>{const pe=F(oe.parents),Ee=pe.length>0?V(pe):[];os.set(W,Ee)})})])]),components:[]}};var Kv;(function(o){o[o.None=0]="None",o[o.Both=1]="Both",o[o.Vertical=2]="Vertical"})(Kv||(Kv={}));const RK=o=>{const c=kn.fromDom(o.getContainer()),d=fa(c),m=Tc(c);return{height:d,width:m}},hde=(o,c,d,m)=>({height:pR(m.height+c.top,AV(o),TV(o)),width:d===Kv.Both?pR(m.width+c.left,wV(o),sM(o)):m.width}),xK=(o,c,d)=>{const m=kn.fromDom(o.getContainer()),S=RK(o),w=hde(o,c,d,S);return ps(w,(T,V)=>{q(T)&&jo(m,V,Bw(T))}),ZH(o),w},mde=o=>{const c=az(o);return c===!1?Kv.None:c==="both"?Kv.Both:Kv.Vertical},DK=(o,c)=>c===Kv.Both?wa.translate(["Editor's height: {0} pixels, Editor's width: {1} pixels",o.height,o.width]):wa.translate(["Editor's height: {0} pixels",o.height]),U$=(o,c,d)=>{Lo(o.element,"aria-valuetext",DK(c,d))},KN=(o,c,d,m,S)=>{const T=br(m*20,S*20),V=xK(o,T,d);return U$(c,V,d),z.some(!0)},gde=(o,c)=>{const d=mde(o);if(d===Kv.None)return z.none();const m=d===Kv.Both?wa.translate("Press the arrow keys to resize the editor."):wa.translate("Press the Up and Down arrow keys to resize the editor."),S=d===Kv.Both?"tox-statusbar__resize-cursor-both":"tox-statusbar__resize-cursor-default";return z.some(Bp("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle",S],attributes:{"aria-label":c.translate(m),"data-mce-name":"resize-handle",role:"separator"},behaviours:[eC.config({mode:"mouse",repositionTarget:!1,onDrag:(w,T,V)=>{const F=xK(o,V,d);U$(w,F,d)},blockerClass:"tox-blocker"}),wo.config({mode:"special",onLeft:w=>KN(o,w,d,-1,0),onRight:w=>KN(o,w,d,1,0),onUp:w=>KN(o,w,d,0,-1),onDown:w=>KN(o,w,d,0,1)}),qr.config({}),ns.config({}),vi.config(c.tooltips.getConfig({tooltipText:c.translate("Resize")})),Qo("set-aria-valuetext",[Qr(w=>{const T=()=>{U$(w,RK(o),d)};o._skinLoaded?T():o.once("SkinLoaded",T)})])],eventOrder:{[bh()]:["add-focusable","set-aria-valuetext"]}},c.icons))},vde=(o,c)=>{const d=(m,S,w)=>os.set(m,[gi(c.translate(["{0} "+w,S[w]]))]);return zl.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Tn([Hp.button(c.isDisabled),bi(()=>c.checkUiComponentContext("any")),qr.config({}),os.config({}),zn.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Qo("wordcount-events",[Dg(m=>{const S=zn.getValue(m),w=S.mode==="words"?"characters":"words";zn.setValue(m,{mode:w,count:S.count}),d(m,S.count,w)}),Qr(m=>{o.on("wordCountUpdate",S=>{const{mode:w}=zn.getValue(m);zn.setValue(m,{mode:w,count:S.wordCount}),d(m,S.wordCount,w)})})])]),eventOrder:{[ld()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},bde=(o,c)=>{const d=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":o.translate(["Build with {0}","TinyMCE"])},innerHtml:o.translate(["Build with {0}",IK.trim()])},behaviours:Tn([ns.config({})])}]}),m=()=>{const V=EC("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[gi(wa.translate(["Press {0} for help",V]))]}},S=()=>{const V=[];return o.hasPlugin("wordcount")&&V.push(vde(o,c)),iM(o)&&V.push(d()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:V}},w=()=>{const V=[],F=dz(o),W=iz(o),Q=iM(o)||o.hasPlugin("wordcount"),oe=()=>{const pe="tox-statusbar__text-container--flex-start",Ee="tox-statusbar__text-container--flex-end",Se="tox-statusbar__text-container--space-around";if(F){const Pe="tox-statusbar__text-container-3-cols";return!Q&&!W?[Pe,Se]:Q&&!W?[Pe,Ee]:[Pe,pe]}return[Q&&!W?Ee:pe]};return W&&V.push(pde(o,{},c)),F&&V.push(m()),Q&&V.push(S()),V.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...oe()]},components:V}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const V=w(),F=gde(o,c);return V.concat(F.toArray())})()}},ZN=(o,c)=>c.get().getOrDie(`UI for ${o} has not been rendered`),yde=(o,c)=>{const d=o.inline,m=d?Sue:gue,S=b0(o)?wN:Nce,w=Cue(),T=$o(),V=$o(),F=$o(),pe=Wr().deviceType.isTouch()?["tox-platform-touch"]:[],Ee=kV(o),Se=dC(o),Pe=tr({dom:{tag:"div",classes:["tox-anchorbar"]}}),qe=tr({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),Le=()=>w.mainUi.get().map(Co=>Co.outerContainer).bind($r.getHeader),Je=()=>fo.fromOption(w.dialogUi.get().map(Co=>Co.sink),"UI has not been rendered"),nt=()=>fo.fromOption(w.popupUi.get().map(Co=>Co.sink),"(popup) UI has not been rendered"),Tt=w.lazyGetInOuterOrDie("anchor bar",Pe.getOpt),xt=w.lazyGetInOuterOrDie("bottom anchor bar",qe.getOpt),jn=w.lazyGetInOuterOrDie("toolbar",$r.getToolbar),dn=w.lazyGetInOuterOrDie("throbber",$r.getThrobber),pn=Oce({popup:nt,dialog:Je},o,Tt,xt),an=()=>{const Co={attributes:{[GT]:Ee?Tm.BottomToTop:Tm.TopToBottom}},us=$r.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:pn.popup,onEscape:()=>{o.focus()}}),ar=$r.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:pn.popup.shared.getSink,providers:pn.popup.shared.providers,onEscape:()=>{o.focus()},onToolbarToggled:$h=>{GW(o,$h)},type:Se,lazyToolbar:jn,lazyHeader:()=>Le().getOrDie("Could not find header element"),...Co}),nr=$r.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:pn.popup.shared.providers,onEscape:()=>{o.focus()},type:Se}),Uu=yI(o),ti=cM(o),ml=aM(o),Ya=uz(o),bd=Ro(Ya),Su=Uu||ti||ml,ia=()=>Uu?[nr]:ti?[ar]:[],Zv=[bd,us];return $r.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Su?[]:["tox-editor-header--empty"]),...Co},components:Ut([ml?Zv:[],ia(),uw(o)?[]:[Pe.asSpec()]]),sticky:b0(o),editor:o,sharedBackstage:pn.popup.shared})},Ro=Co=>$r.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]},promotionLink:Co}),mo=()=>{const Co=$r.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),us=$r.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Co,us]}},Ns=()=>{const Co=MV(o),us=de(ku(),Co)&&Xr(Co,"display")==="grid",ar={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(pe),attributes:{...wa.isRtl()?{dir:"rtl"}:{}}},behaviours:Tn([vu.config({useFixed:()=>S.isDocked(Le)})])},nr={dom:{styles:{width:document.body.clientWidth+"px"}},events:mi([Ft(Hb(),ml=>{jo(ml.element,"width",document.body.clientWidth+"px")})])},Uu=O(gr(ar,us?nr:{})),ti=TB(Uu);return V.set(ti),{sink:Uu,mothership:ti}},Vo=()=>{const Co={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(pe),attributes:{...wa.isRtl()?{dir:"rtl"}:{}}},behaviours:Tn([vu.config({useFixed:()=>S.isDocked(Le),getBounds:()=>c.getPopupSinkBounds()})])},us=O(Co),ar=TB(us);return F.set(ar),{sink:us,mothership:ar}},as=()=>{const Co=an(),us=mo(),ar=$r.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:pn.popup}),nr=$r.parts.viewWrapper({backstage:pn.popup}),Uu=xV(o)&&!d?z.some(bde(o,pn.popup.shared.providers)):z.none(),ti=Ut([Ee?[]:[Co],d?[]:[us],Ee?[Co]:[]]),ml=$r.parts.editorContainer({components:Ut([ti,d?[]:[qe.asSpec()]])}),Ya=SI(o),bd={role:"application",...wa.isRtl()?{dir:"rtl"}:{},...Ya?{"aria-hidden":"true"}:{}},Su=O($r.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(d?["tox-tinymce-inline"]:[]).concat(Ee?["tox-tinymce--toolbar-bottom"]:[]).concat(pe),styles:{visibility:"hidden",...Ya?{opacity:"0",border:"0"}:{}},attributes:bd},components:[ml,...d?[]:[nr,...Uu.toArray()],ar],behaviours:Tn([bi(()=>pn.popup.shared.providers.checkUiComponentContext("any")),So.config({disableClass:"tox-tinymce--disabled"}),wo.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),ia=TB(Su);return T.set(ia),{mothership:ia,outerContainer:Su}},po=Co=>{const us=Bw(Hq(o)),ar=Bw($q(o));return o.inline||(uv("div","width",ar)&&jo(Co.element,"width",ar),uv("div","height",us)?jo(Co.element,"height",us):jo(Co.element,"height","400px")),us},on=Co=>{o.addShortcut("alt+F9","focus menubar",()=>{$r.focusMenubar(Co)}),o.addShortcut("alt+F10","focus toolbar",()=>{$r.focusToolbar(Co)}),o.addCommand("ToggleToolbarDrawer",(us,ar,nr)=>{ar!=null&&ar.skipFocus?(xce("skipFocus"),$r.toggleToolbarDrawerWithoutFocusing(Co)):nr!=null&&nr.skip_focus?$r.toggleToolbarDrawerWithoutFocusing(Co):$r.toggleToolbarDrawer(Co)}),o.addQueryStateHandler("ToggleToolbarDrawer",()=>$r.isToolbarDrawerToggled(Co)),o.on("blur",()=>{dC(o)===Pp.floating&&$r.isToolbarDrawerToggled(Co)&&$r.toggleToolbarDrawerWithoutFocusing(Co)})},Ln=Co=>{const{mainUi:us,popupUi:ar,uiMotherships:nr}=Co;es(Yj(o),(I0,CR)=>{o.ui.registry.addGroupToolbarButton(CR,I0)});const{buttons:Uu,menuItems:ti,contextToolbars:ml,sidebars:Ya,views:bd}=o.ui.registry.getAll(),Su=lM(o),ia={menuItems:ti,menus:CI(o),menubar:Qj(o),toolbar:Su.getOrThunk(()=>rM(o)),allowToolbarGroups:Se===Pp.floating,buttons:Uu,sidebar:Ya,views:bd};on(us.outerContainer),Dce(o,us.mothership,nr),S.setup(o,pn.popup.shared,Le),lK(o,pn.popup),MC(o,pn.popup.shared.getSink,pn.popup),AN(o),Zce(o,dn,pn.popup.shared),oK(o,ml,ar.sink,{backstage:pn.popup}),dde(o,ar.sink);const Zv=o.getElement(),$h=po(us.outerContainer),NC={targetNode:Zv,height:$h};return m.render(o,Co,ia,pn.popup,NC)},Uo=Co=>(F.set(Co.mothership),Co),fs=()=>{const Co=as(),us=Ns(),ar=Qy(o)?Vo():Uo(us);w.dialogUi.set(us),w.popupUi.set(ar),w.mainUi.set(Co);const nr={popupUi:ar,dialogUi:us,mainUi:Co,uiMotherships:w.getUiMotherships()};return Ln(nr)};return{popups:{backstage:pn.popup,getMothership:()=>ZN("popups",F)},dialogs:{backstage:pn.dialog,getMothership:()=>ZN("dialogs",V)},renderUI:fs}},kK=o=>{const c=[],d={};return ps(o,(m,S)=>{m.fold(()=>{c.push(S)},w=>{d[S]=w})}),c.length>0?fo.error(c):fo.value(d)},Sde=(o,c,d,m)=>{const S=tr(tf.sketch(w=>({dom:{tag:"div",classes:["tox-form"].concat(o.classes)},components:Et(o.items,T=>EG(w,T,c,d,m))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[S.asSpec()]}],behaviours:Tn([wo.config({mode:"acyclic",useTabstopAt:be(qI)}),Km.memento(S),dae(S,{postprocess:w=>kK(w).fold(T=>(console.error(T),{}),we)}),Qo("dialog-body-panel",[Ft(Tp(),(w,T)=>{w.getSystem().broadcastOn([lN],{newFocus:z.some(T.event.target)})})])])}},Cde=(o,c,d)=>Et(o,(m,S)=>{os.set(d,o[S].view());const w=c.dom.getBoundingClientRect();return os.set(d,[]),w.height}),Ede=o=>gt(tn(o,(c,d)=>c>d?-1:c<d?1:0)),_de=(o,c,d)=>{const m=Yt(o).dom,S=Wd(o,".tox-dialog-wrap").getOr(o),w=Xr(S,"position")==="fixed";let T;w?T=Math.max(m.clientHeight,window.innerHeight):T=Math.max(m.offsetHeight,m.scrollHeight);const V=fa(c),W=c.dom.offsetLeft>=d.dom.offsetLeft+Tc(d)?Math.max(fa(d),V):V,Q=parseInt(Xr(o,"margin-top"),10)||0,oe=parseInt(Xr(o,"margin-bottom"),10)||0,Ee=fa(o)+Q+oe-W;return T-Ee},wde=(o,c)=>{gt(o).each(d=>uC.showTab(c,d.value))},MK=(o,c)=>{jo(o,"height",c+"px"),jo(o,"flex-basis",c+"px")},yR=(o,c,d)=>{Wd(o,'[role="dialog"]').each(m=>{yr(m,'[role="tablist"]').each(S=>{d.get().map(w=>(jo(c,"height","0"),jo(c,"flex-basis","0"),Math.min(w,_de(m,c,S)))).each(w=>{MK(c,w)})})})},YN=o=>yr(o,'[role="tabpanel"]'),Ade=o=>{const c=$o();return{extraEvents:[Qr(S=>{const w=S.element;YN(w).each(T=>{jo(T,"visibility","hidden"),S.getSystem().getByDom(T).toOptional().each(V=>{const F=Cde(o,T,V);Ede(F).fold(c.clear,c.set)}),yR(w,T,c),Ds(T,"visibility"),wde(o,S),requestAnimationFrame(()=>{yR(w,T,c)})})}),Ft(Hb(),S=>{const w=S.element;YN(w).each(T=>{yR(w,T,c)})}),Ft(gF,(S,w)=>{const T=S.element;YN(T).each(V=>{const F=za(Ei(V));jo(V,"visibility","hidden");const W=li(V,"height").map(pe=>parseInt(pe,10));Ds(V,"height"),Ds(V,"flex-basis");const Q=V.dom.getBoundingClientRect().height;W.forall(pe=>Q>pe)?(c.set(Q),yR(T,V,c)):W.each(pe=>{MK(V,pe)}),Ds(V,"visibility"),F.each(ja)})})],selectFirst:!1}},Fw="send-data-to-section",NK="send-data-to-view",Tde=(o,c,d,m)=>{const S=mn({}),w=Q=>{const oe=zn.getValue(Q),pe=kK(oe).getOr({}),Ee=S.get(),Se=gr(Ee,pe);S.set(Se)},T=Q=>{const oe=S.get();zn.setValue(Q,oe)},V=mn(null),F=Et(o.tabs,Q=>({value:Q.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[gi(d.shared.providers.translate(Q.title))],view:()=>[tf.sketch(oe=>({dom:{tag:"div",classes:["tox-form"]},components:Et(Q.items,pe=>EG(oe,pe,c,d,m)),formBehaviours:Tn([wo.config({mode:"acyclic",useTabstopAt:be(qI)}),Qo("TabView.form.events",[Qr(T),Ah(w)]),Vf.config({channels:iS([{key:Fw,value:{onReceive:w}},{key:NK,value:{onReceive:T}}])})])}))]})),W=Ade(F);return uC.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(Q,oe,pe)=>{const Ee=zn.getValue(oe);xo(Q,mF,{name:Ee,oldName:V.get()}),V.set(Ee)},tabs:F,components:[uC.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[Xk.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Tn([qr.config({})])}),uC.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:W.selectFirst,tabSectionBehaviours:Tn([Qo("tabpanel",W.extraEvents),wo.config({mode:"acyclic"}),zt.config({find:Q=>gt(uC.getViewItems(Q))}),RC(z.none(),Q=>(Q.getSystem().broadcastOn([Fw],{}),S.get()),(Q,oe)=>{S.set(oe),Q.getSystem().broadcastOn([NK],{})})])})},JN=(o,c,d,m,S,w)=>{const T=W=>{const Q=W.body;switch(Q.type){case"tabpanel":return[Tde(Q,W.initialData,m,w)];default:return[Sde(Q,W.initialData,m,w)]}},V=(W,Q)=>z.some({isTabPanel:()=>Q.body.type==="tabpanel"}),F={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...d.map(W=>({id:W})).getOr({}),...S?F:{}}},components:[],behaviours:Tn([Km.childAt(0),Hf.config({channel:`${AF}-${c}`,updateState:V,renderComponents:T,initialData:o})])}},Ode=(o,c,d,m,S,w)=>JN(o,c,z.some(d),m,S,w),Ide=(o,c,d,m)=>{const S=JN(o,c,z.none(),d,!1,m);return dc.parts.body(S)},Rde=o=>{const c={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[L9(z.none(),{dom:{tag:"iframe",attributes:{src:o.url}},behaviours:Tn([qr.config({}),ns.config({})])})]}],behaviours:Tn([wo.config({mode:"acyclic",useTabstopAt:be(qI)})])};return dc.parts.body(c)},xde=lw.deviceType.isTouch(),PK=(o,c)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[o,c]}),LK=(o,c)=>dc.parts.close(zl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":c.translate("Close")}},action:o,buttonBehaviours:Tn([qr.config({})])})),BK=()=>dc.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),VK=(o,c)=>dc.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:$g(`<p>${GV(c.translate(o))}</p>`)}]}]}),HK=o=>dc.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:o}),FK=(o,c)=>[Vm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:o}),Vm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:c})],j$=o=>{const c="tox-dialog",d=c+"-wrap",m=d+"__backdrop",S=c+"__disable-scroll";return dc.sketch({lazySink:o.lazySink,onEscape:w=>(o.onEscape(w),z.some(!0)),useTabstopAt:w=>!qI(w),firstTabstop:o.firstTabstop,dom:{tag:"div",classes:[c].concat(o.extraClasses),styles:{position:"relative",...o.extraStyles}},components:[o.header,o.body,...o.footer.toArray()],parts:{blocker:{dom:$g(`<div class="${d}"></div>`),components:[{dom:{tag:"div",classes:xde?[m,m+"--opaque"]:[m]}}]}},dragBlockClass:d,modalBehaviours:Tn([ns.config({}),Qo("dialog-events",o.dialogEvents.concat([Yb(Tp(),(w,T)=>{ln.isBlocked(w)?K():wo.focusIn(w)}),Ft(cS(),(w,T)=>{w.getSystem().broadcastOn([lN],{newFocus:T.event.newFocus})})])),Qo("scroll-lock",[Qr(()=>{Rr(ku(),S)}),Ah(()=>{Ii(ku(),S)})]),...o.extraBehaviours]),eventOrder:{[ld()]:["dialog-events"],[bh()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Tg()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...o.eventOrder}})},$K=o=>zl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":o.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:Tn([qr.config({}),vi.config(o.tooltips.getConfig({tooltipText:o.translate("Close")}))]),components:[Bp("close",{tag:"span",classes:["tox-icon"]},o.icons)],action:c=>{Rs(c,p1)}}),UK=(o,c,d,m)=>{const S=w=>[gi(m.translate(w.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...d.map(w=>({id:w})).getOr({})}},components:[],behaviours:Tn([Hf.config({channel:`${V9}-${c}`,initialData:o,renderComponents:S})])}},jK=()=>({dom:$g('<div class="tox-dialog__draghandle"></div>')}),Dde=(o,c,d,m)=>Vm.sketch({dom:$g('<div class="tox-dialog__header"></div>'),components:[UK(o,c,z.some(d),m),jK(),$K(m)],containerBehaviours:Tn([eC.config({mode:"mouse",blockerClass:"blocker",getTarget:S=>qc(S,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"},onDrag:(S,w)=>{S.getSystem().broadcastOn([hl()],{target:w})}})])}),kde=(o,c,d)=>{const m=dc.parts.title(UK(o,c,z.none(),d)),S=dc.parts.draghandle(jK()),w=dc.parts.close($K(d)),T=[m].concat(o.draggable?[S]:[]).concat([w]);return Vm.sketch({dom:$g('<div class="tox-dialog__header"></div>'),components:T})},zK=(o,c,d)=>kde({title:d.shared.providers.translate(o),draggable:d.dialog.isDraggableModal()},c,d.shared.providers),SR=(o,c,d,m)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":d.translate(o)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${m.getOr(0)}px`,position:"absolute"}},behaviours:c,components:[{dom:$g('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),WK=(o,c,d)=>({onClose:()=>d.closeWindow(),onBlock:m=>{const S=yr(o().element,".tox-dialog__header").map(w=>fa(w));dc.setBusy(o(),(w,T)=>SR(m.message,T,c,S))},onUnblock:()=>{dc.setIdle(o())}}),GK="tox-dialog--fullscreen",z$="tox-dialog--width-lg",W$="tox-dialog--width-md",XN=o=>{switch(o){case"large":return z.some(z$);case"medium":return z.some(W$);default:return z.none()}},qK=(o,c)=>{const d=kn.fromDom(c.element.dom);na(d,GK)||(Kc(d,[z$,W$]),XN(o).each(m=>Rr(d,m)))},G$=(o,c)=>{const d=kn.fromDom(o.element.dom),m=tS(d),S=bt(m,w=>w===z$||w===W$).or(XN(c));ph(d,[GK,...S.toArray()])},KK=(o,c,d)=>O(j$({...o,firstTabstop:1,lazySink:d.shared.getSink,extraBehaviours:[rN({}),...o.extraBehaviours],onEscape:m=>{Rs(m,p1)},dialogEvents:c,eventOrder:{[Pb()]:[Hf.name(),Vf.name()],[bh()]:["scroll-lock",Hf.name(),"messages","dialog-events","alloy.base.behaviour"],[Tg()]:["alloy.base.behaviour","dialog-events","messages",Hf.name(),"scroll-lock"]}})),q$=(o,c={})=>{const d=m=>{const S=Et(m.items,w=>{const T=Vt(c,w.name).getOr(mn(!1));return{...w,storage:T}});return{...m,items:S}};return Et(o,m=>m.type==="menu"?d(m):m)},ZK=o=>Xt(o,(c,d)=>d.type==="menu"?Xt(d.items,(S,w)=>(S[w.name]=w.storage,S),c):c,{}),YK=(o,c)=>[Kb(Tp(),Eae),o(Aw,(d,m,S,w)=>{Ud(w.element)&&za(Ei(w.element)).each(Oi),c.onClose(),m.onClose()}),o(p1,(d,m,S,w)=>{m.onCancel(d),Rs(w,Aw)}),Ft(zI,(d,m)=>c.onUnblock()),Ft(hF,(d,m)=>c.onBlock(m.event))],Mde=(o,c)=>{const d=(S,w)=>Ft(S,(T,V)=>{m(T,(F,W)=>{w(o(),F,V.event,T)})}),m=(S,w)=>{Hf.getState(S).get().each(T=>{w(T,S)})};return[...YK(d,c),d(Wv,(S,w,T)=>{w.onAction(S,{name:T.name})})]},QN=(o,c,d)=>{const m=(w,T)=>Ft(w,(V,F)=>{S(V,(W,Q)=>{T(o(),W,F.event,V)})}),S=(w,T)=>{Hf.getState(w).get().each(V=>{T(V.internalDialog,w)})};return[...YK(m,c),m(jI,(w,T)=>T.onSubmit(w)),m(Gl,(w,T,V)=>{T.onChange(w,{name:V.name})}),m(Wv,(w,T,V,F)=>{const W=()=>F.getSystem().isConnected()?wo.focusIn(F):void 0,Q=Ee=>ac(Ee,"disabled")||ic(Ee,"aria-disabled").exists(Se=>Se==="true"),oe=Ei(F.element),pe=za(oe);T.onAction(w,{name:V.name,value:V.value}),za(oe).fold(W,Ee=>{Q(Ee)||pe.exists(Se=>ge(Ee,Se)&&Q(Se))?W():d().toOptional().filter(Se=>!ge(Se.element,Ee)).each(W)})}),m(mF,(w,T,V)=>{T.onTabChange(w,{newTabName:V.name,oldTabName:V.oldName})}),Ah(w=>{const T=o();zn.setValue(w,T.getData())})]},JK=(o,c)=>QI(o,o.type,c),Nde=(o,c,d)=>bt(c,m=>m.name===d).bind(m=>m.memento.getOpt(o)),Pde=(o,c)=>{const d=c.map(V=>V.footerButtons).getOr([]),m=Hs(d,V=>V.align==="start"),S=(V,F)=>Vm.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${V}`]},components:Et(F,W=>W.memento.asSpec())}),w=S("start",m.pass),T=S("end",m.fail);return[w,T]},XK=(o,c,d)=>{const m=(S,w)=>{const T=Et(w.buttons,F=>{const W=tr(JK(F,d));return{name:F.name,align:F.align,memento:W}}),V=F=>Nde(S,T,F);return z.some({lookupByName:V,footerButtons:T})};return{dom:$g('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Tn([Hf.config({channel:`${H9}-${c}`,initialData:o,updateState:m,renderComponents:Pde})])}},Lde=(o,c,d)=>XK(o,c,d),QK=(o,c,d)=>dc.parts.footer(XK(o,c,d)),eP=(o,c)=>{if(o.getRoot().getSystem().isConnected()){const m=zt.getCurrent(o.getFormWrapper()).getOr(o.getFormWrapper());return tf.getField(m,c).orThunk(()=>o.getFooter().bind(T=>Hf.getState(T).get()).bind(T=>T.lookupByName(c)))}else return z.none()},Bde=(o,c)=>{const d=o.getRoot();return Hf.getState(d).get().map(m=>_p(Hi("data",m.dataValidator,c))).getOr(c)},eZ=(o,c,d)=>{const m=Se=>{const Pe=o.getRoot();Pe.getSystem().isConnected()&&Se(Pe)},Ee={getData:()=>{const Se=o.getRoot(),Pe=Se.getSystem().isConnected()?o.getFormWrapper():Se,qe=zn.getValue(Pe),Le=es(d,Je=>Je.get());return{...qe,...Le}},setData:Se=>{m(Pe=>{const qe=Ee.getData(),Le=gr(qe,Se),Je=Bde(o,Le),nt=o.getFormWrapper();zn.setValue(nt,Je),ps(d,(Tt,xt)=>{Pn(Le,xt)&&Tt.set(Le[xt])})})},setEnabled:(Se,Pe)=>{eP(o,Se).each(Pe?So.enable:So.disable)},focus:Se=>{eP(o,Se).each(ns.focus)},block:Se=>{if(!v(Se))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");m(Pe=>{xo(Pe,hF,{message:Se})})},unblock:()=>{m(Se=>{Rs(Se,zI)})},showTab:Se=>{m(Pe=>{const qe=o.getBody();Hf.getState(qe).get().exists(Je=>Je.isTabPanel())&&zt.getCurrent(qe).each(Je=>{uC.showTab(Je,Se)})})},redial:Se=>{m(Pe=>{const qe=o.getId(),Le=c(Se),Je=q$(Le.internalDialog.buttons,d);Pe.getSystem().broadcastOn([`${cN}-${qe}`],Le),Pe.getSystem().broadcastOn([`${V9}-${qe}`],Le.internalDialog),Pe.getSystem().broadcastOn([`${AF}-${qe}`],Le.internalDialog),Pe.getSystem().broadcastOn([`${H9}-${qe}`],{...Le.internalDialog,buttons:Je}),Ee.setData(Le.initialData)})},close:()=>{m(Se=>{Rs(Se,Aw)})},toggleFullscreen:o.toggleFullscreen};return Ee},Vde=(o,c,d)=>{const m=Un("dialog"),S=o.internalDialog,w=zK(S.title,m,d),T=mn(S.size),V=nt=>eP(Le,nt),F=XN(T.get()).toArray(),W=(nt,Tt)=>(T.set(Tt.internalDialog.size),qK(Tt.internalDialog.size,nt),z.some(Tt)),Q=Ide({body:S.body,initialData:S.initialData},m,d,V),oe=q$(S.buttons),pe=ZK(oe),Ee=Gi(oe.length!==0,QK({buttons:oe},m,d)),Se=QN(()=>Je,WK(()=>qe,d.shared.providers,c),d.shared.getSink),Pe={id:m,header:w,body:Q,footer:Ee,extraClasses:F,extraBehaviours:[Hf.config({channel:`${cN}-${m}`,updateState:W,initialData:o})],extraStyles:{}},qe=KK(Pe,Se,d),Le=(()=>{const nt=()=>{const xt=dc.getBody(qe);return zt.getCurrent(xt).getOr(xt)},Tt=()=>{G$(qe,T.get())};return{getId:M(m),getRoot:M(qe),getBody:()=>dc.getBody(qe),getFooter:()=>dc.getFooter(qe),getFormWrapper:nt,toggleFullscreen:Tt}})(),Je=eZ(Le,c.redial,pe);return{dialog:qe,instanceApi:Je}},tZ=(o,c,d,m=!1,S)=>{const w=Un("dialog"),T=Un("dialog-label"),V=Un("dialog-content"),F=o.internalDialog,W=an=>eP(dn,an),Q=mn(F.size),oe=XN(Q.get()).toArray(),pe=(an,Ro)=>(Q.set(Ro.internalDialog.size),qK(Ro.internalDialog.size,an),S(),z.some(Ro)),Ee=tr(Dde({title:F.title,draggable:!0},w,T,d.shared.providers)),Se=tr(Ode({body:F.body,initialData:F.initialData},w,V,d,m,W)),Pe=q$(F.buttons),qe=ZK(Pe),Le=Gi(Pe.length!==0,tr(Lde({buttons:Pe},w,d))),Je=QN(()=>pn,{onBlock:an=>{ln.block(xt,(Ro,mo)=>{const Ns=Ee.getOpt(xt).map(Vo=>fa(Vo.element));return SR(an.message,mo,d.shared.providers,Ns)})},onUnblock:()=>{ln.unblock(xt)},onClose:()=>c.closeWindow()},d.shared.getSink),nt="tox-dialog-inline",Tt=Wr().os,xt=O({dom:{tag:"div",classes:["tox-dialog",nt,...oe],attributes:{role:"dialog",...Tt.isMacOS()?{"aria-label":F.title}:{"aria-labelledby":T}}},eventOrder:{[Pb()]:[Hf.name(),Vf.name()],[ld()]:["execute-on-form"],[bh()]:["reflecting","execute-on-form"]},behaviours:Tn([wo.config({mode:"cyclic",onEscape:an=>(Rs(an,Aw),z.some(!0)),useTabstopAt:an=>!qI(an)&&(dl(an)!=="button"||Na(an,"disabled")!=="disabled"),firstTabstop:1}),Hf.config({channel:`${cN}-${w}`,updateState:pe,initialData:o}),ns.config({}),Qo("execute-on-form",Je.concat([Yb(Tp(),(an,Ro)=>{wo.focusIn(an)}),Ft(cS(),(an,Ro)=>{an.getSystem().broadcastOn([lN],{newFocus:Ro.event.newFocus})})])),ln.config({getRoot:()=>z.some(xt)}),os.config({}),rN({})]),components:[Ee.asSpec(),Se.asSpec(),...Le.map(an=>an.asSpec()).toArray()]}),jn=()=>{G$(xt,Q.get())},dn={getId:M(w),getRoot:M(xt),getFooter:()=>Le.map(an=>an.get(xt)),getBody:()=>Se.get(xt),getFormWrapper:()=>{const an=Se.get(xt);return zt.getCurrent(an).getOr(an)},toggleFullscreen:jn},pn=eZ(dn,c.redial,qe);return{dialog:xt,instanceApi:pn}};var K$=tinymce.util.Tools.resolve("tinymce.util.URI");const Hde=o=>{const c=T=>{o.getSystem().isConnected()&&T(o)};return{block:T=>{if(!v(T))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");c(V=>{xo(V,hF,{message:T})})},unblock:()=>{c(T=>{Rs(T,zI)})},close:()=>{c(T=>{Rs(T,Aw)})},sendMessage:T=>{c(V=>{V.getSystem().broadcastOn([F9],T)})}}},Fde=["insertContent","setContent","execCommand","close","block","unblock"],nZ=o=>y(o)&&Fde.indexOf(o.mceAction)!==-1,oZ=o=>!nZ(o)&&y(o)&&Pn(o,"mceAction"),$de=(o,c,d)=>{switch(d.mceAction){case"insertContent":o.insertContent(d.content);break;case"setContent":o.setContent(d.content);break;case"execCommand":const m=k(d.ui)?d.ui:!1;o.execCommand(d.cmd,m,d.value);break;case"close":c.close();break;case"block":c.block(d.message);break;case"unblock":c.unblock();break}},Ude=(o,c,d,m)=>{const S=Un("dialog"),w=zK(o.title,S,m),T=Rde(o),V=o.buttons.bind(nt=>nt.length===0?z.none():z.some(QK({buttons:nt},S,m))),F=Mde(()=>Je,WK(()=>Le,m.shared.providers,c)),W={...o.height.fold(()=>({}),nt=>({height:nt+"px","max-height":nt+"px"})),...o.width.fold(()=>({}),nt=>({width:nt+"px","max-width":nt+"px"}))},Q=o.width.isNone()&&o.height.isNone()?["tox-dialog--width-lg"]:[],oe=new K$(o.url,{base_uri:new K$(window.location.href)}),pe=`${oe.protocol}://${oe.host}${oe.port?":"+oe.port:""}`,Ee=ii(),Se=(nt,Tt)=>z.some(Tt),Pe=[Hf.config({channel:`${cN}-${S}`,updateState:Se,initialData:o}),Qo("messages",[Qr(()=>{const nt=vr(kn.fromDom(window),"message",Tt=>{if(oe.isSameOrigin(new K$(Tt.raw.origin))){const xt=Tt.raw.data;nZ(xt)?$de(d,Je,xt):oZ(xt)&&o.onMessage(Je,xt)}});Ee.set(nt)}),Ah(Ee.clear)]),Vf.config({channels:{[F9]:{onReceive:(nt,Tt)=>{yr(nt.element,"iframe").each(xt=>{const jn=xt.dom.contentWindow;B(jn)&&jn.postMessage(Tt,pe)})}}}})],Le=KK({id:S,header:w,body:T,footer:V,extraClasses:Q,extraBehaviours:Pe,extraStyles:W},F,m),Je=Hde(Le);return{dialog:Le,instanceApi:Je}},jde=o=>{const c=o.shared;return{open:(m,S)=>{const w=()=>{dc.hide(W),S()},T=tr(QI({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:z.some("primary"),align:"end",enabled:!0,icon:z.none()},"cancel",o)),V=BK(),F=LK(w,c.providers),W=O(j$({lazySink:()=>c.getSink(),header:PK(V,F),body:VK(m,c.providers),footer:z.some(HK(FK([],[T.asSpec()]))),onEscape:w,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ft(p1,w)],eventOrder:{}}));dc.show(W);const Q=T.get(W);ns.focus(Q)}}},zde=o=>{const c=o.shared;return{open:(m,S)=>{const w=pe=>{dc.hide(Q),S(pe)},T=tr(QI({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:z.some("primary"),align:"end",enabled:!0,icon:z.none()},"submit",o)),V=QI({context:"any",name:"no",text:"No",primary:!1,buttonType:z.some("secondary"),align:"end",enabled:!0,icon:z.none()},"cancel",o),F=BK(),W=LK(()=>w(!1),c.providers),Q=O(j$({lazySink:()=>c.getSink(),header:PK(F,W),body:VK(m,c.providers),footer:z.some(HK(FK([],[V,T.asSpec()]))),onEscape:()=>w(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ft(p1,()=>w(!1)),Ft(jI,()=>w(!0))],eventOrder:{}}));dc.show(Q);const oe=T.get(Q);ns.focus(oe)}}},sZ=(o,c)=>_p(Hi("data",c,o)),rZ=o=>_b(o,".tox-alert-dialog")||_b(o,".tox-confirm-dialog"),Wde=(o,c,d,m)=>c&&d?[]:[Mi.config({contextual:{lazyContext:()=>z.some(Sa(kn.fromDom(o.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition",onHide:m},modes:["top"],lazyViewport:S=>Ph(o,S.element).map(T=>({bounds:e1(T),optScrollEnv:z.some({currentScrollTop:T.element.dom.scrollTop,scrollElmTop:Gc(T.element).top})})).getOrThunk(()=>({bounds:kl(),optScrollEnv:z.none()}))})],Gde=o=>{const c=o.editor,d=b0(c),m=jde(o.backstages.dialog),S=zde(o.backstages.dialog),w=(Se,Pe,qe)=>{if(!N(Pe)){if(Pe.inline==="toolbar")return W(Se,o.backstages.popup.shared.anchors.inlineDialog(),qe,Pe);if(Pe.inline==="bottom")return Q(Se,o.backstages.popup.shared.anchors.inlineBottomDialog(),qe,Pe);if(Pe.inline==="cursor")return W(Se,o.backstages.popup.shared.anchors.cursor(),qe,Pe)}return F(Se,qe)},T=(Se,Pe)=>V(Se,Pe),V=(Se,Pe)=>{const qe=Le=>{const Je=Ude(Le,{closeWindow:()=>{dc.hide(Je.dialog),Pe(Je.instanceApi)}},c,o.backstages.dialog);return dc.show(Je.dialog),Je.instanceApi};return c1.openUrl(qe,Se)},F=(Se,Pe)=>{const qe=(Le,Je,nt)=>{const Tt=Je,jn=Vde({dataValidator:nt,initialData:Tt,internalDialog:Le},{redial:c1.redial,closeWindow:()=>{dc.hide(jn.dialog),Pe(jn.instanceApi)}},o.backstages.dialog);return dc.show(jn.dialog),jn.instanceApi.setData(Tt),jn.instanceApi};return c1.open(qe,Se)},W=(Se,Pe,qe,Le)=>{const Je=(nt,Tt,xt)=>{const jn=sZ(Tt,xt),dn=$o(),pn=o.backstages.popup.shared.header.isPositionedAtTop(),an={dataValidator:xt,initialData:jn,internalDialog:nt},Ro=()=>dn.on(on=>{Ni.reposition(on),(!d||!pn)&&Mi.refresh(on)}),mo=tZ(an,{redial:c1.redial,closeWindow:()=>{dn.on(Ni.hide),c.off("ResizeEditor",Ro),c.off("ScrollWindow",Ns),dn.clear(),qe(mo.instanceApi)}},o.backstages.popup,Le.ariaAttrs,Ro),Ns=()=>mo.dialog.getSystem().broadcastOn([hl()],{target:mo.dialog.element}),Vo=()=>mo.dialog.getSystem().broadcastOn([Mg()],{target:mo.dialog.element}),as=O(Ni.sketch({lazySink:o.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Le.persistent?{event:"doNotDismissYet"}:{},...pn?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Tn([Qo("window-manager-inline-events",[Ft(Fb(),(on,Ln)=>{Rs(mo.dialog,p1)})]),...Wde(c,d,pn,Vo)]),isExtraPart:(on,Ln)=>rZ(Ln)}));dn.set(as);const po=()=>{const on=c.inline?ku():kn.fromDom(c.getContainer()),Ln=Sa(on);return z.some(Ln)};return Ni.showWithinBounds(as,P(mo.dialog),{anchor:Pe},po),(!d||!pn)&&(Mi.refresh(as),c.on("ResizeEditor",Ro)),c.on("ScrollWindow",Ns),mo.instanceApi.setData(jn),wo.focusIn(mo.dialog),mo.instanceApi};return c1.open(Je,Se)},Q=(Se,Pe,qe,Le)=>{const Je=(nt,Tt,xt)=>{const jn=sZ(Tt,xt),dn=$o(),pn=o.backstages.popup.shared.header.isPositionedAtTop(),an={dataValidator:xt,initialData:jn,internalDialog:nt},Ro=()=>dn.on(as=>{Ni.reposition(as),Mi.refresh(as)}),mo=tZ(an,{redial:c1.redial,closeWindow:()=>{dn.on(Ni.hide),c.off("ResizeEditor ScrollWindow ElementScroll",Ro),dn.clear(),qe(mo.instanceApi)}},o.backstages.popup,Le.ariaAttrs,Ro),Ns=O(Ni.sketch({lazySink:o.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Le.persistent?{event:"doNotDismissYet"}:{},...pn?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Tn([Qo("window-manager-inline-events",[Ft(Fb(),(as,po)=>{Rs(mo.dialog,p1)})]),Mi.config({contextual:{lazyContext:()=>z.some(Sa(kn.fromDom(c.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:as=>Ph(c,as.element).map(on=>({bounds:e1(on),optScrollEnv:z.some({currentScrollTop:on.element.dom.scrollTop,scrollElmTop:Gc(on.element).top})})).getOrThunk(()=>({bounds:kl(),optScrollEnv:z.none()}))})]),isExtraPart:(as,po)=>rZ(po)}));dn.set(Ns);const Vo=()=>o.backstages.popup.shared.getSink().toOptional().bind(as=>{const po=Ph(c,as.element),on=15,Ln=po.map(Co=>e1(Co)).getOr(kl()),Uo=Sa(kn.fromDom(c.getContentAreaContainer())),fs=fy(Uo,Ln);return z.some(La(fs.x,fs.y,fs.width,fs.height-on))});return Ni.showWithinBounds(Ns,P(mo.dialog),{anchor:Pe},Vo),Mi.refresh(Ns),c.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",Ro),mo.instanceApi.setData(jn),wo.focusIn(mo.dialog),mo.instanceApi};return c1.open(Je,Se)};return{open:w,openUrl:T,alert:(Se,Pe)=>{m.open(Se,Pe)},close:Se=>{Se.close()},confirm:(Se,Pe)=>{S.open(Se,Pe)}}},iZ=o=>{nM(o),Die(o),Yue(o)};var aZ=()=>{Poe.add("silver",o=>{iZ(o);let c=()=>kl();const{dialogs:d,popups:m,renderUI:S}=yde(o,{getPopupSinkBounds:()=>c()}),w=()=>{const Q=S();return Ph(o,m.getMothership().element).each(pe=>{c=()=>e1(pe)}),Q};_9.register(o,m.backstage.shared);const T=Gde({editor:o,backstages:{popup:m.backstage,dialog:d.backstage}}),V=$o(),F=()=>rse(o,{backstage:m.backstage},m.getMothership(),V),W=()=>yr(kn.fromDom(o.getContainer()),".tox-promotion").map(Q=>Q.dom).getOrNull();return{renderUI:w,getWindowManagerImpl:M(T),getNotificationManagerImpl:F,getPromotionElement:W}})};aZ()})()),PTe}var BTe;function Mze(){return BTe||(BTe=1,kze()),NTe}Mze();var VTe={},HTe;function Nze(){return HTe||(HTe=1,(function(){var e=tinymce.util.Tools.resolve("tinymce.ModelManager");const n=(g,C,O)=>{var P;return O(g,C.prototype)?!0:((P=g.constructor)===null||P===void 0?void 0:P.name)===C.name},r=g=>{const C=typeof g;return g===null?"null":C==="object"&&Array.isArray(g)?"array":C==="object"&&n(g,String,(O,P)=>P.isPrototypeOf(O))?"string":C},i=g=>C=>r(C)===g,l=g=>C=>typeof C===g,f=g=>C=>g===C,h=i("string"),v=i("object"),y=i("array"),_=f(null),A=l("boolean"),R=f(void 0),k=g=>g==null,N=g=>!k(g),L=l("function"),B=l("number"),H=()=>{},q=(g,C)=>(...O)=>g(C.apply(null,O)),Y=(g,C)=>O=>g(C(O)),K=g=>()=>g,se=g=>g,ie=(g,C)=>g===C;function le(g,...C){return(...O)=>{const P=C.concat(O);return g.apply(null,P)}}const M=g=>C=>!g(C),we=g=>()=>{throw new Error(g)},Ne=g=>g(),De=K(!1),be=K(!0);class me{constructor(C,O){this.tag=C,this.value=O}static some(C){return new me(!0,C)}static none(){return me.singletonNone}fold(C,O){return this.tag?O(this.value):C()}isSome(){return this.tag}isNone(){return!this.tag}map(C){return this.tag?me.some(C(this.value)):me.none()}bind(C){return this.tag?C(this.value):me.none()}exists(C){return this.tag&&C(this.value)}forall(C){return!this.tag||C(this.value)}filter(C){return!this.tag||C(this.value)?this:me.none()}getOr(C){return this.tag?this.value:C}or(C){return this.tag?this:C}getOrThunk(C){return this.tag?this.value:C()}orThunk(C){return this.tag?this:C()}getOrDie(C){if(this.tag)return this.value;throw new Error(C??"Called getOrDie on None")}static from(C){return N(C)?me.some(C):me.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(C){this.tag&&C(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}me.singletonNone=new me(!1);const Ye=Array.prototype.slice,Ke=Array.prototype.indexOf,Ze=Array.prototype.push,z=(g,C)=>Ke.call(g,C),$t=(g,C)=>z(g,C)>-1,Be=(g,C)=>{for(let O=0,P=g.length;O<P;O++){const G=g[O];if(C(G,O))return!0}return!1},at=(g,C)=>{const O=[];for(let P=0;P<g;P++)O.push(C(P));return O},lt=(g,C)=>{const O=g.length,P=new Array(O);for(let G=0;G<O;G++){const ee=g[G];P[G]=C(ee,G)}return P},$e=(g,C)=>{for(let O=0,P=g.length;O<P;O++){const G=g[O];C(G,O)}},qt=(g,C)=>{for(let O=g.length-1;O>=0;O--){const P=g[O];C(P,O)}},io=(g,C)=>{const O=[],P=[];for(let G=0,ee=g.length;G<ee;G++){const ue=g[G];(C(ue,G)?O:P).push(ue)}return{pass:O,fail:P}},En=(g,C)=>{const O=[];for(let P=0,G=g.length;P<G;P++){const ee=g[P];C(ee,P)&&O.push(ee)}return O},Zn=(g,C,O)=>(qt(g,(P,G)=>{O=C(O,P,G)}),O),Et=(g,C,O)=>($e(g,(P,G)=>{O=C(O,P,G)}),O),Jt=(g,C,O)=>{for(let P=0,G=g.length;P<G;P++){const ee=g[P];if(C(ee,P))return me.some(ee);if(O(ee,P))break}return me.none()},ce=(g,C)=>Jt(g,C,De),Hs=(g,C)=>{for(let O=0,P=g.length;O<P;O++){const G=g[O];if(C(G,O))return me.some(O)}return me.none()},Fo=g=>{const C=[];for(let O=0,P=g.length;O<P;++O){if(!y(g[O]))throw new Error("Arr.flatten item "+O+" was not an array, input: "+g);Ze.apply(C,g[O])}return C},yt=(g,C)=>Fo(lt(g,C)),Xt=(g,C)=>{for(let O=0,P=g.length;O<P;++O){const G=g[O];if(C(G,O)!==!0)return!1}return!0},Wn=g=>{const C=Ye.call(g,0);return C.reverse(),C},bt=(g,C)=>{const O={};for(let P=0,G=g.length;P<G;P++){const ee=g[P];O[String(ee)]=C(ee,P)}return O},Kt=(g,C)=>{const O=Ye.call(g,0);return O.sort(C),O},Ut=(g,C)=>C>=0&&C<g.length?me.some(g[C]):me.none(),Ue=g=>Ut(g,0),dt=g=>Ut(g,g.length-1),Ot=(g,C)=>{for(let O=0;O<g.length;O++){const P=C(g[O],O);if(P.isSome())return P}return me.none()},Oe=Object.keys,pt=Object.hasOwnProperty,Bt=(g,C)=>{const O=Oe(g);for(let P=0,G=O.length;P<G;P++){const ee=O[P],ue=g[ee];C(ue,ee)}},tn=(g,C)=>ht(g,(O,P)=>({k:P,v:C(O,P)})),ht=(g,C)=>{const O={};return Bt(g,(P,G)=>{const ee=C(P,G);O[ee.k]=ee.v}),O},gt=g=>(C,O)=>{g[O]=C},No=(g,C,O,P)=>{Bt(g,(G,ee)=>{(C(G,ee)?O:P)(G,ee)})},Ko=(g,C)=>{const O={};return No(g,C,gt(O),H),O},Wo=(g,C)=>{const O=[];return Bt(g,(P,G)=>{O.push(C(P,G))}),O},Jn=g=>Wo(g,se),ys=(g,C)=>ps(g,C)?me.from(g[C]):me.none(),ps=(g,C)=>pt.call(g,C),es=(g,C)=>ps(g,C)&&g[C]!==void 0&&g[C]!==null,is=g=>{for(const C in g)if(pt.call(g,C))return!1;return!0},ft={generate:g=>{if(!y(g))throw new Error("cases must be an array");if(g.length===0)throw new Error("there must be at least one case");const C=[],O={};return $e(g,(P,G)=>{const ee=Oe(P);if(ee.length!==1)throw new Error("one and only one name per case");const ue=ee[0],ye=P[ue];if(O[ue]!==void 0)throw new Error("duplicate key detected:"+ue);if(ue==="cata")throw new Error("cannot have a case named cata (sorry)");if(!y(ye))throw new Error("case arguments must be an array");C.push(ue),O[ue]=(...xe)=>{const Ge=xe.length;if(Ge!==ye.length)throw new Error("Wrong number of arguments to case "+ue+". Expected "+ye.length+" ("+ye+"), got "+Ge);return{fold:(...ln)=>{if(ln.length!==g.length)throw new Error("Wrong number of arguments to fold. Expected "+g.length+", got "+ln.length);return ln[G].apply(null,xe)},match:ln=>{const Fn=Oe(ln);if(C.length!==Fn.length)throw new Error("Wrong number of arguments to match. Expected: "+C.join(",")+`
Actual: `+Fn.join(","));if(!Xt(C,Oo=>$t(Fn,Oo)))throw new Error("Not all branches were specified when using match. Specified: "+Fn.join(", ")+`
Required: `+C.join(", "));return ln[ue].apply(null,xe)},log:ln=>{console.log(ln,{constructors:C,constructor:ue,params:xe})}}}}),O}},It=g=>{let C=g;return{get:()=>C,set:G=>{C=G}}},Dt=g=>g.slice(0).sort(),Nn=(g,C)=>{throw new Error("All required keys ("+Dt(g).join(", ")+") were not specified. Specified keys were: "+Dt(C).join(", ")+".")},$n=g=>{throw new Error("Unsupported keys for object: "+Dt(g).join(", "))},lo=(g,C)=>{if(!y(C))throw new Error("The "+g+" fields must be an array. Was: "+C+".");$e(C,O=>{if(!h(O))throw new Error("The value "+O+" in the "+g+" fields was not a string.")})},Vt=(g,C)=>{throw new Error("All values need to be of type: "+C+". Keys ("+Dt(g).join(", ")+") were not.")},Pn=g=>{const C=Dt(g);ce(C,(P,G)=>G<C.length-1&&P===C[G+1]).each(P=>{throw new Error("The field: "+P+" occurs more than once in the combined fields: ["+C.join(", ")+"].")})},wn=(g,C)=>ko(g,C,{validate:L,label:"function"}),ko=(g,C,O)=>{if(C.length===0)throw new Error("You must specify at least one required field.");return lo("required",C),Pn(C),P=>{const G=Oe(P);Xt(C,ye=>$t(G,ye))||Nn(C,G),g(C,G);const ue=En(C,ye=>!O.validate(P[ye],ye));return ue.length>0&&Vt(ue,O.label),P}},ts=(g,C)=>{const O=En(C,P=>!$t(g,P));O.length>0&&$n(O)},mn=g=>wn(ts,g),wr=g=>{const C=ee=>ee(g),O=K(g),P=()=>G,G={tag:!0,inner:g,fold:(ee,ue)=>ue(g),isValue:be,isError:De,map:ee=>Si.value(ee(g)),mapError:P,bind:C,exists:C,forall:C,getOr:O,or:P,getOrThunk:O,orThunk:P,getOrDie:O,each:ee=>{ee(g)},toOptional:()=>me.some(g)};return G},As=g=>{const C=()=>O,O={tag:!1,inner:g,fold:(P,G)=>P(g),isValue:De,isError:be,map:C,mapError:P=>Si.error(P(g)),bind:C,exists:De,forall:be,getOr:se,or:se,getOrThunk:Ne,orThunk:Ne,getOrDie:we(String(g)),each:H,toOptional:me.none};return O},Si={value:wr,error:As,fromOption:(g,C)=>g.fold(()=>As(C),wr)},Yr=typeof window<"u"?window:Function("return this;")(),Ts=g=>{const C=g.replace(/\./g,"-");return{resolve:P=>C+"-"+P}},ho=(g,C,O=ie)=>g.exists(P=>O(P,C)),Os=g=>{const C=[],O=P=>{C.push(P)};for(let P=0;P<g.length;P++)g[P].each(O);return C},Xa=(g,C)=>g!=null?C(g):me.none(),jc=(g,C)=>g?me.some(C):me.none(),eu=(g,C)=>{let O=C??Yr;for(let P=0;P<g.length&&O!==void 0&&O!==null;++P)O=O[g[P]];return O},fo=(g,C)=>{const O=g.split(".");return eu(O,C)},vc=g=>{const C=It(me.none()),O=()=>C.get().each(g);return{clear:()=>{O(),C.set(me.none())},isSet:()=>C.get().isSome(),get:()=>C.get(),set:ye=>{O(),C.set(me.some(ye))}}},Ji=()=>{const g=vc(H);return{...g,on:O=>g.get().each(O)}},rp=(g,C)=>g.substring(C),xa=(g,C,O)=>C===""||g.length>=C.length&&g.substr(O,O+C.length)===C,kd=(g,C)=>Iu(g,C)?rp(g,C.length):g,Js=(g,C,O=0,P)=>{const G=g.indexOf(C,O);return G!==-1?R(P)?!0:G+C.length<=P:!1},Iu=(g,C)=>xa(g,C,0),Yu=(g,C)=>xa(g,C,g.length-C.length),cl=(g=>C=>C.replace(g,""))(/^\s+|\s+$/g),Xi=g=>g.length>0,nu=g=>{const C=parseFloat(g);return isNaN(C)?me.none():me.some(C)},Ju=(g,C)=>{let O=null;const P=()=>{_(O)||(clearTimeout(O),O=null)};return{cancel:P,throttle:(...ee)=>{P(),O=setTimeout(()=>{O=null,g.apply(null,ee)},C)}}},Un=g=>{let C=!1,O;return(...P)=>(C||(C=!0,O=g.apply(null,P)),O)},oh="",Md=["tfoot","thead","tbody","colgroup"],Nd=g=>$t(Md,g),gr=(g,C)=>({rows:g,columns:C}),sh=(g,C)=>({row:g,column:C}),zc=(g,C,O)=>({element:g,rowspan:C,colspan:O}),Vi=(g,C,O,P)=>({element:g,rowspan:C,colspan:O,isNew:P}),ou=(g,C,O,P,G,ee)=>({element:g,rowspan:C,colspan:O,row:P,column:G,isLocked:ee}),Pd=(g,C,O)=>({element:g,cells:C,section:O}),bc=(g,C,O,P)=>({element:g,cells:C,section:O,isNew:P}),Pr=(g,C,O)=>({element:g,isNew:C,isLocked:O}),Qa=(g,C,O,P)=>({element:g,cells:C,section:O,isNew:P}),Gi=(g,C,O,P)=>({startRow:g,startCol:C,finishRow:O,finishCol:P}),sm=(g,C,O)=>({element:g,colspan:C,column:O}),rm=(g,C)=>({element:g,columns:C}),yc=(g,C,O)=>{const P=g.cells,G=P.slice(0,C),ee=P.slice(C),ue=G.concat(O).concat(ee);return rh(g,ue)},ll=(g,C,O)=>yc(g,C,[O]),Tl=(g,C,O)=>{const P=g.cells;P[C]=O},rh=(g,C)=>Qa(g.element,C,g.section,g.isNew),ii=(g,C)=>{const O=g.cells,P=lt(O,C);return Qa(g.element,P,g.section,g.isNew)},$o=(g,C)=>g.cells[C],ai=(g,C)=>$o(g,C).element,Da=g=>g.cells.length,Lr=g=>{const C=io(g,O=>O.section==="colgroup");return{rows:C.fail,cols:C.pass}},ih=(g,C,O)=>{const P=lt(g.cells,O);return Qa(C(g.element),P,g.section,!0)},ip=(g,C)=>{const P=(C||document).createElement("div");if(P.innerHTML=g,!P.hasChildNodes()||P.childNodes.length>1){const G="HTML does not have a single root node";throw console.error(G,g),new Error(G)}return Ol(P.childNodes[0])},Ar=(g,C)=>{const P=(C||document).createElement(g);return Ol(P)},ec=(g,C)=>{const P=(C||document).createTextNode(g);return Ol(P)},Ol=g=>{if(g==null)throw new Error("Node cannot be null or undefined");return{dom:g}},Hn={fromHtml:ip,fromTag:Ar,fromText:ec,fromDom:Ol,fromPoint:(g,C,O)=>me.from(g.dom.elementFromPoint(C,O)).map(Ol)},Il=(g,C)=>{const O=g.document.createRange();return O.selectNode(C.dom),O},ka=(g,C)=>{const O=g.document.createRange();return Sc(O,C),O},Sc=(g,C)=>g.selectNodeContents(C.dom),ci=(g,C)=>{C.fold(O=>{g.setStartBefore(O.dom)},(O,P)=>{g.setStart(O.dom,P)},O=>{g.setStartAfter(O.dom)})},am=(g,C)=>{C.fold(O=>{g.setEndBefore(O.dom)},(O,P)=>{g.setEnd(O.dom,P)},O=>{g.setEndAfter(O.dom)})},Cc=(g,C,O)=>{const P=g.document.createRange();return ci(P,C),am(P,O),P},ul=(g,C,O,P,G)=>{const ee=g.document.createRange();return ee.setStart(C.dom,O),ee.setEnd(P.dom,G),ee},ap=g=>({left:g.left,top:g.top,right:g.right,bottom:g.bottom,width:g.width,height:g.height}),gf=g=>{const C=g.getClientRects(),O=C.length>0?C[0]:g.getBoundingClientRect();return O.width>0||O.height>0?me.some(O).map(ap):me.none()},Xu=ft.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),cp=(g,C,O)=>C(Hn.fromDom(O.startContainer),O.startOffset,Hn.fromDom(O.endContainer),O.endOffset),vf=(g,C)=>C.match({domRange:O=>({ltr:K(O),rtl:me.none}),relative:(O,P)=>({ltr:Un(()=>Cc(g,O,P)),rtl:Un(()=>me.some(Cc(g,P,O)))}),exact:(O,P,G,ee)=>({ltr:Un(()=>ul(g,O,P,G,ee)),rtl:Un(()=>me.some(ul(g,G,ee,O,P)))})}),Qu=(g,C)=>{const O=C.ltr();return O.collapsed?C.rtl().filter(G=>G.collapsed===!1).map(G=>Xu.rtl(Hn.fromDom(G.endContainer),G.endOffset,Hn.fromDom(G.startContainer),G.startOffset)).getOrThunk(()=>cp(g,Xu.ltr,O)):cp(g,Xu.ltr,O)},bf=(g,C)=>{const O=vf(g,C);return Qu(g,O)},kn=(g,C)=>bf(g,C).match({ltr:(P,G,ee,ue)=>{const ye=g.document.createRange();return ye.setStart(P.dom,G),ye.setEnd(ee.dom,ue),ye},rtl:(P,G,ee,ue)=>{const ye=g.document.createRange();return ye.setStart(ee.dom,ue),ye.setEnd(P.dom,G),ye}});Xu.ltr,Xu.rtl;const Ld=8,lp=9,ve=11,Ve=1,it=3,jt=(g,C)=>{const O=g.dom;if(O.nodeType!==Ve)return!1;{const P=O;if(P.matches!==void 0)return P.matches(C);if(P.msMatchesSelector!==void 0)return P.msMatchesSelector(C);if(P.webkitMatchesSelector!==void 0)return P.webkitMatchesSelector(C);if(P.mozMatchesSelector!==void 0)return P.mozMatchesSelector(C);throw new Error("Browser lacks native selectors")}},Rn=g=>g.nodeType!==Ve&&g.nodeType!==lp&&g.nodeType!==ve||g.childElementCount===0,so=(g,C)=>{const O=C===void 0?document:C.dom;return Rn(O)?[]:lt(O.querySelectorAll(g),Hn.fromDom)},Is=(g,C)=>{const O=C===void 0?document:C.dom;return Rn(O)?me.none():me.from(O.querySelector(g)).map(Hn.fromDom)},hs=(g,C)=>g.dom===C.dom,Xs=(g,C)=>{const O=g.dom,P=C.dom;return O===P?!1:O.contains(P)},ae=jt,Ce=(g,C,O,P)=>{const G=g.isiOS()&&/ipad/i.test(O)===!0,ee=g.isiOS()&&!G,ue=g.isiOS()||g.isAndroid(),ye=ue||P("(pointer:coarse)"),xe=G||!ee&&ue&&P("(min-device-width:768px)"),Ge=ee||ue&&!xe,vt=C.isSafari()&&g.isiOS()&&/safari/i.test(O)===!1,ln=!Ge&&!xe&&!vt;return{isiPad:K(G),isiPhone:K(ee),isTablet:K(xe),isPhone:K(Ge),isTouch:K(ye),isAndroid:g.isAndroid,isiOS:g.isiOS,isWebView:K(vt),isDesktop:K(ln)}},je=(g,C)=>{for(let O=0;O<g.length;O++){const P=g[O];if(P.test(C))return P}},At=(g,C)=>{const O=je(g,C);if(!O)return{major:0,minor:0};const P=G=>Number(C.replace(O,"$"+G));return x(P(1),P(2))},to=(g,C)=>{const O=String(C).toLowerCase();return g.length===0?Ps():At(g,O)},Ps=()=>x(0,0),x=(g,C)=>({major:g,minor:C}),U={nu:x,detect:to,unknown:Ps},X=(g,C)=>Ot(C.brands,O=>{const P=O.brand.toLowerCase();return ce(g,G=>{var ee;return P===((ee=G.brand)===null||ee===void 0?void 0:ee.toLowerCase())}).map(G=>({current:G.name,version:U.nu(parseInt(O.version,10),0)}))}),ne=(g,C)=>{const O=String(C).toLowerCase();return ce(g,P=>P.search(O))},de=(g,C)=>ne(g,C).map(O=>{const P=U.detect(O.versionRegexes,C);return{current:O.name,version:P}}),ge=(g,C)=>ne(g,C).map(O=>{const P=U.detect(O.versionRegexes,C);return{current:O.name,version:P}}),Te=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,rt=g=>C=>Js(C,g),ot=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:g=>Js(g,"edge/")&&Js(g,"chrome")&&Js(g,"safari")&&Js(g,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Te],search:g=>Js(g,"chrome")&&!Js(g,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:g=>Js(g,"msie")||Js(g,"trident")},{name:"Opera",versionRegexes:[Te,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:rt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:rt("firefox")},{name:"Safari",versionRegexes:[Te,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:g=>(Js(g,"safari")||Js(g,"mobile/"))&&Js(g,"applewebkit")}],Rt=[{name:"Windows",search:rt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:g=>Js(g,"iphone")||Js(g,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:rt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:rt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:rt("linux"),versionRegexes:[]},{name:"Solaris",search:rt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:rt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:rt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],rn={browsers:K(ot),oses:K(Rt)},xn="Edge",Zt="Chromium",uo="IE",Fs="Opera",Dr="Firefox",lr="Safari",Ma=()=>Ti({current:void 0,version:U.unknown()}),Ti=g=>{const C=g.current,O=g.version,P=G=>()=>C===G;return{current:C,version:O,isEdge:P(xn),isChromium:P(Zt),isIE:P(uo),isOpera:P(Fs),isFirefox:P(Dr),isSafari:P(lr)}},ed={unknown:Ma,nu:Ti},td="Windows",Tr="iOS",tc="Android",Br="Linux",Qi="macOS",fg="Solaris",su="FreeBSD",Bd="ChromeOS",pg=()=>Ru({current:void 0,version:U.unknown()}),Ru=g=>{const C=g.current,O=g.version,P=G=>()=>C===G;return{current:C,version:O,isWindows:P(td),isiOS:P(Tr),isAndroid:P(tc),isMacOS:P(Qi),isLinux:P(Br),isSolaris:P(fg),isFreeBSD:P(su),isChromeOS:P(Bd)}},Vd={unknown:pg,nu:Ru},xu={detect:(g,C,O)=>{const P=rn.browsers(),G=rn.oses(),ee=C.bind(xe=>X(P,xe)).orThunk(()=>de(P,g)).fold(ed.unknown,ed.nu),ue=ge(G,g).fold(Vd.unknown,Vd.nu),ye=Ce(ue,ee,g,O);return{browser:ee,os:ue,deviceType:ye}}},hg=g=>window.matchMedia(g).matches;let nc=Un(()=>xu.detect(window.navigator.userAgent,me.from(window.navigator.userAgentData),hg));const ba=()=>nc(),ch=(g,C)=>fo(g,C),U1=(g,C)=>{const O=ch(g,C);if(O==null)throw new Error(g+" not available on this browser");return O},$s=Object.getPrototypeOf,Ci=g=>U1("HTMLElement",g),lh=g=>{const C=fo("ownerDocument.defaultView",g);return v(g)&&(Ci(C).prototype.isPrototypeOf(g)||/^HTML\w*Element$/.test($s(g).constructor.name))},kr=g=>g.dom.nodeName.toLowerCase(),mg=g=>g.dom.nodeType,mb=g=>C=>mg(C)===g,SE=g=>mg(g)===Ld||kr(g)==="#comment",gb=g=>Wr(g)&&lh(g.dom),Wr=mb(Ve),yf=mb(it),up=mb(lp),yn=mb(ve),oc=g=>C=>Wr(C)&&kr(C)===g,dp=g=>Hn.fromDom(g.dom.ownerDocument),dl=g=>up(g)?g:dp(g),fp=g=>Hn.fromDom(dl(g).dom.documentElement),vb=g=>Hn.fromDom(dl(g).dom.defaultView),Me=g=>me.from(g.dom.parentNode).map(Hn.fromDom),Ec=g=>me.from(g.dom.parentElement).map(Hn.fromDom),Hd=(g,C)=>{const O=L(C)?C:De;let P=g.dom;const G=[];for(;P.parentNode!==null&&P.parentNode!==void 0;){const ee=P.parentNode,ue=Hn.fromDom(ee);if(G.push(ue),O(ue)===!0)break;P=ee}return G},bb=g=>me.from(g.dom.previousSibling).map(Hn.fromDom),pp=g=>me.from(g.dom.nextSibling).map(Hn.fromDom),$a=g=>lt(g.dom.childNodes,Hn.fromDom),ze=(g,C)=>{const O=g.dom.childNodes;return me.from(O[C]).map(Hn.fromDom)},mt=g=>ze(g,0),Yt=(g,C,O,P)=>{const ee=dp(g).dom.createRange();return ee.setStart(g.dom,C),ee.setEnd(O.dom,P),ee},cn=(g,C,O,P)=>{const G=Yt(g,C,O,P),ee=hs(g,O)&&C===P;return G.collapsed&&!ee},Sn=g=>yn(g)&&N(g.dom.host),To=g=>Hn.fromDom(g.dom.getRootNode()),Po=g=>Sn(g)?g:Hn.fromDom(dl(g).dom.body),ds=g=>{const C=To(g);return Sn(C)?me.some(C):me.none()},qo=g=>Hn.fromDom(g.dom.host),Ls=g=>{if(N(g.target)){const C=Hn.fromDom(g.target);if(Wr(C)&&Bs(C)&&g.composed&&g.composedPath){const O=g.composedPath();if(O)return Ue(O)}}return me.from(g.target)},Bs=g=>N(g.dom.shadowRoot),Es=(g,C,O,P,G,ee,ue)=>({target:g,x:C,y:O,stop:P,prevent:G,kill:ee,raw:ue}),Ks=g=>{const C=Hn.fromDom(Ls(g).getOr(g.target)),O=()=>g.stopPropagation(),P=()=>g.preventDefault(),G=q(P,O);return Es(C,g.clientX,g.clientY,O,P,G,g)},eo=(g,C)=>O=>{g(O)&&C(Ks(O))},ur=(g,C,O,P,G)=>{const ee=eo(O,P);return g.dom.addEventListener(C,ee,G),{unbind:le(_c,g,C,ee,G)}},Ua=(g,C,O,P)=>ur(g,C,O,P,!1),_c=(g,C,O,P)=>{g.dom.removeEventListener(C,O,P)},Xo=be,sc=(g,C,O)=>Ua(g,C,Xo,O),Ei=Ks,ji=(g,C)=>{Me(g).each(P=>{P.dom.insertBefore(C.dom,g.dom)})},Sf=(g,C)=>{pp(g).fold(()=>{Me(g).each(G=>{dr(G,C)})},P=>{ji(P,C)})},ki=(g,C)=>{mt(g).fold(()=>{dr(g,C)},P=>{g.dom.insertBefore(C.dom,P.dom)})},dr=(g,C)=>{g.dom.appendChild(C.dom)},tT=(g,C,O)=>{ze(g,O).fold(()=>{dr(g,C)},P=>{ji(P,C)})},nT=(g,C)=>{ji(g,C),dr(C,g)},ua=(g,C)=>{$e(C,(O,P)=>{const G=P===0?g:C[P-1];Sf(G,O)})},Fd=(g,C)=>{$e(C,O=>{dr(g,O)})},$d=(g,C,O)=>{if(h(O)||A(O)||B(O))g.setAttribute(C,O+"");else throw console.error("Invalid call to Attribute.set. Key ",C,":: Value ",O,":: Element ",g),new Error("Attribute value was not simple")},ya=(g,C,O)=>{$d(g.dom,C,O)},Cf=(g,C)=>{const O=g.dom;Bt(C,(P,G)=>{$d(O,G,P)})},Rl=(g,C)=>{Bt(C,(O,P)=>{O.fold(()=>{vr(g,P)},G=>{$d(g.dom,P,G)})})},Du=(g,C)=>{const O=g.dom.getAttribute(C);return O===null?void 0:O},Wc=(g,C)=>me.from(Du(g,C)),vr=(g,C)=>{g.dom.removeAttribute(C)},nd=g=>Et(g.dom.attributes,(C,O)=>(C[O.name]=O.value,C),{}),xl=g=>{g.dom.textContent="",$e($a(g),C=>{rc(C)})},rc=g=>{const C=g.dom;C.parentNode!==null&&C.parentNode.removeChild(C)},ja=g=>{const C=$a(g);C.length>0&&ua(g,C),rc(g)},Oi=(g,C)=>Hn.fromDom(g.dom.cloneNode(C)),Ud=g=>Oi(g,!1),za=g=>Oi(g,!0),ea=(g,C)=>{const O=Hn.fromTag(C),P=nd(g);return Cf(O,P),O},cm=(g,C)=>{const O=ea(g,C),P=$a(za(g));return Fd(O,P),O},CE=(g,C)=>{const O=ea(g,C);Sf(g,O);const P=$a(g);return Fd(O,P),rc(g),O},ey=(g,C)=>{const P=document.createElement("div");return P.innerHTML=g,$a(Hn.fromDom(P))},Wa=g=>lt(g,Hn.fromDom),j1=g=>g.dom.innerHTML,EE=g=>{const C=Hn.fromTag("div"),O=Hn.fromDom(g.dom.cloneNode(!0));return dr(C,O),j1(C)},gg=g=>g.style!==void 0&&L(g.style.getPropertyValue),Lo=g=>{const C=yf(g)?g.dom.parentNode:g.dom;if(C==null||C.ownerDocument===null)return!1;const O=C.ownerDocument;return ds(Hn.fromDom(C)).fold(()=>O.body.contains(C),Y(Lo,qo))},z1=g=>{const C=g.dom.body;if(C==null)throw new Error("Body is not available yet");return Hn.fromDom(C)},Na=(g,C,O)=>{if(!h(O))throw console.error("Invalid call to CSS.set. Property ",C,":: Value ",O,":: Element ",g),new Error("CSS value must be a string: "+O);gg(g)&&g.style.setProperty(C,O)},ic=(g,C)=>{gg(g)&&g.style.removeProperty(C)},ac=(g,C,O)=>{const P=g.dom;Na(P,C,O)},Jr=(g,C)=>{const O=g.dom;Bt(C,(P,G)=>{Na(O,G,P)})},lm=(g,C)=>{const O=g.dom,G=window.getComputedStyle(O).getPropertyValue(C);return G===""&&!Lo(g)?ty(O,C):G},ty=(g,C)=>gg(g)?g.style.getPropertyValue(C):"",od=(g,C)=>{const O=g.dom,P=ty(O,C);return me.from(P).filter(G=>G.length>0)},Ef=(g,C)=>{const O=g.dom;ic(O,C),ho(Wc(g,"style").map(cl),"")&&vr(g,"style")},W1=(g,C)=>{const O=g.dom,P=C.dom;gg(O)&&gg(P)&&(P.style.cssText=O.style.cssText)},G1=(g,C)=>{const O=(ye,xe)=>{if(!B(xe)&&!xe.match(/^[0-9]+$/))throw new Error(g+".set accepts only positive integer values. Value was "+xe);const Ge=ye.dom;gg(Ge)&&(Ge.style[g]=xe+"px")},P=ye=>{const xe=C(ye);if(xe<=0||xe===null){const Ge=lm(ye,g);return parseFloat(Ge)||0}return xe},G=P,ee=(ye,xe)=>Et(xe,(Ge,vt)=>{const ln=lm(ye,vt),Fn=ln===void 0?0:parseInt(ln,10);return isNaN(Fn)?Ge:Ge+Fn},0);return{set:O,get:P,getOuter:G,aggregate:ee,max:(ye,xe,Ge)=>{const vt=ee(ye,Ge);return xe>vt?xe-vt:0}}},yb=(g,C)=>nu(g).getOr(C),hp=(g,C,O)=>yb(lm(g,C),O),jd=(g,C,O,P)=>{const G=hp(g,`padding-${O}`,0),ee=hp(g,`padding-${P}`,0),ue=hp(g,`border-${O}-width`,0),ye=hp(g,`border-${P}-width`,0);return C-G-ee-ue-ye},q1=(g,C)=>{const O=g.dom,P=O.getBoundingClientRect().width||O.offsetWidth;return jd(g,P,"left","right")},wc=g=>hp(g,"height",g.dom.offsetHeight),sd=g=>hp(g,"width",g.dom.offsetWidth),mp=g=>q1(g),Qs=G1("height",g=>{const C=g.dom;return Lo(g)?C.getBoundingClientRect().height:C.offsetHeight}),ku=g=>Qs.get(g),_E=g=>Qs.getOuter(g),Sb=wc,rd=G1("width",g=>{const C=g.dom;return Lo(g)?C.getBoundingClientRect().width:C.offsetWidth}),jo=g=>rd.get(g),_i=g=>rd.getOuter(g),Ac=mp,Xr=sd,id=(g,C)=>({left:g,top:C,translate:(P,G)=>id(g+P,C+G)}),li=id,da=g=>{const C=g.getBoundingClientRect();return li(C.left,C.top)},uv=(g,C)=>g!==void 0?g:C!==void 0?C:0,Ds=g=>{const C=g.dom.ownerDocument,O=C.body,P=C.defaultView,G=C.documentElement;if(O===g.dom)return li(O.offsetLeft,O.offsetTop);const ee=uv(P==null?void 0:P.pageYOffset,G.scrollTop),ue=uv(P==null?void 0:P.pageXOffset,G.scrollLeft),ye=uv(G.clientTop,O.clientTop),xe=uv(G.clientLeft,O.clientLeft);return zd(g).translate(ue-xe,ee-ye)},zd=g=>{const C=g.dom,P=C.ownerDocument.body;return P===C?li(P.offsetLeft,P.offsetTop):Lo(g)?da(C):li(0,0)},Vr=g=>{const C=g!==void 0?g.dom:document,O=C.body.scrollLeft||C.documentElement.scrollLeft,P=C.body.scrollTop||C.documentElement.scrollTop;return li(O,P)},ru=(g,C,O)=>{const G=(O!==void 0?O.dom:document).defaultView;G&&G.scrollBy(g,C)},pa=((g,C)=>{const O=ee=>{if(!g(ee))throw new Error("Can only get "+C+" value of a "+C+" node");return P(ee).getOr("")},P=ee=>g(ee)?me.from(ee.dom.nodeValue):me.none();return{get:O,getOption:P,set:(ee,ue)=>{if(!g(ee))throw new Error("Can only set raw "+C+" value of a "+C+" node");ee.dom.nodeValue=ue}}})(yf,"text"),gp=g=>pa.get(g),dv=g=>pa.getOption(g),uh=(g,C)=>pa.set(g,C),um=(g,C)=>O=>dm(O)==="rtl"?C:g,dm=g=>lm(g,"direction")==="rtl"?"rtl":"ltr",Tc=(g,C)=>{const O=Du(g,C);return O===void 0||O===""?[]:O.split(" ")},dh=(g,C,O)=>{const G=Tc(g,C).concat([O]);return ya(g,C,G.join(" ")),!0},oT=(g,C,O)=>{const P=En(Tc(g,C),G=>G!==O);return P.length>0?ya(g,C,P.join(" ")):vr(g,C),!1};var fm=(g,C,O,P,G)=>g(O,P)?me.some(O):L(G)&&G(O)?me.none():C(O,P,G);const br=(g,C,O)=>{let P=g.dom;const G=L(O)?O:De;for(;P.parentNode;){P=P.parentNode;const ee=Hn.fromDom(P);if(C(ee))return me.some(ee);if(G(ee))break}return me.none()},K1=(g,C,O)=>fm((G,ee)=>ee(G),br,g,C,O),fv=(g,C)=>{const O=G=>C(Hn.fromDom(G));return ce(g.dom.childNodes,O).map(Hn.fromDom)},Gc=(g,C)=>{const O=P=>{for(let G=0;G<P.childNodes.length;G++){const ee=Hn.fromDom(P.childNodes[G]);if(C(ee))return me.some(ee);const ue=O(P.childNodes[G]);if(ue.isSome())return ue}return me.none()};return O(g.dom)},iu=(g,C,O)=>br(g,P=>jt(P,C),O),zi=(g,C)=>fv(g,O=>jt(O,C)),fh=(g,C)=>Is(C,g),ta=(g,C,O)=>fm((G,ee)=>jt(G,ee),iu,g,C,O),pv=g=>g.dom.classList!==void 0,ny=g=>Tc(g,"class"),Z1=(g,C)=>dh(g,"class",C),ex=(g,C)=>oT(g,"class",C),_f=(g,C)=>{pv(g)?g.dom.classList.add(C):Z1(g,C)},sT=g=>{(pv(g)?g.dom.classList:ny(g)).length===0&&vr(g,"class")},Y1=(g,C)=>{pv(g)?g.dom.classList.remove(C):ex(g,C),sT(g)},wf=(g,C)=>pv(g)&&g.dom.classList.contains(C),wE=(g,C)=>{$e(C,O=>{Y1(g,O)})},hv=g=>ta(g,"[contenteditable]"),Cb=(g,C=!1)=>Lo(g)?g.dom.isContentEditable:hv(g).fold(K(C),O=>Eb(O)==="true"),Eb=g=>g.dom.contentEditable,J1=g=>C=>{_f(C,g)},AE=g=>C=>{wE(C,g)},Wd=(g,C,O)=>En(Hd(g,O),C),rT=(g,C)=>En($a(g),C),pm=(g,C)=>{let O=[];return $e($a(g),P=>{C(P)&&(O=O.concat([P])),O=O.concat(pm(P,C))}),O},yr=(g,C,O)=>Wd(g,P=>jt(P,C),O),qc=(g,C)=>rT(g,O=>jt(O,C)),vp=(g,C)=>so(C,g),X1=(g,C,O,P)=>({parent:g,children:C,element:O,index:P}),hm=g=>Me(g).bind(C=>{const O=$a(C);return Q1(O,g).map(P=>X1(C,O,g,P))}),Q1=(g,C)=>Hs(g,le(hs,C)),TE=(g,C,O)=>br(g,C,O).isSome(),bp=g=>kr(g)==="img"?1:dv(g).fold(()=>$a(g).length,C=>C.length),yp=g=>dv(g).filter(C=>C.trim().length!==0||C.indexOf(oh)>-1).isSome(),Rr=g=>gb(g)&&Du(g,"contenteditable")==="false",OE=["img","br"],Ii=g=>yp(g)||$t(OE,kr(g))||Rr(g),mv=g=>Gc(g,Ii),na=g=>Sp(g,Ii),Sp=(g,C)=>{const O=P=>{const G=$a(P);for(let ee=G.length-1;ee>=0;ee--){const ue=G[ee];if(C(ue))return me.some(ue);const ye=O(ue);if(ye.isSome())return ye}return me.none()};return O(g)},ph={create:(g,C,O,P)=>({start:g,soffset:C,finish:O,foffset:P})},oy=ft.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),eS=(g,C,O,P)=>g.fold(C,O,P),tS=g=>g.fold(se,se,se),iT=oy.before,au=oy.on,Af=oy.after,oa={before:iT,on:au,after:Af,cata:eS,getStart:tS},Ga=ft.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),sy=g=>Ga.exact(g.start,g.soffset,g.finish,g.foffset),_b=g=>g.match({domRange:C=>Hn.fromDom(C.startContainer),relative:(C,O)=>oa.getStart(C),exact:(C,O,P,G)=>C}),ry=Ga.domRange,IE=Ga.relative,Gd=Ga.exact,tx=g=>{const C=_b(g);return vb(C)},j=ph.create,Z={domRange:ry,relative:IE,exact:Gd,exactFromRange:sy,getWin:tx,range:j},he=(g,C,O)=>{var P;return me.from((P=g.caretPositionFromPoint)===null||P===void 0?void 0:P.call(g,C,O)).bind(G=>{if(G.offsetNode===null)return me.none();const ee=g.createRange();return ee.setStart(G.offsetNode,G.offset),ee.collapse(),me.some(ee)})},Ie=(g,C,O)=>{var P;return me.from((P=g.caretRangeFromPoint)===null||P===void 0?void 0:P.call(g,C,O))},Xe=(g,C,O)=>g.caretPositionFromPoint?he(g,C,O):g.caretRangeFromPoint?Ie(g,C,O):me.none(),Ht=(g,C,O)=>{const P=g.document;return Xe(P,C,O).map(G=>ph.create(Hn.fromDom(G.startContainer),G.startOffset,Hn.fromDom(G.endContainer),G.endOffset))},Vn=(g,C)=>{const O=kr(g);return O==="input"?oa.after(g):$t(["br","img"],O)?C===0?oa.before(g):oa.after(g):oa.on(g,C)},yo=(g,C)=>{const O=g.fold(oa.before,Vn,oa.after),P=C.fold(oa.before,Vn,oa.after);return Z.relative(O,P)},cs=(g,C,O,P)=>{const G=Vn(g,C),ee=Vn(O,P);return Z.relative(G,ee)},_s=g=>me.from(g.getSelection()),Gr=(g,C)=>{_s(g).each(O=>{O.removeAllRanges(),O.addRange(C)})},ui=(g,C,O,P,G)=>{const ee=ul(g,C,O,P,G);Gr(g,ee)},ha=(g,C,O,P,G,ee)=>{C.collapse(O.dom,P),C.extend(G.dom,ee)},Dl=(g,C)=>bf(g,C).match({ltr:(O,P,G,ee)=>{ui(g,O,P,G,ee)},rtl:(O,P,G,ee)=>{_s(g).each(ue=>{if(ue.setBaseAndExtent)ue.setBaseAndExtent(O.dom,P,G.dom,ee);else if(ue.extend)try{ha(g,ue,O,P,G,ee)}catch{ui(g,G,ee,O,P)}else ui(g,G,ee,O,P)})}}),hh=(g,C,O,P,G)=>{const ee=cs(C,O,P,G);Dl(g,ee)},mh=(g,C,O)=>{const P=yo(C,O);Dl(g,P)},qd=g=>{if(g.rangeCount>0){const C=g.getRangeAt(0),O=g.getRangeAt(g.rangeCount-1);return me.some(ph.create(Hn.fromDom(C.startContainer),C.startOffset,Hn.fromDom(O.endContainer),O.endOffset))}else return me.none()},nS=g=>{if(g.anchorNode===null||g.focusNode===null)return qd(g);{const C=Hn.fromDom(g.anchorNode),O=Hn.fromDom(g.focusNode);return cn(C,g.anchorOffset,O,g.focusOffset)?me.some(ph.create(C,g.anchorOffset,O,g.focusOffset)):qd(g)}},gv=(g,C,O=!0)=>{const G=(O?ka:Il)(g,C);Gr(g,G)},iy=g=>_s(g).filter(C=>C.rangeCount>0).bind(nS),vg=g=>iy(g).map(C=>Z.exact(C.start,C.soffset,C.finish,C.foffset)),vv=(g,C)=>{const O=kn(g,C);return gf(O)},ay=(g,C,O)=>Ht(g,C,O),cy=g=>{_s(g).each(C=>C.removeAllRanges())},aT={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},cT=(()=>{const g="[0-9]+",O="[eE]"+("[+-]?"+g),P="\\.",G=ye=>`(?:${ye})?`,ue=`[+-]?(?:${["Infinity",g+P+G(g)+G(O),P+g+G(O),g+G(O)].join("|")})`;return new RegExp(`^(${ue})(.*)$`)})(),Zs=(g,C)=>Be(C,O=>Be(aT[O],P=>g===P)),Hr=(g,C)=>me.from(cT.exec(g)).bind(P=>{const G=Number(P[1]),ee=P[2];return Zs(ee,C)?me.some({value:G,unit:ee}):me.none()}),Pa=g=>lt(g,K(0)),cu=(g,C,O,P,G)=>G(g.slice(0,C)).concat(P).concat(G(g.slice(O))),ly=g=>(C,O,P,G)=>{if(g(P)){const ee=Math.max(G,C[O]-Math.abs(P)),ue=Math.abs(ee-C[O]);return P>=0?ue:-ue}else return P},wb=ly(g=>g<0),uy=ly(be),dy=()=>{const g=(ye,xe,Ge,vt,ln)=>{const Fn=wb(ye,xe,vt,ln);return cu(ye,xe,Ge+1,[Fn,0],Pa)},C=(ye,xe,Ge,vt)=>{const ln=(100+Ge)/100,Fn=Math.max(vt,(ye[xe]+Ge)/ln);return lt(ye,(On,Oo)=>(Oo===xe?Fn:On/ln)-On)},O=(ye,xe,Ge,vt,ln,Fn)=>Fn?C(ye,xe,vt,ln):g(ye,xe,Ge,vt,ln);return{resizeTable:(ye,xe)=>ye(xe),clampTableDelta:wb,calcLeftEdgeDeltas:O,calcMiddleDeltas:(ye,xe,Ge,vt,ln,Fn,On)=>O(ye,Ge,vt,ln,Fn,On),calcRightEdgeDeltas:(ye,xe,Ge,vt,ln,Fn)=>{if(Fn)return C(ye,Ge,vt,ln);{const On=wb(ye,Ge,vt,ln);return Pa(ye.slice(0,Ge)).concat([On])}},calcRedestributedWidths:(ye,xe,Ge,vt)=>{if(vt){const Fn=(xe+Ge)/xe,On=lt(ye,Oo=>Oo/Fn);return{delta:Fn*100-100,newSizes:On}}else return{delta:Ge,newSizes:ye}}}},nx=()=>{const g=(ue,ye,xe,Ge,vt)=>{const ln=Ge>=0?xe:ye,Fn=uy(ue,ln,Ge,vt);return cu(ue,ye,xe+1,[Fn,-Fn],Pa)};return{resizeTable:(ue,ye,xe)=>{xe&&ue(ye)},clampTableDelta:(ue,ye,xe,Ge,vt)=>{if(vt){if(xe>=0)return xe;{const ln=Et(ue,(Fn,On)=>Fn+On-Ge,0);return Math.max(-ln,xe)}}else return wb(ue,ye,xe,Ge)},calcLeftEdgeDeltas:g,calcMiddleDeltas:(ue,ye,xe,Ge,vt,ln)=>g(ue,xe,Ge,vt,ln),calcRightEdgeDeltas:(ue,ye,xe,Ge,vt,ln)=>{if(ln)return Pa(ue);{const Fn=Ge/ue.length;return lt(ue,K(Fn))}},calcRedestributedWidths:(ue,ye,xe,Ge)=>({delta:0,newSizes:ue})}},bg=(g,C,O=0)=>Wc(g,C).map(P=>parseInt(P,10)).getOr(O),mm=(g,C)=>bg(g,C,1),lT=g=>oc("col")(g)?bg(g,"span",1)>1:mm(g,"colspan")>1,JL=g=>mm(g,"rowspan")>1,La=(g,C)=>parseInt(lm(g,C),10),Sa=K(10),gh=K(10),fy=(g,C)=>RE(g,C,be),RE=(g,C,O)=>yt($a(g),P=>jt(P,C)?O(P)?[P]:[]:RE(P,C,O)),kl=(g,C,O=De)=>{if(O(C))return me.none();if($t(g,kr(C)))return me.some(C);const P=G=>jt(G,"table")||O(G);return iu(C,g.join(","),P)},uT=(g,C)=>kl(["td","th"],g,C),bv=g=>fy(g,"th,td"),xE=g=>jt(g,"colgroup")?qc(g,"col"):yt(Kr(g),C=>qc(C,"col")),ad=(g,C)=>ta(g,"table",C),DE=g=>fy(g,"tr"),Kr=g=>ad(g).fold(K([]),C=>qc(C,"colgroup")),py=oc("th"),yg=g=>Xt(g,C=>py(C.element)),XL=(g,C)=>g&&C?"sectionCells":g?"section":"cells",ox=g=>{const C=g.section==="thead",O=ho(kE(g.cells),"th");return g.section==="tfoot"?{type:"footer"}:C||O?{type:"header",subType:XL(C,O)}:{type:"body"}},kE=g=>{const C=En(g,O=>py(O.element));return C.length===0?me.some("td"):C.length===g.length?me.some("th"):me.none()},QL=g=>{const C=lt(g,G=>ox(G).type),O=$t(C,"header"),P=$t(C,"footer");if(!O&&!P)return me.some("body");{const G=$t(C,"body");return O&&!G&&!P?me.some("header"):!O&&!G&&P?me.some("footer"):me.none()}},dT=g=>Ot(g.all,C=>{const O=ox(C);return O.type==="header"?me.from(O.subType):me.none()}),Sg=(g,C)=>lt(g,O=>{if(kr(O)==="colgroup"){const P=lt(xE(O),G=>{const ee=bg(G,"span",1);return zc(G,1,ee)});return Pd(O,P,"colgroup")}else{const P=lt(bv(O),G=>{const ee=bg(G,"rowspan",1),ue=bg(G,"colspan",1);return zc(G,ee,ue)});return Pd(O,P,C(O))}}),fT=g=>Me(g).map(C=>{const O=kr(C);return Nd(O)?O:"tbody"}).getOr("tbody"),vo=g=>{const C=DE(g),P=[...Kr(g),...C];return Sg(P,fT)},di=(g,C)=>Sg(g,()=>C),hy="data-snooker-locked-cols",Ab=g=>Wc(g,hy).bind(C=>me.from(C.match(/\d+/g))).map(C=>bt(C,be)),Oc=g=>{const C=Et(Lr(g).rows,(P,G)=>($e(G.cells,(ee,ue)=>{ee.isLocked&&(P[ue]=!0)}),P),{}),O=Wo(C,(P,G)=>parseInt(G,10));return Kt(O)},my=(g,C)=>g+","+C,e4=(g,C,O)=>me.from(g.access[my(C,O)]),Tb=(g,C,O)=>{const P=sx(g,G=>O(C,G.element));return P.length>0?me.some(P[0]):me.none()},sx=(g,C)=>{const O=yt(g.all,P=>P.cells);return En(O,C)},gm=g=>{const C={};let O=0;return $e(g.cells,P=>{const G=P.colspan;at(G,ee=>{const ue=O+ee;C[ue]=sm(P.element,G,ue)}),O+=G}),C},yv=g=>{const C={},O=[],G=Ue(g).map(On=>On.element).bind(ad).bind(Ab).getOr({});let ee=0,ue=0,ye=0;const{pass:xe,fail:Ge}=io(g,On=>On.section==="colgroup");$e(Ge,On=>{const Oo=[];$e(On.cells,zt=>{let un=0;for(;C[my(ye,un)]!==void 0;)un++;const Bo=es(G,un.toString()),ls=ou(zt.element,zt.rowspan,zt.colspan,ye,un,Bo);for(let no=0;no<zt.colspan;no++)for(let Sr=0;Sr<zt.rowspan;Sr++){const Cr=ye+Sr,ms=un+no,_a=my(Cr,ms);C[_a]=ls,ue=Math.max(ue,ms+1)}Oo.push(ls)}),ee++,O.push(Pd(On.element,Oo,On.section)),ye++});const{columns:vt,colgroups:ln}=dt(xe).map(On=>{const Oo=gm(On);return{colgroups:[rm(On.element,Jn(Oo))],columns:Oo}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:gr(ee,ue),access:C,all:O,columns:vt,colgroups:ln}},xs={fromTable:g=>{const C=vo(g);return yv(C)},generate:yv,getAt:e4,findItem:Tb,filterItems:sx,justCells:g=>yt(g.all,C=>C.cells),justColumns:g=>Jn(g.columns),hasColumns:g=>Oe(g.columns).length>0,getColumnAt:(g,C)=>me.from(g.columns[C])},Ob=(g,C,O)=>Pr(O(g.element,C),!0,g.isLocked),Ri=(g,C)=>g.section!==C?Qa(g.element,g.cells,C,g.isNew):g,gT=()=>({transformRow:Ri,transformCell:(g,C,O)=>{const P=O(g.element,C),G=kr(P)!=="td"?CE(P,"td"):P;return Pr(G,g.isNew,g.isLocked)}}),Cp=()=>({transformRow:Ri,transformCell:Ob}),lu=()=>({transformRow:(g,C)=>Ri(g,C==="thead"?"tbody":C),transformCell:Ob}),vm={getTableSectionType:(g,C)=>{const O=xs.fromTable(g);switch(dT(O).getOr(C)){case"section":return gT();case"sectionCells":return Cp();case"cells":return lu()}},section:gT,sectionCells:Cp,cells:lu,fallback:()=>({transformRow:se,transformCell:Ob})},vT=(g,C=be)=>{const O=g.grid,P=at(O.columns,se),G=at(O.rows,se);return lt(P,ee=>NE(()=>yt(G,Ge=>xs.getAt(g,Ge,ee).filter(vt=>vt.column===ee).toArray()),Ge=>Ge.colspan===1&&C(Ge.element),()=>xs.getAt(g,0,ee)))},NE=(g,C,O)=>{const P=g();return ce(P,C).orThunk(()=>me.from(P[0]).orThunk(O)).map(ue=>ue.element)},Ep=g=>{const C=g.grid,O=at(C.rows,se),P=at(C.columns,se);return lt(O,G=>NE(()=>yt(P,xe=>xs.getAt(g,G,xe).filter(Ge=>Ge.row===G).fold(K([]),Ge=>[Ge])),xe=>xe.rowspan===1,()=>xs.getAt(g,G,0)))},bT=(g,C)=>{if(C<0||C>=g.length-1)return me.none();const O=g[C].fold(()=>{const G=Wn(g.slice(0,C));return Ot(G,(ee,ue)=>ee.map(ye=>({value:ye,delta:ue+1})))},G=>me.some({value:G,delta:0})),P=g[C+1].fold(()=>{const G=g.slice(C+1);return Ot(G,(ee,ue)=>ee.map(ye=>({value:ye,delta:ue+1})))},G=>me.some({value:G,delta:1}));return O.bind(G=>P.map(ee=>{const ue=ee.delta+G.delta;return Math.abs(ee.value-G.value)/ue}))},PE=(g,C)=>({row:g,y:C}),yT=(g,C)=>({col:g,x:C}),rx=g=>Ds(g).left+_i(g),t4=g=>Ds(g).left,ST=(g,C)=>yT(g,t4(C)),ix=(g,C)=>yT(g,rx(C)),LE=g=>Ds(g).top,n4=(g,C)=>PE(g,LE(C)),o4=(g,C)=>PE(g,LE(C)+_E(C)),CT=(g,C,O)=>{if(O.length===0)return[];const P=lt(O.slice(1),(ee,ue)=>ee.map(ye=>g(ue,ye))),G=O[O.length-1].map(ee=>C(O.length-1,ee));return P.concat([G])},ET=g=>-g,Tf={delta:se,positions:g=>CT(n4,o4,g),edge:LE},zo=um({delta:se,edge:t4,positions:g=>CT(ST,ix,g)},{delta:ET,edge:rx,positions:g=>CT(ix,ST,g)}),du={delta:(g,C)=>zo(C).delta(g,C),positions:(g,C)=>zo(C).positions(g,C),edge:g=>zo(g).edge(g)},Ib=/(\d+(\.\d+)?)%/,ax=/(\d+(\.\d+)?)px|em/,s4=oc("col"),BE=oc("tr"),oS=(g,C,O)=>{const P=Ec(g).getOrThunk(()=>z1(dp(g)));return C(g)/O(P)*100},Rb=(g,C)=>{ac(g,"width",C+"px")},VE=(g,C)=>{ac(g,"width",C+"%")},Sv=(g,C)=>{ac(g,"height",C+"px")},_T=g=>{Ef(g,"height")},cx=g=>Sb(g)+"px",Hi=(g,C,O,P)=>{const G=ad(g).map(ee=>{const ue=O(ee);return Math.floor(C/100*ue)}).getOr(C);return P(g,G),G},_p=(g,C,O,P)=>{const G=parseFloat(g);return Yu(g,"%")&&kr(C)!=="table"?Hi(C,G,O,P):G},Mu=g=>{const C=cx(g);return C?_p(C,g,ku,Sv):ku(g)},Cv=(g,C,O)=>{const P=O(g),G=mm(g,C);return P/G},fu=(g,C)=>od(g,C).orThunk(()=>Wc(g,C).map(O=>O+"px")),xb=g=>fu(g,"width"),cc=g=>fu(g,"height"),fl=g=>oS(g,jo,Ac),gy=g=>s4(g)?Math.round(jo(g)):Xr(g),sn=g=>BE(g)?ku(g):Cv(g,"rowspan",Mu),Zd=g=>xb(g).bind(O=>Hr(O,["fixed","relative","empty"])),sS=(g,C,O)=>{ac(g,"width",C+O)},qa=g=>jo(g)+"px",Of=g=>ku(g)+"px",If=g=>oS(g,jo,Ac)+"%",lx=g=>xb(g).exists(C=>Ib.test(C)),Cg=g=>xb(g).exists(C=>ax.test(C)),ux=g=>xb(g).isNone(),Nu=K(Ib),xr=oc("col"),wp=g=>xb(g).getOrThunk(()=>gy(g)+"px"),rS=g=>cc(g).getOrThunk(()=>sn(g)+"px"),qi=g=>lt(xs.justColumns(g),C=>me.from(C.element)),dx=g=>{const C=ba().browser,O=C.isChromium()||C.isFirefox();return xr(g)?O:!0},HE=(g,C,O,P,G,ee)=>g.filter(P).fold(()=>ee(bT(O,C)),ue=>G(ue)),vh=(g,C,O,P)=>{const G=vT(g),ee=xs.hasColumns(g)?qi(g):G,ue=[me.some(du.edge(C))].concat(lt(du.positions(G,C),xe=>xe.map(Ge=>Ge.x))),ye=M(lT);return lt(ee,(xe,Ge)=>HE(xe,Ge,ue,ye,vt=>{if(dx(vt))return O(vt);{const ln=Xa(G[Ge],se);return HE(ln,Ge,ue,ye,Fn=>P(me.some(Math.round(jo(Fn)))),P)}},P))},wT=g=>g.map(C=>C+"px").getOr(""),cd=(g,C)=>vh(g,C,wp,wT),AT=(g,C,O)=>vh(g,C,fl,P=>P.fold(()=>O.minCellWidth(),G=>G/O.pixelWidth()*100)),Ct=(g,C,O)=>vh(g,C,gy,P=>P.getOrThunk(O.minCellWidth)),pu=(g,C,O,P)=>{const G=Ep(g),ee=lt(g.all,ye=>me.some(ye.element)),ue=[me.some(Tf.edge(C))].concat(lt(Tf.positions(G,C),ye=>ye.map(xe=>xe.y)));return lt(ee,(ye,xe)=>HE(ye,xe,ue,be,O,P))},vy=(g,C)=>pu(g,C,sn,O=>O.getOrThunk(gh)),Fi=(g,C)=>pu(g,C,rS,wT),Yd=(g,C)=>()=>Lo(g)?C(g):parseFloat(od(g,"width").getOr("0")),Zc=g=>{const C=Yd(g,jo),O=K(0);return{width:C,pixelWidth:C,getWidths:(G,ee)=>Ct(G,g,ee),getCellDelta:O,singleColumnWidth:K([0]),minCellWidth:O,setElementWidth:H,adjustTableWidth:H,isRelative:!0,label:"none"}},Or=g=>{const C=Yd(g,xe=>parseFloat(If(xe))),O=Yd(g,jo);return{width:C,pixelWidth:O,getWidths:(xe,Ge)=>AT(xe,g,Ge),getCellDelta:xe=>xe/O()*100,singleColumnWidth:(xe,Ge)=>[100-xe],minCellWidth:()=>Sa()/O()*100,setElementWidth:VE,adjustTableWidth:xe=>{const Ge=C(),vt=xe/100*Ge,ln=Ge+vt;VE(g,ln)},isRelative:!0,label:"percent"}},fx=g=>{const C=Yd(g,jo);return{width:C,pixelWidth:C,getWidths:(ue,ye)=>Ct(ue,g,ye),getCellDelta:se,singleColumnWidth:(ue,ye)=>[Math.max(Sa(),ue+ye)-ue],minCellWidth:Sa,setElementWidth:Rb,adjustTableWidth:ue=>{const ye=C()+ue;Rb(g,ye)},isRelative:!1,label:"pixel"}},Ev=(g,C)=>Nu().exec(C)!==null?Or(g):fx(g),_v={getTableSize:g=>xb(g).fold(()=>Zc(g),O=>Ev(g,O)),pixelSize:fx,percentageSize:Or,noneSize:Zc},by=(g,C,O,P)=>{O===P?vr(g,C):ya(g,C,O)},px=(g,C,O)=>{dt(qc(g,C)).fold(()=>ki(g,O),P=>Sf(P,O))},hx=(g,C)=>{const O=zi(g,C).getOrThunk(()=>{const P=Hn.fromTag(C,dp(g).dom);return C==="thead"?px(g,"caption,colgroup",P):C==="colgroup"?px(g,"caption",P):dr(g,P),P});return xl(O),O},Eg=(g,C)=>{const O=[],P=[],G=On=>lt(On,Oo=>{Oo.isNew&&O.push(Oo.element);const zt=Oo.element;return xl(zt),$e(Oo.cells,un=>{un.isNew&&P.push(un.element),by(un.element,"colspan",un.colspan,1),by(un.element,"rowspan",un.rowspan,1),dr(zt,un.element)}),zt}),ee=On=>yt(On,Oo=>lt(Oo.cells,zt=>(by(zt.element,"span",zt.colspan,1),zt.element))),ue=(On,Oo)=>{const zt=hx(g,Oo),Bo=(Oo==="colgroup"?ee:G)(On);Fd(zt,Bo)},ye=On=>{zi(g,On).each(rc)},xe=(On,Oo)=>{On.length>0?ue(On,Oo):ye(Oo)},Ge=[],vt=[],ln=[],Fn=[];return $e(C,On=>{switch(On.section){case"thead":Ge.push(On);break;case"tbody":vt.push(On);break;case"tfoot":ln.push(On);break;case"colgroup":Fn.push(On);break}}),xe(Fn,"colgroup"),xe(Ge,"thead"),xe(vt,"tbody"),xe(ln,"tfoot"),{newRows:O,newCells:P}},iS=g=>lt(g,C=>{const O=Ud(C.element);return $e(C.cells,P=>{const G=za(P.element);by(G,"colspan",P.colspan,1),by(G,"rowspan",P.rowspan,1),dr(O,G)}),O}),h6=(g,C)=>lt(g,O=>$o(O,C)),Db=(g,C)=>g[C],Yc=(g,C)=>{if(g.length===0)return 0;const O=g[0];return Hs(g,G=>!C(O.element,G.element)).getOr(g.length)},Ic=(g,C,O,P)=>{const G=Db(g,C),ee=G.section==="colgroup",ue=Yc(G.cells.slice(O),P),ye=ee?1:Yc(h6(g.slice(C),O),P);return{colspan:ue,rowspan:ye}},_g=(g,C)=>{const O=lt(g,G=>lt(G.cells,De)),P=(G,ee,ue,ye)=>{for(let xe=G;xe<G+ue;xe++)for(let Ge=ee;Ge<ee+ye;Ge++)O[xe][Ge]=!0};return lt(g,(G,ee)=>{const ue=yt(G.cells,(ye,xe)=>{if(O[ee][xe]===!1){const Ge=Ic(g,ee,xe,C);return P(ee,xe,Ge.rowspan,Ge.colspan),[Vi(ye.element,Ge.rowspan,Ge.colspan,ye.isNew)]}else return[]});return bc(G.element,ue,G.section,G.isNew)})},wg=(g,C,O)=>{const P=[];$e(g.colgroups,G=>{const ee=[];for(let ue=0;ue<g.grid.columns;ue++){const ye=xs.getColumnAt(g,ue).map(xe=>Pr(xe.element,O,!1)).getOrThunk(()=>Pr(C.colGap(),!0,!1));ee.push(ye)}P.push(Qa(G.element,ee,"colgroup",O))});for(let G=0;G<g.grid.rows;G++){const ee=[];for(let xe=0;xe<g.grid.columns;xe++){const Ge=xs.getAt(g,G,xe).map(vt=>Pr(vt.element,O,vt.isLocked)).getOrThunk(()=>Pr(C.gap(),!0,!1));ee.push(Ge)}const ue=g.all[G],ye=Qa(ue.element,ee,ue.section,O);P.push(ye)}return P},kb=(g,C)=>wg(g,C,!1),yy=g=>_g(g,hs),hu=(g,C)=>Ot(g.all,O=>ce(O.cells,P=>hs(C,P.element))),wv=(g,C,O)=>{const P=lt(C.selection,ee=>uT(ee).bind(ue=>hu(g,ue)).filter(O)),G=Os(P);return jc(G.length>0,G)},Ka=(g,C,O,P,G,ee,ue,ye,xe)=>{const Ge=xs.fromTable(ee),vt=me.from(xe==null?void 0:xe.section).getOrThunk(vm.fallback);return C(Ge,ue).map(Fn=>{const On=kb(Ge,ye),Oo=g(On,Fn,hs,G(ye),vt),zt=Oc(Oo.grid),un=yy(Oo.grid);return{info:Fn,grid:un,cursor:Oo.cursor,lockedColumns:zt}}).bind(Fn=>{const On=Eg(ee,Fn.grid),Oo=me.from(xe==null?void 0:xe.sizing).getOrThunk(()=>_v.getTableSize(ee)),zt=me.from(xe==null?void 0:xe.resize).getOrThunk(nx);return O(ee,Fn.grid,Fn.info,{sizing:Oo,resize:zt,section:vt}),P(ee),vr(ee,hy),Fn.lockedColumns.length>0&&ya(ee,hy,Fn.lockedColumns.join(",")),me.some({cursor:Fn.cursor,newRows:On.newRows,newCells:On.newCells})})},FE=(g,C)=>uT(C.element).bind(O=>hu(g,O).map(P=>({...P,generators:C.generators,clipboard:C.clipboard}))),Ap=(g,C)=>wv(g,C,be).map(O=>({cells:O,generators:C.generators,clipboard:C.clipboard})),Tp=(g,C)=>C.mergable,$E=(g,C)=>C.unmergable,lc=(g,C)=>wv(g,C,be),Sy=(g,C)=>wv(g,C,O=>!O.isLocked),Ag=(g,C)=>hu(g,C).exists(O=>!O.isLocked),Mb=(g,C)=>Xt(C,O=>Ag(g,O)),bm=(g,C)=>Tp(g,C).filter(O=>Mb(g,O.cells)),aS=(g,C)=>$E(g,C).filter(O=>Mb(g,O)),Nb={...ft.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},mx=(g,C)=>g.length===0?Nb.none():g.length===1?Nb.only(0):C===0?Nb.left(0,1):C===g.length-1?Nb.right(C-1,C):C>0&&C<g.length-1?Nb.middle(C-1,C,C+1):Nb.none(),sa=(g,C,O,P,G)=>{const ee=g.slice(0),ue=mx(g,C),ye=K(lt(ee,K(0))),xe=Fn=>P.singleColumnWidth(ee[Fn],O),Ge=(Fn,On)=>G.calcLeftEdgeDeltas(ee,Fn,On,O,P.minCellWidth(),P.isRelative),vt=(Fn,On,Oo)=>G.calcMiddleDeltas(ee,Fn,On,Oo,O,P.minCellWidth(),P.isRelative),ln=(Fn,On)=>G.calcRightEdgeDeltas(ee,Fn,On,O,P.minCellWidth(),P.isRelative);return ue.fold(ye,xe,Ge,vt,ln)},gx=(g,C,O)=>{let P=0;for(let G=g;G<C;G++)P+=O[G]!==void 0?O[G]:0;return P},ym=(g,C)=>{const O=xs.justCells(g);return lt(O,P=>{const G=gx(P.column,P.column+P.colspan,C);return{element:P.element,width:G,colspan:P.colspan}})},Op=(g,C)=>{const O=xs.justColumns(g);return lt(O,(P,G)=>({element:P.element,width:C[G],colspan:P.colspan}))},OT=(g,C)=>lt(g.all,(O,P)=>({element:O.element,height:C[P]})),Pb=g=>Zn(g,(C,O)=>C+O,0),ld=(g,C)=>xs.hasColumns(g)?Op(g,C):ym(g,C),Lb=(g,C,O)=>{const P=ld(g,C);$e(P,G=>{O.setElementWidth(G.element,G.width)})},Bb=(g,C,O,P,G)=>{const ee=xs.fromTable(g),ue=G.getCellDelta(C),ye=G.getWidths(ee,G),xe=O===ee.grid.columns-1,Ge=P.clampTableDelta(ye,O,ue,G.minCellWidth(),xe),vt=sa(ye,O,Ge,G,P),ln=lt(vt,(Fn,On)=>Fn+ye[On]);Lb(ee,ln,G),P.resizeTable(G.adjustTableWidth,Ge,xe)},IT=(g,C,O)=>{const P=xs.fromTable(g),G=vy(P,g),ee=lt(G,(xe,Ge)=>O===Ge?Math.max(C+xe,gh()):xe),ue=OT(P,ee);$e(ue,xe=>{Sv(xe.element,xe.height)}),$e(xs.justCells(P),xe=>{_T(xe.element)});const ye=Pb(ee);Sv(g,ye)},UE=(g,C,O,P,G)=>{const ee=xs.generate(C),ue=P.getWidths(ee,P),ye=P.pixelWidth(),{newSizes:xe,delta:Ge}=G.calcRedestributedWidths(ue,ye,O.pixelDelta,P.isRelative);Lb(ee,xe,P),P.adjustTableWidth(Ge)},jE=(g,C,O,P)=>{const G=xs.generate(C),ee=P.getWidths(G,P);Lb(G,ee,P)},zE=(g,C)=>{lT(g)||Zd(g).each(P=>{const G=P.value/2;sS(g,G,P.unit),sS(C,G,P.unit)})},RT=(g,C,O)=>{const P=bg(g,C,1);O===1||P<=1?vr(g,C):ya(g,C,Math.min(O,P))},vx=(g,C)=>O=>{const P=O.column+O.colspan-1,G=O.column;return P>=g&&G<C},Vb=(g,C,O)=>{if(xs.hasColumns(g)){const P=En(xs.justColumns(g),vx(C,O)),G=lt(P,ue=>{const ye=za(ue.element);return RT(ye,"span",O-C),ye}),ee=Hn.fromTag("colgroup");return Fd(ee,G),[ee]}else return[]},Hb=(g,C,O)=>lt(g.all,P=>{const G=En(P.cells,vx(C,O)),ee=lt(G,ye=>{const xe=za(ye.element);return RT(xe,"colspan",O-C),xe}),ue=Hn.fromTag("tr");return Fd(ue,ee),ue}),bh=(g,C)=>{const O=xs.fromTable(g);return Sy(O,C).map(G=>{const ee=G[G.length-1],ue=G[0].column,ye=ee.column+ee.colspan,xe=Vb(O,ue,ye),Ge=Hb(O,ue,ye);return[...xe,...Ge]})},Tg=(g,C,O)=>{const P=xs.fromTable(g);return lc(P,C).bind(ee=>{const ue=wg(P,O,!1),xe=Lr(ue).rows.slice(ee[0].row,ee[ee.length-1].row+ee[ee.length-1].rowspan),Ge=yt(xe,ln=>{const Fn=En(ln.cells,On=>!On.isLocked);return Fn.length>0?[{...ln,cells:Fn}]:[]}),vt=yy(Ge);return jc(vt.length>0,vt)}).map(ee=>iS(ee))},Fb=(g,C,O,P,G,ee)=>({minRow:g,minCol:C,maxRow:O,maxCol:P,allCells:G,selectedCells:ee}),bx=(g,C)=>{const O=g.grid.columns;let G=g.grid.rows,ee=O,ue=0,ye=0;const xe=[],Ge=[];return Bt(g.access,vt=>{if(xe.push(vt),C(vt)){Ge.push(vt);const ln=vt.row,Fn=ln+vt.rowspan-1,On=vt.column,Oo=On+vt.colspan-1;ln<G?G=ln:Fn>ue&&(ue=Fn),On<ee?ee=On:Oo>ye&&(ye=Oo)}}),Fb(G,ee,ue,ye,xe,Ge)},cS=(g,C,O)=>{const P=g[O].element,G=Hn.fromTag("td");dr(G,Hn.fromTag("br")),(C?dr:ki)(P,G)},lS=(g,C,O,P)=>{const G=En(g,ye=>ye.section!=="colgroup"),ee=C.grid.columns,ue=C.grid.rows;for(let ye=0;ye<ue;ye++){let xe=!1;for(let Ge=0;Ge<ee;Ge++)ye<O.minRow||ye>O.maxRow||Ge<O.minCol||Ge>O.maxCol||(xs.getAt(C,ye,Ge).filter(P).isNone()?cS(G,xe,ye):xe=!0)}},yx=(g,C,O,P)=>{Bt(O.columns,ue=>{(ue.column<C.minCol||ue.column>C.maxCol)&&rc(ue.element)});const G=En(fy(g,"tr"),ue=>ue.dom.childElementCount===0);$e(G,rc),(C.minCol===C.maxCol||C.minRow===C.maxRow)&&$e(fy(g,"th,td"),ue=>{vr(ue,"rowspan"),vr(ue,"colspan")}),vr(g,hy),vr(g,"data-snooker-col-series"),_v.getTableSize(g).adjustTableWidth(P)},Sx=(g,C,O,P)=>{if(P.minCol===0&&C.grid.columns===P.maxCol+1)return 0;const G=Ct(C,g,O),ee=Et(G,(Ge,vt)=>Ge+vt,0),xe=Et(G.slice(P.minCol,P.maxCol+1),(Ge,vt)=>Ge+vt,0)/ee*O.pixelWidth()-O.pixelWidth();return O.getCellDelta(xe)},WE=(g,C)=>{const O=Fn=>jt(Fn.element,C),P=za(g),G=vo(P),ee=_v.getTableSize(g),ue=xs.generate(G),ye=bx(ue,O),xe="th:not("+C+"),td:not("+C+")",Ge=RE(P,"th,td",Fn=>jt(Fn,xe));$e(Ge,rc),lS(G,ue,ye,O);const vt=xs.fromTable(g),ln=Sx(g,vt,ee,ye);return yx(P,ye,ue,ln),P},$b=oc("col"),GE=oc("colgroup"),Rf=g=>kr(g)==="tr"||GE(g),Cx=g=>{const C=bg(g,"colspan",1),O=bg(g,"rowspan",1);return{element:g,colspan:C,rowspan:O}},Ip=(g,C=Cx)=>{const O=ye=>$b(ye.element)?g.col(ye):g.cell(ye),P=ye=>GE(ye.element)?g.colgroup(ye):g.row(ye),G=ye=>{if(Rf(ye))return P({element:ye});{const xe=ye,Ge=O(C(xe));return ee=me.some({item:xe,replacement:Ge}),Ge}};let ee=me.none();return{getOrInit:(ye,xe)=>ee.fold(()=>G(ye),Ge=>xe(ye,Ge.item)?Ge.replacement:G(ye))}},uS=g=>C=>{const O=[],P=(ue,ye)=>ce(O,xe=>ye(xe.item,ue)),G=ue=>{const ye=g==="td"?{scope:null}:{},xe=C.replace(ue,g,ye);return O.push({item:ue,sub:xe}),xe};return{replaceOrInit:(ue,ye)=>{if(Rf(ue)||$b(ue))return ue;{const xe=ue;return P(xe,ye).fold(()=>G(xe),Ge=>ye(ue,Ge.item)?Ge.sub:G(xe))}}}},Ex=g=>Wc(g,"scope").map(C=>C.substr(0,3)),ud={modification:Ip,transform:uS,merging:g=>({unmerge:P=>{const G=Ex(P);return G.each(ee=>ya(P,"scope",ee)),()=>{const ee=g.cell({element:P,colspan:1,rowspan:1});return Ef(ee,"width"),Ef(P,"width"),G.each(ue=>ya(ee,"scope",ue)),ee}},merge:P=>{const G=()=>{const ee=Os(lt(P,Ex));if(ee.length===0)return me.none();{const ue=ee[0],ye=["row","col"];return Be(ee,Ge=>Ge!==ue&&$t(ye,Ge))?me.none():me.from(ue)}};return Ef(P[0],"width"),G().fold(()=>vr(P[0],"scope"),ee=>ya(P[0],"scope",ee+"group")),K(P[0])}})},dS=(g,C)=>{const O=g.slice(0,C[C.length-1].row+1),P=yy(O);return yt(P,G=>{const ee=G.cells.slice(0,C[C.length-1].column+1);return lt(ee,ue=>ue.element)})},wx=(g,C)=>{const O=g.slice(C[0].row+C[0].rowspan-1,g.length),P=yy(O);return yt(P,G=>{const ee=G.cells.slice(C[0].column+C[0].colspan-1,G.cells.length);return lt(ee,ue=>ue.element)})},Av=(g,C,O)=>{const P=xs.fromTable(g);return lc(P,C).map(ee=>{const ue=wg(P,O,!1),{rows:ye}=Lr(ue),xe=dS(ye,ee),Ge=wx(ye,ee);return{upOrLeftCells:xe,downOrRightCells:Ge}})},a4={only:(g,C)=>{const O=up(g)?fp(g):g;return{parent:K(O),view:K(g),dragContainer:K(O),origin:K(li(0,0)),isResizable:C}},detached:(g,C,O)=>{const P=()=>Ds(C);return{parent:K(C),view:K(g),dragContainer:K(C),origin:P,isResizable:O}},body:(g,C)=>({parent:K(g),view:K(g),dragContainer:K(g),origin:()=>Ds(g),isResizable:C})},Ir=ft.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Ax=(g,C,O)=>{const P=O.substring(0,O.length-g.length),G=parseFloat(P);return P===G.toString()?C(G):Ir.invalid(O)},xf={...Ir,from:g=>Yu(g,"%")?Ax("%",Ir.percent,g):Yu(g,"px")?Ax("px",Ir.pixels,g):Ir.invalid(g)},Ub=(g,C)=>lt(g,O=>xf.from(O).fold(()=>O,G=>G/C*100+"%",G=>G+"%")),zs=(g,C,O)=>{const P=O/C;return lt(g,G=>xf.from(G).fold(()=>G,ue=>ue*P+"px",ue=>ue/100*O+"px"))},Ba=(g,C)=>{const O=g.fold(()=>K(""),P=>{const G=P/C;return K(G+"px")},()=>{const P=100/C;return K(P+"%")});return at(C,O)},fS=(g,C,O)=>g.fold(()=>C,P=>zs(C,O,P),P=>Ub(C,O)),qE=(g,C,O)=>{const P=xf.from(O),G=Xt(g,ee=>ee==="0px")?Ba(P,g.length):fS(P,g,C);return Ox(G)},pi=(g,C)=>g.length===0?C:Zn(g,(O,P)=>xf.from(P).fold(K(0),se,se)+O,0),Cy=(g,C)=>{const O=Math.floor(g);return{value:O+C,remainder:g-O}},KE=(g,C)=>xf.from(g).fold(K(g),O=>O+C+"px",O=>O+C+"%"),Ox=g=>{if(g.length===0)return g;const C=Zn(g,(P,G)=>{const ee=xf.from(G).fold(()=>({value:G,remainder:0}),ue=>Cy(ue,"px"),ue=>({value:ue+"%",remainder:0}));return{output:[ee.value].concat(P.output),remainder:P.remainder+ee.remainder}},{output:[],remainder:0}),O=C.output;return O.slice(0,O.length-1).concat([KE(O[O.length-1],Math.round(C.remainder))])},Ix=xf.from,Rx=(g,C,O)=>{$e(C,P=>{const G=g.slice(P.column,P.colspan+P.column),ee=pi(G,Sa());ac(P.element,"width",ee+O)})},m6=(g,C,O)=>{$e(C,(P,G)=>{const ee=pi([g[G]],Sa());ac(P.element,"width",ee+O)})},c4=(g,C,O)=>{$e(O,P=>{Ef(P.element,"height")}),$e(C,(P,G)=>{ac(P.element,"height",g[G])})},l4=g=>Ix(g).fold(K("px"),K("px"),K("%")),xx=(g,C,O)=>{const P=xs.fromTable(g),G=P.all,ee=xs.justCells(P),ue=xs.justColumns(P);C.each(ye=>{const xe=l4(ye),Ge=jo(g),vt=cd(P,g),ln=qE(vt,Ge,ye);xs.hasColumns(P)?m6(ln,ue,xe):Rx(ln,ee,xe),ac(g,"width",ye)}),O.each(ye=>{const xe=ku(g),Ge=Fi(P,g),vt=qE(Ge,xe,ye);c4(vt,G,ee),ac(g,"height",ye)})},Dx=lx,Rp=Cg,pl=ux;var xp=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],yh=()=>{const g=Ge=>Hn.fromDom(Ge.dom.cloneNode(!1)),C=Ge=>dl(Ge).dom,O=Ge=>Wr(Ge)?kr(Ge)==="body"?!0:$t(xp,kr(Ge)):!1,P=Ge=>Wr(Ge)?$t(["br","img","hr","input"],kr(Ge)):!1,G=Ge=>Wr(Ge)&&Du(Ge,"contenteditable")==="false",ee=(Ge,vt)=>Ge.dom.compareDocumentPosition(vt.dom),ue=(Ge,vt)=>{const ln=nd(Ge);Cf(vt,ln)},ye=Ge=>{const vt=kr(Ge);return $t(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],vt)},xe=Ge=>Wr(Ge)?Wc(Ge,"lang"):me.none();return{up:K({selector:iu,closest:ta,predicate:br,all:Hd}),down:K({selector:vp,predicate:pm}),styles:K({get:lm,getRaw:od,set:ac,remove:Ef}),attrs:K({get:Du,set:ya,remove:vr,copyTo:ue}),insert:K({before:ji,after:Sf,afterAll:ua,append:dr,appendAll:Fd,prepend:ki,wrap:nT}),remove:K({unwrap:ja,remove:rc}),create:K({nu:Hn.fromTag,clone:g,text:Hn.fromText}),query:K({comparePosition:ee,prevSibling:bb,nextSibling:pp}),property:K({children:$a,name:kr,parent:Me,document:C,isText:yf,isComment:SE,isElement:Wr,isSpecial:ye,getLanguage:xe,getText:gp,setText:uh,isBoundary:O,isEmptyTag:P,isNonEditable:G}),eq:hs,is:ae}};const Sh=(g,C)=>({item:g,mode:C}),Tv=(g,C,O,P=Sm)=>g.property().parent(C).map(G=>Sh(G,P)),Sm=(g,C,O,P=Og)=>O.sibling(g,C).map(G=>Sh(G,P)),Og=(g,C,O,P=Og)=>{const G=g.property().children(C);return O.first(G).map(ue=>Sh(ue,P))},DT=[{current:Tv,next:Sm,fallback:me.none()},{current:Sm,next:Og,fallback:me.some(Tv)},{current:Og,next:Og,fallback:me.some(Sm)}],kT=(g,C,O,P,G=DT)=>ce(G,ue=>ue.current===O).bind(ue=>ue.current(g,C,P,ue.next).orThunk(()=>ue.fallback.bind(ye=>kT(g,C,ye,P)))),ZE={left:()=>({sibling:(O,P)=>O.query().prevSibling(P),first:O=>O.length>0?me.some(O[O.length-1]):me.none()}),right:()=>({sibling:(O,P)=>O.query().nextSibling(P),first:O=>O.length>0?me.some(O[0]):me.none()})},YE=(g,C,O,P,G,ee)=>kT(g,C,P,G).bind(ye=>ee(ye.item)?me.none():O(ye.item)?me.some(ye.item):YE(g,ye.item,O,ye.mode,G,ee)),kx=(g,C,O,P)=>YE(g,C,O,Sm,ZE.left(),P),JE=(g,C,O,P)=>YE(g,C,O,Sm,ZE.right(),P),Ov=(g,C)=>({element:g,offset:C}),pS=(g,C,O)=>g.property().isText(C)&&g.property().getText(C).trim().length===0||g.property().isComment(C)?O(C).bind(P=>pS(g,P,O).orThunk(()=>me.some(P))):me.none(),Ch=(g,C)=>g.property().isText(C)?g.property().getText(C).length:g.property().children(C).length,XE=(g,C)=>{const O=pS(g,C,g.query().prevSibling).getOr(C);if(g.property().isText(O))return Ov(O,Ch(g,O));const P=g.property().children(O);return P.length>0?XE(g,P[P.length-1]):Ov(O,Ch(g,O))},d4=XE,QE=yh(),e_=g=>d4(QE,g),Mx=g=>C=>g.property().children(C).length===0,f4=(g,C,O)=>Nx(g,C,Mx(g),O),Ey=(g,C,O)=>Cm(g,C,Mx(g),O),Nx=kx,Cm=JE,_y=yh(),t_=(g,C)=>f4(_y,g,C),Em=(g,C)=>Ey(_y,g,C),mu=(g,C,O)=>Nx(_y,g,C,O),dd=(g,C,O)=>Cm(_y,g,C,O),fd=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],n_=(g,C)=>{const O=g.property().name(C);return $t(["ol","ul"],O)},MT=(g,C)=>{const O=g.property().name(C);return $t(fd,O)},wy=(g,C)=>$t(["br","img","hr","input"],g.property().name(C)),_m=(g,C,O,P)=>{const G=O[0],ee=O.slice(1);return P(g,C,G,ee)},p4=(g,C,O)=>O.length>0?_m(g,C,O,Va):me.none(),Va=(g,C,O,P)=>{const G=C(g,O);return Zn(P,(ee,ue)=>{const ye=C(g,ue);return o_(g,ee,ye)},G)},o_=(g,C,O)=>C.bind(P=>O.filter(le(g.eq,P))),Pu=(g,C)=>le(g.eq,C),Px=(g,C,O,P=De)=>{const G=[C].concat(g.up().all(C)),ee=[O].concat(g.up().all(O)),ue=vt=>Hs(vt,P).fold(()=>vt,Fn=>vt.slice(0,Fn+1)),ye=ue(G),xe=ue(ee),Ge=ce(ye,vt=>Be(xe,Pu(g,vt)));return{firstpath:ye,secondpath:xe,shared:Ge}},Lx=p4,Iv=Px,Ig=yh(),fr=(g,C)=>Lx(Ig,(O,P)=>g(P),C),Ml=(g,C,O)=>Iv(Ig,g,C,O),hS=yh(),s_=g=>MT(hS,g),r_=g=>n_(hS,g),mS=g=>wy(hS,g),Bx=g=>{const C=oc("br"),O=xe=>Xt(xe,Ge=>C(Ge)||yf(Ge)&&gp(Ge).trim().length===0),P=xe=>kr(xe)==="li"||br(xe,r_).isSome(),G=xe=>pp(xe).map(Ge=>s_(Ge)?!0:mS(Ge)?kr(Ge)!=="img":!1).getOr(!1),ee=xe=>na(xe).bind(Ge=>{const vt=G(Ge);return Me(Ge).map(ln=>vt===!0||P(ln)||C(Ge)||s_(ln)&&!hs(xe,ln)?[]:[Hn.fromTag("br")])}).getOr([]),ye=(()=>{const xe=yt(g,Ge=>{const vt=$a(Ge);return O(vt)?[]:vt.concat(ee(Ge))});return xe.length===0?[Hn.fromTag("br")]:xe})();xl(g[0]),Fd(g[0],ye)},wm=g=>{vr(g,"width"),vr(g,"height")},Rv=g=>{const C=If(g);xx(g,me.some(C),me.none()),wm(g)},NT=g=>{const C=qa(g);xx(g,me.some(C),me.none()),wm(g)},Xd=g=>{const C=Of(g);xx(g,me.none(),me.some(C)),wm(g)},Ay=g=>{Ef(g,"width");const C=xE(g),O=C.length>0?C:bv(g);$e(O,P=>{Ef(P,"width"),wm(P)}),wm(g)},Ca={scope:["row","col"]},Lu=g=>()=>{const C=Hn.fromTag("td",g.dom);return dr(C,Hn.fromTag("br",g.dom)),C},i_=g=>()=>Hn.fromTag("col",g.dom),Vx=g=>()=>Hn.fromTag("colgroup",g.dom),PT=g=>()=>Hn.fromTag("tr",g.dom),xv=(g,C,O)=>{const P=cm(g,C);return Bt(O,(G,ee)=>{G===null?vr(P,ee):ya(P,ee,G)}),P},jb=g=>g,LT=(g,C,O)=>mv(g).map(G=>{const ee=O.join(","),ue=yr(G,ee,ye=>hs(ye,g));return Zn(ue,(ye,xe)=>{const Ge=Ud(xe);return dr(ye,Ge),Ge},C)}).getOr(C),BT=(g,C)=>{Bt(Ca,(O,P)=>Wc(g,P).filter(G=>$t(O,G)).each(G=>ya(C,P,G)))},gS=(g,C,O)=>{const P=(ue,ye)=>{W1(ue.element,ye),Ef(ye,"height"),ue.colspan!==1&&Ef(ye,"width")},G=ue=>{const ye=Hn.fromTag(kr(ue.element),C.dom),xe=O.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),Ge=xe.length>0?LT(ue.element,ye,xe):ye;return dr(Ge,Hn.fromTag("br")),P(ue,ye),BT(ue.element,ye),g(ue.element,ye),ye};return{col:ue=>{const ye=Hn.fromTag(kr(ue.element),C.dom);return P(ue,ye),g(ue.element,ye),ye},colgroup:Vx(C),row:PT(C),cell:G,replace:xv,colGap:i_(C),gap:Lu(C)}},VT=g=>({col:i_(g),colgroup:Vx(g),row:PT(g),cell:Lu(g),replace:jb,colGap:i_(g),gap:Lu(g)}),Dv=g=>xs.fromTable(g).grid,Rg=(g,C,O,P)=>{const G=Lr(g).rows;if(G.length===0)return g;for(let ee=C.startRow;ee<=C.finishRow;ee++)for(let ue=C.startCol;ue<=C.finishCol;ue++){const ye=G[ee],xe=$o(ye,ue).isLocked;Tl(ye,ue,Pr(P(),!1,xe))}return g},Hx=(g,C,O,P)=>{const G=Lr(g).rows;let ee=!0;for(let ue=0;ue<G.length;ue++)for(let ye=0;ye<Da(G[0]);ye++){const xe=G[ue],Ge=$o(xe,ye),vt=Ge.element,ln=O(vt,C);ln&&!ee?Tl(xe,ye,Pr(P(),!0,Ge.isLocked)):ln&&(ee=!1)}return g},Jc=(g,C)=>Et(g,(O,P)=>Be(O,G=>C(G.element,P.element))?O:O.concat([P]),[]),Fx=(g,C,O,P)=>(C>0&&C<g[0].cells.length&&$e(g,G=>{const ee=G.cells[C-1];let ue=0;const ye=P();for(;G.cells.length>C+ue&&O(ee.element,G.cells[C+ue].element);)Tl(G,C+ue,Pr(ye,!0,G.cells[C+ue].isLocked)),ue++}),g),kv=(g,C,O,P)=>{const G=Lr(g).rows;if(C>0&&C<G.length){const ee=G[C-1].cells,ue=Jc(ee,O);$e(ue,ye=>{let xe=me.none();for(let Ge=C;Ge<G.length;Ge++)for(let vt=0;vt<Da(G[0]);vt++){const ln=G[Ge],Fn=$o(ln,vt);O(Fn.element,ye.element)&&(xe.isNone()&&(xe=me.some(P())),xe.each(Oo=>{Tl(ln,vt,Pr(Oo,!0,Fn.isLocked))}))}})}return g},$x=(g,C,O)=>{if(g.row>=C.length||g.column>Da(C[0]))return Si.error("invalid start address out of table bounds, row: "+g.row+", column: "+g.column);const P=C.slice(g.row),G=P[0].cells.slice(g.column),ee=Da(O[0]),ue=O.length;return Si.value({rowDelta:P.length-ue,colDelta:G.length-ee})},a_=(g,C)=>{const O=Da(g[0]),P=Da(C[0]);return{rowDelta:0,colDelta:O-P}},HT=(g,C)=>{const O=g.length,P=C.length;return{rowDelta:O-P,colDelta:0}},vS=(g,C,O,P)=>{const G=C.section==="colgroup"?O.col:O.cell;return at(g,ee=>Pr(G(),!0,P(ee)))},FT=(g,C,O,P)=>{const G=g[g.length-1];return g.concat(at(C,()=>{const ee=G.section==="colgroup"?O.colgroup:O.row,ue=ih(G,ee,se),ye=vS(ue.cells.length,ue,O,xe=>ps(P,xe.toString()));return rh(ue,ye)}))},Ux=(g,C,O,P)=>lt(g,G=>{const ee=vS(C,G,O,De);return yc(G,P,ee)}),jx=(g,C,O)=>lt(g,P=>Et(O,(G,ee)=>{const ue=vS(1,P,C,be)[0];return ll(G,ee,ue)},P)),bS=(g,C,O)=>{const P=C.colDelta<0?Ux:se,G=C.rowDelta<0?FT:se,ee=Oc(g),ue=Da(g[0]),ye=Be(ee,vt=>vt===ue-1),xe=P(g,Math.abs(C.colDelta),O,ye?ue-1:ue),Ge=Oc(xe);return G(xe,Math.abs(C.rowDelta),O,bt(Ge,be))},Ha=(g,C,O,P)=>{const G=$o(g[C],O),ee=le(P,G.element),ue=g[C];return g.length>1&&Da(ue)>1&&(O>0&&ee(ai(ue,O-1))||O<ue.cells.length-1&&ee(ai(ue,O+1))||C>0&&ee(ai(g[C-1],O))||C<g.length-1&&ee(ai(g[C+1],O)))},hi=(g,C,O,P,G,ee)=>{const ue=g.row,ye=g.column,xe=O.length,Ge=Da(O[0]),vt=ue+xe,ln=ye+Ge+ee.length,Fn=bt(ee,be);for(let On=ue;On<vt;On++){let Oo=0;for(let zt=ye;zt<ln;zt++){if(Fn[zt]){Oo++;continue}Ha(C,On,zt,G)&&Hx(C,ai(C[On],zt),G,P.cell);const un=zt-ye-Oo,Bo=$o(O[On-ue],un),ls=Bo.element,no=P.replace(ls);Tl(C[On],zt,Pr(no,!0,Bo.isLocked))}}return C},Xc=(g,C,O)=>{const P=Da(C[0]),G=Lr(C).cols.length+g.row,ee=at(P-g.column,ye=>ye+g.column),ue=ce(ee,ye=>Xt(O,xe=>xe!==ye)).getOr(P-1);return{row:G,column:ue}},Za=(g,C,O)=>En(O,P=>P>=g.column&&P<=Da(C[0])+g.column),uc=(g,C,O,P,G)=>{const ee=Oc(C),ue=Xc(g,C,ee),ye=Lr(O).rows,xe=Za(ue,ye,ee);return $x(ue,C,ye).map(vt=>{const ln={...vt,colDelta:vt.colDelta-xe.length},Fn=bS(C,ln,P),On=Oc(Fn),Oo=Za(ue,ye,On);return hi(ue,Fn,ye,P,G,Oo)})},Ea=(g,C,O,P,G)=>{Fx(C,g,G,P.cell);const ee=HT(O,C),ue=bS(O,ee,P),ye=HT(C,ue),xe=bS(C,ye,P);return lt(xe,(Ge,vt)=>yc(Ge,g,ue[vt].cells))},c_=(g,C,O,P,G)=>{kv(C,g,G,P.cell);const ee=Oc(C),ue=a_(C,O),ye={...ue,colDelta:ue.colDelta-ee.length},xe=bS(C,ye,P),{cols:Ge,rows:vt}=Lr(xe),ln=Oc(xe),Fn=a_(O,C),On={...Fn,colDelta:Fn.colDelta+ln.length},Oo=jx(O,P,ln),zt=bS(Oo,On,P);return[...Ge,...vt.slice(0,g),...zt,...vt.slice(g,vt.length)]},l_=(g,C,O,P)=>ih(g,G=>P(G,O),C),u_=(g,C,O,P,G)=>{const{rows:ee,cols:ue}=Lr(g),ye=ee.slice(0,C),xe=ee.slice(C),Ge=l_(ee[O],(vt,ln)=>C>0&&C<ee.length&&P(ai(ee[C-1],ln),ai(ee[C],ln))?$o(ee[C],ln):Pr(G(vt.element,P),!0,vt.isLocked),P,G);return[...ue,...ye,Ge,...xe]},zx=(g,C,O,P,G,ee,ue)=>{if(O==="colgroup"||!P){const ye=$o(g,G);return Pr(ue(ye.element,ee),!0,!1)}else return $o(g,C)},d_=(g,C,O,P,G)=>lt(g,ee=>{const ue=C>0&&C<Da(ee)&&P(ai(ee,C-1),ai(ee,C)),ye=zx(ee,C,ee.section,ue,O,P,G);return ll(ee,C,ye)}),Wx=(g,C)=>yt(g,O=>{const P=O.cells,G=Zn(C,(ee,ue)=>ue>=0&&ue<ee.length?ee.slice(0,ue).concat(ee.slice(ue+1)):ee,P);return G.length>0?[Qa(O.element,G,O.section,O.isNew)]:[]}),zb=(g,C,O)=>{const{rows:P,cols:G}=Lr(g);return[...G,...P.slice(0,C),...P.slice(O+1)]},$T=(g,C,O,P)=>ai(g[C],O)!==void 0&&C>0&&P(ai(g[C-1],O),ai(g[C],O)),Wb=(g,C,O)=>C>0&&O(ai(g,C-1),ai(g,C)),f_=(g,C,O,P)=>$T(g,C,O,P)||Wb(g[C],O,P),UT=(g,C)=>Xt(C,se)&&yg(g.cells)?be:(P,G,ee)=>!(kr(P.element)==="th"&&C[ee]),p_=(g,C)=>Xt(C,se)&&yg(g)?be:(P,G,ee)=>!(kr(P.element)==="th"&&C[G]),Eh=(g,C,O,P)=>{const G=ue=>ue==="row"?JL(C):lT(C),ee=ue=>G(ue)?`${ue}group`:ue;return g?py(C)?ee(O):null:P&&py(C)?ee(O==="row"?"col":"row"):null},yS=(g,C)=>(O,P,G)=>me.some(Eh(g,O.element,"col",C[G])),jT=(g,C)=>(O,P)=>me.some(Eh(g,O.element,"row",C[P])),Ty=(g,C,O)=>Pr(O(g.element,C),!0,g.isLocked),SS=(g,C,O,P,G,ee,ue)=>{const ye=xe=>Be(C,Ge=>O(xe.element,Ge.element));return lt(g,(xe,Ge)=>ii(xe,(vt,ln)=>{if(ye(vt)){const Fn=ue(vt,Ge,ln)?G(vt,O,P):vt;return ee(Fn,Ge,ln).each(On=>{Rl(Fn.element,{scope:me.from(On)})}),Fn}else return vt}))},h_=(g,C,O)=>yt(g,(P,G)=>f_(g,G,C,O)?[]:[$o(P,C)]),zT=(g,C,O)=>{const P=g[C];return yt(P.cells,(G,ee)=>f_(g,C,ee,O)?[]:[G])},Dp=(g,C,O,P,G)=>{const ee=Lr(g).rows,ue=yt(C,vt=>h_(ee,vt,P)),ye=lt(ee,vt=>yg(vt.cells)),xe=p_(ue,ye),Ge=jT(O,ye);return SS(g,ue,P,G,Ty,Ge,xe)},Am=(g,C,O,P,G,ee,ue)=>{const{cols:ye,rows:xe}=Lr(g),Ge=xe[C[0]],vt=yt(C,un=>zT(xe,un,G)),ln=lt(Ge.cells,(un,Bo)=>yg(h_(xe,Bo,G))),Fn=[...xe];$e(C,un=>{Fn[un]=ue.transformRow(xe[un],O)});const On=[...ye,...Fn],Oo=UT(Ge,ln),zt=yS(P,ln);return SS(On,vt,G,ee,ue.transformCell,zt,Oo)},Oy=(g,C,O,P)=>{const G=Lr(g).rows,ee=lt(C,ue=>$o(G[ue.row],ue.column));return SS(g,ee,O,P,Ty,me.none,be)},Pt=g=>Et(g,(O,P)=>Be(O,ee=>ee.column===P.column)?O:O.concat([P]),[]).sort((O,P)=>O.column-P.column),Bu=g=>Cb(g,!0),Iy=g=>{bv(g).length===0&&rc(g)},CS=(g,C)=>({grid:g,cursor:C}),m_=g=>Ot(g,C=>Ot(C.cells,O=>{const P=O.element;return jc(Bu(P),P)})),_h=(g,C,O)=>{var P,G;const ee=Lr(g).rows;return me.from((G=(P=ee[C])===null||P===void 0?void 0:P.cells[O])===null||G===void 0?void 0:G.element).filter(Bu).orThunk(()=>m_(ee))},Nl=(g,C,O)=>{const P=_h(g,C,O);return CS(g,P)},ES=g=>Et(g,(O,P)=>Be(O,ee=>ee.row===P.row)?O:O.concat([P]),[]).sort((O,P)=>O.row-P.row),Gx=(g,C,O,P)=>{const G=C[0].row,ee=ES(C),ue=Zn(ee,(ye,xe)=>({grid:u_(ye.grid,G,xe.row+ye.delta,O,P.getOrInit),delta:ye.delta+1}),{grid:g,delta:0}).grid;return Nl(ue,G,C[0].column)},g_=(g,C,O,P)=>{const G=ES(C),ee=G[G.length-1],ue=ee.row+ee.rowspan,ye=Zn(G,(xe,Ge)=>u_(xe,ue,Ge.row,O,P.getOrInit),g);return Nl(ye,ue,C[0].column)},qx=(g,C,O,P)=>{const G=C.details,ee=Pt(G),ue=ee[0].column,ye=Zn(ee,(xe,Ge)=>({grid:d_(xe.grid,ue,Ge.column+xe.delta,O,P.getOrInit),delta:xe.delta+1}),{grid:g,delta:0}).grid;return Nl(ye,G[0].row,ue)},Gb=(g,C,O,P)=>{const G=C.details,ee=G[G.length-1],ue=ee.column+ee.colspan,ye=Pt(G),xe=Zn(ye,(Ge,vt)=>d_(Ge,ue,vt.column,O,P.getOrInit),g);return Nl(xe,G[0].row,ue)},WT=(g,C,O,P)=>{const G=Pt(C),ee=lt(G,ye=>ye.column),ue=Dp(g,ee,!0,O,P.replaceOrInit);return Nl(ue,C[0].row,C[0].column)},Tm=(g,C,O,P)=>{const G=Oy(g,C,O,P.replaceOrInit);return Nl(G,C[0].row,C[0].column)},GT=(g,C,O,P)=>{const G=Pt(C),ee=lt(G,ye=>ye.column),ue=Dp(g,ee,!1,O,P.replaceOrInit);return Nl(ue,C[0].row,C[0].column)},Kx=(g,C,O,P)=>{const G=Oy(g,C,O,P.replaceOrInit);return Nl(G,C[0].row,C[0].column)},Pl=(g,C)=>(O,P,G,ee,ue)=>{const ye=ES(P),xe=lt(ye,vt=>vt.row),Ge=Am(O,xe,g,C,G,ee.replaceOrInit,ue);return Nl(Ge,P[0].row,P[0].column)},wh=Pl("thead",!0),pd=Pl("tbody",!1),v_=Pl("tfoot",!1),Ry=(g,C,O,P)=>{const G=Pt(C.details),ee=Wx(g,lt(G,ye=>ye.column)),ue=ee.length>0?ee[0].cells.length-1:0;return Nl(ee,G[0].row,Math.min(G[0].column,ue))},Zx=(g,C,O,P)=>{const G=ES(C),ee=zb(g,G[0].row,G[G.length-1].row),ue=Math.max(Lr(ee).rows.length-1,0);return Nl(ee,Math.min(C[0].row,ue),C[0].column)},h4=(g,C,O,P)=>{const G=C.cells;Bx(G);const ee=Rg(g,C.bounds,O,P.merge(G));return CS(ee,me.from(G[0]))},qT=(g,C,O,P)=>{const ee=Zn(C,(ue,ye)=>Hx(ue,ye,O,P.unmerge(ye)),g);return CS(ee,me.from(C[0]))},Yx=(g,C,O,P)=>{const ee=((xe,Ge)=>{const vt=xs.fromTable(xe);return wg(vt,Ge,!0)})(C.clipboard,C.generators),ue=sh(C.row,C.column);return uc(ue,g,ee,C.generators,O).fold(()=>CS(g,me.some(C.element)),xe=>Nl(xe,C.row,C.column))},Rs=(g,C,O)=>{const P=di(g,O.section),G=xs.generate(P);return wg(G,C,!0)},xo=(g,C,O,P)=>{const G=Lr(g).rows,ee=C.cells[0].column,ue=G[C.cells[0].row],ye=Rs(C.clipboard,C.generators,ue),xe=Ea(ee,g,ye,C.generators,O);return Nl(xe,C.cells[0].row,C.cells[0].column)},_S=(g,C,O,P)=>{const G=Lr(g).rows,ee=C.cells[C.cells.length-1].column+C.cells[C.cells.length-1].colspan,ue=G[C.cells[0].row],ye=Rs(C.clipboard,C.generators,ue),xe=Ea(ee,g,ye,C.generators,O);return Nl(xe,C.cells[0].row,ee)},b_=(g,C,O,P)=>{const G=Lr(g).rows,ee=C.cells[0].row,ue=G[ee],ye=Rs(C.clipboard,C.generators,ue),xe=c_(ee,g,ye,C.generators,O);return Nl(xe,C.cells[0].row,C.cells[0].column)},KT=(g,C,O,P)=>{const G=Lr(g).rows,ee=C.cells[C.cells.length-1].row+C.cells[C.cells.length-1].rowspan,ue=G[C.cells[0].row],ye=Rs(C.clipboard,C.generators,ue),xe=c_(ee,g,ye,C.generators,O);return Nl(xe,ee,C.cells[0].column)},m4=(g,C)=>{const O=xs.fromTable(g);return lc(O,C).bind(G=>{const ee=G[G.length-1],ue=G[0].column,ye=ee.column+ee.colspan,xe=Fo(lt(O.all,Ge=>En(Ge.cells,vt=>vt.column>=ue&&vt.column<ye)));return kE(xe)}).getOr("")},ZT=(g,C)=>{const O=xs.fromTable(g);return lc(O,C).bind(kE).getOr("")},mi=(g,C)=>{const O=xs.fromTable(g);return lc(O,C).bind(G=>{const ee=G[G.length-1],ue=G[0].row,ye=ee.row+ee.rowspan,xe=O.all.slice(ue,ye);return QL(xe)}).getOr("")},y_=(g,C,O,P)=>jE(g,C,O,P.sizing),wS=(g,C,O,P)=>UE(g,C,O,P.sizing,P.resize),qb=(g,C)=>Be(C,O=>O.column===0&&O.isLocked),Ft=(g,C)=>Be(C,O=>O.column+O.colspan>=g.grid.columns&&O.isLocked),S_=(g,C)=>{const O=vT(g),P=Pt(C);return Et(P,(G,ee)=>{const ye=O[ee.column].map(_i).getOr(0);return G+ye},0)},Jx=g=>(C,O)=>lc(C,O).filter(P=>!(g?qb:Ft)(C,P)).map(P=>({details:P,pixelDelta:S_(C,P)})),C_=(g,C)=>Sy(g,C).map(O=>({details:O,pixelDelta:-S_(g,O)})),Xx=g=>(C,O)=>Ap(C,O).filter(P=>!(g?qb:Ft)(C,P.cells)),xg=ud.transform("th"),Kb=ud.transform("td"),Zb=(g,C,O,P)=>Ka(Gx,lc,H,H,ud.modification,g,C,O,P),YT=(g,C,O,P)=>Ka(g_,lc,H,H,ud.modification,g,C,O,P),Yb=(g,C,O,P)=>Ka(qx,Jx(!0),wS,H,ud.modification,g,C,O,P),Qr=(g,C,O,P)=>Ka(Gb,Jx(!1),wS,H,ud.modification,g,C,O,P),Ah=(g,C,O,P)=>Ka(Ry,C_,wS,Iy,ud.modification,g,C,O,P),Qx=(g,C,O,P)=>Ka(Zx,lc,H,Iy,ud.modification,g,C,O,P),Dg=(g,C,O,P)=>Ka(WT,Sy,H,H,xg,g,C,O,P),kp=(g,C,O,P)=>Ka(GT,Sy,H,H,Kb,g,C,O,P),g4=(g,C,O,P)=>Ka(wh,lc,H,H,xg,g,C,O,P),v4=(g,C,O,P)=>Ka(pd,lc,H,H,Kb,g,C,O,P),JT=(g,C,O,P)=>Ka(v_,lc,H,H,Kb,g,C,O,P),b4=(g,C,O,P)=>Ka(Tm,Sy,H,H,xg,g,C,O,P),y4=(g,C,O,P)=>Ka(Kx,Sy,H,H,Kb,g,C,O,P),S4=(g,C,O,P)=>Ka(h4,bm,y_,H,ud.merging,g,C,O,P),C4=(g,C,O,P)=>Ka(qT,aS,y_,H,ud.merging,g,C,O,P),XT=(g,C,O,P)=>Ka(Yx,FE,y_,H,ud.modification,g,C,O,P),Tn=(g,C,O,P)=>Ka(xo,Xx(!0),H,H,ud.modification,g,C,O,P),eD=(g,C,O,P)=>Ka(_S,Xx(!1),H,H,ud.modification,g,C,O,P),Rc=(g,C,O,P)=>Ka(b_,Ap,H,H,ud.modification,g,C,O,P),tD=(g,C,O,P)=>Ka(KT,Ap,H,H,ud.modification,g,C,O,P),nD=m4,oD=ZT,E4=mi,Qo=(g,C)=>{const O=C.column,P=C.column+C.colspan-1,G=C.row,ee=C.row+C.rowspan-1;return O<=g.finishCol&&P>=g.startCol&&G<=g.finishRow&&ee>=g.startRow},QT=(g,C)=>C.column>=g.startCol&&C.column+C.colspan-1<=g.finishCol&&C.row>=g.startRow&&C.row+C.rowspan-1<=g.finishRow,sD=(g,C)=>{let O=!0;const P=le(QT,C);for(let G=C.startRow;G<=C.finishRow;G++)for(let ee=C.startCol;ee<=C.finishCol;ee++)O=O&&xs.getAt(g,G,ee).exists(P);return O?me.some(C):me.none()},v6=(g,C)=>Gi(Math.min(g.row,C.row),Math.min(g.column,C.column),Math.max(g.row+g.rowspan-1,C.row+C.rowspan-1),Math.max(g.column+g.colspan-1,C.column+C.colspan-1)),_4=(g,C,O)=>{const P=xs.findItem(g,C,hs),G=xs.findItem(g,O,hs);return P.bind(ee=>G.map(ue=>v6(ee,ue)))},rD=(g,C,O)=>_4(g,C,O).bind(P=>sD(g,P)),b6=(g,C,O,P)=>xs.findItem(g,C,hs).bind(G=>{const ee=O>0?G.row+G.rowspan-1:G.row,ue=P>0?G.column+G.colspan-1:G.column;return xs.getAt(g,ee+O,ue+P).map(xe=>xe.element)}),w4=(g,C,O)=>_4(g,C,O).map(P=>{const G=xs.filterItems(g,le(Qo,P));return lt(G,ee=>ee.element)}),iD=(g,C)=>{const O=(P,G)=>Xs(G,P);return xs.findItem(g,C,O).map(P=>P.element)},eO=(g,C,O)=>ad(g).bind(P=>{const G=Qd(P);return b6(G,g,C,O)}),ns=(g,C,O)=>{const P=Qd(g);return w4(P,C,O)},tO=(g,C,O,P,G)=>{const ee=Qd(g),ue=hs(g,O)?me.some(C):iD(ee,C),ye=hs(g,G)?me.some(P):iD(ee,P);return ue.bind(xe=>ye.bind(Ge=>w4(ee,xe,Ge)))},kg=(g,C,O)=>{const P=Qd(g);return rD(P,C,O)},Qd=xs.fromTable,Qn={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Ll=()=>Hn.fromTag("th"),AS=()=>Hn.fromTag("td"),TS=()=>Hn.fromTag("col"),E_=(g,C,O,P)=>{const G=Hn.fromTag("tr");for(let ee=0;ee<g;ee++){const ue=P<C||ee<O?Ll():AS();ee<O&&ya(ue,"scope","row"),P<C&&ya(ue,"scope","col"),dr(ue,Hn.fromTag("br")),dr(G,ue)}return G},xy=g=>{const C=Hn.fromTag("colgroup");return at(g,()=>dr(C,TS())),C},OS=(g,C,O,P)=>at(g,G=>E_(C,O,P,G)),Mg=(g,C,O,P,G,ee=Qn)=>{const ue=Hn.fromTag("table"),ye=G!=="cells";Jr(ue,ee.styles),Cf(ue,ee.attributes),ee.colGroups&&dr(ue,xy(C));const xe=Math.min(g,O);if(ye&&O>0){const On=Hn.fromTag("thead");dr(ue,On);const zt=OS(O,C,G==="sectionCells"?xe:0,P);Fd(On,zt)}const Ge=Hn.fromTag("tbody");dr(ue,Ge);const vt=ye?g-xe:g,Fn=OS(vt,C,ye?0:O,P);return Fd(Ge,Fn),ue},hl=g=>{let C=[];return{bind:ee=>{if(ee===void 0)throw new Error("Event bind error: undefined handler");C.push(ee)},unbind:ee=>{C=En(C,ue=>ue!==ee)},trigger:(...ee)=>{const ue={};$e(g,(ye,xe)=>{ue[ye]=ee[xe]}),$e(C,ye=>{ye(ue)})}}},Om=g=>{const C=tn(g,P=>({bind:P.bind,unbind:P.unbind})),O=tn(g,P=>P.trigger);return{registry:C,trigger:O}},A4=mn(["compare","extract","mutate","sink"]),Qc=mn(["element","start","stop","destroy"]),Dy=mn(["forceDrop","drop","move","delayDrop"]),T4=()=>{let g=me.none();const C=()=>{g=me.none()},O=(ee,ue)=>{const ye=g.map(xe=>ee.compare(xe,ue));return g=me.some(ue),ye},P=(ee,ue)=>{ue.extract(ee).each(xe=>{O(ue,xe).each(vt=>{G.trigger.move(vt)})})},G=Om({move:hl(["info"])});return{onEvent:P,reset:C,events:G.registry}},js=()=>{const g=Om({move:hl(["info"])});return{onEvent:H,reset:H,events:g.registry}},Th=()=>{const g=js(),C=T4();let O=g;return{on:()=>{O.reset(),O=C},off:()=>{O.reset(),O=g},isOn:()=>O===C,onEvent:(ye,xe)=>{O.onEvent(ye,xe)},events:C.events}},Jb=(g,C,O)=>{let P=!1;const G=Om({start:hl([]),stop:hl([])}),ee=Th(),ue=()=>{Oo.stop(),ee.isOn()&&(ee.off(),G.trigger.stop())},ye=Ju(ue,200),xe=un=>{Oo.start(un),ee.on(),G.trigger.start()},Ge=un=>{ye.cancel(),ee.onEvent(un,C)};ee.events.move.bind(un=>{C.mutate(g,un.info)});const vt=()=>{P=!0},ln=()=>{P=!1},Fn=()=>P,On=un=>(...Bo)=>{P&&un.apply(null,Bo)},Oo=C.sink(Dy({forceDrop:ue,drop:On(ue),move:On(Ge),delayDrop:On(ye.throttle)}),O),zt=()=>{Oo.destroy()};return{element:Oo.element,go:xe,on:vt,off:ln,isActive:Fn,destroy:zt,events:G.registry}},Xb=Ts("ephox-dragster").resolve,Ws=g=>{const C={layerClass:Xb("blocker"),...g},O=Hn.fromTag("div");return ya(O,"role","presentation"),Jr(O,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),_f(O,Xb("blocker")),_f(O,C.layerClass),{element:K(O),destroy:()=>{rc(O)}}};var IS=A4({compare:(g,C)=>li(C.left-g.left,C.top-g.top),extract:g=>me.some(li(g.x,g.y)),sink:(g,C)=>{const O=Ws(C),P=sc(O.element(),"mousedown",g.forceDrop),G=sc(O.element(),"mouseup",g.drop),ee=sc(O.element(),"mousemove",g.move),ue=sc(O.element(),"mouseout",g.delayDrop),ye=()=>{O.destroy(),G.unbind(),ee.unbind(),ue.unbind(),P.unbind()},xe=vt=>{dr(vt,O.element())},Ge=()=>{rc(O.element())};return Qc({element:O.element,start:xe,stop:Ge,destroy:ye})},mutate:(g,C)=>{g.mutate(C.left,C.top)}});const O4=(g,C={})=>{var O;const P=(O=C.mode)!==null&&O!==void 0?O:IS;return Jb(g,P,C)},__=Ts("ephox-snooker").resolve,nO=()=>{const g=Om({drag:hl(["xDelta","yDelta"])});return{mutate:(O,P)=>{g.trigger.drag(O,P)},events:g.registry}},RS=()=>{const g=Om({drag:hl(["xDelta","yDelta","target"])});let C=me.none();const O=nO();return O.events.drag.bind(ee=>{C.each(ue=>{g.trigger.drag(ee.xDelta,ee.yDelta,ue)})}),{assign:ee=>{C=me.some(ee)},get:()=>C,mutate:O.mutate,events:g.registry}},cD=(g,C,O,P,G)=>{const ee=Hn.fromTag("div");return Jr(ee,{position:"absolute",left:C-P/2+"px",top:O+"px",height:G+"px",width:P+"px"}),Cf(ee,{"data-mce-bogus":"all","data-column":g,role:"presentation"}),ee},I4=(g,C,O,P,G)=>{const ee=Hn.fromTag("div");return Jr(ee,{position:"absolute",left:C+"px",top:O-G/2+"px",height:G+"px",width:P+"px"}),Cf(ee,{"data-mce-bogus":"all","data-row":g,role:"presentation"}),ee},xS=__("resizer-bar"),oO=__("resizer-rows"),sO=__("resizer-cols"),lD=7,uD=(g,C)=>yt(g.all,(O,P)=>C(O.element)?[P]:[]),dD=(g,C)=>{const O=[];return at(g.grid.columns,P=>{xs.getColumnAt(g,P).map(ee=>ee.element).forall(C)&&O.push(P)}),En(O,P=>{const G=xs.filterItems(g,ee=>ee.column===P);return Xt(G,ee=>C(ee.element))})},rO=g=>{const C=vp(g.parent(),"."+xS);$e(C,rc)},iO=(g,C,O)=>{const P=g.origin();$e(C,G=>{G.each(ee=>{const ue=O(P,ee);_f(ue,xS),dr(g.parent(),ue)})})},ir=(g,C,O,P)=>{iO(g,C,(G,ee)=>{const ue=cD(ee.col,ee.x-G.left,O.top-G.top,lD,P);return _f(ue,sO),ue})},fD=(g,C,O,P)=>{iO(g,C,(G,ee)=>{const ue=I4(ee.row,O.left-G.left,ee.y-G.top,P,lD);return _f(ue,oO),ue})},w_=(g,C,O,P,G)=>{const ee=Ds(O),ue=C.isResizable,ye=P.length>0?Tf.positions(P,O):[],xe=ye.length>0?uD(g,ue):[],Ge=En(ye,(On,Oo)=>Be(xe,zt=>Oo===zt));fD(C,Ge,ee,_i(O));const vt=G.length>0?du.positions(G,O):[],ln=vt.length>0?dD(g,ue):[],Fn=En(vt,(On,Oo)=>Be(ln,zt=>Oo===zt));ir(C,Fn,ee,_E(O))},aO=(g,C)=>{if(rO(g),g.isResizable(C)){const O=xs.fromTable(C),P=Ep(O),G=vT(O);w_(O,g,C,P,G)}},Df=(g,C)=>{const O=vp(g.parent(),"."+xS);$e(O,C)},pD=g=>{Df(g,C=>{ac(C,"display","none")})},cO=g=>{Df(g,C=>{ac(C,"display","block")})},R4=g=>wf(g,oO),Im=g=>wf(g,sO),x4=__("resizer-bar-dragging"),DS=g=>{const C=RS(),O=O4(C,{});let P=me.none();const G=(zt,un)=>me.from(Du(zt,un));C.events.drag.bind(zt=>{G(zt.target,"data-row").each(un=>{const Bo=La(zt.target,"top");ac(zt.target,"top",Bo+zt.yDelta+"px")}),G(zt.target,"data-column").each(un=>{const Bo=La(zt.target,"left");ac(zt.target,"left",Bo+zt.xDelta+"px")})});const ee=(zt,un)=>{const Bo=La(zt,un),ls=bg(zt,"data-initial-"+un,0);return Bo-ls};O.events.stop.bind(()=>{C.get().each(zt=>{P.each(un=>{G(zt,"data-row").each(Bo=>{const ls=ee(zt,"top");vr(zt,"data-initial-top"),Oo.trigger.adjustHeight(un,ls,parseInt(Bo,10))}),G(zt,"data-column").each(Bo=>{const ls=ee(zt,"left");vr(zt,"data-initial-left"),Oo.trigger.adjustWidth(un,ls,parseInt(Bo,10))}),aO(g,un)})})});const ue=(zt,un)=>{Oo.trigger.startAdjust(),C.assign(zt),ya(zt,"data-initial-"+un,La(zt,un)),_f(zt,x4),ac(zt,"opacity","0.2"),O.go(g.dragContainer())},ye=sc(g.parent(),"mousedown",zt=>{R4(zt.target)&&ue(zt.target,"top"),Im(zt.target)&&ue(zt.target,"left")}),xe=zt=>hs(zt,g.view()),Ge=zt=>ta(zt,"table",xe).filter(Cb),vt=zt=>wf(zt,"ephox-snooker-resizer-bar")||wf(zt,"ephox-dragster-blocker"),ln=sc(g.view(),"mouseover",zt=>{Ge(zt.target).fold(()=>{Lo(zt.target)&&!vt(zt.target)&&rO(g)},un=>{O.isActive()&&(P=me.some(un),aO(g,un))})}),Fn=()=>{ye.unbind(),ln.unbind(),O.destroy(),rO(g)},On=zt=>{aO(g,zt)},Oo=Om({adjustHeight:hl(["table","delta","row"]),adjustWidth:hl(["table","delta","column"]),startAdjust:hl([])});return{destroy:Fn,refresh:On,on:O.on,off:O.off,hideBars:le(pD,g),showBars:le(cO,g),events:Oo.registry}},D4={create:(g,C,O)=>{const P=Tf,G=du,ee=DS(g),ue=Om({beforeResize:hl(["table","type"]),afterResize:hl(["table","type"]),startDrag:hl([])});return ee.events.adjustHeight.bind(ye=>{const xe=ye.table;ue.trigger.beforeResize(xe,"row");const Ge=P.delta(ye.delta,xe);IT(xe,Ge,ye.row),ue.trigger.afterResize(xe,"row")}),ee.events.startAdjust.bind(ye=>{ue.trigger.startDrag()}),ee.events.adjustWidth.bind(ye=>{const xe=ye.table;ue.trigger.beforeResize(xe,"col");const Ge=G.delta(ye.delta,xe),vt=O(xe);Bb(xe,Ge,ye.column,C,vt),ue.trigger.afterResize(xe,"col")}),{on:ee.on,off:ee.off,refreshBars:ee.refresh,hideBars:ee.hideBars,showBars:ee.showBars,destroy:ee.destroy,events:ue.registry}}},Mv=g=>C=>C.options.get(g),A_="100%",hD=g=>{var C;const O=g.dom,P=(C=O.getParent(g.selection.getStart(),O.isBlock))!==null&&C!==void 0?C:g.getBody();return Ac(Hn.fromDom(P))+"px"},k4=(g,C)=>BS(g)||!O_(g)?C:Ng(g)?{...C,width:hD(g)}:{...C,width:A_},mD=(g,C)=>BS(g)||O_(g)?C:Ng(g)?{...C,width:hD(g)}:{...C,width:A_},w6=g=>{const C=g.options.register;C("table_clone_elements",{processor:"string[]"}),C("table_use_colgroups",{processor:"boolean",default:!0}),C("table_header_type",{processor:O=>{const P=$t(["section","cells","sectionCells","auto"],O);return P?{value:O,valid:P}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),C("table_sizing_mode",{processor:"string",default:"auto"}),C("table_default_attributes",{processor:"object",default:{border:"1"}}),C("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),C("table_column_resizing",{processor:O=>{const P=$t(["preservetable","resizetable"],O);return P?{value:O,valid:P}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),C("table_resize_bars",{processor:"boolean",default:!0}),C("table_style_by_css",{processor:"boolean",default:!0}),C("table_merge_content_on_paste",{processor:"boolean",default:!0})},gD=g=>me.from(g.options.get("table_clone_elements")),vD=g=>{const C=g.options.get("object_resizing");return $t(C.split(","),"table")},MS=Mv("table_header_type"),NS=Mv("table_column_resizing"),PS=g=>NS(g)==="preservetable",Qb=g=>NS(g)==="resizetable",T_=Mv("table_sizing_mode"),LS=g=>T_(g)==="relative",Ng=g=>T_(g)==="fixed",BS=g=>T_(g)==="responsive",lO=Mv("table_resize_bars"),O_=Mv("table_style_by_css"),bD=Mv("table_merge_content_on_paste"),yD=g=>{const C=g.options,O=C.get("table_default_attributes");return C.isSet("table_default_attributes")?O:mD(g,O)},SD=g=>{const C=g.options,O=C.get("table_default_styles");return C.isSet("table_default_styles")?O:k4(g,O)},M4=Mv("table_use_colgroups"),I_=g=>Hn.fromDom(g.getBody()),ky=g=>C=>hs(C,I_(g)),e0=g=>{vr(g,"data-mce-style");const C=O=>vr(O,"data-mce-style");$e(bv(g),C),$e(xE(g),C),$e(DE(g),C)},t0=g=>Hn.fromDom(g.selection.getStart()),CD=g=>g.getBoundingClientRect().width,ED=g=>g.getBoundingClientRect().height,_D=g=>(C,O)=>{const P=C.dom.getStyle(O,g)||C.dom.getAttrib(O,g);return me.from(P).filter(Xi)},R_=_D("width"),wD=_D("height"),N4=g=>/^(\d+(\.\d+)?)%$/.test(g),AD=g=>/^(\d+(\.\d+)?)px$/.test(g),x_=g=>K1(g,oc("table")).exists(Cb),uO=g=>iu(g,"table"),D_=(g,C,O)=>{const P=G=>ee=>O!==void 0&&O(ee)||hs(ee,G);return hs(g,C)?me.some({boxes:me.some([g]),start:g,finish:C}):uO(g).bind(G=>uO(C).bind(ee=>{if(hs(G,ee))return me.some({boxes:ns(G,g,C),start:g,finish:C});if(Xs(G,ee)){const ue=yr(C,"td,th",P(G)),ye=ue.length>0?ue[ue.length-1]:C;return me.some({boxes:tO(G,g,G,C,ee),start:g,finish:ye})}else if(Xs(ee,G)){const ue=yr(g,"td,th",P(ee)),ye=ue.length>0?ue[ue.length-1]:g;return me.some({boxes:tO(ee,g,G,C,ee),start:g,finish:ye})}else return Ml(g,C).shared.bind(ue=>ta(ue,"table",O).bind(ye=>{const xe=yr(C,"td,th",P(ye)),Ge=xe.length>0?xe[xe.length-1]:C,vt=yr(g,"td,th",P(ye)),ln=vt.length>0?vt[vt.length-1]:g;return me.some({boxes:tO(ye,g,G,C,ee),start:ln,finish:Ge})}))}))},dO=(g,C)=>{const O=vp(g,C);return O.length>0?me.some(O):me.none()},P4=(g,C)=>ce(g,O=>jt(O,C)),fO=(g,C,O)=>fh(g,C).bind(P=>fh(g,O).bind(G=>fr(uO,[P,G]).map(ee=>({first:P,last:G,table:ee})))),TD=(g,C)=>iu(g,"table").bind(O=>fh(O,C).bind(P=>D_(P,g).bind(G=>G.boxes.map(ee=>({boxes:ee,start:G.start,finish:G.finish}))))),OD=(g,C,O,P,G)=>P4(g,G).bind(ee=>eO(ee,C,O).bind(ue=>TD(ue,P))),VS=(g,C)=>dO(g,C),L4=(g,C,O)=>fO(g,C,O).bind(P=>{const G=xe=>hs(g,xe),ee="thead,tfoot,tbody,table",ue=iu(P.first,ee,G),ye=iu(P.last,ee,G);return ue.bind(xe=>ye.bind(Ge=>hs(xe,Ge)?kg(P.table,P.first,P.last):me.none()))}),pO=se,hO=g=>{const C=(P,G)=>Wc(P,G).exists(ee=>parseInt(ee,10)>1),O=P=>C(P,"rowspan")||C(P,"colspan");return g.length>0&&Xt(g,O)?me.some(g):me.none()},B4=(g,C,O)=>C.length<=1?me.none():L4(g,O.firstSelectedSelector,O.lastSelectedSelector).map(P=>({bounds:P,cells:C})),n0={create:(g,C)=>({selection:g,kill:C})},ID=(g,C,O,P)=>{switch(g.tag){case"none":return C();case"single":return P(g.element);case"multiple":return O(g.elements)}},RD=()=>({tag:"none"}),H4=g=>({tag:"multiple",elements:g}),F4=g=>({tag:"single",element:g}),$4=(g,C,O)=>({get:()=>VS(g(),O).fold(()=>C().fold(RD,F4),H4)}),HS={create:(g,C,O,P)=>({start:oa.on(g,C),finish:oa.on(O,P)})},mO=(g,C)=>{const O=kn(g,C);return ph.create(Hn.fromDom(O.startContainer),O.startOffset,Hn.fromDom(O.endContainer),O.endOffset)},FS=HS.create,xD=(g,C,O,P,G,ee,ue)=>hs(O,G)&&P===ee?me.none():ta(O,"td,th",C).bind(ye=>ta(G,"td,th",C).bind(xe=>$S(g,C,ye,xe,ue))),$S=(g,C,O,P,G)=>hs(O,P)?me.none():D_(O,P,C).bind(ee=>{const ue=ee.boxes.getOr([]);return ue.length>1?(G(g,ue,ee.start,ee.finish),me.some(n0.create(me.some(FS(O,0,O,bp(O))),!0))):me.none()}),U4=(g,C,O,P,G)=>{const ee=ue=>(G.clearBeforeUpdate(O),G.selectRange(O,ue.boxes,ue.start,ue.finish),ue.boxes);return OD(P,g,C,G.firstSelectedSelector,G.lastSelectedSelector).map(ee)},M_=ft.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),j4=(g,C,O)=>{const P=g.getRect(C),G=g.getRect(O);return G.right>P.left&&G.left<P.right},DD=g=>ta(g,"tr"),o0={...M_,verify:(g,C,O,P,G,ee,ue)=>ta(P,"td,th",ue).bind(ye=>ta(C,"td,th",ue).map(xe=>hs(ye,xe)?hs(P,ye)&&bp(ye)===G?ee(xe):M_.none("in same cell"):fr(DD,[ye,xe]).fold(()=>j4(g,xe,ye)?M_.success():ee(xe),Ge=>ee(xe)))).getOr(M_.none("default")),cata:(g,C,O,P,G)=>g.fold(C,O,P,G)},N_=oc("br"),P_=(g,C,O)=>C(g,O).bind(P=>yf(P)&&gp(P).trim().length===0?P_(P,C,O):me.some(P)),kD=(g,C,O)=>O.traverse(C).orThunk(()=>P_(C,O.gather,g)).map(O.relative),W4=(g,C)=>ze(g,C).filter(N_).orThunk(()=>ze(g,C-1).filter(N_)),L_=(g,C,O,P)=>W4(C,O).bind(G=>P.traverse(G).fold(()=>P_(G,P.gather,g).map(P.relative),ee=>hm(ee).map(ue=>oa.on(ue.parent,ue.index)))),MD=(g,C,O,P)=>(N_(C)?kD(g,C,P):L_(g,C,O,P)).map(ee=>({start:ee,finish:ee})),ND=g=>o0.cata(g,C=>me.none(),()=>me.none(),C=>me.some(Ov(C,0)),C=>me.some(Ov(C,bp(C)))),B_=(g,C)=>({left:g.left,top:g.top+C,right:g.right,bottom:g.bottom+C}),Rm=(g,C)=>({left:g.left,top:g.top-C,right:g.right,bottom:g.bottom-C}),PD=(g,C,O)=>({left:g.left+C,top:g.top+O,right:g.right+C,bottom:g.bottom+O}),G4=g=>g.top,q4=g=>g.bottom,K4=(g,C,O)=>O>=0&&O<bp(C)?g.getRangedRect(C,O,C,O+1):O>0?g.getRangedRect(C,O-1,C,O):me.none(),My=g=>({left:g.left,top:g.top,right:g.right,bottom:g.bottom}),LD=(g,C)=>me.some(g.getRect(C)),gO=(g,C,O)=>Wr(C)?LD(g,C).map(My):yf(C)?K4(g,C,O).map(My):me.none(),V_=(g,C)=>Wr(C)?LD(g,C).map(My):yf(C)?g.getRangedRect(C,0,C,bp(C)).map(My):me.none(),Oh=5,US=100,xm=ft.generate([{none:[]},{retry:["caret"]}]),vO=(g,C)=>g.left<C.left||Math.abs(C.right-g.left)<1||g.left>C.right,BD=(g,C,O)=>K1(C,s_).fold(De,P=>V_(g,P).exists(G=>vO(O,G))),VD=(g,C,O,P,G)=>{const ee=B_(G,Oh);return Math.abs(O.bottom-P.bottom)<1||O.top>G.bottom?xm.retry(ee):O.top===G.bottom?xm.retry(B_(G,1)):BD(g,C,G)?xm.retry(PD(ee,Oh,0)):xm.none()},HD={point:G4,adjuster:(g,C,O,P,G)=>{const ee=Rm(G,Oh);return Math.abs(O.top-P.top)<1||O.bottom<G.top?xm.retry(ee):O.bottom===G.top?xm.retry(Rm(G,1)):BD(g,C,G)?xm.retry(PD(ee,Oh,0)):xm.none()},move:Rm,gather:t_},Y4={point:q4,adjuster:VD,move:B_,gather:Em},J4=(g,C,O)=>g.elementFromPoint(C,O).filter(P=>kr(P)==="table").isSome(),X4=(g,C,O,P,G)=>Ny(g,C,O,C.move(P,Oh),G),Ny=(g,C,O,P,G)=>G===0?me.some(P):J4(g,P.left,C.point(P))?X4(g,C,O,P,G-1):g.situsFromPoint(P.left,C.point(P)).bind(ee=>ee.start.fold(me.none,ue=>V_(g,ue).bind(ye=>C.adjuster(g,ue,ye,O,P).fold(me.none,xe=>Ny(g,C,O,xe,G-1))).orThunk(()=>me.some(P)),me.none)),jS=(g,C,O)=>g.point(C)>O.getInnerHeight()?me.some(g.point(C)-O.getInnerHeight()):g.point(C)<0?me.some(-g.point(C)):me.none(),FD=(g,C,O)=>{const P=g.move(O,Oh),G=Ny(C,g,O,P,US).getOr(P);return jS(g,G,C).fold(()=>C.situsFromPoint(G.left,g.point(G)),ee=>(C.scrollBy(0,ee),C.situsFromPoint(G.left,g.point(G)-ee)))},Dm={tryUp:le(FD,HD),tryDown:le(FD,Y4),getJumpSize:K(Oh)},km=20,bO=(g,C,O)=>g.getSelection().bind(P=>MD(C,P.finish,P.foffset,O).fold(()=>me.some(Ov(P.finish,P.foffset)),G=>{const ee=g.fromSitus(G),ue=o0.verify(g,P.finish,P.foffset,ee.finish,ee.foffset,O.failure,C);return ND(ue)})),H_=(g,C,O,P,G,ee)=>ee===0?me.none():Nv(g,C,O,P,G).bind(ue=>{const ye=g.fromSitus(ue),xe=o0.verify(g,O,P,ye.finish,ye.foffset,G.failure,C);return o0.cata(xe,()=>me.none(),()=>me.some(ue),Ge=>hs(O,Ge)&&P===0?$D(g,O,P,Rm,G):H_(g,C,Ge,0,G,ee-1),Ge=>hs(O,Ge)&&P===bp(Ge)?$D(g,O,P,B_,G):H_(g,C,Ge,bp(Ge),G,ee-1))}),$D=(g,C,O,P,G)=>gO(g,C,O).bind(ee=>wo(g,G,P(ee,Dm.getJumpSize()))),wo=(g,C,O)=>{const P=ba().browser;return P.isChromium()||P.isSafari()||P.isFirefox()?C.retry(g,O):me.none()},Nv=(g,C,O,P,G)=>gO(g,O,P).bind(ee=>wo(g,G,ee)),Py=(g,C,O)=>bO(g,C,O).bind(P=>H_(g,C,P.element,P.offset,O,km).map(g.fromSitus)),yO=(g,C)=>TE(g,O=>Me(O).exists(P=>hs(P,C))),F_=(g,C,O,P,G)=>ta(P,"td,th",C).bind(ee=>ta(ee,"table",C).bind(ue=>yO(G,ue)?Py(g,C,O).bind(ye=>ta(ye.finish,"td,th",C).map(xe=>({start:ee,finish:xe,range:ye}))):me.none())),Pg=(g,C,O,P,G,ee)=>ee(P,C).orThunk(()=>F_(g,C,O,P,G).map(ue=>{const ye=ue.range;return n0.create(me.some(FS(ye.start,ye.soffset,ye.finish,ye.foffset)),!0)})),Ly=(g,C)=>ta(g,"tr",C).bind(O=>ta(O,"table",C).bind(P=>{const G=vp(P,"tr");return hs(O,G[0])?mu(P,ee=>na(ee).isSome(),C).map(ee=>{const ue=bp(ee);return n0.create(me.some(FS(ee,ue,ee,ue)),!0)}):me.none()})),zS=(g,C)=>ta(g,"tr",C).bind(O=>ta(O,"table",C).bind(P=>{const G=vp(P,"tr");return hs(O,G[G.length-1])?dd(P,ee=>mv(ee).isSome(),C).map(ee=>n0.create(me.some(FS(ee,0,ee,0)),!0)):me.none()})),Pv=(g,C,O,P,G,ee,ue)=>F_(g,O,P,G,ee).bind(ye=>$S(C,O,ye.start,ye.finish,ue)),By=(g,C)=>ta(g,"td,th",C),SO=g=>Ec(g).exists(Cb),Ih=(g,C,O,P)=>{const G=Ji(),ee=G.clear,ue=vt=>{G.on(ln=>{P.clearBeforeUpdate(C),By(vt.target,O).each(Fn=>{D_(ln,Fn,O).each(On=>{const Oo=On.boxes.getOr([]);if(Oo.length===1){const zt=Oo[0],un=Eb(zt)==="false",Bo=ho(hv(vt.target),zt,hs);un&&Bo&&P.selectRange(C,Oo,zt,zt)}else Oo.length>1&&(P.selectRange(C,Oo,On.start,On.finish),g.selectContents(Fn))})})})};return{clearstate:ee,mousedown:vt=>{P.clear(C),By(vt.target,O).filter(SO).each(G.set)},mouseover:vt=>{ue(vt)},mouseup:vt=>{ue(vt),ee()}}},CO={traverse:pp,gather:Em,relative:oa.before,retry:Dm.tryDown,failure:o0.failedDown},$_={traverse:bb,gather:t_,relative:oa.before,retry:Dm.tryUp,failure:o0.failedUp},Rh=g=>C=>C===g,Mm=Rh(38),Lv=Rh(40),s0=g=>g>=37&&g<=40,Nm={isBackward:Rh(37),isForward:Rh(39)},EO={isBackward:Rh(39),isForward:Rh(37)},WS=g=>({elementFromPoint:(un,Bo)=>Hn.fromPoint(Hn.fromDom(g.document),un,Bo),getRect:un=>un.dom.getBoundingClientRect(),getRangedRect:(un,Bo,ls,no)=>{const Sr=Z.exact(un,Bo,ls,no);return vv(g,Sr)},getSelection:()=>vg(g).map(un=>mO(g,un)),fromSitus:un=>{const Bo=Z.relative(un.start,un.finish);return mO(g,Bo)},situsFromPoint:(un,Bo)=>ay(g,un,Bo).map(ls=>HS.create(ls.start,ls.soffset,ls.finish,ls.foffset)),clearSelection:()=>{cy(g)},collapseSelection:(un=!1)=>{vg(g).each(Bo=>Bo.fold(ls=>ls.collapse(un),(ls,no)=>{const Sr=un?ls:no;mh(g,Sr,Sr)},(ls,no,Sr,Cr)=>{const ms=un?ls:Sr,_a=un?no:Cr;hh(g,ms,_a,ms,_a)}))},setSelection:un=>{hh(g,un.start,un.soffset,un.finish,un.foffset)},setRelativeSelection:(un,Bo)=>{mh(g,un,Bo)},selectNode:un=>{gv(g,un,!1)},selectContents:un=>{gv(g,un)},getInnerHeight:()=>g.innerHeight,getScrollY:()=>Vr(Hn.fromDom(g.document)).top,scrollBy:(un,Bo)=>{ru(un,Bo,Hn.fromDom(g.document))}}),xh=(g,C)=>({rows:g,cols:C}),Dh=(g,C,O,P)=>{const G=WS(g),ee=Ih(G,C,O,P);return{clearstate:ee.clearstate,mousedown:ee.mousedown,mouseover:ee.mouseover,mouseup:ee.mouseup}},UD=g=>K1(g,gb).exists(Cb),_O=(g,C)=>UD(g)||UD(C),wO=(g,C,O,P)=>{const G=WS(g),ee=()=>(P.clear(C),me.none());return{keydown:(xe,Ge,vt,ln,Fn,On)=>{const Oo=xe.raw,zt=Oo.which,un=Oo.shiftKey===!0;return dO(C,P.selectedSelector).fold(()=>(s0(zt)&&!un&&P.clearBeforeUpdate(C),s0(zt)&&un&&!_O(Ge,ln)?me.none:Lv(zt)&&un?le(Pv,G,C,O,CO,ln,Ge,P.selectRange):Mm(zt)&&un?le(Pv,G,C,O,$_,ln,Ge,P.selectRange):Lv(zt)?le(Pg,G,O,CO,ln,Ge,zS):Mm(zt)?le(Pg,G,O,$_,ln,Ge,Ly):me.none),ls=>{const no=Sr=>()=>Ot(Sr,ms=>U4(ms.rows,ms.cols,C,ls,P)).fold(()=>fO(C,P.firstSelectedSelector,P.lastSelectedSelector).map(ms=>{const _a=Lv(zt)||On.isForward(zt)?oa.after:oa.before;return G.setRelativeSelection(oa.on(ms.first,0),_a(ms.table)),P.clear(C),n0.create(me.none(),!0)}),ms=>me.some(n0.create(me.none(),!0)));return s0(zt)&&un&&!_O(Ge,ln)?me.none:Lv(zt)&&un?no([xh(1,0)]):Mm(zt)&&un?no([xh(-1,0)]):On.isBackward(zt)&&un?no([xh(0,-1),xh(-1,0)]):On.isForward(zt)&&un?no([xh(0,1),xh(1,0)]):s0(zt)&&!un?ee:me.none})()},keyup:(xe,Ge,vt,ln,Fn)=>dO(C,P.selectedSelector).fold(()=>{const On=xe.raw,Oo=On.which;return On.shiftKey===!0&&s0(Oo)&&_O(Ge,ln)?xD(C,O,Ge,vt,ln,Fn,P.selectRange):me.none()},me.none)}},AO=(g,C,O,P)=>{const G=WS(g);return(ee,ue)=>{P.clearBeforeUpdate(C),D_(ee,ue,O).each(ye=>{const xe=ye.boxes.getOr([]);P.selectRange(C,xe,ye.start,ye.finish),G.selectContents(ue),G.collapseSelection()})}},Q4={byClass:g=>{const C=J1(g.selected),O=AE([g.selected,g.lastSelected,g.firstSelected]),P=ee=>{const ue=vp(ee,g.selectedSelector);$e(ue,O)};return{clearBeforeUpdate:P,clear:P,selectRange:(ee,ue,ye,xe)=>{P(ee),$e(ue,C),_f(ye,g.firstSelected),_f(xe,g.lastSelected)},selectedSelector:g.selectedSelector,firstSelectedSelector:g.firstSelectedSelector,lastSelectedSelector:g.lastSelectedSelector}},byAttr:(g,C,O)=>{const P=xe=>{vr(xe,g.selected),vr(xe,g.firstSelected),vr(xe,g.lastSelected)},G=xe=>{ya(xe,g.selected,"1")},ee=xe=>{ue(xe),O()},ue=xe=>{const Ge=vp(xe,`${g.selectedSelector},${g.firstSelectedSelector},${g.lastSelectedSelector}`);$e(Ge,P)};return{clearBeforeUpdate:ue,clear:ee,selectRange:(xe,Ge,vt,ln)=>{ee(xe),$e(Ge,G),ya(vt,g.firstSelected,"1"),ya(ln,g.lastSelected,"1"),C(Ge,vt,ln)},selectedSelector:g.selectedSelector,firstSelectedSelector:g.firstSelectedSelector,lastSelectedSelector:g.lastSelectedSelector}}},Bl="data-mce-selected",r0="td["+Bl+"],th["+Bl+"]",TO="["+Bl+"]",Bv="data-mce-first-selected",Vl="td["+Bv+"],th["+Bv+"]",gu="data-mce-last-selected",Hl="td["+gu+"],th["+gu+"]",Mp=TO,Lg={selected:Bl,selectedSelector:r0,firstSelected:Bv,firstSelectedSelector:Vl,lastSelected:gu,lastSelectedSelector:Hl},Vu=(g,C,O)=>({element:O,mergable:B4(C,g,Lg),unmergable:hO(g),selection:pO(g)}),Pm=(g,C,O)=>({element:g,clipboard:C,generators:O}),zD=(g,C,O,P)=>({selection:pO(g),clipboard:O,generators:P}),O6=g=>ad(g).bind(C=>VS(C,Lg.firstSelectedSelector)).fold(K(g),C=>C[0]),WD=g=>(C,O)=>{const P=kr(C),G=P==="col"||P==="colgroup"?O6(C):C;return ta(G,g,O)},os=WD("th,td,caption"),U_=WD("th,td"),kf=g=>Wa(g.model.table.getSelectedCells()),GD=g=>En(kf(g),C=>jt(C,Lg.selectedSelector)),e3=g=>ad(g[0]).map(C=>{const O=WE(C,Mp);return e0(O),[O]}),t3=(g,C)=>lt(C,O=>g.selection.serializer.serialize(O.dom,{})).join(""),n3=(g,C)=>{const O=g.getDoc(),P=To(Hn.fromDom(g.getBody())),G=Hn.fromTag("div",O);ya(G,"data-mce-bogus","all"),Jr(G,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const ee=Po(P);Fd(G,C),dr(ee,G);const ue=G.dom.innerText;return rc(G),ue},qD=(g,C)=>{g.on("BeforeGetContent",O=>{const P=G=>{O.preventDefault(),e3(G).each(ee=>{const ue=O.format==="text"?n3(g,ee):t3(g,ee);O.content=ue})};if(O.selection===!0){const G=GD(g);G.length>=1&&P(G)}}),g.on("BeforeSetContent",O=>{if(O.selection===!0&&O.paste===!0){const P=kf(g);Ue(P).each(G=>{ad(G).each(ee=>{const ue=En(ey(O.content),xe=>kr(xe)!=="meta"),ye=oc("table");if(bD(g)&&ue.length===1&&ye(ue[0])){O.preventDefault();const xe=Hn.fromDom(g.getDoc()),Ge=VT(xe),vt=Pm(G,ue[0],Ge);C.pasteCells(ee,vt).each(()=>{g.focus()})}})})}})},OO=(g,C)=>g.dispatch("NewRow",{node:C}),GS=(g,C)=>g.dispatch("NewCell",{node:C}),Mf=(g,C,O)=>{g.dispatch("TableModified",{...O,table:C})},i0=(g,C,O,P,G)=>{g.dispatch("TableSelectionChange",{cells:C,start:O,finish:P,otherCells:G})},o3=g=>{g.dispatch("TableSelectionClear")},j_=(g,C,O,P,G)=>{g.dispatch("ObjectResizeStart",{target:C,width:O,height:P,origin:G})},s3=(g,C,O,P,G)=>{g.dispatch("ObjectResized",{target:C,width:O,height:P,origin:G})},z_={structure:!1,style:!0},xc={structure:!0,style:!1},r3={structure:!0,style:!0},hd=(g,C)=>LS(g)?_v.percentageSize(C):Ng(g)?_v.pixelSize(C):_v.getTableSize(C),I6=(g,C,O)=>{const P=Fa=>kr(I_(Fa))==="table",G=Fa=>!P(g)||Dv(Fa).rows>1,ee=Fa=>!P(g)||Dv(Fa).columns>1,ue=gD(g),ye=Qb(g)?H:zE,xe=Fa=>{switch(MS(g)){case"section":return vm.section();case"sectionCells":return vm.sectionCells();case"cells":return vm.cells();default:return vm.getTableSectionType(Fa,"section")}},Ge=(Fa,Fy)=>Fy.cursor.fold(()=>{const YS=bv(Fa);return Ue(YS).filter(Lo).map(Hg=>{O.clearSelectedCells(Fa.dom);const jl=g.dom.createRng();return jl.selectNode(Hg.dom),g.selection.setRng(jl),ya(Hg,"data-mce-selected","1"),jl})},YS=>{const Hg=e_(YS),jl=g.dom.createRng();return jl.setStart(Hg.element.dom,Hg.offset),jl.setEnd(Hg.element.dom,Hg.offset),g.selection.setRng(jl),O.clearSelectedCells(Fa.dom),me.some(jl)}),vt=(Fa,Fy,YS,Hg)=>(jl,u3,ek=!1)=>{e0(jl);const So=Hn.fromDom(g.getDoc()),Pf=gS(YS,So,ue),d3={sizing:hd(g,jl),resize:Qb(g)?dy():nx(),section:xe(jl)};return Fy(jl)?Fa(jl,u3,Pf,d3).bind(J_=>{C.refresh(jl.dom),$e(J_.newRows,Bm=>{OO(g,Bm.dom)}),$e(J_.newCells,Bm=>{GS(g,Bm.dom)});const tk=Ge(jl,J_);return Lo(jl)&&(e0(jl),ek||Mf(g,jl.dom,Hg)),tk.map(Bm=>({rng:Bm,effect:Hg}))}):me.none()},ln=vt(Qx,G,H,xc),Fn=vt(Ah,ee,H,xc),On=vt(Zb,be,H,xc),Oo=vt(YT,be,H,xc),zt=vt(Yb,be,ye,xc),un=vt(Qr,be,ye,xc),Bo=vt(S4,be,H,xc),ls=vt(C4,be,H,xc),no=vt(Tn,be,H,xc),Sr=vt(eD,be,H,xc),Cr=vt(Rc,be,H,xc),ms=vt(tD,be,H,xc),_a=vt(XT,be,H,r3),ef=vt(b4,be,H,xc),Lm=vt(y4,be,H,xc),Hv=vt(Dg,be,H,xc),c0=vt(kp,be,H,xc),Mr=vt(g4,be,H,xc),Fl=vt(v4,be,H,xc),$l=vt(JT,be,H,xc);return{deleteRow:ln,deleteColumn:Fn,insertRowsBefore:On,insertRowsAfter:Oo,insertColumnsBefore:zt,insertColumnsAfter:un,mergeCells:Bo,unmergeCells:ls,pasteColsBefore:no,pasteColsAfter:Sr,pasteRowsBefore:Cr,pasteRowsAfter:ms,pasteCells:_a,makeCellsHeader:ef,unmakeCellsHeader:Lm,makeColumnsHeader:Hv,unmakeColumnsHeader:c0,makeRowsHeader:Mr,makeRowsBody:Fl,makeRowsFooter:$l,getTableRowType:E4,getTableCellType:oD,getTableColType:nD}},W_=(g,C)=>{g.selection.select(C.dom,!0),g.selection.collapse(!0)},a0=(g,C)=>{fh(C,"td,th").each(le(W_,g))},IO=(g,C)=>{$e(vp(C,"tr"),O=>{OO(g,O.dom),$e(vp(O,"th,td"),P=>{GS(g,P.dom)})})},RO=g=>h(g)&&g.indexOf("%")!==-1,xO=(g,C,O,P,G)=>{const ee=SD(g),ue={styles:ee,attributes:yD(g),colGroups:M4(g)};return g.undoManager.ignore(()=>{const ye=Mg(O,C,G,P,MS(g),ue);ya(ye,"data-mce-id","__mce");const xe=EE(ye);g.insertContent(xe),g.addVisual()}),fh(I_(g),'table[data-mce-id="__mce"]').map(ye=>(Ng(g)?NT(ye):BS(g)?Ay(ye):(LS(g)||RO(ee.width))&&Rv(ye),e0(ye),vr(ye,"data-mce-id"),IO(g,ye),a0(g,ye),ye.dom)).getOrNull()},i3=(g,C,O,P={})=>{const G=ee=>B(ee)&&ee>0;if(G(C)&&G(O)){const ee=P.headerRows||0,ue=P.headerColumns||0;return xO(g,O,C,ue,ee)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var G_=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const KD="x-tinymce/dom-table-",q_=KD+"rows",Vv=KD+"columns",Vy=g=>{const C=G_.FakeClipboardItem(g);G_.write([C])},DO=g=>{var C;const O=(C=G_.read())!==null&&C!==void 0?C:[];return Ot(O,P=>me.from(P.getType(g)))},ZD=g=>{DO(g).isSome()&&G_.clear()},Bg=g=>{g.fold(kO,C=>Vy({[q_]:C}))},K_=()=>DO(q_),kO=()=>ZD(q_),Z_=g=>{g.fold(MO,C=>Vy({[Vv]:C}))},qS=()=>DO(Vv),MO=()=>ZD(Vv),KS=g=>os(t0(g),ky(g)).filter(x_),NO=g=>U_(t0(g),ky(g)).filter(x_),a3=(g,C)=>{const O=ky(g),P=()=>KS(g).each(un=>{ad(un,O).filter(M(O)).each(Bo=>{const ls=Hn.fromText("");if(Sf(Bo,ls),rc(Bo),g.dom.isEmpty(g.getBody()))g.setContent(""),g.selection.setCursorLocation();else{const no=g.dom.createRng();no.setStart(ls.dom,0),no.setEnd(ls.dom,0),g.selection.setRng(no),g.nodeChanged()}})}),G=un=>KS(g).each(Bo=>{BS(g)||Ng(g)||LS(g)||ad(Bo,O).each(no=>{un==="relative"&&!Dx(no)?Rv(no):un==="fixed"&&!Rp(no)?NT(no):un==="responsive"&&!pl(no)&&Ay(no),e0(no),Mf(g,no.dom,xc)})}),ee=un=>ad(un,O),ue=un=>NO(g).bind(Bo=>ee(Bo).map(ls=>un(ls,Bo))),ye=(un,Bo)=>{ue(ls=>{g.formatter.toggle("tableclass",{value:Bo},ls.dom),Mf(g,ls.dom,z_)})},xe=(un,Bo)=>{ue(ls=>{const no=kf(g),Cr=Xt(no,ms=>g.formatter.match("tablecellclass",{value:Bo},ms.dom))?g.formatter.remove:g.formatter.apply;$e(no,ms=>Cr("tablecellclass",{value:Bo},ms.dom)),Mf(g,ls.dom,z_)})},Ge=()=>{KS(g).each(un=>{ad(un,O).each(Bo=>{zi(Bo,"caption").fold(()=>{const ls=Hn.fromTag("caption");dr(ls,Hn.fromText("Caption")),tT(Bo,ls,0),g.selection.setCursorLocation(ls.dom,0)},ls=>{oc("caption")(un)&&Is("td",Bo).each(no=>g.selection.setCursorLocation(no.dom,0)),rc(ls)}),Mf(g,Bo.dom,xc)})})},vt=un=>{g.focus()},ln=(un,Bo=!1)=>ue((ls,no)=>{const Sr=Vu(kf(g),ls,no);un(ls,Sr,Bo).each(vt)}),Fn=()=>ue((un,Bo)=>{const ls=Vu(kf(g),un,Bo),no=gS(H,Hn.fromDom(g.getDoc()),me.none());return Tg(un,ls,no)}),On=()=>ue((un,Bo)=>{const ls=Vu(kf(g),un,Bo);return bh(un,ls)}),Oo=(un,Bo)=>Bo().each(ls=>{const no=lt(ls,Sr=>za(Sr));ue((Sr,Cr)=>{const ms=VT(Hn.fromDom(g.getDoc())),_a=zD(kf(g),Cr,no,ms);un(Sr,_a).each(vt)})}),zt=un=>(Bo,ls)=>ys(ls,"type").each(no=>{ln(un(no),ls.no_events)});Bt({mceTableSplitCells:()=>ln(C.unmergeCells),mceTableMergeCells:()=>ln(C.mergeCells),mceTableInsertRowBefore:()=>ln(C.insertRowsBefore),mceTableInsertRowAfter:()=>ln(C.insertRowsAfter),mceTableInsertColBefore:()=>ln(C.insertColumnsBefore),mceTableInsertColAfter:()=>ln(C.insertColumnsAfter),mceTableDeleteCol:()=>ln(C.deleteColumn),mceTableDeleteRow:()=>ln(C.deleteRow),mceTableCutCol:()=>On().each(un=>{Z_(un),ln(C.deleteColumn)}),mceTableCutRow:()=>Fn().each(un=>{Bg(un),ln(C.deleteRow)}),mceTableCopyCol:()=>On().each(un=>Z_(un)),mceTableCopyRow:()=>Fn().each(un=>Bg(un)),mceTablePasteColBefore:()=>Oo(C.pasteColsBefore,qS),mceTablePasteColAfter:()=>Oo(C.pasteColsAfter,qS),mceTablePasteRowBefore:()=>Oo(C.pasteRowsBefore,K_),mceTablePasteRowAfter:()=>Oo(C.pasteRowsAfter,K_),mceTableDelete:P,mceTableCellToggleClass:xe,mceTableToggleClass:ye,mceTableToggleCaption:Ge,mceTableSizingMode:(un,Bo)=>G(Bo),mceTableCellType:zt(un=>un==="th"?C.makeCellsHeader:C.unmakeCellsHeader),mceTableColType:zt(un=>un==="th"?C.makeColumnsHeader:C.unmakeColumnsHeader),mceTableRowType:zt(un=>{switch(un){case"header":return C.makeRowsHeader;case"footer":return C.makeRowsFooter;default:return C.makeRowsBody}})},(un,Bo)=>g.addCommand(Bo,un)),g.addCommand("mceInsertTable",(un,Bo)=>{i3(g,Bo.rows,Bo.columns,Bo.options)}),g.addCommand("mceTableApplyCellStyle",(un,Bo)=>{const ls=Cr=>"tablecell"+Cr.toLowerCase().replace("-","");if(!v(Bo))return;const no=En(kf(g),x_);if(no.length===0)return;const Sr=Ko(Bo,(Cr,ms)=>g.formatter.has(ls(ms))&&h(Cr));is(Sr)||(Bt(Sr,(Cr,ms)=>{const _a=ls(ms);$e(no,ef=>{Cr===""?g.formatter.remove(_a,{value:null},ef.dom,!0):g.formatter.apply(_a,{value:Cr},ef.dom)})}),ee(no[0]).each(Cr=>Mf(g,Cr.dom,z_)))})},c3=(g,C)=>{const O=ky(g),P=G=>U_(t0(g)).bind(ee=>ad(ee,O).map(ue=>{const ye=Vu(kf(g),ue,ee);return G(ue,ye)})).getOr("");Bt({mceTableRowType:()=>P(C.getTableRowType),mceTableCellType:()=>P(C.getTableCellType),mceTableColType:()=>P(C.getTableColType)},(G,ee)=>g.addQueryValueHandler(ee,G))},PO=g=>!wf(Hn.fromDom(g.target),"ephox-snooker-resizer-bar"),ZS=(g,C)=>{const O=$4(()=>Hn.fromDom(g.getBody()),()=>U_(t0(g),ky(g)),Lg.selectedSelector),P=(xe,Ge,vt)=>{ad(Ge).each(Fn=>{const On=lt(xe,ls=>ls.dom),Oo=gD(g),zt=gS(H,Hn.fromDom(g.getDoc()),Oo),un=kf(g),Bo=Av(Fn,{selection:un},zt).map(ls=>tn(ls,no=>lt(no,Sr=>Sr.dom))).getOrUndefined();i0(g,On,Ge.dom,vt.dom,Bo)})},G=()=>o3(g),ee=Q4.byAttr(Lg,P,G);return g.on("init",xe=>{const Ge=g.getWin(),vt=I_(g),ln=ky(g),Fn=()=>{const Mr=g.selection,Fl=Hn.fromDom(Mr.getStart()),$l=Hn.fromDom(Mr.getEnd());fr(ad,[Fl,$l]).fold(()=>ee.clear(vt),H)},On=Dh(Ge,vt,ln,ee),Oo=wO(Ge,vt,ln,ee),zt=AO(Ge,vt,ln,ee),un=Mr=>Mr.raw.shiftKey===!0;g.on("TableSelectorChange",Mr=>zt(Mr.start,Mr.finish));const Bo=(Mr,Fl)=>{un(Mr)&&(Fl.kill&&Mr.kill(),Fl.selection.each($l=>{const Nf=Z.relative($l.start,$l.finish),Ul=kn(Ge,Nf);g.selection.setRng(Ul)}))},ls=Mr=>{const Fl=Ei(Mr);if(Fl.raw.shiftKey&&s0(Fl.raw.which)){const $l=g.selection.getRng(),Nf=Hn.fromDom($l.startContainer),Ul=Hn.fromDom($l.endContainer);Oo.keyup(Fl,Nf,$l.startOffset,Ul,$l.endOffset).each(Vg=>{Bo(Fl,Vg)})}},no=Mr=>{const Fl=Ei(Mr);C.hide();const $l=g.selection.getRng(),Nf=Hn.fromDom($l.startContainer),Ul=Hn.fromDom($l.endContainer),Vg=um(Nm,EO)(Hn.fromDom(g.selection.getStart()));Oo.keydown(Fl,Nf,$l.startOffset,Ul,$l.endOffset,Vg).each(Fa=>{Bo(Fl,Fa)}),C.show()},Sr=Mr=>Mr.button===0,Cr=Mr=>Mr.buttons===void 0?!0:(Mr.buttons&1)!==0,ms=Mr=>{On.clearstate()},_a=Mr=>{Sr(Mr)&&PO(Mr)&&On.mousedown(Ei(Mr))},ef=Mr=>{Cr(Mr)&&PO(Mr)&&On.mouseover(Ei(Mr))},Lm=Mr=>{Sr(Mr)&&PO(Mr)&&On.mouseup(Ei(Mr))},c0=(()=>{const Mr=It(Hn.fromDom(vt)),Fl=It(0);return{touchEnd:Nf=>{const Ul=Hn.fromDom(Nf.target);if(oc("td")(Ul)||oc("th")(Ul)){const Vg=Mr.get(),Fa=Fl.get();hs(Vg,Ul)&&Nf.timeStamp-Fa<300&&(Nf.preventDefault(),zt(Ul,Ul))}Mr.set(Ul),Fl.set(Nf.timeStamp)}}})();g.on("dragstart",ms),g.on("mousedown",_a),g.on("mouseover",ef),g.on("mouseup",Lm),g.on("touchend",c0.touchEnd),g.on("keyup",ls),g.on("keydown",no),g.on("NodeChange",Fn)}),g.on("PreInit",()=>{g.serializer.addTempAttr(Lg.firstSelected),g.serializer.addTempAttr(Lg.lastSelected)}),{getSelectedCells:()=>ID(O.get(),K([]),xe=>lt(xe,Ge=>Ge.dom),xe=>[xe.dom]),clearSelectedCells:xe=>ee.clear(Hn.fromDom(xe))}},LO=(g,C)=>{const O=Hn.fromDom(g.getBody());return a4.body(O,C)},YD=g=>N(g)&&g.nodeName==="TABLE",Y_="bar-",l3=g=>Du(g,"data-mce-resize")!=="false",JD=g=>{const C=xs.fromTable(g);xs.hasColumns(C)||$e(bv(g),O=>{const P=lm(O,"width");ac(O,"width",P),vr(O,"width")})},BO=g=>Iu(g,"corner-"),Hy=g=>kd(g,"corner-"),VO=g=>{const C=Ji(),O=Ji(),P=Ji();let G,ee,ue,ye;const xe=no=>hd(g,no),Ge=()=>PS(g)?nx():dy(),vt=no=>Dv(no).columns,ln=no=>Dv(no).rows,Fn=(no,Sr,Cr,ms)=>{const _a=Hy(Sr),ef=Yu(_a,"e"),Lm=Iu(_a,"n");if(ee===""&&Rv(no),ye===""&&Xd(no),Cr!==G&&ee!==""){ac(no,"width",ee);const Hv=Ge(),c0=xe(no),Mr=PS(g)||ef?vt(no)-1:0;Bb(no,Cr-G,Mr,Hv,c0)}else if(N4(ee)){const Hv=parseFloat(ee.replace("%","")),c0=Cr*Hv/G;ac(no,"width",c0+"%")}if(AD(ee)&&JD(no),ms!==ue&&ye!==""){ac(no,"height",ye);const Hv=Lm?0:ln(no)-1;IT(no,ms-ue,Hv)}},On=()=>{O.on(no=>{no.destroy()})};g.on("init",()=>{const no=LO(g,l3);if(P.set(no),vD(g)&&lO(g)){const Sr=Ge(),Cr=D4.create(no,Sr,xe);g.mode.isReadOnly()||Cr.on(),Cr.events.startDrag.bind(ms=>{C.set(g.selection.getRng())}),Cr.events.beforeResize.bind(ms=>{const _a=ms.table.dom;j_(g,_a,CD(_a),ED(_a),Y_+ms.type)}),Cr.events.afterResize.bind(ms=>{const _a=ms.table,ef=_a.dom;e0(_a),C.on(Lm=>{g.selection.setRng(Lm),g.focus()}),s3(g,ef,CD(ef),ED(ef),Y_+ms.type),g.undoManager.add()}),O.set(Cr)}}),g.on("ObjectResizeStart",no=>{const Sr=no.target;if(YD(Sr)&&!g.mode.isReadOnly()){const Cr=Hn.fromDom(Sr);$e(g.dom.select(".mce-clonedresizable"),ms=>{g.dom.addClass(ms,"mce-"+NS(g)+"-columns")}),!Rp(Cr)&&Ng(g)?NT(Cr):!Dx(Cr)&&LS(g)&&Rv(Cr),pl(Cr)&&Iu(no.origin,Y_)&&Rv(Cr),G=no.width,ee=BS(g)?"":R_(g,Sr).getOr(""),ue=no.height,ye=wD(g,Sr).getOr("")}}),g.on("ObjectResized",no=>{const Sr=no.target;if(YD(Sr)){const Cr=Hn.fromDom(Sr),ms=no.origin;BO(ms)&&Fn(Cr,ms,no.width,no.height),e0(Cr),Mf(g,Cr.dom,z_)}});const Oo=()=>{O.on(no=>{no.on(),no.showBars()})},zt=()=>{O.on(no=>{no.off(),no.hideBars()})};return g.on("DisabledStateChange",no=>{no.state?zt():Oo()}),g.on("SwitchMode",()=>{g.mode.isReadOnly()?zt():Oo()}),g.on("dragstart dragend",no=>{no.type==="dragstart"?zt():Oo()}),g.on("remove",()=>{On()}),{refresh:no=>{O.on(Sr=>Sr.refreshBars(Hn.fromDom(no)))},hide:()=>{O.on(no=>no.hideBars())},show:()=>{O.on(no=>no.showBars())}}},gi=g=>{w6(g);const C=VO(g),O=ZS(g,C),P=I6(g,C,O);return a3(g,P),c3(g,P),qD(g,P),{getSelectedCells:O.getSelectedCells,clearSelectedCells:O.clearSelectedCells}},XD=g=>({table:gi(g)});var QD=()=>{e.add("dom",XD)};QD()})()),VTe}Nze();var FTe={},$Te={},UTe;function Pze(){return UTe||(UTe=1,(function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const n=(ve,Ve,it)=>{var jt;return it(ve,Ve.prototype)?!0:((jt=ve.constructor)===null||jt===void 0?void 0:jt.name)===Ve.name},r=ve=>{const Ve=typeof ve;return ve===null?"null":Ve==="object"&&Array.isArray(ve)?"array":Ve==="object"&&n(ve,String,(it,jt)=>jt.isPrototypeOf(it))?"string":Ve},i=ve=>Ve=>r(Ve)===ve,l=ve=>Ve=>typeof Ve===ve,f=ve=>Ve=>ve===Ve,h=i("string"),v=i("object"),y=i("array"),_=f(null),A=l("boolean"),R=ve=>ve==null,k=ve=>!R(ve),N=l("function"),L=(ve,Ve)=>{if(y(ve)){for(let it=0,jt=ve.length;it<jt;++it)if(!Ve(ve[it]))return!1;return!0}return!1},B=()=>{},H=ve=>()=>ve,q=(ve,Ve)=>ve===Ve;class Y{constructor(Ve,it){this.tag=Ve,this.value=it}static some(Ve){return new Y(!0,Ve)}static none(){return Y.singletonNone}fold(Ve,it){return this.tag?it(this.value):Ve()}isSome(){return this.tag}isNone(){return!this.tag}map(Ve){return this.tag?Y.some(Ve(this.value)):Y.none()}bind(Ve){return this.tag?Ve(this.value):Y.none()}exists(Ve){return this.tag&&Ve(this.value)}forall(Ve){return!this.tag||Ve(this.value)}filter(Ve){return!this.tag||Ve(this.value)?this:Y.none()}getOr(Ve){return this.tag?this.value:Ve}or(Ve){return this.tag?this:Ve}getOrThunk(Ve){return this.tag?this.value:Ve()}orThunk(Ve){return this.tag?this:Ve()}getOrDie(Ve){if(this.tag)return this.value;throw new Error(Ve??"Called getOrDie on None")}static from(Ve){return k(Ve)?Y.some(Ve):Y.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ve){this.tag&&Ve(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Y.singletonNone=new Y(!1);const K=Array.prototype.indexOf,se=Array.prototype.push,ie=(ve,Ve)=>K.call(ve,Ve),le=(ve,Ve)=>ie(ve,Ve)>-1,M=(ve,Ve)=>{const it=ve.length,jt=new Array(it);for(let Rn=0;Rn<it;Rn++){const so=ve[Rn];jt[Rn]=Ve(so,Rn)}return jt},we=(ve,Ve)=>{for(let it=0,jt=ve.length;it<jt;it++){const Rn=ve[it];Ve(Rn,it)}},Ne=(ve,Ve,it)=>(we(ve,(jt,Rn)=>{it=Ve(it,jt,Rn)}),it),De=ve=>{const Ve=[];for(let it=0,jt=ve.length;it<jt;++it){if(!y(ve[it]))throw new Error("Arr.flatten item "+it+" was not an array, input: "+ve);se.apply(Ve,ve[it])}return Ve},be=(ve,Ve)=>De(M(ve,Ve)),me=(ve,Ve)=>{for(let it=0;it<ve.length;it++){const jt=Ve(ve[it],it);if(jt.isSome())return jt}return Y.none()},Ye=Object.keys,Ke=Object.hasOwnProperty,Ze=(ve,Ve)=>{const it=Ye(ve);for(let jt=0,Rn=it.length;jt<Rn;jt++){const so=it[jt],Is=ve[so];Ve(Is,so)}},z=ve=>(Ve,it)=>{ve[it]=Ve},$t=(ve,Ve,it,jt)=>{Ze(ve,(Rn,so)=>{(Ve(Rn,so)?it:jt)(Rn,so)})},Be=(ve,Ve)=>{const it={};return $t(ve,Ve,z(it),B),it},at=(ve,Ve)=>Ke.call(ve,Ve),lt=(ve,Ve)=>at(ve,Ve)&&ve[Ve]!==void 0&&ve[Ve]!==null,$e=ve=>{let Ve=ve;return{get:()=>Ve,set:Rn=>{Ve=Rn}}},qt=(ve,Ve,it=q)=>ve.exists(jt=>it(jt,Ve)),io=ve=>{const Ve=[],it=jt=>{Ve.push(jt)};for(let jt=0;jt<ve.length;jt++)ve[jt].each(it);return Ve},En=(ve,Ve)=>ve?Y.some(Ve):Y.none(),Zn=ve=>{const Ve=$e(Y.none()),it=()=>Ve.get().each(ve);return{clear:()=>{it(),Ve.set(Y.none())},isSet:()=>Ve.get().isSome(),get:()=>Ve.get(),set:hs=>{it(),Ve.set(Y.some(hs))}}},Et=()=>{const ve=Zn(B);return{...ve,on:it=>ve.get().each(it)}},Jt=(ve,Ve)=>ve.substring(Ve),ce=(ve,Ve,it)=>Ve===""||ve.length>=Ve.length&&ve.substr(it,it+Ve.length)===Ve,Hs=(ve,Ve)=>Fo(ve,Ve)?Jt(ve,Ve.length):ve,Fo=(ve,Ve)=>ce(ve,Ve,0),yt=ve=>Ve=>Ve.options.get(ve),Xt=ve=>{const Ve=ve.options.register;Ve("link_assume_external_targets",{processor:it=>{const jt=h(it)||A(it);return jt?it===!0?{value:1,valid:jt}:it==="http"||it==="https"?{value:it,valid:jt}:{value:0,valid:jt}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),Ve("link_context_toolbar",{processor:"boolean",default:!1}),Ve("link_list",{processor:it=>h(it)||N(it)||L(it,v)}),Ve("link_default_target",{processor:"string"}),Ve("link_default_protocol",{processor:"string",default:"https"}),Ve("link_target_list",{processor:it=>A(it)||L(it,v),default:!0}),Ve("link_rel_list",{processor:"object[]",default:[]}),Ve("link_class_list",{processor:"object[]",default:[]}),Ve("link_title",{processor:"boolean",default:!0}),Ve("allow_unsafe_link_target",{processor:"boolean",default:!1}),Ve("link_quicklink",{processor:"boolean",default:!1}),Ve("link_attributes_postprocess",{processor:"function"})},Wn=yt("link_assume_external_targets"),bt=yt("link_context_toolbar"),Kt=yt("link_list"),Ut=yt("link_default_target"),Ue=yt("link_default_protocol"),dt=yt("link_target_list"),Ot=yt("link_rel_list"),Oe=yt("link_class_list"),pt=yt("link_title"),Bt=yt("allow_unsafe_link_target"),tn=yt("link_quicklink"),ht=yt("link_attributes_postprocess");var gt=tinymce.util.Tools.resolve("tinymce.util.URI"),No=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Ko=tinymce.util.Tools.resolve("tinymce.util.Tools");const Wo=ve=>k(ve)&&ve.nodeName.toLowerCase()==="a",Jn=ve=>Wo(ve)&&!!es(ve),ys=(ve,Ve)=>{if(ve.collapsed)return[];{const it=ve.cloneContents(),jt=it.firstChild,Rn=new No(jt,it),so=[];let Is=jt;do Ve(Is)&&so.push(Is);while(Is=Rn.next());return so}},ps=ve=>/^\w+:/i.test(ve),es=ve=>{var Ve,it;return(it=(Ve=ve.getAttribute("data-mce-href"))!==null&&Ve!==void 0?Ve:ve.getAttribute("href"))!==null&&it!==void 0?it:""},is=(ve,Ve)=>{const it=["noopener"],jt=ve?ve.split(/\s+/):[],Rn=Xs=>Ko.trim(Xs.sort().join(" ")),so=Xs=>(Xs=Is(Xs),Xs.length>0?Xs.concat(it):it),Is=Xs=>Xs.filter(ae=>Ko.inArray(it,ae)===-1),hs=Ve?so(jt):Is(jt);return hs.length>0?Rn(hs):""},st=ve=>ve.replace(/\uFEFF/g,""),ft=(ve,Ve)=>(Ve=Ve||Nn(ve.selection.getRng())[0]||ve.selection.getNode(),wn(Ve)?Y.from(ve.dom.select("a[href]",Ve)[0]):Y.from(ve.dom.getParent(Ve,"a[href]"))),It=(ve,Ve)=>ft(ve,Ve).isSome(),Dt=(ve,Ve)=>{const it=Ve.fold(()=>ve.getContent({format:"text"}),jt=>jt.innerText||jt.textContent||"");return st(it)},Nn=ve=>ys(ve,Jn),$n=ve=>Ko.grep(ve,Jn),lo=ve=>$n(ve).length>0,Vt=ve=>Nn(ve).length>0,Pn=ve=>{const Ve=ve.schema.getTextInlineElements(),it=so=>so.nodeType===1&&!Wo(so)&&!at(Ve,so.nodeName.toLowerCase());if(ft(ve).exists(so=>so.hasAttribute("data-mce-block")))return!1;const Rn=ve.selection.getRng();return Rn.collapsed?!0:ys(Rn,it).length===0},wn=ve=>k(ve)&&ve.nodeName==="FIGURE"&&/\bimage\b/i.test(ve.className),ko=ve=>Ne(["title","rel","class","target"],(it,jt)=>(ve[jt].each(Rn=>{it[jt]=Rn.length>0?Rn:null}),it),{href:ve.href}),ts=(ve,Ve)=>(Ve==="http"||Ve==="https")&&!ps(ve)?Ve+"://"+ve:ve,mn=(ve,Ve)=>{const it={...Ve};if(Ot(ve).length===0&&!Bt(ve)){const jt=is(it.rel,it.target==="_blank");it.rel=jt||null}return Y.from(it.target).isNone()&&dt(ve)===!1&&(it.target=Ut(ve)),it.href=ts(it.href,Wn(ve)),it},wr=(ve,Ve,it,jt)=>{it.each(so=>{at(Ve,"innerText")?Ve.innerText=so:Ve.textContent=so}),ve.dom.setAttribs(Ve,jt);const Rn=ve.dom.createRng();Rn.setStartAfter(Ve),Rn.setEndAfter(Ve),ve.selection.setRng(Rn)},As=(ve,Ve,it,jt)=>{const Rn=ve.dom;wn(Ve)?eu(Rn,Ve,jt):it.fold(()=>{ve.execCommand("mceInsertLink",!1,jt);const so=ve.selection.getEnd(),Is=Rn.createRng();Is.setStartAfter(so),Is.setEndAfter(so),ve.selection.setRng(Is)},so=>{ve.insertContent(Rn.createHTML("a",jt,Rn.encode(so)))})},Yi=(ve,Ve,it)=>{const jt=ve.selection.getNode(),Rn=ft(ve,jt),so=mn(ve,ko(it)),Is=ht(ve);k(Is)&&Is(so),ve.undoManager.transact(()=>{it.href===Ve.href&&Ve.attach(),Rn.fold(()=>{As(ve,jt,it.text,so)},hs=>{ve.focus(),wr(ve,hs,it.text,so)})})},Si=ve=>{const Ve=ve.dom,it=ve.selection,jt=it.getBookmark(),Rn=it.getRng().cloneRange(),so=Ve.getParent(Rn.startContainer,"a[href]",ve.getBody()),Is=Ve.getParent(Rn.endContainer,"a[href]",ve.getBody());so&&Rn.setStartBefore(so),Is&&Rn.setEndAfter(Is),it.setRng(Rn),ve.execCommand("unlink"),it.moveToBookmark(jt)},Yr=ve=>{ve.undoManager.transact(()=>{const Ve=ve.selection.getNode();wn(Ve)?jc(ve,Ve):Si(ve),ve.focus()})},Ts=ve=>{const{class:Ve,href:it,rel:jt,target:Rn,text:so,title:Is}=ve;return Be({class:Ve.getOrNull(),href:it,rel:jt.getOrNull(),target:Rn.getOrNull(),text:so.getOrNull(),title:Is.getOrNull()},(hs,Xs)=>_(hs)===!1)},ho=(ve,Ve)=>{const it=ve.options.get,jt={allow_html_data_urls:it("allow_html_data_urls"),allow_script_urls:it("allow_script_urls"),allow_svg_data_urls:it("allow_svg_data_urls")},Rn=Ve.href;return{...Ve,href:gt.isDomSafe(Rn,"a",jt)?Rn:""}},Os=(ve,Ve,it)=>{const jt=ho(ve,it);ve.hasPlugin("rtc",!0)?ve.execCommand("createlink",!1,Ts(jt)):Yi(ve,Ve,jt)},Xa=ve=>{ve.hasPlugin("rtc",!0)?ve.execCommand("unlink"):Yr(ve)},jc=(ve,Ve)=>{var it;const jt=ve.dom.select("img",Ve)[0];if(jt){const Rn=ve.dom.getParents(jt,"a[href]",Ve)[0];Rn&&((it=Rn.parentNode)===null||it===void 0||it.insertBefore(jt,Rn),ve.dom.remove(Rn))}},eu=(ve,Ve,it)=>{var jt;const Rn=ve.select("img",Ve)[0];if(Rn){const so=ve.create("a",it);(jt=Rn.parentNode)===null||jt===void 0||jt.insertBefore(so,Rn),so.appendChild(Rn)}},fo=ve=>h(ve.value)?ve.value:"",vc=ve=>h(ve.text)?ve.text:h(ve.title)?ve.title:"",Ji=(ve,Ve)=>{const it=[];return Ko.each(ve,jt=>{const Rn=vc(jt);if(jt.menu!==void 0){const so=Ji(jt.menu,Ve);it.push({text:Rn,items:so})}else{const so=Ve(jt);it.push({text:Rn,value:so})}}),it},rp=(ve=fo)=>Ve=>Y.from(Ve).map(it=>Ji(it,ve)),Js={sanitize:ve=>rp(fo)(ve),sanitizeWith:rp,createUi:(ve,Ve)=>it=>({name:ve,type:"listbox",label:Ve,items:it}),getValue:fo},Iu=ve=>lt(ve,"items"),Yu=(ve,Ve)=>me(Ve,it=>Iu(it)?Yu(ve,it.items):En(it.value===ve,it)),tu=(ve,Ve,it,jt)=>{const Rn=jt[Ve],so=ve.length>0;return Rn!==void 0?Yu(Rn,it).map(Is=>({url:{value:Is.value,meta:{text:so?ve:Is.text,attach:B}},text:so?ve:Is.text})):Y.none()},cl=(ve,Ve)=>Ve==="link"?ve.link:Ve==="anchor"?ve.anchor:Y.none(),nu={init:(ve,Ve)=>{const it={text:ve.text,title:ve.title},jt=Xs=>{var ae;return En(it.title.length<=0,Y.from((ae=Xs.meta)===null||ae===void 0?void 0:ae.title).getOr(""))},Rn=Xs=>{var ae;return En(it.text.length<=0,Y.from((ae=Xs.meta)===null||ae===void 0?void 0:ae.text).getOr(Xs.value))},so=Xs=>{const ae=Rn(Xs.url),Ce=jt(Xs.url);return ae.isSome()||Ce.isSome()?Y.some({...ae.map(je=>({text:je})).getOr({}),...Ce.map(je=>({title:je})).getOr({})}):Y.none()},Is=(Xs,ae)=>{const Ce=cl(Ve,ae).getOr([]);return tu(it.text,ae,Ce,Xs)};return{onChange:(Xs,ae)=>{const Ce=ae.name;return Ce==="url"?so(Xs()):le(["anchor","link"],Ce)?Is(Xs(),Ce):((Ce==="text"||Ce==="title")&&(it[Ce]=Xs()[Ce]),Y.none())}}},getDelta:tu};var Ju=tinymce.util.Tools.resolve("tinymce.util.Delay");const Un=(ve,Ve,it)=>{const jt=ve.selection.getRng();Ju.setEditorTimeout(ve,()=>{ve.windowManager.confirm(Ve,Rn=>{ve.selection.setRng(jt),it(Rn)})})},oh=ve=>{const Ve=ve.href;return Ve.indexOf("@")>0&&Ve.indexOf("/")===-1&&Ve.indexOf("mailto:")===-1?Y.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:jt=>({...jt,href:"mailto:"+Ve})}):Y.none()},Md=(ve,Ve)=>it=>{const jt=it.href;return ve===1&&!ps(jt)||ve===0&&/^\s*www(\.|\d\.)/i.test(jt)?Y.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${Ve}:// prefix?`,preprocess:so=>({...so,href:Ve+"://"+jt})}):Y.none()},gr={preprocess:(ve,Ve)=>me([oh,Md(Wn(ve),Ue(ve))],it=>it(Ve)).fold(()=>Promise.resolve(Ve),it=>new Promise(jt=>{Un(ve,it.message,Rn=>{jt(Rn?it.preprocess(Ve):Ve)})}))},zc={getAnchors:ve=>{const Ve=ve.dom.select("a:not([href])"),it=be(Ve,jt=>{const Rn=jt.name||jt.id;return Rn?[{text:Rn,value:"#"+Rn}]:[]});return it.length>0?Y.some([{text:"None",value:""}].concat(it)):Y.none()}},ou={getClasses:ve=>{const Ve=Oe(ve);return Ve.length>0?Js.sanitize(Ve):Y.none()}},Pd=ve=>{try{return Y.some(JSON.parse(ve))}catch{return Y.none()}},Pr={getLinks:ve=>{const Ve=jt=>ve.convertURL(jt.value||jt.url||"","href"),it=Kt(ve);return new Promise(jt=>{h(it)?fetch(it).then(Rn=>Rn.ok?Rn.text().then(Pd):Promise.reject()).then(jt,()=>jt(Y.none())):N(it)?it(Rn=>jt(Y.some(Rn))):jt(Y.from(it))}).then(jt=>jt.bind(Js.sanitizeWith(Ve)).map(Rn=>Rn.length>0?[{text:"None",value:""}].concat(Rn):Rn))}},Gi={getRels:(ve,Ve)=>{const it=Ot(ve);if(it.length>0){const jt=qt(Ve,"_blank"),Rn=Bt(ve)===!1,so=hs=>is(Js.getValue(hs),jt);return(Rn?Js.sanitizeWith(so):Js.sanitize)(it)}return Y.none()}},sm=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],yc={getTargets:ve=>{const Ve=dt(ve);return y(Ve)?Js.sanitize(Ve).orThunk(()=>Y.some(sm)):Ve===!1?Y.none():Y.some(sm)}},ll=(ve,Ve,it)=>{const jt=ve.getAttrib(Ve,it);return jt!==null&&jt.length>0?Y.some(jt):Y.none()},Tl=(ve,Ve)=>{const it=ve.dom,Rn=Pn(ve)?Y.some(Dt(ve.selection,Ve)):Y.none(),so=Ve.bind(Ce=>Y.from(it.getAttrib(Ce,"href"))),Is=Ve.bind(Ce=>Y.from(it.getAttrib(Ce,"target"))),hs=Ve.bind(Ce=>ll(it,Ce,"rel")),Xs=Ve.bind(Ce=>ll(it,Ce,"class")),ae=Ve.bind(Ce=>ll(it,Ce,"title"));return{url:so,text:Rn,title:ae,target:Is,rel:hs,linkClass:Xs}},ii={collect:(ve,Ve)=>Pr.getLinks(ve).then(it=>{const jt=Tl(ve,Ve);return{anchor:jt,catalogs:{targets:yc.getTargets(ve),rels:Gi.getRels(ve,jt.target),classes:ou.getClasses(ve),anchor:zc.getAnchors(ve),link:it},optNode:Ve,flags:{titleEnabled:pt(ve)}}})},$o=(ve,Ve)=>it=>{const jt=it.getData();if(!jt.url.value){Xa(ve),it.close();return}const Rn=hs=>Y.from(jt[hs]).filter(Xs=>!qt(Ve.anchor[hs],Xs)),so={href:jt.url.value,text:Rn("text"),target:Rn("target"),rel:Rn("rel"),class:Rn("linkClass"),title:Rn("title")},Is={href:jt.url.value,attach:jt.url.meta!==void 0&&jt.url.meta.attach?jt.url.meta.attach:B};gr.preprocess(ve,so).then(hs=>{Os(ve,Is,hs)}),it.close()},ai=ve=>{const Ve=ft(ve);return ii.collect(ve,Ve)},Da=(ve,Ve)=>{const it=ve.anchor,jt=it.url.getOr("");return{url:{value:jt,meta:{original:{value:jt}}},text:it.text.getOr(""),title:it.title.getOr(""),anchor:jt,link:jt,rel:it.rel.getOr(""),target:it.target.or(Ve).getOr(""),linkClass:it.linkClass.getOr("")}},Lr=(ve,Ve,it)=>{const jt=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],Rn=ve.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),so=ve.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Is=Y.from(Ut(it)),hs=Da(ve,Is),Xs=ve.catalogs,ae=nu.init(hs,Xs);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:De([jt,Rn,so,io([Xs.anchor.map(Js.createUi("anchor","Anchors")),Xs.rels.map(Js.createUi("rel","Rel")),Xs.targets.map(Js.createUi("target","Open link in...")),Xs.link.map(Js.createUi("link","Link list")),Xs.classes.map(Js.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:hs,onChange:(je,{name:At})=>{ae.onChange(je.getData,{name:At}).each(to=>{je.setData(to)})},onSubmit:Ve}},ih=ve=>{ai(ve).then(it=>{const jt=$o(ve,it);return Lr(it,jt,ve)}).then(it=>{ve.windowManager.open(it)})},ip=ve=>{ve.addCommand("mceLink",(Ve,it)=>{(it==null?void 0:it.dialog)===!0||!tn(ve)?ih(ve):ve.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},Ar=ve=>{ve.addShortcut("Meta+K","",()=>{ve.execCommand("mceLink")})};var ec=tinymce.util.Tools.resolve("tinymce.util.VK");const Ol=(ve,Ve)=>{document.body.appendChild(ve),ve.dispatchEvent(Ve),document.body.removeChild(ve)},im=ve=>{const Ve=document.createElement("a");Ve.target="_blank",Ve.href=ve,Ve.rel="noreferrer noopener";const it=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(it),Ol(Ve,it)},Hn=ve=>ve.altKey===!0&&ve.shiftKey===!1&&ve.ctrlKey===!1&&ve.metaKey===!1,Il=(ve,Ve)=>{if(Ve){const it=es(Ve);if(/^#/.test(it)){const jt=ve.dom.select(`${it},[name="${Hs(it,"#")}"]`);jt.length&&ve.selection.scrollIntoView(jt[0],!0)}else im(Ve.href)}},ka=ve=>{const Ve=ve.selection.getRng(),it=Ve.startContainer;return Jn(it)&&Ve.startContainer===Ve.endContainer&&ve.dom.select("img",it).length===1},Sc=(ve,Ve)=>{const it=$n(ve.dom.getParents(Ve));return En(it.length===1,it[0])},ci=ve=>{const Ve=Nn(ve.selection.getRng());return En(Ve.length>0,Ve[0]).or(Sc(ve,ve.selection.getNode()))},am=ve=>ve.selection.isCollapsed()||ka(ve)?Sc(ve,ve.selection.getStart()):ci(ve),Cc=ve=>{const Ve=Et(),it=()=>Ve.get().or(am(ve)),jt=()=>it().each(Rn=>Il(ve,Rn));return ve.on("contextmenu",Rn=>{Sc(ve,Rn.target).each(Ve.set)}),ve.on("SelectionChange",()=>{Ve.isSet()||am(ve).each(Ve.set)}),ve.on("click",Rn=>{Ve.clear();const so=$n(ve.dom.getParents(Rn.target));so.length===1&&ec.metaKeyPressed(Rn)&&(Rn.preventDefault(),Il(ve,so[0]))}),ve.on("keydown",Rn=>{Ve.clear(),!Rn.isDefaultPrevented()&&Rn.keyCode===13&&Hn(Rn)&&it().each(so=>{Rn.preventDefault(),Il(ve,so)})}),{gotoSelectedLink:jt}},ul=ve=>()=>{ve.execCommand("mceLink",!1,{dialog:!0})},ap=(ve,Ve)=>(ve.on("NodeChange",Ve),()=>ve.off("NodeChange",Ve)),gf=ve=>Ve=>{const it=()=>{Ve.setActive(!ve.mode.isReadOnly()&&It(ve,ve.selection.getNode())),Ve.setEnabled(ve.selection.isEditable())};return it(),ap(ve,it)},Xu=ve=>Ve=>{const it=()=>{Ve.setEnabled(ve.selection.isEditable())};return it(),ap(ve,it)},cp=ve=>Ve=>{const it=so=>lo(so)||Vt(ve.selection.getRng()),jt=ve.dom.getParents(ve.selection.getStart()),Rn=so=>{Ve.setEnabled(it(so)&&ve.selection.isEditable())};return Rn(jt),ap(ve,so=>Rn(so.parents))},vf=(ve,Ve)=>{ve.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:ul(ve),onSetup:gf(ve)}),ve.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Ve.gotoSelectedLink,onSetup:cp(ve)}),ve.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Xa(ve),onSetup:cp(ve)})},Qu=(ve,Ve)=>{ve.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Ve.gotoSelectedLink,onSetup:cp(ve)}),ve.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:ul(ve),onSetup:Xu(ve)}),ve.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Xa(ve),onSetup:cp(ve)})},bf=ve=>{const Ve="link unlink openlink",it="link";ve.ui.registry.addContextMenu("link",{update:jt=>ve.dom.isEditable(jt)?lo(ve.dom.getParents(jt,"a"))?Ve:it:""})},kn=(ve,Ve)=>{const it=so=>{so.selection.collapse(!1)},jt=so=>{const Is=ve.selection.getNode();return so.setEnabled(It(ve,Is)&&ve.selection.isEditable()),B},Rn=so=>{const Is=ft(ve),hs=Pn(ve);if(Is.isNone()&&hs){const Xs=Dt(ve.selection,Is);return En(Xs.length===0,so)}else return Y.none()};ve.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:gf(ve)},label:"Link",predicate:so=>bt(ve)&&It(ve,so),initValue:()=>ft(ve).fold(H(""),es),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:so=>{const Is=ve.selection.getNode();return so.setActive(It(ve,Is)),gf(ve)(so)},onAction:so=>{const Is=so.getValue(),hs=Rn(Is);Os(ve,{href:Is,attach:B},{href:Is,text:hs,title:Y.none(),rel:Y.none(),target:Y.from(Ut(ve)),class:Y.none()}),it(ve),so.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:jt,onAction:so=>{Xa(ve),so.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:jt,onAction:so=>{Ve.gotoSelectedLink(),so.hide()}}]})},Ld=ve=>{const Ve=Cc(ve);vf(ve,Ve),Qu(ve,Ve),bf(ve),kn(ve,Ve)};var lp=()=>{e.add("link",ve=>{Xt(ve),ip(ve),Ld(ve),Ar(ve)})};lp()})()),$Te}var jTe;function Lze(){return jTe||(jTe=1,Pze()),FTe}Lze();var zTe={},WTe={},GTe;function Bze(){return GTe||(GTe=1,(function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const n=Object.getPrototypeOf,r=(ae,Ce,je)=>{var At;return je(ae,Ce.prototype)?!0:((At=ae.constructor)===null||At===void 0?void 0:At.name)===Ce.name},i=ae=>{const Ce=typeof ae;return ae===null?"null":Ce==="object"&&Array.isArray(ae)?"array":Ce==="object"&&r(ae,String,(je,At)=>At.isPrototypeOf(je))?"string":Ce},l=ae=>Ce=>i(Ce)===ae,f=ae=>Ce=>typeof Ce===ae,h=ae=>Ce=>ae===Ce,v=(ae,Ce)=>_(ae)&&r(ae,Ce,(je,At)=>n(je)===At),y=l("string"),_=l("object"),A=ae=>v(ae,Object),R=l("array"),k=h(null),N=f("boolean"),L=ae=>ae==null,B=ae=>!L(ae),H=f("function"),q=f("number"),Y=(ae,Ce)=>{if(R(ae)){for(let je=0,At=ae.length;je<At;++je)if(!Ce(ae[je]))return!1;return!0}return!1},K=()=>{};class se{constructor(Ce,je){this.tag=Ce,this.value=je}static some(Ce){return new se(!0,Ce)}static none(){return se.singletonNone}fold(Ce,je){return this.tag?je(this.value):Ce()}isSome(){return this.tag}isNone(){return!this.tag}map(Ce){return this.tag?se.some(Ce(this.value)):se.none()}bind(Ce){return this.tag?Ce(this.value):se.none()}exists(Ce){return this.tag&&Ce(this.value)}forall(Ce){return!this.tag||Ce(this.value)}filter(Ce){return!this.tag||Ce(this.value)?this:se.none()}getOr(Ce){return this.tag?this.value:Ce}or(Ce){return this.tag?this:Ce}getOrThunk(Ce){return this.tag?this.value:Ce()}orThunk(Ce){return this.tag?this:Ce()}getOrDie(Ce){if(this.tag)return this.value;throw new Error(Ce??"Called getOrDie on None")}static from(Ce){return B(Ce)?se.some(Ce):se.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ce){this.tag&&Ce(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}se.singletonNone=new se(!1);const ie=Array.prototype.push,le=ae=>{const Ce=[];for(let je=0,At=ae.length;je<At;++je){if(!R(ae[je]))throw new Error("Arr.flatten item "+je+" was not an array, input: "+ae);ie.apply(Ce,ae[je])}return Ce},M=(ae,Ce)=>Ce>=0&&Ce<ae.length?se.some(ae[Ce]):se.none(),we=ae=>M(ae,0),Ne=(ae,Ce)=>{for(let je=0;je<ae.length;je++){const At=Ce(ae[je],je);if(At.isSome())return At}return se.none()},De=Object.keys,be=Object.hasOwnProperty,me=(ae,Ce)=>{const je=De(ae);for(let At=0,to=je.length;At<to;At++){const Ps=je[At],x=ae[Ps];Ce(x,Ps)}},Ye=ae=>(Ce,je)=>{ae[je]=Ce},Ke=(ae,Ce,je,At)=>{me(ae,(to,Ps)=>{(Ce(to,Ps)?je:At)(to,Ps)})},Ze=(ae,Ce)=>{const je={};return Ke(ae,Ce,Ye(je),K),je},z=(ae,Ce)=>be.call(ae,Ce),$t=(ae,Ce)=>z(ae,Ce)&&ae[Ce]!==void 0&&ae[Ce]!==null,lt=(ae=>(...Ce)=>{if(Ce.length===0)throw new Error("Can't merge zero objects");const je={};for(let At=0;At<Ce.length;At++){const to=Ce[At];for(const Ps in to)z(to,Ps)&&(je[Ps]=ae(je[Ps],to[Ps]))}return je})((ae,Ce)=>A(ae)&&A(Ce)?lt(ae,Ce):Ce),$e=ae=>ae.length>0,qt=(ae,Ce)=>{const At=(Ce||document).createElement("div");if(At.innerHTML=ae,!At.hasChildNodes()||At.childNodes.length>1){const to="HTML does not have a single root node";throw console.error(to,ae),new Error(to)}return Zn(At.childNodes[0])},io=(ae,Ce)=>{const At=(Ce||document).createElement(ae);return Zn(At)},En=(ae,Ce)=>{const At=(Ce||document).createTextNode(ae);return Zn(At)},Zn=ae=>{if(ae==null)throw new Error("Node cannot be null or undefined");return{dom:ae}},Jt={fromHtml:qt,fromTag:io,fromText:En,fromDom:Zn,fromPoint:(ae,Ce,je)=>se.from(ae.dom.elementFromPoint(Ce,je)).map(Zn)},ce=(ae,Ce,je)=>{if(y(je)||N(je)||q(je))ae.setAttribute(Ce,je+"");else throw console.error("Invalid call to Attribute.set. Key ",Ce,":: Value ",je,":: Element ",ae),new Error("Attribute value was not simple")},Hs=(ae,Ce,je)=>{ce(ae.dom,Ce,je)},Fo=(ae,Ce)=>{ae.dom.removeAttribute(Ce)};var yt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Xt=tinymce.util.Tools.resolve("tinymce.util.URI");const Wn=ae=>Ce=>Ce.options.get(ae),bt=ae=>{const Ce=ae.options.register;Ce("image_dimensions",{processor:"boolean",default:!0}),Ce("image_advtab",{processor:"boolean",default:!1}),Ce("image_uploadtab",{processor:"boolean",default:!0}),Ce("image_prepend_url",{processor:"string",default:""}),Ce("image_class_list",{processor:"object[]"}),Ce("image_description",{processor:"boolean",default:!0}),Ce("image_title",{processor:"boolean",default:!1}),Ce("image_caption",{processor:"boolean",default:!1}),Ce("image_list",{processor:je=>{const At=je===!1||y(je)||Y(je,_)||H(je);return At?{value:je,valid:At}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},Kt=Wn("image_dimensions"),Ut=Wn("image_advtab"),Ue=Wn("image_uploadtab"),dt=Wn("image_prepend_url"),Ot=Wn("image_class_list"),Oe=Wn("image_description"),pt=Wn("image_title"),Bt=Wn("image_caption"),tn=Wn("image_list"),ht=Wn("a11y_advanced_options"),gt=Wn("automatic_uploads"),No=ae=>$e(ae.options.get("images_upload_url")),Ko=ae=>B(ae.options.get("images_upload_handler")),Wo=(ae,Ce)=>Math.max(parseInt(ae,10),parseInt(Ce,10)),Jn=ae=>new Promise(Ce=>{const je=document.createElement("img"),At=Ps=>{je.parentNode&&je.parentNode.removeChild(je),Ce(Ps)};je.addEventListener("load",()=>{const Ps=Wo(je.width,je.clientWidth),x=Wo(je.height,je.clientHeight),U={width:Ps,height:x};At(Promise.resolve(U))}),je.addEventListener("error",()=>{At(Promise.reject(`Failed to get image dimensions for: ${ae}`))});const to=je.style;to.visibility="hidden",to.position="fixed",to.bottom=to.left="0px",to.width=to.height="auto",document.body.appendChild(je),je.src=ae}),ys=ae=>(ae&&(ae=ae.replace(/px$/,"")),ae),ps=ae=>(ae.length>0&&/^[0-9]+$/.test(ae)&&(ae+="px"),ae),es=ae=>{if(ae.margin){const Ce=String(ae.margin).split(" ");switch(Ce.length){case 1:ae["margin-top"]=ae["margin-top"]||Ce[0],ae["margin-right"]=ae["margin-right"]||Ce[0],ae["margin-bottom"]=ae["margin-bottom"]||Ce[0],ae["margin-left"]=ae["margin-left"]||Ce[0];break;case 2:ae["margin-top"]=ae["margin-top"]||Ce[0],ae["margin-right"]=ae["margin-right"]||Ce[1],ae["margin-bottom"]=ae["margin-bottom"]||Ce[0],ae["margin-left"]=ae["margin-left"]||Ce[1];break;case 3:ae["margin-top"]=ae["margin-top"]||Ce[0],ae["margin-right"]=ae["margin-right"]||Ce[1],ae["margin-bottom"]=ae["margin-bottom"]||Ce[2],ae["margin-left"]=ae["margin-left"]||Ce[1];break;case 4:ae["margin-top"]=ae["margin-top"]||Ce[0],ae["margin-right"]=ae["margin-right"]||Ce[1],ae["margin-bottom"]=ae["margin-bottom"]||Ce[2],ae["margin-left"]=ae["margin-left"]||Ce[3]}delete ae.margin}return ae},is=(ae,Ce)=>{const je=tn(ae);y(je)?fetch(je).then(At=>{At.ok&&At.json().then(Ce)}):H(je)?je(Ce):Ce(je)},st=(ae,Ce,je)=>{const At=()=>{je.onload=je.onerror=null,ae.selection&&(ae.selection.select(je),ae.nodeChanged())};je.onload=()=>{!Ce.width&&!Ce.height&&Kt(ae)&&ae.dom.setAttribs(je,{width:String(je.clientWidth),height:String(je.clientHeight)}),At()},je.onerror=At},ft=ae=>new Promise((Ce,je)=>{const At=new FileReader;At.onload=()=>{Ce(At.result)},At.onerror=()=>{var to;je((to=At.error)===null||to===void 0?void 0:to.message)},At.readAsDataURL(ae)}),It=ae=>ae.nodeName==="IMG"&&(ae.hasAttribute("data-mce-object")||ae.hasAttribute("data-mce-placeholder")),Dt=(ae,Ce)=>{const je=ae.options.get;return Xt.isDomSafe(Ce,"img",{allow_html_data_urls:je("allow_html_data_urls"),allow_script_urls:je("allow_script_urls"),allow_svg_data_urls:je("allow_svg_data_urls")})},Nn=yt.DOM,$n=ae=>ae.style.marginLeft&&ae.style.marginRight&&ae.style.marginLeft===ae.style.marginRight?ys(ae.style.marginLeft):"",lo=ae=>ae.style.marginTop&&ae.style.marginBottom&&ae.style.marginTop===ae.style.marginBottom?ys(ae.style.marginTop):"",Vt=ae=>ae.style.borderWidth?ys(ae.style.borderWidth):"",Pn=(ae,Ce)=>{var je;return ae.hasAttribute(Ce)&&(je=ae.getAttribute(Ce))!==null&&je!==void 0?je:""},wn=ae=>ae.parentNode!==null&&ae.parentNode.nodeName==="FIGURE",ko=(ae,Ce,je)=>{je===""||je===null?ae.removeAttribute(Ce):ae.setAttribute(Ce,je)},ts=ae=>{const Ce=Nn.create("figure",{class:"image"});Nn.insertAfter(Ce,ae),Ce.appendChild(ae),Ce.appendChild(Nn.create("figcaption",{contentEditable:"true"},"Caption")),Ce.contentEditable="false"},mn=ae=>{const Ce=ae.parentNode;B(Ce)&&(Nn.insertAfter(ae,Ce),Nn.remove(Ce))},wr=ae=>{wn(ae)?mn(ae):ts(ae)},As=(ae,Ce)=>{const je=ae.getAttribute("style"),At=Ce(je!==null?je:"");At.length>0?(ae.setAttribute("style",At),ae.setAttribute("data-mce-style",At)):ae.removeAttribute("style")},Yi=(ae,Ce)=>(je,At,to)=>{const Ps=je.style;Ps[At]?(Ps[At]=ps(to),As(je,Ce)):ko(je,At,to)},Si=(ae,Ce)=>ae.style[Ce]?ys(ae.style[Ce]):Pn(ae,Ce),Yr=(ae,Ce)=>{const je=ps(Ce);ae.style.marginLeft=je,ae.style.marginRight=je},Ts=(ae,Ce)=>{const je=ps(Ce);ae.style.marginTop=je,ae.style.marginBottom=je},ho=(ae,Ce)=>{const je=ps(Ce);ae.style.borderWidth=je},Os=(ae,Ce)=>{ae.style.borderStyle=Ce},Xa=ae=>{var Ce;return(Ce=ae.style.borderStyle)!==null&&Ce!==void 0?Ce:""},jc=ae=>B(ae)&&ae.nodeName==="FIGURE",eu=ae=>ae.nodeName==="IMG",fo=ae=>{const Ce=Nn.getAttrib(ae,"alt"),je=Nn.getAttrib(ae,"role");return ae.hasAttribute("alt")&&Ce.length===0||je==="presentation"||je==="none"},vc=ae=>fo(ae)?"":Pn(ae,"alt"),Ji=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),rp=(ae,Ce)=>{var je;const At=document.createElement("img");return ko(At,"style",Ce.style),($n(At)||Ce.hspace!=="")&&Yr(At,Ce.hspace),(lo(At)||Ce.vspace!=="")&&Ts(At,Ce.vspace),(Vt(At)||Ce.border!=="")&&ho(At,Ce.border),(Xa(At)||Ce.borderStyle!=="")&&Os(At,Ce.borderStyle),ae((je=At.getAttribute("style"))!==null&&je!==void 0?je:"")},xa=(ae,Ce)=>{const je=document.createElement("img");if(cl(ae,{...Ce,caption:!1},je),Iu(je,Ce.alt,Ce.isDecorative),Ce.caption){const At=Nn.create("figure",{class:"image"});return At.appendChild(je),At.appendChild(Nn.create("figcaption",{contentEditable:"true"},"Caption")),At.contentEditable="false",At}else return je},kd=(ae,Ce)=>({src:Pn(Ce,"src"),alt:vc(Ce),title:Pn(Ce,"title"),width:Si(Ce,"width"),height:Si(Ce,"height"),class:Pn(Ce,"class"),style:ae(Pn(Ce,"style")),caption:wn(Ce),hspace:$n(Ce),vspace:lo(Ce),border:Vt(Ce),borderStyle:Xa(Ce),isDecorative:fo(Ce)}),Js=(ae,Ce,je,At,to)=>{je[At]!==Ce[At]&&to(ae,At,String(je[At]))},Iu=(ae,Ce,je)=>{if(je){Nn.setAttrib(ae,"role","presentation");const At=Jt.fromDom(ae);Hs(At,"alt","")}else{if(k(Ce)){const At=Jt.fromDom(ae);Fo(At,"alt")}else{const At=Jt.fromDom(ae);Hs(At,"alt",Ce)}Nn.getAttrib(ae,"role")==="presentation"&&Nn.setAttrib(ae,"role","")}},Yu=(ae,Ce,je)=>{(je.alt!==Ce.alt||je.isDecorative!==Ce.isDecorative)&&Iu(ae,je.alt,je.isDecorative)},tu=(ae,Ce)=>(je,At,to)=>{ae(je,to),As(je,Ce)},cl=(ae,Ce,je)=>{const At=kd(ae,je);Js(je,At,Ce,"caption",(to,Ps,x)=>wr(to)),Js(je,At,Ce,"src",ko),Js(je,At,Ce,"title",ko),Js(je,At,Ce,"width",Yi("width",ae)),Js(je,At,Ce,"height",Yi("height",ae)),Js(je,At,Ce,"class",ko),Js(je,At,Ce,"style",tu((to,Ps)=>ko(to,"style",Ps),ae)),Js(je,At,Ce,"hspace",tu(Yr,ae)),Js(je,At,Ce,"vspace",tu(Ts,ae)),Js(je,At,Ce,"border",tu(ho,ae)),Js(je,At,Ce,"borderStyle",tu(Os,ae)),Yu(je,At,Ce)},Xi=(ae,Ce)=>{const je=ae.dom.styles.parse(Ce),At=es(je),to=ae.dom.styles.parse(ae.dom.styles.serialize(At));return ae.dom.styles.serialize(to)},nu=ae=>{const Ce=ae.selection.getNode(),je=ae.dom.getParent(Ce,"figure.image");return je?ae.dom.select("img",je)[0]:Ce&&(Ce.nodeName!=="IMG"||It(Ce))?null:Ce},Ju=(ae,Ce)=>{var je;const At=ae.dom,to=Ze(ae.schema.getTextBlockElements(),(x,U)=>!ae.schema.isValidChild(U,"figure")),Ps=At.getParent(Ce.parentNode,x=>$t(to,x.nodeName),ae.getBody());return Ps&&(je=At.split(Ps,Ce))!==null&&je!==void 0?je:Ce},Un=ae=>{const Ce=nu(ae);return Ce?kd(je=>Xi(ae,je),Ce):Ji()},oh=(ae,Ce)=>{const je=xa(to=>Xi(ae,to),Ce);ae.dom.setAttrib(je,"data-mce-id","__mcenew"),ae.focus(),ae.insertContent(je.outerHTML);const At=ae.dom.select('*[data-mce-id="__mcenew"]')[0];if(ae.dom.setAttrib(At,"data-mce-id",null),jc(At)){const to=Ju(ae,At);ae.selection.select(to)}else ae.selection.select(At)},Md=(ae,Ce)=>{ae.dom.setAttrib(Ce,"src",Ce.getAttribute("src"))},Nd=(ae,Ce)=>{if(Ce){const je=ae.dom.is(Ce.parentNode,"figure.image")?Ce.parentNode:Ce;ae.dom.remove(je),ae.focus(),ae.nodeChanged(),ae.dom.isEmpty(ae.getBody())&&(ae.setContent(""),ae.selection.setCursorLocation())}},gr=(ae,Ce)=>{const je=nu(ae);if(je)if(cl(At=>Xi(ae,At),Ce,je),Md(ae,je),jc(je.parentNode)){ae.dom.setStyle(je,"float","");const At=je.parentNode;Ju(ae,At),ae.selection.select(je.parentNode)}else ae.selection.select(je),st(ae,Ce,je)},sh=(ae,Ce)=>{const je=Ce.src;return{...Ce,src:Dt(ae,je)?je:""}},zc=(ae,Ce)=>{const je=nu(ae);if(je){const to={...kd(x=>Xi(ae,x),je),...Ce},Ps=sh(ae,to);to.src?gr(ae,Ps):Nd(ae,je)}else Ce.src&&oh(ae,{...Ji(),...Ce})};var Vi=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),ou=tinymce.util.Tools.resolve("tinymce.util.Tools");const Pd=ae=>y(ae.value)?ae.value:"",bc=ae=>y(ae.text)?ae.text:y(ae.title)?ae.title:"",Pr=(ae,Ce)=>{const je=[];return ou.each(ae,At=>{const to=bc(At);if(At.menu!==void 0){const Ps=Pr(At.menu,Ce);je.push({text:to,items:Ps})}else{const Ps=Ce(At);je.push({text:to,value:Ps})}}),je},Qa=(ae=Pd)=>Ce=>Ce?se.from(Ce).map(je=>Pr(je,ae)):se.none(),Gi=ae=>Qa(Pd)(ae),sm=ae=>z(ae,"items"),rm=(ae,Ce)=>Ne(ae,je=>sm(je)?rm(je.items,Ce):je.value===Ce?se.some(je):se.none()),ll={sanitizer:Qa,sanitize:Gi,findEntry:(ae,Ce)=>ae.bind(je=>rm(je,Ce))},rh={makeTab:ae=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},ii=ae=>{const Ce=ll.sanitizer(rn=>ae.convertURL(rn.value||rn.url||"","src")),je=new Promise(rn=>{is(ae,xn=>{rn(Ce(xn).map(Zt=>le([[{text:"None",value:""}],Zt])))})}),At=ll.sanitize(Ot(ae)),to=Ut(ae),Ps=Ue(ae),x=No(ae),U=Ko(ae),X=Un(ae),ne=Oe(ae),de=pt(ae),ge=Kt(ae),Te=Bt(ae),rt=ht(ae),ot=gt(ae),Rt=se.some(dt(ae)).filter(rn=>y(rn)&&rn.length>0);return je.then(rn=>({image:X,imageList:rn,classList:At,hasAdvTab:to,hasUploadTab:Ps,hasUploadUrl:x,hasUploadHandler:U,hasDescription:ne,hasImageTitle:de,hasDimensions:ge,hasImageCaption:Te,prependURL:Rt,hasAccessibilityOptions:rt,automaticUploads:ot}))},$o=ae=>{const Ce={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},je=ae.imageList.map(de=>({name:"images",type:"listbox",label:"Image list",items:de})),At={name:"alt",type:"input",label:"Alternative description",enabled:!(ae.hasAccessibilityOptions&&ae.image.isDecorative)},to={name:"title",type:"input",label:"Image title"},Ps={name:"dimensions",type:"sizeinput"},x={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},U=ae.classList.map(de=>({name:"classes",type:"listbox",label:"Class",items:de})),X={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},ne=de=>de?{type:"grid",columns:2}:{type:"panel"};return le([[Ce],je.toArray(),ae.hasAccessibilityOptions&&ae.hasDescription?[x]:[],ae.hasDescription?[At]:[],ae.hasImageTitle?[to]:[],ae.hasDimensions?[Ps]:[],[{...ne(ae.classList.isSome()&&ae.hasImageCaption),items:le([U.toArray(),ae.hasImageCaption?[X]:[]])}]])},Da={makeTab:ae=>({title:"General",name:"general",items:$o(ae)}),makeItems:$o},ih={makeTab:ae=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},ip=ae=>({prevImage:ll.findEntry(ae.imageList,ae.image.src),prevAlt:ae.image.alt,open:!0}),Ar=ae=>({src:{value:ae.src,meta:{}},images:ae.src,alt:ae.alt,title:ae.title,dimensions:{width:ae.width,height:ae.height},classes:ae.class,caption:ae.caption,style:ae.style,vspace:ae.vspace,border:ae.border,hspace:ae.hspace,borderstyle:ae.borderStyle,fileinput:[],isDecorative:ae.isDecorative}),ec=(ae,Ce)=>({src:ae.src.value,alt:(ae.alt===null||ae.alt.length===0)&&Ce?null:ae.alt,title:ae.title,width:ae.dimensions.width,height:ae.dimensions.height,class:ae.classes,style:ae.style,caption:ae.caption,hspace:ae.hspace,vspace:ae.vspace,border:ae.border,borderStyle:ae.borderstyle,isDecorative:ae.isDecorative}),Ol=(ae,Ce)=>/^(?:[a-zA-Z]+:)?\/\//.test(Ce)?se.none():ae.prependURL.bind(je=>Ce.substring(0,je.length)!==je?se.some(je+Ce):se.none()),im=(ae,Ce)=>{const je=Ce.getData();Ol(ae,je.src.value).each(At=>{Ce.setData({src:{value:At,meta:je.src.meta}})})},Hn=(ae,Ce,je)=>{ae.hasDescription&&y(je.alt)&&(Ce.alt=je.alt),ae.hasAccessibilityOptions&&(Ce.isDecorative=je.isDecorative||Ce.isDecorative||!1),ae.hasImageTitle&&y(je.title)&&(Ce.title=je.title),ae.hasDimensions&&(y(je.width)&&(Ce.dimensions.width=je.width),y(je.height)&&(Ce.dimensions.height=je.height)),y(je.class)&&ll.findEntry(ae.classList,je.class).each(At=>{Ce.classes=At.value}),ae.hasImageCaption&&N(je.caption)&&(Ce.caption=je.caption),ae.hasAdvTab&&(y(je.style)&&(Ce.style=je.style),y(je.vspace)&&(Ce.vspace=je.vspace),y(je.border)&&(Ce.border=je.border),y(je.hspace)&&(Ce.hspace=je.hspace),y(je.borderstyle)&&(Ce.borderstyle=je.borderstyle))},Il=(ae,Ce)=>{const je=Ce.getData(),At=je.src.meta;if(At!==void 0){const to=lt({},je);Hn(ae,to,At),Ce.setData(to)}},ka=(ae,Ce,je,At)=>{const to=At.getData(),Ps=to.src.value,x=to.src.meta||{};!x.width&&!x.height&&Ce.hasDimensions&&($e(Ps)?ae.imageSize(Ps).then(U=>{je.open&&At.setData({dimensions:U})}).catch(U=>console.error(U)):At.setData({dimensions:{width:"",height:""}}))},Sc=(ae,Ce,je)=>{const At=je.getData(),to=ll.findEntry(ae.imageList,At.src.value);Ce.prevImage=to,je.setData({images:to.map(Ps=>Ps.value).getOr("")})},ci=(ae,Ce,je,At)=>{im(Ce,At),Il(Ce,At),ka(ae,Ce,je,At),Sc(Ce,je,At)},am=(ae,Ce,je,At)=>{const to=At.getData(),Ps=ll.findEntry(Ce.imageList,to.images);Ps.each(x=>{to.alt===""||je.prevImage.map(X=>X.text===to.alt).getOr(!1)?x.value===""?At.setData({src:x,alt:je.prevAlt}):At.setData({src:x,alt:x.text}):At.setData({src:x})}),je.prevImage=Ps,ci(ae,Ce,je,At)},Cc=(ae,Ce,je,At)=>{const to=At.getData();At.block("Uploading image"),we(to.fileinput).fold(()=>{At.unblock()},Ps=>{const x=URL.createObjectURL(Ps),U=()=>{At.unblock(),URL.revokeObjectURL(x)},X=ne=>{At.setData({src:{value:ne,meta:{}}}),At.showTab("general"),ci(ae,Ce,je,At),At.focus("src")};ft(Ps).then(ne=>{const de=ae.createBlobCache(Ps,x,ne);Ce.automaticUploads?ae.uploadImage(de).then(ge=>{X(ge.url),U()}).catch(ge=>{U(),ae.alertErr(ge,()=>{At.focus("fileinput")})}):(ae.addToBlobCache(de),X(de.blobUri()),At.unblock())})})},ul=(ae,Ce,je)=>(At,to)=>{to.name==="src"?ci(ae,Ce,je,At):to.name==="images"?am(ae,Ce,je,At):to.name==="alt"?je.prevAlt=At.getData().alt:to.name==="fileinput"?Cc(ae,Ce,je,At):to.name==="isDecorative"&&At.setEnabled("alt",!At.getData().isDecorative)},ap=ae=>()=>{ae.open=!1},gf=ae=>ae.hasAdvTab||ae.hasUploadUrl||ae.hasUploadHandler?{type:"tabpanel",tabs:le([[Da.makeTab(ae)],ae.hasAdvTab?[rh.makeTab(ae)]:[],ae.hasUploadTab&&(ae.hasUploadUrl||ae.hasUploadHandler)?[ih.makeTab(ae)]:[]])}:{type:"panel",items:Da.makeItems(ae)},Xu=(ae,Ce,je)=>At=>{const to=lt(Ar(Ce.image),At.getData()),Ps={...to,style:rp(je.normalizeCss,ec(to,!1))};ae.execCommand("mceUpdateImage",!1,ec(Ps,Ce.hasAccessibilityOptions)),ae.editorUpload.uploadImagesAuto(),At.close()},cp=ae=>Ce=>Dt(ae,Ce)?Jn(ae.documentBaseURI.toAbsolute(Ce)).then(je=>({width:String(je.width),height:String(je.height)})):Promise.resolve({width:"",height:""}),vf=ae=>(Ce,je,At)=>{var to;return ae.editorUpload.blobCache.create({blob:Ce,blobUri:je,name:(to=Ce.name)===null||to===void 0?void 0:to.replace(/\.[^\.]+$/,""),filename:Ce.name,base64:At.split(",")[1]})},Qu=ae=>Ce=>{ae.editorUpload.blobCache.add(Ce)},bf=ae=>(Ce,je)=>{ae.windowManager.alert(Ce,je)},kn=ae=>Ce=>Xi(ae,Ce),Ld=ae=>Ce=>ae.dom.parseStyle(Ce),lp=ae=>(Ce,je)=>ae.dom.serializeStyle(Ce,je),ve=ae=>Ce=>Vi(ae).upload([Ce],!1).then(je=>{var At;return je.length===0?Promise.reject("Failed to upload image"):je[0].status===!1?Promise.reject((At=je[0].error)===null||At===void 0?void 0:At.message):je[0]}),Ve=ae=>{const Ce={imageSize:cp(ae),addToBlobCache:Qu(ae),createBlobCache:vf(ae),alertErr:bf(ae),normalizeCss:kn(ae),parseStyle:Ld(ae),serializeStyle:lp(ae),uploadImage:ve(ae)};return{open:()=>{ii(ae).then(At=>{const to=ip(At);return{title:"Insert/Edit Image",size:"normal",body:gf(At),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Ar(At.image),onSubmit:Xu(ae,At,Ce),onChange:ul(Ce,At,to),onClose:ap(to)}}).then(ae.windowManager.open)}}},it=ae=>{ae.addCommand("mceImage",Ve(ae).open),ae.addCommand("mceUpdateImage",(Ce,je)=>{ae.undoManager.transact(()=>zc(ae,je))})},jt=ae=>{const Ce=ae.attr("class");return B(Ce)&&/\bimage\b/.test(Ce)},Rn=ae=>Ce=>{let je=Ce.length;const At=to=>{to.attr("contenteditable",ae?"true":null)};for(;je--;){const to=Ce[je];jt(to)&&(to.attr("contenteditable",ae?"false":null),ou.each(to.getAll("figcaption"),At))}},so=ae=>{ae.on("PreInit",()=>{ae.parser.addNodeFilter("figure",Rn(!0)),ae.serializer.addNodeFilter("figure",Rn(!1))})},Is=ae=>Ce=>{const je=()=>{Ce.setEnabled(ae.selection.isEditable())};return ae.on("NodeChange",je),je(),()=>{ae.off("NodeChange",je)}},hs=ae=>{ae.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Ve(ae).open,onSetup:Ce=>{Ce.setActive(B(nu(ae)));const je=ae.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",Ce.setActive).unbind,At=Is(ae)(Ce);return()=>{je(),At()}}}),ae.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Ve(ae).open,onSetup:Is(ae)}),ae.ui.registry.addContextMenu("image",{update:Ce=>ae.selection.isEditable()&&(jc(Ce)||eu(Ce)&&!It(Ce))?["image"]:[]})};var Xs=()=>{e.add("image",ae=>{bt(ae),so(ae),hs(ae),it(ae)})};Xs()})()),WTe}var qTe;function Vze(){return qTe||(qTe=1,Bze()),zTe}Vze();var KTe={},ZTe={},YTe;function Hze(){return YTe||(YTe=1,(function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const n=(v,y)=>{v.focus(),v.undoManager.transact(()=>{v.setContent(y)}),v.selection.setCursorLocation(),v.nodeChanged()},r=v=>v.getContent({source_view:!0}),i=v=>{const y=r(v);v.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code",spellcheck:!1}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:y},onSubmit:_=>{n(v,_.getData().code),_.close()}})},l=v=>{v.addCommand("mceCodeEditor",()=>{i(v)})},f=v=>{const y=()=>v.execCommand("mceCodeEditor");v.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:y}),v.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:y})};var h=()=>{e.add("code",v=>(l(v),f(v),{}))};h()})()),ZTe}var JTe;function Fze(){return JTe||(JTe=1,Hze()),KTe}Fze();var XTe={},QTe={},eOe;function $ze(){return eOe||(eOe=1,(function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const n=(j,Z,he)=>{var Ie;return he(j,Z.prototype)?!0:((Ie=j.constructor)===null||Ie===void 0?void 0:Ie.name)===Z.name},r=j=>{const Z=typeof j;return j===null?"null":Z==="object"&&Array.isArray(j)?"array":Z==="object"&&n(j,String,(he,Ie)=>Ie.isPrototypeOf(he))?"string":Z},i=j=>Z=>r(Z)===j,l=j=>Z=>typeof Z===j,f=j=>Z=>j===Z,h=i("string"),v=i("array"),y=l("boolean"),_=f(void 0),A=j=>j==null,R=j=>!A(j),k=l("function"),N=l("number"),L=()=>{},B=(j,Z)=>he=>j(Z(he)),H=j=>()=>j,q=j=>j,Y=(j,Z)=>j===Z;function K(j,...Z){return(...he)=>{const Ie=Z.concat(he);return j.apply(null,Ie)}}const se=j=>{j()},ie=H(!1),le=H(!0);class M{constructor(Z,he){this.tag=Z,this.value=he}static some(Z){return new M(!0,Z)}static none(){return M.singletonNone}fold(Z,he){return this.tag?he(this.value):Z()}isSome(){return this.tag}isNone(){return!this.tag}map(Z){return this.tag?M.some(Z(this.value)):M.none()}bind(Z){return this.tag?Z(this.value):M.none()}exists(Z){return this.tag&&Z(this.value)}forall(Z){return!this.tag||Z(this.value)}filter(Z){return!this.tag||Z(this.value)?this:M.none()}getOr(Z){return this.tag?this.value:Z}or(Z){return this.tag?this:Z}getOrThunk(Z){return this.tag?this.value:Z()}orThunk(Z){return this.tag?this:Z()}getOrDie(Z){if(this.tag)return this.value;throw new Error(Z??"Called getOrDie on None")}static from(Z){return R(Z)?M.some(Z):M.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Z){this.tag&&Z(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}M.singletonNone=new M(!1);const we=Array.prototype.indexOf,Ne=Array.prototype.push,De=(j,Z)=>we.call(j,Z),be=(j,Z)=>De(j,Z)>-1,me=(j,Z)=>{for(let he=0,Ie=j.length;he<Ie;he++){const Xe=j[he];if(Z(Xe,he))return!0}return!1},Ye=(j,Z)=>{const he=[];for(let Ie=0;Ie<j;Ie++)he.push(Z(Ie));return he},Ke=(j,Z)=>{const he=j.length,Ie=new Array(he);for(let Xe=0;Xe<he;Xe++){const Ht=j[Xe];Ie[Xe]=Z(Ht,Xe)}return Ie},Ze=(j,Z)=>{for(let he=0,Ie=j.length;he<Ie;he++){const Xe=j[he];Z(Xe,he)}},z=(j,Z)=>{for(let he=j.length-1;he>=0;he--){const Ie=j[he];Z(Ie,he)}},$t=(j,Z)=>{const he=[],Ie=[];for(let Xe=0,Ht=j.length;Xe<Ht;Xe++){const Vn=j[Xe];(Z(Vn,Xe)?he:Ie).push(Vn)}return{pass:he,fail:Ie}},Be=(j,Z)=>{const he=[];for(let Ie=0,Xe=j.length;Ie<Xe;Ie++){const Ht=j[Ie];Z(Ht,Ie)&&he.push(Ht)}return he},at=(j,Z,he)=>(z(j,(Ie,Xe)=>{he=Z(he,Ie,Xe)}),he),lt=(j,Z,he)=>(Ze(j,(Ie,Xe)=>{he=Z(he,Ie,Xe)}),he),$e=(j,Z,he)=>{for(let Ie=0,Xe=j.length;Ie<Xe;Ie++){const Ht=j[Ie];if(Z(Ht,Ie))return M.some(Ht);if(he(Ht,Ie))break}return M.none()},qt=(j,Z)=>$e(j,Z,ie),io=j=>{const Z=[];for(let he=0,Ie=j.length;he<Ie;++he){if(!v(j[he]))throw new Error("Arr.flatten item "+he+" was not an array, input: "+j);Ne.apply(Z,j[he])}return Z},En=(j,Z)=>io(Ke(j,Z)),Zn=(j,Z)=>{for(let he=0,Ie=j.length;he<Ie;++he){const Xe=j[he];if(Z(Xe,he)!==!0)return!1}return!0},Et=(j,Z)=>{const he={};for(let Ie=0,Xe=j.length;Ie<Xe;Ie++){const Ht=j[Ie];he[String(Ht)]=Z(Ht,Ie)}return he},Jt=(j,Z)=>Z>=0&&Z<j.length?M.some(j[Z]):M.none(),ce=j=>Jt(j,0),Hs=j=>Jt(j,j.length-1),Fo=(j,Z)=>{for(let he=0;he<j.length;he++){const Ie=Z(j[he],he);if(Ie.isSome())return Ie}return M.none()},yt=Object.keys,Xt=Object.hasOwnProperty,Wn=(j,Z)=>{const he=yt(j);for(let Ie=0,Xe=he.length;Ie<Xe;Ie++){const Ht=he[Ie],Vn=j[Ht];Z(Vn,Ht)}},bt=j=>(Z,he)=>{j[he]=Z},Kt=(j,Z,he,Ie)=>{Wn(j,(Xe,Ht)=>{(Z(Xe,Ht)?he:Ie)(Xe,Ht)})},Ut=(j,Z)=>{const he={};return Kt(j,Z,bt(he),L),he},Ue=(j,Z)=>{const he=[];return Wn(j,(Ie,Xe)=>{he.push(Z(Ie,Xe))}),he},dt=j=>Ue(j,q),Ot=j=>yt(j).length,Oe=(j,Z)=>pt(j,Z)?M.from(j[Z]):M.none(),pt=(j,Z)=>Xt.call(j,Z),Bt=(j,Z)=>pt(j,Z)&&j[Z]!==void 0&&j[Z]!==null,tn=j=>{for(const Z in j)if(Xt.call(j,Z))return!1;return!0},ht=j=>{let Z=j;return{get:()=>Z,set:Xe=>{Z=Xe}}},gt=(j,Z,he=Y)=>j.exists(Ie=>he(Ie,Z)),No=j=>{const Z=[],he=Ie=>{Z.push(Ie)};for(let Ie=0;Ie<j.length;Ie++)j[Ie].each(he);return Z},Ko=(j,Z,he)=>j.isSome()&&Z.isSome()?M.some(he(j.getOrDie(),Z.getOrDie())):M.none(),Wo=j=>j.bind(q),Jn=(j,Z)=>j?M.some(Z):M.none(),ys=j=>{const Z=ht(M.none()),he=()=>Z.get().each(j);return{clear:()=>{he(),Z.set(M.none())},isSet:()=>Z.get().isSome(),get:()=>Z.get(),set:yo=>{he(),Z.set(M.some(yo))}}},ps=()=>ys(j=>j.unbind()),es=(j,Z)=>j.substring(Z),is=(j,Z,he)=>Z===""||j.length>=Z.length&&j.substr(he,he+Z.length)===Z,st=(j,Z)=>ft(j,Z)?es(j,Z.length):j,ft=(j,Z)=>is(j,Z,0),Dt=(j=>Z=>Z.replace(j,""))(/^\s+|\s+$/g),Nn=j=>j.length>0,$n=j=>!Nn(j),lo=(j,Z=10)=>{const he=parseInt(j,Z);return isNaN(he)?M.none():M.some(he)},Vt=j=>{const Z=parseFloat(j);return isNaN(Z)?M.none():M.some(Z)},Pn=j=>{let Z=!1,he;return(...Ie)=>(Z||(Z=!0,he=j.apply(null,Ie)),he)},wn=(j,Z)=>{const Ie=(Z||document).createElement("div");if(Ie.innerHTML=j,!Ie.hasChildNodes()||Ie.childNodes.length>1){const Xe="HTML does not have a single root node";throw console.error(Xe,j),new Error(Xe)}return mn(Ie.childNodes[0])},ko=(j,Z)=>{const Ie=(Z||document).createElement(j);return mn(Ie)},ts=(j,Z)=>{const Ie=(Z||document).createTextNode(j);return mn(Ie)},mn=j=>{if(j==null)throw new Error("Node cannot be null or undefined");return{dom:j}},As={fromHtml:wn,fromTag:ko,fromText:ts,fromDom:mn,fromPoint:(j,Z,he)=>M.from(j.dom.elementFromPoint(Z,he)).map(mn)},Yi=8,Si=9,Yr=11,Ts=1,ho=3,Os=(j,Z)=>{const he=j.dom;if(he.nodeType!==Ts)return!1;{const Ie=he;if(Ie.matches!==void 0)return Ie.matches(Z);if(Ie.msMatchesSelector!==void 0)return Ie.msMatchesSelector(Z);if(Ie.webkitMatchesSelector!==void 0)return Ie.webkitMatchesSelector(Z);if(Ie.mozMatchesSelector!==void 0)return Ie.mozMatchesSelector(Z);throw new Error("Browser lacks native selectors")}},Xa=j=>j.nodeType!==Ts&&j.nodeType!==Si&&j.nodeType!==Yr||j.childElementCount===0,jc=(j,Z)=>{const he=Z===void 0?document:Z.dom;return Xa(he)?[]:Ke(he.querySelectorAll(j),As.fromDom)},eu=(j,Z)=>{const he=Z===void 0?document:Z.dom;return Xa(he)?M.none():M.from(he.querySelector(j)).map(As.fromDom)},fo=(j,Z)=>j.dom===Z.dom,vc=Os,Ji=j=>j.dom.nodeName.toLowerCase(),rp=j=>j.dom.nodeType,xa=j=>Z=>rp(Z)===j,kd=j=>rp(j)===Yi||Ji(j)==="#comment",Js=xa(Ts),Iu=xa(ho),Yu=xa(Si),tu=xa(Yr),cl=j=>Z=>Js(Z)&&Ji(Z)===j,Xi=j=>As.fromDom(j.dom.ownerDocument),nu=j=>Yu(j)?j:Xi(j),Ju=j=>M.from(j.dom.parentNode).map(As.fromDom),Un=(j,Z)=>{const he=k(Z)?Z:ie;let Ie=j.dom;const Xe=[];for(;Ie.parentNode!==null&&Ie.parentNode!==void 0;){const Ht=Ie.parentNode,Vn=As.fromDom(Ht);if(Xe.push(Vn),he(Vn)===!0)break;Ie=Ht}return Xe},oh=j=>M.from(j.dom.previousSibling).map(As.fromDom),Md=j=>M.from(j.dom.nextSibling).map(As.fromDom),Nd=j=>Ke(j.dom.childNodes,As.fromDom),gr=(j,Z)=>{const he=j.dom.childNodes;return M.from(he[Z]).map(As.fromDom)},sh=j=>gr(j,0),zc=j=>tu(j)&&R(j.dom.host),Vi=j=>As.fromDom(j.dom.getRootNode()),ou=j=>{const Z=Vi(j);return zc(Z)?M.some(Z):M.none()},Pd=j=>As.fromDom(j.dom.host),bc=(j,Z)=>{Ju(j).each(Ie=>{Ie.dom.insertBefore(Z.dom,j.dom)})},Pr=(j,Z)=>{Md(j).fold(()=>{Ju(j).each(Xe=>{Gi(Xe,Z)})},Ie=>{bc(Ie,Z)})},Qa=(j,Z)=>{sh(j).fold(()=>{Gi(j,Z)},Ie=>{j.dom.insertBefore(Z.dom,Ie.dom)})},Gi=(j,Z)=>{j.dom.appendChild(Z.dom)},sm=(j,Z)=>{bc(j,Z),Gi(Z,j)},rm=(j,Z)=>{Ze(Z,(he,Ie)=>{const Xe=Ie===0?j:Z[Ie-1];Pr(Xe,he)})},yc=(j,Z)=>{Ze(Z,he=>{Gi(j,he)})},ll=(j,Z,he)=>{if(h(he)||y(he)||N(he))j.setAttribute(Z,he+"");else throw console.error("Invalid call to Attribute.set. Key ",Z,":: Value ",he,":: Element ",j),new Error("Attribute value was not simple")},Tl=(j,Z,he)=>{ll(j.dom,Z,he)},rh=(j,Z)=>{const he=j.dom;Wn(Z,(Ie,Xe)=>{ll(he,Xe,Ie)})},ii=(j,Z)=>{const he=j.dom.getAttribute(Z);return he===null?void 0:he},$o=(j,Z)=>M.from(ii(j,Z)),ai=(j,Z)=>{j.dom.removeAttribute(Z)},Da=j=>lt(j.dom.attributes,(Z,he)=>(Z[he.name]=he.value,Z),{}),Lr=j=>{const Z=j.dom;Z.parentNode!==null&&Z.parentNode.removeChild(Z)},ih=j=>{const Z=Nd(j);Z.length>0&&rm(j,Z),Lr(j)},ip=j=>Ke(j,As.fromDom),Ar=j=>j.style!==void 0&&k(j.style.getPropertyValue),ec=j=>{const Z=Iu(j)?j.dom.parentNode:j.dom;if(Z==null||Z.ownerDocument===null)return!1;const he=Z.ownerDocument;return ou(As.fromDom(Z)).fold(()=>he.body.contains(Z),B(ec,Pd))},Ol=(j,Z,he)=>{if(!h(he))throw console.error("Invalid call to CSS.set. Property ",Z,":: Value ",he,":: Element ",j),new Error("CSS value must be a string: "+he);Ar(j)&&j.style.setProperty(Z,he)},im=(j,Z)=>{Ar(j)&&j.style.removeProperty(Z)},Hn=(j,Z,he)=>{const Ie=j.dom;Ol(Ie,Z,he)},Il=(j,Z)=>{const he=j.dom,Xe=window.getComputedStyle(he).getPropertyValue(Z);return Xe===""&&!ec(j)?ka(he,Z):Xe},ka=(j,Z)=>Ar(j)?j.style.getPropertyValue(Z):"",Sc=(j,Z)=>{const he=j.dom,Ie=ka(he,Z);return M.from(Ie).filter(Xe=>Xe.length>0)},ci=(j,Z)=>{const he=j.dom;im(he,Z),gt($o(j,"style").map(Dt),"")&&ai(j,"style")},am=(j,Z)=>Vt(j).getOr(Z),Cc=(j,Z,he)=>am(Il(j,Z),he),ul=(j,Z,he,Ie)=>{const Xe=Cc(j,`padding-${he}`,0),Ht=Cc(j,`padding-${Ie}`,0),Vn=Cc(j,`border-${he}-width`,0),yo=Cc(j,`border-${Ie}-width`,0);return Z-Xe-Ht-Vn-yo},ap=(j,Z)=>{const he=j.dom,Ie=he.getBoundingClientRect().width||he.offsetWidth;return ul(j,Ie,"left","right")},Xu=j=>ap(j),vf=((j,Z)=>{const he=Ht=>{if(!j(Ht))throw new Error("Can only get "+Z+" value of a "+Z+" node");return Ie(Ht).getOr("")},Ie=Ht=>j(Ht)?M.from(Ht.dom.nodeValue):M.none();return{get:he,getOption:Ie,set:(Ht,Vn)=>{if(!j(Ht))throw new Error("Can only set raw "+Z+" value of a "+Z+" node");Ht.dom.nodeValue=Vn}}})(Iu,"text"),Qu=j=>vf.get(j),bf=(j,Z)=>vf.set(j,Z);var kn=(j,Z,he,Ie,Xe)=>j(he,Ie)?M.some(he):k(Xe)&&Xe(he)?M.none():Z(he,Ie,Xe);const Ld=(j,Z,he)=>{let Ie=j.dom;const Xe=k(he)?he:ie;for(;Ie.parentNode;){Ie=Ie.parentNode;const Ht=As.fromDom(Ie);if(Z(Ht))return M.some(Ht);if(Xe(Ht))break}return M.none()},lp=(j,Z,he)=>kn((Xe,Ht)=>Ht(Xe),Ld,j,Z,he),ve=(j,Z)=>{const he=Xe=>Z(As.fromDom(Xe));return qt(j.dom.childNodes,he).map(As.fromDom)},Ve=(j,Z,he)=>Ld(j,Ie=>Os(Ie,Z),he),it=(j,Z)=>ve(j,he=>Os(he,Z)),jt=(j,Z)=>eu(Z,j),Rn=(j,Z,he)=>kn((Xe,Ht)=>Os(Xe,Ht),Ve,j,Z,he),so=j=>Rn(j,"[contenteditable]"),Is=(j,Z=!1)=>ec(j)?j.dom.isContentEditable:so(j).fold(H(Z),he=>hs(he)==="true"),hs=j=>j.dom.contentEditable,Xs=(j,Z)=>Be(Nd(j),Z),ae=(j,Z)=>{let he=[];return Ze(Nd(j),Ie=>{Z(Ie)&&(he=he.concat([Ie])),he=he.concat(ae(Ie,Z))}),he},Ce=(j,Z)=>Xs(j,he=>Os(he,Z)),je=(j,Z)=>jc(Z,j),At=(j,Z)=>it(j,Z).isSome(),to=j=>j.nodeName.toLowerCase(),Ps=j=>As.fromDom(j.getBody()),x=j=>Z=>fo(Z,Ps(j)),U=j=>j?j.replace(/px$/,""):"",X=j=>/^\d+(\.\d+)?$/.test(j)?j+"px":j,ne=j=>As.fromDom(j.selection.getStart()),de=j=>As.fromDom(j.selection.getEnd()),ge=j=>lp(j,cl("table")).forall(Is),Te=["tfoot","thead","tbody","colgroup"],rt=j=>be(Te,j),ot=(j,Z)=>({rows:j,columns:Z}),Rt=(j,Z,he)=>({element:j,rowspan:Z,colspan:he}),rn=(j,Z,he,Ie,Xe,Ht)=>({element:j,rowspan:Z,colspan:he,row:Ie,column:Xe,isLocked:Ht}),xn=(j,Z,he)=>({element:j,cells:Z,section:he}),Zt=(j,Z,he,Ie)=>({startRow:j,startCol:Z,finishRow:he,finishCol:Ie}),uo=(j,Z,he)=>({element:j,colspan:Z,column:he}),Fs=(j,Z)=>({element:j,columns:Z}),Dr=(j,Z,he=0)=>$o(j,Z).map(Ie=>parseInt(Ie,10)).getOr(he),lr=(j,Z)=>Ma(j,Z,le),Ma=(j,Z,he)=>En(Nd(j),Ie=>Os(Ie,Z)?he(Ie)?[Ie]:[]:Ma(Ie,Z,he)),Ti=(j,Z,he=ie)=>{if(he(Z))return M.none();if(be(j,Ji(Z)))return M.some(Z);const Ie=Xe=>Os(Xe,"table")||he(Xe);return Ve(Z,j.join(","),Ie)},ed=(j,Z)=>Ti(["td","th"],j,Z),td=j=>lr(j,"th,td"),Tr=j=>Os(j,"colgroup")?Ce(j,"col"):En(Qi(j),Z=>Ce(Z,"col")),tc=(j,Z)=>Rn(j,"table",Z),Br=j=>lr(j,"tr"),Qi=j=>tc(j).fold(H([]),Z=>Ce(Z,"colgroup")),fg=cl("th"),su=(j,Z)=>j&&Z?"sectionCells":j?"section":"cells",Bd=j=>{const Z=j.section==="thead",he=gt(pg(j.cells),"th");return j.section==="tfoot"?{type:"footer"}:Z||he?{type:"header",subType:su(Z,he)}:{type:"body"}},pg=j=>{const Z=Be(j,he=>fg(he.element));return Z.length===0?M.some("td"):Z.length===j.length?M.some("th"):M.none()},Ru=j=>{const Z=Ke(j,Xe=>Bd(Xe).type),he=be(Z,"header"),Ie=be(Z,"footer");if(!he&&!Ie)return M.some("body");{const Xe=be(Z,"body");return he&&!Xe&&!Ie?M.some("header"):!he&&!Xe&&Ie?M.some("footer"):M.none()}},Vd=(j,Z)=>Ke(j,he=>{if(Ji(he)==="colgroup"){const Ie=Ke(Tr(he),Xe=>{const Ht=Dr(Xe,"span",1);return Rt(Xe,1,Ht)});return xn(he,Ie,"colgroup")}else{const Ie=Ke(td(he),Xe=>{const Ht=Dr(Xe,"rowspan",1),Vn=Dr(Xe,"colspan",1);return Rt(Xe,Ht,Vn)});return xn(he,Ie,Z(he))}}),ah=j=>Ju(j).map(Z=>{const he=Ji(Z);return rt(he)?he:"tbody"}).getOr("tbody"),xu=j=>{const Z=Br(j),Ie=[...Qi(j),...Z];return Vd(Ie,ah)},hg="data-snooker-locked-cols",nc=j=>$o(j,hg).bind(Z=>M.from(Z.match(/\d+/g))).map(Z=>Et(Z,le)),ba=(j,Z)=>j+","+Z,ch=(j,Z,he)=>M.from(j.access[ba(Z,he)]),U1=(j,Z,he)=>{const Ie=$s(j,Xe=>he(Z,Xe.element));return Ie.length>0?M.some(Ie[0]):M.none()},$s=(j,Z)=>{const he=En(j.all,Ie=>Ie.cells);return Be(he,Z)},Ci=j=>{const Z={};let he=0;return Ze(j.cells,Ie=>{const Xe=Ie.colspan;Ye(Xe,Ht=>{const Vn=he+Ht;Z[Vn]=uo(Ie.element,Xe,Vn)}),he+=Xe}),Z},lh=j=>{const Z={},he=[],Xe=ce(j).map(Dl=>Dl.element).bind(tc).bind(nc).getOr({});let Ht=0,Vn=0,yo=0;const{pass:cs,fail:_s}=$t(j,Dl=>Dl.section==="colgroup");Ze(_s,Dl=>{const hh=[];Ze(Dl.cells,mh=>{let qd=0;for(;Z[ba(yo,qd)]!==void 0;)qd++;const nS=Bt(Xe,qd.toString()),gv=rn(mh.element,mh.rowspan,mh.colspan,yo,qd,nS);for(let iy=0;iy<mh.colspan;iy++)for(let vg=0;vg<mh.rowspan;vg++){const vv=yo+vg,ay=qd+iy,cy=ba(vv,ay);Z[cy]=gv,Vn=Math.max(Vn,ay+1)}hh.push(gv)}),Ht++,he.push(xn(Dl.element,hh,Dl.section)),yo++});const{columns:Gr,colgroups:ui}=Hs(cs).map(Dl=>{const hh=Ci(Dl);return{colgroups:[Fs(Dl.element,dt(hh))],columns:hh}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:ot(Ht,Vn),access:Z,all:he,columns:Gr,colgroups:ui}},Wr={fromTable:j=>{const Z=xu(j);return lh(Z)},generate:lh,getAt:ch,findItem:U1,filterItems:$s,justCells:j=>En(j.all,Z=>Z.cells),justColumns:j=>dt(j.columns),hasColumns:j=>yt(j.columns).length>0,getColumnAt:(j,Z)=>M.from(j.columns[Z])},yf=(j,Z)=>Fo(j.all,he=>qt(he.cells,Ie=>fo(Z,Ie.element))),up=(j,Z,he)=>{const Ie=Ke(Z.selection,Ht=>ed(Ht).bind(Vn=>yf(j,Vn)).filter(he)),Xe=No(Ie);return Jn(Xe.length>0,Xe)},yn=(j,Z)=>Z.mergable,oc=(j,Z)=>Z.unmergable,dp=(j,Z)=>up(j,Z,le),dl=(j,Z)=>yf(j,Z).exists(he=>!he.isLocked),fp=(j,Z)=>Zn(Z,he=>dl(j,he)),vb=(j,Z)=>yn(j,Z).filter(he=>fp(j,he.cells)),Me=(j,Z)=>oc(j,Z).filter(he=>fp(j,he));var Ec=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Hd=()=>{const j=_s=>As.fromDom(_s.dom.cloneNode(!1)),Z=_s=>nu(_s).dom,he=_s=>Js(_s)?Ji(_s)==="body"?!0:be(Ec,Ji(_s)):!1,Ie=_s=>Js(_s)?be(["br","img","hr","input"],Ji(_s)):!1,Xe=_s=>Js(_s)&&ii(_s,"contenteditable")==="false",Ht=(_s,Gr)=>_s.dom.compareDocumentPosition(Gr.dom),Vn=(_s,Gr)=>{const ui=Da(_s);rh(Gr,ui)},yo=_s=>{const Gr=Ji(_s);return be(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Gr)},cs=_s=>Js(_s)?$o(_s,"lang"):M.none();return{up:H({selector:Ve,closest:Rn,predicate:Ld,all:Un}),down:H({selector:je,predicate:ae}),styles:H({get:Il,getRaw:Sc,set:Hn,remove:ci}),attrs:H({get:ii,set:Tl,remove:ai,copyTo:Vn}),insert:H({before:bc,after:Pr,afterAll:rm,append:Gi,appendAll:yc,prepend:Qa,wrap:sm}),remove:H({unwrap:ih,remove:Lr}),create:H({nu:As.fromTag,clone:j,text:As.fromText}),query:H({comparePosition:Ht,prevSibling:oh,nextSibling:Md}),property:H({children:Nd,name:Ji,parent:Ju,document:Z,isText:Iu,isComment:kd,isElement:Js,isSpecial:yo,getLanguage:cs,getText:Qu,setText:bf,isBoundary:he,isEmptyTag:Ie,isNonEditable:Xe}),eq:fo,is:vc}};const bb=(j,Z,he,Ie)=>{const Xe=he[0],Ht=he.slice(1);return Ie(j,Z,Xe,Ht)},pp=(j,Z,he)=>he.length>0?bb(j,Z,he,$a):M.none(),$a=(j,Z,he,Ie)=>{const Xe=Z(j,he);return at(Ie,(Ht,Vn)=>{const yo=Z(j,Vn);return ze(j,Ht,yo)},Xe)},ze=(j,Z,he)=>Z.bind(Ie=>he.filter(K(j.eq,Ie))),mt=pp,Yt=Hd(),cn=(j,Z)=>mt(Yt,(he,Ie)=>j(Ie),Z),To=(j,Z)=>{const he=Wr.fromTable(j);return dp(he,Z).bind(Xe=>{const Ht=Xe[Xe.length-1],Vn=Xe[0].row,yo=Ht.row+Ht.rowspan,cs=he.all.slice(Vn,yo);return Ru(cs)}).getOr("")},Po=(j,Z)=>Z.column>=j.startCol&&Z.column+Z.colspan-1<=j.finishCol&&Z.row>=j.startRow&&Z.row+Z.rowspan-1<=j.finishRow,ds=(j,Z)=>{let he=!0;const Ie=K(Po,Z);for(let Xe=Z.startRow;Xe<=Z.finishRow;Xe++)for(let Ht=Z.startCol;Ht<=Z.finishCol;Ht++)he=he&&Wr.getAt(j,Xe,Ht).exists(Ie);return he?M.some(Z):M.none()},qo=(j,Z)=>Zt(Math.min(j.row,Z.row),Math.min(j.column,Z.column),Math.max(j.row+j.rowspan-1,Z.row+Z.rowspan-1),Math.max(j.column+j.colspan-1,Z.column+Z.colspan-1)),Ls=(j,Z,he)=>{const Ie=Wr.findItem(j,Z,fo),Xe=Wr.findItem(j,he,fo);return Ie.bind(Ht=>Xe.map(Vn=>qo(Ht,Vn)))},Bs=(j,Z,he)=>Ls(j,Z,he).bind(Ie=>ds(j,Ie)),Es=(j,Z,he)=>{const Ie=Ks(j);return Bs(Ie,Z,he)},Ks=Wr.fromTable;var eo=tinymce.util.Tools.resolve("tinymce.util.Tools");const ur=(j,Z,he)=>{const Ie=j.select("td,th",Z);let Xe;for(let Ht=0;Ht<Ie.length;Ht++){const Vn=j.getStyle(Ie[Ht],he);if(_(Xe)&&(Xe=Vn),Xe!==Vn)return""}return Xe},Ua=(j,Z,he)=>{eo.each("left center right".split(" "),Ie=>{Ie!==he&&j.formatter.remove("align"+Ie,{},Z)}),he&&j.formatter.apply("align"+he,{},Z)},_c=(j,Z,he)=>{eo.each("top middle bottom".split(" "),Ie=>{Ie!==he&&j.formatter.remove("valign"+Ie,{},Z)}),he&&j.formatter.apply("valign"+he,{},Z)},Xo=(j,Z,he)=>{j.dispatch("TableModified",{...he,table:Z})};var sc=tinymce.util.Tools.resolve("tinymce.Env");const Ei="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",ji=Ye(5,j=>{const Z=`${j+1}px`;return{title:Z,value:Z}}),Sf=Ke(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],j=>({title:j,value:j.toLowerCase()})),ki="100%",dr=j=>{var Z;const he=j.dom,Ie=(Z=he.getParent(j.selection.getStart(),he.isBlock))!==null&&Z!==void 0?Z:j.getBody();return Xu(As.fromDom(Ie))+"px"},tT=(j,Z)=>CE(j)||!xl(j)?Z:cm(j)?{...Z,width:dr(j)}:{...Z,width:ki},nT=(j,Z)=>CE(j)||xl(j)?Z:cm(j)?{...Z,width:dr(j)}:{...Z,width:ki},ua=j=>Z=>Z.options.get(j),Fd=j=>{const Z=j.options.register;Z("table_border_widths",{processor:"object[]",default:ji}),Z("table_border_styles",{processor:"object[]",default:Sf}),Z("table_cell_advtab",{processor:"boolean",default:!0}),Z("table_row_advtab",{processor:"boolean",default:!0}),Z("table_advtab",{processor:"boolean",default:!0}),Z("table_appearance_options",{processor:"boolean",default:!0}),Z("table_grid",{processor:"boolean",default:!sc.deviceType.isTouch()}),Z("table_cell_class_list",{processor:"object[]",default:[]}),Z("table_row_class_list",{processor:"object[]",default:[]}),Z("table_class_list",{processor:"object[]",default:[]}),Z("table_toolbar",{processor:"string",default:Ei}),Z("table_background_color_map",{processor:"object[]",default:[]}),Z("table_border_color_map",{processor:"object[]",default:[]})},$d=ua("table_sizing_mode"),ya=ua("table_border_widths"),Cf=ua("table_border_styles"),Rl=ua("table_cell_advtab"),Du=ua("table_row_advtab"),Wc=ua("table_advtab"),vr=ua("table_appearance_options"),nd=ua("table_grid"),xl=ua("table_style_by_css"),rc=ua("table_cell_class_list"),ja=ua("table_row_class_list"),Oi=ua("table_class_list"),Ud=ua("table_toolbar"),za=ua("table_background_color_map"),ea=ua("table_border_color_map"),cm=j=>$d(j)==="fixed",CE=j=>$d(j)==="responsive",ey=j=>{const Z=j.options,he=Z.get("table_default_styles");return Z.isSet("table_default_styles")?he:tT(j,he)},Wa=j=>{const Z=j.options,he=Z.get("table_default_attributes");return Z.isSet("table_default_attributes")?he:nT(j,he)},j1=j=>Ve(j,"table"),EE=(j,Z)=>{const he=je(j,Z);return he.length>0?M.some(he):M.none()},gg=(j,Z,he)=>jt(j,Z).bind(Ie=>jt(j,he).bind(Xe=>cn(j1,[Ie,Xe]).map(Ht=>({first:Ie,last:Xe,table:Ht})))),Lo=(j,Z)=>EE(j,Z),z1=(j,Z,he)=>gg(j,Z,he).bind(Ie=>{const Xe=cs=>fo(j,cs),Ht="thead,tfoot,tbody,table",Vn=Ve(Ie.first,Ht,Xe),yo=Ve(Ie.last,Ht,Xe);return Vn.bind(cs=>yo.bind(_s=>fo(cs,_s)?Es(Ie.table,Ie.first,Ie.last):M.none()))}),Na=q,ic=j=>{const Z=(Ie,Xe)=>$o(Ie,Xe).exists(Ht=>parseInt(Ht,10)>1),he=Ie=>Z(Ie,"rowspan")||Z(Ie,"colspan");return j.length>0&&Zn(j,he)?M.some(j):M.none()},ac=(j,Z,he)=>Z.length<=1?M.none():z1(j,he.firstSelectedSelector,he.lastSelectedSelector).map(Ie=>({bounds:Ie,cells:Z})),Jr="data-mce-selected",lm="data-mce-first-selected",ty="td["+lm+"],th["+lm+"]",od="data-mce-last-selected",Ef="td["+od+"],th["+od+"]",W1={selected:Jr,firstSelectedSelector:ty,lastSelectedSelector:Ef},G1=j=>tc(j).bind(Z=>Lo(Z,W1.firstSelectedSelector)).fold(H(j),Z=>Z[0]),yb=j=>(Z,he)=>{const Ie=Ji(Z),Xe=Ie==="col"||Ie==="colgroup"?G1(Z):Z;return Rn(Xe,j,he)},hp=yb("th,td,caption"),jd=yb("th,td"),q1=j=>ip(j.model.table.getSelectedCells()),wc=(j,Z)=>{const he=jd(j),Ie=he.bind(Xe=>tc(Xe)).map(Xe=>Br(Xe));return Ko(he,Ie,(Xe,Ht)=>Be(Ht,Vn=>me(ip(Vn.dom.cells),yo=>ii(yo,Z)==="1"||fo(yo,Xe)))).getOr([])},sd=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],mp=j=>({value:Sb(j)}),Qs=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,ku=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,_E=j=>Qs.test(j)||ku.test(j),Sb=j=>st(j,"#").toUpperCase(),rd=j=>_E(j)?M.some({value:Sb(j)}):M.none(),jo=j=>{const Z=j.toString(16);return(Z.length===1?"0"+Z:Z).toUpperCase()},_i=j=>{const Z=jo(j.red)+jo(j.green)+jo(j.blue);return mp(Z)},Ac=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Xr=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,id=(j,Z,he,Ie)=>({red:j,green:Z,blue:he,alpha:Ie}),li=(j,Z,he,Ie)=>{const Xe=parseInt(j,10),Ht=parseInt(Z,10),Vn=parseInt(he,10),yo=parseFloat(Ie);return id(Xe,Ht,Vn,yo)},da=j=>{const Z=Ac.exec(j);if(Z!==null)return M.some(li(Z[1],Z[2],Z[3],"1"));const he=Xr.exec(j);return he!==null?M.some(li(he[1],he[2],he[3],he[4])):M.none()},uv=j=>rd(j).orThunk(()=>da(j).map(_i)).getOrThunk(()=>{const Z=document.createElement("canvas");Z.height=1,Z.width=1;const he=Z.getContext("2d");he.clearRect(0,0,Z.width,Z.height),he.fillStyle="#FFFFFF",he.fillStyle=j,he.fillRect(0,0,1,1);const Ie=he.getImageData(0,0,1,1).data,Xe=Ie[0],Ht=Ie[1],Vn=Ie[2],yo=Ie[3];return _i(id(Xe,Ht,Vn,yo))}),Ds=j=>da(j).map(_i).map(Z=>"#"+Z.value).getOr(j),zd=(j,Z,he)=>Ie=>{const Xe=ps(),Ht=$n(he),Vn=()=>{const yo=q1(j),cs=_s=>j.formatter.match(Z,{value:he},_s.dom,Ht);Ht?(Ie.setActive(!me(yo,cs)),Xe.set(j.formatter.formatChanged(Z,_s=>Ie.setActive(!_s),!0))):(Ie.setActive(Zn(yo,cs)),Xe.set(j.formatter.formatChanged(Z,Ie.setActive,!1,{value:he})))};return j.initialized?Vn():j.on("init",Vn),Xe.clear},Vr=j=>Bt(j,"menu"),ru=j=>Ke(j,Z=>{const he=Z.text||Z.title||"";return Vr(Z)?{text:he,items:ru(Z.menu)}:{text:he,value:Z.value}}),fa=j=>j.length?M.some(ru([{text:"Select...",value:"mce-no-match"},...j])):M.none(),pa=(j,Z,he,Ie)=>Ke(Z,Xe=>{const Ht=Xe.text||Xe.title;return Vr(Xe)?{type:"nestedmenuitem",text:Ht,getSubmenuItems:()=>pa(j,Xe.menu,he,Ie)}:{text:Ht,type:"togglemenuitem",onAction:()=>Ie(Xe.value),onSetup:zd(j,he,Xe.value)}}),gp=(j,Z)=>he=>{j.execCommand("mceTableApplyCellStyle",!1,{[Z]:he})},dv=j=>En(j,Z=>Vr(Z)?[{...Z,menu:dv(Z.menu)}]:Nn(Z.value)?[Z]:[]),uh=(j,Z,he,Ie)=>Xe=>Xe(pa(j,Z,he,Ie)),um=(j,Z,he)=>{const Ie=Ke(Z,Xe=>({text:Xe.title,value:"#"+uv(Xe.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:Ie.length>0?Ie:void 0,allowCustomColors:!1},onAction:Xe=>{const Ht=Xe.value==="remove"?"":Xe.value;j.execCommand("mceTableApplyCellStyle",!1,{[he]:Ht})}}]},dm=j=>()=>{const he=j.queryCommandValue("mceTableRowType")==="header"?"body":"header";j.execCommand("mceTableRowType",!1,{type:he})},Tc=j=>()=>{const he=j.queryCommandValue("mceTableColType")==="th"?"td":"th";j.execCommand("mceTableColType",!1,{type:he})},dh=j=>fa(rc(j)).map(Z=>({name:"class",type:"listbox",label:"Class",items:Z})),oT=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:sd}],fm=j=>oT.concat(dh(j).toArray()),br=(j,Z)=>{const Ie=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(ru(Cf(j)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:Z==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(Ie):Ie}},fv={normal:(j,Z)=>{const he=j.dom;return{setAttrib:(Vn,yo)=>{he.setAttrib(Z,Vn,yo)},setStyle:(Vn,yo)=>{he.setStyle(Z,Vn,yo)},setFormat:(Vn,yo)=>{yo===""?j.formatter.remove(Vn,{value:null},Z,!0):j.formatter.apply(Vn,{value:yo},Z)}}}},Gc=j=>ft(j,"rgb")?Ds(j):j,iu=j=>{const Z=As.fromDom(j);return{borderwidth:Sc(Z,"border-width").getOr(""),borderstyle:Sc(Z,"border-style").getOr(""),bordercolor:Sc(Z,"border-color").map(Gc).getOr(""),backgroundcolor:Sc(Z,"background-color").map(Gc).getOr("")}},zi=j=>{const Z=j[0],he=j.slice(1);return Ze(he,Ie=>{Ze(yt(Z),Xe=>{Wn(Ie,(Ht,Vn)=>{const yo=Z[Xe];yo!==""&&Xe===Vn&&yo!==Ht&&(Z[Xe]=Xe==="class"?"mce-no-match":"")})})}),Z},fh=(j,Z,he,Ie)=>qt(j,Xe=>!_(he.formatter.matchNode(Ie,Z+Xe))).getOr(""),ta=K(fh,["left","center","right"],"align"),pv=K(fh,["top","middle","bottom"],"valign"),ny=(j,Z)=>{const he=ey(j),Ie=Wa(j),Xe=()=>({borderstyle:Oe(he,"border-style").getOr(""),bordercolor:Gc(Oe(he,"border-color").getOr("")),backgroundcolor:Gc(Oe(he,"background-color").getOr(""))}),Ht={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},Vn=()=>{const Gr=he["border-width"];return xl(j)&&Gr?{border:Gr}:Oe(Ie,"border").fold(()=>({}),ui=>({border:ui}))},yo=Z?Xe():{},cs=()=>{const Gr=Oe(he,"border-spacing").or(Oe(Ie,"cellspacing")).fold(()=>({}),ha=>({cellspacing:ha})),ui=Oe(he,"border-padding").or(Oe(Ie,"cellpadding")).fold(()=>({}),ha=>({cellpadding:ha}));return{...Gr,...ui}};return{...Ht,...he,...Ie,...yo,...Vn(),...cs()}},Z1=j=>tc(As.fromDom(j)).map(Z=>{const he={selection:ip(j.cells)};return To(Z,he)}).getOr(""),ex=(j,Z,he)=>{const Ie=(yo,cs)=>{const _s=Sc(As.fromDom(cs),"border-width");return xl(j)&&_s.isSome()?_s.getOr(""):yo.getAttrib(cs,"border")||ur(j.dom,cs,"border-width")||ur(j.dom,cs,"border")||""},Xe=j.dom,Ht=xl(j)?Xe.getStyle(Z,"border-spacing")||Xe.getAttrib(Z,"cellspacing"):Xe.getAttrib(Z,"cellspacing")||Xe.getStyle(Z,"border-spacing"),Vn=xl(j)?ur(Xe,Z,"padding")||Xe.getAttrib(Z,"cellpadding"):Xe.getAttrib(Z,"cellpadding")||ur(Xe,Z,"padding");return{width:Xe.getStyle(Z,"width")||Xe.getAttrib(Z,"width"),height:Xe.getStyle(Z,"height")||Xe.getAttrib(Z,"height"),cellspacing:Ht??"",cellpadding:Vn??"",border:Ie(Xe,Z),caption:!!Xe.select("caption",Z)[0],class:Xe.getAttrib(Z,"class",""),align:ta(j,Z),...he?iu(Z):{}}},_f=(j,Z,he)=>{const Ie=j.dom;return{height:Ie.getStyle(Z,"height")||Ie.getAttrib(Z,"height"),class:Ie.getAttrib(Z,"class",""),type:Z1(Z),align:ta(j,Z),...he?iu(Z):{}}},sT=(j,Z,he,Ie)=>{const Xe=j.dom,Ht=Ie.getOr(Z);return{width:((yo,cs)=>Xe.getStyle(yo,cs)||Xe.getAttrib(yo,cs))(Ht,"width"),scope:Xe.getAttrib(Z,"scope"),celltype:to(Z),class:Xe.getAttrib(Z,"class",""),halign:ta(j,Z),valign:pv(j,Z),...he?iu(Z):{}}},Y1=(j,Z)=>{const he=Wr.fromTable(j),Ie=Wr.justCells(he),Xe=Be(Ie,Ht=>me(Z,Vn=>fo(Ht.element,Vn)));return Ke(Xe,Ht=>({element:Ht.element.dom,column:Wr.getColumnAt(he,Ht.column).map(Vn=>Vn.element.dom)}))},wf=(j,Z,he,Ie)=>{Ie("scope")&&j.setAttrib("scope",he.scope),Ie("class")&&he.class!=="mce-no-match"&&j.setAttrib("class",he.class),Ie("width")&&Z.setStyle("width",X(he.width))},wE=(j,Z,he)=>{he("backgroundcolor")&&j.setFormat("tablecellbackgroundcolor",Z.backgroundcolor),he("bordercolor")&&j.setFormat("tablecellbordercolor",Z.bordercolor),he("borderstyle")&&j.setFormat("tablecellborderstyle",Z.borderstyle),he("borderwidth")&&j.setFormat("tablecellborderwidth",X(Z.borderwidth))},hv=(j,Z,he,Ie)=>{const Xe=Z.length===1;Ze(Z,Ht=>{const Vn=Ht.element,yo=Xe?le:Ie,cs=fv.normal(j,Vn),_s=Ht.column.map(Gr=>fv.normal(j,Gr)).getOr(cs);wf(cs,_s,he,yo),Rl(j)&&wE(cs,he,yo),Ie("halign")&&Ua(j,Vn,he.halign),Ie("valign")&&_c(j,Vn,he.valign)})},Cb=(j,Z)=>{j.execCommand("mceTableCellType",!1,{type:Z.celltype,no_events:!0})},Eb=(j,Z,he,Ie)=>{const Xe=Ut(Ie,(Ht,Vn)=>he[Vn]!==Ht);Ot(Xe)>0&&Z.length>=1&&tc(Z[0]).each(Ht=>{const Vn=Y1(Ht,Z),yo=Ot(Ut(Xe,(_s,Gr)=>Gr!=="scope"&&Gr!=="celltype"))>0,cs=pt(Xe,"celltype");(yo||pt(Xe,"scope"))&&hv(j,Vn,Ie,K(pt,Xe)),cs&&Cb(j,Ie),Xo(j,Ht.dom,{structure:cs,style:yo})})},J1=(j,Z,he,Ie)=>{const Xe=Ie.getData();Ie.close(),j.undoManager.transact(()=>{Eb(j,Z,he,Xe),j.focus()})},AE=(j,Z)=>{const he=tc(Z[0]).map(Ie=>Ke(Y1(Ie,Z),Xe=>sT(j,Xe.element,Rl(j),Xe.column)));return zi(he.getOrDie())},Wd=j=>{const Z=q1(j);if(Z.length===0)return;const he=AE(j,Z),Ie={type:"tabpanel",tabs:[{title:"General",name:"general",items:fm(j)},br(j,"cell")]},Xe={type:"panel",items:[{type:"grid",columns:2,items:fm(j)}]};j.windowManager.open({title:"Cell Properties",size:"normal",body:Rl(j)?Ie:Xe,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:he,onSubmit:K(J1,j,Z,he)})},rT=j=>fa(ja(j)).map(Z=>({name:"class",type:"listbox",label:"Class",items:Z})),pm=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],yr=j=>pm.concat(rT(j).toArray()),qc=(j,Z,he)=>{he("class")&&Z.class!=="mce-no-match"&&j.setAttrib("class",Z.class),he("height")&&j.setStyle("height",X(Z.height))},vp=(j,Z,he)=>{he("backgroundcolor")&&j.setStyle("background-color",Z.backgroundcolor),he("bordercolor")&&j.setStyle("border-color",Z.bordercolor),he("borderstyle")&&j.setStyle("border-style",Z.borderstyle)},X1=(j,Z,he,Ie)=>{const Ht=Z.length===1?le:Ie;Ze(Z,Vn=>{const yo=Ce(As.fromDom(Vn),"td,th"),cs=fv.normal(j,Vn);qc(cs,he,Ht),Du(j)&&vp(cs,he,Ht),Ie("height")&&Ze(yo,_s=>{j.dom.setStyle(_s.dom,"height",null)}),Ie("align")&&Ua(j,Vn,he.align)})},hm=(j,Z)=>{j.execCommand("mceTableRowType",!1,{type:Z.type,no_events:!0})},Q1=(j,Z,he,Ie)=>{const Xe=Ut(Ie,(Ht,Vn)=>he[Vn]!==Ht);if(Ot(Xe)>0){const Ht=pt(Xe,"type"),Vn=Ht?Ot(Xe)>1:!0;Vn&&X1(j,Z,Ie,K(pt,Xe)),Ht&&hm(j,Ie),tc(As.fromDom(Z[0])).each(yo=>Xo(j,yo.dom,{structure:Ht,style:Vn}))}},TE=(j,Z,he,Ie)=>{const Xe=Ie.getData();Ie.close(),j.undoManager.transact(()=>{Q1(j,Z,he,Xe),j.focus()})},bp=j=>{const Z=wc(ne(j),W1.selected);if(Z.length===0)return;const he=Ke(Z,Vn=>_f(j,Vn.dom,Du(j))),Ie=zi(he),Xe={type:"tabpanel",tabs:[{title:"General",name:"general",items:yr(j)},br(j,"row")]},Ht={type:"panel",items:[{type:"grid",columns:2,items:yr(j)}]};j.windowManager.open({title:"Row Properties",size:"normal",body:Du(j)?Xe:Ht,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Ie,onSubmit:K(TE,j,Ke(Z,Vn=>Vn.dom),Ie)})},yp=(j,Z,he)=>{const Ie=he?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],Xe=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],Ht=vr(j)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],Vn=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],yo=Z.length>0?[{name:"class",type:"listbox",label:"Class",items:Z}]:[];return Ie.concat(Xe).concat(Ht).concat(Vn).concat(yo)},Rr=(j,Z,he,Ie)=>{if(Z.tagName==="TD"||Z.tagName==="TH")h(he)&&R(Ie)?j.setStyle(Z,he,Ie):j.setStyles(Z,he);else if(Z.children)for(let Xe=0;Xe<Z.children.length;Xe++)Rr(j,Z.children[Xe],he,Ie)},OE=(j,Z,he,Ie)=>{const Xe=j.dom,Ht={},Vn={},yo=xl(j),cs=Wc(j),_s=parseFloat(he.border)===0;if(!_(he.class)&&he.class!=="mce-no-match"&&(Ht.class=he.class),Vn.height=X(he.height),yo?Vn.width=X(he.width):Xe.getAttrib(Z,"width")&&(Ht.width=U(he.width)),yo?(_s?(Ht.border=0,Vn["border-width"]=""):(Vn["border-width"]=X(he.border),Ht.border=1),Vn["border-spacing"]=X(he.cellspacing)):(Ht.border=_s?0:he.border,Ht.cellpadding=he.cellpadding,Ht.cellspacing=he.cellspacing),yo&&Z.children){const Gr={};if(_s?Gr["border-width"]="":Ie.border&&(Gr["border-width"]=X(he.border)),Ie.cellpadding&&(Gr.padding=X(he.cellpadding)),cs&&Ie.bordercolor&&(Gr["border-color"]=he.bordercolor),!tn(Gr))for(let ui=0;ui<Z.children.length;ui++)Rr(Xe,Z.children[ui],Gr)}if(cs){const Gr=he;Vn["background-color"]=Gr.backgroundcolor,Vn["border-color"]=Gr.bordercolor,Vn["border-style"]=Gr.borderstyle}Xe.setStyles(Z,{...ey(j),...Vn}),Xe.setAttribs(Z,{...Wa(j),...Ht})},Ii=(j,Z,he,Ie)=>{const Xe=j.dom,Ht=Ie.getData(),Vn=Ut(Ht,(yo,cs)=>he[cs]!==yo);Ie.close(),j.undoManager.transact(()=>{if(!Z){const yo=lo(Ht.cols).getOr(1),cs=lo(Ht.rows).getOr(1);j.execCommand("mceInsertTable",!1,{rows:cs,columns:yo}),Z=jd(ne(j),x(j)).bind(_s=>tc(_s,x(j))).map(_s=>_s.dom).getOrDie()}if(Ot(Vn)>0){const yo={border:pt(Vn,"border"),bordercolor:pt(Vn,"bordercolor"),cellpadding:pt(Vn,"cellpadding")};OE(j,Z,Ht,yo);const cs=Xe.select("caption",Z)[0];(cs&&!Ht.caption||!cs&&Ht.caption)&&j.execCommand("mceTableToggleCaption"),Ua(j,Z,Ht.align)}if(j.focus(),j.addVisual(),Ot(Vn)>0){const yo=pt(Vn,"caption"),cs=yo?Ot(Vn)>1:!0;Xo(j,Z,{structure:yo,style:cs})}})},mv=(j,Z)=>{const he=j.dom;let Ie,Xe=ny(j,Wc(j));Z?(Xe.cols="1",Xe.rows="1",Wc(j)&&(Xe.borderstyle="",Xe.bordercolor="",Xe.backgroundcolor="")):(Ie=he.getParent(j.selection.getStart(),"table",j.getBody()),Ie?Xe=ex(j,Ie,Wc(j)):Wc(j)&&(Xe.borderstyle="",Xe.bordercolor="",Xe.backgroundcolor=""));const Ht=fa(Oi(j));Ht.isSome()&&Xe.class&&(Xe.class=Xe.class.replace(/\s*mce\-item\-table\s*/g,""));const Vn={type:"grid",columns:2,items:yp(j,Ht.getOr([]),Z)},yo=()=>({type:"panel",items:[Vn]}),cs=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[Vn]},br(j,"table")]}),_s=Wc(j)?cs():yo();j.windowManager.open({title:"Table Properties",size:"normal",body:_s,onSubmit:K(Ii,j,Ie,Xe),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Xe})},na=j=>{const Z=he=>{ge(ne(j))&&he()};Wn({mceTableProps:K(mv,j,!1),mceTableRowProps:K(bp,j),mceTableCellProps:K(Wd,j),mceInsertTableDialog:K(mv,j,!0)},(he,Ie)=>j.addCommand(Ie,()=>Z(he)))},Sp=j=>({element:j,mergable:M.none(),unmergable:M.none(),selection:[j]}),Kc=(j,Z,he)=>({element:he,mergable:ac(Z,j,W1),unmergable:ic(j),selection:Na(j)}),ph=j=>{const Z=ht(M.none()),he=ht([]);let Ie=M.none();const Xe=cl("caption"),Ht=Zs=>Ie.forall(Hr=>!Hr[Zs]),Vn=()=>hp(ne(j),x(j)),yo=()=>hp(de(j),x(j)),cs=()=>Vn().bind(Zs=>Wo(Ko(tc(Zs),yo().bind(tc),(Hr,Pa)=>fo(Hr,Pa)?Xe(Zs)?M.some(Sp(Zs)):M.some(Kc(q1(j),Hr,Zs)):M.none()))),_s=Zs=>tc(Zs.element).map(Pa=>{const cu=Wr.fromTable(Pa),ly=dp(cu,Zs).getOr([]),wb=lt(ly,(uy,dy)=>(dy.isLocked&&(uy.onAny=!0,dy.column===0?uy.onFirst=!0:dy.column+dy.colspan>=cu.grid.columns&&(uy.onLast=!0)),uy),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:vb(cu,Zs).isSome(),unmergeable:Me(cu,Zs).isSome(),locked:wb}}),Gr=()=>{Z.set(Pn(cs)()),Ie=Z.get().bind(_s),Ze(he.get(),se)},ui=Zs=>(Zs(),he.set(he.get().concat([Zs])),()=>{he.set(Be(he.get(),Hr=>Hr!==Zs))}),ha=(Zs,Hr)=>ui(()=>Z.get().fold(()=>{Zs.setEnabled(!1)},Pa=>{Zs.setEnabled(!Hr(Pa)&&j.selection.isEditable())})),Dl=(Zs,Hr,Pa)=>ui(()=>Z.get().fold(()=>{Zs.setEnabled(!1),Zs.setActive(!1)},cu=>{Zs.setEnabled(!Hr(cu)&&j.selection.isEditable()),Zs.setActive(Pa(cu))})),hh=Zs=>Ie.exists(Hr=>Hr.locked[Zs]),mh=Zs=>ha(Zs,Hr=>!1),qd=Zs=>ha(Zs,Hr=>Xe(Hr.element)),nS=Zs=>Hr=>ha(Hr,Pa=>Xe(Pa.element)||hh(Zs)),gv=Zs=>Hr=>ha(Hr,Pa=>Xe(Pa.element)||Zs().isNone()),iy=(Zs,Hr)=>Pa=>ha(Pa,cu=>Xe(cu.element)||Zs().isNone()||hh(Hr)),vg=Zs=>ha(Zs,Hr=>Ht("mergeable")),vv=Zs=>ha(Zs,Hr=>Ht("unmergeable")),ay=Zs=>Dl(Zs,ie,Hr=>tc(Hr.element,x(j)).exists(cu=>At(cu,"caption"))),cy=(Zs,Hr)=>Pa=>Dl(Pa,cu=>Xe(cu.element),()=>j.queryCommandValue(Zs)===Hr),aT=cy("mceTableRowType","header"),cT=cy("mceTableColType","th");return j.on("NodeChange ExecCommand TableSelectorChange",Gr),{onSetupTable:mh,onSetupCellOrRow:qd,onSetupColumn:nS,onSetupPasteable:gv,onSetupPasteableColumn:iy,onSetupMergeable:vg,onSetupUnmergeable:vv,resetTargets:Gr,onSetupTableWithCaption:ay,onSetupTableRowHeaders:aT,onSetupTableColumnHeaders:cT,targets:Z.get}};var oy=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const eS="x-tinymce/dom-table-",tS=eS+"rows",iT=eS+"columns",au=j=>{var Z;const he=(Z=oy.read())!==null&&Z!==void 0?Z:[];return Fo(he,Ie=>M.from(Ie.getType(j)))},Af=()=>au(tS),oa=()=>au(iT),Ga=j=>Z=>{const he=()=>{Z.setEnabled(j.selection.isEditable())};return j.on("NodeChange",he),he(),()=>{j.off("NodeChange",he)}},sy=(j,Z)=>{j.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:Ga(j),fetch:yo=>yo("inserttable | cell row column | advtablesort | tableprops deletetable")});const he=yo=>()=>j.execCommand(yo),Ie=(yo,cs)=>{j.queryCommandSupported(cs.command)&&j.ui.registry.addButton(yo,{...cs,onAction:k(cs.onAction)?cs.onAction:he(cs.command)})},Xe=(yo,cs)=>{j.queryCommandSupported(cs.command)&&j.ui.registry.addToggleButton(yo,{...cs,onAction:k(cs.onAction)?cs.onAction:he(cs.command)})};Ie("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:Z.onSetupTable}),Ie("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:Z.onSetupTable}),Ie("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:Z.onSetupCellOrRow}),Ie("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:Z.onSetupMergeable}),Ie("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:Z.onSetupUnmergeable}),Ie("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:Z.onSetupCellOrRow}),Ie("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:Z.onSetupCellOrRow}),Ie("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:Z.onSetupCellOrRow}),Ie("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:Z.onSetupCellOrRow}),Ie("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:Z.onSetupColumn("onFirst")}),Ie("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:Z.onSetupColumn("onLast")}),Ie("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:Z.onSetupColumn("onAny")}),Ie("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:Z.onSetupCellOrRow}),Ie("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:Z.onSetupCellOrRow}),Ie("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:Z.onSetupPasteable(Af)}),Ie("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:Z.onSetupPasteable(Af)}),Ie("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:Z.onSetupColumn("onAny")}),Ie("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:Z.onSetupColumn("onAny")}),Ie("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:Z.onSetupPasteableColumn(oa,"onFirst")}),Ie("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:Z.onSetupPasteableColumn(oa,"onLast")}),Ie("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:Ga(j)});const Ht=dv(Oi(j));Ht.length!==0&&j.queryCommandSupported("mceTableToggleClass")&&j.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:uh(j,Ht,"tableclass",yo=>j.execCommand("mceTableToggleClass",!1,yo)),onSetup:Z.onSetupTable});const Vn=dv(rc(j));Vn.length!==0&&j.queryCommandSupported("mceTableCellToggleClass")&&j.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:uh(j,Vn,"tablecellclass",yo=>j.execCommand("mceTableCellToggleClass",!1,yo)),onSetup:Z.onSetupCellOrRow}),j.queryCommandSupported("mceTableApplyCellStyle")&&(j.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:uh(j,sd,"tablecellverticalalign",gp(j,"vertical-align")),onSetup:Z.onSetupCellOrRow}),j.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:uh(j,ya(j),"tablecellborderwidth",gp(j,"border-width")),onSetup:Z.onSetupCellOrRow}),j.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:uh(j,Cf(j),"tablecellborderstyle",gp(j,"border-style")),onSetup:Z.onSetupCellOrRow}),j.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:yo=>yo(um(j,za(j),"background-color")),onSetup:Z.onSetupCellOrRow}),j.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:yo=>yo(um(j,ea(j),"border-color")),onSetup:Z.onSetupCellOrRow})),Xe("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:Z.onSetupTableWithCaption}),Xe("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:dm(j),onSetup:Z.onSetupTableRowHeaders}),Xe("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Tc(j),onSetup:Z.onSetupTableColumnHeaders})},_b=j=>{const Z=Ie=>j.dom.is(Ie,"table")&&j.getBody().contains(Ie)&&j.dom.isEditable(Ie.parentNode),he=Ud(j);he.length>0&&j.ui.registry.addContextToolbar("table",{predicate:Z,items:he,scope:"node",position:"node"})},ry=j=>Z=>{const he=()=>{Z.setEnabled(j.selection.isEditable())};return j.on("NodeChange",he),he(),()=>{j.off("NodeChange",he)}},IE=(j,Z)=>{const he=ui=>()=>j.execCommand(ui),Ie=(ui,ha)=>j.queryCommandSupported(ha.command)?(j.ui.registry.addMenuItem(ui,{...ha,onAction:k(ha.onAction)?ha.onAction:he(ha.command)}),!0):!1,Xe=(ui,ha)=>{j.queryCommandSupported(ha.command)&&j.ui.registry.addToggleMenuItem(ui,{...ha,onAction:k(ha.onAction)?ha.onAction:he(ha.command)})},Ht=ui=>{j.execCommand("mceInsertTable",!1,{rows:ui.numRows,columns:ui.numColumns})},Vn=[Ie("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:Z.onSetupCellOrRow}),Ie("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:Z.onSetupCellOrRow}),Ie("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:Z.onSetupCellOrRow}),Ie("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:Z.onSetupCellOrRow}),Ie("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:Z.onSetupCellOrRow}),Ie("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:Z.onSetupCellOrRow}),Ie("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:Z.onSetupPasteable(Af)}),Ie("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:Z.onSetupPasteable(Af)})],yo=[Ie("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:Z.onSetupColumn("onFirst")}),Ie("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:Z.onSetupColumn("onLast")}),Ie("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:Z.onSetupColumn("onAny")}),Ie("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:Z.onSetupColumn("onAny")}),Ie("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:Z.onSetupColumn("onAny")}),Ie("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:Z.onSetupPasteableColumn(oa,"onFirst")}),Ie("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:Z.onSetupPasteableColumn(oa,"onLast")})],cs=[Ie("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:Z.onSetupCellOrRow}),Ie("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:Z.onSetupMergeable}),Ie("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:Z.onSetupUnmergeable})];nd(j)?j.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:Ht}],onSetup:ry(j)}):j.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:he("mceInsertTableDialog"),onSetup:ry(j)}),j.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:he("mceInsertTableDialog"),onSetup:ry(j)}),Ie("tableprops",{text:"Table properties",onSetup:Z.onSetupTable,command:"mceTableProps"}),Ie("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:Z.onSetupTable,command:"mceTableDelete"}),be(Vn,!0)&&j.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:H("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),be(yo,!0)&&j.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:H("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),be(cs,!0)&&j.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:H("tablecellprops tablemergecells tablesplitcells")}),j.ui.registry.addContextMenu("table",{update:()=>(Z.resetTargets(),Z.targets().fold(H(""),ui=>Ji(ui.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const _s=dv(Oi(j));_s.length!==0&&j.queryCommandSupported("mceTableToggleClass")&&j.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>pa(j,_s,"tableclass",ui=>j.execCommand("mceTableToggleClass",!1,ui)),onSetup:Z.onSetupTable});const Gr=dv(rc(j));Gr.length!==0&&j.queryCommandSupported("mceTableCellToggleClass")&&j.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>pa(j,Gr,"tablecellclass",ui=>j.execCommand("mceTableCellToggleClass",!1,ui)),onSetup:Z.onSetupCellOrRow}),j.queryCommandSupported("mceTableApplyCellStyle")&&(j.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>pa(j,sd,"tablecellverticalalign",gp(j,"vertical-align")),onSetup:Z.onSetupCellOrRow}),j.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>pa(j,ya(j),"tablecellborderwidth",gp(j,"border-width")),onSetup:Z.onSetupCellOrRow}),j.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>pa(j,Cf(j),"tablecellborderstyle",gp(j,"border-style")),onSetup:Z.onSetupCellOrRow}),j.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>um(j,za(j),"background-color"),onSetup:Z.onSetupCellOrRow}),j.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>um(j,ea(j),"border-color"),onSetup:Z.onSetupCellOrRow})),Xe("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:Z.onSetupTableWithCaption}),Xe("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:dm(j),onSetup:Z.onSetupTableRowHeaders}),Xe("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Tc(j),onSetup:Z.onSetupTableRowHeaders})},Gd=j=>{const Z=ph(j);Fd(j),na(j),IE(j,Z),sy(j,Z),_b(j)};var tx=()=>{e.add("table",Gd)};tx()})()),QTe}var tOe;function Uze(){return tOe||(tOe=1,$ze()),XTe}Uze();var nOe={},oOe={},sOe;function jze(){return sOe||(sOe=1,(function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const n=dt=>({backspaceDelete:Ot=>{dt.execCommand("mceListBackspaceDelete",!1,Ot)}}),r=dt=>dt==null,i=dt=>!r(dt),l=dt=>()=>dt,f=(dt,Ot)=>dt===Ot,h=l(!1);class v{constructor(Ot,Oe){this.tag=Ot,this.value=Oe}static some(Ot){return new v(!0,Ot)}static none(){return v.singletonNone}fold(Ot,Oe){return this.tag?Oe(this.value):Ot()}isSome(){return this.tag}isNone(){return!this.tag}map(Ot){return this.tag?v.some(Ot(this.value)):v.none()}bind(Ot){return this.tag?Ot(this.value):v.none()}exists(Ot){return this.tag&&Ot(this.value)}forall(Ot){return!this.tag||Ot(this.value)}filter(Ot){return!this.tag||Ot(this.value)?this:v.none()}getOr(Ot){return this.tag?this.value:Ot}or(Ot){return this.tag?this:Ot}getOrThunk(Ot){return this.tag?this.value:Ot()}orThunk(Ot){return this.tag?this:Ot()}getOrDie(Ot){if(this.tag)return this.value;throw new Error(Ot??"Called getOrDie on None")}static from(Ot){return i(Ot)?v.some(Ot):v.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ot){this.tag&&Ot(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}v.singletonNone=new v(!1);const y=Array.prototype.slice,_=(dt,Ot)=>{for(let Oe=0,pt=dt.length;Oe<pt;Oe++){const Bt=dt[Oe];if(Ot(Bt,Oe))return!0}return!1},A=(dt,Ot)=>{const Oe=dt.length,pt=new Array(Oe);for(let Bt=0;Bt<Oe;Bt++){const tn=dt[Bt];pt[Bt]=Ot(tn,Bt)}return pt},R=(dt,Ot)=>{for(let Oe=0,pt=dt.length;Oe<pt;Oe++){const Bt=dt[Oe];Ot(Bt,Oe)}},k=(dt,Ot,Oe)=>(R(dt,(pt,Bt)=>{Oe=Ot(Oe,pt,Bt)}),Oe),N=(dt,Ot,Oe)=>{for(let pt=0,Bt=dt.length;pt<Bt;pt++){const tn=dt[pt];if(Ot(tn,pt))return v.some(tn);if(Oe(tn,pt))break}return v.none()},L=(dt,Ot)=>N(dt,Ot,h),B=dt=>{const Ot=y.call(dt,0);return Ot.reverse(),Ot},H=(dt,Ot,Oe=f)=>dt.exists(pt=>Oe(pt,Ot)),Y=(dt=>Ot=>Ot.replace(dt,""))(/^\s+|\s+$/g),K=dt=>dt.length>0,se=dt=>!K(dt),ie=dt=>{const Ot=B(Y(dt).split("")),Oe=A(Ot,(pt,Bt)=>{const tn=pt.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,Bt)*tn});return k(Oe,(pt,Bt)=>pt+Bt,0)},le=dt=>{if(dt--,dt<0)return"";{const Ot=dt%26,Oe=Math.floor(dt/26),pt=le(Oe),Bt=String.fromCharCode(65+Ot);return pt+Bt}},M=dt=>/^[A-Z]+$/.test(dt),we=dt=>/^[a-z]+$/.test(dt),Ne=dt=>/^[0-9]+$/.test(dt),De=dt=>Ne(dt)?2:M(dt)?0:we(dt)?1:se(dt)?3:4,be=dt=>{switch(De(dt)){case 2:return v.some({listStyleType:v.none(),start:dt});case 0:return v.some({listStyleType:v.some("upper-alpha"),start:ie(dt).toString()});case 1:return v.some({listStyleType:v.some("lower-alpha"),start:ie(dt).toString()});case 3:return v.some({listStyleType:v.none(),start:""});case 4:return v.none()}},me=dt=>{const Ot=parseInt(dt.start,10);return H(dt.listStyleType,"upper-alpha")?le(Ot):H(dt.listStyleType,"lower-alpha")?le(Ot).toLowerCase():dt.start},Ke=(dt=>Ot=>Ot.options.get(dt))("forced_root_block"),Ze=dt=>/\btox\-/.test(dt.className),z=dt=>Ot=>i(Ot)&&dt.test(Ot.nodeName),$t=dt=>Ot=>i(Ot)&&Ot.nodeName.toLowerCase()===dt,Be=z(/^(OL|UL|DL)$/),at=z(/^(TH|TD)$/),lt=z(/^(LI|DT|DD)$/),$e=(dt,Ot)=>N(dt,Be,at).exists(Oe=>Oe.nodeName===Ot&&!Ze(Oe)),qt=(dt,Ot)=>{const Oe=dt.selection.getNode();return Ot({parents:dt.dom.getParents(Oe),element:Oe}),dt.on("NodeChange",Ot),()=>dt.off("NodeChange",Ot)},io=(dt,Ot)=>Ot!==null&&!dt.dom.isEditable(Ot),En=(dt,Ot)=>{const Oe=dt.dom.getParent(Ot,"ol,ul,dl");return io(dt,Oe)||!dt.selection.isEditable()},Zn=$t("ol"),Et=["OL","UL","DL"],Jt=Et.join(","),ce=(dt,Ot)=>{const Oe=Ot||dt.selection.getStart(!0);return dt.dom.getParent(Oe,Jt,Hs(dt,Oe))},Hs=(dt,Ot)=>{const Oe=dt.dom.getParents(Ot,dt.dom.isBlock),pt=tn=>tn.nodeName.toLowerCase()!==Ke(dt);return L(Oe,tn=>pt(tn)&&Fo(dt.schema,tn)).getOr(dt.getBody())},Fo=(dt,Ot)=>!Be(Ot)&&!lt(Ot)&&_(Et,Oe=>dt.isValidChild(Ot.nodeName,Oe)),yt=dt=>{const Ot=ce(dt);!Zn(Ot)||En(dt,Ot)||dt.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:me({start:dt.dom.getAttrib(Ot,"start","1"),listStyleType:v.from(dt.dom.getStyle(Ot,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Oe=>{const pt=Oe.getData();be(pt.start).each(Bt=>{dt.execCommand("mceListUpdate",!1,{attrs:{start:Bt.start==="1"?"":Bt.start},styles:{"list-style-type":Bt.listStyleType.getOr("")}})}),Oe.close()}})},Xt=dt=>{dt.addCommand("mceListProps",()=>{yt(dt)})},Wn=(dt,Ot)=>Oe=>{const pt=Bt=>{Oe.setActive($e(Bt.parents,Ot)),Oe.setEnabled(!En(dt,Bt.element)&&dt.selection.isEditable())};return Oe.setEnabled(dt.selection.isEditable()),qt(dt,pt)},bt=dt=>{const Ot=Oe=>()=>dt.execCommand(Oe);dt.hasPlugin("advlist")||(dt.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:Ot("InsertOrderedList"),onSetup:Wn(dt,"OL")}),dt.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:Ot("InsertUnorderedList"),onSetup:Wn(dt,"UL")}))},Kt=(dt,Ot)=>Oe=>qt(dt,Bt=>Oe.setEnabled($e(Bt.parents,Ot)&&!En(dt,Bt.element))),Ut=dt=>{const Ot={text:"List properties...",icon:"ordered-list",onAction:()=>dt.execCommand("mceListProps"),onSetup:Kt(dt,"OL")};dt.ui.registry.addMenuItem("listprops",Ot),dt.ui.registry.addContextMenu("lists",{update:Oe=>{const pt=ce(dt,Oe);return Zn(pt)?["listprops"]:[]}})};var Ue=()=>{e.add("lists",dt=>(Xt(dt),bt(dt),Ut(dt),n(dt)))};Ue()})()),oOe}var rOe;function zze(){return rOe||(rOe=1,jze()),nOe}zze();var iOe={},aOe={},cOe;function Wze(){return cOe||(cOe=1,(function(){const e=Y=>{let K=Y;return{get:()=>K,set:le=>{K=le}}};var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.Env");const i=Y=>Y.dispatch("ResizeEditor"),l=Y=>K=>K.options.get(Y),f=Y=>{const K=Y.options.register;K("autoresize_overflow_padding",{processor:"number",default:1}),K("autoresize_bottom_margin",{processor:"number",default:50})},h=l("min_height"),v=l("max_height"),y=l("autoresize_overflow_padding"),_=l("autoresize_bottom_margin"),A=Y=>Y.plugins.fullscreen&&Y.plugins.fullscreen.isFullscreen(),R=(Y,K)=>{const se=Y.getBody();se&&(se.style.overflowY=K?"":"hidden",K||(se.scrollTop=0))},k=(Y,K,se,ie)=>{var le;const M=parseInt((le=Y.getStyle(K,se,ie))!==null&&le!==void 0?le:"",10);return isNaN(M)?0:M},N=Y=>{if((Y==null?void 0:Y.type.toLowerCase())==="setcontent"){const K=Y;return K.selection===!0||K.paste===!0}else return!1},L=(Y,K,se,ie)=>{var le;const M=Y.dom,we=Y.getDoc();if(!we)return;if(A(Y)){R(Y,!0);return}const Ne=we.documentElement,De=ie?ie():y(Y),be=(le=h(Y))!==null&&le!==void 0?le:Y.getElement().offsetHeight;let me=be;const Ye=k(M,Ne,"margin-top",!0),Ke=k(M,Ne,"margin-bottom",!0);let Ze=Ne.offsetHeight+Ye+Ke+De;Ze<0&&(Ze=0);const z=Y.getContainer().offsetHeight,$t=Y.getContentAreaContainer().offsetHeight,Be=z-$t;Ze+Be>be&&(me=Ze+Be);const at=v(Y);at&&me>at?(me=at,R(Y,!0)):R(Y,!1);const lt=K.get();if(lt.set&&(Y.dom.setStyles(Y.getDoc().documentElement,{"min-height":0}),Y.dom.setStyles(Y.getBody(),{"min-height":"inherit"})),me!==lt.totalHeight&&(Ze-De!==lt.contentHeight||!lt.set)){const $e=me-lt.totalHeight;if(M.setStyle(Y.getContainer(),"height",me+"px"),K.set({totalHeight:me,contentHeight:Ze,set:!0}),i(Y),r.browser.isSafari()&&(r.os.isMacOS()||r.os.isiOS())){const qt=Y.getWin();qt.scrollTo(qt.pageXOffset,qt.pageYOffset)}Y.hasFocus()&&N(se)&&Y.selection.scrollIntoView(),(r.browser.isSafari()||r.browser.isChromium())&&$e<0&&L(Y,K,se,ie)}},B=(Y,K)=>{const se=()=>_(Y);Y.on("init",ie=>{const le=y(Y),M=Y.dom;M.setStyles(Y.getDoc().documentElement,{height:"auto"}),r.browser.isEdge()||r.browser.isIE()?M.setStyles(Y.getBody(),{paddingLeft:le,paddingRight:le,"min-height":0}):M.setStyles(Y.getBody(),{paddingLeft:le,paddingRight:le}),L(Y,K,ie,se)}),Y.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",ie=>{L(Y,K,ie,se)})},H=(Y,K)=>{Y.addCommand("mceAutoResize",()=>{L(Y,K)})};var q=()=>{n.add("autoresize",Y=>{if(f(Y),Y.options.isSet("resize")||Y.options.set("resize",!1),!Y.inline){const K=e({totalHeight:0,contentHeight:0,set:!1});H(Y,K),B(Y,K)}})};q()})()),aOe}var lOe;function Gze(){return lOe||(lOe=1,Wze()),iOe}Gze();var Upe={exports:{}},ZY={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */var qze=ZY.exports,uOe;function Kze(){return uOe||(uOe=1,(function(e){(function(n,r){e.exports=n.document?r(n,!0):function(i){if(!i.document)throw new Error("jQuery requires a window with a document");return r(i)}})(typeof window<"u"?window:qze,function(n,r){var i=[],l=Object.getPrototypeOf,f=i.slice,h=i.flat?function(x){return i.flat.call(x)}:function(x){return i.concat.apply([],x)},v=i.push,y=i.indexOf,_={},A=_.toString,R=_.hasOwnProperty,k=R.toString,N=k.call(Object),L={},B=function(U){return typeof U=="function"&&typeof U.nodeType!="number"&&typeof U.item!="function"},H=function(U){return U!=null&&U===U.window},q=n.document,Y={type:!0,src:!0,nonce:!0,noModule:!0};function K(x,U,X){X=X||q;var ne,de,ge=X.createElement("script");if(ge.text=x,U)for(ne in Y)de=U[ne]||U.getAttribute&&U.getAttribute(ne),de&&ge.setAttribute(ne,de);X.head.appendChild(ge).parentNode.removeChild(ge)}function se(x){return x==null?x+"":typeof x=="object"||typeof x=="function"?_[A.call(x)]||"object":typeof x}var ie="3.7.1",le=/HTML$/i,M=function(x,U){return new M.fn.init(x,U)};M.fn=M.prototype={jquery:ie,constructor:M,length:0,toArray:function(){return f.call(this)},get:function(x){return x==null?f.call(this):x<0?this[x+this.length]:this[x]},pushStack:function(x){var U=M.merge(this.constructor(),x);return U.prevObject=this,U},each:function(x){return M.each(this,x)},map:function(x){return this.pushStack(M.map(this,function(U,X){return x.call(U,X,U)}))},slice:function(){return this.pushStack(f.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(M.grep(this,function(x,U){return(U+1)%2}))},odd:function(){return this.pushStack(M.grep(this,function(x,U){return U%2}))},eq:function(x){var U=this.length,X=+x+(x<0?U:0);return this.pushStack(X>=0&&X<U?[this[X]]:[])},end:function(){return this.prevObject||this.constructor()},push:v,sort:i.sort,splice:i.splice},M.extend=M.fn.extend=function(){var x,U,X,ne,de,ge,Te=arguments[0]||{},rt=1,ot=arguments.length,Rt=!1;for(typeof Te=="boolean"&&(Rt=Te,Te=arguments[rt]||{},rt++),typeof Te!="object"&&!B(Te)&&(Te={}),rt===ot&&(Te=this,rt--);rt<ot;rt++)if((x=arguments[rt])!=null)for(U in x)ne=x[U],!(U==="__proto__"||Te===ne)&&(Rt&&ne&&(M.isPlainObject(ne)||(de=Array.isArray(ne)))?(X=Te[U],de&&!Array.isArray(X)?ge=[]:!de&&!M.isPlainObject(X)?ge={}:ge=X,de=!1,Te[U]=M.extend(Rt,ge,ne)):ne!==void 0&&(Te[U]=ne));return Te},M.extend({expando:"jQuery"+(ie+Math.random()).replace(/\D/g,""),isReady:!0,error:function(x){throw new Error(x)},noop:function(){},isPlainObject:function(x){var U,X;return!x||A.call(x)!=="[object Object]"?!1:(U=l(x),U?(X=R.call(U,"constructor")&&U.constructor,typeof X=="function"&&k.call(X)===N):!0)},isEmptyObject:function(x){var U;for(U in x)return!1;return!0},globalEval:function(x,U,X){K(x,{nonce:U&&U.nonce},X)},each:function(x,U){var X,ne=0;if(we(x))for(X=x.length;ne<X&&U.call(x[ne],ne,x[ne])!==!1;ne++);else for(ne in x)if(U.call(x[ne],ne,x[ne])===!1)break;return x},text:function(x){var U,X="",ne=0,de=x.nodeType;if(!de)for(;U=x[ne++];)X+=M.text(U);return de===1||de===11?x.textContent:de===9?x.documentElement.textContent:de===3||de===4?x.nodeValue:X},makeArray:function(x,U){var X=U||[];return x!=null&&(we(Object(x))?M.merge(X,typeof x=="string"?[x]:x):v.call(X,x)),X},inArray:function(x,U,X){return U==null?-1:y.call(U,x,X)},isXMLDoc:function(x){var U=x&&x.namespaceURI,X=x&&(x.ownerDocument||x).documentElement;return!le.test(U||X&&X.nodeName||"HTML")},merge:function(x,U){for(var X=+U.length,ne=0,de=x.length;ne<X;ne++)x[de++]=U[ne];return x.length=de,x},grep:function(x,U,X){for(var ne,de=[],ge=0,Te=x.length,rt=!X;ge<Te;ge++)ne=!U(x[ge],ge),ne!==rt&&de.push(x[ge]);return de},map:function(x,U,X){var ne,de,ge=0,Te=[];if(we(x))for(ne=x.length;ge<ne;ge++)de=U(x[ge],ge,X),de!=null&&Te.push(de);else for(ge in x)de=U(x[ge],ge,X),de!=null&&Te.push(de);return h(Te)},guid:1,support:L}),typeof Symbol=="function"&&(M.fn[Symbol.iterator]=i[Symbol.iterator]),M.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(x,U){_["[object "+U+"]"]=U.toLowerCase()});function we(x){var U=!!x&&"length"in x&&x.length,X=se(x);return B(x)||H(x)?!1:X==="array"||U===0||typeof U=="number"&&U>0&&U-1 in x}function Ne(x,U){return x.nodeName&&x.nodeName.toLowerCase()===U.toLowerCase()}var De=i.pop,be=i.sort,me=i.splice,Ye="[\\x20\\t\\r\\n\\f]",Ke=new RegExp("^"+Ye+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ye+"+$","g");M.contains=function(x,U){var X=U&&U.parentNode;return x===X||!!(X&&X.nodeType===1&&(x.contains?x.contains(X):x.compareDocumentPosition&&x.compareDocumentPosition(X)&16))};var Ze=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function z(x,U){return U?x==="\0"?"":x.slice(0,-1)+"\\"+x.charCodeAt(x.length-1).toString(16)+" ":"\\"+x}M.escapeSelector=function(x){return(x+"").replace(Ze,z)};var $t=q,Be=v;(function(){var x,U,X,ne,de,ge=Be,Te,rt,ot,Rt,rn,xn=M.expando,Zt=0,uo=0,Fs=lh(),Dr=lh(),lr=lh(),Ma=lh(),Ti=function(ze,mt){return ze===mt&&(de=!0),0},ed="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",td="(?:\\\\[\\da-fA-F]{1,6}"+Ye+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Tr="\\["+Ye+"*("+td+")(?:"+Ye+"*([*^$|!~]?=)"+Ye+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+td+"))|)"+Ye+"*\\]",tc=":("+td+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Tr+")*)|.*)\\)|)",Br=new RegExp(Ye+"+","g"),Qi=new RegExp("^"+Ye+"*,"+Ye+"*"),fg=new RegExp("^"+Ye+"*([>+~]|"+Ye+")"+Ye+"*"),su=new RegExp(Ye+"|>"),Bd=new RegExp(tc),pg=new RegExp("^"+td+"$"),Ru={ID:new RegExp("^#("+td+")"),CLASS:new RegExp("^\\.("+td+")"),TAG:new RegExp("^("+td+"|[*])"),ATTR:new RegExp("^"+Tr),PSEUDO:new RegExp("^"+tc),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Ye+"*(even|odd|(([+-]|)(\\d*)n|)"+Ye+"*(?:([+-]|)"+Ye+"*(\\d+)|))"+Ye+"*\\)|)","i"),bool:new RegExp("^(?:"+ed+")$","i"),needsContext:new RegExp("^"+Ye+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Ye+"*((?:-\\d)?\\d*)"+Ye+"*\\)|)(?=[^-]|$)","i")},Vd=/^(?:input|select|textarea|button)$/i,ah=/^h\d$/i,xu=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,hg=/[+~]/,nc=new RegExp("\\\\[\\da-fA-F]{1,6}"+Ye+"?|\\\\([^\\r\\n\\f])","g"),ba=function(ze,mt){var Yt="0x"+ze.slice(1)-65536;return mt||(Yt<0?String.fromCharCode(Yt+65536):String.fromCharCode(Yt>>10|55296,Yt&1023|56320))},ch=function(){up()},U1=dl(function(ze){return ze.disabled===!0&&Ne(ze,"fieldset")},{dir:"parentNode",next:"legend"});function $s(){try{return Te.activeElement}catch{}}try{ge.apply(i=f.call($t.childNodes),$t.childNodes),i[$t.childNodes.length].nodeType}catch{ge={apply:function(mt,Yt){Be.apply(mt,f.call(Yt))},call:function(mt){Be.apply(mt,f.call(arguments,1))}}}function Ci(ze,mt,Yt,cn){var Sn,To,Po,ds,qo,Ls,Bs,Es=mt&&mt.ownerDocument,Ks=mt?mt.nodeType:9;if(Yt=Yt||[],typeof ze!="string"||!ze||Ks!==1&&Ks!==9&&Ks!==11)return Yt;if(!cn&&(up(mt),mt=mt||Te,ot)){if(Ks!==11&&(qo=xu.exec(ze)))if(Sn=qo[1]){if(Ks===9)if(Po=mt.getElementById(Sn)){if(Po.id===Sn)return ge.call(Yt,Po),Yt}else return Yt;else if(Es&&(Po=Es.getElementById(Sn))&&Ci.contains(mt,Po)&&Po.id===Sn)return ge.call(Yt,Po),Yt}else{if(qo[2])return ge.apply(Yt,mt.getElementsByTagName(ze)),Yt;if((Sn=qo[3])&&mt.getElementsByClassName)return ge.apply(Yt,mt.getElementsByClassName(Sn)),Yt}if(!Ma[ze+" "]&&(!Rt||!Rt.test(ze))){if(Bs=ze,Es=mt,Ks===1&&(su.test(ze)||fg.test(ze))){for(Es=hg.test(ze)&&yf(mt.parentNode)||mt,(Es!=mt||!L.scope)&&((ds=mt.getAttribute("id"))?ds=M.escapeSelector(ds):mt.setAttribute("id",ds=xn)),Ls=oc(ze),To=Ls.length;To--;)Ls[To]=(ds?"#"+ds:":scope")+" "+dp(Ls[To]);Bs=Ls.join(",")}try{return ge.apply(Yt,Es.querySelectorAll(Bs)),Yt}catch{Ma(ze,!0)}finally{ds===xn&&mt.removeAttribute("id")}}}return $a(ze.replace(Ke,"$1"),mt,Yt,cn)}function lh(){var ze=[];function mt(Yt,cn){return ze.push(Yt+" ")>U.cacheLength&&delete mt[ze.shift()],mt[Yt+" "]=cn}return mt}function kr(ze){return ze[xn]=!0,ze}function mg(ze){var mt=Te.createElement("fieldset");try{return!!ze(mt)}catch{return!1}finally{mt.parentNode&&mt.parentNode.removeChild(mt),mt=null}}function mb(ze){return function(mt){return Ne(mt,"input")&&mt.type===ze}}function SE(ze){return function(mt){return(Ne(mt,"input")||Ne(mt,"button"))&&mt.type===ze}}function gb(ze){return function(mt){return"form"in mt?mt.parentNode&&mt.disabled===!1?"label"in mt?"label"in mt.parentNode?mt.parentNode.disabled===ze:mt.disabled===ze:mt.isDisabled===ze||mt.isDisabled!==!ze&&U1(mt)===ze:mt.disabled===ze:"label"in mt?mt.disabled===ze:!1}}function Wr(ze){return kr(function(mt){return mt=+mt,kr(function(Yt,cn){for(var Sn,To=ze([],Yt.length,mt),Po=To.length;Po--;)Yt[Sn=To[Po]]&&(Yt[Sn]=!(cn[Sn]=Yt[Sn]))})})}function yf(ze){return ze&&typeof ze.getElementsByTagName<"u"&&ze}function up(ze){var mt,Yt=ze?ze.ownerDocument||ze:$t;return Yt==Te||Yt.nodeType!==9||!Yt.documentElement||(Te=Yt,rt=Te.documentElement,ot=!M.isXMLDoc(Te),rn=rt.matches||rt.webkitMatchesSelector||rt.msMatchesSelector,rt.msMatchesSelector&&$t!=Te&&(mt=Te.defaultView)&&mt.top!==mt&&mt.addEventListener("unload",ch),L.getById=mg(function(cn){return rt.appendChild(cn).id=M.expando,!Te.getElementsByName||!Te.getElementsByName(M.expando).length}),L.disconnectedMatch=mg(function(cn){return rn.call(cn,"*")}),L.scope=mg(function(){return Te.querySelectorAll(":scope")}),L.cssHas=mg(function(){try{return Te.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),L.getById?(U.filter.ID=function(cn){var Sn=cn.replace(nc,ba);return function(To){return To.getAttribute("id")===Sn}},U.find.ID=function(cn,Sn){if(typeof Sn.getElementById<"u"&&ot){var To=Sn.getElementById(cn);return To?[To]:[]}}):(U.filter.ID=function(cn){var Sn=cn.replace(nc,ba);return function(To){var Po=typeof To.getAttributeNode<"u"&&To.getAttributeNode("id");return Po&&Po.value===Sn}},U.find.ID=function(cn,Sn){if(typeof Sn.getElementById<"u"&&ot){var To,Po,ds,qo=Sn.getElementById(cn);if(qo){if(To=qo.getAttributeNode("id"),To&&To.value===cn)return[qo];for(ds=Sn.getElementsByName(cn),Po=0;qo=ds[Po++];)if(To=qo.getAttributeNode("id"),To&&To.value===cn)return[qo]}return[]}}),U.find.TAG=function(cn,Sn){return typeof Sn.getElementsByTagName<"u"?Sn.getElementsByTagName(cn):Sn.querySelectorAll(cn)},U.find.CLASS=function(cn,Sn){if(typeof Sn.getElementsByClassName<"u"&&ot)return Sn.getElementsByClassName(cn)},Rt=[],mg(function(cn){var Sn;rt.appendChild(cn).innerHTML="<a id='"+xn+"' href='' disabled='disabled'></a><select id='"+xn+"-\r\\' disabled='disabled'><option selected=''></option></select>",cn.querySelectorAll("[selected]").length||Rt.push("\\["+Ye+"*(?:value|"+ed+")"),cn.querySelectorAll("[id~="+xn+"-]").length||Rt.push("~="),cn.querySelectorAll("a#"+xn+"+*").length||Rt.push(".#.+[+~]"),cn.querySelectorAll(":checked").length||Rt.push(":checked"),Sn=Te.createElement("input"),Sn.setAttribute("type","hidden"),cn.appendChild(Sn).setAttribute("name","D"),rt.appendChild(cn).disabled=!0,cn.querySelectorAll(":disabled").length!==2&&Rt.push(":enabled",":disabled"),Sn=Te.createElement("input"),Sn.setAttribute("name",""),cn.appendChild(Sn),cn.querySelectorAll("[name='']").length||Rt.push("\\["+Ye+"*name"+Ye+"*="+Ye+`*(?:''|"")`)}),L.cssHas||Rt.push(":has"),Rt=Rt.length&&new RegExp(Rt.join("|")),Ti=function(cn,Sn){if(cn===Sn)return de=!0,0;var To=!cn.compareDocumentPosition-!Sn.compareDocumentPosition;return To||(To=(cn.ownerDocument||cn)==(Sn.ownerDocument||Sn)?cn.compareDocumentPosition(Sn):1,To&1||!L.sortDetached&&Sn.compareDocumentPosition(cn)===To?cn===Te||cn.ownerDocument==$t&&Ci.contains($t,cn)?-1:Sn===Te||Sn.ownerDocument==$t&&Ci.contains($t,Sn)?1:ne?y.call(ne,cn)-y.call(ne,Sn):0:To&4?-1:1)}),Te}Ci.matches=function(ze,mt){return Ci(ze,null,null,mt)},Ci.matchesSelector=function(ze,mt){if(up(ze),ot&&!Ma[mt+" "]&&(!Rt||!Rt.test(mt)))try{var Yt=rn.call(ze,mt);if(Yt||L.disconnectedMatch||ze.document&&ze.document.nodeType!==11)return Yt}catch{Ma(mt,!0)}return Ci(mt,Te,null,[ze]).length>0},Ci.contains=function(ze,mt){return(ze.ownerDocument||ze)!=Te&&up(ze),M.contains(ze,mt)},Ci.attr=function(ze,mt){(ze.ownerDocument||ze)!=Te&&up(ze);var Yt=U.attrHandle[mt.toLowerCase()],cn=Yt&&R.call(U.attrHandle,mt.toLowerCase())?Yt(ze,mt,!ot):void 0;return cn!==void 0?cn:ze.getAttribute(mt)},Ci.error=function(ze){throw new Error("Syntax error, unrecognized expression: "+ze)},M.uniqueSort=function(ze){var mt,Yt=[],cn=0,Sn=0;if(de=!L.sortStable,ne=!L.sortStable&&f.call(ze,0),be.call(ze,Ti),de){for(;mt=ze[Sn++];)mt===ze[Sn]&&(cn=Yt.push(Sn));for(;cn--;)me.call(ze,Yt[cn],1)}return ne=null,ze},M.fn.uniqueSort=function(){return this.pushStack(M.uniqueSort(f.apply(this)))},U=M.expr={cacheLength:50,createPseudo:kr,match:Ru,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ze){return ze[1]=ze[1].replace(nc,ba),ze[3]=(ze[3]||ze[4]||ze[5]||"").replace(nc,ba),ze[2]==="~="&&(ze[3]=" "+ze[3]+" "),ze.slice(0,4)},CHILD:function(ze){return ze[1]=ze[1].toLowerCase(),ze[1].slice(0,3)==="nth"?(ze[3]||Ci.error(ze[0]),ze[4]=+(ze[4]?ze[5]+(ze[6]||1):2*(ze[3]==="even"||ze[3]==="odd")),ze[5]=+(ze[7]+ze[8]||ze[3]==="odd")):ze[3]&&Ci.error(ze[0]),ze},PSEUDO:function(ze){var mt,Yt=!ze[6]&&ze[2];return Ru.CHILD.test(ze[0])?null:(ze[3]?ze[2]=ze[4]||ze[5]||"":Yt&&Bd.test(Yt)&&(mt=oc(Yt,!0))&&(mt=Yt.indexOf(")",Yt.length-mt)-Yt.length)&&(ze[0]=ze[0].slice(0,mt),ze[2]=Yt.slice(0,mt)),ze.slice(0,3))}},filter:{TAG:function(ze){var mt=ze.replace(nc,ba).toLowerCase();return ze==="*"?function(){return!0}:function(Yt){return Ne(Yt,mt)}},CLASS:function(ze){var mt=Fs[ze+" "];return mt||(mt=new RegExp("(^|"+Ye+")"+ze+"("+Ye+"|$)"))&&Fs(ze,function(Yt){return mt.test(typeof Yt.className=="string"&&Yt.className||typeof Yt.getAttribute<"u"&&Yt.getAttribute("class")||"")})},ATTR:function(ze,mt,Yt){return function(cn){var Sn=Ci.attr(cn,ze);return Sn==null?mt==="!=":mt?(Sn+="",mt==="="?Sn===Yt:mt==="!="?Sn!==Yt:mt==="^="?Yt&&Sn.indexOf(Yt)===0:mt==="*="?Yt&&Sn.indexOf(Yt)>-1:mt==="$="?Yt&&Sn.slice(-Yt.length)===Yt:mt==="~="?(" "+Sn.replace(Br," ")+" ").indexOf(Yt)>-1:mt==="|="?Sn===Yt||Sn.slice(0,Yt.length+1)===Yt+"-":!1):!0}},CHILD:function(ze,mt,Yt,cn,Sn){var To=ze.slice(0,3)!=="nth",Po=ze.slice(-4)!=="last",ds=mt==="of-type";return cn===1&&Sn===0?function(qo){return!!qo.parentNode}:function(qo,Ls,Bs){var Es,Ks,eo,ur,Ua,_c=To!==Po?"nextSibling":"previousSibling",Xo=qo.parentNode,sc=ds&&qo.nodeName.toLowerCase(),Ei=!Bs&&!ds,ji=!1;if(Xo){if(To){for(;_c;){for(eo=qo;eo=eo[_c];)if(ds?Ne(eo,sc):eo.nodeType===1)return!1;Ua=_c=ze==="only"&&!Ua&&"nextSibling"}return!0}if(Ua=[Po?Xo.firstChild:Xo.lastChild],Po&&Ei){for(Ks=Xo[xn]||(Xo[xn]={}),Es=Ks[ze]||[],ur=Es[0]===Zt&&Es[1],ji=ur&&Es[2],eo=ur&&Xo.childNodes[ur];eo=++ur&&eo&&eo[_c]||(ji=ur=0)||Ua.pop();)if(eo.nodeType===1&&++ji&&eo===qo){Ks[ze]=[Zt,ur,ji];break}}else if(Ei&&(Ks=qo[xn]||(qo[xn]={}),Es=Ks[ze]||[],ur=Es[0]===Zt&&Es[1],ji=ur),ji===!1)for(;(eo=++ur&&eo&&eo[_c]||(ji=ur=0)||Ua.pop())&&!((ds?Ne(eo,sc):eo.nodeType===1)&&++ji&&(Ei&&(Ks=eo[xn]||(eo[xn]={}),Ks[ze]=[Zt,ji]),eo===qo)););return ji-=Sn,ji===cn||ji%cn===0&&ji/cn>=0}}},PSEUDO:function(ze,mt){var Yt,cn=U.pseudos[ze]||U.setFilters[ze.toLowerCase()]||Ci.error("unsupported pseudo: "+ze);return cn[xn]?cn(mt):cn.length>1?(Yt=[ze,ze,"",mt],U.setFilters.hasOwnProperty(ze.toLowerCase())?kr(function(Sn,To){for(var Po,ds=cn(Sn,mt),qo=ds.length;qo--;)Po=y.call(Sn,ds[qo]),Sn[Po]=!(To[Po]=ds[qo])}):function(Sn){return cn(Sn,0,Yt)}):cn}},pseudos:{not:kr(function(ze){var mt=[],Yt=[],cn=pp(ze.replace(Ke,"$1"));return cn[xn]?kr(function(Sn,To,Po,ds){for(var qo,Ls=cn(Sn,null,ds,[]),Bs=Sn.length;Bs--;)(qo=Ls[Bs])&&(Sn[Bs]=!(To[Bs]=qo))}):function(Sn,To,Po){return mt[0]=Sn,cn(mt,null,Po,Yt),mt[0]=null,!Yt.pop()}}),has:kr(function(ze){return function(mt){return Ci(ze,mt).length>0}}),contains:kr(function(ze){return ze=ze.replace(nc,ba),function(mt){return(mt.textContent||M.text(mt)).indexOf(ze)>-1}}),lang:kr(function(ze){return pg.test(ze||"")||Ci.error("unsupported lang: "+ze),ze=ze.replace(nc,ba).toLowerCase(),function(mt){var Yt;do if(Yt=ot?mt.lang:mt.getAttribute("xml:lang")||mt.getAttribute("lang"))return Yt=Yt.toLowerCase(),Yt===ze||Yt.indexOf(ze+"-")===0;while((mt=mt.parentNode)&&mt.nodeType===1);return!1}}),target:function(ze){var mt=n.location&&n.location.hash;return mt&&mt.slice(1)===ze.id},root:function(ze){return ze===rt},focus:function(ze){return ze===$s()&&Te.hasFocus()&&!!(ze.type||ze.href||~ze.tabIndex)},enabled:gb(!1),disabled:gb(!0),checked:function(ze){return Ne(ze,"input")&&!!ze.checked||Ne(ze,"option")&&!!ze.selected},selected:function(ze){return ze.parentNode&&ze.parentNode.selectedIndex,ze.selected===!0},empty:function(ze){for(ze=ze.firstChild;ze;ze=ze.nextSibling)if(ze.nodeType<6)return!1;return!0},parent:function(ze){return!U.pseudos.empty(ze)},header:function(ze){return ah.test(ze.nodeName)},input:function(ze){return Vd.test(ze.nodeName)},button:function(ze){return Ne(ze,"input")&&ze.type==="button"||Ne(ze,"button")},text:function(ze){var mt;return Ne(ze,"input")&&ze.type==="text"&&((mt=ze.getAttribute("type"))==null||mt.toLowerCase()==="text")},first:Wr(function(){return[0]}),last:Wr(function(ze,mt){return[mt-1]}),eq:Wr(function(ze,mt,Yt){return[Yt<0?Yt+mt:Yt]}),even:Wr(function(ze,mt){for(var Yt=0;Yt<mt;Yt+=2)ze.push(Yt);return ze}),odd:Wr(function(ze,mt){for(var Yt=1;Yt<mt;Yt+=2)ze.push(Yt);return ze}),lt:Wr(function(ze,mt,Yt){var cn;for(Yt<0?cn=Yt+mt:Yt>mt?cn=mt:cn=Yt;--cn>=0;)ze.push(cn);return ze}),gt:Wr(function(ze,mt,Yt){for(var cn=Yt<0?Yt+mt:Yt;++cn<mt;)ze.push(cn);return ze})}},U.pseudos.nth=U.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})U.pseudos[x]=mb(x);for(x in{submit:!0,reset:!0})U.pseudos[x]=SE(x);function yn(){}yn.prototype=U.filters=U.pseudos,U.setFilters=new yn;function oc(ze,mt){var Yt,cn,Sn,To,Po,ds,qo,Ls=Dr[ze+" "];if(Ls)return mt?0:Ls.slice(0);for(Po=ze,ds=[],qo=U.preFilter;Po;){(!Yt||(cn=Qi.exec(Po)))&&(cn&&(Po=Po.slice(cn[0].length)||Po),ds.push(Sn=[])),Yt=!1,(cn=fg.exec(Po))&&(Yt=cn.shift(),Sn.push({value:Yt,type:cn[0].replace(Ke," ")}),Po=Po.slice(Yt.length));for(To in U.filter)(cn=Ru[To].exec(Po))&&(!qo[To]||(cn=qo[To](cn)))&&(Yt=cn.shift(),Sn.push({value:Yt,type:To,matches:cn}),Po=Po.slice(Yt.length));if(!Yt)break}return mt?Po.length:Po?Ci.error(ze):Dr(ze,ds).slice(0)}function dp(ze){for(var mt=0,Yt=ze.length,cn="";mt<Yt;mt++)cn+=ze[mt].value;return cn}function dl(ze,mt,Yt){var cn=mt.dir,Sn=mt.next,To=Sn||cn,Po=Yt&&To==="parentNode",ds=uo++;return mt.first?function(qo,Ls,Bs){for(;qo=qo[cn];)if(qo.nodeType===1||Po)return ze(qo,Ls,Bs);return!1}:function(qo,Ls,Bs){var Es,Ks,eo=[Zt,ds];if(Bs){for(;qo=qo[cn];)if((qo.nodeType===1||Po)&&ze(qo,Ls,Bs))return!0}else for(;qo=qo[cn];)if(qo.nodeType===1||Po)if(Ks=qo[xn]||(qo[xn]={}),Sn&&Ne(qo,Sn))qo=qo[cn]||qo;else{if((Es=Ks[To])&&Es[0]===Zt&&Es[1]===ds)return eo[2]=Es[2];if(Ks[To]=eo,eo[2]=ze(qo,Ls,Bs))return!0}return!1}}function fp(ze){return ze.length>1?function(mt,Yt,cn){for(var Sn=ze.length;Sn--;)if(!ze[Sn](mt,Yt,cn))return!1;return!0}:ze[0]}function vb(ze,mt,Yt){for(var cn=0,Sn=mt.length;cn<Sn;cn++)Ci(ze,mt[cn],Yt);return Yt}function Me(ze,mt,Yt,cn,Sn){for(var To,Po=[],ds=0,qo=ze.length,Ls=mt!=null;ds<qo;ds++)(To=ze[ds])&&(!Yt||Yt(To,cn,Sn))&&(Po.push(To),Ls&&mt.push(ds));return Po}function Ec(ze,mt,Yt,cn,Sn,To){return cn&&!cn[xn]&&(cn=Ec(cn)),Sn&&!Sn[xn]&&(Sn=Ec(Sn,To)),kr(function(Po,ds,qo,Ls){var Bs,Es,Ks,eo,ur=[],Ua=[],_c=ds.length,Xo=Po||vb(mt||"*",qo.nodeType?[qo]:qo,[]),sc=ze&&(Po||!mt)?Me(Xo,ur,ze,qo,Ls):Xo;if(Yt?(eo=Sn||(Po?ze:_c||cn)?[]:ds,Yt(sc,eo,qo,Ls)):eo=sc,cn)for(Bs=Me(eo,Ua),cn(Bs,[],qo,Ls),Es=Bs.length;Es--;)(Ks=Bs[Es])&&(eo[Ua[Es]]=!(sc[Ua[Es]]=Ks));if(Po){if(Sn||ze){if(Sn){for(Bs=[],Es=eo.length;Es--;)(Ks=eo[Es])&&Bs.push(sc[Es]=Ks);Sn(null,eo=[],Bs,Ls)}for(Es=eo.length;Es--;)(Ks=eo[Es])&&(Bs=Sn?y.call(Po,Ks):ur[Es])>-1&&(Po[Bs]=!(ds[Bs]=Ks))}}else eo=Me(eo===ds?eo.splice(_c,eo.length):eo),Sn?Sn(null,ds,eo,Ls):ge.apply(ds,eo)})}function Hd(ze){for(var mt,Yt,cn,Sn=ze.length,To=U.relative[ze[0].type],Po=To||U.relative[" "],ds=To?1:0,qo=dl(function(Es){return Es===mt},Po,!0),Ls=dl(function(Es){return y.call(mt,Es)>-1},Po,!0),Bs=[function(Es,Ks,eo){var ur=!To&&(eo||Ks!=X)||((mt=Ks).nodeType?qo(Es,Ks,eo):Ls(Es,Ks,eo));return mt=null,ur}];ds<Sn;ds++)if(Yt=U.relative[ze[ds].type])Bs=[dl(fp(Bs),Yt)];else{if(Yt=U.filter[ze[ds].type].apply(null,ze[ds].matches),Yt[xn]){for(cn=++ds;cn<Sn&&!U.relative[ze[cn].type];cn++);return Ec(ds>1&&fp(Bs),ds>1&&dp(ze.slice(0,ds-1).concat({value:ze[ds-2].type===" "?"*":""})).replace(Ke,"$1"),Yt,ds<cn&&Hd(ze.slice(ds,cn)),cn<Sn&&Hd(ze=ze.slice(cn)),cn<Sn&&dp(ze))}Bs.push(Yt)}return fp(Bs)}function bb(ze,mt){var Yt=mt.length>0,cn=ze.length>0,Sn=function(To,Po,ds,qo,Ls){var Bs,Es,Ks,eo=0,ur="0",Ua=To&&[],_c=[],Xo=X,sc=To||cn&&U.find.TAG("*",Ls),Ei=Zt+=Xo==null?1:Math.random()||.1,ji=sc.length;for(Ls&&(X=Po==Te||Po||Ls);ur!==ji&&(Bs=sc[ur])!=null;ur++){if(cn&&Bs){for(Es=0,!Po&&Bs.ownerDocument!=Te&&(up(Bs),ds=!ot);Ks=ze[Es++];)if(Ks(Bs,Po||Te,ds)){ge.call(qo,Bs);break}Ls&&(Zt=Ei)}Yt&&((Bs=!Ks&&Bs)&&eo--,To&&Ua.push(Bs))}if(eo+=ur,Yt&&ur!==eo){for(Es=0;Ks=mt[Es++];)Ks(Ua,_c,Po,ds);if(To){if(eo>0)for(;ur--;)Ua[ur]||_c[ur]||(_c[ur]=De.call(qo));_c=Me(_c)}ge.apply(qo,_c),Ls&&!To&&_c.length>0&&eo+mt.length>1&&M.uniqueSort(qo)}return Ls&&(Zt=Ei,X=Xo),Ua};return Yt?kr(Sn):Sn}function pp(ze,mt){var Yt,cn=[],Sn=[],To=lr[ze+" "];if(!To){for(mt||(mt=oc(ze)),Yt=mt.length;Yt--;)To=Hd(mt[Yt]),To[xn]?cn.push(To):Sn.push(To);To=lr(ze,bb(Sn,cn)),To.selector=ze}return To}function $a(ze,mt,Yt,cn){var Sn,To,Po,ds,qo,Ls=typeof ze=="function"&&ze,Bs=!cn&&oc(ze=Ls.selector||ze);if(Yt=Yt||[],Bs.length===1){if(To=Bs[0]=Bs[0].slice(0),To.length>2&&(Po=To[0]).type==="ID"&&mt.nodeType===9&&ot&&U.relative[To[1].type]){if(mt=(U.find.ID(Po.matches[0].replace(nc,ba),mt)||[])[0],mt)Ls&&(mt=mt.parentNode);else return Yt;ze=ze.slice(To.shift().value.length)}for(Sn=Ru.needsContext.test(ze)?0:To.length;Sn--&&(Po=To[Sn],!U.relative[ds=Po.type]);)if((qo=U.find[ds])&&(cn=qo(Po.matches[0].replace(nc,ba),hg.test(To[0].type)&&yf(mt.parentNode)||mt))){if(To.splice(Sn,1),ze=cn.length&&dp(To),!ze)return ge.apply(Yt,cn),Yt;break}}return(Ls||pp(ze,Bs))(cn,mt,!ot,Yt,!mt||hg.test(ze)&&yf(mt.parentNode)||mt),Yt}L.sortStable=xn.split("").sort(Ti).join("")===xn,up(),L.sortDetached=mg(function(ze){return ze.compareDocumentPosition(Te.createElement("fieldset"))&1}),M.find=Ci,M.expr[":"]=M.expr.pseudos,M.unique=M.uniqueSort,Ci.compile=pp,Ci.select=$a,Ci.setDocument=up,Ci.tokenize=oc,Ci.escape=M.escapeSelector,Ci.getText=M.text,Ci.isXML=M.isXMLDoc,Ci.selectors=M.expr,Ci.support=M.support,Ci.uniqueSort=M.uniqueSort})();var at=function(x,U,X){for(var ne=[],de=X!==void 0;(x=x[U])&&x.nodeType!==9;)if(x.nodeType===1){if(de&&M(x).is(X))break;ne.push(x)}return ne},lt=function(x,U){for(var X=[];x;x=x.nextSibling)x.nodeType===1&&x!==U&&X.push(x);return X},$e=M.expr.match.needsContext,qt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function io(x,U,X){return B(U)?M.grep(x,function(ne,de){return!!U.call(ne,de,ne)!==X}):U.nodeType?M.grep(x,function(ne){return ne===U!==X}):typeof U!="string"?M.grep(x,function(ne){return y.call(U,ne)>-1!==X}):M.filter(U,x,X)}M.filter=function(x,U,X){var ne=U[0];return X&&(x=":not("+x+")"),U.length===1&&ne.nodeType===1?M.find.matchesSelector(ne,x)?[ne]:[]:M.find.matches(x,M.grep(U,function(de){return de.nodeType===1}))},M.fn.extend({find:function(x){var U,X,ne=this.length,de=this;if(typeof x!="string")return this.pushStack(M(x).filter(function(){for(U=0;U<ne;U++)if(M.contains(de[U],this))return!0}));for(X=this.pushStack([]),U=0;U<ne;U++)M.find(x,de[U],X);return ne>1?M.uniqueSort(X):X},filter:function(x){return this.pushStack(io(this,x||[],!1))},not:function(x){return this.pushStack(io(this,x||[],!0))},is:function(x){return!!io(this,typeof x=="string"&&$e.test(x)?M(x):x||[],!1).length}});var En,Zn=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Et=M.fn.init=function(x,U,X){var ne,de;if(!x)return this;if(X=X||En,typeof x=="string")if(x[0]==="<"&&x[x.length-1]===">"&&x.length>=3?ne=[null,x,null]:ne=Zn.exec(x),ne&&(ne[1]||!U))if(ne[1]){if(U=U instanceof M?U[0]:U,M.merge(this,M.parseHTML(ne[1],U&&U.nodeType?U.ownerDocument||U:q,!0)),qt.test(ne[1])&&M.isPlainObject(U))for(ne in U)B(this[ne])?this[ne](U[ne]):this.attr(ne,U[ne]);return this}else return de=q.getElementById(ne[2]),de&&(this[0]=de,this.length=1),this;else return!U||U.jquery?(U||X).find(x):this.constructor(U).find(x);else{if(x.nodeType)return this[0]=x,this.length=1,this;if(B(x))return X.ready!==void 0?X.ready(x):x(M)}return M.makeArray(x,this)};Et.prototype=M.fn,En=M(q);var Jt=/^(?:parents|prev(?:Until|All))/,ce={children:!0,contents:!0,next:!0,prev:!0};M.fn.extend({has:function(x){var U=M(x,this),X=U.length;return this.filter(function(){for(var ne=0;ne<X;ne++)if(M.contains(this,U[ne]))return!0})},closest:function(x,U){var X,ne=0,de=this.length,ge=[],Te=typeof x!="string"&&M(x);if(!$e.test(x)){for(;ne<de;ne++)for(X=this[ne];X&&X!==U;X=X.parentNode)if(X.nodeType<11&&(Te?Te.index(X)>-1:X.nodeType===1&&M.find.matchesSelector(X,x))){ge.push(X);break}}return this.pushStack(ge.length>1?M.uniqueSort(ge):ge)},index:function(x){return x?typeof x=="string"?y.call(M(x),this[0]):y.call(this,x.jquery?x[0]:x):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(x,U){return this.pushStack(M.uniqueSort(M.merge(this.get(),M(x,U))))},addBack:function(x){return this.add(x==null?this.prevObject:this.prevObject.filter(x))}});function Hs(x,U){for(;(x=x[U])&&x.nodeType!==1;);return x}M.each({parent:function(x){var U=x.parentNode;return U&&U.nodeType!==11?U:null},parents:function(x){return at(x,"parentNode")},parentsUntil:function(x,U,X){return at(x,"parentNode",X)},next:function(x){return Hs(x,"nextSibling")},prev:function(x){return Hs(x,"previousSibling")},nextAll:function(x){return at(x,"nextSibling")},prevAll:function(x){return at(x,"previousSibling")},nextUntil:function(x,U,X){return at(x,"nextSibling",X)},prevUntil:function(x,U,X){return at(x,"previousSibling",X)},siblings:function(x){return lt((x.parentNode||{}).firstChild,x)},children:function(x){return lt(x.firstChild)},contents:function(x){return x.contentDocument!=null&&l(x.contentDocument)?x.contentDocument:(Ne(x,"template")&&(x=x.content||x),M.merge([],x.childNodes))}},function(x,U){M.fn[x]=function(X,ne){var de=M.map(this,U,X);return x.slice(-5)!=="Until"&&(ne=X),ne&&typeof ne=="string"&&(de=M.filter(ne,de)),this.length>1&&(ce[x]||M.uniqueSort(de),Jt.test(x)&&de.reverse()),this.pushStack(de)}});var Fo=/[^\x20\t\r\n\f]+/g;function yt(x){var U={};return M.each(x.match(Fo)||[],function(X,ne){U[ne]=!0}),U}M.Callbacks=function(x){x=typeof x=="string"?yt(x):M.extend({},x);var U,X,ne,de,ge=[],Te=[],rt=-1,ot=function(){for(de=de||x.once,ne=U=!0;Te.length;rt=-1)for(X=Te.shift();++rt<ge.length;)ge[rt].apply(X[0],X[1])===!1&&x.stopOnFalse&&(rt=ge.length,X=!1);x.memory||(X=!1),U=!1,de&&(X?ge=[]:ge="")},Rt={add:function(){return ge&&(X&&!U&&(rt=ge.length-1,Te.push(X)),(function rn(xn){M.each(xn,function(Zt,uo){B(uo)?(!x.unique||!Rt.has(uo))&&ge.push(uo):uo&&uo.length&&se(uo)!=="string"&&rn(uo)})})(arguments),X&&!U&&ot()),this},remove:function(){return M.each(arguments,function(rn,xn){for(var Zt;(Zt=M.inArray(xn,ge,Zt))>-1;)ge.splice(Zt,1),Zt<=rt&&rt--}),this},has:function(rn){return rn?M.inArray(rn,ge)>-1:ge.length>0},empty:function(){return ge&&(ge=[]),this},disable:function(){return de=Te=[],ge=X="",this},disabled:function(){return!ge},lock:function(){return de=Te=[],!X&&!U&&(ge=X=""),this},locked:function(){return!!de},fireWith:function(rn,xn){return de||(xn=xn||[],xn=[rn,xn.slice?xn.slice():xn],Te.push(xn),U||ot()),this},fire:function(){return Rt.fireWith(this,arguments),this},fired:function(){return!!ne}};return Rt};function Xt(x){return x}function Wn(x){throw x}function bt(x,U,X,ne){var de;try{x&&B(de=x.promise)?de.call(x).done(U).fail(X):x&&B(de=x.then)?de.call(x,U,X):U.apply(void 0,[x].slice(ne))}catch(ge){X.apply(void 0,[ge])}}M.extend({Deferred:function(x){var U=[["notify","progress",M.Callbacks("memory"),M.Callbacks("memory"),2],["resolve","done",M.Callbacks("once memory"),M.Callbacks("once memory"),0,"resolved"],["reject","fail",M.Callbacks("once memory"),M.Callbacks("once memory"),1,"rejected"]],X="pending",ne={state:function(){return X},always:function(){return de.done(arguments).fail(arguments),this},catch:function(ge){return ne.then(null,ge)},pipe:function(){var ge=arguments;return M.Deferred(function(Te){M.each(U,function(rt,ot){var Rt=B(ge[ot[4]])&&ge[ot[4]];de[ot[1]](function(){var rn=Rt&&Rt.apply(this,arguments);rn&&B(rn.promise)?rn.promise().progress(Te.notify).done(Te.resolve).fail(Te.reject):Te[ot[0]+"With"](this,Rt?[rn]:arguments)})}),ge=null}).promise()},then:function(ge,Te,rt){var ot=0;function Rt(rn,xn,Zt,uo){return function(){var Fs=this,Dr=arguments,lr=function(){var Ti,ed;if(!(rn<ot)){if(Ti=Zt.apply(Fs,Dr),Ti===xn.promise())throw new TypeError("Thenable self-resolution");ed=Ti&&(typeof Ti=="object"||typeof Ti=="function")&&Ti.then,B(ed)?uo?ed.call(Ti,Rt(ot,xn,Xt,uo),Rt(ot,xn,Wn,uo)):(ot++,ed.call(Ti,Rt(ot,xn,Xt,uo),Rt(ot,xn,Wn,uo),Rt(ot,xn,Xt,xn.notifyWith))):(Zt!==Xt&&(Fs=void 0,Dr=[Ti]),(uo||xn.resolveWith)(Fs,Dr))}},Ma=uo?lr:function(){try{lr()}catch(Ti){M.Deferred.exceptionHook&&M.Deferred.exceptionHook(Ti,Ma.error),rn+1>=ot&&(Zt!==Wn&&(Fs=void 0,Dr=[Ti]),xn.rejectWith(Fs,Dr))}};rn?Ma():(M.Deferred.getErrorHook?Ma.error=M.Deferred.getErrorHook():M.Deferred.getStackHook&&(Ma.error=M.Deferred.getStackHook()),n.setTimeout(Ma))}}return M.Deferred(function(rn){U[0][3].add(Rt(0,rn,B(rt)?rt:Xt,rn.notifyWith)),U[1][3].add(Rt(0,rn,B(ge)?ge:Xt)),U[2][3].add(Rt(0,rn,B(Te)?Te:Wn))}).promise()},promise:function(ge){return ge!=null?M.extend(ge,ne):ne}},de={};return M.each(U,function(ge,Te){var rt=Te[2],ot=Te[5];ne[Te[1]]=rt.add,ot&&rt.add(function(){X=ot},U[3-ge][2].disable,U[3-ge][3].disable,U[0][2].lock,U[0][3].lock),rt.add(Te[3].fire),de[Te[0]]=function(){return de[Te[0]+"With"](this===de?void 0:this,arguments),this},de[Te[0]+"With"]=rt.fireWith}),ne.promise(de),x&&x.call(de,de),de},when:function(x){var U=arguments.length,X=U,ne=Array(X),de=f.call(arguments),ge=M.Deferred(),Te=function(rt){return function(ot){ne[rt]=this,de[rt]=arguments.length>1?f.call(arguments):ot,--U||ge.resolveWith(ne,de)}};if(U<=1&&(bt(x,ge.done(Te(X)).resolve,ge.reject,!U),ge.state()==="pending"||B(de[X]&&de[X].then)))return ge.then();for(;X--;)bt(de[X],Te(X),ge.reject);return ge.promise()}});var Kt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;M.Deferred.exceptionHook=function(x,U){n.console&&n.console.warn&&x&&Kt.test(x.name)&&n.console.warn("jQuery.Deferred exception: "+x.message,x.stack,U)},M.readyException=function(x){n.setTimeout(function(){throw x})};var Ut=M.Deferred();M.fn.ready=function(x){return Ut.then(x).catch(function(U){M.readyException(U)}),this},M.extend({isReady:!1,readyWait:1,ready:function(x){(x===!0?--M.readyWait:M.isReady)||(M.isReady=!0,!(x!==!0&&--M.readyWait>0)&&Ut.resolveWith(q,[M]))}}),M.ready.then=Ut.then;function Ue(){q.removeEventListener("DOMContentLoaded",Ue),n.removeEventListener("load",Ue),M.ready()}q.readyState==="complete"||q.readyState!=="loading"&&!q.documentElement.doScroll?n.setTimeout(M.ready):(q.addEventListener("DOMContentLoaded",Ue),n.addEventListener("load",Ue));var dt=function(x,U,X,ne,de,ge,Te){var rt=0,ot=x.length,Rt=X==null;if(se(X)==="object"){de=!0;for(rt in X)dt(x,U,rt,X[rt],!0,ge,Te)}else if(ne!==void 0&&(de=!0,B(ne)||(Te=!0),Rt&&(Te?(U.call(x,ne),U=null):(Rt=U,U=function(rn,xn,Zt){return Rt.call(M(rn),Zt)})),U))for(;rt<ot;rt++)U(x[rt],X,Te?ne:ne.call(x[rt],rt,U(x[rt],X)));return de?x:Rt?U.call(x):ot?U(x[0],X):ge},Ot=/^-ms-/,Oe=/-([a-z])/g;function pt(x,U){return U.toUpperCase()}function Bt(x){return x.replace(Ot,"ms-").replace(Oe,pt)}var tn=function(x){return x.nodeType===1||x.nodeType===9||!+x.nodeType};function ht(){this.expando=M.expando+ht.uid++}ht.uid=1,ht.prototype={cache:function(x){var U=x[this.expando];return U||(U={},tn(x)&&(x.nodeType?x[this.expando]=U:Object.defineProperty(x,this.expando,{value:U,configurable:!0}))),U},set:function(x,U,X){var ne,de=this.cache(x);if(typeof U=="string")de[Bt(U)]=X;else for(ne in U)de[Bt(ne)]=U[ne];return de},get:function(x,U){return U===void 0?this.cache(x):x[this.expando]&&x[this.expando][Bt(U)]},access:function(x,U,X){return U===void 0||U&&typeof U=="string"&&X===void 0?this.get(x,U):(this.set(x,U,X),X!==void 0?X:U)},remove:function(x,U){var X,ne=x[this.expando];if(ne!==void 0){if(U!==void 0)for(Array.isArray(U)?U=U.map(Bt):(U=Bt(U),U=U in ne?[U]:U.match(Fo)||[]),X=U.length;X--;)delete ne[U[X]];(U===void 0||M.isEmptyObject(ne))&&(x.nodeType?x[this.expando]=void 0:delete x[this.expando])}},hasData:function(x){var U=x[this.expando];return U!==void 0&&!M.isEmptyObject(U)}};var gt=new ht,No=new ht,Ko=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Wo=/[A-Z]/g;function Jn(x){return x==="true"?!0:x==="false"?!1:x==="null"?null:x===+x+""?+x:Ko.test(x)?JSON.parse(x):x}function ys(x,U,X){var ne;if(X===void 0&&x.nodeType===1)if(ne="data-"+U.replace(Wo,"-$&").toLowerCase(),X=x.getAttribute(ne),typeof X=="string"){try{X=Jn(X)}catch{}No.set(x,U,X)}else X=void 0;return X}M.extend({hasData:function(x){return No.hasData(x)||gt.hasData(x)},data:function(x,U,X){return No.access(x,U,X)},removeData:function(x,U){No.remove(x,U)},_data:function(x,U,X){return gt.access(x,U,X)},_removeData:function(x,U){gt.remove(x,U)}}),M.fn.extend({data:function(x,U){var X,ne,de,ge=this[0],Te=ge&&ge.attributes;if(x===void 0){if(this.length&&(de=No.get(ge),ge.nodeType===1&&!gt.get(ge,"hasDataAttrs"))){for(X=Te.length;X--;)Te[X]&&(ne=Te[X].name,ne.indexOf("data-")===0&&(ne=Bt(ne.slice(5)),ys(ge,ne,de[ne])));gt.set(ge,"hasDataAttrs",!0)}return de}return typeof x=="object"?this.each(function(){No.set(this,x)}):dt(this,function(rt){var ot;if(ge&&rt===void 0)return ot=No.get(ge,x),ot!==void 0||(ot=ys(ge,x),ot!==void 0)?ot:void 0;this.each(function(){No.set(this,x,rt)})},null,U,arguments.length>1,null,!0)},removeData:function(x){return this.each(function(){No.remove(this,x)})}}),M.extend({queue:function(x,U,X){var ne;if(x)return U=(U||"fx")+"queue",ne=gt.get(x,U),X&&(!ne||Array.isArray(X)?ne=gt.access(x,U,M.makeArray(X)):ne.push(X)),ne||[]},dequeue:function(x,U){U=U||"fx";var X=M.queue(x,U),ne=X.length,de=X.shift(),ge=M._queueHooks(x,U),Te=function(){M.dequeue(x,U)};de==="inprogress"&&(de=X.shift(),ne--),de&&(U==="fx"&&X.unshift("inprogress"),delete ge.stop,de.call(x,Te,ge)),!ne&&ge&&ge.empty.fire()},_queueHooks:function(x,U){var X=U+"queueHooks";return gt.get(x,X)||gt.access(x,X,{empty:M.Callbacks("once memory").add(function(){gt.remove(x,[U+"queue",X])})})}}),M.fn.extend({queue:function(x,U){var X=2;return typeof x!="string"&&(U=x,x="fx",X--),arguments.length<X?M.queue(this[0],x):U===void 0?this:this.each(function(){var ne=M.queue(this,x,U);M._queueHooks(this,x),x==="fx"&&ne[0]!=="inprogress"&&M.dequeue(this,x)})},dequeue:function(x){return this.each(function(){M.dequeue(this,x)})},clearQueue:function(x){return this.queue(x||"fx",[])},promise:function(x,U){var X,ne=1,de=M.Deferred(),ge=this,Te=this.length,rt=function(){--ne||de.resolveWith(ge,[ge])};for(typeof x!="string"&&(U=x,x=void 0),x=x||"fx";Te--;)X=gt.get(ge[Te],x+"queueHooks"),X&&X.empty&&(ne++,X.empty.add(rt));return rt(),de.promise(U)}});var ps=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,es=new RegExp("^(?:([+-])=|)("+ps+")([a-z%]*)$","i"),is=["Top","Right","Bottom","Left"],st=q.documentElement,ft=function(x){return M.contains(x.ownerDocument,x)},It={composed:!0};st.getRootNode&&(ft=function(x){return M.contains(x.ownerDocument,x)||x.getRootNode(It)===x.ownerDocument});var Dt=function(x,U){return x=U||x,x.style.display==="none"||x.style.display===""&&ft(x)&&M.css(x,"display")==="none"};function Nn(x,U,X,ne){var de,ge,Te=20,rt=ne?function(){return ne.cur()}:function(){return M.css(x,U,"")},ot=rt(),Rt=X&&X[3]||(M.cssNumber[U]?"":"px"),rn=x.nodeType&&(M.cssNumber[U]||Rt!=="px"&&+ot)&&es.exec(M.css(x,U));if(rn&&rn[3]!==Rt){for(ot=ot/2,Rt=Rt||rn[3],rn=+ot||1;Te--;)M.style(x,U,rn+Rt),(1-ge)*(1-(ge=rt()/ot||.5))<=0&&(Te=0),rn=rn/ge;rn=rn*2,M.style(x,U,rn+Rt),X=X||[]}return X&&(rn=+rn||+ot||0,de=X[1]?rn+(X[1]+1)*X[2]:+X[2],ne&&(ne.unit=Rt,ne.start=rn,ne.end=de)),de}var $n={};function lo(x){var U,X=x.ownerDocument,ne=x.nodeName,de=$n[ne];return de||(U=X.body.appendChild(X.createElement(ne)),de=M.css(U,"display"),U.parentNode.removeChild(U),de==="none"&&(de="block"),$n[ne]=de,de)}function Vt(x,U){for(var X,ne,de=[],ge=0,Te=x.length;ge<Te;ge++)ne=x[ge],ne.style&&(X=ne.style.display,U?(X==="none"&&(de[ge]=gt.get(ne,"display")||null,de[ge]||(ne.style.display="")),ne.style.display===""&&Dt(ne)&&(de[ge]=lo(ne))):X!=="none"&&(de[ge]="none",gt.set(ne,"display",X)));for(ge=0;ge<Te;ge++)de[ge]!=null&&(x[ge].style.display=de[ge]);return x}M.fn.extend({show:function(){return Vt(this,!0)},hide:function(){return Vt(this)},toggle:function(x){return typeof x=="boolean"?x?this.show():this.hide():this.each(function(){Dt(this)?M(this).show():M(this).hide()})}});var Pn=/^(?:checkbox|radio)$/i,wn=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ko=/^$|^module$|\/(?:java|ecma)script/i;(function(){var x=q.createDocumentFragment(),U=x.appendChild(q.createElement("div")),X=q.createElement("input");X.setAttribute("type","radio"),X.setAttribute("checked","checked"),X.setAttribute("name","t"),U.appendChild(X),L.checkClone=U.cloneNode(!0).cloneNode(!0).lastChild.checked,U.innerHTML="<textarea>x</textarea>",L.noCloneChecked=!!U.cloneNode(!0).lastChild.defaultValue,U.innerHTML="<option></option>",L.option=!!U.lastChild})();var ts={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ts.tbody=ts.tfoot=ts.colgroup=ts.caption=ts.thead,ts.th=ts.td,L.option||(ts.optgroup=ts.option=[1,"<select multiple='multiple'>","</select>"]);function mn(x,U){var X;return typeof x.getElementsByTagName<"u"?X=x.getElementsByTagName(U||"*"):typeof x.querySelectorAll<"u"?X=x.querySelectorAll(U||"*"):X=[],U===void 0||U&&Ne(x,U)?M.merge([x],X):X}function wr(x,U){for(var X=0,ne=x.length;X<ne;X++)gt.set(x[X],"globalEval",!U||gt.get(U[X],"globalEval"))}var As=/<|&#?\w+;/;function Yi(x,U,X,ne,de){for(var ge,Te,rt,ot,Rt,rn,xn=U.createDocumentFragment(),Zt=[],uo=0,Fs=x.length;uo<Fs;uo++)if(ge=x[uo],ge||ge===0)if(se(ge)==="object")M.merge(Zt,ge.nodeType?[ge]:ge);else if(!As.test(ge))Zt.push(U.createTextNode(ge));else{for(Te=Te||xn.appendChild(U.createElement("div")),rt=(wn.exec(ge)||["",""])[1].toLowerCase(),ot=ts[rt]||ts._default,Te.innerHTML=ot[1]+M.htmlPrefilter(ge)+ot[2],rn=ot[0];rn--;)Te=Te.lastChild;M.merge(Zt,Te.childNodes),Te=xn.firstChild,Te.textContent=""}for(xn.textContent="",uo=0;ge=Zt[uo++];){if(ne&&M.inArray(ge,ne)>-1){de&&de.push(ge);continue}if(Rt=ft(ge),Te=mn(xn.appendChild(ge),"script"),Rt&&wr(Te),X)for(rn=0;ge=Te[rn++];)ko.test(ge.type||"")&&X.push(ge)}return xn}var Si=/^([^.]*)(?:\.(.+)|)/;function Yr(){return!0}function Ts(){return!1}function ho(x,U,X,ne,de,ge){var Te,rt;if(typeof U=="object"){typeof X!="string"&&(ne=ne||X,X=void 0);for(rt in U)ho(x,rt,X,ne,U[rt],ge);return x}if(ne==null&&de==null?(de=X,ne=X=void 0):de==null&&(typeof X=="string"?(de=ne,ne=void 0):(de=ne,ne=X,X=void 0)),de===!1)de=Ts;else if(!de)return x;return ge===1&&(Te=de,de=function(ot){return M().off(ot),Te.apply(this,arguments)},de.guid=Te.guid||(Te.guid=M.guid++)),x.each(function(){M.event.add(this,U,de,ne,X)})}M.event={global:{},add:function(x,U,X,ne,de){var ge,Te,rt,ot,Rt,rn,xn,Zt,uo,Fs,Dr,lr=gt.get(x);if(tn(x))for(X.handler&&(ge=X,X=ge.handler,de=ge.selector),de&&M.find.matchesSelector(st,de),X.guid||(X.guid=M.guid++),(ot=lr.events)||(ot=lr.events=Object.create(null)),(Te=lr.handle)||(Te=lr.handle=function(Ma){return typeof M<"u"&&M.event.triggered!==Ma.type?M.event.dispatch.apply(x,arguments):void 0}),U=(U||"").match(Fo)||[""],Rt=U.length;Rt--;)rt=Si.exec(U[Rt])||[],uo=Dr=rt[1],Fs=(rt[2]||"").split(".").sort(),uo&&(xn=M.event.special[uo]||{},uo=(de?xn.delegateType:xn.bindType)||uo,xn=M.event.special[uo]||{},rn=M.extend({type:uo,origType:Dr,data:ne,handler:X,guid:X.guid,selector:de,needsContext:de&&M.expr.match.needsContext.test(de),namespace:Fs.join(".")},ge),(Zt=ot[uo])||(Zt=ot[uo]=[],Zt.delegateCount=0,(!xn.setup||xn.setup.call(x,ne,Fs,Te)===!1)&&x.addEventListener&&x.addEventListener(uo,Te)),xn.add&&(xn.add.call(x,rn),rn.handler.guid||(rn.handler.guid=X.guid)),de?Zt.splice(Zt.delegateCount++,0,rn):Zt.push(rn),M.event.global[uo]=!0)},remove:function(x,U,X,ne,de){var ge,Te,rt,ot,Rt,rn,xn,Zt,uo,Fs,Dr,lr=gt.hasData(x)&&gt.get(x);if(!(!lr||!(ot=lr.events))){for(U=(U||"").match(Fo)||[""],Rt=U.length;Rt--;){if(rt=Si.exec(U[Rt])||[],uo=Dr=rt[1],Fs=(rt[2]||"").split(".").sort(),!uo){for(uo in ot)M.event.remove(x,uo+U[Rt],X,ne,!0);continue}for(xn=M.event.special[uo]||{},uo=(ne?xn.delegateType:xn.bindType)||uo,Zt=ot[uo]||[],rt=rt[2]&&new RegExp("(^|\\.)"+Fs.join("\\.(?:.*\\.|)")+"(\\.|$)"),Te=ge=Zt.length;ge--;)rn=Zt[ge],(de||Dr===rn.origType)&&(!X||X.guid===rn.guid)&&(!rt||rt.test(rn.namespace))&&(!ne||ne===rn.selector||ne==="**"&&rn.selector)&&(Zt.splice(ge,1),rn.selector&&Zt.delegateCount--,xn.remove&&xn.remove.call(x,rn));Te&&!Zt.length&&((!xn.teardown||xn.teardown.call(x,Fs,lr.handle)===!1)&&M.removeEvent(x,uo,lr.handle),delete ot[uo])}M.isEmptyObject(ot)&&gt.remove(x,"handle events")}},dispatch:function(x){var U,X,ne,de,ge,Te,rt=new Array(arguments.length),ot=M.event.fix(x),Rt=(gt.get(this,"events")||Object.create(null))[ot.type]||[],rn=M.event.special[ot.type]||{};for(rt[0]=ot,U=1;U<arguments.length;U++)rt[U]=arguments[U];if(ot.delegateTarget=this,!(rn.preDispatch&&rn.preDispatch.call(this,ot)===!1)){for(Te=M.event.handlers.call(this,ot,Rt),U=0;(de=Te[U++])&&!ot.isPropagationStopped();)for(ot.currentTarget=de.elem,X=0;(ge=de.handlers[X++])&&!ot.isImmediatePropagationStopped();)(!ot.rnamespace||ge.namespace===!1||ot.rnamespace.test(ge.namespace))&&(ot.handleObj=ge,ot.data=ge.data,ne=((M.event.special[ge.origType]||{}).handle||ge.handler).apply(de.elem,rt),ne!==void 0&&(ot.result=ne)===!1&&(ot.preventDefault(),ot.stopPropagation()));return rn.postDispatch&&rn.postDispatch.call(this,ot),ot.result}},handlers:function(x,U){var X,ne,de,ge,Te,rt=[],ot=U.delegateCount,Rt=x.target;if(ot&&Rt.nodeType&&!(x.type==="click"&&x.button>=1)){for(;Rt!==this;Rt=Rt.parentNode||this)if(Rt.nodeType===1&&!(x.type==="click"&&Rt.disabled===!0)){for(ge=[],Te={},X=0;X<ot;X++)ne=U[X],de=ne.selector+" ",Te[de]===void 0&&(Te[de]=ne.needsContext?M(de,this).index(Rt)>-1:M.find(de,this,null,[Rt]).length),Te[de]&&ge.push(ne);ge.length&&rt.push({elem:Rt,handlers:ge})}}return Rt=this,ot<U.length&&rt.push({elem:Rt,handlers:U.slice(ot)}),rt},addProp:function(x,U){Object.defineProperty(M.Event.prototype,x,{enumerable:!0,configurable:!0,get:B(U)?function(){if(this.originalEvent)return U(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[x]},set:function(X){Object.defineProperty(this,x,{enumerable:!0,configurable:!0,writable:!0,value:X})}})},fix:function(x){return x[M.expando]?x:new M.Event(x)},special:{load:{noBubble:!0},click:{setup:function(x){var U=this||x;return Pn.test(U.type)&&U.click&&Ne(U,"input")&&Os(U,"click",!0),!1},trigger:function(x){var U=this||x;return Pn.test(U.type)&&U.click&&Ne(U,"input")&&Os(U,"click"),!0},_default:function(x){var U=x.target;return Pn.test(U.type)&&U.click&&Ne(U,"input")&&gt.get(U,"click")||Ne(U,"a")}},beforeunload:{postDispatch:function(x){x.result!==void 0&&x.originalEvent&&(x.originalEvent.returnValue=x.result)}}}};function Os(x,U,X){if(!X){gt.get(x,U)===void 0&&M.event.add(x,U,Yr);return}gt.set(x,U,!1),M.event.add(x,U,{namespace:!1,handler:function(ne){var de,ge=gt.get(this,U);if(ne.isTrigger&1&&this[U]){if(ge)(M.event.special[U]||{}).delegateType&&ne.stopPropagation();else if(ge=f.call(arguments),gt.set(this,U,ge),this[U](),de=gt.get(this,U),gt.set(this,U,!1),ge!==de)return ne.stopImmediatePropagation(),ne.preventDefault(),de}else ge&&(gt.set(this,U,M.event.trigger(ge[0],ge.slice(1),this)),ne.stopPropagation(),ne.isImmediatePropagationStopped=Yr)}})}M.removeEvent=function(x,U,X){x.removeEventListener&&x.removeEventListener(U,X)},M.Event=function(x,U){if(!(this instanceof M.Event))return new M.Event(x,U);x&&x.type?(this.originalEvent=x,this.type=x.type,this.isDefaultPrevented=x.defaultPrevented||x.defaultPrevented===void 0&&x.returnValue===!1?Yr:Ts,this.target=x.target&&x.target.nodeType===3?x.target.parentNode:x.target,this.currentTarget=x.currentTarget,this.relatedTarget=x.relatedTarget):this.type=x,U&&M.extend(this,U),this.timeStamp=x&&x.timeStamp||Date.now(),this[M.expando]=!0},M.Event.prototype={constructor:M.Event,isDefaultPrevented:Ts,isPropagationStopped:Ts,isImmediatePropagationStopped:Ts,isSimulated:!1,preventDefault:function(){var x=this.originalEvent;this.isDefaultPrevented=Yr,x&&!this.isSimulated&&x.preventDefault()},stopPropagation:function(){var x=this.originalEvent;this.isPropagationStopped=Yr,x&&!this.isSimulated&&x.stopPropagation()},stopImmediatePropagation:function(){var x=this.originalEvent;this.isImmediatePropagationStopped=Yr,x&&!this.isSimulated&&x.stopImmediatePropagation(),this.stopPropagation()}},M.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},M.event.addProp),M.each({focus:"focusin",blur:"focusout"},function(x,U){function X(ne){if(q.documentMode){var de=gt.get(this,"handle"),ge=M.event.fix(ne);ge.type=ne.type==="focusin"?"focus":"blur",ge.isSimulated=!0,de(ne),ge.target===ge.currentTarget&&de(ge)}else M.event.simulate(U,ne.target,M.event.fix(ne))}M.event.special[x]={setup:function(){var ne;if(Os(this,x,!0),q.documentMode)ne=gt.get(this,U),ne||this.addEventListener(U,X),gt.set(this,U,(ne||0)+1);else return!1},trigger:function(){return Os(this,x),!0},teardown:function(){var ne;if(q.documentMode)ne=gt.get(this,U)-1,ne?gt.set(this,U,ne):(this.removeEventListener(U,X),gt.remove(this,U));else return!1},_default:function(ne){return gt.get(ne.target,x)},delegateType:U},M.event.special[U]={setup:function(){var ne=this.ownerDocument||this.document||this,de=q.documentMode?this:ne,ge=gt.get(de,U);ge||(q.documentMode?this.addEventListener(U,X):ne.addEventListener(x,X,!0)),gt.set(de,U,(ge||0)+1)},teardown:function(){var ne=this.ownerDocument||this.document||this,de=q.documentMode?this:ne,ge=gt.get(de,U)-1;ge?gt.set(de,U,ge):(q.documentMode?this.removeEventListener(U,X):ne.removeEventListener(x,X,!0),gt.remove(de,U))}}}),M.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(x,U){M.event.special[x]={delegateType:U,bindType:U,handle:function(X){var ne,de=this,ge=X.relatedTarget,Te=X.handleObj;return(!ge||ge!==de&&!M.contains(de,ge))&&(X.type=Te.origType,ne=Te.handler.apply(this,arguments),X.type=U),ne}}}),M.fn.extend({on:function(x,U,X,ne){return ho(this,x,U,X,ne)},one:function(x,U,X,ne){return ho(this,x,U,X,ne,1)},off:function(x,U,X){var ne,de;if(x&&x.preventDefault&&x.handleObj)return ne=x.handleObj,M(x.delegateTarget).off(ne.namespace?ne.origType+"."+ne.namespace:ne.origType,ne.selector,ne.handler),this;if(typeof x=="object"){for(de in x)this.off(de,U,x[de]);return this}return(U===!1||typeof U=="function")&&(X=U,U=void 0),X===!1&&(X=Ts),this.each(function(){M.event.remove(this,x,X,U)})}});var Xa=/<script|<style|<link/i,jc=/checked\s*(?:[^=]|=\s*.checked.)/i,eu=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function fo(x,U){return Ne(x,"table")&&Ne(U.nodeType!==11?U:U.firstChild,"tr")&&M(x).children("tbody")[0]||x}function vc(x){return x.type=(x.getAttribute("type")!==null)+"/"+x.type,x}function Ji(x){return(x.type||"").slice(0,5)==="true/"?x.type=x.type.slice(5):x.removeAttribute("type"),x}function rp(x,U){var X,ne,de,ge,Te,rt,ot;if(U.nodeType===1){if(gt.hasData(x)&&(ge=gt.get(x),ot=ge.events,ot)){gt.remove(U,"handle events");for(de in ot)for(X=0,ne=ot[de].length;X<ne;X++)M.event.add(U,de,ot[de][X])}No.hasData(x)&&(Te=No.access(x),rt=M.extend({},Te),No.set(U,rt))}}function xa(x,U){var X=U.nodeName.toLowerCase();X==="input"&&Pn.test(x.type)?U.checked=x.checked:(X==="input"||X==="textarea")&&(U.defaultValue=x.defaultValue)}function kd(x,U,X,ne){U=h(U);var de,ge,Te,rt,ot,Rt,rn=0,xn=x.length,Zt=xn-1,uo=U[0],Fs=B(uo);if(Fs||xn>1&&typeof uo=="string"&&!L.checkClone&&jc.test(uo))return x.each(function(Dr){var lr=x.eq(Dr);Fs&&(U[0]=uo.call(this,Dr,lr.html())),kd(lr,U,X,ne)});if(xn&&(de=Yi(U,x[0].ownerDocument,!1,x,ne),ge=de.firstChild,de.childNodes.length===1&&(de=ge),ge||ne)){for(Te=M.map(mn(de,"script"),vc),rt=Te.length;rn<xn;rn++)ot=de,rn!==Zt&&(ot=M.clone(ot,!0,!0),rt&&M.merge(Te,mn(ot,"script"))),X.call(x[rn],ot,rn);if(rt)for(Rt=Te[Te.length-1].ownerDocument,M.map(Te,Ji),rn=0;rn<rt;rn++)ot=Te[rn],ko.test(ot.type||"")&&!gt.access(ot,"globalEval")&&M.contains(Rt,ot)&&(ot.src&&(ot.type||"").toLowerCase()!=="module"?M._evalUrl&&!ot.noModule&&M._evalUrl(ot.src,{nonce:ot.nonce||ot.getAttribute("nonce")},Rt):K(ot.textContent.replace(eu,""),ot,Rt))}return x}function Js(x,U,X){for(var ne,de=U?M.filter(U,x):x,ge=0;(ne=de[ge])!=null;ge++)!X&&ne.nodeType===1&&M.cleanData(mn(ne)),ne.parentNode&&(X&&ft(ne)&&wr(mn(ne,"script")),ne.parentNode.removeChild(ne));return x}M.extend({htmlPrefilter:function(x){return x},clone:function(x,U,X){var ne,de,ge,Te,rt=x.cloneNode(!0),ot=ft(x);if(!L.noCloneChecked&&(x.nodeType===1||x.nodeType===11)&&!M.isXMLDoc(x))for(Te=mn(rt),ge=mn(x),ne=0,de=ge.length;ne<de;ne++)xa(ge[ne],Te[ne]);if(U)if(X)for(ge=ge||mn(x),Te=Te||mn(rt),ne=0,de=ge.length;ne<de;ne++)rp(ge[ne],Te[ne]);else rp(x,rt);return Te=mn(rt,"script"),Te.length>0&&wr(Te,!ot&&mn(x,"script")),rt},cleanData:function(x){for(var U,X,ne,de=M.event.special,ge=0;(X=x[ge])!==void 0;ge++)if(tn(X)){if(U=X[gt.expando]){if(U.events)for(ne in U.events)de[ne]?M.event.remove(X,ne):M.removeEvent(X,ne,U.handle);X[gt.expando]=void 0}X[No.expando]&&(X[No.expando]=void 0)}}}),M.fn.extend({detach:function(x){return Js(this,x,!0)},remove:function(x){return Js(this,x)},text:function(x){return dt(this,function(U){return U===void 0?M.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=U)})},null,x,arguments.length)},append:function(){return kd(this,arguments,function(x){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var U=fo(this,x);U.appendChild(x)}})},prepend:function(){return kd(this,arguments,function(x){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var U=fo(this,x);U.insertBefore(x,U.firstChild)}})},before:function(){return kd(this,arguments,function(x){this.parentNode&&this.parentNode.insertBefore(x,this)})},after:function(){return kd(this,arguments,function(x){this.parentNode&&this.parentNode.insertBefore(x,this.nextSibling)})},empty:function(){for(var x,U=0;(x=this[U])!=null;U++)x.nodeType===1&&(M.cleanData(mn(x,!1)),x.textContent="");return this},clone:function(x,U){return x=x??!1,U=U??x,this.map(function(){return M.clone(this,x,U)})},html:function(x){return dt(this,function(U){var X=this[0]||{},ne=0,de=this.length;if(U===void 0&&X.nodeType===1)return X.innerHTML;if(typeof U=="string"&&!Xa.test(U)&&!ts[(wn.exec(U)||["",""])[1].toLowerCase()]){U=M.htmlPrefilter(U);try{for(;ne<de;ne++)X=this[ne]||{},X.nodeType===1&&(M.cleanData(mn(X,!1)),X.innerHTML=U);X=0}catch{}}X&&this.empty().append(U)},null,x,arguments.length)},replaceWith:function(){var x=[];return kd(this,arguments,function(U){var X=this.parentNode;M.inArray(this,x)<0&&(M.cleanData(mn(this)),X&&X.replaceChild(U,this))},x)}}),M.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(x,U){M.fn[x]=function(X){for(var ne,de=[],ge=M(X),Te=ge.length-1,rt=0;rt<=Te;rt++)ne=rt===Te?this:this.clone(!0),M(ge[rt])[U](ne),v.apply(de,ne.get());return this.pushStack(de)}});var Iu=new RegExp("^("+ps+")(?!px)[a-z%]+$","i"),Yu=/^--/,tu=function(x){var U=x.ownerDocument.defaultView;return(!U||!U.opener)&&(U=n),U.getComputedStyle(x)},cl=function(x,U,X){var ne,de,ge={};for(de in U)ge[de]=x.style[de],x.style[de]=U[de];ne=X.call(x);for(de in U)x.style[de]=ge[de];return ne},Xi=new RegExp(is.join("|"),"i");(function(){function x(){if(Rt){ot.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Rt.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",st.appendChild(ot).appendChild(Rt);var rn=n.getComputedStyle(Rt);X=rn.top!=="1%",rt=U(rn.marginLeft)===12,Rt.style.right="60%",ge=U(rn.right)===36,ne=U(rn.width)===36,Rt.style.position="absolute",de=U(Rt.offsetWidth/3)===12,st.removeChild(ot),Rt=null}}function U(rn){return Math.round(parseFloat(rn))}var X,ne,de,ge,Te,rt,ot=q.createElement("div"),Rt=q.createElement("div");Rt.style&&(Rt.style.backgroundClip="content-box",Rt.cloneNode(!0).style.backgroundClip="",L.clearCloneStyle=Rt.style.backgroundClip==="content-box",M.extend(L,{boxSizingReliable:function(){return x(),ne},pixelBoxStyles:function(){return x(),ge},pixelPosition:function(){return x(),X},reliableMarginLeft:function(){return x(),rt},scrollboxSize:function(){return x(),de},reliableTrDimensions:function(){var rn,xn,Zt,uo;return Te==null&&(rn=q.createElement("table"),xn=q.createElement("tr"),Zt=q.createElement("div"),rn.style.cssText="position:absolute;left:-11111px;border-collapse:separate",xn.style.cssText="box-sizing:content-box;border:1px solid",xn.style.height="1px",Zt.style.height="9px",Zt.style.display="block",st.appendChild(rn).appendChild(xn).appendChild(Zt),uo=n.getComputedStyle(xn),Te=parseInt(uo.height,10)+parseInt(uo.borderTopWidth,10)+parseInt(uo.borderBottomWidth,10)===xn.offsetHeight,st.removeChild(rn)),Te}}))})();function nu(x,U,X){var ne,de,ge,Te,rt=Yu.test(U),ot=x.style;return X=X||tu(x),X&&(Te=X.getPropertyValue(U)||X[U],rt&&Te&&(Te=Te.replace(Ke,"$1")||void 0),Te===""&&!ft(x)&&(Te=M.style(x,U)),!L.pixelBoxStyles()&&Iu.test(Te)&&Xi.test(U)&&(ne=ot.width,de=ot.minWidth,ge=ot.maxWidth,ot.minWidth=ot.maxWidth=ot.width=Te,Te=X.width,ot.width=ne,ot.minWidth=de,ot.maxWidth=ge)),Te!==void 0?Te+"":Te}function Ju(x,U){return{get:function(){if(x()){delete this.get;return}return(this.get=U).apply(this,arguments)}}}var Un=["Webkit","Moz","ms"],oh=q.createElement("div").style,Md={};function Nd(x){for(var U=x[0].toUpperCase()+x.slice(1),X=Un.length;X--;)if(x=Un[X]+U,x in oh)return x}function gr(x){var U=M.cssProps[x]||Md[x];return U||(x in oh?x:Md[x]=Nd(x)||x)}var sh=/^(none|table(?!-c[ea]).+)/,zc={position:"absolute",visibility:"hidden",display:"block"},Vi={letterSpacing:"0",fontWeight:"400"};function ou(x,U,X){var ne=es.exec(U);return ne?Math.max(0,ne[2]-(X||0))+(ne[3]||"px"):U}function Pd(x,U,X,ne,de,ge){var Te=U==="width"?1:0,rt=0,ot=0,Rt=0;if(X===(ne?"border":"content"))return 0;for(;Te<4;Te+=2)X==="margin"&&(Rt+=M.css(x,X+is[Te],!0,de)),ne?(X==="content"&&(ot-=M.css(x,"padding"+is[Te],!0,de)),X!=="margin"&&(ot-=M.css(x,"border"+is[Te]+"Width",!0,de))):(ot+=M.css(x,"padding"+is[Te],!0,de),X!=="padding"?ot+=M.css(x,"border"+is[Te]+"Width",!0,de):rt+=M.css(x,"border"+is[Te]+"Width",!0,de));return!ne&&ge>=0&&(ot+=Math.max(0,Math.ceil(x["offset"+U[0].toUpperCase()+U.slice(1)]-ge-ot-rt-.5))||0),ot+Rt}function bc(x,U,X){var ne=tu(x),de=!L.boxSizingReliable()||X,ge=de&&M.css(x,"boxSizing",!1,ne)==="border-box",Te=ge,rt=nu(x,U,ne),ot="offset"+U[0].toUpperCase()+U.slice(1);if(Iu.test(rt)){if(!X)return rt;rt="auto"}return(!L.boxSizingReliable()&&ge||!L.reliableTrDimensions()&&Ne(x,"tr")||rt==="auto"||!parseFloat(rt)&&M.css(x,"display",!1,ne)==="inline")&&x.getClientRects().length&&(ge=M.css(x,"boxSizing",!1,ne)==="border-box",Te=ot in x,Te&&(rt=x[ot])),rt=parseFloat(rt)||0,rt+Pd(x,U,X||(ge?"border":"content"),Te,ne,rt)+"px"}M.extend({cssHooks:{opacity:{get:function(x,U){if(U){var X=nu(x,"opacity");return X===""?"1":X}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(x,U,X,ne){if(!(!x||x.nodeType===3||x.nodeType===8||!x.style)){var de,ge,Te,rt=Bt(U),ot=Yu.test(U),Rt=x.style;if(ot||(U=gr(rt)),Te=M.cssHooks[U]||M.cssHooks[rt],X!==void 0){if(ge=typeof X,ge==="string"&&(de=es.exec(X))&&de[1]&&(X=Nn(x,U,de),ge="number"),X==null||X!==X)return;ge==="number"&&!ot&&(X+=de&&de[3]||(M.cssNumber[rt]?"":"px")),!L.clearCloneStyle&&X===""&&U.indexOf("background")===0&&(Rt[U]="inherit"),(!Te||!("set"in Te)||(X=Te.set(x,X,ne))!==void 0)&&(ot?Rt.setProperty(U,X):Rt[U]=X)}else return Te&&"get"in Te&&(de=Te.get(x,!1,ne))!==void 0?de:Rt[U]}},css:function(x,U,X,ne){var de,ge,Te,rt=Bt(U),ot=Yu.test(U);return ot||(U=gr(rt)),Te=M.cssHooks[U]||M.cssHooks[rt],Te&&"get"in Te&&(de=Te.get(x,!0,X)),de===void 0&&(de=nu(x,U,ne)),de==="normal"&&U in Vi&&(de=Vi[U]),X===""||X?(ge=parseFloat(de),X===!0||isFinite(ge)?ge||0:de):de}}),M.each(["height","width"],function(x,U){M.cssHooks[U]={get:function(X,ne,de){if(ne)return sh.test(M.css(X,"display"))&&(!X.getClientRects().length||!X.getBoundingClientRect().width)?cl(X,zc,function(){return bc(X,U,de)}):bc(X,U,de)},set:function(X,ne,de){var ge,Te=tu(X),rt=!L.scrollboxSize()&&Te.position==="absolute",ot=rt||de,Rt=ot&&M.css(X,"boxSizing",!1,Te)==="border-box",rn=de?Pd(X,U,de,Rt,Te):0;return Rt&&rt&&(rn-=Math.ceil(X["offset"+U[0].toUpperCase()+U.slice(1)]-parseFloat(Te[U])-Pd(X,U,"border",!1,Te)-.5)),rn&&(ge=es.exec(ne))&&(ge[3]||"px")!=="px"&&(X.style[U]=ne,ne=M.css(X,U)),ou(X,ne,rn)}}}),M.cssHooks.marginLeft=Ju(L.reliableMarginLeft,function(x,U){if(U)return(parseFloat(nu(x,"marginLeft"))||x.getBoundingClientRect().left-cl(x,{marginLeft:0},function(){return x.getBoundingClientRect().left}))+"px"}),M.each({margin:"",padding:"",border:"Width"},function(x,U){M.cssHooks[x+U]={expand:function(X){for(var ne=0,de={},ge=typeof X=="string"?X.split(" "):[X];ne<4;ne++)de[x+is[ne]+U]=ge[ne]||ge[ne-2]||ge[0];return de}},x!=="margin"&&(M.cssHooks[x+U].set=ou)}),M.fn.extend({css:function(x,U){return dt(this,function(X,ne,de){var ge,Te,rt={},ot=0;if(Array.isArray(ne)){for(ge=tu(X),Te=ne.length;ot<Te;ot++)rt[ne[ot]]=M.css(X,ne[ot],!1,ge);return rt}return de!==void 0?M.style(X,ne,de):M.css(X,ne)},x,U,arguments.length>1)}});function Pr(x,U,X,ne,de){return new Pr.prototype.init(x,U,X,ne,de)}M.Tween=Pr,Pr.prototype={constructor:Pr,init:function(x,U,X,ne,de,ge){this.elem=x,this.prop=X,this.easing=de||M.easing._default,this.options=U,this.start=this.now=this.cur(),this.end=ne,this.unit=ge||(M.cssNumber[X]?"":"px")},cur:function(){var x=Pr.propHooks[this.prop];return x&&x.get?x.get(this):Pr.propHooks._default.get(this)},run:function(x){var U,X=Pr.propHooks[this.prop];return this.options.duration?this.pos=U=M.easing[this.easing](x,this.options.duration*x,0,1,this.options.duration):this.pos=U=x,this.now=(this.end-this.start)*U+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),X&&X.set?X.set(this):Pr.propHooks._default.set(this),this}},Pr.prototype.init.prototype=Pr.prototype,Pr.propHooks={_default:{get:function(x){var U;return x.elem.nodeType!==1||x.elem[x.prop]!=null&&x.elem.style[x.prop]==null?x.elem[x.prop]:(U=M.css(x.elem,x.prop,""),!U||U==="auto"?0:U)},set:function(x){M.fx.step[x.prop]?M.fx.step[x.prop](x):x.elem.nodeType===1&&(M.cssHooks[x.prop]||x.elem.style[gr(x.prop)]!=null)?M.style(x.elem,x.prop,x.now+x.unit):x.elem[x.prop]=x.now}}},Pr.propHooks.scrollTop=Pr.propHooks.scrollLeft={set:function(x){x.elem.nodeType&&x.elem.parentNode&&(x.elem[x.prop]=x.now)}},M.easing={linear:function(x){return x},swing:function(x){return .5-Math.cos(x*Math.PI)/2},_default:"swing"},M.fx=Pr.prototype.init,M.fx.step={};var Qa,Gi,sm=/^(?:toggle|show|hide)$/,rm=/queueHooks$/;function yc(){Gi&&(q.hidden===!1&&n.requestAnimationFrame?n.requestAnimationFrame(yc):n.setTimeout(yc,M.fx.interval),M.fx.tick())}function ll(){return n.setTimeout(function(){Qa=void 0}),Qa=Date.now()}function Tl(x,U){var X,ne=0,de={height:x};for(U=U?1:0;ne<4;ne+=2-U)X=is[ne],de["margin"+X]=de["padding"+X]=x;return U&&(de.opacity=de.width=x),de}function rh(x,U,X){for(var ne,de=(ai.tweeners[U]||[]).concat(ai.tweeners["*"]),ge=0,Te=de.length;ge<Te;ge++)if(ne=de[ge].call(X,U,x))return ne}function ii(x,U,X){var ne,de,ge,Te,rt,ot,Rt,rn,xn="width"in U||"height"in U,Zt=this,uo={},Fs=x.style,Dr=x.nodeType&&Dt(x),lr=gt.get(x,"fxshow");X.queue||(Te=M._queueHooks(x,"fx"),Te.unqueued==null&&(Te.unqueued=0,rt=Te.empty.fire,Te.empty.fire=function(){Te.unqueued||rt()}),Te.unqueued++,Zt.always(function(){Zt.always(function(){Te.unqueued--,M.queue(x,"fx").length||Te.empty.fire()})}));for(ne in U)if(de=U[ne],sm.test(de)){if(delete U[ne],ge=ge||de==="toggle",de===(Dr?"hide":"show"))if(de==="show"&&lr&&lr[ne]!==void 0)Dr=!0;else continue;uo[ne]=lr&&lr[ne]||M.style(x,ne)}if(ot=!M.isEmptyObject(U),!(!ot&&M.isEmptyObject(uo))){xn&&x.nodeType===1&&(X.overflow=[Fs.overflow,Fs.overflowX,Fs.overflowY],Rt=lr&&lr.display,Rt==null&&(Rt=gt.get(x,"display")),rn=M.css(x,"display"),rn==="none"&&(Rt?rn=Rt:(Vt([x],!0),Rt=x.style.display||Rt,rn=M.css(x,"display"),Vt([x]))),(rn==="inline"||rn==="inline-block"&&Rt!=null)&&M.css(x,"float")==="none"&&(ot||(Zt.done(function(){Fs.display=Rt}),Rt==null&&(rn=Fs.display,Rt=rn==="none"?"":rn)),Fs.display="inline-block")),X.overflow&&(Fs.overflow="hidden",Zt.always(function(){Fs.overflow=X.overflow[0],Fs.overflowX=X.overflow[1],Fs.overflowY=X.overflow[2]})),ot=!1;for(ne in uo)ot||(lr?"hidden"in lr&&(Dr=lr.hidden):lr=gt.access(x,"fxshow",{display:Rt}),ge&&(lr.hidden=!Dr),Dr&&Vt([x],!0),Zt.done(function(){Dr||Vt([x]),gt.remove(x,"fxshow");for(ne in uo)M.style(x,ne,uo[ne])})),ot=rh(Dr?lr[ne]:0,ne,Zt),ne in lr||(lr[ne]=ot.start,Dr&&(ot.end=ot.start,ot.start=0))}}function $o(x,U){var X,ne,de,ge,Te;for(X in x)if(ne=Bt(X),de=U[ne],ge=x[X],Array.isArray(ge)&&(de=ge[1],ge=x[X]=ge[0]),X!==ne&&(x[ne]=ge,delete x[X]),Te=M.cssHooks[ne],Te&&"expand"in Te){ge=Te.expand(ge),delete x[ne];for(X in ge)X in x||(x[X]=ge[X],U[X]=de)}else U[ne]=de}function ai(x,U,X){var ne,de,ge=0,Te=ai.prefilters.length,rt=M.Deferred().always(function(){delete ot.elem}),ot=function(){if(de)return!1;for(var xn=Qa||ll(),Zt=Math.max(0,Rt.startTime+Rt.duration-xn),uo=Zt/Rt.duration||0,Fs=1-uo,Dr=0,lr=Rt.tweens.length;Dr<lr;Dr++)Rt.tweens[Dr].run(Fs);return rt.notifyWith(x,[Rt,Fs,Zt]),Fs<1&&lr?Zt:(lr||rt.notifyWith(x,[Rt,1,0]),rt.resolveWith(x,[Rt]),!1)},Rt=rt.promise({elem:x,props:M.extend({},U),opts:M.extend(!0,{specialEasing:{},easing:M.easing._default},X),originalProperties:U,originalOptions:X,startTime:Qa||ll(),duration:X.duration,tweens:[],createTween:function(xn,Zt){var uo=M.Tween(x,Rt.opts,xn,Zt,Rt.opts.specialEasing[xn]||Rt.opts.easing);return Rt.tweens.push(uo),uo},stop:function(xn){var Zt=0,uo=xn?Rt.tweens.length:0;if(de)return this;for(de=!0;Zt<uo;Zt++)Rt.tweens[Zt].run(1);return xn?(rt.notifyWith(x,[Rt,1,0]),rt.resolveWith(x,[Rt,xn])):rt.rejectWith(x,[Rt,xn]),this}}),rn=Rt.props;for($o(rn,Rt.opts.specialEasing);ge<Te;ge++)if(ne=ai.prefilters[ge].call(Rt,x,rn,Rt.opts),ne)return B(ne.stop)&&(M._queueHooks(Rt.elem,Rt.opts.queue).stop=ne.stop.bind(ne)),ne;return M.map(rn,rh,Rt),B(Rt.opts.start)&&Rt.opts.start.call(x,Rt),Rt.progress(Rt.opts.progress).done(Rt.opts.done,Rt.opts.complete).fail(Rt.opts.fail).always(Rt.opts.always),M.fx.timer(M.extend(ot,{elem:x,anim:Rt,queue:Rt.opts.queue})),Rt}M.Animation=M.extend(ai,{tweeners:{"*":[function(x,U){var X=this.createTween(x,U);return Nn(X.elem,x,es.exec(U),X),X}]},tweener:function(x,U){B(x)?(U=x,x=["*"]):x=x.match(Fo);for(var X,ne=0,de=x.length;ne<de;ne++)X=x[ne],ai.tweeners[X]=ai.tweeners[X]||[],ai.tweeners[X].unshift(U)},prefilters:[ii],prefilter:function(x,U){U?ai.prefilters.unshift(x):ai.prefilters.push(x)}}),M.speed=function(x,U,X){var ne=x&&typeof x=="object"?M.extend({},x):{complete:X||!X&&U||B(x)&&x,duration:x,easing:X&&U||U&&!B(U)&&U};return M.fx.off?ne.duration=0:typeof ne.duration!="number"&&(ne.duration in M.fx.speeds?ne.duration=M.fx.speeds[ne.duration]:ne.duration=M.fx.speeds._default),(ne.queue==null||ne.queue===!0)&&(ne.queue="fx"),ne.old=ne.complete,ne.complete=function(){B(ne.old)&&ne.old.call(this),ne.queue&&M.dequeue(this,ne.queue)},ne},M.fn.extend({fadeTo:function(x,U,X,ne){return this.filter(Dt).css("opacity",0).show().end().animate({opacity:U},x,X,ne)},animate:function(x,U,X,ne){var de=M.isEmptyObject(x),ge=M.speed(U,X,ne),Te=function(){var rt=ai(this,M.extend({},x),ge);(de||gt.get(this,"finish"))&&rt.stop(!0)};return Te.finish=Te,de||ge.queue===!1?this.each(Te):this.queue(ge.queue,Te)},stop:function(x,U,X){var ne=function(de){var ge=de.stop;delete de.stop,ge(X)};return typeof x!="string"&&(X=U,U=x,x=void 0),U&&this.queue(x||"fx",[]),this.each(function(){var de=!0,ge=x!=null&&x+"queueHooks",Te=M.timers,rt=gt.get(this);if(ge)rt[ge]&&rt[ge].stop&&ne(rt[ge]);else for(ge in rt)rt[ge]&&rt[ge].stop&&rm.test(ge)&&ne(rt[ge]);for(ge=Te.length;ge--;)Te[ge].elem===this&&(x==null||Te[ge].queue===x)&&(Te[ge].anim.stop(X),de=!1,Te.splice(ge,1));(de||!X)&&M.dequeue(this,x)})},finish:function(x){return x!==!1&&(x=x||"fx"),this.each(function(){var U,X=gt.get(this),ne=X[x+"queue"],de=X[x+"queueHooks"],ge=M.timers,Te=ne?ne.length:0;for(X.finish=!0,M.queue(this,x,[]),de&&de.stop&&de.stop.call(this,!0),U=ge.length;U--;)ge[U].elem===this&&ge[U].queue===x&&(ge[U].anim.stop(!0),ge.splice(U,1));for(U=0;U<Te;U++)ne[U]&&ne[U].finish&&ne[U].finish.call(this);delete X.finish})}}),M.each(["toggle","show","hide"],function(x,U){var X=M.fn[U];M.fn[U]=function(ne,de,ge){return ne==null||typeof ne=="boolean"?X.apply(this,arguments):this.animate(Tl(U,!0),ne,de,ge)}}),M.each({slideDown:Tl("show"),slideUp:Tl("hide"),slideToggle:Tl("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(x,U){M.fn[x]=function(X,ne,de){return this.animate(U,X,ne,de)}}),M.timers=[],M.fx.tick=function(){var x,U=0,X=M.timers;for(Qa=Date.now();U<X.length;U++)x=X[U],!x()&&X[U]===x&&X.splice(U--,1);X.length||M.fx.stop(),Qa=void 0},M.fx.timer=function(x){M.timers.push(x),M.fx.start()},M.fx.interval=13,M.fx.start=function(){Gi||(Gi=!0,yc())},M.fx.stop=function(){Gi=null},M.fx.speeds={slow:600,fast:200,_default:400},M.fn.delay=function(x,U){return x=M.fx&&M.fx.speeds[x]||x,U=U||"fx",this.queue(U,function(X,ne){var de=n.setTimeout(X,x);ne.stop=function(){n.clearTimeout(de)}})},(function(){var x=q.createElement("input"),U=q.createElement("select"),X=U.appendChild(q.createElement("option"));x.type="checkbox",L.checkOn=x.value!=="",L.optSelected=X.selected,x=q.createElement("input"),x.value="t",x.type="radio",L.radioValue=x.value==="t"})();var Da,Lr=M.expr.attrHandle;M.fn.extend({attr:function(x,U){return dt(this,M.attr,x,U,arguments.length>1)},removeAttr:function(x){return this.each(function(){M.removeAttr(this,x)})}}),M.extend({attr:function(x,U,X){var ne,de,ge=x.nodeType;if(!(ge===3||ge===8||ge===2)){if(typeof x.getAttribute>"u")return M.prop(x,U,X);if((ge!==1||!M.isXMLDoc(x))&&(de=M.attrHooks[U.toLowerCase()]||(M.expr.match.bool.test(U)?Da:void 0)),X!==void 0){if(X===null){M.removeAttr(x,U);return}return de&&"set"in de&&(ne=de.set(x,X,U))!==void 0?ne:(x.setAttribute(U,X+""),X)}return de&&"get"in de&&(ne=de.get(x,U))!==null?ne:(ne=M.find.attr(x,U),ne??void 0)}},attrHooks:{type:{set:function(x,U){if(!L.radioValue&&U==="radio"&&Ne(x,"input")){var X=x.value;return x.setAttribute("type",U),X&&(x.value=X),U}}}},removeAttr:function(x,U){var X,ne=0,de=U&&U.match(Fo);if(de&&x.nodeType===1)for(;X=de[ne++];)x.removeAttribute(X)}}),Da={set:function(x,U,X){return U===!1?M.removeAttr(x,X):x.setAttribute(X,X),X}},M.each(M.expr.match.bool.source.match(/\w+/g),function(x,U){var X=Lr[U]||M.find.attr;Lr[U]=function(ne,de,ge){var Te,rt,ot=de.toLowerCase();return ge||(rt=Lr[ot],Lr[ot]=Te,Te=X(ne,de,ge)!=null?ot:null,Lr[ot]=rt),Te}});var ih=/^(?:input|select|textarea|button)$/i,ip=/^(?:a|area)$/i;M.fn.extend({prop:function(x,U){return dt(this,M.prop,x,U,arguments.length>1)},removeProp:function(x){return this.each(function(){delete this[M.propFix[x]||x]})}}),M.extend({prop:function(x,U,X){var ne,de,ge=x.nodeType;if(!(ge===3||ge===8||ge===2))return(ge!==1||!M.isXMLDoc(x))&&(U=M.propFix[U]||U,de=M.propHooks[U]),X!==void 0?de&&"set"in de&&(ne=de.set(x,X,U))!==void 0?ne:x[U]=X:de&&"get"in de&&(ne=de.get(x,U))!==null?ne:x[U]},propHooks:{tabIndex:{get:function(x){var U=M.find.attr(x,"tabindex");return U?parseInt(U,10):ih.test(x.nodeName)||ip.test(x.nodeName)&&x.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),L.optSelected||(M.propHooks.selected={get:function(x){var U=x.parentNode;return U&&U.parentNode&&U.parentNode.selectedIndex,null},set:function(x){var U=x.parentNode;U&&(U.selectedIndex,U.parentNode&&U.parentNode.selectedIndex)}}),M.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){M.propFix[this.toLowerCase()]=this});function Ar(x){var U=x.match(Fo)||[];return U.join(" ")}function ec(x){return x.getAttribute&&x.getAttribute("class")||""}function Ol(x){return Array.isArray(x)?x:typeof x=="string"?x.match(Fo)||[]:[]}M.fn.extend({addClass:function(x){var U,X,ne,de,ge,Te;return B(x)?this.each(function(rt){M(this).addClass(x.call(this,rt,ec(this)))}):(U=Ol(x),U.length?this.each(function(){if(ne=ec(this),X=this.nodeType===1&&" "+Ar(ne)+" ",X){for(ge=0;ge<U.length;ge++)de=U[ge],X.indexOf(" "+de+" ")<0&&(X+=de+" ");Te=Ar(X),ne!==Te&&this.setAttribute("class",Te)}}):this)},removeClass:function(x){var U,X,ne,de,ge,Te;return B(x)?this.each(function(rt){M(this).removeClass(x.call(this,rt,ec(this)))}):arguments.length?(U=Ol(x),U.length?this.each(function(){if(ne=ec(this),X=this.nodeType===1&&" "+Ar(ne)+" ",X){for(ge=0;ge<U.length;ge++)for(de=U[ge];X.indexOf(" "+de+" ")>-1;)X=X.replace(" "+de+" "," ");Te=Ar(X),ne!==Te&&this.setAttribute("class",Te)}}):this):this.attr("class","")},toggleClass:function(x,U){var X,ne,de,ge,Te=typeof x,rt=Te==="string"||Array.isArray(x);return B(x)?this.each(function(ot){M(this).toggleClass(x.call(this,ot,ec(this),U),U)}):typeof U=="boolean"&&rt?U?this.addClass(x):this.removeClass(x):(X=Ol(x),this.each(function(){if(rt)for(ge=M(this),de=0;de<X.length;de++)ne=X[de],ge.hasClass(ne)?ge.removeClass(ne):ge.addClass(ne);else(x===void 0||Te==="boolean")&&(ne=ec(this),ne&&gt.set(this,"__className__",ne),this.setAttribute&&this.setAttribute("class",ne||x===!1?"":gt.get(this,"__className__")||""))}))},hasClass:function(x){var U,X,ne=0;for(U=" "+x+" ";X=this[ne++];)if(X.nodeType===1&&(" "+Ar(ec(X))+" ").indexOf(U)>-1)return!0;return!1}});var im=/\r/g;M.fn.extend({val:function(x){var U,X,ne,de=this[0];return arguments.length?(ne=B(x),this.each(function(ge){var Te;this.nodeType===1&&(ne?Te=x.call(this,ge,M(this).val()):Te=x,Te==null?Te="":typeof Te=="number"?Te+="":Array.isArray(Te)&&(Te=M.map(Te,function(rt){return rt==null?"":rt+""})),U=M.valHooks[this.type]||M.valHooks[this.nodeName.toLowerCase()],(!U||!("set"in U)||U.set(this,Te,"value")===void 0)&&(this.value=Te))})):de?(U=M.valHooks[de.type]||M.valHooks[de.nodeName.toLowerCase()],U&&"get"in U&&(X=U.get(de,"value"))!==void 0?X:(X=de.value,typeof X=="string"?X.replace(im,""):X??"")):void 0}}),M.extend({valHooks:{option:{get:function(x){var U=M.find.attr(x,"value");return U??Ar(M.text(x))}},select:{get:function(x){var U,X,ne,de=x.options,ge=x.selectedIndex,Te=x.type==="select-one",rt=Te?null:[],ot=Te?ge+1:de.length;for(ge<0?ne=ot:ne=Te?ge:0;ne<ot;ne++)if(X=de[ne],(X.selected||ne===ge)&&!X.disabled&&(!X.parentNode.disabled||!Ne(X.parentNode,"optgroup"))){if(U=M(X).val(),Te)return U;rt.push(U)}return rt},set:function(x,U){for(var X,ne,de=x.options,ge=M.makeArray(U),Te=de.length;Te--;)ne=de[Te],(ne.selected=M.inArray(M.valHooks.option.get(ne),ge)>-1)&&(X=!0);return X||(x.selectedIndex=-1),ge}}}}),M.each(["radio","checkbox"],function(){M.valHooks[this]={set:function(x,U){if(Array.isArray(U))return x.checked=M.inArray(M(x).val(),U)>-1}},L.checkOn||(M.valHooks[this].get=function(x){return x.getAttribute("value")===null?"on":x.value})});var Hn=n.location,Il={guid:Date.now()},ka=/\?/;M.parseXML=function(x){var U,X;if(!x||typeof x!="string")return null;try{U=new n.DOMParser().parseFromString(x,"text/xml")}catch{}return X=U&&U.getElementsByTagName("parsererror")[0],(!U||X)&&M.error("Invalid XML: "+(X?M.map(X.childNodes,function(ne){return ne.textContent}).join(`
`):x)),U};var Sc=/^(?:focusinfocus|focusoutblur)$/,ci=function(x){x.stopPropagation()};M.extend(M.event,{trigger:function(x,U,X,ne){var de,ge,Te,rt,ot,Rt,rn,xn,Zt=[X||q],uo=R.call(x,"type")?x.type:x,Fs=R.call(x,"namespace")?x.namespace.split("."):[];if(ge=xn=Te=X=X||q,!(X.nodeType===3||X.nodeType===8)&&!Sc.test(uo+M.event.triggered)&&(uo.indexOf(".")>-1&&(Fs=uo.split("."),uo=Fs.shift(),Fs.sort()),ot=uo.indexOf(":")<0&&"on"+uo,x=x[M.expando]?x:new M.Event(uo,typeof x=="object"&&x),x.isTrigger=ne?2:3,x.namespace=Fs.join("."),x.rnamespace=x.namespace?new RegExp("(^|\\.)"+Fs.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,x.result=void 0,x.target||(x.target=X),U=U==null?[x]:M.makeArray(U,[x]),rn=M.event.special[uo]||{},!(!ne&&rn.trigger&&rn.trigger.apply(X,U)===!1))){if(!ne&&!rn.noBubble&&!H(X)){for(rt=rn.delegateType||uo,Sc.test(rt+uo)||(ge=ge.parentNode);ge;ge=ge.parentNode)Zt.push(ge),Te=ge;Te===(X.ownerDocument||q)&&Zt.push(Te.defaultView||Te.parentWindow||n)}for(de=0;(ge=Zt[de++])&&!x.isPropagationStopped();)xn=ge,x.type=de>1?rt:rn.bindType||uo,Rt=(gt.get(ge,"events")||Object.create(null))[x.type]&&gt.get(ge,"handle"),Rt&&Rt.apply(ge,U),Rt=ot&&ge[ot],Rt&&Rt.apply&&tn(ge)&&(x.result=Rt.apply(ge,U),x.result===!1&&x.preventDefault());return x.type=uo,!ne&&!x.isDefaultPrevented()&&(!rn._default||rn._default.apply(Zt.pop(),U)===!1)&&tn(X)&&ot&&B(X[uo])&&!H(X)&&(Te=X[ot],Te&&(X[ot]=null),M.event.triggered=uo,x.isPropagationStopped()&&xn.addEventListener(uo,ci),X[uo](),x.isPropagationStopped()&&xn.removeEventListener(uo,ci),M.event.triggered=void 0,Te&&(X[ot]=Te)),x.result}},simulate:function(x,U,X){var ne=M.extend(new M.Event,X,{type:x,isSimulated:!0});M.event.trigger(ne,null,U)}}),M.fn.extend({trigger:function(x,U){return this.each(function(){M.event.trigger(x,U,this)})},triggerHandler:function(x,U){var X=this[0];if(X)return M.event.trigger(x,U,X,!0)}});var am=/\[\]$/,Cc=/\r?\n/g,ul=/^(?:submit|button|image|reset|file)$/i,ap=/^(?:input|select|textarea|keygen)/i;function gf(x,U,X,ne){var de;if(Array.isArray(U))M.each(U,function(ge,Te){X||am.test(x)?ne(x,Te):gf(x+"["+(typeof Te=="object"&&Te!=null?ge:"")+"]",Te,X,ne)});else if(!X&&se(U)==="object")for(de in U)gf(x+"["+de+"]",U[de],X,ne);else ne(x,U)}M.param=function(x,U){var X,ne=[],de=function(ge,Te){var rt=B(Te)?Te():Te;ne[ne.length]=encodeURIComponent(ge)+"="+encodeURIComponent(rt??"")};if(x==null)return"";if(Array.isArray(x)||x.jquery&&!M.isPlainObject(x))M.each(x,function(){de(this.name,this.value)});else for(X in x)gf(X,x[X],U,de);return ne.join("&")},M.fn.extend({serialize:function(){return M.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var x=M.prop(this,"elements");return x?M.makeArray(x):this}).filter(function(){var x=this.type;return this.name&&!M(this).is(":disabled")&&ap.test(this.nodeName)&&!ul.test(x)&&(this.checked||!Pn.test(x))}).map(function(x,U){var X=M(this).val();return X==null?null:Array.isArray(X)?M.map(X,function(ne){return{name:U.name,value:ne.replace(Cc,`\r
`)}}):{name:U.name,value:X.replace(Cc,`\r
`)}}).get()}});var Xu=/%20/g,cp=/#.*$/,vf=/([?&])_=[^&]*/,Qu=/^(.*?):[ \t]*([^\r\n]*)$/mg,bf=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,kn=/^(?:GET|HEAD)$/,Ld=/^\/\//,lp={},ve={},Ve="*/".concat("*"),it=q.createElement("a");it.href=Hn.href;function jt(x){return function(U,X){typeof U!="string"&&(X=U,U="*");var ne,de=0,ge=U.toLowerCase().match(Fo)||[];if(B(X))for(;ne=ge[de++];)ne[0]==="+"?(ne=ne.slice(1)||"*",(x[ne]=x[ne]||[]).unshift(X)):(x[ne]=x[ne]||[]).push(X)}}function Rn(x,U,X,ne){var de={},ge=x===ve;function Te(rt){var ot;return de[rt]=!0,M.each(x[rt]||[],function(Rt,rn){var xn=rn(U,X,ne);if(typeof xn=="string"&&!ge&&!de[xn])return U.dataTypes.unshift(xn),Te(xn),!1;if(ge)return!(ot=xn)}),ot}return Te(U.dataTypes[0])||!de["*"]&&Te("*")}function so(x,U){var X,ne,de=M.ajaxSettings.flatOptions||{};for(X in U)U[X]!==void 0&&((de[X]?x:ne||(ne={}))[X]=U[X]);return ne&&M.extend(!0,x,ne),x}function Is(x,U,X){for(var ne,de,ge,Te,rt=x.contents,ot=x.dataTypes;ot[0]==="*";)ot.shift(),ne===void 0&&(ne=x.mimeType||U.getResponseHeader("Content-Type"));if(ne){for(de in rt)if(rt[de]&&rt[de].test(ne)){ot.unshift(de);break}}if(ot[0]in X)ge=ot[0];else{for(de in X){if(!ot[0]||x.converters[de+" "+ot[0]]){ge=de;break}Te||(Te=de)}ge=ge||Te}if(ge)return ge!==ot[0]&&ot.unshift(ge),X[ge]}function hs(x,U,X,ne){var de,ge,Te,rt,ot,Rt={},rn=x.dataTypes.slice();if(rn[1])for(Te in x.converters)Rt[Te.toLowerCase()]=x.converters[Te];for(ge=rn.shift();ge;)if(x.responseFields[ge]&&(X[x.responseFields[ge]]=U),!ot&&ne&&x.dataFilter&&(U=x.dataFilter(U,x.dataType)),ot=ge,ge=rn.shift(),ge){if(ge==="*")ge=ot;else if(ot!=="*"&&ot!==ge){if(Te=Rt[ot+" "+ge]||Rt["* "+ge],!Te){for(de in Rt)if(rt=de.split(" "),rt[1]===ge&&(Te=Rt[ot+" "+rt[0]]||Rt["* "+rt[0]],Te)){Te===!0?Te=Rt[de]:Rt[de]!==!0&&(ge=rt[0],rn.unshift(rt[1]));break}}if(Te!==!0)if(Te&&x.throws)U=Te(U);else try{U=Te(U)}catch(xn){return{state:"parsererror",error:Te?xn:"No conversion from "+ot+" to "+ge}}}}return{state:"success",data:U}}M.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Hn.href,type:"GET",isLocal:bf.test(Hn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ve,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":M.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(x,U){return U?so(so(x,M.ajaxSettings),U):so(M.ajaxSettings,x)},ajaxPrefilter:jt(lp),ajaxTransport:jt(ve),ajax:function(x,U){typeof x=="object"&&(U=x,x=void 0),U=U||{};var X,ne,de,ge,Te,rt,ot,Rt,rn,xn,Zt=M.ajaxSetup({},U),uo=Zt.context||Zt,Fs=Zt.context&&(uo.nodeType||uo.jquery)?M(uo):M.event,Dr=M.Deferred(),lr=M.Callbacks("once memory"),Ma=Zt.statusCode||{},Ti={},ed={},td="canceled",Tr={readyState:0,getResponseHeader:function(Br){var Qi;if(ot){if(!ge)for(ge={};Qi=Qu.exec(de);)ge[Qi[1].toLowerCase()+" "]=(ge[Qi[1].toLowerCase()+" "]||[]).concat(Qi[2]);Qi=ge[Br.toLowerCase()+" "]}return Qi==null?null:Qi.join(", ")},getAllResponseHeaders:function(){return ot?de:null},setRequestHeader:function(Br,Qi){return ot==null&&(Br=ed[Br.toLowerCase()]=ed[Br.toLowerCase()]||Br,Ti[Br]=Qi),this},overrideMimeType:function(Br){return ot==null&&(Zt.mimeType=Br),this},statusCode:function(Br){var Qi;if(Br)if(ot)Tr.always(Br[Tr.status]);else for(Qi in Br)Ma[Qi]=[Ma[Qi],Br[Qi]];return this},abort:function(Br){var Qi=Br||td;return X&&X.abort(Qi),tc(0,Qi),this}};if(Dr.promise(Tr),Zt.url=((x||Zt.url||Hn.href)+"").replace(Ld,Hn.protocol+"//"),Zt.type=U.method||U.type||Zt.method||Zt.type,Zt.dataTypes=(Zt.dataType||"*").toLowerCase().match(Fo)||[""],Zt.crossDomain==null){rt=q.createElement("a");try{rt.href=Zt.url,rt.href=rt.href,Zt.crossDomain=it.protocol+"//"+it.host!=rt.protocol+"//"+rt.host}catch{Zt.crossDomain=!0}}if(Zt.data&&Zt.processData&&typeof Zt.data!="string"&&(Zt.data=M.param(Zt.data,Zt.traditional)),Rn(lp,Zt,U,Tr),ot)return Tr;Rt=M.event&&Zt.global,Rt&&M.active++===0&&M.event.trigger("ajaxStart"),Zt.type=Zt.type.toUpperCase(),Zt.hasContent=!kn.test(Zt.type),ne=Zt.url.replace(cp,""),Zt.hasContent?Zt.data&&Zt.processData&&(Zt.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Zt.data=Zt.data.replace(Xu,"+")):(xn=Zt.url.slice(ne.length),Zt.data&&(Zt.processData||typeof Zt.data=="string")&&(ne+=(ka.test(ne)?"&":"?")+Zt.data,delete Zt.data),Zt.cache===!1&&(ne=ne.replace(vf,"$1"),xn=(ka.test(ne)?"&":"?")+"_="+Il.guid+++xn),Zt.url=ne+xn),Zt.ifModified&&(M.lastModified[ne]&&Tr.setRequestHeader("If-Modified-Since",M.lastModified[ne]),M.etag[ne]&&Tr.setRequestHeader("If-None-Match",M.etag[ne])),(Zt.data&&Zt.hasContent&&Zt.contentType!==!1||U.contentType)&&Tr.setRequestHeader("Content-Type",Zt.contentType),Tr.setRequestHeader("Accept",Zt.dataTypes[0]&&Zt.accepts[Zt.dataTypes[0]]?Zt.accepts[Zt.dataTypes[0]]+(Zt.dataTypes[0]!=="*"?", "+Ve+"; q=0.01":""):Zt.accepts["*"]);for(rn in Zt.headers)Tr.setRequestHeader(rn,Zt.headers[rn]);if(Zt.beforeSend&&(Zt.beforeSend.call(uo,Tr,Zt)===!1||ot))return Tr.abort();if(td="abort",lr.add(Zt.complete),Tr.done(Zt.success),Tr.fail(Zt.error),X=Rn(ve,Zt,U,Tr),!X)tc(-1,"No Transport");else{if(Tr.readyState=1,Rt&&Fs.trigger("ajaxSend",[Tr,Zt]),ot)return Tr;Zt.async&&Zt.timeout>0&&(Te=n.setTimeout(function(){Tr.abort("timeout")},Zt.timeout));try{ot=!1,X.send(Ti,tc)}catch(Br){if(ot)throw Br;tc(-1,Br)}}function tc(Br,Qi,fg,su){var Bd,pg,Ru,Vd,ah,xu=Qi;ot||(ot=!0,Te&&n.clearTimeout(Te),X=void 0,de=su||"",Tr.readyState=Br>0?4:0,Bd=Br>=200&&Br<300||Br===304,fg&&(Vd=Is(Zt,Tr,fg)),!Bd&&M.inArray("script",Zt.dataTypes)>-1&&M.inArray("json",Zt.dataTypes)<0&&(Zt.converters["text script"]=function(){}),Vd=hs(Zt,Vd,Tr,Bd),Bd?(Zt.ifModified&&(ah=Tr.getResponseHeader("Last-Modified"),ah&&(M.lastModified[ne]=ah),ah=Tr.getResponseHeader("etag"),ah&&(M.etag[ne]=ah)),Br===204||Zt.type==="HEAD"?xu="nocontent":Br===304?xu="notmodified":(xu=Vd.state,pg=Vd.data,Ru=Vd.error,Bd=!Ru)):(Ru=xu,(Br||!xu)&&(xu="error",Br<0&&(Br=0))),Tr.status=Br,Tr.statusText=(Qi||xu)+"",Bd?Dr.resolveWith(uo,[pg,xu,Tr]):Dr.rejectWith(uo,[Tr,xu,Ru]),Tr.statusCode(Ma),Ma=void 0,Rt&&Fs.trigger(Bd?"ajaxSuccess":"ajaxError",[Tr,Zt,Bd?pg:Ru]),lr.fireWith(uo,[Tr,xu]),Rt&&(Fs.trigger("ajaxComplete",[Tr,Zt]),--M.active||M.event.trigger("ajaxStop")))}return Tr},getJSON:function(x,U,X){return M.get(x,U,X,"json")},getScript:function(x,U){return M.get(x,void 0,U,"script")}}),M.each(["get","post"],function(x,U){M[U]=function(X,ne,de,ge){return B(ne)&&(ge=ge||de,de=ne,ne=void 0),M.ajax(M.extend({url:X,type:U,dataType:ge,data:ne,success:de},M.isPlainObject(X)&&X))}}),M.ajaxPrefilter(function(x){var U;for(U in x.headers)U.toLowerCase()==="content-type"&&(x.contentType=x.headers[U]||"")}),M._evalUrl=function(x,U,X){return M.ajax({url:x,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(ne){M.globalEval(ne,U,X)}})},M.fn.extend({wrapAll:function(x){var U;return this[0]&&(B(x)&&(x=x.call(this[0])),U=M(x,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&U.insertBefore(this[0]),U.map(function(){for(var X=this;X.firstElementChild;)X=X.firstElementChild;return X}).append(this)),this},wrapInner:function(x){return B(x)?this.each(function(U){M(this).wrapInner(x.call(this,U))}):this.each(function(){var U=M(this),X=U.contents();X.length?X.wrapAll(x):U.append(x)})},wrap:function(x){var U=B(x);return this.each(function(X){M(this).wrapAll(U?x.call(this,X):x)})},unwrap:function(x){return this.parent(x).not("body").each(function(){M(this).replaceWith(this.childNodes)}),this}}),M.expr.pseudos.hidden=function(x){return!M.expr.pseudos.visible(x)},M.expr.pseudos.visible=function(x){return!!(x.offsetWidth||x.offsetHeight||x.getClientRects().length)},M.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch{}};var Xs={0:200,1223:204},ae=M.ajaxSettings.xhr();L.cors=!!ae&&"withCredentials"in ae,L.ajax=ae=!!ae,M.ajaxTransport(function(x){var U,X;if(L.cors||ae&&!x.crossDomain)return{send:function(ne,de){var ge,Te=x.xhr();if(Te.open(x.type,x.url,x.async,x.username,x.password),x.xhrFields)for(ge in x.xhrFields)Te[ge]=x.xhrFields[ge];x.mimeType&&Te.overrideMimeType&&Te.overrideMimeType(x.mimeType),!x.crossDomain&&!ne["X-Requested-With"]&&(ne["X-Requested-With"]="XMLHttpRequest");for(ge in ne)Te.setRequestHeader(ge,ne[ge]);U=function(rt){return function(){U&&(U=X=Te.onload=Te.onerror=Te.onabort=Te.ontimeout=Te.onreadystatechange=null,rt==="abort"?Te.abort():rt==="error"?typeof Te.status!="number"?de(0,"error"):de(Te.status,Te.statusText):de(Xs[Te.status]||Te.status,Te.statusText,(Te.responseType||"text")!=="text"||typeof Te.responseText!="string"?{binary:Te.response}:{text:Te.responseText},Te.getAllResponseHeaders()))}},Te.onload=U(),X=Te.onerror=Te.ontimeout=U("error"),Te.onabort!==void 0?Te.onabort=X:Te.onreadystatechange=function(){Te.readyState===4&&n.setTimeout(function(){U&&X()})},U=U("abort");try{Te.send(x.hasContent&&x.data||null)}catch(rt){if(U)throw rt}},abort:function(){U&&U()}}}),M.ajaxPrefilter(function(x){x.crossDomain&&(x.contents.script=!1)}),M.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(x){return M.globalEval(x),x}}}),M.ajaxPrefilter("script",function(x){x.cache===void 0&&(x.cache=!1),x.crossDomain&&(x.type="GET")}),M.ajaxTransport("script",function(x){if(x.crossDomain||x.scriptAttrs){var U,X;return{send:function(ne,de){U=M("<script>").attr(x.scriptAttrs||{}).prop({charset:x.scriptCharset,src:x.url}).on("load error",X=function(ge){U.remove(),X=null,ge&&de(ge.type==="error"?404:200,ge.type)}),q.head.appendChild(U[0])},abort:function(){X&&X()}}}});var Ce=[],je=/(=)\?(?=&|$)|\?\?/;M.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var x=Ce.pop()||M.expando+"_"+Il.guid++;return this[x]=!0,x}}),M.ajaxPrefilter("json jsonp",function(x,U,X){var ne,de,ge,Te=x.jsonp!==!1&&(je.test(x.url)?"url":typeof x.data=="string"&&(x.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&je.test(x.data)&&"data");if(Te||x.dataTypes[0]==="jsonp")return ne=x.jsonpCallback=B(x.jsonpCallback)?x.jsonpCallback():x.jsonpCallback,Te?x[Te]=x[Te].replace(je,"$1"+ne):x.jsonp!==!1&&(x.url+=(ka.test(x.url)?"&":"?")+x.jsonp+"="+ne),x.converters["script json"]=function(){return ge||M.error(ne+" was not called"),ge[0]},x.dataTypes[0]="json",de=n[ne],n[ne]=function(){ge=arguments},X.always(function(){de===void 0?M(n).removeProp(ne):n[ne]=de,x[ne]&&(x.jsonpCallback=U.jsonpCallback,Ce.push(ne)),ge&&B(de)&&de(ge[0]),ge=de=void 0}),"script"}),L.createHTMLDocument=(function(){var x=q.implementation.createHTMLDocument("").body;return x.innerHTML="<form></form><form></form>",x.childNodes.length===2})(),M.parseHTML=function(x,U,X){if(typeof x!="string")return[];typeof U=="boolean"&&(X=U,U=!1);var ne,de,ge;return U||(L.createHTMLDocument?(U=q.implementation.createHTMLDocument(""),ne=U.createElement("base"),ne.href=q.location.href,U.head.appendChild(ne)):U=q),de=qt.exec(x),ge=!X&&[],de?[U.createElement(de[1])]:(de=Yi([x],U,ge),ge&&ge.length&&M(ge).remove(),M.merge([],de.childNodes))},M.fn.load=function(x,U,X){var ne,de,ge,Te=this,rt=x.indexOf(" ");return rt>-1&&(ne=Ar(x.slice(rt)),x=x.slice(0,rt)),B(U)?(X=U,U=void 0):U&&typeof U=="object"&&(de="POST"),Te.length>0&&M.ajax({url:x,type:de||"GET",dataType:"html",data:U}).done(function(ot){ge=arguments,Te.html(ne?M("<div>").append(M.parseHTML(ot)).find(ne):ot)}).always(X&&function(ot,Rt){Te.each(function(){X.apply(this,ge||[ot.responseText,Rt,ot])})}),this},M.expr.pseudos.animated=function(x){return M.grep(M.timers,function(U){return x===U.elem}).length},M.offset={setOffset:function(x,U,X){var ne,de,ge,Te,rt,ot,Rt,rn=M.css(x,"position"),xn=M(x),Zt={};rn==="static"&&(x.style.position="relative"),rt=xn.offset(),ge=M.css(x,"top"),ot=M.css(x,"left"),Rt=(rn==="absolute"||rn==="fixed")&&(ge+ot).indexOf("auto")>-1,Rt?(ne=xn.position(),Te=ne.top,de=ne.left):(Te=parseFloat(ge)||0,de=parseFloat(ot)||0),B(U)&&(U=U.call(x,X,M.extend({},rt))),U.top!=null&&(Zt.top=U.top-rt.top+Te),U.left!=null&&(Zt.left=U.left-rt.left+de),"using"in U?U.using.call(x,Zt):xn.css(Zt)}},M.fn.extend({offset:function(x){if(arguments.length)return x===void 0?this:this.each(function(de){M.offset.setOffset(this,x,de)});var U,X,ne=this[0];if(ne)return ne.getClientRects().length?(U=ne.getBoundingClientRect(),X=ne.ownerDocument.defaultView,{top:U.top+X.pageYOffset,left:U.left+X.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var x,U,X,ne=this[0],de={top:0,left:0};if(M.css(ne,"position")==="fixed")U=ne.getBoundingClientRect();else{for(U=this.offset(),X=ne.ownerDocument,x=ne.offsetParent||X.documentElement;x&&(x===X.body||x===X.documentElement)&&M.css(x,"position")==="static";)x=x.parentNode;x&&x!==ne&&x.nodeType===1&&(de=M(x).offset(),de.top+=M.css(x,"borderTopWidth",!0),de.left+=M.css(x,"borderLeftWidth",!0))}return{top:U.top-de.top-M.css(ne,"marginTop",!0),left:U.left-de.left-M.css(ne,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var x=this.offsetParent;x&&M.css(x,"position")==="static";)x=x.offsetParent;return x||st})}}),M.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(x,U){var X=U==="pageYOffset";M.fn[x]=function(ne){return dt(this,function(de,ge,Te){var rt;if(H(de)?rt=de:de.nodeType===9&&(rt=de.defaultView),Te===void 0)return rt?rt[U]:de[ge];rt?rt.scrollTo(X?rt.pageXOffset:Te,X?Te:rt.pageYOffset):de[ge]=Te},x,ne,arguments.length)}}),M.each(["top","left"],function(x,U){M.cssHooks[U]=Ju(L.pixelPosition,function(X,ne){if(ne)return ne=nu(X,U),Iu.test(ne)?M(X).position()[U]+"px":ne})}),M.each({Height:"height",Width:"width"},function(x,U){M.each({padding:"inner"+x,content:U,"":"outer"+x},function(X,ne){M.fn[ne]=function(de,ge){var Te=arguments.length&&(X||typeof de!="boolean"),rt=X||(de===!0||ge===!0?"margin":"border");return dt(this,function(ot,Rt,rn){var xn;return H(ot)?ne.indexOf("outer")===0?ot["inner"+x]:ot.document.documentElement["client"+x]:ot.nodeType===9?(xn=ot.documentElement,Math.max(ot.body["scroll"+x],xn["scroll"+x],ot.body["offset"+x],xn["offset"+x],xn["client"+x])):rn===void 0?M.css(ot,Rt,rt):M.style(ot,Rt,rn,rt)},U,Te?de:void 0,Te)}})}),M.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(x,U){M.fn[U]=function(X){return this.on(U,X)}}),M.fn.extend({bind:function(x,U,X){return this.on(x,null,U,X)},unbind:function(x,U){return this.off(x,null,U)},delegate:function(x,U,X,ne){return this.on(U,x,X,ne)},undelegate:function(x,U,X){return arguments.length===1?this.off(x,"**"):this.off(U,x||"**",X)},hover:function(x,U){return this.on("mouseenter",x).on("mouseleave",U||x)}}),M.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(x,U){M.fn[U]=function(X,ne){return arguments.length>0?this.on(U,null,X,ne):this.trigger(U)}});var At=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;M.proxy=function(x,U){var X,ne,de;if(typeof U=="string"&&(X=x[U],U=x,x=X),!!B(x))return ne=f.call(arguments,2),de=function(){return x.apply(U||this,ne.concat(f.call(arguments)))},de.guid=x.guid=x.guid||M.guid++,de},M.holdReady=function(x){x?M.readyWait++:M.ready(!0)},M.isArray=Array.isArray,M.parseJSON=JSON.parse,M.nodeName=Ne,M.isFunction=B,M.isWindow=H,M.camelCase=Bt,M.type=se,M.now=Date.now,M.isNumeric=function(x){var U=M.type(x);return(U==="number"||U==="string")&&!isNaN(x-parseFloat(x))},M.trim=function(x){return x==null?"":(x+"").replace(At,"$1")};var to=n.jQuery,Ps=n.$;return M.noConflict=function(x){return n.$===M&&(n.$=Ps),x&&n.jQuery===M&&(n.jQuery=to),M},typeof r>"u"&&(n.jQuery=n.$=M),M})})(ZY)),ZY.exports}var dOe;function Zze(){return dOe||(dOe=1,(function(e){(function(n){n(["jquery"],function(r){return(function(){var i,l,f=0,h={error:"error",info:"info",success:"success",warning:"warning"},v={clear:B,remove:H,error:_,getContainer:A,info:R,options:{},subscribe:k,success:N,version:"2.1.4",warning:L},y;return v;function _(Ne,De,be){return le({type:h.error,iconClass:M().iconClasses.error,message:Ne,optionsOverride:be,title:De})}function A(Ne,De){return Ne||(Ne=M()),i=r("#"+Ne.containerId),i.length||De&&(i=K(Ne)),i}function R(Ne,De,be){return le({type:h.info,iconClass:M().iconClasses.info,message:Ne,optionsOverride:be,title:De})}function k(Ne){l=Ne}function N(Ne,De,be){return le({type:h.success,iconClass:M().iconClasses.success,message:Ne,optionsOverride:be,title:De})}function L(Ne,De,be){return le({type:h.warning,iconClass:M().iconClasses.warning,message:Ne,optionsOverride:be,title:De})}function B(Ne,De){var be=M();i||A(be),Y(Ne,be,De)||q(be)}function H(Ne){var De=M();if(i||A(De),Ne&&r(":focus",Ne).length===0){we(Ne);return}i.children().length&&i.remove()}function q(Ne){for(var De=i.children(),be=De.length-1;be>=0;be--)Y(r(De[be]),Ne)}function Y(Ne,De,be){var me=be&&be.force?be.force:!1;return Ne&&(me||r(":focus",Ne).length===0)?(Ne[De.hideMethod]({duration:De.hideDuration,easing:De.hideEasing,complete:function(){we(Ne)}}),!0):!1}function K(Ne){return i=r("<div/>").attr("id",Ne.containerId).addClass(Ne.positionClass),i.appendTo(r(Ne.target)),i}function se(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1}}function ie(Ne){l&&l(Ne)}function le(Ne){var De=M(),be=Ne.iconClass||De.iconClass;if(typeof Ne.optionsOverride<"u"&&(De=r.extend(De,Ne.optionsOverride),be=Ne.optionsOverride.iconClass||be),Xt(De,Ne))return;f++,i=A(De,!0);var me=null,Ye=r("<div/>"),Ke=r("<div/>"),Ze=r("<div/>"),z=r("<div/>"),$t=r(De.closeHtml),Be={intervalId:null,hideEta:null,maxHideTime:null},at={toastId:f,state:"visible",startTime:new Date,options:De,map:Ne};return $e(),En(),io(),ie(at),De.debug&&console&&console.log(at),Ye;function lt(Ue){return Ue==null&&(Ue=""),Ue.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function $e(){Zn(),Jt(),ce(),Hs(),Fo(),yt(),Et(),qt()}function qt(){var Ue="";switch(Ne.iconClass){case"toast-success":case"toast-info":Ue="polite";break;default:Ue="assertive"}Ye.attr("aria-live",Ue)}function io(){De.closeOnHover&&Ye.hover(Kt,bt),!De.onclick&&De.tapToDismiss&&Ye.click(Wn),De.closeButton&&$t&&$t.click(function(Ue){Ue.stopPropagation?Ue.stopPropagation():Ue.cancelBubble!==void 0&&Ue.cancelBubble!==!0&&(Ue.cancelBubble=!0),De.onCloseClick&&De.onCloseClick(Ue),Wn(!0)}),De.onclick&&Ye.click(function(Ue){De.onclick(Ue),Wn()})}function En(){Ye.hide(),Ye[De.showMethod]({duration:De.showDuration,easing:De.showEasing,complete:De.onShown}),De.timeOut>0&&(me=setTimeout(Wn,De.timeOut),Be.maxHideTime=parseFloat(De.timeOut),Be.hideEta=new Date().getTime()+Be.maxHideTime,De.progressBar&&(Be.intervalId=setInterval(Ut,10)))}function Zn(){Ne.iconClass&&Ye.addClass(De.toastClass).addClass(be)}function Et(){De.newestOnTop?i.prepend(Ye):i.append(Ye)}function Jt(){if(Ne.title){var Ue=Ne.title;De.escapeHtml&&(Ue=lt(Ne.title)),Ke.append(Ue).addClass(De.titleClass),Ye.append(Ke)}}function ce(){if(Ne.message){var Ue=Ne.message;De.escapeHtml&&(Ue=lt(Ne.message)),Ze.append(Ue).addClass(De.messageClass),Ye.append(Ze)}}function Hs(){De.closeButton&&($t.addClass(De.closeClass).attr("role","button"),Ye.prepend($t))}function Fo(){De.progressBar&&(z.addClass(De.progressClass),Ye.prepend(z))}function yt(){De.rtl&&Ye.addClass("rtl")}function Xt(Ue,dt){if(Ue.preventDuplicates){if(dt.message===y)return!0;y=dt.message}return!1}function Wn(Ue){var dt=Ue&&De.closeMethod!==!1?De.closeMethod:De.hideMethod,Ot=Ue&&De.closeDuration!==!1?De.closeDuration:De.hideDuration,Oe=Ue&&De.closeEasing!==!1?De.closeEasing:De.hideEasing;if(!(r(":focus",Ye).length&&!Ue))return clearTimeout(Be.intervalId),Ye[dt]({duration:Ot,easing:Oe,complete:function(){we(Ye),clearTimeout(me),De.onHidden&&at.state!=="hidden"&&De.onHidden(),at.state="hidden",at.endTime=new Date,ie(at)}})}function bt(){(De.timeOut>0||De.extendedTimeOut>0)&&(me=setTimeout(Wn,De.extendedTimeOut),Be.maxHideTime=parseFloat(De.extendedTimeOut),Be.hideEta=new Date().getTime()+Be.maxHideTime)}function Kt(){clearTimeout(me),Be.hideEta=0,Ye.stop(!0,!0)[De.showMethod]({duration:De.showDuration,easing:De.showEasing})}function Ut(){var Ue=(Be.hideEta-new Date().getTime())/Be.maxHideTime*100;z.width(Ue+"%")}}function M(){return r.extend({},se(),v.options)}function we(Ne){i||(i=A()),!Ne.is(":visible")&&(Ne.remove(),Ne=null,i.children().length===0&&(i.remove(),y=void 0))}})()})})(function(n,r){e.exports?e.exports=r(Kze()):window.toastr=r(window.jQuery)})})(Upe)),Upe.exports}var Yze=Zze();const cLe=HRe(Yze);window.Alpine=VRe;VRe.start();window.ZoomVideo=Vge;window.toastr=cLe;ol.bind("[data-fancybox]",{animated:!0,dragToClose:!1,groupAll:!0});cLe.options={closeButton:!0,progressBar:!0,timeOut:"5000",extendedTimeOut:"1000",positionClass:"toast-top-right",showDuration:"300",hideDuration:"1000",showMethod:"fadeIn",hideMethod:"fadeOut"};document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".tinymce-editor").forEach(function(e){Rze.init({target:e,directionality:e.getAttribute("dir")==="rtl"?"rtl":"ltr",height:400,license_key:"gpl",toolbar:"undo redo | bold italic underline removeformat | alignleft aligncenter alignright | link | bullist numlist | outdent indent | blockquote | table | code preview",plugins:"preview directionality code lists link table advlist",menubar:!0,branding:!1,statusbar:!0,base_url:"/tinymce",suffix:".min",setup:function(n){n.on("change",function(){n.save()})}})})})});export default Jze();
